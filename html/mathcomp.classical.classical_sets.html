
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module mathcomp.classical.classical_sets</title>
<meta name="description" content="Documentation of Coq module mathcomp.classical.classical_sets" />
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
  <link rel="stylesheet" href="../css/texmath.css">
  <script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
  <script src="../texmath.js"></script>

<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module mathcomp.classical.classical_sets</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">all_ssreflect</span> <span class="id">ssralg</span> <span class="id">matrix</span> <span class="id">finmap</span> <span class="id">order</span> <span class="id">ssrnum</span>.<br/>
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">ssrint</span> <span class="id">interval</span>.<br/>
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="mathcomp.classical.mathcomp_extra.html">mathcomp_extra</a></span> <span class="id"><a href="mathcomp.classical.boolp.html">boolp</a></span>.<br/>
<br/>
<pre>
(******************************************************************************)
(* This file develops a basic theory of sets and types equipped with a        *)
(* canonical inhabitant (pointed types).                                      *)
(*                                                                            *)
(* --&gt; A decidable equality is defined for any type. It is thus possible to   *)
(*     define an eqType structure for any type using the mixin gen_eqMixin.   *)
(* --&gt; This file adds the possibility to define a choiceType structure for    *)
(*     any type thanks to an axiom gen_choiceMixin giving a choice mixin.     *)
(* --&gt; We chose to have generic mixins and no global instances of the eqType  *)
(*     and choiceType structures to let the user choose which definition of   *)
(*     equality to use and to avoid conflict with already declared instances. *)
(*                                                                            *)
(* * Sets:                                                                    *)
(*                       set T == type of sets on T.                          *)
(*                   (x \in P) == boolean membership predicate from ssrbool   *)
(*                                for set P, available thanks to a canonical  *)
(*                                predType T structure on sets on T.          *)
(*             [set x : T | P] == set of points x : T such that P holds.      *)
(*                 [set x | P] == same as before with T left implicit.        *)
(*            [set E | x in A] == set defined by the expression E for x in    *)
(*                                set A.                                      *)
(*   [set E | x in A &amp; y in B] == same as before for E depending on 2         *)
(*                                variables x and y in sets A and B.          *)
(*                        setT == full set.                                   *)
(*                        set0 == empty set.                                  *)
(*                     range f == the range of f, i.e. [set f x | x in setT]  *)
(*                     [set a] == set containing only a.                      *)
(*                 [set a : T] == same as before with the type of a made      *)
(*                                explicit.                                   *)
(*                     A `|` B == union of A and B.                           *)
(*                      a |` A == A extended with a.                          *)
(*        [set a1; a2; ..; an] == set containing only the n elements ai.      *)
(*                     A `&amp;` B == intersection of A and B.                    *)
(*                     A `*` B == product of A and B, i.e. set of pairs (a,b) *)
(*                                such that A a and B b.                      *)
(*                        A.`1 == set of points a such that there exists b so *)
(*                                that A (a, b).                              *)
(*                        A.`2 == set of points a such that there exists b so *)
(*                                that A (b, a).                              *)
(*                        ~` A == complement of A.                            *)
(*                    [set~ a] == complement of [set a].                      *)
(*                     A `\` B == complement of B in A.                       *)
(*                      A `\ a == A deprived of a.                            *)
(*                        `I_n := [set k | k &lt; n]                             *)
(*          \bigcup_(i in P) F == union of the elements of the family F whose *)
(*                                index satisfies P.                          *)
(*           \bigcup_(i : T) F == union of the family F indexed on T.         *)
(*           \bigcup_(i &lt; n) F := \bigcup_(i in `I_n) F                       *)
(*                 \bigcup_i F == same as before with T left implicit.        *)
(*          \bigcap_(i in P) F == intersection of the elements of the family  *)
(*                                F whose index satisfies P.                  *)
(*           \bigcap_(i : T) F == union of the family F indexed on T.         *)
(*           \bigcap_(i &lt; n) F := \bigcap_(i in `I_n) F                       *)
(*                 \bigcap_i F == same as before with T left implicit.        *)
(*                smallest C G := \bigcap_(A in [set M | C M /\ G `&lt;=` M]) A  *)
(*                   A `&lt;=` B &lt;-&gt; A is included in B.                         *)
(*                    A `&lt;` B := A `&lt;=` B /\ ~ (B `&lt;=` A)                     *)
(*                  A `&lt;=&gt;` B &lt;-&gt; double inclusion A `&lt;=` B and B `&lt;=` A.     *)
(*                   f @^-1` A == preimage of A by f.                         *)
(*                      f @` A == image of A by f. Notation for `image A f`.  *)
(*                    A !=set0 := exists x, A x.                              *)
(*                    [set` p] == a classical set corresponding to the        *)
(*                                predType p                                  *)
(*                     `[a, b] := [set` `[a, b]], i.e., a classical set       *)
(*                                corresponding to the interval `[a, b].      *)
(*                     `]a, b] := [set` `]a, b]]                              *)
(*                     `[a, b[ := [set` `[a, b[]                              *)
(*                     `]a, b[ := [set` `]a, b[]                              *)
(*                   `]-oo, b] := [set` `]-oo, b]]                            *)
(*                   `]-oo, b[ := [set` `]-oo, b[]                            *)
(*                   `[a, +oo[ := [set` `[a, +oo[]                            *)
(*                   `]a, +oo[ := [set` `]a, +oo[]                            *)
(*                 `]-oo, +oo[ := [set` `]-oo, +oo[]                          *)
(*               is_subset1 A &lt;-&gt; A contains only 1 element.                  *)
(*                   is_fun f &lt;-&gt; for each a, f a contains only 1 element.    *)
(*                 is_total f &lt;-&gt; for each a, f a is non empty.               *)
(*              is_totalfun f &lt;-&gt; conjunction of is_fun and is_total.         *)
(*                   xget x0 P == point x in P if it exists, x0 otherwise;    *)
(*                                P must be a set on a choiceType.            *)
(*             fun_of_rel f0 f == function that maps x to an element of f x   *)
(*                                if there is one, to f0 x otherwise.         *)
(*                    F `#` G &lt;-&gt; intersections beween elements of F an G are *)
(*                                all non empty.                              *)
(*                                                                            *)
(* * Pointed types:                                                           *)
(*                 pointedType == interface type for types equipped with a    *)
(*                                canonical inhabitant.                       *)
(*             PointedType T m == packs the term m : T to build a             *)
(*                                pointedType; T must have a choiceType       *)
(*                                structure.                                  *)
(*   [pointedType of T for cT] == T-clone of the pointedType structure cT.    *)
(*          [pointedType of T] == clone of a canonical pointedType structure  *)
(*                                on T.                                       *)
(*                       point == canonical inhabitant of a pointedType.      *)
(*                       get P == point x in P if it exists, point otherwise; *)
(*                                P must be a set on a pointedType.           *)
(*                                                                            *)
(* --&gt; Thanks to this basic set theory, we proved Zorn's Lemma, which states  *)
(*     that any ordered set such that every totally ordered subset admits an  *)
(*     upper bound has a maximal element. We also proved an analogous version *)
(*     for preorders, where maximal is replaced with premaximal: t is         *)
(*     premaximal if whenever t &lt; s we also have s &lt; t.                       *)
(*                                                                            *)
(*                      $| T | == T : Type is inhabited                       *)
(*                    squash x == proof of $| T | (with x : T)                *)
(*                  unsquash s == extract a witness from s : $| T |           *)
(* --&gt; Tactic:                                                                *)
(*   - squash x:                                                              *)
(*     solves a goal $| T | by instantiating with x or [the T of x]           *)
(*                                                                            *)
(*                trivIset D F == the sets F i, where i ranges over D : set I,*)
(*                                are pairwise-disjoint                       *)
(*                   cover D F := \bigcup_(i in D) F i                        *)
(*             partition D F A == the non-empty sets F i,where i ranges over  *)
(*                                D : set I, form a partition of A            *)
(*          pblock_index D F x == index i such that i \in D and x \in F i     *)
(*                pblock D F x := F (pblock_index D F x)                      *)
(*                                                                            *)
(*   maximal_disjoint_subcollection F A B == A is a maximal (for inclusion)   *)
(*                                   disjoint subcollection of the collection *)
(*                                   B of elements in F : I -&gt; set T          *)
(*                                                                            *)
(* * Upper and lower bounds:                                                  *)
(*              ubound A == the set of upper bounds of the set A              *)
(*              lbound A == the set of lower bounds of the set A              *)
(*   Predicates to express existence conditions of supremum and infimum of    *)
(*   sets of real numbers:                                                    *)
(*          has_ubound A := ubound A != set0                                  *)
(*             has_sup A := A != set0 /\ has_ubound A                         *)
(*          has_lbound A := lbound A != set0                                  *)
(*             has_inf A := A != set0 /\ has_lbound A                         *)
(*                                                                            *)
(*             isLub A m := m is a least upper bound of the set A             *)
(*           supremums A := set of supremums of the set A                     *)
(*         supremum x0 A == supremum of A or x0 if A is empty                 *)
(*            infimums A := set of infimums of the set A                      *)
(*          infimum x0 A == infimum of A or x0 if A is empty                  *)
(*                                                                            *)
(*               F `#` G := the classes of sets F and G intersect             *)
(*                                                                            *)
(* * sections:                                                                *)
(*           xsection A x == with A : set (T1 * T2) and x : T1 is the         *)
(*                           x-section of A                                   *)
(*           ysection A y == with A : set (T1 * T2) and y : T2 is the         *)
(*                           y-section of A                                   *)
(*                                                                            *)
(* * About the naming conventions in this file:                               *)
(* - use T, T', T1, T2, etc., aT (domain type), rT (return type) for names of *)
(*   variables in Type (or choiceType/pointedType/porderType)                 *)
(*   + use the same suffix or prefix for the sets as their containing type    *)
(*     (e.g., A1 in T1, etc.)                                                 *)
(*   + as a consequence functions are rather of type aT -&gt; rT                 *)
(* - use I, J when the type corresponds to an index                           *)
(* - sets are named A, B, C, D, etc., or Y when it is ostensibly an image set *)
(*   (i.e., of type set rT)                                                   *)
(* - indexed sets are rather named F                                          *)
(*                                                                            *)
(* * Composition of relations:                                                *)
(*                A \; B == [set x | exists z, A (x.1, z) &amp; B (z, x.2)]       *)
(*                                                                            *)
(******************************************************************************)
</pre>
<span class="kwd">Set</span> <span class="kwd">Implicit</span> <span class="kwd">Arguments</span>.<br/>
<span class="id">Unset</span> <span class="id">Strict</span> <span class="kwd">Implicit</span>.<br/>
<span class="id">Unset</span> <span class="id">Printing</span> <span class="kwd">Implicit</span> <span class="id">Defensive</span>.<br/>
<br/>
<span class="id">Declare</span> <span class="kwd">Scope</span> <span class="id">classical_set_scope</span>.<br/>
<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">set</span>' <span class="id">x</span> : <span class="id">T</span> | <span class="id">P</span> ]"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">x</span> <span class="kwd">at</span> <span class="id">level</span> 99, <span class="id">only</span> <span class="id">parsing</span>).<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">set</span>' <span class="id">x</span> | <span class="id">P</span> ]"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">x</span>, <span class="id">P</span> <span class="kwd">at</span> <span class="id">level</span> 99, <span class="id">format</span> "[ '<span class="id">set</span>'  <span class="id">x</span>  |  <span class="id">P</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">set</span>' <span class="id">E</span> | <span class="id">x</span> '<span class="kwd">in</span>' <span class="id">A</span> ]" (<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">E</span>, <span class="id">x</span> <span class="kwd">at</span> <span class="id">level</span> 99,<br/>
&nbsp;&nbsp;<span class="id">format</span> "[ '[<span class="id">hv</span>' '<span class="id">set</span>'  <span class="id">E</span> '/ '  |  <span class="id">x</span>  '<span class="kwd">in</span>'  <span class="id">A</span> ] ']'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">set</span>' <span class="id">E</span> | <span class="id">x</span> '<span class="kwd">in</span>' <span class="id">A</span> &amp; <span class="id">y</span> '<span class="kwd">in</span>' <span class="id">B</span> ]"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">E</span>, <span class="id">x</span> <span class="kwd">at</span> <span class="id">level</span> 99,<br/>
&nbsp;&nbsp;<span class="id">format</span> "[ '[<span class="id">hv</span>' '<span class="id">set</span>'  <span class="id">E</span> '/ '  |  <span class="id">x</span>  '<span class="kwd">in</span>'  <span class="id">A</span>  &amp;  <span class="id">y</span>  '<span class="kwd">in</span>'  <span class="id">B</span> ] ']'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">set</span>' <span class="id">a</span> ]"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">a</span> <span class="kwd">at</span> <span class="id">level</span> 99, <span class="id">format</span> "[ '<span class="id">set</span>'  <span class="id">a</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">set</span>' : <span class="id">T</span> ]" (<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">format</span> "[ '<span class="id">set</span>' :  <span class="id">T</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">set</span>' <span class="id">a</span> : <span class="id">T</span> ]"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">a</span> <span class="kwd">at</span> <span class="id">level</span> 99, <span class="id">format</span> "[ '<span class="id">set</span>'  <span class="id">a</span>   :  <span class="id">T</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">A</span> `|` <span class="id">B</span>" (<span class="kwd">at</span> <span class="id">level</span> 52, <span class="id">left</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">a</span> |` <span class="id">A</span>" (<span class="kwd">at</span> <span class="id">level</span> 52, <span class="id">left</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">set</span>' <span class="id">a1</span> ; <span class="id">a2</span> ; .. ; <span class="id">an</span> ]"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">a1</span> <span class="kwd">at</span> <span class="id">level</span> 99, <span class="id">format</span> "[ '<span class="id">set</span>'  <span class="id">a1</span> ;  <span class="id">a2</span> ;  .. ;  <span class="id">an</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">A</span> `&amp;` <span class="id">B</span>"  (<span class="kwd">at</span> <span class="id">level</span> 48, <span class="id">left</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">A</span> `*` <span class="id">B</span>"  (<span class="kwd">at</span> <span class="id">level</span> 46, <span class="id">left</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">A</span> `*`` <span class="id">B</span>"  (<span class="kwd">at</span> <span class="id">level</span> 46, <span class="id">left</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">A</span> ``*` <span class="id">B</span>"  (<span class="kwd">at</span> <span class="id">level</span> 46, <span class="id">left</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">A</span> .`1" (<span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">left</span> <span class="id">associativity</span>, <span class="id">format</span> "<span class="id">A</span> .`1").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">A</span> .`2" (<span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">left</span> <span class="id">associativity</span>, <span class="id">format</span> "<span class="id">A</span> .`2").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "~` <span class="id">A</span>" (<span class="kwd">at</span> <span class="id">level</span> 35, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">set</span>' ~ <span class="id">a</span> ]" (<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">format</span> "[ '<span class="id">set</span>' ~  <span class="id">a</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">A</span> `\` <span class="id">B</span>" (<span class="kwd">at</span> <span class="id">level</span> 50, <span class="id">left</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">A</span> `\ <span class="id">b</span>" (<span class="kwd">at</span> <span class="id">level</span> 50, <span class="id">left</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "\<span class="id">bigcup_</span> ( <span class="id">i</span> '<span class="kwd">in</span>' <span class="id">P</span> ) <span class="id">F</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">F</span> <span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">i</span>, <span class="id">P</span> <span class="kwd">at</span> <span class="id">level</span> 50,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "'[' \<span class="id">bigcup_</span> ( <span class="id">i</span>  '<span class="kwd">in</span>'  <span class="id">P</span> ) '/  '  <span class="id">F</span> ']'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "\<span class="id">bigcup_</span> ( <span class="id">i</span> : <span class="id">T</span> ) <span class="id">F</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">F</span> <span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">i</span> <span class="kwd">at</span> <span class="id">level</span> 50,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "'[' \<span class="id">bigcup_</span> ( <span class="id">i</span>  :  <span class="id">T</span> ) '/  '  <span class="id">F</span> ']'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "\<span class="id">bigcup_</span> ( <span class="id">i</span> &lt; <span class="id">n</span> ) <span class="id">F</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">F</span> <span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">i</span>, <span class="id">n</span> <span class="kwd">at</span> <span class="id">level</span> 50,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "'[' \<span class="id">bigcup_</span> ( <span class="id">i</span>  &lt;  <span class="id">n</span> ) '/  '  <span class="id">F</span> ']'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "\<span class="id">bigcup_</span> <span class="id">i</span> <span class="id">F</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">F</span> <span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">i</span> <span class="kwd">at</span> <span class="id">level</span> 0,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "'[' \<span class="id">bigcup_</span> <span class="id">i</span> '/  '  <span class="id">F</span> ']'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "\<span class="id">bigcap_</span> ( <span class="id">i</span> '<span class="kwd">in</span>' <span class="id">P</span> ) <span class="id">F</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">F</span> <span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">i</span>, <span class="id">P</span> <span class="kwd">at</span> <span class="id">level</span> 50,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "'[' \<span class="id">bigcap_</span> ( <span class="id">i</span>  '<span class="kwd">in</span>'  <span class="id">P</span> ) '/  '  <span class="id">F</span> ']'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "\<span class="id">bigcap_</span> ( <span class="id">i</span> : <span class="id">T</span> ) <span class="id">F</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">F</span> <span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">i</span> <span class="kwd">at</span> <span class="id">level</span> 50,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "'[' \<span class="id">bigcap_</span> ( <span class="id">i</span>  :  <span class="id">T</span> ) '/  '  <span class="id">F</span> ']'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "\<span class="id">bigcap_</span> ( <span class="id">i</span> &lt; <span class="id">n</span> ) <span class="id">F</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">F</span> <span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">i</span>, <span class="id">n</span> <span class="kwd">at</span> <span class="id">level</span> 50,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "'[' \<span class="id">bigcap_</span> ( <span class="id">i</span>  &lt;  <span class="id">n</span> ) '/  '  <span class="id">F</span> ']'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "\<span class="id">bigcap_</span> <span class="id">i</span> <span class="id">F</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">F</span> <span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">i</span> <span class="kwd">at</span> <span class="id">level</span> 0,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "'[' \<span class="id">bigcap_</span> <span class="id">i</span> '/  '  <span class="id">F</span> ']'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">A</span> `&lt;` <span class="id">B</span>" (<span class="kwd">at</span> <span class="id">level</span> 70, <span class="id">no</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">A</span> `&lt;=` <span class="id">B</span>" (<span class="kwd">at</span> <span class="id">level</span> 70, <span class="id">no</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">A</span> `&lt;=&gt;` <span class="id">B</span>" (<span class="kwd">at</span> <span class="id">level</span> 70, <span class="id">no</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">f</span> @^-1` <span class="id">A</span>" (<span class="kwd">at</span> <span class="id">level</span> 24).<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">f</span> @` <span class="id">A</span>" (<span class="kwd">at</span> <span class="id">level</span> 24).<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">A</span> !=<span class="id">set0</span>" (<span class="kwd">at</span> <span class="id">level</span> 80).<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">set</span>`' <span class="id"><a name="set">p</a></span> ]" (<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">format</span> "[ '<span class="id">set</span>`'  <span class="id">p</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">disjoint</span>' <span class="id">A</span> &amp; <span class="id">B</span> ]" (<span class="kwd">at</span> <span class="id">level</span> 0,<br/>
&nbsp;&nbsp;<span class="id">format</span> "'[<span class="id">hv</span>' [ '<span class="id">disjoint</span>' '/  '  <span class="id">A</span> '/'  &amp;  <span class="id">B</span> ] ']'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">F</span> `#` <span class="id">G</span>"<br/>
&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 48, <span class="id">left</span> <span class="id">associativity</span>, <span class="id">format</span> "<span class="id">F</span>  `#`  <span class="id">G</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'`<span class="id">I_</span>' <span class="id">n</span>" (<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">n</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "'`<span class="id">I_</span>' <span class="id">n</span>").<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">set</span> <span class="id">T</span> := <span class="id">T</span> -&gt; <span class="kwd">Prop</span>.<br/>
<span class="kwd">Definition</span> <span class="id">in_set</span> <span class="id">T</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">pred</span> <span class="id">T</span> := (<span class="kwd">fun</span> <span class="id">x</span> =&gt; `[&lt;<span class="id">A</span> <span class="id">x</span>&gt;]).<br/>
<span class="kwd">Canonical</span> <span class="id">set_predType</span> <span class="id">T</span> := @<span class="id">PredType</span> <span class="id">T</span> (<span class="id">set</span> <span class="id">T</span>) (@<span class="id"><a href="mathcomp.classical.classical_sets.html#set">in_set</a></span> <span class="id">T</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">in_setE</span> <span class="id">T</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) <span class="id">x</span> : <span class="id">x</span> \<span class="kwd">in</span> <span class="id">A</span> = <span class="id">A</span> <span class="id">x</span> :&gt; <span class="kwd">Prop</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">propeqE</span>; <span class="id">split</span> =&gt; [] /<span class="id">asboolP</span>. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">inE</span> := (<span class="id">inE</span>, <span class="id">in_setE</span>).<br/>
<br/>
<span class="id">Bind</span> <span class="kwd">Scope</span> <span class="id">classical_set_scope</span> <span class="kwd">with</span> <span class="id">set</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">classical_set_scope</span>.<br/>
<span class="id">Delimit</span> <span class="kwd">Scope</span> <span class="id">classical_set_scope</span> <span class="kwd">with</span> <span class="id">classic</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">mkset</span> {<span class="id">T</span>} (<span class="id">P</span> : <span class="id">T</span> -&gt; <span class="kwd">Prop</span>) : <span class="id">set</span> <span class="id">T</span> := <span class="id">P</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">mkset</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> /.<br/>
<br/>
<span class="kwd">Notation</span> "[ '<span class="id">set</span>' <span class="id">x</span> : <span class="id">T</span> | <span class="id">P</span> ]" := (<span class="id">mkset</span> (<span class="kwd">fun</span> <span class="id">x</span> : <span class="id">T</span> =&gt; <span class="id">P</span>)) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">set</span>' <span class="id">x</span> | <span class="id">P</span> ]" := [<span class="id">set</span> <span class="id">x</span> : <span class="id">_</span> | <span class="id">P</span>] : <span class="id">classical_set_scope</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">image</span> {<span class="id">T</span> <span class="id">rT</span>} (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">rT</span>) :=<br/>
&nbsp;&nbsp;[<span class="id">set</span> <span class="id">y</span> | <span class="kwd">exists2</span> <span class="id">x</span>, <span class="id">A</span> <span class="id">x</span> &amp; <span class="id">f</span> <span class="id">x</span> = <span class="id">y</span>].<br/>
<span class="kwd">Arguments</span> <span class="id">image</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> /.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">set</span>' <span class="id">E</span> | <span class="id">x</span> '<span class="kwd">in</span>' <span class="id">A</span> ]" :=<br/>
&nbsp;&nbsp;(<span class="id">image</span> <span class="id">A</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">E</span>)) : <span class="id">classical_set_scope</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">image2</span> {<span class="id">TA</span> <span class="id">TB</span> <span class="id">rT</span>} (<span class="id">A</span> : <span class="id">set</span> <span class="id">TA</span>) (<span class="id"><a href="mathcomp.classical.classical_sets.html#basic_definitions.T">B</a></span> : <span class="id">set</span> <span class="id">TB</span>) (<span class="id">f</span> : <span class="id">TA</span> -&gt; <span class="id">TB</span> -&gt; <span class="id">rT</span>) :=<br/>
&nbsp;&nbsp;[<span class="id">set</span> <span class="id">z</span> | <span class="kwd">exists2</span> <span class="id">x</span>, <span class="id">A</span> <span class="id">x</span> &amp; <span class="kwd">exists2</span> <span class="id">y</span>, <span class="id">B</span> <span class="id">y</span> &amp; <span class="id">f</span> <span class="id">x</span> <span class="id">y</span> = <span class="id">z</span>].<br/>
<span class="kwd">Arguments</span> <span class="id">image2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> /.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">set</span>' <span class="id">E</span> | <span class="id">x</span> '<span class="kwd">in</span>' <span class="id">A</span> &amp; <span class="id">y</span> '<span class="kwd">in</span>' <span class="id">B</span> ]" :=<br/>
&nbsp;&nbsp;(<span class="id">image2</span> <span class="id">A</span> <span class="id">B</span> (<span class="kwd">fun</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#basic_definitions.T">x</a></span> <span class="id">y</span> =&gt; <span class="id">E</span>)) : <span class="id">classical_set_scope</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">basic_definitions</span>.<br/>
<span class="kwd">Context</span> {<span class="id">T</span> <span class="id">rT</span> : <span class="kwd">Type</span>}.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">T</span> : <span class="kwd">Type</span>) (<span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">rT</span>) (<span class="id">Y</span> : <span class="id">set</span> <span class="id">rT</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">preimage</span> <span class="id">f</span> <span class="id">Y</span> : <span class="id">set</span> <span class="id">T</span> := [<span class="id">set</span> <span class="id">t</span> | <span class="id">Y</span> (<span class="id">f</span> <span class="id">t</span>)].<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">setT</span> := [<span class="id">set</span> <span class="id">_</span> : <span class="id">T</span> | <span class="id">True</span>].<br/>
<span class="kwd">Definition</span> <span class="id">set0</span> := [<span class="id">set</span> <span class="id">_</span> : <span class="id">T</span> | <span class="id">False</span>].<br/>
<span class="kwd">Definition</span> <span class="id">set1</span> (<span class="id">t</span> : <span class="id">T</span>) := [<span class="id">set</span> <span class="id">x</span> : <span class="id">T</span> | <span class="id">x</span> = <span class="id">t</span>].<br/>
<span class="kwd">Definition</span> <span class="id">setI</span> <span class="id">A</span> <span class="id">B</span> := [<span class="id">set</span> <span class="id">x</span> | <span class="id">A</span> <span class="id">x</span> /\ <span class="id">B</span> <span class="id">x</span>].<br/>
<span class="kwd">Definition</span> <span class="id">setU</span> <span class="id"><a name="snd_set">A</a></span> <span class="id">B</span> := [<span class="id">set</span> <span class="id">x</span> | <span class="id">A</span> <span class="id">x</span> \/ <span class="id">B</span> <span class="id">x</span>].<br/>
<span class="kwd">Definition</span> <span class="id">nonempty</span> <span class="id">A</span> := <span class="kwd">exists</span> <span class="id">a</span>, <span class="id">A</span> <span class="id">a</span>.<br/>
<span class="kwd">Definition</span> <span class="id">setC</span> <span class="id">A</span> := [<span class="id">set</span> <span class="id">a</span> | ~ <span class="id">A</span> <span class="id">a</span>].<br/>
<span class="kwd">Definition</span> <span class="id">setD</span> <span class="id">A</span> <span class="id">B</span> := [<span class="id">set</span> <span class="id">x</span> | <span class="id">A</span> <span class="id">x</span> /\ ~ <span class="id">B</span> <span class="id">x</span>].<br/>
<span class="kwd">Definition</span> <span class="id">setM</span> <span class="id">T1</span> <span class="id">T2</span> (<span class="id">A1</span> : <span class="id">set</span> <span class="id">T1</span>) (<span class="id">A2</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T2</span>) := [<span class="id">set</span> <span class="id">z</span> | <span class="id">A1</span> <span class="id">z</span>.1 /\ <span class="id">A2</span> <span class="id">z</span>.2].<br/>
<span class="kwd">Definition</span> <span class="id">fst_set</span> <span class="id">T1</span> <span class="id">T2</span> (<span class="id">A</span> : <span class="id">set</span> (<span class="id">T1</span> * <span class="id">T2</span>)) := [<span class="id">set</span> <span class="id">x</span> | <span class="kwd">exists</span> <span class="id">y</span>, <span class="id">A</span> (<span class="id">x</span>, <span class="id">y</span>)].<br/>
<span class="kwd">Definition</span> <span class="id">snd_set</span> <span class="id">T1</span> <span class="id">T2</span> (<span class="id">A</span> : <span class="id"><a name="bigcap">set</a></span> (<span class="id">T1</span> * <span class="id">T2</span>)) := [<span class="id">set</span> <span class="id">y</span> | <span class="kwd">exists</span> <span class="id">x</span>, <span class="id">A</span> (<span class="id">x</span>, <span class="id">y</span>)].<br/>
<span class="kwd">Definition</span> <span class="id">setMR</span> <span class="id">T1</span> <span class="id">T2</span> (<span class="id">A1</span> : <span class="id">set</span> <span class="id">T1</span>) (<span class="id">A2</span> : <span class="id">T1</span> -&gt; <span class="id">set</span> <span class="id">T2</span>) :=<br/>
&nbsp;&nbsp;[<span class="id">set</span> <span class="id">z</span> | <span class="id">A1</span> <span class="id">z</span>.1 /\ <span class="id">A2</span> <span class="id">z</span>.1 <span class="id">z</span>.2].<br/>
<span class="kwd">Definition</span> <span class="id">setML</span> <span class="id">T1</span> <span class="id">T2</span> (<span class="id">A1</span> : <span class="id">T2</span> -&gt; <span class="id">set</span> <span class="id"><a name="subset">T1</a></span>) (<span class="id">A2</span> : <span class="id">set</span> <span class="id">T2</span>) :=<br/>
&nbsp;&nbsp;[<span class="id">set</span> <span class="id">z</span> | <span class="id">A1</span> <span class="id">z</span>.2 <span class="id">z</span>.1 /\ <span class="id">A2</span> <span class="id">z</span>.2].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">mksetE</span> (<span class="id">P</span> : <span class="id">T</span> -&gt; <span class="kwd">Prop</span>) <span class="id">x</span> : [<span class="id">set</span> <span class="id">x</span> | <span class="id">P</span> <span class="id">x</span>] <span class="id">x</span> = <span class="id">P</span> <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">bigcap</span> <span class="id">T</span> <span class="id">I</span> (<span class="id">P</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) :=<br/>
&nbsp;&nbsp;[<span class="id">set</span> <span class="id">a</span> | <span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id">F</span> <span class="id">i</span> <span class="id">a</span>].<br/>
<span class="kwd">Definition</span> <span class="id">bigcup</span> <span class="id">T</span> <span class="id">I</span> (<span class="id">P</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) :=<br/>
&nbsp;&nbsp;[<span class="id">set</span> <span class="id">a</span> | <span class="kwd">exists2</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> &amp; <span class="id">F</span> <span class="id">i</span> <span class="id">a</span>].<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">subset</span> <span class="id">A</span> <span class="id">B</span> := <span class="kwd">forall</span> <span class="id">t</span>, <span class="id">A</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">t</a></span> -&gt; <span class="id">B</span> <span class="id">t</span>.<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> "<span class="id">A</span> `&lt;=` <span class="id">B</span>" := (<span class="id">subset</span> <span class="id">A</span> <span class="id">B</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">subsetP</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setI">A</a></span> <span class="id">B</span> : {<span class="id">subset</span> <span class="id">A</span> &lt;= <span class="id">B</span>} &lt;-&gt; (<span class="id">A</span> `&lt;=` <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
 <span class="kwd">by</span> <span class="id">split</span> =&gt; + <span class="id">x</span> =&gt; /(<span class="id">_</span> <span class="id">x</span>); <span class="id">rewrite</span> ?<span class="id">inE</span>. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">disj_set</span> <span class="id">A</span> <span class="id">B</span> := <span class="id">setI</span> <span class="id">A</span> <span class="id">B</span> == <span class="id">set0</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">proper</span> <span class="id">A</span> <span class="id">B</span> := <span class="id">A</span> `&lt;=` <span class="id">B</span> /\ ~ (<span class="id">B</span> `&lt;=` <span class="id">A</span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id">basic_definitions</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">preimage</span> <span class="id">T</span> <span class="id">rT</span> <span class="id">f</span> <span class="id">Y</span> <span class="id">t</span> /.<br/>
<span class="kwd">Arguments</span> <span class="id">set0</span> <span class="id">_</span> <span class="id">_</span> /.<br/>
<span class="kwd">Arguments</span> <span class="id">setT</span> <span class="id">_</span> <span class="id">_</span> /.<br/>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">set1</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> /.<br/>
<span class="kwd">Arguments</span> <span class="id">setI</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> /.<br/>
<span class="kwd">Arguments</span> <span class="id">setU</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> /.<br/>
<span class="kwd">Arguments</span> <span class="id">setC</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> /.<br/>
<span class="kwd">Arguments</span> <span class="id">setD</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> /.<br/>
<span class="kwd">Arguments</span> <span class="id">setM</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> /.<br/>
<span class="kwd">Arguments</span> <span class="id">setMR</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">_</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> /.<br/>
<span class="kwd">Arguments</span> <span class="id">setML</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> /.<br/>
<span class="kwd">Arguments</span> <span class="id">fst_set</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> /.<br/>
<span class="kwd">Arguments</span> <span class="id">snd_set</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> /.<br/>
<span class="kwd">Arguments</span> <span class="id">subsetP</span> {<span class="id">T</span> <span class="id">A</span> <span class="id">B</span>}.<br/>
<br/>
<span class="kwd">Notation</span> <span class="id">range</span> <span class="id">F</span> := [<span class="id">set</span> <span class="id">F</span> <span class="id">i</span> | <span class="id">i</span> <span class="kwd">in</span> <span class="id">setT</span>].<br/>
<span class="kwd">Notation</span> "[ '<span class="id">set</span>' <span class="id">a</span> ]" := (<span class="id">set1</span> <span class="id">a</span>) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">set</span>' <span class="id">a</span> : <span class="id">T</span> ]" := [<span class="id">set</span> (<span class="id">a</span> : <span class="id">T</span>)] : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">set</span>' : <span class="id">T</span> ]" := (@<span class="id">setT</span> <span class="id">T</span>) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> `|` <span class="id">B</span>" := (<span class="id">setU</span> <span class="id">A</span> <span class="id">B</span>) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">a</span> |` <span class="id">A</span>" := ([<span class="id">set</span> <span class="id">a</span>] `|` <span class="id">A</span>) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">set</span>' <span class="id">a1</span> ; <span class="id">a2</span> ; .. ; <span class="id">an</span> ]" :=<br/>
&nbsp;&nbsp;(<span class="id">setU</span> .. (<span class="id">a1</span> |` [<span class="id">set</span> <span class="id">a2</span>]) .. [<span class="id">set</span> <span class="id">an</span>]) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> `&amp;` <span class="id">B</span>" := (<span class="id">setI</span> <span class="id">A</span> <span class="id">B</span>) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> `*` <span class="id">B</span>" := (<span class="id">setM</span> <span class="id">A</span> <span class="id">B</span>) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> .`1" := (<span class="id">fst_set</span> <span class="id">A</span>) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> .`2" := (<span class="id">snd_set</span> <span class="id">A</span>) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> `*`` <span class="id">B</span>" := (<span class="id">setMR</span> <span class="id">A</span> <span class="id">B</span>) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> ``*` <span class="id">B</span>" := (<span class="id">setML</span> <span class="id">A</span> <span class="id">B</span>) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "~` <span class="id">A</span>" := (<span class="id">setC</span> <span class="id">A</span>) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">set</span>' ~ <span class="id">a</span> ]" := (~` [<span class="id">set</span> <span class="id">a</span>]) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> `\` <span class="id">B</span>" := (<span class="id">setD</span> <span class="id">A</span> <span class="id">B</span>) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> `\ <span class="id">a</span>" := (<span class="id">A</span> `\` [<span class="id">set</span> <span class="id">a</span>]) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">disjoint</span>' <span class="id">A</span> &amp; <span class="id">B</span> ]" := (<span class="id">disj_set</span> <span class="id">A</span> <span class="id">B</span>) : <span class="id">classical_set_scope</span>.<br/>
<br/>
<span class="kwd">Notation</span> "'`<span class="id">I_</span>' <span class="id">n</span>" := [<span class="id">set</span> <span class="id">k</span> | <span class="id">is_true</span> (<span class="id">k</span> &lt; <span class="id">n</span>)%<span class="id">N</span>].<br/>
<br/>
<span class="kwd">Notation</span> "\<span class="id">bigcup_</span> ( <span class="id">i</span> '<span class="kwd">in</span>' <span class="id">P</span> ) <span class="id">F</span>" :=<br/>
&nbsp;&nbsp;(<span class="id">bigcup</span> <span class="id">P</span> (<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="id">F</span>)) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "\<span class="id">bigcup_</span> ( <span class="id">i</span> : <span class="id">T</span> ) <span class="id">F</span>" :=<br/>
&nbsp;&nbsp;(\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> @<span class="id">setT</span> <span class="id">T</span>) <span class="id">F</span>) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "\<span class="id">bigcup_</span> ( <span class="id">i</span> &lt; <span class="id">n</span> ) <span class="id">F</span>" :=<br/>
&nbsp;&nbsp;(\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> `<span class="id">I_n</span>) <span class="id">F</span>) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "\<span class="id">bigcup_</span> <span class="id">i</span> <span class="id">F</span>" := (\<span class="id">bigcup_</span>(<span class="id">i</span> : <span class="id">_</span>) <span class="id">F</span>) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "\<span class="id">bigcap_</span> ( <span class="id">i</span> '<span class="kwd">in</span>' <span class="id">P</span> ) <span class="id">F</span>" :=<br/>
&nbsp;&nbsp;(<span class="id">bigcap</span> <span class="id">P</span> (<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="id">F</span>)) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "\<span class="id">bigcap_</span> ( <span class="id">i</span> : <span class="id">T</span> ) <span class="id">F</span>" :=<br/>
&nbsp;&nbsp;(\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> @<span class="id">setT</span> <span class="id">T</span>) <span class="id">F</span>) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "\<span class="id">bigcap_</span> ( <span class="id">i</span> &lt; <span class="id">n</span> ) <span class="id">F</span>" :=<br/>
&nbsp;&nbsp;(\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> `<span class="id">I_n</span>) <span class="id">F</span>) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "\<span class="id">bigcap_</span> <span class="id">i</span> <span class="id">F</span>" := (\<span class="id">bigcap_</span>(<span class="id">i</span> : <span class="id">_</span>) <span class="id">F</span>) : <span class="id">classical_set_scope</span>.<br/>
<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> `&lt;=` <span class="id">B</span>" := (<span class="id">subset</span> <span class="id">A</span> <span class="id">B</span>) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> `&lt;` <span class="id">B</span>" := (<span class="id">proper</span> <span class="id">A</span> <span class="id">B</span>) : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#is_true">classical_set_scope</a></span>.<br/>
<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> `&lt;=&gt;` <span class="id">B</span>" := ((<span class="id">A</span> `&lt;=` <span class="id">B</span>) /\ (<span class="id">B</span> `&lt;=` <span class="id">A</span>)) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">f</span> @^-1` <span class="id">A</span>" := (<span class="id">preimage</span> <span class="id">f</span> <span class="id">A</span>) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">f</span> @` <span class="id">A</span>" := (<span class="id">image</span> <span class="id">A</span> <span class="id">f</span>) (<span class="id">only</span> <span class="id">parsing</span>) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> !=<span class="id">set0</span>" := (<span class="id">nonempty</span> <span class="id">A</span>) : <span class="id">classical_set_scope</span>.<br/>
<br/>
<span class="kwd">Notation</span> "[ '<span class="id">set</span>`' <span class="id">p</span> ]":= [<span class="id">set</span> <span class="id">x</span> | <span class="id">is_true</span> (<span class="id">x</span> \<span class="kwd">in</span> <span class="id">p</span>)] : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> <span class="id">pred_set</span> := (<span class="kwd">fun</span> <span class="id">i</span> =&gt; [<span class="id">set</span>` <span class="id">i</span>]).<br/>
<br/>
<span class="kwd">Notation</span> "`[ <span class="id">a</span> , <span class="id">b</span> ]" :=<br/>
&nbsp;&nbsp;[<span class="id">set</span>` <span class="id">Interval</span> (<span class="id">BLeft</span> <span class="id">a</span>) (<span class="id">BRight</span> <span class="id">b</span>)] : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "`] <span class="id">a</span> , <span class="id">b</span> ]" :=<br/>
&nbsp;&nbsp;[<span class="id">set</span>` <span class="id">Interval</span> (<span class="id">BRight</span> <span class="id">a</span>) (<span class="id">BRight</span> <span class="id">b</span>)] : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "`[ <span class="id">a</span> , <span class="id">b</span> [" :=<br/>
&nbsp;&nbsp;[<span class="id">set</span>` <span class="id">Interval</span> (<span class="id">BLeft</span> <span class="id">a</span>) (<span class="id">BLeft</span> <span class="id">b</span>)] : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "`] <span class="id">a</span> , <span class="id">b</span> [" :=<br/>
&nbsp;&nbsp;[<span class="id">set</span>` <span class="id">Interval</span> (<span class="id">BRight</span> <span class="id">a</span>) (<span class="id">BLeft</span> <span class="id">b</span>)] : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "`] '-<span class="id">oo</span>' , <span class="id">b</span> ]" :=<br/>
&nbsp;&nbsp;[<span class="id">set</span>` <span class="id">Interval</span> -<span class="id">oo</span>%<span class="id">O</span> (<span class="id">BRight</span> <span class="id">b</span>)] : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "`] '-<span class="id">oo</span>' , <span class="id">b</span> [" :=<br/>
&nbsp;&nbsp;[<span class="id">set</span>` <span class="id">Interval</span> -<span class="id">oo</span>%<span class="id">O</span> (<span class="id">BLeft</span> <span class="id">b</span>)] : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "`[ <span class="id">a</span> , '+<span class="id">oo</span>' [" :=<br/>
&nbsp;&nbsp;[<span class="id">set</span>` <span class="id">Interval</span> (<span class="id">BLeft</span> <span class="id">a</span>) +<span class="id">oo</span>%<span class="id">O</span>] : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "`] <span class="id">a</span> , '+<span class="id">oo</span>' [" :=<br/>
&nbsp;&nbsp;[<span class="id">set</span>` <span class="id">Interval</span> (<span class="id">BRight</span> <span class="id">a</span>) +<span class="id">oo</span>%<span class="id">O</span>] : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "`] -<span class="id">oo</span> , '+<span class="id">oo</span>' [" :=<br/>
&nbsp;&nbsp;[<span class="id">set</span>` <span class="id">Interval</span> -<span class="id">oo</span>%<span class="id">O</span> +<span class="id">oo</span>%<span class="id">O</span>] : <span class="id">classical_set_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_itv</span> <span class="id">T</span> (<span class="id">d</span> : <span class="id">unit</span>) (<span class="id">rT</span> : <span class="id">porderType</span> <span class="id">d</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">rT</span>) (<span class="id">i</span> : <span class="id">interval</span> <span class="id">rT</span>) (<span class="id">x</span> : <span class="id">T</span>) :<br/>
&nbsp;&nbsp;((<span class="id">f</span> @^-1` [<span class="id">set</span>` <span class="id">i</span>]) <span class="id">x</span>) = (<span class="id">f</span> <span class="id">x</span> \<span class="kwd">in</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">inE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_itv_o_infty</span> <span class="id">T</span> (<span class="id">d</span> : <span class="id">unit</span>) (<span class="id">rT</span> : <span class="id">porderType</span> <span class="id">d</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">rT</span>) <span class="id">y</span> :<br/>
&nbsp;&nbsp;<span class="id">f</span> @^-1` `]<span class="id">y</span>, +<span class="id">oo</span>[%<span class="id">classic</span> = [<span class="id">set</span> <span class="id">x</span> | (<span class="id">y</span> &lt; <span class="id">f</span> <span class="id">x</span>)%<span class="id">O</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span> =&gt; [|?]; <span class="id">rewrite</span> /= <span class="id">in_itv</span>/= <span class="id">andbT</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_itv_c_infty</span> <span class="id">T</span> (<span class="id">d</span> : <span class="id">unit</span>) (<span class="id">rT</span> : <span class="id">porderType</span> <span class="id">d</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">rT</span>) <span class="id">y</span> :<br/>
&nbsp;&nbsp;<span class="id">f</span> @^-1` `[<span class="id">y</span>, +<span class="id">oo</span>[%<span class="id">classic</span> = [<span class="id">set</span> <span class="id">x</span> | (<span class="id">y</span> &lt;= <span class="id">f</span> <span class="id">x</span>)%<span class="id">O</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span> =&gt; [|?]; <span class="id">rewrite</span> /= <span class="id">in_itv</span>/= <span class="id">andbT</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_itv_infty_o</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">T</a></span> (<span class="id">d</span> : <span class="id">unit</span>) (<span class="id">rT</span> : <span class="id">orderType</span> <span class="id">d</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">rT</span>) <span class="id">y</span> :<br/>
&nbsp;&nbsp;<span class="id">f</span> @^-1` `]-<span class="id">oo</span>, <span class="id">y</span>[%<span class="id">classic</span> = [<span class="id">set</span> <span class="id">x</span> | (<span class="id">f</span> <span class="id">x</span> &lt; <span class="id">y</span>)%<span class="id">O</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span> =&gt; [|?]; <span class="id">rewrite</span> /= <span class="id">in_itv</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_itv_infty_c</span> <span class="id">T</span> (<span class="id">d</span> : <span class="id">unit</span>) (<span class="id">rT</span> : <span class="id">orderType</span> <span class="id">d</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">rT</span>) <span class="id">y</span> :<br/>
&nbsp;&nbsp;<span class="id">f</span> @^-1` `]-<span class="id">oo</span>, <span class="id">y</span>]%<span class="id">classic</span> = [<span class="id">set</span> <span class="id">x</span> | (<span class="id">f</span> <span class="id">x</span> &lt;= <span class="id">y</span>)%<span class="id">O</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span> =&gt; [|?]; <span class="id">rewrite</span> /= <span class="id">in_itv</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eq_set</span> <span class="id">T</span> (<span class="id">P</span> <span class="id">Q</span> : <span class="id">T</span> -&gt; <span class="kwd">Prop</span>) : (<span class="kwd">forall</span> <span class="id">x</span> : <span class="id">T</span>, <span class="id">P</span> <span class="id">x</span> = <span class="id">Q</span> <span class="id">x</span>) -&gt;<br/>
&nbsp;&nbsp;[<span class="id">set</span> <span class="id">x</span> | <span class="id">P</span> <span class="id">x</span>] = [<span class="id">set</span> <span class="id">x</span> | <span class="id">Q</span> <span class="id">x</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">funext</span>-&gt;. Qed.</div>
<br/>
<span class="kwd">Coercion</span> <span class="id">set_type</span> <span class="id">T</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) := {<span class="id">x</span> : <span class="id">T</span> | <span class="id">x</span> \<span class="kwd">in</span> <span class="id">A</span>}.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#pred_oapp">SigSub</a></span> {<span class="id">T</span>} {<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">pT</a></span> : <span class="id">predType</span> <span class="id">T</span>} {<span class="id">P</span> : <span class="id">pT</span>} <span class="id">x</span> : <span class="id">x</span> \<span class="kwd">in</span> <span class="id">P</span> -&gt; {<span class="id">x</span> | <span class="id">x</span> \<span class="kwd">in</span> <span class="id">P</span>} :=<br/>
&nbsp;&nbsp;<span class="id">exist</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">x</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id"><a name="pred_oapp_set">x</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">set0fun</span> {<span class="id">P</span> <span class="id">T</span> : <span class="kwd">Type</span>} : @<span class="id">set0</span> <span class="id">T</span> -&gt; <span class="id">P</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
 <span class="kwd">by</span> <span class="id">case</span>=&gt; <span class="id">x</span>; <span class="id">rewrite</span> <span class="id">inE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">pred_oappE</span> {<span class="id"><a href="mathcomp.classical.classical_sets.html#pred_oappE">T</a></span> : <span class="kwd">Type</span>} (<span class="id">D</span> : {<span class="id">pred</span> <span class="id">T</span>}) :<br/>
&nbsp;&nbsp;<span class="id">pred_oapp</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#idP">D</a></span> = <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#idP">mem</a></span> (<span class="id">some</span> @` <span class="id">D</span>)%<span class="id">classic</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
<span class="id">apply</span>/<span class="id">funext</span>=&gt; -[<span class="id">x</span>|]/=; <span class="id">apply</span>/<span class="id">idP</span>/<span class="id">idP</span>; <span class="id">rewrite</span> /<span class="id">pred_oapp</span>/= <span class="id">inE</span> //=.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">xD</span>; <span class="kwd">exists</span> <span class="id">x</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; [// + + [&lt;-]].<br/>
- <span class="kwd">by</span> <span class="id">case</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">pred_oapp_set</span> {<span class="id">T</span> : <span class="kwd">Type</span>} (<span class="id">D</span> : <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id">pred_oapp</span> (<span class="id">mem</span> <span class="id">D</span>) = <span class="id">mem</span> (<span class="id">some</span> @` <span class="id">D</span>)%<span class="id">classic</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">pred_oappE</span>; <span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">x</span>/=; <span class="id"><a name="mem_setT">apply</a></span>/<span class="id">idP</span>/<span class="id">idP</span>; <span class="id">rewrite</span> ?<span class="id">inE</span>;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; [<span class="id">y</span>/= ]; <span class="id">rewrite</span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">in_setE</a></span>; <span class="kwd">exists</span> <span class="id"><a name="mem_setK">y</a></span>; <span class="id">rewrite</span> ?<span class="id">in_setE</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">basic_lemmas</span>.<br/>
<span class="kwd">Context</span> {<span class="id">T</span> : <span class="kwd">Type</span>}.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> <span class="id">D</span> : <span class="id">set</span> <span class="id">T</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">mem_set</span> {<span class="id">A</span>} {<span class="id">u</span> : <span class="id">T</span>} : <span class="id">A</span> <span class="id">u</span> -&gt; <span class="id">u</span> \<span class="kwd">in</span> <span class="id">A</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">inE</span>. Qed.</div>
<span class="kwd">Lemma</span> <span class="id">set_mem</span> {<span class="id">A</span>} {<span class="id">u</span> : <span class="id">T</span>} : <span class="id">u</span> \<span class="kwd">in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">A</a></span> -&gt; <span class="id">A</span> <span class="id">u</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">inE</span>. Qed.</div>
<span class="kwd">Lemma</span> <span class="id">mem_setT</span> (<span class="id">u</span> : <span class="id">T</span>)    : <span class="id">u</span> \<span class="kwd">in</span> [<span class="id">set</span>: <span class="id">T</span>]<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">inE</span>. Qed.</div>
<span class="kwd">Lemma</span> <span class="id">mem_setK</span> {<span class="id">A</span>} {<span class="id">u</span> : <span class="id">T</span>} : <span class="id">cancel</span> (@<span class="id">mem_set</span> <span class="id">A</span> <span class="id">u</span>) <span class="id">set_mem</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
 <span class="kwd">by</span> []. Qed.</div>
<span class="kwd">Lemma</span> <span class="id">set_memK</span> {<span class="id">A</span>} {<span class="id">u</span> : <span class="id">T</span>} : <span class="id">cancel</span> (@<span class="id">set_mem</span> <span class="id">A</span> <span class="id">u</span>) <span class="id">mem_set</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">memNset</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negPn">T</a></span>) (<span class="id">u</span> : <span class="id">T</span>) : ~ <span class="id">A</span> <span class="id">u</span> -&gt; <span class="id">u</span> \<span class="kwd">in</span> <span class="id">A</span> = <span class="id">false</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
 <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">contra_notF</span>; <span class="id">rewrite</span> <span class="id">inE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">notin_set</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) <span class="id">x</span> : (<span class="id">x</span> \<span class="id">notin</span> <span class="id">A</span> : <span class="kwd">Prop</span>) = ~ (<span class="id">A</span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">propext</span>; <span class="id">split</span>=&gt; /<span class="id">asboolPn</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setTPn</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">A</span> != <span class="id">setT</span> &lt;-&gt; <span class="kwd">exists</span> <span class="id">t</span>, ~ <span class="id"><a href="mathcomp.classical.classical_sets.html#memNset">A</a></span> <span class="id">t</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
<span class="id">split</span> =&gt; [/<span class="id">negP</span>|[<span class="id">t</span>]]; <span class="id">last</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">contra_notP</span> =&gt; /<span class="id">negP</span>/<span class="id">negPn</span>/<span class="id">eqP</span> -&gt;.<br/>
<span class="id">apply</span>: <span class="id">contra_notP</span> =&gt; /<span class="id">forallNP</span> <span class="id">h</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span> =&gt; // <span class="id">_</span>; <span class="id">apply</span>: <span class="id">contrapT</span>.<br/>
Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">note</span>="<span class="id"><a href="mathcomp.classical.classical_sets.html#basic_lemmas.T">Use</a></span> <span class="id">setTPn</span> <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">setTP</span> := <span class="id">setTPn</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">in_set0</span> (<span class="id">x</span> : <span class="id">T</span>) : (<span class="id">x</span> \<span class="kwd">in</span> <span class="id">set0</span>) = <span class="id"><a name="in_setD">false</a></span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">memNset</span>. Qed.</div>
<span class="kwd">Lemma</span> <span class="id">in_setT</span> (<span class="id">x</span> : <span class="id">T</span>) : <span class="id">x</span> \<span class="kwd">in</span> <span class="id">setT</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">mem_set</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">in_setC</span> (<span class="id">x</span> : <span class="id">T</span>) <span class="id">A</span> : (<span class="id">x</span> \<span class="kwd">in</span> ~` <span class="id">A</span>) = (<span class="id">x</span> \<span class="id">notin</span> <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">idP</span>/<span class="id">idP</span>; <span class="id">rewrite</span> <span class="id">inE</span> <span class="id">notin_set</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">in_setI</span> (<span class="id">x</span> : <span class="id">T</span>) <span class="id">A</span> <span class="id">B</span> : (<span class="id">x</span> \<span class="kwd">in</span> <span class="id">A</span> `&amp;` <span class="id">B</span>) = (<span class="id">x</span> \<span class="kwd">in</span> <span class="id">A</span>) &amp;&amp; (<span class="id">x</span> \<span class="kwd">in</span> <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">idP</span>/<span class="id">andP</span>; <span class="id">rewrite</span> !<span class="id">inE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">in_setD</span> (<span class="id">x</span> : <span class="id">T</span>) <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">A</a></span> <span class="id">B</span> : (<span class="id">x</span> \<span class="kwd">in</span> <span class="id">A</span> `\` <span class="id">B</span>) = (<span class="id">x</span> \<span class="kwd">in</span> <span class="id">A</span>) &amp;&amp; (<span class="id">x</span> \<span class="id">notin</span> <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">idP</span>/<span class="id">andP</span>; <span class="id">rewrite</span> !<span class="id">inE</span> <span class="id">notin_set</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">in_setU</span> (<span class="id">x</span> : <span class="id">T</span>) <span class="id">A</span> <span class="id">B</span> : (<span class="id">x</span> \<span class="kwd">in</span> <span class="id">A</span> `|` <span class="id">B</span>) = (<span class="id">x</span> \<span class="kwd">in</span> <span class="id">A</span>) || (<span class="id">x</span> \<span class="kwd">in</span> <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">idP</span>/<span class="id">orP</span>; <span class="id">rewrite</span> !<span class="id">inE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">in_setM</span> <span class="id">T</span>' (<span class="id">x</span> : <span class="id">T</span> * <span class="id">T</span>') <span class="id">A</span> <span class="id">E</span> : (<span class="id">x</span> \<span class="kwd">in</span> <span class="id">A</span> `*` <span class="id">E</span>) = (<span class="id">x</span>.1 \<span class="kwd">in</span> <span class="id">A</span>) &amp;&amp; (<span class="id">x</span>.2 \<span class="kwd">in</span> <span class="id">E</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">idP</span>/<span class="id">andP</span>; <span class="id">rewrite</span> !<span class="id">inE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_valP</span> {<span class="id">A</span>} (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">x</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#basic_lemmas.T">A</a></span>) : <span class="id">A</span> (<span class="id">val</span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
 <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">set_mem</span>; <span class="id">apply</span>: <span class="id">valP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eqEsubset</span> <span class="id">A</span> <span class="id">B</span> : (<span class="id">A</span> = <span class="id">B</span>) = (<span class="id">A</span> `&lt;=&gt;` <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
<span class="id">rewrite</span> <span class="id">propeqE</span>; <span class="id">split</span> =&gt; [-&gt;|[<span class="id">AB</span> <span class="id">BA</span>]]; [<span class="kwd">by</span> <span class="id">split</span>|].<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span>=&gt; [/<span class="id">AB</span>|/<span class="id">BA</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">seteqP</span> <span class="id">A</span> <span class="id">B</span> : (<span class="id">A</span> = <span class="id">B</span>) &lt;-&gt; (<span class="id">A</span> `&lt;=&gt;` <span class="id">B</span>)<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_true</span> : [<span class="id">set</span>` <span class="id">predT</span>] = <span class="id">setT</span> :&gt; <span class="id">set</span> <span class="id">T</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_false</span> : [<span class="id">set</span>` <span class="id">pred0</span>] = <span class="id">set0</span> :&gt; <span class="id">set</span> <span class="id">T</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_predC</span> (<span class="id">P</span> : {<span class="id">pred</span> <span class="id">T</span>}) : [<span class="id">set</span>` <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">predC</a></span> <span class="id">P</span>] = ~` [<span class="id">set</span>` <span class="id">P</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span> =&gt; <span class="id">t</span> /<span class="id">negP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_andb</span> (<span class="id">P</span> <span class="id">Q</span> : {<span class="id">pred</span> <span class="id">T</span>}) : [<span class="id">set</span>` <span class="id">predI</span> <span class="id">P</span> <span class="id">Q</span>] = [<span class="id">set</span>` <span class="id">P</span>] `&amp;` [<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set</a></span>` <span class="id">Q</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">predeqP</span> =&gt; <span class="id">x</span>; <span class="id">split</span>; <span class="id">rewrite</span> /= <span class="id">inE</span> =&gt; /<span class="id">andP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_orb</span> (<span class="id">P</span> <span class="id">Q</span> : {<span class="id">pred</span> <span class="id">T</span>}) : [<span class="id">set</span>` <span class="id">predU</span> <span class="id">P</span> <span class="id">Q</span>] = [<span class="id">set</span>` <span class="id">P</span>] `|` [<span class="id">set</span>` <span class="id">Q</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">predeqP</span> =&gt; <span class="id">x</span>; <span class="id">split</span>; <span class="id">rewrite</span> /= <span class="id">inE</span> =&gt; /<span class="id">orP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">fun_true</span> : (<span class="kwd">fun</span>=&gt; <span class="id">true</span>) = <span class="id">setT</span> :&gt; <span class="id">set</span> <span class="id">T</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
 <span class="kwd">by</span> <span class="id">rewrite</span> [<span class="id">LHS</span>]<span class="id">set_true</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">fun_false</span> : (<span class="kwd">fun</span>=&gt; <span class="id">false</span>) = <span class="id">set0</span> :&gt; <span class="id">set</span> <span class="id">T</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
 <span class="kwd">by</span> <span class="id">rewrite</span> [<span class="id">LHS</span>]<span class="id">set_false</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_mem_set</span> <span class="id">A</span> : [<span class="id">set</span>` <span class="id">A</span>] = <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>=&gt; <span class="id">x</span>/=; <span class="id">rewrite</span> <span class="id">inE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">mem_setE</span> (<span class="id">P</span> : <span class="id">pred</span> <span class="id">T</span>) : <span class="id">mem</span> [<span class="id">set</span>` <span class="id">P</span>] = <span class="id">mem</span> <span class="id">P</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
 <span class="kwd">by</span> <span class="id">congr</span> <span class="id">Mem</span>; <span class="id">apply</span>/<span class="id">funext</span>=&gt; <span class="id">x</span>; <span class="id">apply</span>/<span class="id">asboolP</span>/<span class="id">idP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subset_refl</span> <span class="id">A</span> : <span class="id">A</span> `&lt;=` <span class="id">A</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subset_trans</span> <span class="id">B</span> <span class="id">A</span> <span class="id">C</span> : <span class="id">A</span> `&lt;=` <span class="id">B</span> -&gt; <span class="id">B</span> `&lt;=` <span class="id">C</span> -&gt; <span class="id">A</span> `&lt;=` <span class="id">C</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">sAB</span> <span class="id">sBC</span> ? ?; <span class="id">apply</span>/<span class="id">sBC</span>/<span class="id">sAB</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sub0set</span> <span class="id">A</span> : <span class="id">set0</span> `&lt;=` <span class="id">A</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">properW</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&lt;` <span class="id">B</span> -&gt; <span class="id">A</span> `&lt;=` <span class="id">B</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
 <span class="kwd">by</span> <span class="id">case</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">properxx</span> <span class="id">A</span> : ~ <span class="id">A</span> `&lt;` <span class="id">A</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; [?]; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#commutative">apply</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#basic_lemmas.T">setC0</a></span> : ~` <span class="id">set0</span> = <span class="id">setT</span> :&gt; <span class="id">set</span> <span class="id">T</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span>; <span class="id">split</span> =&gt; ?. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setCK</span> : <span class="id">involutive</span> (@<span class="id">setC</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span>; <span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">t</span>; <span class="id">rewrite</span> /<span class="id">setC</span>; <span class="id">exact</span>: <span class="id">notLR</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setCT</span> : ~` <span class="id">setT</span> = <span class="id">set0</span> :&gt; <span class="id">set</span> <span class="id">T</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setC0</span> <span class="id">setCK</span>. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">setC_inj</span> := <span class="id">can_inj</span> <span class="id">setCK</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">setIC</span> : <span class="id">commutative</span> (@<span class="id">setI</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span>; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; ?; <span class="id">split</span>=&gt; [[]|[]]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setIS</span> <span class="id">C</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&lt;=` <span class="id">B</span> -&gt; <span class="id">C</span> `&amp;` <span class="id">A</span> `&lt;=` <span class="id">C</span> `&amp;` <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
 <span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setI">move</a></span>=&gt; <span class="id">sAB</span> <span class="id">t</span> [<span class="id">Ct</span> <span class="id">At</span>]; <span class="id">split</span> =&gt; //; <span class="id">exact</span>: <span class="id">sAB</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setSI</span> <span class="id">C</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&lt;=` <span class="id">B</span> -&gt; <span class="id">A</span> `&amp;` <span class="id">C</span> `&lt;=` <span class="id">B</span> `&amp;` <span class="id">C</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</span></div>
<div class="proofscript" id="proof50">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">sAB</span>; <span class="id">rewrite</span> -!(<span class="id">setIC</span> <span class="id">C</span>); <span class="id">apply</span> <span class="id">setIS</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setISS</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> <span class="id">D</span> : <span class="id">A</span> `&lt;=` <span class="id">C</span> -&gt; <span class="id">B</span> `&lt;=` <span class="id">D</span> -&gt; <span class="id">A</span> `&amp;` <span class="id">B</span> `&lt;=` <span class="id">C</span> `&amp;` <span class="id">D</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</span></div>
<div class="proofscript" id="proof51">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /(@<span class="id">setSI</span> <span class="id">B</span>) /<span class="id">subset_trans</span> <span class="id">sAC</span> /(@<span class="id">setIS</span> <span class="id">C</span>) /<span class="id">sAC</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setIT</span> : <span class="id">right_id</span> <span class="id">setT</span> (@<span class="id">setI</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</span></div>
<div class="proofscript" id="proof52">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span>; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; ?; <span class="id">split</span>=&gt; [[]|]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setTI</span> : <span class="id">left_id</span> <span class="id">setT</span> (@<span class="id">setI</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</span></div>
<div class="proofscript" id="proof53">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span>; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; ?; <span class="id">split</span>=&gt; [[]|]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setI0</span> : <span class="id">right_zero</span> <span class="id">set0</span> (@<span class="id">setI</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof54')">Proof.</span></div>
<div class="proofscript" id="proof54">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span>; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; ?; <span class="id">split</span>=&gt; [[]|]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set0I</span> : <span class="id">left_zero</span> <span class="id">set0</span> (@<span class="id">setI</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</span></div>
<div class="proofscript" id="proof55">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span>; <span class="id">rewrite</span> <span class="id">setIC</span> <span class="id">setI0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setICl</span> : <span class="id">left_inverse</span> <span class="id">set0</span> <span class="id">setC</span> (@<span class="id">setI</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof56')">Proof.</span></div>
<div class="proofscript" id="proof56">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span>; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; ?; <span class="id">split</span> =&gt; // -[]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setICr</span> : <span class="id">right_inverse</span> <span class="id">set0</span> <span class="id">setC</span> (@<span class="id">setI</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof57')">Proof.</span></div>
<div class="proofscript" id="proof57">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span>; <span class="id"><a href="mathcomp.classical.classical_sets.html#setIA">rewrite</a></span> <span class="id">setIC</span> <span class="id">setICl</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setIA</span> : <span class="id">associative</span> (@<span class="id">setI</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof58')">Proof.</span></div>
<div class="proofscript" id="proof58">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">C</span>; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; ?; <span class="id"><a href="mathcomp.classical.classical_sets.html#setICA">split</a></span>=&gt; [[? []]|[[]]]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#idempotent">setICA</a></span> : <span class="id">left_commutative</span> (@<span class="id">setI</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof59')">Proof.</span></div>
<div class="proofscript" id="proof59">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">C</span>; <span class="id">rewrite</span> <span class="id">setIA</span> [<span class="id">A</span> `&amp;` <span class="id">_</span>]<span class="id">setIC</span> -<span class="id"><a name="setIIl">setIA</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setIAC</span> : <span class="id">right_commutative</span> (@<span class="id">setI</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof60')">Proof.</span></div>
<div class="proofscript" id="proof60">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#setIA">A</a></span> <span class="id">B</span> <span class="id">C</span>; <span class="id">rewrite</span> <span class="id">setIC</span> <span class="id">setICA</span> <span class="id">setIA</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setIACA</span> : @<span class="id">interchange</span> (<span class="id">set</span> <span class="id">T</span>) <span class="id">setI</span> <span class="id">setI</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof61')">Proof.</span></div>
<div class="proofscript" id="proof61">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> <span class="id">D</span>; <span class="id">rewrite</span> -<span class="id">setIA</span> [<span class="id"><a href="mathcomp.classical.classical_sets.html#setIC">B</a></span> `&amp;` <span class="id">_</span>]<span class="id">setICA</span> <span class="id">setIA</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setIid</span> : <span class="id">idempotent</span> (@<span class="id"><a href="mathcomp.classical.classical_sets.html#basic_lemmas.T">setI</a></span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof62')">Proof.</span></div>
<div class="proofscript" id="proof62">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#mkset">predeqE</a></span> =&gt; ?; <span class="id">split</span>=&gt; [[]|]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setIIl</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> : <span class="id">A</span> `&amp;` <span class="id">B</span> `&amp;` <span class="id">C</span> = (<span class="id">A</span> `&amp;` <span class="id">C</span>) `&amp;` (<span class="id">B</span> `&amp;` <span class="id">C</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof63')">Proof.</span></div>
<div class="proofscript" id="proof63">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setIA</span> !(<span class="id">setIAC</span> <span class="id">_</span> <span class="id">C</span>) -(<span class="id">setIA</span> <span class="id">_</span> <span class="id">C</span>) <span class="id">setIid</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setIIr</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> : <span class="id">A</span> `&amp;` (<span class="id">B</span> `&amp;` <span class="id">C</span>) = (<span class="id">A</span> `&amp;` <span class="id">B</span>) `&amp;` (<span class="id">A</span> `&amp;` <span class="id">C</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof64')">Proof.</span></div>
<div class="proofscript" id="proof64">
 <span class="kwd">by</span> <span class="id">rewrite</span> !(<span class="id">setIC</span> <span class="id">A</span>) <span class="id">setIIl</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setUC</span> : <span class="id">commutative</span> (@<span class="id">setU</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof65')">Proof.</span></div>
<div class="proofscript" id="proof65">
 <span class="id">move</span>=&gt; <span class="id">p</span> <span class="id">q</span>; <span class="id">rewrite</span> /<span class="id">setU</span>/<span class="id">mkset</span> <span class="id">predeqE</span> =&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#setSU">a</a></span>; <span class="id">tauto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setUS</span> <span class="id">C</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setUS">A</a></span> <span class="id">B</span> : <span class="id">A</span> `&lt;=` <span class="id">B</span> -&gt; <span class="id">C</span> `|` <span class="id">A</span> `&lt;=` <span class="id">C</span> `|` <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof66')">Proof.</span></div>
<div class="proofscript" id="proof66">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#basic_lemmas.T">sAB</a></span> <span class="id">t</span> [<span class="id">Ct</span>|<span class="id">At</span>]; [<span class="id">left</span>|<span class="id">right</span>; <span class="id">exact</span>: <span class="id">sAB</span>]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setSU</span> <span class="id">C</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&lt;=` <span class="id">B</span> -&gt; <span class="id">A</span> `|` <span class="id">C</span> `&lt;=` <span class="id">B</span> `|` <span class="id">C</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof67')">Proof.</span></div>
<div class="proofscript" id="proof67">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">sAB</span>; <span class="id">rewrite</span> -!(<span class="id">setUC</span> <span class="id">C</span>); <span class="id">apply</span> <span class="id">setUS</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setUSS</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> <span class="id">D</span> : <span class="id">A</span> `&lt;=` <span class="id">C</span> -&gt; <span class="id">B</span> `&lt;=` <span class="id">D</span> -&gt; <span class="id">A</span> `|` <span class="id"><a href="mathcomp.classical.classical_sets.html#basic_lemmas.T">B</a></span> `&lt;=` <span class="id">C</span> `|` <span class="id">D</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof68')">Proof.</span></div>
<div class="proofscript" id="proof68">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /(@<span class="id">setSU</span> <span class="id">B</span>) /<span class="id">subset_trans</span> <span class="id">sAC</span> /(@<span class="id">setUS</span> <span class="id">C</span>) /<span class="id">sAC</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setTU</span> : <span class="id">left_zero</span> <span class="id">setT</span> (@<span class="id">setU</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof69')">Proof.</span></div>
<div class="proofscript" id="proof69">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span>; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span>; [<span class="id">case</span>|<span class="id">left</span>]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setUT</span> : <span class="id">right_zero</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setU">setT</a></span> (@<span class="id">setU</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof70')">Proof.</span></div>
<div class="proofscript" id="proof70">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span>; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span>; [<span class="id">case</span>|<span class="id">right</span>]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set0U</span> : <span class="id">left_id</span> <span class="id">set0</span> (@<span class="id">setU</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof71')">Proof.</span></div>
<div class="proofscript" id="proof71">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span>; <span class="id"><a href="mathcomp.classical.classical_sets.html#setC">rewrite</a></span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span>; [<span class="id">case</span>|<span class="id">right</span>]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setU0</span> : <span class="id">right_id</span> <span class="id">set0</span> (@<span class="id">setU</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof72')">Proof.</span></div>
<div class="proofscript" id="proof72">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span>; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span>; [<span class="id">case</span>|<span class="id">left</span>]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setUCl</span> : <span class="id">left_inverse</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#left_commutative">setT</a></span> <span class="id">setC</span> (@<span class="id">setU</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof73')">Proof.</span></div>
<div class="proofscript" id="proof73">
<span class="id">move</span>=&gt; <span class="id">A</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#setUA">t</a></span>; <span class="id">split</span> =&gt; // <span class="id"><a href="mathcomp.classical.classical_sets.html#setUC">_</a></span>; <span class="id">case</span>: (<span class="id">pselect</span> (<span class="id">A</span> <span class="id">t</span>)); [<span class="id">right</span>|<span class="id">left</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setUCr</span> : <span class="id">right_inverse</span> <span class="id">setT</span> <span class="id">setC</span> (@<span class="id">setU</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof74')">Proof.</span></div>
<div class="proofscript" id="proof74">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span>; <span class="id">rewrite</span> <span class="id">setUC</span> <span class="id">setUCl</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setUA</span> : <span class="id">associative</span> (@<span class="id">setU</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof75')">Proof.</span></div>
<div class="proofscript" id="proof75">
 <span class="id">move</span>=&gt; <span class="id">p</span> <span class="id">q</span> <span class="id">r</span>; <span class="id">rewrite</span> /<span class="id">setU</span>/<span class="id">mkset</span> <span class="id">predeqE</span> =&gt; <span class="id">a</span>; <span class="id">tauto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#idempotent">setUCA</a></span> : <span class="id">left_commutative</span> (@<span class="id">setU</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof76')">Proof.</span></div>
<div class="proofscript" id="proof76">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">C</span>; <span class="id">rewrite</span> <span class="id">setUA</span> [<span class="id">A</span> `|` <span class="id">_</span>]<span class="id">setUC</span> -<span class="id">setUA</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setUAC</span> : <span class="id">right_commutative</span> (@<span class="id">setU</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof77')">Proof.</span></div>
<div class="proofscript" id="proof77">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">C</span>; <span class="id">rewrite</span> <span class="id">setUC</span> <span class="id">setUCA</span> <span class="id">setUA</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setUACA</span> : @<span class="id">interchange</span> (<span class="id">set</span> <span class="id">T</span>) <span class="id">setU</span> <span class="id">setU</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof78')">Proof.</span></div>
<div class="proofscript" id="proof78">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> <span class="id">D</span>; <span class="id">rewrite</span> -<span class="id">setUA</span> [<span class="id">B</span> `|` <span class="id">_</span>]<span class="id">setUCA</span> <span class="id">setUA</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setUid</span> : <span class="id">idempotent</span> (@<span class="id">setU</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof79')">Proof.</span></div>
<div class="proofscript" id="proof79">
 <span class="id">move</span>=&gt; <span class="id">p</span>; <span class="id">rewrite</span> /<span class="id">setU</span>/<span class="id">mkset</span> <span class="id">predeqE</span> =&gt; <span class="id">a</span>; <span class="id">tauto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setUUl</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> : <span class="id">A</span> `|` <span class="id">B</span> `|` <span class="id">C</span> = (<span class="id">A</span> `|` <span class="id">C</span>) `|` (<span class="id">B</span> `|` <span class="id">C</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof80')">Proof.</span></div>
<div class="proofscript" id="proof80">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setUA</span> !(<span class="id">setUAC</span> <span class="id">_</span> <span class="id">C</span>) -(<span class="id">setUA</span> <span class="id">_</span> <span class="id">C</span>) <span class="id">setUid</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setUUr</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> : <span class="id">A</span> `|` (<span class="id">B</span> `|` <span class="id">C</span>) = (<span class="id">A</span> `|` <span class="id">B</span>) `|` (<span class="id">A</span> `|` <span class="id">C</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof81')">Proof.</span></div>
<div class="proofscript" id="proof81">
 <span class="kwd">by</span> <span class="id">rewrite</span> !(<span class="id">setUC</span> <span class="id">A</span>) <span class="id">setUUl</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setU_id2r</span> <span class="id">C</span> <span class="id">A</span> <span class="id">B</span> :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, (~` <span class="id">B</span>) <span class="id">x</span> -&gt; <span class="id">A</span> <span class="id">x</span> = <span class="id">C</span> <span class="id">x</span>) -&gt; (<span class="id">A</span> `|` <span class="id">B</span>) = (<span class="id">C</span> `|` <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof82')">Proof.</span></div>
<div class="proofscript" id="proof82">
<span class="id">move</span>=&gt; <span class="id">h</span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">seteqP</a></span>; <span class="id">split</span> =&gt; [<span class="id">x</span> [<span class="id">Ax</span>|<span class="id">Bx</span>]|<span class="id">x</span> [<span class="id">Cx</span>|<span class="id">Bx</span>]]; [|<span class="kwd">by</span> <span class="id">right</span>| |<span class="kwd">by</span> <span class="id">right</span>].<br/>
- <span class="kwd">by</span> <span class="id">have</span> [|/<span class="id">h</span> {}<span class="id">h</span>] := <span class="id">pselect</span> (<span class="id">B</span> <span class="id">x</span>); [<span class="kwd">by</span> <span class="id">right</span>|<span class="id">left</span>; <span class="id">rewrite</span> -<span class="id">h</span>].<br/>
- <span class="kwd">by</span> <span class="id">have</span> [|/<span class="id">h</span> {}<span class="id">h</span>] := <span class="id">pselect</span> (<span class="id">B</span> <span class="id">x</span>); [<span class="kwd">by</span> <span class="id">right</span>|<span class="id">left</span>; <span class="id">rewrite</span> <span class="id">h</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setDE</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `\` <span class="id">B</span> = <span class="id">A</span> `&amp;` ~` <span class="id">B</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof83')">Proof.</span></div>
<div class="proofscript" id="proof83">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setDUK</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&lt;=` <span class="id">B</span> -&gt; <span class="id">A</span> `|` (<span class="id">B</span> `\` <span class="id">A</span>) = <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof84')">Proof.</span></div>
<div class="proofscript" id="proof84">
<span class="id">move</span>=&gt; <span class="id">AB</span>; <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>=&gt; [<span class="id">x</span> [/<span class="id">AB</span>//|[//]]|<span class="id">x</span> <span class="id">Bx</span>].<br/>
<span class="kwd">by</span> <span class="id">have</span> [<span class="id">Ax</span>|<span class="id">nAx</span>] := <span class="id">pselect</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#setT">A</a></span> <span class="id">x</span>); [<span class="id">left</span>|<span class="id">right</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setDKU</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&lt;=` <span class="id">B</span> -&gt; (<span class="id">B</span> `\` <span class="id">A</span>) `|` <span class="id">A</span> = <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof85')">Proof.</span></div>
<div class="proofscript" id="proof85">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">setDUK</span>; <span class="id">rewrite</span> <span class="id">setUC</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setDv</span> <span class="id">A</span> : <span class="id">A</span> `\` <span class="id">A</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof86')">Proof.</span></div>
<div class="proofscript" id="proof86">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span> =&gt; // -[]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setUv</span> <span class="id">A</span> : <span class="id"><a name="setICK">A</a></span> `|` ~` <span class="id">A</span> = <span class="id">setT</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof87')">Proof.</span></div>
<div class="proofscript" id="proof87">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">predeqP</span> =&gt; <span class="id">x</span>; <span class="id">split</span>=&gt; //= <span class="id">_</span>; <span class="id">apply</span>: <span class="id">lem</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setvU</span> <span class="id">A</span> : ~` <span class="id">A</span> `|` <span class="id">A</span> = <span class="id">setT</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof88')">Proof.</span></div>
<div class="proofscript" id="proof88">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setUC</span> <span class="id">setUv</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setUCK</span> <span class="id">A</span> <span class="id">B</span> : (<span class="id">A</span> `|` <span class="id">B</span>) `|` ~` <span class="id">B</span> = <span class="id">setT</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof89')">Proof.</span></div>
<div class="proofscript" id="proof89">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setUA</span> <span class="id">setUv</span> <span class="id">setUT</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDE">setUKC</a></span> <span class="id">A</span> <span class="id">B</span> : ~` <span class="id">A</span> `|` (<span class="id">A</span> `|` <span class="id">B</span>) = <span class="id">setT</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof90')">Proof.</span></div>
<div class="proofscript" id="proof90">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setUA</span> <span class="id">setvU</span> <span class="id">setTU</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setICK</span> <span class="id">A</span> <span class="id">B</span> : (<span class="id">A</span> `&amp;` <span class="id">B</span>) `&amp;` ~` <span class="id">B</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof91')">Proof.</span></div>
<div class="proofscript" id="proof91">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setIA</span> <span class="id">setICr</span> <span class="id">setI0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setIKC</span> <span class="id">A</span> <span class="id">B</span> : ~` <span class="id">A</span> `&amp;` (<span class="id">A</span> `&amp;` <span class="id">B</span>) = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof92')">Proof.</span></div>
<div class="proofscript" id="proof92">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setIA</span> <span class="id">setICl</span> <span class="id">set0I</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setDIK</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&amp;` (<span class="id">B</span> `\` <span class="id">A</span>) = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof93')">Proof.</span></div>
<div class="proofscript" id="proof93">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setDE</span> <span class="id">setICA</span> -<span class="id">setDE</span> <span class="id">setDv</span> <span class="id">setI0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setDKI</span> <span class="id">A</span> <span class="id">B</span> : (<span class="id">B</span> `\` <span class="id">A</span>) `&amp;` <span class="id">A</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof94')">Proof.</span></div>
<div class="proofscript" id="proof94">
 <span class="kwd">by</span> <span class="id"><a name="set1I">rewrite</a></span> <span class="id">setIC</span> <span class="id">setDIK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setD1K</span> <span class="id">a</span> <span class="id">A</span> : <span class="id">A</span> <span class="id">a</span> -&gt; <span class="id">a</span> |` <span class="id">A</span> `\ <span class="id">a</span> = <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof95')">Proof.</span></div>
<div class="proofscript" id="proof95">
  <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Aa</span>; <span class="id">rewrite</span> <span class="id">setDUK</span>//= =&gt; <span class="id">x</span> -&gt;. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setI1</span> <span class="id">A</span> <span class="id">a</span> : <span class="id">A</span> `&amp;` [<span class="id">set</span> <span class="id">a</span>] = <span class="kwd">if</span> <span class="id">a</span> \<span class="kwd">in</span> <span class="id">A</span> <span class="kwd">then</span> [<span class="id">set</span> <span class="id">a</span>] <span class="kwd">else</span> <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof96')">Proof.</span></div>
<div class="proofscript" id="proof96">
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">predeqP</span> =&gt; <span class="id">b</span>; <span class="id">case</span>: <span class="id">ifPn</span>; <span class="id">rewrite</span> (<span class="id">inE</span>, <span class="id">notin_set</span>) =&gt; <span class="id">Aa</span>;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">split</span>=&gt; [[]|]//; [<span class="id">move</span>=&gt; -&gt; //|<span class="id">move</span>=&gt; /[<span class="id">swap</span>] -&gt; /<span class="id">Aa</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set1I</span> <span class="id">A</span> <span class="id">a</span> : [<span class="id">set</span> <span class="id">a</span>] `&amp;` <span class="id">A</span> = <span class="kwd">if</span> <span class="id">a</span> \<span class="kwd">in</span> <span class="id">A</span> <span class="kwd">then</span> [<span class="id">set</span> <span class="id">a</span>] <span class="kwd">else</span> <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof97')">Proof.</span></div>
<div class="proofscript" id="proof97">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setIC</span> <span class="id">setI1</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subset0</span> <span class="id">A</span> : (<span class="id">A</span> `&lt;=` <span class="id">set0</span>) = (<span class="id">A</span> = <span class="id">set0</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof98')">Proof.</span></div>
<div class="proofscript" id="proof98">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span> <span class="id">propeqE</span>; <span class="id">split</span>=&gt; [<span class="id">A0</span>|[]//]; <span class="id">split</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subTset</span> <span class="id">A</span> : (<span class="id">setT</span> `&lt;=` <span class="id">A</span>) = (<span class="id">A</span> = <span class="id">setT</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof99')">Proof.</span></div>
<div class="proofscript" id="proof99">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span> <span class="id">propeqE</span>; <span class="id">split</span>=&gt; [|[]]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sub1set</span> <span class="id">x</span> <span class="id">A</span> : ([<span class="id">set</span> <span class="id">x</span>] `&lt;=` <span class="id">A</span>) = (<span class="id">x</span> \<span class="kwd">in</span> <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof100')">Proof.</span></div>
<div class="proofscript" id="proof100">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">propext</span>; <span class="id">split</span>=&gt; [|/[!<span class="id">inE</span>] <span class="id">xA</span> <span class="id">_</span> -&gt;//]; <span class="id">rewrite</span> <span class="id">inE</span>; <span class="id">exact</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subsetT</span> <span class="id">A</span> : <span class="id">A</span> `&lt;=` <span class="id">setT</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof101')">Proof.</span></div>
<div class="proofscript" id="proof101">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subsetW</span> {<span class="id">A</span> <span class="id">B</span>} : <span class="id">A</span> = <span class="id">B</span> -&gt; <span class="id">A</span> `&lt;=` <span class="id">B</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof102')">Proof.</span></div>
<div class="proofscript" id="proof102">
 <span class="kwd">by</span> <span class="id">move</span>-&gt;. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">subsetCW</span> {<span class="id">A</span> <span class="id">B</span>} : <span class="id">A</span> = <span class="id">B</span> -&gt; <span class="id">B</span> `&lt;=` <span class="id">A</span> := <span class="id">subsetW</span> \<span class="id">o</span> <span class="id">esym</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">disj_set2E</span> <span class="id">A</span> <span class="id">B</span> : [<span class="id">disjoint</span> <span class="id">A</span> &amp; <span class="id">B</span>] = (<span class="id">A</span> `&amp;` <span class="id">B</span> == <span class="id"><a href="mathcomp.classical.classical_sets.html#disj_set2E">set0</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof103')">Proof.</span></div>
<div class="proofscript" id="proof103">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">disj_set2P</span> {<span class="id">A</span> <span class="id">B</span>} : <span class="id">reflect</span> (<span class="id">A</span> `&amp;` <span class="id">B</span> = <span class="id">set0</span>) [<span class="id">disjoint</span> <span class="id">A</span> &amp; <span class="id">B</span>]%<span class="id">classic</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof104')">Proof.</span></div>
<div class="proofscript" id="proof104">
 <span class="id">exact</span>/<span class="id">eqP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">disj_setPS</span> {<span class="id">A</span> <span class="id">B</span>} : <span class="id">reflect</span> (<span class="id">A</span> `&amp;` <span class="id">B</span> `&lt;=` <span class="id">set0</span>) [<span class="id">disjoint</span> <span class="id">A</span> &amp; <span class="id">B</span>]%<span class="id">classic</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof105')">Proof.</span></div>
<div class="proofscript" id="proof105">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#reflect">subset0</a></span>; <span class="id">apply</span>: <span class="id">disj_set2P</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">disj_set_sym</span> <span class="id">A</span> <span class="id">B</span> : [<span class="id">disjoint</span> <span class="id">B</span> &amp; <span class="id">A</span>] = [<span class="id">disjoint</span> <span class="id">A</span> &amp; <span class="id">B</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof106')">Proof.</span></div>
<div class="proofscript" id="proof106">
 <span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id">disj_set2E</span> <span class="id">setIC</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">disj_setPCl</span> {<span class="id">A</span> <span class="id">B</span>} : <span class="id">reflect</span> (<span class="id">A</span> `&lt;=` <span class="id">B</span>) [<span class="id">disjoint</span> <span class="id">A</span> &amp; ~` <span class="id">B</span>]%<span class="id">classic</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof107')">Proof.</span></div>
<div class="proofscript" id="proof107">
<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#rwP">apply</a></span>: (<span class="id">iffP</span> <span class="id">disj_setPS</span>) =&gt; [<span class="id">P</span> <span class="id">t</span> ?|<span class="id">P</span> <span class="id">t</span> [/<span class="id">P</span>//]].<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">contrapT</span> =&gt; ?; <span class="id">apply</span>: (<span class="id">P</span> <span class="id">t</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">disj_setPCr</span> {<span class="id">A</span> <span class="id">B</span>} : <span class="id">reflect</span> (<span class="id">A</span> `&lt;=` <span class="id">B</span>) [<span class="id">disjoint</span> ~` <span class="id">B</span> &amp; <span class="id">A</span>]%<span class="id">classic</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof108')">Proof.</span></div>
<div class="proofscript" id="proof108">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">disj_set_sym</span>; <span class="id">apply</span>: <span class="id">disj_setPCl</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">disj_setPLR</span> {<span class="id">A</span> <span class="id">B</span>} : <span class="id">reflect</span> (<span class="id">A</span> `&lt;=` ~` <span class="id">B</span>) [<span class="id">disjoint</span> <span class="id">A</span> &amp; <span class="id">B</span>]%<span class="id">classic</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof109')">Proof.</span></div>
<div class="proofscript" id="proof109">
 <span class="kwd">by</span> <span class="id">apply</span>: (<span class="id">equivP</span> <span class="id">idP</span>); <span class="id">rewrite</span> (<span class="id">rwP</span> <span class="id">disj_setPCl</span>) <span class="id">setCK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">disj_setPRL</span> {<span class="id">A</span> <span class="id">B</span>} : <span class="id">reflect</span> (<span class="id">B</span> `&lt;=` ~` <span class="id">A</span>) [<span class="id">disjoint</span> <span class="id">A</span> &amp; <span class="id">B</span>]%<span class="id">classic</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof110')">Proof.</span></div>
<div class="proofscript" id="proof110">
 <span class="kwd">by</span> <span class="id">apply</span>: (<span class="id">equivP</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">idP</a></span>); <span class="id">rewrite</span> (<span class="id">rwP</span> <span class="id">disj_setPCr</span>) <span class="id">setCK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subsets_disjoint</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&lt;=` <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#contraPnot">B</a></span> &lt;-&gt; <span class="id">A</span> `&amp;` ~` <span class="id">B</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof111')">Proof.</span></div>
<div class="proofscript" id="proof111">
 <span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">rwP</span> <span class="id">disj_setPCl</span>) (<span class="id">rwP</span> <span class="id">eqP</span>). Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">disjoints_subset</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&amp;` <span class="id">B</span> = <span class="id">set0</span> &lt;-&gt; <span class="id">A</span> `&lt;=` ~` <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof112')">Proof.</span></div>
<div class="proofscript" id="proof112">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">subsets_disjoint</span> <span class="id">setCK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subsetC1</span> <span class="id">x</span> <span class="id">A</span> : (<span class="id">A</span> `&lt;=` [<span class="id">set</span>~ <span class="id">x</span>]) = (<span class="id">x</span> \<span class="kwd">in</span> ~` <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof113')">Proof.</span></div>
<div class="proofscript" id="proof113">
<span class="id">rewrite</span> !<span class="id">inE</span>; <span class="id">apply</span>/<span class="id">propext</span>; <span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">move</span>/[<span class="id">apply</span>]; <span class="id">apply</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">NAx</span> <span class="id">y</span>; <span class="id">apply</span>: <span class="id">contraPnot</span> =&gt; -&gt;.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setSD</span> <span class="id">C</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&lt;=` <span class="id">B</span> -&gt; <span class="id">A</span> `\` <span class="id">C</span> `&lt;=` <span class="id">B</span> `\` <span class="id">C</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof114')">Proof.</span></div>
<div class="proofscript" id="proof114">
 <span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id">setDE</span>; <span class="id">apply</span>: <span class="id">setSI</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setTD</span> <span class="id">A</span> : <span class="id">setT</span> `\` <span class="id">A</span> = ~` <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">A</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof115')">Proof.</span></div>
<div class="proofscript" id="proof115">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span> =&gt; // -[]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set0P</span> <span class="id">A</span> : (<span class="id">A</span> != <span class="id">set0</span>) &lt;-&gt; (<span class="id">A</span> !=<span class="id">set0</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof116')">Proof.</span></div>
<div class="proofscript" id="proof116">
<span class="id">split</span>=&gt; [/<span class="id">negP</span> <span class="id">A_neq0</span>|[<span class="id">t</span> <span class="id">tA</span>]]; <span class="id">last</span> <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">negP</span> =&gt; /<span class="id">eqP</span> <span class="id">A0</span>; <span class="id">rewrite</span> <span class="id">A0</span> <span class="kwd">in</span> <span class="id">tA</span>.<br/>
<span class="id">apply</span>: <span class="id">contrapT</span> =&gt; /<span class="id">asboolPn</span>/<span class="id">forallp_asboolPn</span> <span class="id">A0</span>; <span class="id">apply</span>/<span class="id">A_neq0</span>/<span class="id">eqP</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setF_eq0</span> : (<span class="id">T</span> -&gt; <span class="id">False</span>) -&gt; <span class="id">all_equal_to</span> (<span class="id">set0</span> : <span class="id">set</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof117')">Proof.</span></div>
<div class="proofscript" id="proof117">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">TF</span> <span class="id">A</span>; <span class="id">rewrite</span> -<span class="id">subset0</span> =&gt; <span class="id">x</span>; <span class="id">have</span> := <span class="id">TF</span> <span class="id">x</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subset_nonempty</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&lt;=` <span class="id">B</span> -&gt; <span class="id">A</span> !=<span class="id">set0</span> -&gt; <span class="id">B</span> !=<span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof118')">Proof.</span></div>
<div class="proofscript" id="proof118">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id"><a name="subsetC2">sAB</a></span> [<span class="id">x</span> <span class="id">Ax</span>]; <span class="kwd">exists</span> <span class="id">x</span>; <span class="id">apply</span>: <span class="id">sAB</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subsetC</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&lt;=` <span class="id">B</span> -&gt; ~` <span class="id">B</span> `&lt;=` ~` <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof119')">Proof.</span></div>
<div class="proofscript" id="proof119">
 <span class="kwd">by</span> <span class="id"><a name="subsetCP">move</a></span>=&gt; <span class="id">sAB</span> ? <span class="id">nBa</span> ?; <span class="id">apply</span>/<span class="id">nBa</span>/<span class="id">sAB</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subsetCl</span> <span class="id">A</span> <span class="id">B</span> : ~` <span class="id">A</span> `&lt;=` <span class="id">B</span> -&gt; ~` <span class="id">B</span> `&lt;=` <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof120')">Proof.</span></div>
<div class="proofscript" id="proof120">
 <span class="kwd">by</span> <span class="id"><a name="subsetCPl">move</a></span>=&gt; /<span class="id">subsetC</span>; <span class="id">rewrite</span> <span class="id">setCK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subsetCr</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&lt;=` ~` <span class="id">B</span> -&gt; <span class="id">B</span> `&lt;=` ~` <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof121')">Proof.</span></div>
<div class="proofscript" id="proof121">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">subsetC</span>; <span class="id">rewrite</span> <span class="id">setCK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subsetC2</span> <span class="id">A</span> <span class="id">B</span> : ~` <span class="id">A</span> `&lt;=` ~` <span class="id">B</span> -&gt; <span class="id">B</span> `&lt;=` <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof122')">Proof.</span></div>
<div class="proofscript" id="proof122">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id"><a name="subsetUl">subsetC</a></span>; <span class="id">rewrite</span> !<span class="id">setCK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subsetCP</span> <span class="id">A</span> <span class="id">B</span> : ~` <span class="id">A</span> `&lt;=` ~` <span class="id">B</span> &lt;-&gt; <span class="id">B</span> `&lt;=` <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof123')">Proof.</span></div>
<div class="proofscript" id="proof123">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; /<span class="id">subsetC</span>; <span class="id">rewrite</span> ?<span class="id">setCK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subsetCPl</span> <span class="id">A</span> <span class="id">B</span> : ~` <span class="id">A</span> `&lt;=` <span class="id">B</span> &lt;-&gt; ~` <span class="id">B</span> `&lt;=` <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof124')">Proof.</span></div>
<div class="proofscript" id="proof124">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; /<span class="id">subsetC</span>; <span class="id">rewrite</span> ?<span class="id">setCK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subsetCPr</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&lt;=` ~` <span class="id">B</span> &lt;-&gt; <span class="id">B</span> `&lt;=` ~` <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof125')">Proof.</span></div>
<div class="proofscript" id="proof125">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; /<span class="id">subsetC</span>; <span class="id">rewrite</span> ?<span class="id">setCK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subsetUl</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&lt;=` <span class="id">A</span> `|` <span class="id">B</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof126')">Proof.</span></div>
<div class="proofscript" id="proof126">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span>; <span class="id">left</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subsetUr</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">B</span> `&lt;=` <span class="id">A</span> `|` <span class="id">B</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof127')">Proof.</span></div>
<div class="proofscript" id="proof127">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span>; <span class="id">right</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subUset</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> : (<span class="id">B</span> `|` <span class="id">C</span> `&lt;=` <span class="id">A</span>) = ((<span class="id">B</span> `&lt;=` <span class="id">A</span>) /\ (<span class="id">C</span> `&lt;=` <span class="id">A</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof128')">Proof.</span></div>
<div class="proofscript" id="proof128">
<span class="id">rewrite</span> <span class="id">propeqE</span>; <span class="id">split</span> =&gt; [|[<span class="id"><a href="mathcomp.classical.classical_sets.html#setIidPl">BA</a></span> <span class="id">CA</span>] <span class="id">x</span>]; <span class="id">last</span> <span class="kwd">by</span> <span class="id">case</span>; [<span class="id">exact</span>: <span class="id">BA</span> | <span class="id">exact</span>: <span class="id">CA</span>].<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">sBC_A</span>; <span class="id">split</span>=&gt; <span class="id">x</span> ?; <span class="id">apply</span> <span class="id">sBC_A</span>; [<span class="id">left</span> | <span class="id">right</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setIidPl</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&amp;` <span class="id">B</span> = <span class="id">A</span> &lt;-&gt; <span class="id">A</span> `&lt;=` <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof129')">Proof.</span></div>
<div class="proofscript" id="proof129">
<span class="id">rewrite</span> <span class="id">predeqE</span>; <span class="id">split</span>=&gt; [<span class="id">AB</span> <span class="id">t</span> /<span class="id">AB</span> [] //|<span class="id">AB</span> <span class="id">t</span>].<br/>
<span class="kwd">by</span> <span class="id">split</span>=&gt; [[]//|<span class="id">At</span>]; <span class="id">split</span>=&gt; //; <span class="id">exact</span>: <span class="id">AB</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setIidPr</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&amp;` <span class="id">B</span> = <span class="id">B</span> &lt;-&gt; <span class="id">B</span> `&lt;=` <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof130')">Proof.</span></div>
<div class="proofscript" id="proof130">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setIC</span> <span class="id">setIidPl</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setIidl</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&lt;=` <span class="id">B</span> -&gt; <span class="id">A</span> `&amp;` <span class="id">B</span> = <span class="id">A</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof131')">Proof.</span></div>
<div class="proofscript" id="proof131">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a name="setUidl">setIidPl</a></span>. Qed.</div>
<span class="kwd">Lemma</span> <span class="id">setIidr</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">B</span> `&lt;=` <span class="id">A</span> -&gt; <span class="id">A</span> `&amp;` <span class="id">B</span> = <span class="id"><a href="mathcomp.classical.classical_sets.html#setUidPl">B</a></span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof132')">Proof.</span></div>
<div class="proofscript" id="proof132">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a name="setUidr">setIidPr</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setUidPl</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `|` <span class="id">B</span> = <span class="id">A</span> &lt;-&gt; <span class="id">B</span> `&lt;=` <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof133')">Proof.</span></div>
<div class="proofscript" id="proof133">
<span class="id">split</span>=&gt; [&lt;- ? ?|<span class="id">BA</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">right</span>.<br/>
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span>=&gt; [[//|/<span class="id">BA</span>//]|?]; <span class="kwd">by</span> <span class="id">left</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setUidPr</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `|` <span class="id">B</span> = <span class="id">B</span> &lt;-&gt; <span class="id">A</span> `&lt;=` <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof134')">Proof.</span></div>
<div class="proofscript" id="proof134">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setUC</span> <span class="id">setUidPl</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setUidl</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">B</span> `&lt;=` <span class="id">A</span> -&gt; <span class="id">A</span> `|` <span class="id">B</span> = <span class="id">A</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof135')">Proof.</span></div>
<div class="proofscript" id="proof135">
 <span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#disjoints_subset">rewrite</a></span> <span class="id">setUidPl</span>. Qed.</div>
<span class="kwd">Lemma</span> <span class="id">setUidr</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&lt;=` <span class="id">B</span> -&gt; <span class="id">A</span> `|` <span class="id">B</span> = <span class="id">B</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof136')">Proof.</span></div>
<div class="proofscript" id="proof136">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setUidPr</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subsetI</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> : (<span class="id">A</span> `&lt;=` <span class="id">B</span> `&amp;` <span class="id">C</span>) = ((<span class="id">A</span> `&lt;=` <span class="id">B</span>) /\ (<span class="id">A</span> `&lt;=` <span class="id">C</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof137')">Proof.</span></div>
<div class="proofscript" id="proof137">
<span class="id">rewrite</span> <span class="id">propeqE</span>; <span class="id">split</span>=&gt; [<span class="id">H</span>|[<span class="id"><a name="subIset">y</a></span> <span class="id">z</span> ??]]; <span class="id">split</span>; <span class="kwd">by</span> [<span class="id">move</span>=&gt; ?/<span class="id">H</span>[]|<span class="id">apply</span> <span class="id">y</span>|<span class="id">apply</span> <span class="id">z</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setDidPl</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `\` <span class="id">B</span> = <span class="id">A</span> &lt;-&gt; <span class="id">A</span> `&amp;` <span class="id">B</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof138')">Proof.</span></div>
<div class="proofscript" id="proof138">
<span class="id">rewrite</span> <span class="id">setDE</span> <span class="id">disjoints_subset</span> <span class="id">predeqE</span>; <span class="id">split</span> =&gt; [<span class="id">AB</span> <span class="id">t</span>|<span class="id">AB</span> <span class="id">t</span>].<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">AB</span> =&gt; -[].<br/>
<span class="kwd">by</span> <span class="id">split</span>=&gt; [[]//|<span class="id">At</span>]; <span class="id">move</span>: (<span class="id">AB</span> <span class="id">t</span> <span class="id">At</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setDidl</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&amp;` <span class="id">B</span> = <span class="id">set0</span> -&gt; <span class="id">A</span> `\` <span class="id">B</span> = <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof139')">Proof.</span></div>
<div class="proofscript" id="proof139">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">setDidPl</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subIset</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> : <span class="id">A</span> `&lt;=` <span class="id">C</span> \/ <span class="id">B</span> `&lt;=` <span class="id">C</span> -&gt; <span class="id">A</span> `&amp;` <span class="id">B</span> `&lt;=` <span class="id">C</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof140')">Proof.</span></div>
<div class="proofscript" id="proof140">
 <span class="id">case</span>=&gt; <span class="id">sub</span> <span class="id">a</span>; <span class="kwd">by</span> [<span class="id">move</span>=&gt; [/<span class="id">sub</span>] | <span class="id">move</span>=&gt; [<span class="id">_</span> /<span class="id">sub</span>]]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subIsetl</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&amp;` <span class="id">B</span> `&lt;=` <span class="id">A</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof141')">Proof.</span></div>
<div class="proofscript" id="proof141">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subIsetr</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&amp;` <span class="id">B</span> `&lt;=` <span class="id">B</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof142')">Proof.</span></div>
<div class="proofscript" id="proof142">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subDsetl</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `\` <span class="id">B</span> `&lt;=` <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof143')">Proof.</span></div>
<div class="proofscript" id="proof143">
 <span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">rewrite</a></span> <span class="id">setDE</span>; <span class="id">apply</span>: <span class="id">subIsetl</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subDsetr</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `\` <span class="id">B</span> `&lt;=` ~` <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof144')">Proof.</span></div>
<div class="proofscript" id="proof144">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setDE</span>; <span class="id">apply</span>: <span class="id">subIsetr</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subsetI_neq0</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> <span class="id">D</span> :<br/>
&nbsp;&nbsp;<span class="id">A</span> `&lt;=` <span class="id">B</span> -&gt; <span class="id">C</span> `&lt;=` <span class="id">D</span> -&gt; <span class="id">A</span> `&amp;` <span class="id">C</span> !=<span class="id">set0</span> -&gt; <span class="id">B</span> `&amp;` <span class="id">D</span> !=<span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof145')">Proof.</span></div>
<div class="proofscript" id="proof145">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">AB</span> <span class="id">CD</span> [<span class="id">x</span> [/<span class="id">AB</span> <span class="id">Bx</span> /<span class="id">CD</span> <span class="id">Dx</span>]]; <span class="kwd">exists</span> <span class="id">x</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subsetI_eq0</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> <span class="id">D</span> :<br/>
&nbsp;&nbsp;<span class="id">A</span> `&lt;=` <span class="id">B</span> -&gt; <span class="id">C</span> `&lt;=` <span class="id">D</span> -&gt; <span class="id">B</span> `&amp;` <span class="id">D</span> = <span class="id">set0</span> -&gt; <span class="id">A</span> `&amp;` <span class="id">C</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof146')">Proof.</span></div>
<div class="proofscript" id="proof146">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">AB</span> /(<span class="id">subsetI_neq0</span> <span class="id">AB</span>); <span class="id">rewrite</span> -!<span class="id">set0P</span> =&gt; /<span class="id">contra_eq</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setD_eq0</span> <span class="id">A</span> <span class="id">B</span> : (<span class="id">A</span> `\` <span class="id">B</span> = <span class="id">set0</span>) = (<span class="id">A</span> `&lt;=` <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof147')">Proof.</span></div>
<div class="proofscript" id="proof147">
<span class="id">rewrite</span> <span class="id">propeqE</span>; <span class="id">split</span>=&gt; [<span class="id">ADB0</span> <span class="id">a</span>|<span class="id">sAB</span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">contraPP</span> =&gt; <span class="id">nBa</span> <span class="id">xA</span>; <span class="id">rewrite</span> -[<span class="id">False</span>]/(<span class="id">set0</span> <span class="id">a</span>) -<span class="id">ADB0</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; ?; <span class="id">split</span>=&gt; // - [?]; <span class="id">apply</span>; <span class="id">apply</span>: <span class="id">sAB</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">properEneq</span> <span class="id">A</span> <span class="id">B</span> : (<span class="id">A</span> `&lt;` <span class="id">B</span>) = (<span class="id"><a name="setU_eq0">A</a></span> != <span class="id">B</span> /\ <span class="id">A</span> `&lt;=` <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof148')">Proof.</span></div>
<div class="proofscript" id="proof148">
<span class="id">rewrite</span> /<span class="id">proper</span> <span class="id">andC</span> <span class="id">propeqE</span>; <span class="id">split</span> =&gt; [[<span class="id">BA</span> <span class="id">AB</span>]|[/<span class="id">eqP</span>]].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#subUset">split</a></span> =&gt; //; <span class="id">apply</span>/<span class="id">negP</span>; <span class="id">apply</span>: <span class="id">contra_not</span> <span class="id">BA</span> =&gt; /<span class="id">eqP</span> -&gt;.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span> =&gt; <span class="id">AB</span> <span class="id">BA</span>; <span class="id">split</span> =&gt; //; <span class="id">exact</span>: <span class="id">contra_not</span> <span class="id">AB</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">nonsubset</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIC">A</a></span> <span class="id">B</span> : ~ (<span class="id">A</span> `&lt;=` <span class="id">B</span>) -&gt; <span class="id">A</span> `&amp;` ~` <span class="id">B</span> !=<span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof149')">Proof.</span></div>
<div class="proofscript" id="proof149">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setD_eq0</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIC">setDE</a></span> -<span class="id">set0P</span> =&gt; /<span class="id">eqP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setU_eq0</span> <span class="id"><a name="setDT">A</a></span> <span class="id">B</span> : (<span class="id">A</span> `|` <span class="id">B</span> = <span class="id">set0</span>) = ((<span class="id">A</span> = <span class="id">set0</span>) /\ (<span class="id">B</span> = <span class="id">set0</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof150')">Proof.</span></div>
<div class="proofscript" id="proof150">
 <span class="kwd">by</span> <span class="id">rewrite</span> -!<span class="id">subset0</span> <span class="id">subUset</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setCS</span> <span class="id">A</span> <span class="id">B</span> : (~` <span class="id">A</span> `&lt;=` ~` <span class="id">B</span>) = (<span class="id">B</span> `&lt;=` <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof151')">Proof.</span></div>
<div class="proofscript" id="proof151">
<span class="id">rewrite</span> <span class="id">propeqE</span>; <span class="id">split</span> =&gt; [|<span class="id">BA</span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>/<span class="id">subsets_disjoint</span>; <span class="id">rewrite</span> <span class="id">setCK</span> <span class="id">setIC</span> =&gt; /<span class="id">subsets_disjoint</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">subsets_disjoint</span>; <span class="id">rewrite</span> <span class="id">setCK</span> <span class="id">setIC</span>; <span class="id">apply</span>/<span class="id">subsets_disjoint</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setDT</span> <span class="id">A</span> : <span class="id">A</span> `\` <span class="id">setT</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof152')">Proof.</span></div>
<div class="proofscript" id="proof152">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setDE</span> <span class="id">setCT</span> <span class="id">setI0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set0D</span> <span class="id">A</span> : <span class="id">set0</span> `\` <span class="id">A</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof153')">Proof.</span></div>
<div class="proofscript" id="proof153">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setDE</span> <span class="id">set0I</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setD0</span> <span class="id">A</span> : <span class="id">A</span> `\` <span class="id">set0</span> = <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof154')">Proof.</span></div>
<div class="proofscript" id="proof154">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setDE</span> <span class="id">setC0</span> <span class="id">setIT</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setDS</span> <span class="id">C</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&lt;=` <span class="id">B</span> -&gt; <span class="id">C</span> `\` <span class="id">B</span> `&lt;=` <span class="id">C</span> `\` <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof155')">Proof.</span></div>
<div class="proofscript" id="proof155">
 <span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id"><a name="setCI">setDE</a></span> -<span class="id">setCS</span>; <span class="id">apply</span>: <span class="id">setIS</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setDSS</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> <span class="id">D</span> : <span class="id">A</span> `&lt;=` <span class="id">C</span> -&gt; <span class="id">D</span> `&lt;=` <span class="id">B</span> -&gt; <span class="id">A</span> `\` <span class="id">B</span> `&lt;=` <span class="id">C</span> `\` <span class="id">D</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof156')">Proof.</span></div>
<div class="proofscript" id="proof156">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /(@<span class="id">setSD</span> <span class="id">B</span>) /<span class="id">subset_trans</span> <span class="id">sAC</span> /(@<span class="id">setDS</span> <span class="id">C</span>) /<span class="id">sAC</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setCU</span> <span class="id">A</span> <span class="id">B</span> : ~`(<span class="id">A</span> `|` <span class="id"><a href="mathcomp.classical.classical_sets.html#setDE">B</a></span>) = ~` <span class="id">A</span> `&amp;` ~` <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof157')">Proof.</span></div>
<div class="proofscript" id="proof157">
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">z</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">asbool_eq_equiv</span>; <span class="id"><a href="mathcomp.classical.classical_sets.html#basic_lemmas.T">rewrite</a></span> <span class="id">asbool_and</span> !<span class="id">asbool_neg</span> <span class="id">asbool_or</span> <span class="id">negb_or</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setCI</span> <span class="id">A</span> <span class="id">B</span> : ~` (<span class="id">A</span> `&amp;` <span class="id">B</span>) = ~` <span class="id">A</span> `|` ~` <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof158')">Proof.</span></div>
<div class="proofscript" id="proof158">
 <span class="kwd">by</span> <span class="id">rewrite</span> -[<span class="kwd">in</span> <span class="id">LHS</span>](<span class="id">setCK</span> <span class="id">A</span>) -[<span class="kwd">in</span> <span class="id">LHS</span>](<span class="id">setCK</span> <span class="id">B</span>) -<span class="id">setCU</span> <span class="id">setCK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setDUr</span> <span class="id">A</span> <span class="id">B</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#basic_lemmas.T">C</a></span> : <span class="id">A</span> `\` (<span class="id">B</span> `|` <span class="id">C</span>) = (<span class="id">A</span> `\` <span class="id">B</span>) `&amp;` (<span class="id">A</span> `\` <span class="id">C</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof159')">Proof.</span></div>
<div class="proofscript" id="proof159">
 <span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id">setDE</span> <span class="id">setCU</span> <span class="id">setIIr</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setIUl</span> : <span class="id">left_distributive</span> (@<span class="id">setI</span> <span class="id">T</span>) (@<span class="id">setU</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof160')">Proof.</span></div>
<div class="proofscript" id="proof160">
<span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">C</span>; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; [[<span class="id">At</span>|<span class="id">Bt</span>] <span class="id">Ct</span>]; [<span class="id">left</span>|<span class="id">right</span>].<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; [[<span class="id">At</span> <span class="id">Ct</span>]|[<span class="id">Bt</span> <span class="id">Ct</span>]]; <span class="id">split</span> =&gt; //; [<span class="id">left</span>|<span class="id">right</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setIUr</span> : <span class="id">right_distributive</span> (@<span class="id"><a href="mathcomp.classical.classical_sets.html#basic_lemmas.T">setI</a></span> <span class="id">T</span>) (@<span class="id">setU</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof161')">Proof.</span></div>
<div class="proofscript" id="proof161">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">C</span>; <span class="id">rewrite</span> ![<span class="id">A</span> `&amp;` <span class="id">_</span>]<span class="id">setIC</span> <span class="id">setIUl</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setUIl</span> : <span class="id">left_distributive</span> (@<span class="id">setU</span> <span class="id">T</span>) (@<span class="id">setI</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof162')">Proof.</span></div>
<div class="proofscript" id="proof162">
<span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">C</span>; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; [[<span class="id">At</span> <span class="id">Bt</span>]|<span class="id">Ct</span>]; <span class="id">split</span>; <span class="kwd">by</span> [<span class="id">left</span>|<span class="id">right</span>].<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; [[<span class="id">At</span>|<span class="id">Ct</span>] [<span class="id">Bt</span>|<span class="id">Ct</span>']]; <span class="kwd">by</span> [<span class="id">left</span>|<span class="id">right</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setUIr</span> : <span class="id">right_distributive</span> (@<span class="id">setU</span> <span class="id">T</span>) (@<span class="id">setI</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof163')">Proof.</span></div>
<div class="proofscript" id="proof163">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">C</span>; <span class="id">rewrite</span> ![<span class="id">A</span> `|` <span class="id">_</span>]<span class="id">setUC</span> <span class="id">setUIl</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setUK</span> <span class="id">A</span> <span class="id">B</span> : (<span class="id">A</span> `|` <span class="id">B</span>) `&amp;` <span class="id">A</span> = <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof164')">Proof.</span></div>
<div class="proofscript" id="proof164">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; [<span class="id">t</span> []//|<span class="id">t</span> ?]; <span class="id">split</span> =&gt; //; <span class="id">left</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setKU</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#left_distributive">A</a></span> <span class="id">B</span> : <span class="id">A</span> `&amp;` (<span class="id">B</span> `|` <span class="id">A</span>) = <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof165')">Proof.</span></div>
<div class="proofscript" id="proof165">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; [<span class="id">t</span> []//|<span class="id"><a href="mathcomp.classical.classical_sets.html#setIUl">t</a></span> ?]; <span class="id">split</span> =&gt; //; <span class="id">right</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setIK</span> <span class="id">A</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">B</a></span> : (<span class="id">A</span> `&amp;` <span class="id">B</span>) `|` <span class="id">A</span> = <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof166')">Proof.</span></div>
<div class="proofscript" id="proof166">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; [<span class="id">t</span> [[]//|//]|<span class="id">t</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDidl">At</a></span>]; <span class="id">right</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setKI</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `|` (<span class="id">B</span> `&amp;` <span class="id">A</span>) = <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof167')">Proof.</span></div>
<div class="proofscript" id="proof167">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; [<span class="id">t</span> [//|[]//]|<span class="id">t</span> <span class="id">At</span>]; <span class="id">left</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setDUl</span> : <span class="id">left_distributive</span> <span class="id">setD</span> (@<span class="id">setU</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof168')">Proof.</span></div>
<div class="proofscript" id="proof168">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">C</span>; <span class="id">rewrite</span> !<span class="id">setDE</span> <span class="id">setIUl</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setUKD</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&amp;` <span class="id">B</span> `&lt;=` <span class="id">set0</span> -&gt; (<span class="id">A</span> `|` <span class="id">B</span>) `\` <span class="id">A</span> = <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof169')">Proof.</span></div>
<div class="proofscript" id="proof169">
 <span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDE">move</a></span>=&gt; <span class="id">AB0</span>; <span class="id"><a href="mathcomp.classical.classical_sets.html#setCK">rewrite</a></span> <span class="id">setDUl</span> <span class="id">setDv</span> <span class="id">set0U</span> <span class="id">setDidl</span>// -<span class="id">subset0</span> <span class="id">setIC</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setUDK</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&amp;` <span class="id">B</span> `&lt;=` <span class="id">set0</span> -&gt; (<span class="id">B</span> `|` <span class="id">A</span>) `\` <span class="id">A</span> = <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof170')">Proof.</span></div>
<div class="proofscript" id="proof170">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; *; <span class="id">rewrite</span> <span class="id">setUC</span> <span class="id">setUKD</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setIDA</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> : <span class="id">A</span> `&amp;` (<span class="id">B</span> `\` <span class="id">C</span>) = (<span class="id">A</span> `&amp;` <span class="id">B</span>) `\` <span class="id">C</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof171')">Proof.</span></div>
<div class="proofscript" id="proof171">
 <span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id">setDE</span> <span class="id">setIA</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setDD</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `\` (<span class="id">A</span> `\` <span class="id">B</span>) = <span class="id">A</span> `&amp;` <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof172')">Proof.</span></div>
<div class="proofscript" id="proof172">
 <span class="kwd">by</span> <span class="id">rewrite</span> 2!<span class="id">setDE</span> <span class="id">setCI</span> <span class="id">setCK</span> <span class="id">setIUr</span> <span class="id">setICr</span> <span class="id">set0U</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setDDl</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> : (<span class="id">A</span> `\` <span class="id">B</span>) `\` <span class="id">C</span> = <span class="id">A</span> `\` (<span class="id">B</span> `|` <span class="id">C</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof173')">Proof.</span></div>
<div class="proofscript" id="proof173">
 <span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id">setDE</span> <span class="id">setCU</span> <span class="id"><a name="setM0">setIA</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setDDr</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> : <span class="id">A</span> `\` (<span class="id">B</span> `\` <span class="id">C</span>) = (<span class="id">A</span> `\` <span class="id">B</span>) `|` (<span class="id">A</span> `&amp;` <span class="id">C</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof174')">Proof.</span></div>
<div class="proofscript" id="proof174">
 <span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id">setDE</span> <span class="id">setCI</span> <span class="id">setIUr</span> <span class="id">setCK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setDIr</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> : <span class="id">A</span> `\` <span class="id">B</span> `&amp;` <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">C</a></span> = (<span class="id">A</span> `\` <span class="id">B</span>) `|` (<span class="id">A</span> `\` <span class="id">C</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof175')">Proof.</span></div>
<div class="proofscript" id="proof175">
 <span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id">setDE</span> <span class="id">setCI</span> <span class="id">setIUr</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setUIDK</span> <span class="id"><a name="setMTT">A</a></span> <span class="id">B</span> : (<span class="id">A</span> `&amp;` <span class="id">B</span>) `|` <span class="id">A</span> `\` <span class="id">B</span> = <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof176')">Proof.</span></div>
<div class="proofscript" id="proof176">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setUC</span> -<span class="id">setDDr</span> <span class="id">setDv</span> <span class="id">setD0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setM0</span> <span class="id">T</span>' (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">A</span> `*` <span class="id">set0</span> = <span class="id">set0</span> :&gt; <span class="id">set</span> (<span class="id">T</span> * <span class="id">T</span>').<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof177')">Proof.</span></div>
<div class="proofscript" id="proof177">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; -[<span class="id">t</span> <span class="id">u</span>]; <span class="id">split</span> =&gt; // -[]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set0M</span> <span class="id">T</span>' (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>') : <span class="id">set0</span> `*` <span class="id">A</span> = <span class="id">set0</span> :&gt; <span class="id">set</span> (<span class="id">T</span> * <span class="id">T</span>').<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof178')">Proof.</span></div>
<div class="proofscript" id="proof178">
 <span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">rewrite</a></span> <span class="id">predeqE</span> =&gt; -[<span class="id">t</span> <span class="id">u</span>]; <span class="id">split</span> =&gt; // -[]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setMTT</span> <span class="id">T</span>' : <span class="id">setT</span> `*` <span class="id">setT</span> = <span class="id">setT</span> :&gt; <span class="id">set</span> (<span class="id">T</span> * <span class="id">T</span>').<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof179')">Proof.</span></div>
<div class="proofscript" id="proof179">
 <span class="id">exact</span>/<span class="id">predeqP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setMT</span> <span class="id">T1</span> <span class="id">T2</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T1</span>) : <span class="id">A</span> `*` @<span class="id">setT</span> <span class="id">T2</span> = <span class="id">fst</span> @^-1` <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">A</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof180')">Proof.</span></div>
<div class="proofscript" id="proof180">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; -[<span class="id">x</span> <span class="id">y</span>]; <span class="id">split</span> =&gt; //= -[]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setTM</span> <span class="id">T1</span> <span class="id">T2</span> (<span class="id">B</span> : <span class="id">set</span> <span class="id">T2</span>) : @<span class="id">setT</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">T1</a></span> `*` <span class="id">B</span> = <span class="id">snd</span> @^-1` <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof181')">Proof.</span></div>
<div class="proofscript" id="proof181">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; -[<span class="id">x</span> <span class="id">y</span>]; <span class="id">split</span> =&gt; //= -[]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setMI</span> <span class="id">T1</span> <span class="id">T2</span> (<span class="id">X1</span> : <span class="id">set</span> <span class="id">T1</span>) (<span class="id">X2</span> : <span class="id">set</span> <span class="id">T2</span>) (<span class="id">Y1</span> : <span class="id">set</span> <span class="id">T1</span>) (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">Y2</a></span> : <span class="id">set</span> <span class="id">T2</span>) :<br/>
&nbsp;&nbsp;(<span class="id">X1</span> `&amp;` <span class="id"><a href="mathcomp.classical.classical_sets.html#set">Y1</a></span>) `*` (<span class="id">X2</span> `&amp;` <span class="id">Y2</span>) = <span class="id">X1</span> `*` <span class="id">X2</span> `&amp;` <span class="id">Y1</span> `*` <span class="id">Y2</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof182')">Proof.</span></div>
<div class="proofscript" id="proof182">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; -[<span class="id">x</span> <span class="id">y</span>]; <span class="id">split</span>=&gt; [[[? ?] [*]//]|[] [? ?] [*]]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setSM</span> <span class="id">T1</span> <span class="id">T2</span> (<span class="id">C</span> <span class="id">D</span> : <span class="id">set</span> <span class="id">T1</span>) (<span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> <span class="id">T2</span>) :<br/>
&nbsp;&nbsp;<span class="id">A</span> `&lt;=` <span class="id">B</span> -&gt; <span class="id">C</span> `&lt;=` <span class="id">D</span> -&gt; <span class="id">C</span> `*` <span class="id">A</span> `&lt;=` <span class="id">D</span> `*` <span class="id"><a name="setM_bigcupl">B</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof183')">Proof.</span></div>
<div class="proofscript" id="proof183">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">AB</span> <span class="id">CD</span> <span class="id">x</span> [] /<span class="id">CD</span> <span class="id">Dx1</span> /<span class="id">AB</span> <span class="id">Bx2</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setM_bigcupr</span> <span class="id">T1</span> <span class="id">T2</span> <span class="id">I</span> (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T2</span>) (<span class="id">P</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">A</span> : <span class="id">set</span> <span class="id">T1</span>) :<br/>
&nbsp;&nbsp;<span class="id">A</span> `*` \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> = \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) (<span class="id">A</span> `*` <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof184')">Proof.</span></div>
<div class="proofscript" id="proof184">
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; -[<span class="id">x</span> <span class="id">y</span>]; <span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; [/= <span class="id">Ax</span> [<span class="id">n</span> <span class="id">Pn</span> <span class="id">Fny</span>]]; <span class="kwd">exists</span> <span class="id">n</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">n</span> <span class="id">Pn</span> [/= <span class="id">Ax</span> <span class="id">Fny</span>]]; <span class="id">split</span> =&gt; //; <span class="kwd">exists</span> <span class="id">n</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setM_bigcupl</span> <span class="id">T1</span> <span class="id">T2</span> <span class="id">I</span> (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T2</span>) (<span class="id">P</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">A</span> : <span class="id">set</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqP">T1</a></span>) :<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> `*` <span class="id">A</span> = \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) (<span class="id">F</span> <span class="id">i</span> `*` <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof185')">Proof.</span></div>
<div class="proofscript" id="proof185">
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; -[<span class="id">x</span> <span class="id">y</span>]; <span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; [[<span class="id">n</span> <span class="id">Pn</span> <span class="id">Fnx</span>] <span class="id">Ax</span>]; <span class="kwd">exists</span> <span class="id">n</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">n</span> <span class="id">Pn</span> [/= <span class="id">Ax</span> <span class="id">Fny</span>]]; <span class="id">split</span> =&gt; //; <span class="kwd">exists</span> <span class="id">n</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcupM1l</span> <span class="id">T1</span> <span class="id">T2</span> (<span class="id">A1</span> : <span class="id">set</span> <span class="id">T1</span>) (<span class="id">A2</span> : <span class="id">T1</span> -&gt; <span class="id">set</span> <span class="id">T2</span>) :<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">A1</span>) ([<span class="id">set</span> <span class="id">i</span>] `*` (<span class="id">A2</span> <span class="id">i</span>)) = <span class="id">A1</span> `*`` <span class="id">A2</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof186')">Proof.</span></div>
<div class="proofscript" id="proof186">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">predeqP</span> =&gt; -[<span class="id">i</span> <span class="id">j</span>]; <span class="id">split</span>=&gt; [[? ? [/= -&gt; //]]|[]]; <span class="kwd">exists</span> <span class="id">i</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcupM1r</span> <span class="id">T1</span> <span class="id">T2</span> (<span class="id">A1</span> : <span class="id">T2</span> -&gt; <span class="id">set</span> <span class="id">T1</span>) (<span class="id">A2</span> : <span class="id">set</span> <span class="id">T2</span>) :<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">A2</span>) (<span class="id">A1</span> <span class="id">i</span> `*` [<span class="id">set</span> <span class="id">i</span>]) = <span class="id">A1</span> ``*` <span class="id">A2</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof187')">Proof.</span></div>
<div class="proofscript" id="proof187">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">predeqP</span> =&gt; -[<span class="id"><a name="setIv">i</a></span> <span class="id">j</span>]; <span class="id">split</span>=&gt; [[? ? [? /= -&gt; //]]|[]]; <span class="kwd">exists</span> <span class="id">j</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a name="set_order">basic_lemmas</a></span>.<br/>
#[<span class="id">global</span>]<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">subsetUl</span> <span class="id">subsetUr</span> <span class="id">subIsetl</span> <span class="id">subIsetr</span> <span class="id">subDsetl</span> <span class="id">subDsetr</span> : <span class="id">core</span>.<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6", <span class="id">note</span>="<span class="id">Use</span> <span class="id">setICl</span> <span class="id">instead</span>.")]<br/>
<span class="kwd">Notation</span> <span class="id">setvI</span> := <span class="id">setICl</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6", <span class="id">note</span>="<span class="id">Use</span> <span class="id">setICr</span> <span class="id">instead</span>.")]<br/>
<span class="kwd">Notation</span> <span class="id">setIv</span> := <span class="id">setICr</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<span class="kwd">Arguments</span> <span class="id">setU_id2r</span> {<span class="id">T</span>} <span class="id">C</span> {<span class="id">A</span> <span class="id">B</span>}.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">set_order</span>.<br/>
<span class="kwd">Import</span> <span class="id">Order.TTheory</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_eq_le</span> <span class="id">d</span> (<span class="id">rT</span> : <span class="id">porderType</span> <span class="id">d</span>) <span class="id">T</span> (<span class="id">f</span> <span class="id">g</span> : <span class="id">T</span> -&gt; <span class="id">rT</span>) :<br/>
&nbsp;&nbsp;[<span class="id">set</span> <span class="id">x</span> | <span class="id">f</span> <span class="id">x</span> = <span class="id">g</span> <span class="id">x</span>] = [<span class="id">set</span> <span class="id">x</span> | (<span class="id">f</span> <span class="id">x</span> &lt;= <span class="id">g</span> <span class="id">x</span>)%<span class="id">O</span>] `&amp;` [<span class="id">set</span> <span class="id">x</span> | (<span class="id">f</span> <span class="id">x</span> &gt;= <span class="id"><a href="mathcomp.classical.classical_sets.html#set">g</a></span> <span class="id">x</span>)%<span class="id">O</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof188')">Proof.</span></div>
<div class="proofscript" id="proof188">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span> =&gt; [<span class="id">x</span>/= -&gt;//|<span class="id">x</span> /<span class="id">andP</span>]; <span class="id">rewrite</span> -<span class="id">eq_le</span> =&gt;/<span class="id">eqP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_neq_lt</span> <span class="id">d</span> (<span class="id">rT</span> : <span class="id">orderType</span> <span class="id">d</span>) <span class="id">T</span> (<span class="id">f</span> <span class="id">g</span> : <span class="id">T</span> -&gt; <span class="id">rT</span>) :<br/>
&nbsp;&nbsp;[<span class="id">set</span> <span class="id">x</span> | <span class="id">f</span> <span class="id">x</span> != <span class="id">g</span> <span class="id">x</span> ] = [<span class="id">set</span> <span class="id">x</span> | (<span class="id">f</span> <span class="id">x</span> &lt; <span class="id">g</span> <span class="id">x</span>)%<span class="id">O</span>] `|` [<span class="id">set</span> <span class="id">x</span> | (<span class="id">f</span> <span class="id">x</span> &gt; <span class="id">g</span> <span class="id">x</span>)%<span class="id">O</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof189')">Proof.</span></div>
<div class="proofscript" id="proof189">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span> =&gt; [<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">x</a></span>/=|<span class="id">x</span> /=]; <span class="id">rewrite</span> <span class="id">neq_lt</span> =&gt; /<span class="id">orP</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">set_order</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">image2E</span> {<span class="id">TA</span> <span class="id">TB</span> <span class="id">rT</span> : <span class="kwd">Type</span>} (<span class="id">A</span> : <span class="id">set</span> <span class="id">TA</span>) (<span class="id">B</span> : <span class="id">set</span> <span class="id">TB</span>) (<span class="id">f</span> : <span class="id">TA</span> -&gt; <span class="id">TB</span> -&gt; <span class="id">rT</span>) :<br/>
&nbsp;&nbsp;[<span class="id">set</span> <span class="id">f</span> <span class="id">x</span> <span class="id">y</span> | <span class="id">x</span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">A</a></span> &amp; <span class="id">y</span> <span class="kwd">in</span> <span class="id">B</span>] = <span class="id">uncurry</span> <span class="id">f</span> @` (<span class="id">A</span> `*` <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof190')">Proof.</span></div>
<div class="proofscript" id="proof190">
<span class="id">apply</span>/<span class="id">predeqP</span> =&gt; <span class="id">x</span>; <span class="id">split</span>=&gt; [[<span class="id">a</span> ? [<span class="id">b</span> ? &lt;-]]|[[<span class="id"><a name="set_fset_eq0">a</a></span> <span class="id">b</span>] [? ? &lt;-]]]/=;<br/>
<span class="kwd">by</span> [<span class="kwd">exists</span> (<span class="id">a</span>, <span class="id">b</span>) | <span class="kwd">exists</span> <span class="id">a</span> =&gt; //; <span class="kwd">exists</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">b</a></span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_nil</span> (<span class="id">T</span> : <span class="id">eqType</span>) : [<span class="id"><a href="mathcomp.classical.classical_sets.html#set_seq_eq0">set</a></span>` [::]] = @<span class="id">set0</span> <span class="id">T</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof191')">Proof.</span></div>
<div class="proofscript" id="proof191">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_cons1</span> (<span class="id">T</span> : <span class="id">eqType</span>) (<span class="id">x</span> : <span class="id">T</span>) : [<span class="id">set</span>` [:: <span class="id">x</span>]] = [<span class="id">set</span> <span class="id">x</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof192')">Proof.</span></div>
<div class="proofscript" id="proof192">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span> =&gt; <span class="id">y</span> /=; <span class="id">rewrite</span> ?<span class="id">inE</span> =&gt; /<span class="id"><a name="IIn_eq0">eqP</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_seq_eq0</span> (<span class="id">T</span> : <span class="id">eqType</span>) (<span class="id">S</span> : <span class="id">seq</span> <span class="id">T</span>) : ([<span class="id">set</span>` <span class="id">S</span>] == <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">set0</a></span>) = (<span class="id">S</span> == [::]).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof193')">Proof.</span></div>
<div class="proofscript" id="proof193">
<span class="id">apply</span>/<span class="id">eqP</span>/<span class="id">eqP</span>=&gt; [|-&gt;]; <span class="id">rewrite</span> <span class="id">predeqE</span> //; <span class="id">case</span>: <span class="id">S</span> =&gt; // <span class="id">h</span> <span class="id">t</span> /(<span class="id">_</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#mkset">h</a></span>).<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> /= <span class="id">mem_head</span> =&gt; -[/(<span class="id">_</span> <span class="id">erefl</span>)].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_fset_eq0</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#orP">T</a></span> : <span class="id">choiceType</span>) (<span class="id">S</span> : {<span class="id">fset</span> <span class="id">T</span>}) :<br/>
&nbsp;&nbsp;([<span class="id">set</span>` <span class="id">S</span>] == <span class="id">set0</span>) = (<span class="id">S</span> == <span class="id">fset0</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof194')">Proof.</span></div>
<div class="proofscript" id="proof194">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">set_seq_eq0</span>. Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">InitialSegment</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">II0</span> : `<span class="id">I_0</span> = <span class="id">set0</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof195')">Proof.</span></div>
<div class="proofscript" id="proof195">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">II1</span> : `<span class="id">I_1</span> = [<span class="id">set</span> 0]<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof196')">Proof.</span></div>
<div class="proofscript" id="proof196">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span>; <span class="id">case</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">IIn_eq0</span> <span class="id">n</span> : `<span class="id">I_n</span> = <span class="id">set0</span> -&gt; <span class="id">n</span> = 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof197')">Proof.</span></div>
<div class="proofscript" id="proof197">
 <span class="kwd">by</span> <span class="id">case</span>: <span class="id">n</span> =&gt; // <span class="id">n</span>; <span class="id">rewrite</span> <span class="id">predeqE</span>; <span class="id">case</span>/(<span class="id">_</span> 0%<span class="id">N</span>); <span class="id">case</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">IIS</span> <span class="id">n</span> : `<span class="id">I_n</span>.+1 = `<span class="id">I_n</span> `|` [<span class="id">set</span> <span class="id">n</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof198')">Proof.</span></div>
<div class="proofscript" id="proof198">
<span class="id">rewrite</span> /<span class="id">mkset</span> <span class="id">predeqE</span> =&gt; <span class="id">i</span>; <span class="id">split</span> =&gt; [|[|-&gt;//]].<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ltnS</span> <span class="id">leq_eqVlt</span> =&gt; /<span class="id">orP</span>[/<span class="id">eqP</span> -&gt;|]; <span class="kwd">by</span> [<span class="id">left</span>|<span class="id">right</span>].<br/>
<span class="kwd">by</span> <span class="id">move</span>/<span class="id">ltn_trans</span>; <span class="id">apply</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">IISl</span> <span class="id">n</span> : `<span class="id">I_n</span>.+1 = <span class="id">n</span> |` `<span class="id">I_n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof199')">Proof.</span></div>
<div class="proofscript" id="proof199">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setUC</span> <span class="id">IIS</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">IIDn</span> <span class="id">n</span> : `<span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">I_n</a></span>.+1 `\ <span class="id">n</span> = `<span class="id">I_n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof200')">Proof.</span></div>
<div class="proofscript" id="proof200">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">IIS</span> <span class="id">setUDK</span>// =&gt; <span class="id">x</span> [-&gt;/=]; <span class="id">rewrite</span> <span class="id">ltnn</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setI_II</span> <span class="id">m</span> <span class="id">n</span> : `<span class="id">I_m</span> `&amp;` `<span class="id">I_n</span> = `<span class="id">I_</span>(<span class="id">minn</span> <span class="id">m</span> <span class="id">n</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof201')">Proof.</span></div>
<div class="proofscript" id="proof201">
<span class="kwd">by</span> <span class="id">case</span>: <span class="id">leqP</span> =&gt; <span class="id">mn</span>; [<span class="id">rewrite</span> <span class="id">setIidl</span>// | <span class="id">rewrite</span> <span class="id">setIidr</span>//]<br/>
&nbsp;&nbsp;&nbsp;=&gt; <span class="id">k</span> /= /<span class="id">leq_trans</span>; <span class="id">apply</span> =&gt; //; <span class="id"><a href="mathcomp.classical.classical_sets.html#IIord">apply</a></span>: <span class="id">ltnW</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setU_II</span> <span class="id">m</span> <span class="id">n</span> : `<span class="id">I_m</span> `|` `<span class="id">I_n</span> = `<span class="id">I_</span>(<span class="id">maxn</span> <span class="id">m</span> <span class="id">n</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof202')">Proof.</span></div>
<div class="proofscript" id="proof202">
<span class="kwd">by</span> <span class="id">case</span>: <span class="id">leqP</span> =&gt; <span class="id">mn</span>; [<span class="id">rewrite</span> <span class="id">setUidr</span>// | <span class="id">rewrite</span> <span class="id">setUidl</span>//]<br/>
&nbsp;&nbsp;&nbsp;=&gt; <span class="id">k</span> /= /<span class="id">leq_trans</span>; <span class="id">apply</span> =&gt; //; <span class="id">apply</span>: <span class="id">ltnW</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">Iiota</span> (<span class="id">n</span> : <span class="id">nat</span>) : [<span class="id">set</span>` <span class="id">iota</span> 0 <span class="id">n</span>] = `<span class="id">I_n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof203')">Proof.</span></div>
<div class="proofscript" id="proof203">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span> =&gt; [|] ?; <span class="id">rewrite</span> /= <span class="id">mem_iota</span> <span class="id">add0n</span>. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">ordII</span> {<span class="id">n</span>} (<span class="id">k</span> : '<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">I_n</a></span>) : `<span class="id">I_n</span> := <span class="id">SigSub</span> (@<span class="id">mem_set</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">_</a></span> `<span class="id">I_n</span> <span class="id">_</span> (<span class="id">ltn_ord</span> <span class="id">k</span>)).<br/>
<span class="kwd">Definition</span> <span class="id">IIord</span> {<span class="id">n</span>} (<span class="id">k</span> : `<span class="id">I_n</span>) := <span class="id">Ordinal</span> (<span class="id">set_valP</span> <span class="id">k</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">ordIIK</span> {<span class="id"><a href="mathcomp.classical.classical_sets.html#eqEsubset">n</a></span>} : <span class="id">cancel</span> (@<span class="id">ordII</span> <span class="id">n</span>) <span class="id">IIord</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof204')">Proof.</span></div>
<div class="proofscript" id="proof204">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">k</span>; <span class="id">apply</span>/<span class="id">val_inj</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">IIordK</span> {<span class="id">n</span>} : <span class="id">cancel</span> (@<span class="id">IIord</span> <span class="id">n</span>) <span class="id">ordII</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof205')">Proof.</span></div>
<div class="proofscript" id="proof205">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">k</a></span>; <span class="id">apply</span>/<span class="id">val_inj</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">mem_not_I</span> <span class="id">N</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#boolP">n</a></span> : (<span class="id">n</span> \<span class="kwd">in</span> ~` `<span class="id">I_N</span>) = (<span class="id">N</span> &lt;= <span class="id">n</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof206')">Proof.</span></div>
<div class="proofscript" id="proof206">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">in_setC</span> /<span class="id">mkset</span> /<span class="id">in_mem</span> /<span class="id">mem</span> /= /<span class="id">in_set</span> <span class="id">asboolb</span> -<span class="id">leqNgt</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">InitialSegment</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">setT_unit</span> : [<span class="id">set</span>: <span class="id">unit</span>] = [<span class="id">set</span> <span class="id">tt</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof207')">Proof.</span></div>
<div class="proofscript" id="proof207">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span> =&gt; // -[]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_unit</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">unit</span>) : <span class="id">A</span> = <span class="id">set0</span> \/ <span class="id">A</span> = <span class="id">setT</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof208')">Proof.</span></div>
<div class="proofscript" id="proof208">
<span class="id">have</span> [-&gt;|/<span class="id">set0P</span>[[] <span class="id">Att</span>]] := <span class="id">eqVneq</span> <span class="id">A</span> <span class="id">set0</span>; [<span class="kwd">by</span> <span class="id">left</span>|<span class="id">right</span>].<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">seteqP</a></span>; <span class="id">split</span> =&gt; [|] [].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setT_bool</span> : [<span class="id">set</span>: <span class="id">bool</span>] = [<span class="id">set</span> <span class="id">true</span>; <span class="id">false</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof209')">Proof.</span></div>
<div class="proofscript" id="proof209">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; // [[]] // <span class="id">_</span>; [<span class="id">left</span>|<span class="id">right</span>]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_bool</span> (<span class="id">B</span> : <span class="id">set</span> <span class="id">bool</span>) :<br/>
&nbsp;&nbsp;[\/ <span class="id">B</span> == [<span class="id">set</span> <span class="id">true</span>], <span class="id">B</span> == [<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#orbT">set</a></span> <span class="id">false</span>], <span class="id">B</span> == <span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">set0</a></span> | <span class="id">B</span> == <span class="id">setT</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof210')">Proof.</span></div>
<div class="proofscript" id="proof210">
<span class="id">have</span> [<span class="id">Bt</span>|<span class="id"><a href="mathcomp.classical.classical_sets.html#notin_set">Bt</a></span>] := <span class="id">boolP</span> (<span class="id">true</span> \<span class="kwd">in</span> <span class="id">B</span>); <span class="id">have</span> [<span class="id">Bf</span>|<span class="id">Bf</span>] := <span class="id">boolP</span> (<span class="id">false</span> \<span class="kwd">in</span> <span class="id">B</span>).<br/>
- <span class="id">have</span> -&gt; : <span class="id">B</span> = <span class="id">setT</span> <span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a name="fdisjoint_cset">seteqP</a></span>; <span class="id">split</span> =&gt; // -[] <span class="id">_</span>; <span class="id">exact</span>: <span class="id">set_mem</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">or4P</span>; <span class="id">rewrite</span> <span class="id">eqxx</span>/= !<span class="id">orbT</span>.<br/>
- <span class="id">suff</span> : <span class="id">B</span> = [<span class="id">set</span> <span class="id">true</span>] <span class="kwd">by</span> <span class="id">move</span>=&gt; -&gt;; <span class="id">apply</span>/<span class="id">or4P</span>; <span class="id">rewrite</span> <span class="id">eqxx</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span> =&gt; -[]// /<span class="id">mem_set</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span>; <span class="id">exact</span>: <span class="id">set_mem</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">negbTE</span> <span class="id">Bf</span>).<br/>
- <span class="id">suff</span> : <span class="id">B</span> = [<span class="id">set</span> <span class="id">false</span>] <span class="kwd">by</span> <span class="id">move</span>=&gt; -&gt;; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">apply</a></span>/<span class="id">or4P</span>; <span class="id">rewrite</span> <span class="id">eqxx</span>/= <span class="id">orbT</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span> =&gt; -[]// /<span class="id">mem_set</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span>; <span class="id">exact</span>: <span class="id">set_mem</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">negbTE</span> <span class="id">Bt</span>).<br/>
- <span class="id">suff</span> : <span class="id">B</span> = <span class="id">set0</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; -&gt;; <span class="id">apply</span>/<span class="id">or4P</span>; <span class="id">rewrite</span> <span class="id">eqxx</span>/= !<span class="id">orbT</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span> =&gt; -[]//=; <span class="id">rewrite</span> 2!<span class="id">notin_set</span> <span class="kwd">in</span> <span class="id">Bt</span>, <span class="id">Bf</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">fdisjoint_cset</span> (<span class="id"><a name="set_fsetI">T</a></span> : <span class="id">choiceType</span>) (<span class="id">A</span> <span class="id">B</span> : {<span class="id">fset</span> <span class="id">T</span>}) :<br/>
&nbsp;&nbsp;[<span class="id">disjoint</span> <span class="id">A</span> &amp; <span class="id">B</span>]%<span class="id">fset</span> = [<span class="id">disjoint</span> [<span class="id">set</span>` <span class="id">A</span>] &amp; [<span class="id">set</span>` <span class="id">B</span>]].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof211')">Proof.</span></div>
<div class="proofscript" id="proof211">
<span class="id">rewrite</span> -<span class="id">fsetI_eq0</span>; <span class="id">apply</span>/<span class="id">idP</span>/<span class="id">idP</span>; <span class="id">apply</span>: <span class="id">contraLR</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">set0P</span>[<span class="id">t</span> [<span class="id">tA</span> <span class="id">tB</span>]]; <span class="id">apply</span>/<span class="id">fset0Pn</span>; <span class="kwd">exists</span> <span class="id">t</span>; <span class="id">rewrite</span> <span class="id">inE</span>; <span class="id">apply</span>/<span class="id">andP</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">fset0Pn</span>[<span class="id">t</span>]; <span class="id">rewrite</span> <span class="id">inE</span> =&gt; /<span class="id">andP</span>[<span class="id">tA</span> <span class="id">tB</span>]; <span class="id">apply</span>/<span class="id">set0P</span>; <span class="kwd">exists</span> <span class="id">t</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">SetFset</span>.<br/>
<span class="kwd">Context</span> {<span class="id">T</span> : <span class="id">choiceType</span>}.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">x</span> <span class="id">y</span> : <span class="id">T</span>) (<span class="id">A</span> <span class="id">B</span> : {<span class="id">fset</span> <span class="id">T</span>}).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_fset0</span> : [<span class="id">set</span> <span class="id">y</span> : <span class="id">T</span> | <span class="id">y</span> \<span class="kwd">in</span> <span class="id">fset0</span>] = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof212')">Proof.</span></div>
<div class="proofscript" id="proof212">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">subset0</span> =&gt; <span class="id">x</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_fset1</span> <span class="id">x</span> : [<span class="id">set</span> <span class="id">y</span> | <span class="id">y</span> \<span class="kwd">in</span> [<span class="id">fset</span> <span class="id"><a name="set_fsetU1">x</a></span>]%<span class="id">fset</span>] = [<span class="id">set</span> <span class="id">x</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof213')">Proof.</span></div>
<div class="proofscript" id="proof213">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">y</span>; <span class="id">split</span>; <span class="id">rewrite</span> /= <span class="id">inE</span> =&gt; /<span class="id">eqP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_fsetI</span> <span class="id">A</span> <span class="id">B</span> : [<span class="id">set</span>` (<span class="id">A</span> `&amp;` <span class="id">B</span>)%<span class="id">fset</span>] = [<span class="id">set</span>` <span class="id">A</span>] `&amp;` [<span class="id">set</span>` <span class="id">B</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof214')">Proof.</span></div>
<div class="proofscript" id="proof214">
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">x</span>; <span class="id">split</span>; <span class="id">rewrite</span> /= !<span class="id">inE</span>; [<span class="id">case</span>/<span class="id">andP</span>|<span class="id">case</span>=&gt; -&gt; -&gt;].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_fsetIr</span> (<span class="id">P</span> : {<span class="id">pred</span> <span class="id">T</span>}) (<span class="id">A</span> : {<span class="id">fset</span> <span class="id">T</span>}) :<br/>
&nbsp;&nbsp;[<span class="id">set</span>` [<span class="id">fset</span> <span class="id">x</span> | <span class="id">x</span> <span class="kwd">in</span> <span class="id">A</span> &amp; <span class="id">P</span> <span class="id">x</span>]%<span class="id">fset</span>] = [<span class="id">set</span>` <span class="id">A</span>] `&amp;` [<span class="id">set</span>` <span class="id">P</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof215')">Proof.</span></div>
<div class="proofscript" id="proof215">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">predeqP</span> =&gt; <span class="id">x</span> /=; <span class="id">split</span>; <span class="id">rewrite</span> 2!<span class="id">inE</span>/= =&gt; /<span class="id">andP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_fsetU</span> <span class="id">A</span> <span class="id">B</span> :<br/>
&nbsp;&nbsp;[<span class="id">set</span>` (<span class="id">A</span> `|` <span class="id">B</span>)%<span class="id">fset</span>] = [<span class="id">set</span>` <span class="id">A</span>] `|` [<span class="id">set</span>` <span class="id">B</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof216')">Proof.</span></div>
<div class="proofscript" id="proof216">
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">x</span>; <span class="id">split</span>; <span class="id">rewrite</span> /= !<span class="id"><a href="mathcomp.classical.boolp.html#predeqP">inE</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>/<span class="id">orP</span>; [<span class="id">left</span>|<span class="id">right</span>].<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; []-&gt;; <span class="id">rewrite</span> ?<span class="id">orbT</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_fsetU1</span> <span class="id">x</span> <span class="id">A</span> : [<span class="id">set</span> <span class="id">y</span> | <span class="id">y</span> \<span class="kwd">in</span> (<span class="id">x</span> |` <span class="id"><a href="mathcomp.classical.classical_sets.html#SetFset">A</a></span>)%<span class="id">fset</span>] = <span class="id">x</span> |` [<span class="id">set</span>` <span class="id">A</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof217')">Proof.</span></div>
<div class="proofscript" id="proof217">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">set_fsetU</span> <span class="id">set_fset1</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="setU_monoid">set_fsetD</a></span> <span class="id">A</span> <span class="id">B</span> :<br/>
&nbsp;&nbsp;[<span class="id">set</span>` (<span class="id">A</span> `\` <span class="id">B</span>)%<span class="id">fset</span>] = [<span class="id"><a href="mathcomp.classical.classical_sets.html#setU0">set</a></span>` <span class="id">A</span>] `\` [<span class="id">set</span>` <span class="id">B</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof218')">Proof.</span></div>
<div class="proofscript" id="proof218">
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">x</span>; <span class="id">split</span>; <span class="id">rewrite</span> /= !<span class="id">inE</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; [-&gt; /<span class="id">negP</span> -&gt;].<br/>
<span class="kwd">by</span> <span class="id">case</span>/<span class="id">andP</span> =&gt; /<span class="id">negP</span> <span class="id">xNB</span> <span class="id">xA</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_fsetD1</span> <span class="id">A</span> <span class="id">x</span> : [<span class="id">set</span> <span class="id">y</span> | <span class="id">y</span> \<span class="kwd">in</span> (<span class="id">A</span> `\ <span class="id">x</span>)%<span class="id">fset</span>] = [<span class="id">set</span>` <span class="id">A</span>] `\ <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof219')">Proof.</span></div>
<div class="proofscript" id="proof219">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">set_fsetD</span> <span class="id">set_fset1</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_imfset</span> (<span class="id">key</span> : <span class="id">unit</span>) [<span class="id">K</span> : <span class="id">choiceType</span>] (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">K</span>) (<span class="id"><a href="mathcomp.classical.classical_sets.html#setUIl">p</a></span> : <span class="id">finmempred</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;[<span class="id">set</span>` <span class="id">imfset</span> <span class="id">key</span> <span class="id">f</span> <span class="id">p</span>] = <span class="id">f</span> @` [<span class="id">set</span>` <span class="id">p</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof220')">Proof.</span></div>
<div class="proofscript" id="proof220">
<span class="id"><a href="mathcomp.classical.classical_sets.html#SetMonoids.T">apply</a></span>/<span class="id">predeqP</span> =&gt; <span class="id">x</span>; <span class="id">split</span>=&gt; [/<span class="id">imfsetP</span>[<span class="id">i</span> <span class="id">ip</span> -&gt; /=]|]; <span class="id">first</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">i</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">i</span> <span class="id">ip</span> &lt;-]; <span class="id">apply</span>: <span class="id">in_imfset</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">SetFset</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#base_image_lemmas.rT">SetMonoids</a></span>.<br/>
<span class="kwd">Variable</span> (<span class="id">T</span> : <span class="kwd">Type</span>).<br/>
<br/>
<span class="kwd">Import</span> <span class="id">Monoid</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">setU_monoid</span> := <span class="id">Law</span> (@<span class="id">setUA</span> <span class="id">T</span>) (@<span class="id">set0U</span> <span class="id">T</span>) (@<span class="id">setU0</span> <span class="id">T</span>).<br/>
<span class="kwd">Canonical</span> <span class="id">setU_comoid</span> := <span class="id">ComLaw</span> (@<span class="id">setUC</span> <span class="id">T</span>).<br/>
<span class="kwd">Canonical</span> <span class="id">setU_mul_monoid</span> := <span class="id">MulLaw</span> (@<span class="id">setTU</span> <span class="id">T</span>) (@<span class="id">setUT</span> <span class="id">T</span>).<br/>
<span class="kwd">Canonical</span> <span class="id">setI_monoid</span> := <span class="id">Law</span> (@<span class="id">setIA</span> <span class="id">T</span>) (@<span class="id">setTI</span> <span class="id">T</span>) (@<span class="id">setIT</span> <span class="id">T</span>).<br/>
<span class="kwd">Canonical</span> <span class="id">setI_comoid</span> := <span class="id">ComLaw</span> (@<span class="id">setIC</span> <span class="id">T</span>).<br/>
<span class="kwd">Canonical</span> <span class="id">setI_mul_monoid</span> := <span class="id">MulLaw</span> (@<span class="id">set0I</span> <span class="id">T</span>) (@<span class="id">setI0</span> <span class="id">T</span>).<br/>
<span class="kwd">Canonical</span> <span class="id">setU_add_monoid</span> := <span class="id">AddLaw</span> (@<span class="id">setUIl</span> <span class="id">T</span>) (@<span class="id">setUIr</span> <span class="id">T</span>).<br/>
<span class="kwd">Canonical</span> <span class="id">setI_add_monoid</span> := <span class="id">AddLaw</span> (@<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#injective">setIUl</a></span> <span class="id">T</span>) (@<span class="id">setIUr</span> <span class="id">T</span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id">SetMonoids</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">base_image_lemmas</span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>}.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> <span class="id">aT</span>) (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id"><a name="image_id">rT</a></span>) (<span class="id">Y</span> : <span class="id">set</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#id">rT</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">imageP</span> <span class="id">f</span> <span class="id">A</span> <span class="id">a</span> : <span class="id">A</span> <span class="id">a</span> -&gt; (<span class="id">f</span> @` <span class="id">A</span>) (<span class="id">f</span> <span class="id">a</span>)<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof221')">Proof.</span></div>
<div class="proofscript" id="proof221">
 <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">a</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">imageT</span> (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) (<span class="id">a</span> : <span class="id">aT</span>) : <span class="id">range</span> <span class="id">f</span> (<span class="id">f</span> <span class="id">a</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof222')">Proof.</span></div>
<div class="proofscript" id="proof222">
 <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">imageP</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">base_image_lemmas</span>.<br/>
#[<span class="id">global</span>]<br/>
<span class="kwd">Hint</span> <span class="id">Extern</span> 0 ((?<span class="id">f</span> @` <span class="id">_</span>) (?<span class="id">f</span> <span class="id">_</span>)) =&gt;  <span class="id">solve</span> [<span class="id">apply</span>: <span class="id">imageP</span>; <span class="id">assumption</span>] : <span class="id">core</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 ((?<span class="id">f</span> @` <span class="id">setT</span>) <span class="id">_</span>) =&gt; <span class="id">solve</span> [<span class="id">apply</span>: <span class="id">imageT</span>] : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">image_lemmas</span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>}.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#image_lemmas.rT">aT</a></span>) (<span class="id">f</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">aT</a></span> -&gt; <span class="id">rT</span>) (<span class="id">Y</span> : <span class="id">set</span> <span class="id">rT</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">image_inj</span> {<span class="id">f</span> <span class="id">A</span> <span class="id">a</span>} : <span class="id">injective</span> <span class="id">f</span> -&gt; (<span class="id">f</span> @` <span class="id">A</span>) (<span class="id">f</span> <span class="id">a</span>) = <span class="id">A</span> <span class="id">a</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof223')">Proof.</span></div>
<div class="proofscript" id="proof223">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">f_inj</span>; <span class="id">rewrite</span> <span class="id">propeqE</span>; <span class="id">split</span> =&gt; [[<span class="id">b</span> <span class="id">Ab</span> /<span class="id">f_inj</span> &lt;-]|/(<span class="id">imageP</span> <span class="id">f</span>)//].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">image_id</span> <span class="id">A</span> : <span class="id">id</span> @` <span class="id">A</span> = <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof224')">Proof.</span></div>
<div class="proofscript" id="proof224">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; <span class="id">a</span>; [<span class="id">case</span>=&gt; /= <span class="id">x</span> <span class="id">Ax</span> &lt;-|<span class="kwd">exists</span> <span class="id">a</span>]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">homo_setP</span> {<span class="id">A</span> <span class="id">Y</span> <span class="id">f</span>} :<br/>
&nbsp;&nbsp;{<span class="id">homo</span> <span class="id">f</span> : <span class="id">x</span> / <span class="id">x</span> \<span class="kwd">in</span> <span class="id">A</span> &gt;-&gt; <span class="id">x</span> \<span class="kwd">in</span> <span class="id">Y</span>} &lt;-&gt; {<span class="id">homo</span> <span class="id">f</span> : <span class="id">x</span> / <span class="id">A</span> <span class="id">x</span> &gt;-&gt; <span class="id">Y</span> <span class="id">x</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof225')">Proof.</span></div>
<div class="proofscript" id="proof225">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; <span class="id">fAY</span> <span class="id">x</span>; <span class="id">have</span> := <span class="id">fAY</span> <span class="id">x</span>; <span class="id">rewrite</span> !<span class="id">inE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">image_subP</span> {<span class="id">A</span> <span class="id">Y</span> <span class="id">f</span>} : <span class="id">f</span> @` <span class="id">A</span> `&lt;=` <span class="id">Y</span> &lt;-&gt; {<span class="id">homo</span> <span class="id">f</span> : <span class="id">x</span> / <span class="id">A</span> <span class="id">x</span> &gt;-&gt; <span class="id">Y</span> <span class="id">x</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof226')">Proof.</span></div>
<div class="proofscript" id="proof226">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; <span class="id">fAY</span> <span class="id">x</span> =&gt; [<span class="id">Ax</span>|[<span class="id">y</span> + &lt;-]]; <span class="id">apply</span>: <span class="id">fAY</span>=&gt; //; <span class="kwd">exists</span> <span class="id">x</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">image_sub</span> {<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>} {<span class="id">A</span> : <span class="id">set</span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id">set</span> <span class="id">rT</span>} :<br/>
&nbsp;&nbsp;(<span class="id">f</span> @` <span class="id">A</span> `&lt;=` <span class="id">B</span>) = (<span class="id">A</span> `&lt;=` <span class="id">f</span> @^-1` <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof227')">Proof.</span></div>
<div class="proofscript" id="proof227">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">propext</span>; <span class="id">rewrite</span> <span class="id">image_subP</span>; <span class="id">split</span>=&gt; <span class="id">AB</span> <span class="id">a</span> /<span class="id">AB</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">imsub1</span> <span class="id">x</span> <span class="id">A</span> <span class="id">f</span> : <span class="id">f</span> @` <span class="id">A</span> `&lt;=` [<span class="id">set</span> <span class="id">x</span>] -&gt; <span class="kwd">forall</span> <span class="id">a</span>, <span class="id">A</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">a</a></span> -&gt; <span class="id">f</span> <span class="id">a</span> = <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof228')">Proof.</span></div>
<div class="proofscript" id="proof228">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; + <span class="id">a</span> <span class="id">Aa</span>; <span class="id">apply</span>; <span class="kwd">exists</span> <span class="id">a</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">imsub1P</span> <span class="id">x</span> <span class="id">A</span> <span class="id">f</span> : <span class="id">f</span> @` <span class="id">A</span> `&lt;=` [<span class="id">set</span> <span class="id">x</span>] &lt;-&gt; <span class="kwd">forall</span> <span class="id">a</span>, <span class="id">A</span> <span class="id">a</span> -&gt; <span class="id">f</span> <span class="id">a</span> = <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof229')">Proof.</span></div>
<div class="proofscript" id="proof229">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; [/(@<span class="id">imsub1</span> <span class="id">_</span>)//|+ <span class="id">_</span> [<span class="id">a</span> <span class="id">Aa</span> &lt;-]]; <span class="id">apply</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">image_setU</span> <span class="id">f</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">f</span> @` (<span class="id">A</span> `|` <span class="id">B</span>) = <span class="id">f</span> @` <span class="id">A</span> `|` <span class="id">f</span> @` <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof230')">Proof.</span></div>
<div class="proofscript" id="proof230">
<span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; <span class="id">b</span>.<br/>
- <span class="kwd">by</span> <span class="id">case</span>=&gt; <span class="id">a</span> [] <span class="id">Ha</span> &lt;-; [<span class="id">left</span> | <span class="id">right</span>]; <span class="id">apply</span> <span class="id">imageP</span>.<br/>
- <span class="kwd">by</span> <span class="id">case</span>=&gt; -[] <span class="id">a</span> <span class="id">Ha</span> &lt;-; <span class="id">apply</span> <span class="id">imageP</span>; [<span class="id">left</span> | <span class="id">right</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">image_set0</span> <span class="id">f</span> : <span class="id">f</span> @` <span class="id">set0</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof231')">Proof.</span></div>
<div class="proofscript" id="proof231">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; <span class="id">b</span> // -[]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">image_set0_set0</span> <span class="id">A</span> <span class="id">f</span> : <span class="id">f</span> @` <span class="id">A</span> = <span class="id">set0</span> -&gt; <span class="id">A</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof232')">Proof.</span></div>
<div class="proofscript" id="proof232">
<span class="id">move</span>=&gt; <span class="id">fA0</span>; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span> =&gt; // <span class="id">At</span>.<br/>
<span class="kwd">by</span> <span class="id">have</span> : <span class="id">set0</span> (<span class="id">f</span> <span class="id">t</span>) <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">fA0</span>; <span class="kwd">exists</span> <span class="id">t</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">image_set1</span> <span class="id">f</span> <span class="id">t</span> : <span class="id">f</span> @` [<span class="id">set</span> <span class="id">t</span>] = [<span class="id">set</span> <span class="id">f</span> <span class="id">t</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof233')">Proof.</span></div>
<div class="proofscript" id="proof233">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; [<span class="id">b</span> [<span class="id">a</span>' -&gt; &lt;-] //|<span class="id">b</span> -&gt;]; <span class="id">exact</span>/<span class="id">imageP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subset_set1</span> <span class="id">A</span> <span class="id">a</span> : <span class="id">A</span> `&lt;=` [<span class="id">set</span> <span class="id">a</span>] -&gt; <span class="id">A</span> = <span class="id">set0</span> \/ <span class="id">A</span> = [<span class="id">set</span> <span class="id">a</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof234')">Proof.</span></div>
<div class="proofscript" id="proof234">
<span class="id">move</span>=&gt; <span class="id">Aa</span>; <span class="id">have</span> [/<span class="id">eqP</span>|/<span class="id">set0P</span>[<span class="id">t</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">At</a></span>]] := <span class="id">boolP</span> (<span class="id">A</span> == <span class="id">set0</span>); <span class="id">first</span> <span class="kwd">by</span> <span class="id">left</span>.<br/>
<span class="kwd">by</span> <span class="id">right</span>; <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; // ? -&gt;; <span class="id">rewrite</span> -(<span class="id">Aa</span> <span class="id">_</span> <span class="id">At</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subset_set2</span> <span class="id">A</span> <span class="id">a</span> <span class="id">b</span> : <span class="id">A</span> `&lt;=` [<span class="id">set</span> <span class="id">a</span>; <span class="id">b</span>] -&gt;<br/>
&nbsp;&nbsp;[\/ <span class="id">A</span> = <span class="id">set0</span>, <span class="id">A</span> = [<span class="id">set</span> <span class="id">a</span>], <span class="id">A</span> = [<span class="id">set</span> <span class="id">b</span>] | <span class="id">A</span> = [<span class="id">set</span> <span class="id">a</span>; <span class="id">b</span>]].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof235')">Proof.</span></div>
<div class="proofscript" id="proof235">
<span class="id">have</span> [&lt;-|<span class="id">ab</span> <span class="id">Aab</span>] := <span class="id">pselect</span> (<span class="id">a</span> = <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setUid</span> =&gt; /<span class="id">subset_set1</span>[]-&gt;; [<span class="id">apply</span>: <span class="id">Or41</span>|<span class="id">apply</span>: <span class="id">Or42</span>].<br/>
<span class="id">have</span> [|/<span class="id">nonsubset</span>[<span class="id">x</span> [/[<span class="id">dup</span>] /<span class="id">Aab</span> []// -&gt; <span class="id">Ab</span> <span class="id">_</span>]]] := <span class="id">pselect</span> (<span class="id">A</span> `&lt;=` [<span class="id">set</span> <span class="id">a</span>]).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">subset_set1</a></span>[]-&gt;; [<span class="id">apply</span>: <span class="id">Or41</span>|<span class="id">apply</span>: <span class="id">Or42</span>].<br/>
<span class="id">have</span> [|/<span class="id">nonsubset</span>[<span class="id">y</span> [/[<span class="id">dup</span>] /<span class="id"><a href="mathcomp.classical.classical_sets.html#setT">Aab</a></span> []// -&gt; <span class="id">Aa</span> <span class="id">_</span>]]] := <span class="id">pselect</span> (<span class="id"><a name="nonempty_preimage">A</a></span> `&lt;=` [<span class="id">set</span> <span class="id">b</span>]).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">subset_set1</span>[]-&gt;; [<span class="id">apply</span>: <span class="id">Or41</span>|<span class="id">apply</span>: <span class="id">Or43</span>].<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">Or44</span>; <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id"><a name="preimage_image">split</a></span>=&gt; // <span class="id">z</span> /= [] -&gt;.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sub_image_setI</span> <span class="id">f</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">f</span> @` (<span class="id">A</span> `&amp;` <span class="id">B</span>) `&lt;=` <span class="id">f</span> @` <span class="id">A</span> `&amp;` <span class="id">f</span> @` <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof236')">Proof.</span></div>
<div class="proofscript" id="proof236">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">b</span> [<span class="id">x</span> [<span class="id">Aa</span> <span class="id">Ba</span> &lt;-]]; <span class="id">split</span>; <span class="id">apply</span>: <span class="id">imageP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">nonempty_image</span> <span class="id">f</span> <span class="id">A</span> : <span class="id">f</span> @` <span class="id">A</span> !=<span class="id">set0</span> -&gt; <span class="id">A</span> !=<span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof237')">Proof.</span></div>
<div class="proofscript" id="proof237">
 <span class="kwd">by</span> <span class="id">case</span>=&gt; <span class="id"><a name="image_preimage_subset">b</a></span> [<span class="id">a</span>]; <span class="kwd">exists</span> <span class="id">a</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">image_subset</span> <span class="id">f</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&lt;=` <span class="id">B</span> -&gt; <span class="id">f</span> @` <span class="id">A</span> `&lt;=` <span class="id">f</span> @` <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof238')">Proof.</span></div>
<div class="proofscript" id="proof238">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id"><a name="image_preimage">AB</a></span> <span class="id">_</span> [<span class="id">a</span> <span class="id">Aa</span> &lt;-]; <span class="kwd">exists</span> <span class="id">a</span> =&gt; //; <span class="id">apply</span>/<span class="id">AB</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_set0</span> <span class="id">f</span> : <span class="id">f</span> @^-1` <span class="id">set0</span> = <span class="id">set0</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof239')">Proof.</span></div>
<div class="proofscript" id="proof239">
 <span class="id">exact</span>/<span class="id">predeqP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_setT</span> <span class="id">f</span> : <span class="id">f</span> @^-1` <span class="id">setT</span> = <span class="id">setT</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof240')">Proof.</span></div>
<div class="proofscript" id="proof240">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">nonempty_preimage</span> <span class="id">f</span> <span class="id">Y</span> : <span class="id">f</span> @^-1` <span class="id">Y</span> !=<span class="id">set0</span> -&gt; <span class="id">Y</span> !=<span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof241')">Proof.</span></div>
<div class="proofscript" id="proof241">
 <span class="kwd">by</span> <span class="id">case</span>=&gt; [<span class="id">t</span> ?]; <span class="kwd">exists</span> (<span class="id">f</span> <span class="id">t</span>). Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_image</span> <span class="id">f</span> <span class="id">A</span> : <span class="id">A</span> `&lt;=` <span class="id">f</span> @^-1` (<span class="id">f</span> @` <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof242')">Proof.</span></div>
<div class="proofscript" id="proof242">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">a</span> <span class="id">Aa</span>; <span class="kwd">exists</span> <span class="id">a</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_range</span> {<span class="id">A</span> <span class="id">B</span> : <span class="kwd">Type</span>} (<span class="id">f</span> : <span class="id">A</span> -&gt; <span class="id">B</span>) : <span class="id">f</span> @^-1` (<span class="id">range</span> <span class="id">f</span>) = [<span class="id">set</span>: <span class="id">A</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof243')">Proof.</span></div>
<div class="proofscript" id="proof243">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span>=&gt; <span class="id">x</span> // <span class="id">_</span>; <span class="kwd">exists</span> <span class="id">x</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">image_preimage_subset</span> <span class="id">f</span> <span class="id">Y</span> : <span class="id">f</span> @` (<span class="id">f</span> @^-1` <span class="id">Y</span>) `&lt;=` <span class="id">Y</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof244')">Proof.</span></div>
<div class="proofscript" id="proof244">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">t</span> /= <span class="id">Yft</span> &lt;-]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">image_preimage</span> <span class="id">f</span> <span class="id">Y</span> : <span class="id">f</span> @` <span class="id">setT</span> = <span class="id">setT</span> -&gt; <span class="id">f</span> @` (<span class="id">f</span> @^-1` <span class="id">Y</span>) = <span class="id">Y</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof245')">Proof.</span></div>
<div class="proofscript" id="proof245">
<span class="id">move</span>=&gt; <span class="id">fsurj</span>; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">x</span>; <span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; [? ? &lt;-].<br/>
<span class="id">move</span>=&gt; <span class="id">Yx</span>; <span class="id">have</span> : <span class="id">setT</span> <span class="id">x</span> <span class="kwd">by</span> [].<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">fsurj</span> =&gt; - [<span class="id">y</span> <span class="id">_</span> <span class="id">fy_eqx</span>]; <span class="kwd">exists</span> <span class="id">y</span> =&gt; //=; <span class="id">rewrite</span> <span class="id">fy_eqx</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eq_imagel</span> <span class="id">T1</span> <span class="id">T2</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T1</span>) (<span class="id">f</span> <span class="id">f</span>' : <span class="id">T1</span> -&gt; <span class="id">T2</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id">A</span> <span class="id">x</span> -&gt; <span class="id">f</span> <span class="id">x</span> = <span class="id">f</span>' <span class="id">x</span>) -&gt; <span class="id">f</span> @` <span class="id">A</span> = <span class="id">f</span>' @` <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof246')">Proof.</span></div>
<div class="proofscript" id="proof246">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">h</span>; <span class="id">rewrite</span> <span class="id">predeqE</span>=&gt; <span class="id">y</span>; <span class="id">split</span>=&gt; [][<span class="id">x</span> ? &lt;-]; <span class="kwd">exists</span> <span class="id">x</span>=&gt; //; <span class="id">rewrite</span> <span class="id">h</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eq_image_id</span> <span class="id">g</span> <span class="id">A</span> : (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id">A</span> <span class="id">x</span> -&gt; <span class="id">g</span> <span class="id">x</span> = <span class="id">x</span>) -&gt; <span class="id">g</span> @` <span class="id">A</span> = <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof247')">Proof.</span></div>
<div class="proofscript" id="proof247">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">eq_imagel</span>-&gt;; <span class="id">rewrite</span> <span class="id"><a name="preimage_bigcup">image_id</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_setU</span> <span class="id">f</span> <span class="id">Y1</span> <span class="id">Y2</span> : <span class="id">f</span> @^-1` (<span class="id">Y1</span> `|` <span class="id">Y2</span>) = <span class="id">f</span> @^-1` <span class="id">Y1</span> `|` <span class="id">f</span> @^-1` <span class="id">Y2</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof248')">Proof.</span></div>
<div class="proofscript" id="proof248">
 <span class="id">exact</span>/<span class="id">predeqP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_setI</span> <span class="id">f</span> <span class="id">Y1</span> <span class="id">Y2</span> : <span class="id">f</span> @^-1` (<span class="id">Y1</span> `&amp;` <span class="id">Y2</span>) = <span class="id">f</span> @^-1` <span class="id">Y1</span> `&amp;` <span class="id">f</span> @^-1` <span class="id">Y2</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof249')">Proof.</span></div>
<div class="proofscript" id="proof249">
 <span class="id">exact</span>/<span class="id">predeqP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_setC</span> <span class="id">f</span> <span class="id">Y</span> : ~` (<span class="id">f</span> @^-1` <span class="id">Y</span>) = <span class="id">f</span> @^-1` (~` <span class="id">Y</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof250')">Proof.</span></div>
<div class="proofscript" id="proof250">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">a</span>; <span class="id">split</span>=&gt; <span class="id">nAfa</span> ?; <span class="id">apply</span>: <span class="id">nAfa</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_subset</span> <span class="id">f</span> <span class="id">Y1</span> <span class="id">Y2</span> : <span class="id">Y1</span> `&lt;=` <span class="id">Y2</span> -&gt; <span class="id">f</span> @^-1` <span class="id">Y1</span> `&lt;=` <span class="id">f</span> @^-1` <span class="id">Y2</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof251')">Proof.</span></div>
<div class="proofscript" id="proof251">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Y12</span> <span class="id">t</span> /<span class="id">Y12</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">nonempty_preimage_setI</span> <span class="id">f</span> <span class="id">Y1</span> <span class="id">Y2</span> :<br/>
&nbsp;&nbsp;(<span class="id">f</span> @^-1` (<span class="id">Y1</span> `&amp;` <span class="id">Y2</span>)) !=<span class="id">set0</span> &lt;-&gt; (<span class="id">f</span> @^-1` <span class="id">Y1</span> `&amp;` <span class="id">f</span> @^-1` <span class="id">Y2</span>) !=<span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof252')">Proof.</span></div>
<div class="proofscript" id="proof252">
 <span class="kwd">by</span> <span class="id">split</span>; <span class="id">case</span>=&gt; <span class="id">t</span> ?; <span class="kwd">exists</span> <span class="id">t</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_bigcup</span> {<span class="id">I</span>} (<span class="id">P</span> : <span class="id">set</span> <span class="id">I</span>) <span class="id">f</span> (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#notin_set">set</a></span> <span class="id">rT</span>) :<br/>
&nbsp;&nbsp;<span class="id">f</span> @^-1` (\<span class="id">bigcup_</span> (<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span>) = \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) (<span class="id">f</span> @^-1` <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof253')">Proof.</span></div>
<div class="proofscript" id="proof253">
 <span class="id">exact</span>/<span class="id">predeqP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_bigcap</span> {<span class="id">I</span>} (<span class="id">P</span> : <span class="id">set</span> <span class="id">I</span>) <span class="id">f</span> (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">rT</span>) :<br/>
&nbsp;&nbsp;<span class="id">f</span> @^-1` (\<span class="id">bigcap_</span> (<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span>) = \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) (<span class="id">f</span> @^-1` <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof254')">Proof.</span></div>
<div class="proofscript" id="proof254">
 <span class="id">exact</span>/<span class="id">predeqP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eq_preimage</span> {<span class="id">I</span> <span class="id">T</span> : <span class="kwd">Type</span>} (<span class="id">D</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id"><a href="mathcomp.classical.classical_sets.html#image_lemmas.rT">F</a></span> <span class="id">G</span> : <span class="id">I</span> -&gt; <span class="id">T</span>) :<br/>
&nbsp;&nbsp;{<span class="kwd">in</span> <span class="id">D</span>, <span class="id">F</span> =1 <span class="id">G</span>} -&gt; <span class="id">D</span> `&amp;` <span class="id">F</span> @^-1` <span class="id">A</span> = <span class="id">D</span> `&amp;` <span class="id">G</span> @^-1` <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof255')">Proof.</span></div>
<div class="proofscript" id="proof255">
<span class="id">move</span>=&gt; <span class="id">eqFG</span>; <span class="id">apply</span>/<span class="id">predeqP</span> =&gt; <span class="id">i</span>.<br/>
<span class="kwd">by</span> <span class="id">split</span>=&gt; [] [<span class="id">Di</span> <span class="id">FAi</span>]; <span class="id">split</span>; <span class="id">rewrite</span> /<span class="id">preimage</span>//= (<span class="id">eqFG</span>,=^~<span class="id">eqFG</span>) ?<span class="id">inE</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">notin_setI_preimage</span> <span class="id">T</span> <span class="id">R</span> <span class="id">D</span> (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">R</span>) <span class="id">i</span> :<br/>
&nbsp;&nbsp;<span class="id">i</span> \<span class="id">notin</span> <span class="id">f</span> @` <span class="id">D</span> -&gt; <span class="id">D</span> `&amp;` <span class="id">f</span> @^-1` [<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#image_lemmas.rT">i</a></span>] = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof256')">Proof.</span></div>
<div class="proofscript" id="proof256">
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">notin_set</span>/=; <span class="id">apply</span>: <span class="id">contra_notP</span> =&gt; /<span class="id">eqP</span>/<span class="id">set0P</span>[<span class="id">t</span> [<span class="id">Dt</span> <span class="id">fit</span>]]; <span class="kwd">exists</span> <span class="id">t</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">comp_preimage</span> <span class="id">T1</span> <span class="id">T2</span> <span class="id">T3</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T3</span>) (<span class="id">g</span> : <span class="id">T1</span> -&gt; <span class="id">T2</span>) (<span class="id">f</span> : <span class="id">T2</span> -&gt; <span class="id">T3</span>) :<br/>
&nbsp;&nbsp;(<span class="id">f</span> \<span class="id">o</span> <span class="id">g</span>) @^-1` <span class="id">A</span> = <span class="id"><a href="mathcomp.classical.classical_sets.html#image_lemmas.rT">g</a></span> @^-1` (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">f</a></span> @^-1` <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof257')">Proof.</span></div>
<div class="proofscript" id="proof257">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_id</span> <span class="id">T</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">id</span> @^-1` <span class="id">A</span> = <span class="id">A</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof258')">Proof.</span></div>
<div class="proofscript" id="proof258">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_comp</span> <span class="id">T1</span> <span class="id">T2</span> (<span class="id">g</span> : <span class="id">T1</span> -&gt; <span class="id">rT</span>) (<span class="id">f</span> : <span class="id">T2</span> -&gt; <span class="id">rT</span>) (<span class="id">C</span> : <span class="id">set</span> <span class="id">T1</span>) :<br/>
&nbsp;&nbsp;<span class="id">f</span> @^-1` [<span class="id">set</span> <span class="id">g</span> <span class="id">x</span> | <span class="id">x</span> <span class="kwd">in</span> <span class="id">C</span>] = [<span class="id"><a href="mathcomp.classical.classical_sets.html#subset0">set</a></span> <span class="id">x</span> | <span class="id">f</span> <span class="id">x</span> \<span class="kwd">in</span> <span class="id">g</span> @` <span class="id">C</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof259')">Proof.</span></div>
<div class="proofscript" id="proof259">
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span> =&gt; /=.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; -[<span class="id">r</span> <span class="id">Cr</span> &lt;-]; <span class="id">rewrite</span> <span class="id">inE</span>;  <span class="kwd">exists</span> <span class="id">r</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">inE</span> =&gt; -[<span class="id">r</span> <span class="id">Cr</span> &lt;-]; <span class="kwd">exists</span> <span class="id">r</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_setI_eq0</span> (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) (<span class="id">Y1</span> <span class="id">Y2</span> : <span class="id">set</span> <span class="id">rT</span>) :<br/>
&nbsp;&nbsp;<span class="id">f</span> @^-1` (<span class="id">Y1</span> `&amp;` <span class="id">Y2</span>) = <span class="id">set0</span> &lt;-&gt; <span class="id">f</span> @^-1` <span class="id">Y1</span> `&amp;` <span class="id">f</span> @^-1` <span class="id">Y2</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof260')">Proof.</span></div>
<div class="proofscript" id="proof260">
<span class="kwd">by</span> <span class="id">split</span>; <span class="id">apply</span>: <span class="id">contraPP</span> =&gt; /<span class="id">eqP</span>/<span class="id">set0P</span>/(<span class="id">nonempty_preimage_setI</span> <span class="id">f</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#preimage10P">_</a></span>).2/<span class="id">set0P</span>/<span class="id">eqP</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage0eq</span> (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) (<span class="id">Y</span> : <span class="id">set</span> <span class="id">rT</span>) : <span class="id">Y</span> = <span class="id">set0</span> -&gt; <span class="id">f</span> @^-1` <span class="id">Y</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof261')">Proof.</span></div>
<div class="proofscript" id="proof261">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; -&gt;; <span class="id">rewrite</span> <span class="id">preimage_set0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage0</span> {<span class="id">T</span> <span class="id">R</span>} {<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">R</span>} {<span class="id">A</span> : <span class="id">set</span> <span class="id">R</span>} :<br/>
&nbsp;&nbsp;<span class="id">A</span> `&amp;` <span class="id">range</span> <span class="id">f</span> `&lt;=` <span class="id">set0</span> -&gt; <span class="id">f</span> @^-1` <span class="id">A</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof262')">Proof.</span></div>
<div class="proofscript" id="proof262">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">subset0</span> =&gt; + <span class="id">x</span> /= <span class="id">Afx</span> =&gt; /(<span class="id">_</span> (<span class="id">f</span> <span class="id">x</span>))[]; <span class="id">split</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage10P</span> {<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#mem">T</a></span> <span class="id">R</span>} {<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">R</span>} {<span class="id">x</span>} : ~ <span class="id">range</span> <span class="id">f</span> <span class="id">x</span> &lt;-&gt; <span class="id">f</span> @^-1` [<span class="id">set</span> <span class="id">x</span>] = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof263')">Proof.</span></div>
<div class="proofscript" id="proof263">
<span class="id">split</span> =&gt; [<span class="id">fx</span>|]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">preimage0</span>// =&gt; ? [-&gt;].<br/>
<span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">apply</a></span>: <span class="id">contraPnot</span> =&gt; -[<span class="id">t</span> <span class="id">_</span> &lt;-] /<span class="id">seteqP</span>[+ <span class="id">_</span>] =&gt; /(<span class="id">_</span> <span class="id">t</span>) /=.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage10</span> {<span class="id">T</span> <span class="id">R</span>} {<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">R</span>} {<span class="id">x</span>} : ~ <span class="id">range</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#image_lemmas">f</a></span> <span class="id">x</span> -&gt; <span class="id">f</span> @^-1` [<span class="id">set</span> <span class="id">x</span>] = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof264')">Proof.</span></div>
<div class="proofscript" id="proof264">
 <span class="kwd">by</span> <span class="id">move</span>/<span class="id">preimage10P</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_true</span> {<span class="id">T</span>} (<span class="id">P</span> : {<span class="id">pred</span> <span class="id">T</span>}) : <span class="id">P</span> @^-1` [<span class="id">set</span> <span class="id">true</span>] = [<span class="id">set</span>` <span class="id">P</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof265')">Proof.</span></div>
<div class="proofscript" id="proof265">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span> =&gt; [<span class="id">x</span>/=//|<span class="id">x</span>]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_false</span> {<span class="id">T</span>} (<span class="id">P</span> : {<span class="id">pred</span> <span class="id">T</span>}) : <span class="id">P</span> @^-1` [<span class="id">set</span> <span class="id">false</span>] = ~` [<span class="id">set</span>` <span class="id">P</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof266')">Proof.</span></div>
<div class="proofscript" id="proof266">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span> =&gt; [<span class="id">t</span>/= /<span class="id">negbT</span>/<span class="id">negP</span>|<span class="id">t</span> /= /<span class="id">negP</span>/<span class="id">negbTE</span>]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_mem_true</span> {<span class="id">T</span>} (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">mem</span> <span class="id">A</span> @^-1` [<span class="id">set</span> <span class="id">true</span>] = <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof267')">Proof.</span></div>
<div class="proofscript" id="proof267">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">preimage_true</span>; <span class="id">under</span> <span class="id">eq_fun</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">inE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_mem_false</span> {<span class="id">T</span>} (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">mem</span> <span class="id">A</span> @^-1` [<span class="id">set</span> <span class="id">false</span>] = ~` <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof268')">Proof.</span></div>
<div class="proofscript" id="proof268">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">preimage_false</span>; <span class="id">under</span> <span class="id">eq_fun</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">inE</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">image_lemmas</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">sub_image_setI</span> {<span class="id">aT</span> <span class="id">rT</span> <span class="id">f</span> <span class="id">A</span> <span class="id">B</span>} <span class="id">t</span> <span class="id">_</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">image2_subset</span> {<span class="id">aT</span> <span class="id">bT</span> <span class="id">rT</span> : <span class="kwd">Type</span>} (<span class="id"><a href="mathcomp.classical.classical_sets.html#image_comp">f</a></span> : <span class="id">aT</span> -&gt; <span class="id">bT</span> -&gt; <span class="id">rT</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> <span class="id">aT</span>) (<span class="id">C</span> <span class="id">D</span> : <span class="id">set</span> <span class="id">bT</span>) : <span class="id">A</span> `&lt;=` <span class="id">B</span> -&gt; <span class="id">C</span> `&lt;=` <span class="id">D</span> -&gt;<br/>
&nbsp;&nbsp;[<span class="id">set</span> <span class="id">f</span> <span class="id">x</span> <span class="id">y</span> | <span class="id">x</span> <span class="kwd">in</span> <span class="id">A</span> &amp; <span class="id">y</span> <span class="kwd">in</span> <span class="id">C</span>] `&lt;=` [<span class="id">set</span> <span class="id">f</span> <span class="id">x</span> <span class="id">y</span> | <span class="id">x</span> <span class="kwd">in</span> <span class="id">B</span> &amp; <span class="id">y</span> <span class="kwd">in</span> <span class="id">D</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof269')">Proof.</span></div>
<div class="proofscript" id="proof269">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">AB</span> <span class="id">CD</span>; <span class="id">rewrite</span> !<span class="id">image2E</span>; <span class="id">apply</span>: <span class="id">image_subset</span>; <span class="id"><a href="mathcomp.classical.classical_sets.html#image_comp">exact</a></span>: <span class="id">setSM</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">image_comp</span> <span class="id">T1</span> <span class="id">T2</span> <span class="id">T3</span> (<span class="id">f</span> : <span class="id">T1</span> -&gt; <span class="id">T2</span>) (<span class="id">g</span> : <span class="id">T2</span> -&gt; <span class="id">T3</span>) <span class="id">A</span> :<br/>
&nbsp;&nbsp;<span class="id">g</span> @` (<span class="id">f</span> @` <span class="id">A</span>) = (<span class="id">g</span> \<span class="id">o</span> <span class="id">f</span>) @` <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof270')">Proof.</span></div>
<div class="proofscript" id="proof270">
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; [<span class="id">x</span> [<span class="id">b</span> [<span class="id">a</span> <span class="id">Aa</span>] &lt;- &lt;-]|<span class="id">x</span> [<span class="id">a</span> <span class="id">Aa</span>] &lt;-];<br/>
&nbsp;&nbsp;[<span class="id">apply</span>/<span class="id">imageP</span> |<span class="id">apply</span>/<span class="id">imageP</span>/<span class="id">imageP</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subKimage</span> {<span class="id">T</span> <span class="id">T</span>'} {<span class="id">P</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">T</span>')} (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">T</span>') (<span class="id">g</span> : <span class="id">T</span>' -&gt; <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">cancel</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">f</a></span> <span class="id">g</span> -&gt; [<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">A</span> | <span class="id">P</span> (<span class="id">f</span> @` <span class="id">A</span>)] `&lt;=` [<span class="id">set</span> <span class="id">g</span> @` <span class="id"><a href="mathcomp.classical.classical_sets.html#subset0">A</a></span> | <span class="id">A</span> <span class="kwd">in</span> <span class="id">P</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof271')">Proof.</span></div>
<div class="proofscript" id="proof271">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; ? <span class="id">A</span>; <span class="kwd">exists</span> (<span class="id">f</span> @` <span class="id">A</span>); <span class="id">rewrite</span> ?<span class="id">image_comp</span> ?<span class="id">eq_image_id</span>/=. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subimageK</span> <span class="id">T</span> <span class="id">T</span>' (<span class="id">P</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">T</span>')) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">T</span>') (<span class="id">g</span> : <span class="id">T</span>' -&gt; <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id">cancel</span> <span class="id">g</span> <span class="id">f</span> -&gt; [<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">g</span> @` <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">A</a></span> | <span class="id">A</span> <span class="kwd">in</span> <span class="id">P</span>] `&lt;=` [<span class="id">set</span> <span class="id">A</span> | <span class="id">P</span> (<span class="id">f</span> @` <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">A</a></span>)].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof272')">Proof.</span></div>
<div class="proofscript" id="proof272">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">gK</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">_</a></span> [<span class="id">B</span> /= ? &lt;-]; <span class="id">rewrite</span> <span class="id">image_comp</span> <span class="id">eq_image_id</span>/=. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eq_imageK</span> {<span class="id">T</span> <span class="id">T</span>'} {<span class="id">P</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">T</span>')} (<span class="id">f</span> : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#erefl">T</a></span> -&gt; <span class="id">T</span>') (<span class="id">g</span> : <span class="id">T</span>' -&gt; <span class="id">T</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cancel</span> <span class="id">f</span> <span class="id">g</span> -&gt; <span class="id">cancel</span> <span class="id">g</span> <span class="id">f</span> -&gt;<br/>
&nbsp;&nbsp;[<span class="id">set</span> <span class="id">g</span> @` <span class="id">A</span> | <span class="id">A</span> <span class="kwd">in</span> <span class="id">P</span>] = [<span class="id">set</span> <span class="id">A</span> | <span class="id">P</span> (<span class="id">f</span> @` <span class="id">A</span>)].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof273')">Proof.</span></div>
<div class="proofscript" id="proof273">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">fK</span> <span class="id">gK</span>; <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>; [<span class="id">apply</span>: <span class="id">subimageK</span> | <span class="id">apply</span>: <span class="id">subKimage</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">some_set0</span> {<span class="id">T</span>} : <span class="id">some</span> @` <span class="id">set0</span> = <span class="id">set0</span> :&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">set</a></span> (<span class="id">option</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof274')">Proof.</span></div>
<div class="proofscript" id="proof274">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">subset0</span> =&gt; <span class="id">x</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">some_set1</span> {<span class="id">T</span>} (<span class="id">x</span> : <span class="id">T</span>) : <span class="id">some</span> @` [<span class="id">set</span> <span class="id">x</span>] = [<span class="id">set</span> <span class="id">some</span> <span class="id">x</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof275')">Proof.</span></div>
<div class="proofscript" id="proof275">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>=&gt; [<span class="id">_</span> [<span class="id">_</span> -&gt; &lt;-]|<span class="id">_</span> -&gt;]//=; <span class="kwd">exists</span> <span class="id">x</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">some_setC</a></span> {<span class="id">T</span>} (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">some</span> @` (~` <span class="id">A</span>) = [<span class="id">set</span>~ <span class="id">None</span>] `\` (<span class="id">some</span> @` <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof276')">Proof.</span></div>
<div class="proofscript" id="proof276">
<span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">x</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#some_setC">nAx</a></span> &lt;-]; <span class="id">split</span>=&gt; // -[<span class="id">y</span> /[<span class="id">swap</span>]-[-&gt;]].<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">x</span> [<span class="id">_</span> <span class="id">exAx</span>]|[/(<span class="id">_</span> <span class="id">erefl</span>)//]]; <span class="kwd">exists</span> <span class="id">x</span> =&gt; // <span class="id">Ax</span>; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">apply</a></span>: <span class="id">exAx</span>; <span class="kwd">exists</span> <span class="id">x</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">some_setT</span> {<span class="id">T</span>} : <span class="id">some</span> @` [<span class="id">set</span>: <span class="id">T</span>] = [<span class="id">set</span>~ <span class="id">None</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof277')">Proof.</span></div>
<div class="proofscript" id="proof277">
 <span class="kwd">by</span> <span class="id">rewrite</span> -[<span class="id">setT</span>]<span class="id">setCK</span> <span class="id">some_setC</span> <span class="id">setCT</span> <span class="id">some_set0</span> <span class="id">setD0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">some_setI</span> {<span class="id">T</span>} (<span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">some</span> @` (<span class="id">A</span> `&amp;` <span class="id">B</span>) = <span class="id">some</span> @` <span class="id">A</span> `&amp;` <span class="id">some</span> @` <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof278')">Proof.</span></div>
<div class="proofscript" id="proof278">
<span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">x</span> [<span class="id">Ax</span> <span class="id">Bx</span>] &lt;-]; <span class="id">split</span>; <span class="kwd">exists</span> <span class="id">x</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span> [[<span class="id">x</span> + &lt;-] [<span class="id">y</span> <span class="id">By</span> []]] =&gt; /[<span class="id">swap</span>]&lt;- <span class="id">Ay</span>; <span class="kwd">exists</span> <span class="id">y</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">some_setU</span> {<span class="id">T</span>} (<span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">some</span> @` (<span class="id">A</span> `|` <span class="id">B</span>) = <span class="id">some</span> @` <span class="id">A</span> `|` <span class="id">some</span> @` <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof279')">Proof.</span></div>
<div class="proofscript" id="proof279">
<span class="kwd">by</span> <span class="id">rewrite</span> -[<span class="id">_</span> `|` <span class="id">_</span>]<span class="id">setCK</span> <span class="id">setCU</span> <span class="id">some_setC</span> <span class="id">some_setI</span> <span class="id">setDIr</span> -!<span class="id">some_setC</span> !<span class="id">setCK</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">some_setD</span> {<span class="id">T</span>} (<span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">some</a></span> @` (<span class="id">A</span> `\` <span class="id">B</span>) = (<span class="id">some</span> @` <span class="id">A</span>) `\` (<span class="id">some</span> @` <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof280')">Proof.</span></div>
<div class="proofscript" id="proof280">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">some_setI</span> <span class="id">some_setC</span> <span class="id">setIDA</span> <span class="id">setIidl</span>// =&gt; <span class="id">_</span> [? <span class="id">_</span> &lt;-]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sub_image_some</span> {<span class="id">T</span>} (<span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">some</span> @` <span class="id">A</span> `&lt;=` <span class="id">some</span> @` <span class="id">B</span> -&gt; <span class="id">A</span> `&lt;=` <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof281')">Proof.</span></div>
<div class="proofscript" id="proof281">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; + <span class="id">x</span> <span class="id">Ax</span> =&gt; /(<span class="id">_</span> (<span class="id">Some</span> <span class="id">x</span>))[|<span class="id">y</span> <span class="id">By</span> [&lt;-]]; <span class="id">first</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">x</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sub_image_someP</span> {<span class="id">T</span>} (<span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">some</span> @` <span class="id">A</span> `&lt;=` <span class="id">some</span> @` <span class="id">B</span> &lt;-&gt; <span class="id">A</span> `&lt;=` <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof282')">Proof.</span></div>
<div class="proofscript" id="proof282">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; [/<span class="id">sub_image_some</span>//|/<span class="id">image_subset</span>]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">image_some_inj</span> {<span class="id">T</span>} (<span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">some</span> @` <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">A</a></span> = <span class="id">some</span> @` <span class="id">B</span> -&gt; <span class="id">A</span> = <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof283')">Proof.</span></div>
<div class="proofscript" id="proof283">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">e</span>; <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>; <span class="id">apply</span>: <span class="id">sub_image_some</span>; <span class="id">rewrite</span> <span class="id">e</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">some_set_eq0</span> {<span class="id">T</span>} (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">some</span> @` <span class="id">A</span> = <span class="id">set0</span> &lt;-&gt; <span class="id">A</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof284')">Proof.</span></div>
<div class="proofscript" id="proof284">
<span class="id">split</span>=&gt; [|-&gt;]; <span class="id">last</span> <span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#some_set0">rewrite</a></span> <span class="id">some_set0</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -!<span class="id">subset0</span> =&gt; <span class="id">A0</span> <span class="id">x</span> <span class="id">Ax</span>; <span class="id">apply</span>: (<span class="id">A0</span> (<span class="id">some</span> <span class="id">x</span>)); <span class="kwd">exists</span> <span class="id">x</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">some_preimage</span> {<span class="id">aT</span> <span class="id">rT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) (<span class="id">A</span> : <span class="id">set</span> <span class="id">rT</span>) :<br/>
&nbsp;&nbsp;<span class="id">some</span> @` (<span class="id">f</span> @^-1` <span class="id">A</span>) = <span class="id">omap</span> <span class="id">f</span> @^-1` (<span class="id">some</span> @` <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof285')">Proof.</span></div>
<div class="proofscript" id="proof285">
<span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">a</span> <span class="id">Afa</span> &lt;-]; <span class="kwd">exists</span> (<span class="id">f</span> <span class="id">a</span>).<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">x</span>|] [<span class="id">a</span> <span class="id">Aa</span> //= [<span class="id">afx</span>]]; <span class="kwd">exists</span> <span class="id">x</span>; <span class="id">rewrite</span> // -<span class="id">afx</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">some_image</span> {<span class="id">aT</span> <span class="id">rT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) (<span class="id">A</span> : <span class="id">set</span> <span class="id">aT</span>) :<br/>
&nbsp;&nbsp;<span class="id">some</span> @` (<span class="id">f</span> @` <span class="id"><a href="mathcomp.classical.classical_sets.html#bigop_lemmas.T">A</a></span>) = <span class="id">omap</span> <span class="id">f</span> @` (<span class="id">some</span> @` <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof286')">Proof.</span></div>
<div class="proofscript" id="proof286">
 <span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id">image_comp</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">disj_set_some</span> {<span class="id">T</span>} {<span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> <span class="id">T</span>} :<br/>
&nbsp;&nbsp;[<span class="id">disjoint</span> <span class="id">some</span> @` <span class="id">A</span> &amp; <span class="id">some</span> @` <span class="id">B</span>] = [<span class="id">disjoint</span> <span class="id">A</span> &amp; <span class="id">B</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof287')">Proof.</span></div>
<div class="proofscript" id="proof287">
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">disj_setPS</span>/<span class="id">disj_setPS</span>; <span class="id">rewrite</span> -<span class="id">some_setI</span> -<span class="id">some_set0</span> <span class="id">sub_image_someP</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">bigop_lemmas</span>.<br/>
<span class="kwd">Context</span> {<span class="id">T</span> <span class="id">I</span> : <span class="kwd">Type</span>}.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">i</span> : <span class="id">I</span>) (<span class="id">P</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">F</span> <span class="id">G</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_sup</span> <span class="id">i</span> <span class="id">P</span> <span class="id">F</span> : <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id">F</span> <span class="id">i</span> `&lt;=` \<span class="id">bigcup_</span>(<span class="id">j</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">j</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof288')">Proof.</span></div>
<div class="proofscript" id="proof288">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Pi</span> <span class="id">a</span> <span class="id">Fia</span>; <span class="kwd">exists</span> <span class="id">i</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcap_inf</span> <span class="id">i</span> <span class="id">P</span> <span class="id">F</span> : <span class="id">P</span> <span class="id">i</span> -&gt; \<span class="id">bigcap_</span>(<span class="id">j</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">j</span> `&lt;=` <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof289')">Proof.</span></div>
<div class="proofscript" id="proof289">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Pi</span> <span class="id">a</span> /(<span class="id">_</span> <span class="id">i</span>); <span class="id">apply</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subset_bigcup_r</span> <span class="id">P</span> : {<span class="id">homo</span> (<span class="kwd">fun</span> <span class="id">x</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span> =&gt; \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">x</span> <span class="id">i</span>)<br/>
&nbsp;&nbsp;: <span class="id">F</span> <span class="id">G</span> / [<span class="id">set</span> <span class="id">F</span> <span class="id">i</span> | <span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>] `&lt;=` [<span class="id">set</span> <span class="id">G</span> <span class="id">i</span> | <span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>] &gt;-&gt; <span class="id">F</span> `&lt;=` <span class="id">G</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof290')">Proof.</span></div>
<div class="proofscript" id="proof290">
<span class="id">move</span>=&gt; <span class="id">F</span> <span class="id">G</span> <span class="id">FG</span> <span class="id">t</span> [<span class="id">i</span> <span class="id">Pi</span> <span class="id">Fit</span>]; <span class="id">have</span> := <span class="id">FG</span> (<span class="id">F</span> <span class="id">i</span>).<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; /(<span class="id">_</span> (<span class="id">ex_intro2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Pi</span> <span class="id">erefl</span>))[<span class="id">j</span> <span class="id">Pj</span> <span class="id">ji</span>]; <span class="kwd">exists</span> <span class="id">j</span> =&gt; //; <span class="id">rewrite</span> <span class="id">ji</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subset_bigcap_r</span> <span class="id">P</span> : {<span class="id">homo</span> (<span class="kwd">fun</span> <span class="id">x</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span> =&gt; \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">x</span> <span class="id">i</span>)<br/>
&nbsp;&nbsp;: <span class="id">F</span> <span class="id">G</span> / [<span class="id">set</span> <span class="id">F</span> <span class="id">i</span> | <span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>] `&lt;=` [<span class="id">set</span> <span class="id">G</span> <span class="id">i</span> | <span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>] &gt;-&gt; <span class="id">G</span> `&lt;=` <span class="id">F</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof291')">Proof.</span></div>
<div class="proofscript" id="proof291">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">F</span> <span class="id">G</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#eqEsubset">FG</a></span> <span class="id">t</span> <span class="id">Gt</span> <span class="id">i</span> <span class="id">Pi</span>; <span class="id">have</span> [|<span class="id">j</span> <span class="id">Pj</span> &lt;-] := <span class="id">FG</span> (<span class="id">F</span> <span class="id">i</span>); [<span class="kwd">exists</span> <span class="id">i</span>|<span class="id">apply</span>: <span class="id">Gt</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eq_bigcupr</span> <span class="id">P</span> <span class="id">F</span> <span class="id">G</span> : (<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id">F</span> <span class="id">i</span> = <span class="id">G</span> <span class="id">i</span>) -&gt;<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> = \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">G</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof292')">Proof.</span></div>
<div class="proofscript" id="proof292">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">FG</span>; <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span>; <span class="id">apply</span>: <span class="id">subset_bigcup_r</span>;<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">A</span> [<span class="id">i</span> ? &lt;-]; <span class="kwd">exists</span> <span class="id">i</span> =&gt; //; <span class="id">rewrite</span> <span class="id">FG</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eq_bigcapr</span> <span class="id">P</span> <span class="id">F</span> <span class="id">G</span> : (<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id">F</span> <span class="id">i</span> = <span class="id">G</span> <span class="id">i</span>) -&gt;<br/>
&nbsp;&nbsp;\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> = \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">G</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof293')">Proof.</span></div>
<div class="proofscript" id="proof293">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">FG</span>; <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span>; <span class="id">apply</span>: <span class="id">subset_bigcap_r</span>;<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">A</span> [<span class="id">i</span> ? &lt;-]; <span class="kwd">exists</span> <span class="id">i</span> =&gt; //; <span class="id">rewrite</span> <span class="id">FG</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setC_bigcup</span> <span class="id">P</span> <span class="id">F</span> : ~` (\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span>) = \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) ~` <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof294')">Proof.</span></div>
<div class="proofscript" id="proof294">
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; [<span class="id">t</span> <span class="id">PFt</span> <span class="id">i</span> <span class="id">Pi</span> ?|<span class="id">t</span> <span class="id">PFt</span> [<span class="id">i</span> <span class="id">Pi</span> ?]];<br/>
&nbsp;&nbsp;[<span class="id">apply</span> <span class="id">PFt</span>; <span class="kwd">exists</span> <span class="id">i</span> | <span class="id">exact</span>: (<span class="id">PFt</span> <span class="id">_</span> <span class="id">Pi</span>)].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setC_bigcap</span> <span class="id">P</span> <span class="id">F</span> : ~` (\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) (<span class="id">F</span> <span class="id">i</span>)) = \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) ~` <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof295')">Proof.</span></div>
<div class="proofscript" id="proof295">
<span class="id">apply</span>: <span class="id">setC_inj</span>; <span class="id">rewrite</span> <span class="id">setC_bigcup</span> <span class="id">setCK</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">eq_bigcapr</span> =&gt; ?; <span class="id">rewrite</span> <span class="id">setCK</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">image_bigcup</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set_mem">rT</a></span> <span class="id">P</span> <span class="id">F</span> (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">rT</span>) :<br/>
&nbsp;&nbsp;<span class="id">f</span> @` (\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) (<span class="id">F</span> <span class="id">i</span>)) = \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">f</span> @` <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof296')">Proof.</span></div>
<div class="proofscript" id="proof296">
<span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>=&gt; [<span class="id">_</span>/= [<span class="id">x</span> [<span class="id">i</span> <span class="id">Pi</span> <span class="id">Fix</span> &lt;-]]|]; <span class="id">first</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">i</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">i</span> <span class="id">Pi</span> [<span class="id">x</span> <span class="id">Fix</span> &lt;-]]; <span class="kwd">exists</span> <span class="id">x</span> =&gt; //; <span class="kwd">exists</span> <span class="id">i</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">some_bigcap</span> <span class="id">P</span> <span class="id">F</span> : <span class="id">some</span> @` (\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) (<span class="id">F</span> <span class="id">i</span>)) =<br/>
&nbsp;&nbsp;[<span class="id">set</span>~ <span class="id">None</span>] `&amp;` \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">some</span> @` <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof297')">Proof.</span></div>
<div class="proofscript" id="proof297">
<span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">x</span> <span class="id">Fx</span> &lt;-]; <span class="id">split</span>=&gt; // <span class="id">i</span>; <span class="kwd">exists</span> <span class="id">x</span> =&gt; //; <span class="id">apply</span>: <span class="id">Fx</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">x</span>|[//=]] [<span class="id">_</span> <span class="id">Fx</span>]; <span class="kwd">exists</span> <span class="id">x</span> =&gt; //= <span class="id">i</span> /<span class="id">Fx</span> [<span class="id">y</span> ? [&lt;-]].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_set_type</span> <span class="id">P</span> <span class="id">F</span> : \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> = \<span class="id">bigcup_</span>(<span class="id">j</span> : <span class="id">P</span>) <span class="id">F</span> (<span class="id">val</span> <span class="id">j</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof298')">Proof.</span></div>
<div class="proofscript" id="proof298">
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">x</span>; <span class="id">split</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; [[<span class="id">i</span>/= /<span class="id">set_mem</span> <span class="id">Pi</span>] <span class="id">_</span> <span class="id">Fix</span>]; <span class="kwd">exists</span> <span class="id">i</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">i</span> <span class="id">Pi</span> <span class="id"><a name="bigcupU">Fix</a></span>]; <span class="kwd">exists</span> (<span class="id">SigSub</span> (<span class="id">mem_set</span> <span class="id">Pi</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eq_bigcupl</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">F</span> : <span class="id">P</span> `&lt;=&gt;` <span class="id">Q</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> = \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">Q</span>) <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof299')">Proof.</span></div>
<div class="proofscript" id="proof299">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">seteqP</span>-&gt;. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eq_bigcapl</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">F</span> : <span class="id">P</span> `&lt;=&gt;` <span class="id">Q</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> = \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">Q</span>) <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof300')">Proof.</span></div>
<div class="proofscript" id="proof300">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">seteqP</span>-&gt;. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eq_bigcup</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">F</span> <span class="id">G</span> : <span class="id">P</span> `&lt;=&gt;` <span class="id">Q</span> -&gt; (<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id">F</span> <span class="id">i</span> = <span class="id">G</span> <span class="id">i</span>) -&gt;<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> = \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">Q</span>) <span class="id">G</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof301')">Proof.</span></div>
<div class="proofscript" id="proof301">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id"><a href="mathcomp.classical.classical_sets.html#setC_bigcap">eq_bigcupl</a></span>&lt;- /<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcupU">eq_bigcupr</a></span>-&gt;. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eq_bigcap</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">F</span> <span class="id">G</span> : <span class="id">P</span> `&lt;=&gt;` <span class="id">Q</span> -&gt; (<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id">F</span> <span class="id">i</span> = <span class="id">G</span> <span class="id">i</span>) -&gt;<br/>
&nbsp;&nbsp;\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> = \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">Q</span>) <span class="id">G</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof302')">Proof.</span></div>
<div class="proofscript" id="proof302">
 <span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">move</a></span>=&gt; /<span class="id">eq_bigcapl</span>&lt;- /<span class="id">eq_bigcapr</span>-&gt;. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcupU</span> <span class="id">P</span> <span class="id">F</span> <span class="id">G</span> : \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) (<span class="id">F</span> <span class="id">i</span> `|` <span class="id">G</span> <span class="id">i</span>) =<br/>
&nbsp;&nbsp;(\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span>) `|` (\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setC_inj">P</a></span>) <span class="id">G</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof303')">Proof.</span></div>
<div class="proofscript" id="proof303">
<span class="id">apply</span>/<span class="id">predeqP</span> =&gt; <span class="id">x</span>; <span class="id">split</span>=&gt; [[<span class="id">i</span> <span class="id">Pi</span> [<span class="id">Fix</span>|<span class="id"><a name="bigcapIl">Gix</a></span>]]|[[<span class="id">i</span> <span class="id">Pi</span> <span class="id">Fix</span>]|[<span class="id">i</span> <span class="id">Pi</span> <span class="id">Gix</span>]]];<br/>
&nbsp;&nbsp;<span class="kwd">by</span> [<span class="id">left</span>; <span class="kwd">exists</span> <span class="id">i</span>|<span class="id">right</span>; <span class="kwd">exists</span> <span class="id">i</span>|<span class="kwd">exists</span> <span class="id">i</span> =&gt;//; <span class="id">left</span>|<span class="kwd">exists</span> <span class="id">i</span> =&gt;//; <span class="id">right</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcapI</span> <span class="id">P</span> <span class="id">F</span> <span class="id">G</span> : \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id"><a name="bigcapIr">P</a></span>) (<span class="id">F</span> <span class="id">i</span> `&amp;` <span class="id">G</span> <span class="id">i</span>) =<br/>
&nbsp;&nbsp;(\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span>) `&amp;` (\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">G</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof304')">Proof.</span></div>
<div class="proofscript" id="proof304">
<span class="id">apply</span>: <span class="id">setC_inj</span>; <span class="id">rewrite</span> !(<span class="id">setCI</span>, <span class="id">setC_bigcap</span>) -<span class="id">bigcupU</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">eq_bigcupr</span> =&gt; *; <span class="id">rewrite</span> <span class="id">setCI</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_const</span> <span class="id">P</span> <span class="id">A</span> : <span class="id">P</span> !=<span class="id">set0</span> -&gt; \<span class="id">bigcup_</span>(<span class="id">_</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">A</span> = <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof305')">Proof.</span></div>
<div class="proofscript" id="proof305">
 <span class="kwd">by</span> <span class="id">case</span>=&gt; <span class="id">j</span> ?; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">x</span>; <span class="id">split</span>=&gt; [[<span class="id">i</span> //]|<span class="id">Ax</span>]; <span class="kwd">exists</span> <span class="id">j</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcap_const</span> <span class="id">P</span> <span class="id">A</span> : <span class="id">P</span> !=<span class="id">set0</span> -&gt; \<span class="id">bigcap_</span>(<span class="id">_</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">A</span> = <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof306')">Proof.</span></div>
<div class="proofscript" id="proof306">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">PN0</span>; <span class="id">apply</span>: <span class="id">setC_inj</span>; <span class="id">rewrite</span> <span class="id">setC_bigcap</span> <span class="id">bigcup_const</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcapIl</span> <span class="id">P</span> <span class="id">F</span> <span class="id">A</span> : <span class="id">P</span> !=<span class="id">set0</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">bigcap_</a></span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) (<span class="id">F</span> <span class="id">i</span> `&amp;` <span class="id">A</span>) = \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> `&amp;` <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof307')">Proof.</span></div>
<div class="proofscript" id="proof307">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">PN0</span>; <span class="id">rewrite</span> <span class="id">bigcapI</span> <span class="id">bigcap_const</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcapIr</span> <span class="id">P</span> <span class="id">F</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#eqEsubset">A</a></span> : <span class="id">P</span> !=<span class="id">set0</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) (<span class="id">A</span> `&amp;` <span class="id">F</span> <span class="id">i</span>) = <span class="id">A</span> `&amp;` \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof308')">Proof.</span></div>
<div class="proofscript" id="proof308">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">PN0</span>; <span class="id">rewrite</span> <span class="id">bigcapI</span> <span class="id">bigcap_const</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcupUl</span> <span class="id">P</span> <span class="id">F</span> <span class="id">A</span> : <span class="id">P</span> !=<span class="id">set0</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) (<span class="id">F</span> <span class="id">i</span> `|` <span class="id">A</span>) = \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> `|` <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof309')">Proof.</span></div>
<div class="proofscript" id="proof309">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">PN0</span>; <span class="id">rewrite</span> <span class="id">bigcupU</span> <span class="id">bigcup_const</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcupUr</span> <span class="id">P</span> <span class="id">F</span> <span class="id">A</span> : <span class="id">P</span> !=<span class="id">set0</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) (<span class="id">A</span> `|` <span class="id">F</span> <span class="id">i</span>) = <span class="id">A</span> `|` \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof310')">Proof.</span></div>
<div class="proofscript" id="proof310">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">PN0</span>; <span class="id">rewrite</span> <span class="id">bigcupU</span> <span class="id">bigcup_const</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_set0</span> <span class="id">F</span> : \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">set0</span>) <span class="id">F</span> <span class="id">i</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof311')">Proof.</span></div>
<div class="proofscript" id="proof311">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; <span class="id">a</span> // []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_set1</span> <span class="id">F</span> <span class="id">i</span> : \<span class="id">bigcup_</span>(<span class="id">j</span> <span class="kwd">in</span> [<span class="id"><a href="mathcomp.classical.classical_sets.html#subset0">set</a></span> <span class="id">i</span>]) <span class="id">F</span> <span class="id">j</span> = <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof312')">Proof.</span></div>
<div class="proofscript" id="proof312">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; ? =&gt; [[] ? -&gt; //|]; <span class="kwd">exists</span> <span class="id">i</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcap_set0</span> <span class="id">F</span> : \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">set0</span>) <span class="id">F</span> <span class="id">i</span> = <span class="id">setT</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof313')">Proof.</span></div>
<div class="proofscript" id="proof313">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span>=&gt; <span class="id">a</span> // []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcap_set1</span> <span class="id">F</span> <span class="id">i</span> : \<span class="id">bigcap_</span>(<span class="id">j</span> <span class="kwd">in</span> [<span class="id">set</span> <span class="id">i</span>]) <span class="id">F</span> <span class="id">j</span> = <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof314')">Proof.</span></div>
<div class="proofscript" id="proof314">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; ?; [<span class="id">exact</span>|<span class="id">move</span>=&gt; ? ? -&gt;]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_nonempty</span> <span class="id">P</span> <span class="id">F</span> :<br/>
&nbsp;&nbsp;(\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> !=<span class="id">set0</span>) &lt;-&gt; <span class="kwd">exists2</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> &amp; <span class="id">F</span> <span class="id">i</span> !=<span class="id"><a href="mathcomp.classical.classical_sets.html#setT">set0</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof315')">Proof.</span></div>
<div class="proofscript" id="proof315">
<span class="id">split</span>=&gt; [[<span class="id">t</span> [<span class="id">i</span> ? ?]]|[<span class="id">j</span> ? [<span class="id">t</span> ?]]]; <span class="kwd">by</span> [<span class="kwd">exists</span> <span class="id">i</span> =&gt; //; <span class="kwd">exists</span> <span class="id">t</span>| <span class="kwd">exists</span> <span class="id">t</span>, <span class="id">j</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup0</span> <span class="id">P</span> <span class="id">F</span> :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">i</a></span> -&gt; <span class="id">F</span> <span class="id">i</span> = <span class="id">set0</span>) -&gt; \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof316')">Proof.</span></div>
<div class="proofscript" id="proof316">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">PF</span>; <span class="id">rewrite</span> -<span class="id">subset0</span> =&gt; <span class="id">t</span> -[<span class="id">i</span> /<span class="id">PF</span> -&gt;]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcap0</span> <span class="id">P</span> <span class="id">F</span> :<br/>
&nbsp;&nbsp;(<span class="kwd">exists2</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> &amp; <span class="id">F</span> <span class="id">i</span> = <span class="id">set0</span>) -&gt; \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof317')">Proof.</span></div>
<div class="proofscript" id="proof317">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">i</span> <span class="id">Pi</span>]; <span class="id">rewrite</span> -!<span class="id">subset0</span> =&gt; <span class="id">Fi</span> <span class="id">t</span> <span class="id">Ft</span>; <span class="id">apply</span>/<span class="id">Fi</span>/<span class="id">Ft</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcapT</span> <span class="id">P</span> <span class="id">F</span> :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id">F</span> <span class="id">i</span> = <span class="id">setT</span>) -&gt; \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> = <span class="id">setT</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof318')">Proof.</span></div>
<div class="proofscript" id="proof318">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">PF</span>; <span class="id">rewrite</span> -<span class="id">subTset</span> =&gt; <span class="id">t</span> -[<span class="id">i</span> /<span class="id">PF</span> -&gt;]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcupT</span> <span class="id">P</span> <span class="id">F</span> :<br/>
&nbsp;&nbsp;(<span class="kwd">exists2</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> &amp; <span class="id">F</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">i</a></span> = <span class="id">setT</span>) -&gt; \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> = <span class="id">setT</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof319')">Proof.</span></div>
<div class="proofscript" id="proof319">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">i</span> <span class="id">Pi</span> <span class="id">F0</span>]; <span class="id">rewrite</span> -<span class="id">subTset</span> =&gt; <span class="id">t</span>; <span class="kwd">exists</span> <span class="id">i</span>; <span class="id">rewrite</span> ?<span class="id">F0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup0P</span> <span class="id">P</span> <span class="id">F</span> :<br/>
&nbsp;&nbsp;(\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> = <span class="id">set0</span>) &lt;-&gt; <span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id">F</span> <span class="id">i</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof320')">Proof.</span></div>
<div class="proofscript" id="proof320">
<span class="id">split</span>=&gt; [|/<span class="id">bigcup0</span>//]; <span class="id">rewrite</span> -<span class="id">subset0</span> =&gt; <span class="id">F0</span> <span class="id">i</span> <span class="id">Pi</span>; <span class="id">rewrite</span> -<span class="id">subset0</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">t</span> <span class="id">Ft</span>; <span class="id">apply</span>: <span class="id">F0</span>; <span class="kwd">exists</span> <span class="id">i</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcapTP</span> <span class="id">P</span> <span class="id">F</span> :<br/>
&nbsp;&nbsp;(\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id"><a href="mathcomp.classical.classical_sets.html#setC_inj">F</a></span> <span class="id">i</span> = <span class="id">setT</span>) &lt;-&gt; <span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id">F</span> <span class="id">i</span> = <span class="id">setT</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof321')">Proof.</span></div>
<div class="proofscript" id="proof321">
<span class="id">split</span>=&gt; [|/<span class="id">bigcapT</span>//]; <span class="id">rewrite</span> -<span class="id">subTset</span> =&gt; <span class="id">FT</span> <span class="id">i</span> <span class="id">Pi</span>; <span class="id">rewrite</span> -<span class="id">subTset</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">t</span> <span class="id">_</span>; <span class="id">apply</span>: <span class="id">FT</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setI_bigcupr</span> <span class="id">F</span> <span class="id">P</span> <span class="id">A</span> :<br/>
&nbsp;&nbsp;<span class="id">A</span> `&amp;` \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setU_bigcapr">i</a></span> = \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) (<span class="id"><a href="mathcomp.classical.classical_sets.html#eq_bigcapr">A</a></span> `&amp;` <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof322')">Proof.</span></div>
<div class="proofscript" id="proof322">
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id"><a name="bigcup_mkcond">split</a></span> =&gt; [[<span class="id">At</span> [<span class="id">k</span> ? ?]]|[<span class="id">k</span> ? [<span class="id">At</span> ?]]];<br/>
&nbsp;&nbsp;<span class="kwd">by</span> [<span class="kwd">exists</span> <span class="id">k</span> |<span class="id">split</span> =&gt; //; <span class="kwd">exists</span> <span class="id">k</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setI_bigcupl</span> <span class="id">F</span> <span class="id">P</span> <span class="id">A</span> :<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> `&amp;` <span class="id">A</span> = \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) (<span class="id">F</span> <span class="id">i</span> `&amp;` <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof323')">Proof.</span></div>
<div class="proofscript" id="proof323">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#notin_set">setIC</a></span> <span class="id">setI_bigcupr</span>//; <span class="id">under</span> <span class="id">eq_bigcupr</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">setIC</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setU_bigcapr</span> <span class="id">F</span> <span class="id">P</span> <span class="id">A</span> :<br/>
&nbsp;&nbsp;<span class="id">A</span> `|` \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> = \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) (<span class="id">A</span> `|` <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof324')">Proof.</span></div>
<div class="proofscript" id="proof324">
<span class="id">apply</span>: <span class="id">setC_inj</span>; <span class="id">rewrite</span> <span class="id">setCU</span> !<span class="id">setC_bigcap</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_mkcond">setI_bigcupr</a></span>.<br/>
<span class="kwd">by</span> <span class="id">under</span> <span class="id">eq_bigcupr</span> <span class="id">do</span> <span class="id">rewrite</span> -<span class="id">setCU</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setU_bigcapl</span> <span class="id">F</span> <span class="id">P</span> <span class="id">A</span> :<br/>
&nbsp;&nbsp;\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> `|` <span class="id">A</span> = \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) (<span class="id">F</span> <span class="id">i</span> `|` <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof325')">Proof.</span></div>
<div class="proofscript" id="proof325">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setUC</span> <span class="id">setU_bigcapr</span>//; <span class="id">under</span> <span class="id">eq_bigcapr</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">setUC</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_mkcond</span> <span class="id">P</span> <span class="id">F</span> :<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> = \<span class="id">bigcup_i</span> <span class="kwd">if</span> <span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span> <span class="kwd">then</span> <span class="id">F</span> <span class="id">i</span> <span class="kwd">else</span> <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof326')">Proof.</span></div>
<div class="proofscript" id="proof326">
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">x</span>; <span class="id">split</span>=&gt; [[<span class="id">i</span> <span class="id">Pi</span> <span class="id">Fix</span>]|[<span class="id">i</span> <span class="id">_</span>]].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">i</span> =&gt; //; <span class="id">case</span>: <span class="id">ifPn</span>; <span class="id">rewrite</span> (<span class="id">inE</span>, <span class="id">notin_set</span>).<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id">ifPn</span>; <span class="id">rewrite</span> (<span class="id">inE</span>, <span class="id">notin_set</span>) =&gt; <span class="id">Pi</span> <span class="id">Fix</span>; <span class="kwd">exists</span> <span class="id">i</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_mkcondr</span> <span class="id">P</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#eq_bigcupr">Q</a></span> <span class="id">F</span> :<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span> `&amp;` <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">Q</a></span>) <span class="id">F</span> <span class="id">i</span> = \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="kwd">if</span> <span class="id">i</span> \<span class="kwd">in</span> <span class="id">Q</span> <span class="kwd">then</span> <span class="id">F</span> <span class="id">i</span> <span class="kwd">else</span> <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof327')">Proof.</span></div>
<div class="proofscript" id="proof327">
<span class="id">rewrite</span> <span class="id">bigcup_mkcond</span> [<span class="id">RHS</span>]<span class="id">bigcup_mkcond</span>; <span class="id">apply</span>: <span class="id">eq_bigcupr</span> =&gt; <span class="id">i</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">_</a></span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">in_setI</span>; <span class="id">case</span>: (<span class="id">i</span> \<span class="kwd">in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">P</a></span>) (<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcap_mkcond">i</a></span> \<span class="kwd">in</span> <span class="id">Q</span>) =&gt; [] [].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_mkcondl</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">F</span> :<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span> `&amp;` <span class="id">Q</span>) <span class="id">F</span> <span class="id">i</span> = \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">Q</span>) <span class="kwd">if</span> <span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span> <span class="kwd">then</span> <span class="id">F</span> <span class="id">i</span> <span class="kwd">else</span> <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof328')">Proof.</span></div>
<div class="proofscript" id="proof328">
<span class="id">rewrite</span> <span class="id">bigcup_mkcond</span> [<span class="id">RHS</span>]<span class="id">bigcup_mkcond</span>; <span class="id">apply</span>: <span class="id">eq_bigcupr</span> =&gt; <span class="id">i</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">_</a></span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">in_setI</span>; <span class="id">case</span>: (<span class="id">i</span> \<span class="kwd">in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">P</a></span>) (<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcap_mkcond">i</a></span> \<span class="kwd">in</span> <span class="id">Q</span>) =&gt; [] [].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcap_mkcond</span> <span class="id">F</span> <span class="id">P</span> :<br/>
&nbsp;&nbsp;\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> = \<span class="id">bigcap_i</span> <span class="kwd">if</span> <span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span> <span class="kwd">then</span> <span class="id">F</span> <span class="id">i</span> <span class="kwd">else</span> <span class="id">setT</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof329')">Proof.</span></div>
<div class="proofscript" id="proof329">
<span class="id">apply</span>: <span class="id">setC_inj</span>; <span class="id">rewrite</span> !<span class="id">setC_bigcap</span> <span class="id">bigcup_mkcond</span>; <span class="id">apply</span>: <span class="id">eq_bigcupr</span> =&gt; <span class="id">i</span> <span class="id">_</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id">ifP</span>; <span class="id">rewrite</span> ?<span class="id">setCT</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#imageP">bigcap_mkcondr</a></span> <span class="id">P</span> <span class="id">Q</span> <span class="id">F</span> :<br/>
&nbsp;&nbsp;\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span> `&amp;` <span class="id">Q</span>) <span class="id">F</span> <span class="id">i</span> = \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="kwd">if</span> <span class="id">i</span> \<span class="kwd">in</span> <span class="id">Q</span> <span class="kwd">then</span> <span class="id">F</span> <span class="id">i</span> <span class="kwd">else</span> <span class="id">setT</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof330')">Proof.</span></div>
<div class="proofscript" id="proof330">
<span class="id">rewrite</span> <span class="id">bigcap_mkcond</span> [<span class="id">RHS</span>]<span class="id">bigcap_mkcond</span>; <span class="id">apply</span>: <span class="id">eq_bigcapr</span> =&gt; <span class="id">i</span> <span class="id">_</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">in_setI</span>; <span class="id">case</span>: (<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) (<span class="id">i</span> \<span class="kwd">in</span> <span class="id">Q</span>) =&gt; [] [].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcap_mkcondl</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">F</span> :<br/>
&nbsp;&nbsp;\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span> `&amp;` <span class="id">Q</span>) <span class="id">F</span> <span class="id">i</span> = \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">Q</span>) <span class="kwd">if</span> <span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span> <span class="kwd">then</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#bigop_lemmas.I">F</a></span> <span class="id">i</span> <span class="kwd">else</span> <span class="id">setT</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof331')">Proof.</span></div>
<div class="proofscript" id="proof331">
<span class="id">rewrite</span> <span class="id">bigcap_mkcond</span> [<span class="id">RHS</span>]<span class="id">bigcap_mkcond</span>; <span class="id">apply</span>: <span class="id">eq_bigcapr</span> =&gt; <span class="id">i</span> <span class="id">_</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">in_setI</span>; <span class="id">case</span>: (<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) (<span class="id"><a href="mathcomp.classical.classical_sets.html#setC_bigcap">i</a></span> \<span class="kwd">in</span> <span class="id">Q</span>) =&gt; [] [].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_imset1</span> <span class="id">P</span> (<span class="id">f</span> : <span class="id">I</span> -&gt; <span class="id">T</span>) : \<span class="id">bigcup_</span>(<span class="id">x</span> <span class="kwd">in</span> <span class="id">P</span>) [<span class="id">set</span> <span class="id">f</span> <span class="id">x</span>] = <span class="id">f</span> @` <span class="id">P</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof332')">Proof.</span></div>
<div class="proofscript" id="proof332">
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span>=&gt;[<span class="id">a</span> [<span class="id">i</span> ?]-&gt;| <span class="id">a</span> [<span class="id">i</span> ?]&lt;-]; [<span class="id">apply</span>: <span class="id">imageP</span> | <span class="kwd">exists</span> <span class="id">i</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_setU</span> <span class="id">F</span> (<span class="id">X</span> <span class="id">Y</span> : <span class="id">set</span> <span class="id">I</span>) :<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">X</span> `|` <span class="id">Y</span>) <span class="id">F</span> <span class="id">i</span> = \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">X</span>) <span class="id">F</span> <span class="id">i</span> `|` \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">Y</span>) <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof333')">Proof.</span></div>
<div class="proofscript" id="proof333">
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span>=&gt; [[<span class="id">z</span>]|].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">Xz</span>|<span class="id">Yz</span>]; [<span class="id"><a href="mathcomp.classical.classical_sets.html#bigop_lemmas.I">left</a></span>|<span class="id">right</span>]; <span class="kwd">exists</span> <span class="id">z</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; [[<span class="id">z</span> <span class="id">Xz</span> <span class="id">Fzy</span>]|[<span class="id">z</span> <span class="id">Yz</span> <span class="id">Fxz</span>]]; <span class="kwd">exists</span> <span class="id">z</span> =&gt; //; [<span class="id">left</span>|<span class="id">right</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcap_setU</span> <span class="id">F</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#setD1K">X</a></span> <span class="id">Y</span> : <span class="id">set</span> <span class="id">I</span>) :<br/>
&nbsp;&nbsp;\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">X</span> `|` <span class="id">Y</span>) <span class="id">F</span> <span class="id">i</span> = \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">X</span>) <span class="id">F</span> <span class="id">i</span> `&amp;` \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">Y</span>) <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof334')">Proof.</span></div>
<div class="proofscript" id="proof334">
 <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">setC_inj</span>; <span class="id">rewrite</span> !(<span class="id">setCI</span>, <span class="id">setC_bigcap</span>) <span class="id">bigcup_setU</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_setU1</span> <span class="id">F</span> (<span class="id">x</span> : <span class="id">I</span>) (<span class="id">X</span> : <span class="id">set</span> <span class="id">I</span>) :<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">x</span> |` <span class="id">X</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">F</a></span> <span class="id">i</span> = <span class="id">F</span> <span class="id">x</span> `|` \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">X</span>) <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof335')">Proof.</span></div>
<div class="proofscript" id="proof335">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">bigcup_setU</span> <span class="id">bigcup_set1</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcap_setU1</span> <span class="id">F</span> (<span class="id">x</span> : <span class="id">I</span>) (<span class="id">X</span> : <span class="id">set</span> <span class="id">I</span>) :<br/>
&nbsp;&nbsp;\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">x</span> |` <span class="id"><a href="mathcomp.classical.classical_sets.html#setC0">X</a></span>) <span class="id">F</span> <span class="id">i</span> = <span class="id">F</span> <span class="id">x</span> `&amp;` \<span class="id">bigcap_</span>(<span class="id"><a name="setC_bigsetI">i</a></span> <span class="kwd">in</span> <span class="id">X</span>) <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof336')">Proof.</span></div>
<div class="proofscript" id="proof336">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">bigcap_setU</span> <span class="id">bigcap_set1</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_setD1</span> (<span class="id">x</span> : <span class="id">I</span>) <span class="id">F</span> (<span class="id">X</span> : <span class="id">set</span> <span class="id">I</span>) : <span class="id">X</span> <span class="id">x</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">bigcup_</a></span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">X</span>) <span class="id">F</span> <span class="id">i</span> = <span class="id">F</span> <span class="id">x</span> `|` \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">X</span> `\ <span class="id">x</span>) <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof337')">Proof.</span></div>
<div class="proofscript" id="proof337">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Xx</span>; <span class="id">rewrite</span> -<span class="id">bigcup_setU1</span> <span class="id">setD1K</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcap_setD1</span> (<span class="id">x</span> : <span class="id">I</span>) <span class="id"><a href="mathcomp.classical.classical_sets.html#set">F</a></span> (<span class="id">X</span> : <span class="id">set</span> <span class="id">I</span>) : <span class="id"><a href="mathcomp.classical.classical_sets.html#bigop_lemmas.T">X</a></span> <span class="id">x</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">X</span>) <span class="id">F</span> <span class="id">i</span> = <span class="id">F</span> <span class="id">x</span> `&amp;` \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">X</span> `\ <span class="id">x</span>) <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof338')">Proof.</span></div>
<div class="proofscript" id="proof338">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Xx</span>; <span class="id">rewrite</span> -<span class="id">bigcap_setU1</span> <span class="id">setD1K</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setC_bigsetU</span> <span class="id">U</span> (<span class="id">s</span> : <span class="id">seq</span> <span class="id">T</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#bigop_lemmas.I">set</a></span> <span class="id">U</span>) (<span class="id">P</span> : <span class="id">pred</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">T</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;(~` \<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">t</span> &lt;- <span class="id">s</span> | <span class="id">P</span> <span class="id">t</span>) <span class="id">f</span> <span class="id">t</span>) = \<span class="id">big</span>[<span class="id">setI</span>/<span class="id">setT</span>]<span class="id">_</span>(<span class="id">t</span> &lt;- <span class="id">s</span> | <span class="id">P</span> <span class="id">t</span>) ~` <span class="id">f</span> <span class="id">t</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof339')">Proof.</span></div>
<div class="proofscript" id="proof339">
 <span class="kwd">by</span> <span class="id">elim</span>/<span class="id">big_rec2</span>: <span class="id">_</span> =&gt; [|<span class="id">i</span> <span class="id">X</span> <span class="id">Y</span> <span class="id">Pi</span> &lt;-]; <span class="id">rewrite</span> ?<span class="id">setC0</span> ?<span class="id">setCU</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setC_bigsetI</span> <span class="id">U</span> (<span class="id">s</span> : <span class="id">seq</span> <span class="id">T</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">set</span> <span class="id">U</span>) (<span class="id">P</span> : <span class="id">pred</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;(~` \<span class="id">big</span>[<span class="id">setI</span>/<span class="id">setT</span>]<span class="id">_</span>(<span class="id">t</span> &lt;- <span class="id">s</span> | <span class="id">P</span> <span class="id">t</span>) <span class="id">f</span> <span class="id">t</span>) =<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">t</span> &lt;- <span class="id">s</span> | <span class="id">P</span> <span class="id">t</span>) ~` <span class="id">f</span> <span class="id">t</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof340')">Proof.</span></div>
<div class="proofscript" id="proof340">
 <span class="kwd">by</span> <span class="id">elim</span>/<span class="id">big_rec2</span>: <span class="id">_</span> =&gt; [|<span class="id"><a href="mathcomp.classical.boolp.html#predeqP">i</a></span> <span class="id">X</span> <span class="id">Y</span> <span class="id">Pi</span> &lt;-]; <span class="id">rewrite</span> ?<span class="id">setCT</span> ?<span class="id">setCI</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcupDr</span> (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) (<span class="id">P</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">P</span> !=<span class="id">set0</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) (<span class="id">A</span> `\` <span class="id">F</span> <span class="id"><a name="bigcup_setM">i</a></span>) = <span class="id">A</span> `\` \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id"><a href="mathcomp.classical.classical_sets.html#bigop_lemmas.I">F</a></span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof341')">Proof.</span></div>
<div class="proofscript" id="proof341">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#set">PN0</a></span>; <span class="id">rewrite</span> <span class="id">setDE</span> <span class="id">setC_bigcup</span> -<span class="id">bigcapIr</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setD_bigcupl</span> (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) (<span class="id">P</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;\<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_setM_dep">bigcup_</a></span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> `\` <span class="id">A</span> = \<span class="id"><a name="bigcup_bigcup">bigcup_</a></span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) (<span class="id">F</span> <span class="id">i</span> `\` <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof342')">Proof.</span></div>
<div class="proofscript" id="proof342">
 <span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">rewrite</a></span> <span class="id">setDE</span> <span class="id">setI_bigcupl</span>; <span class="id">under</span> <span class="id">eq_bigcupr</span> <span class="id">do</span> <span class="id">rewrite</span> -<span class="id">setDE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_setM_dep</span> {<span class="id">J</span> : <span class="kwd">Type</span>} (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">J</span> -&gt; <span class="id">set</span> <span class="id">T</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">Q</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">J</span>) :<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">k</span> <span class="kwd">in</span> <span class="id">P</span> `*`` <span class="id">Q</span>) <span class="id">F</span> <span class="id">k</span>.1 <span class="id">k</span>.2 = \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) \<span class="id">bigcup_</span>(<span class="id">j</span> <span class="kwd">in</span> <span class="id">Q</span> <span class="id">i</span>) <span class="id">F</span> <span class="id">i</span> <span class="id">j</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof343')">Proof.</span></div>
<div class="proofscript" id="proof343">
<span class="id">apply</span>/<span class="id">predeqP</span> =&gt; <span class="id">x</span>; <span class="id">split</span>=&gt; [|[<span class="id">i</span> <span class="id">Pi</span> [<span class="id">j</span> <span class="id">Pj</span> <span class="id">Fijx</span>]]]; <span class="id">last</span> <span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">i</span>, <span class="id">j</span>).<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; [[/= <span class="id">i</span> <span class="id">j</span>] [<span class="id">Pi</span> <span class="id">Qj</span>] <span class="id">Fijx</span>]; <span class="kwd">exists</span> <span class="id">i</span> =&gt; //; <span class="kwd">exists</span> <span class="id">j</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_setM</span> {<span class="id">J</span> : <span class="kwd">Type</span>} (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">J</span> -&gt; <span class="id">set</span> <span class="id">T</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#setIUr">set</a></span> <span class="id">I</span>) (<span class="id">Q</span> : <span class="id">set</span> <span class="id">J</span>) :<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id"><a name="bigcapID">k</a></span> <span class="kwd">in</span> <span class="id">P</span> `*` <span class="id">Q</span>) <span class="id"><a href="mathcomp.classical.classical_sets.html#set">F</a></span> <span class="id">k</span>.1 <span class="id">k</span>.2 = \<span class="id">bigcup_</span>(<span class="id"><a href="mathcomp.classical.classical_sets.html#bigop_lemmas.T">i</a></span> <span class="kwd">in</span> <span class="id">P</span>) \<span class="id">bigcup_</span>(<span class="id">j</span> <span class="kwd">in</span> <span class="id">Q</span>) <span class="id">F</span> <span class="id">i</span> <span class="id">j</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof344')">Proof.</span></div>
<div class="proofscript" id="proof344">
 <span class="id">exact</span>: <span class="id">bigcup_setM_dep</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_bigcup</span> <span class="id">T</span>' (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) (<span class="id">P</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">G</span> : <span class="id">T</span> -&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#bigcap_setU">set</a></span> <span class="id">T</span>') :<br/>
&nbsp;&nbsp;\<span class="id"><a href="mathcomp.classical.classical_sets.html#setIUr">bigcup_</a></span>(<span class="id">i</span> <span class="kwd">in</span> \<span class="id">bigcup_</span>(<span class="id">n</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id"><a href="mathcomp.classical.classical_sets.html#bigop_lemmas">F</a></span> <span class="id">n</span>) <span class="id">G</span> <span class="id">i</span> =<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">n</span> <span class="kwd">in</span> <span class="id">P</span>) \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">F</span> <span class="id">n</span>) <span class="id">G</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof345')">Proof.</span></div>
<div class="proofscript" id="proof345">
<span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> [<span class="id">n</span> [<span class="id">m</span> ? ?] <span class="id">h</span>]; <span class="kwd">exists</span> <span class="id">m</span> =&gt; //; <span class="kwd">exists</span> <span class="id">n</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> [<span class="id">n</span> ? [<span class="id">m</span> ?]] <span class="id">h</span>; <span class="kwd">exists</span> <span class="id">m</span> =&gt; //; <span class="kwd">exists</span> <span class="id">n</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcupID</span> (<span class="id">Q</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) (<span class="id">P</span> : <span class="id">set</span> <span class="id">I</span>) :<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span> `&amp;` <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">Q</a></span>) <span class="id">F</span> <span class="id">i</span>) `|` (\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span> `&amp;` ~` <span class="id">Q</span>) <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof346')">Proof.</span></div>
<div class="proofscript" id="proof346">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">bigcup_setU</span> -<span class="id">setIUr</span> <span class="id">setUv</span> <span class="id">setIT</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcapID</span> (<span class="id">Q</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) (<span class="id">P</span> : <span class="id">set</span> <span class="id">I</span>) :<br/>
&nbsp;&nbsp;\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span> `&amp;` <span class="id">Q</span>) <span class="id">F</span> <span class="id">i</span>) `&amp;` (\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span> `&amp;` ~` <span class="id">Q</span>) <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof347')">Proof.</span></div>
<div class="proofscript" id="proof347">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">bigcap_setU</span> -<span class="id">setIUr</span> <span class="id">setUv</span> <span class="id">setIT</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">bigop_lemmas</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">bigcup_setD1</span> {<span class="id">T</span> <span class="id">I</span>} <span class="id">x</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">bigcap_setD1</span> {<span class="id">T</span> <span class="id">I</span>} <span class="id">x</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">bigcup2</span> <span class="id">T</span> (<span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">nat</span> -&gt; <span class="id">set</span> <span class="id">T</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="kwd">if</span> <span class="id">i</span> == 0 <span class="kwd">then</span> <span class="id">A</span> <span class="kwd">else</span> <span class="kwd">if</span> <span class="id">i</span> == 1 <span class="kwd">then</span> <span class="id">B</span> <span class="kwd">else</span> <span class="id">set0</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">bigcup2</span> <span class="id">T</span> <span class="id">A</span> <span class="id">B</span> <span class="id">n</span> /.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup2E</span> <span class="id">T</span> (<span class="id">A</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setC_bigcap">B</a></span> : <span class="id">set</span> <span class="id">T</span>) : \<span class="id">bigcup_i</span> (<span class="id">bigcup2</span> <span class="id">A</span> <span class="id">B</span>) <span class="id">i</span> = <span class="id">A</span> `|` <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof348')">Proof.</span></div>
<div class="proofscript" id="proof348">
<span class="id"><a href="mathcomp.classical.classical_sets.html#eq_bigcupr">rewrite</a></span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span>=&gt; [|[<span class="id">At</span>|<span class="id"><a href="mathcomp.classical.classical_sets.html#setCT">Bt</a></span>]]; [|<span class="kwd">by</span> <span class="kwd">exists</span> 0|<span class="kwd">by</span> <span class="kwd">exists</span> 1].<br/>
<span class="kwd">by</span> <span class="id">case</span>=&gt; -[<span class="id">_</span> <span class="id">At</span>|[<span class="id">_</span> <span class="id">Bt</span>|//]]; [<span class="id">left</span>|<span class="id">right</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup2inE</span> <span class="id">T</span> (<span class="id">A</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setC_inj">B</a></span> : <span class="id">set</span> <span class="id">T</span>) : \<span class="id">bigcup_</span>(<span class="id">i</span> &lt; 2) (<span class="id"><a href="mathcomp.classical.classical_sets.html#setCI">bigcup2</a></span> <span class="id">A</span> <span class="id">B</span>) <span class="id">i</span> = <span class="id">A</span> `|` <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof349')">Proof.</span></div>
<div class="proofscript" id="proof349">
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span>=&gt; [|[<span class="id">At</span>|<span class="id">Bt</span>]]; [|<span class="kwd">by</span> <span class="kwd">exists</span> 0|<span class="kwd">by</span> <span class="kwd">exists</span> 1].<br/>
<span class="kwd">by</span> <span class="id">case</span>=&gt; -[<span class="id">_</span> <span class="id">At</span>|[<span class="id">_</span> <span class="id">Bt</span>|//]]; [<span class="id">left</span>|<span class="id">right</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">bigcap2</span> <span class="id">T</span> (<span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">nat</span> -&gt; <span class="id">set</span> <span class="id">T</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="kwd">if</span> <span class="id">i</span> == 0 <span class="kwd">then</span> <span class="id">A</span> <span class="kwd">else</span> <span class="kwd">if</span> <span class="id">i</span> == 1 <span class="kwd">then</span> <span class="id">B</span> <span class="kwd">else</span> <span class="id">setT</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">bigcap2</span> <span class="id">T</span> <span class="id">A</span> <span class="id">B</span> <span class="id">n</span> /.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcap2E</span> <span class="id">T</span> (<span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> <span class="id">T</span>) : \<span class="id">bigcap_i</span> (<span class="id">bigcap2</span> <span class="id">A</span> <span class="id">B</span>) <span class="id">i</span> = <span class="id">A</span> `&amp;` <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof350')">Proof.</span></div>
<div class="proofscript" id="proof350">
<span class="id">apply</span>: <span class="id">setC_inj</span>; <span class="id">rewrite</span> <span class="id">setC_bigcap</span> <span class="id">setCI</span> -<span class="id">bigcup2E</span> /<span class="id">bigcap2</span> /<span class="id">bigcup2</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">eq_bigcupr</span> =&gt; -[|[|[]]]//=; <span class="id">rewrite</span> <span class="id">setCT</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcap2inE</span> <span class="id">T</span> (<span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> <span class="id">T</span>) : \<span class="id">bigcap_</span>(<span class="id">i</span> &lt; 2) (<span class="id">bigcap2</span> <span class="id">A</span> <span class="id">B</span>) <span class="id">i</span> = <span class="id">A</span> `&amp;` <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof351')">Proof.</span></div>
<div class="proofscript" id="proof351">
<span class="id">apply</span>: <span class="id">setC_inj</span>; <span class="id">rewrite</span> <span class="id">setC_bigcap</span> <span class="id">setCI</span> -<span class="id">bigcup2inE</span> /<span class="id">bigcap2</span> /<span class="id">bigcup2</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">eq_bigcupr</span> =&gt; // -[|[|[]]].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_sub</span> <span class="id">T</span> <span class="id">I</span> (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) (<span class="id">D</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">P</span> : <span class="id">set</span> <span class="id">I</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id">F</span> <span class="id">i</span> `&lt;=` <span class="id">D</span>) -&gt; \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> `&lt;=` <span class="id">D</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof352')">Proof.</span></div>
<div class="proofscript" id="proof352">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">FD</span> <span class="id">t</span> [<span class="id">n</span> <span class="id">Pn</span> <span class="id">Fnt</span>]; <span class="id">apply</span>: (<span class="id">FD</span> <span class="id">n</span>). Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sub_bigcap</span> <span class="id">T</span> <span class="id">I</span> (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) (<span class="id">D</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">P</span> : <span class="id">set</span> <span class="id">I</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id">D</span> `&lt;=` <span class="id">F</span> <span class="id">i</span>) -&gt; <span class="id">D</span> `&lt;=` \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof353')">Proof.</span></div>
<div class="proofscript" id="proof353">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">DF</span> <span class="id">t</span> <span class="id">Dt</span> <span class="id">n</span> <span class="id">Pn</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#eqEsubset">DF</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subset_bigcup</span> <span class="id">T</span> <span class="id">I</span> [<span class="id">P</span> : <span class="id">set</span> <span class="id">I</span>] [<span class="id">F</span> <span class="id">G</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>] :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id">F</span> <span class="id">i</span> `&lt;=` <span class="id">G</span> <span class="id">i</span>) -&gt;<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> `&lt;=` \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">G</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof354')">Proof.</span></div>
<div class="proofscript" id="proof354">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#set">FG</a></span>; <span class="id">apply</span>: <span class="id">bigcup_sub</span> =&gt; <span class="id">i</span> <span class="id">Pi</span> + /(<span class="id">FG</span> <span class="id">_</span> <span class="id">Pi</span>); <span class="id">apply</span>: <span class="id">bigcup_sup</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subset_bigcap</span> <span class="id">T</span> <span class="id">I</span> [<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#setC_bigcap">set</a></span> <span class="id">I</span>] [<span class="id">F</span> <span class="id">G</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>] :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a name="bigcap_image">P</a></span> <span class="id">i</span> -&gt; <span class="id">F</span> <span class="id">i</span> `&lt;=` <span class="id">G</span> <span class="id">i</span>) -&gt;<br/>
&nbsp;&nbsp;\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> `&lt;=` \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">G</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof355')">Proof.</span></div>
<div class="proofscript" id="proof355">
<span class="id">move</span>=&gt; <span class="id">FG</span>; <span class="id">apply</span>: <span class="id">sub_bigcap</span> =&gt; <span class="id">i</span> <span class="id">Pi</span> <span class="id">x</span> <span class="id">Fx</span>; <span class="id">apply</span>: <span class="id">FG</span> =&gt; //.<br/>
<span class="id">exact</span>: <span class="id">bigcap_inf</span> <span class="id">Fx</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_image</span> {<span class="id">aT</span> <span class="id">rT</span> <span class="id">I</span>} (<span class="id">P</span> : <span class="id">set</span> <span class="id">aT</span>) (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">rT</span>) :<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">x</span> <span class="kwd">in</span> <span class="id">f</span> @` <span class="id">P</span>) <span class="id">F</span> <span class="id">x</span> = \<span class="id">bigcup_</span>(<span class="id">x</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> (<span class="id">f</span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof356')">Proof.</span></div>
<div class="proofscript" id="proof356">
<span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span>=&gt; <span class="id">x</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">case</span>=&gt; <span class="id">j</span> [] <span class="id">i</span> <span class="id">pi</span> &lt;- <span class="id">Xfix</span>; <span class="kwd">exists</span> <span class="id">i</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>=&gt; <span class="id">i</span> <span class="id">Pi</span> <span class="id">Ffix</span>; <span class="kwd">exists</span> (<span class="id">f</span> <span class="id">i</span>); [<span class="kwd">exists</span> <span class="id">i</span>|].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcap_set_type</span> {<span class="id">I</span> <span class="id">T</span>} (<span class="id">P</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;&nbsp;\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> = \<span class="id">bigcap_</span>(<span class="id">j</span> : <span class="id">P</span>) <span class="id">F</span> (<span class="id">val</span> <span class="id">j</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof357')">Proof.</span></div>
<div class="proofscript" id="proof357">
 <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">setC_inj</span>; <span class="id">rewrite</span> !<span class="id">setC_bigcap</span> <span class="id">bigcup_set_type</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcap_image</span> {<span class="id">aT</span> <span class="id">rT</span> <span class="id">I</span>} (<span class="id">P</span> : <span class="id">set</span> <span class="id">aT</span>) (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">rT</span>) :<br/>
&nbsp;&nbsp;\<span class="id">bigcap_</span>(<span class="id">x</span> <span class="kwd">in</span> <span class="id">f</span> @` <span class="id">P</span>) <span class="id">F</span> <span class="id">x</span> = \<span class="id">bigcap_</span>(<span class="id">x</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">f</a></span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof358')">Proof.</span></div>
<div class="proofscript" id="proof358">
 <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">setC_inj</span>; <span class="id">rewrite</span> !<span class="id"><a href="mathcomp.classical.classical_sets.html#setC_bigcap">setC_bigcap</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setC_bigsetI">bigcup_image</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_fset</span> {<span class="id">I</span> : <span class="id">choiceType</span>} {<span class="id">U</span> : <span class="kwd">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">U</span>) (<span class="id">X</span> : {<span class="id">fset</span> <span class="id">I</span>}) :<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> [<span class="id">set</span> <span class="id">i</span> | <span class="id">i</span> \<span class="kwd">in</span> <span class="id">X</span>]) <span class="id">F</span> <span class="id">i</span> = \<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">i</span> &lt;- <span class="id">X</span>) <span class="id">F</span> <span class="id">i</span> :&gt; <span class="id">set</span> <span class="id">U</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof359')">Proof.</span></div>
<div class="proofscript" id="proof359">
<span class="id">elim</span>/<span class="id">finSet_rect</span>: <span class="id">X</span> =&gt; <span class="id">X</span> <span class="id">IHX</span>; <span class="id">have</span> [-&gt;|[<span class="id">x</span> <span class="id">xX</span>]] := <span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_setU1">fset_0Vmem</a></span> <span class="id">X</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big_seq_fset0</span> -<span class="id">subset0</span> =&gt; <span class="id">x</span> [].<br/>
<span class="id">rewrite</span> -(<span class="id"><a href="mathcomp.classical.classical_sets.html#set">fsetD1K</a></span> <span class="id">xX</span>) <span class="id">set_fsetU</span> <span class="id">set_fset1</span> <span class="id">big_fsetU1</span> ?<span class="id">inE</span> ?<span class="id">eqxx</span>//=.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">bigcup_setU1</span> <span class="id">IHX</span>// <span class="id">fproperD1</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcap_fset</span> {<span class="id">I</span> : <span class="id">choiceType</span>} {<span class="id">U</span> : <span class="kwd">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">F</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#bigcap_setU1">I</a></span> -&gt; <span class="id">set</span> <span class="id">U</span>) (<span class="id">X</span> : {<span class="id">fset</span> <span class="id">I</span>}) :<br/>
&nbsp;&nbsp;\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> [<span class="id">set</span> <span class="id">i</span> | <span class="id">i</span> \<span class="kwd">in</span> <span class="id">X</span>]) <span class="id">F</span> <span class="id">i</span> = \<span class="id">big</span>[<span class="id">setI</span>/<span class="id">setT</span>]<span class="id">_</span>(<span class="id">i</span> &lt;- <span class="id">X</span>) <span class="id">F</span> <span class="id">i</span> :&gt; <span class="id">set</span> <span class="id">U</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof360')">Proof.</span></div>
<div class="proofscript" id="proof360">
 <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">setC_inj</span>; <span class="id">rewrite</span> <span class="id">setC_bigcap</span> <span class="id">setC_bigsetI</span> <span class="id">bigcup_fset</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_fsetU1</span> {<span class="id">T</span> <span class="id">U</span> : <span class="id">choiceType</span>} (<span class="id">F</span> : <span class="id">T</span> -&gt; <span class="id">set</span> <span class="id">U</span>) (<span class="id">x</span> : <span class="id">T</span>) (<span class="id">X</span> : {<span class="id">fset</span> <span class="id">T</span>}) :<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> [<span class="id">set</span> <span class="id">j</span> | <span class="id">j</span> \<span class="kwd">in</span> <span class="id">x</span> |` <span class="id">X</span>]%<span class="id">fset</span>) <span class="id">F</span> <span class="id">i</span> =<br/>
&nbsp;&nbsp;<span class="id">F</span> <span class="id">x</span> `|` \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> [<span class="id">set</span> <span class="id">j</span> | <span class="id">j</span> \<span class="kwd">in</span> <span class="id">X</span>]) <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof361')">Proof.</span></div>
<div class="proofscript" id="proof361">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">set_fsetU1</span> <span class="id">bigcup_setU1</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcap_fsetU1</span> {<span class="id">T</span> <span class="id">U</span> : <span class="id">choiceType</span>} (<span class="id">F</span> : <span class="id">T</span> -&gt; <span class="id">set</span> <span class="id">U</span>) (<span class="id">x</span> : <span class="id">T</span>) (<span class="id">X</span> : {<span class="id">fset</span> <span class="id">T</span>}) :<br/>
&nbsp;&nbsp;\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> [<span class="id">set</span> <span class="id">j</span> | <span class="id">j</span> \<span class="kwd">in</span> <span class="id">x</span> |` <span class="id">X</span>]%<span class="id">fset</span>) <span class="id">F</span> <span class="id">i</span> =<br/>
&nbsp;&nbsp;<span class="id">F</span> <span class="id">x</span> `&amp;` \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> [<span class="id">set</span> <span class="id">j</span> | <span class="id">j</span> \<span class="kwd">in</span> <span class="id">X</span>]) <span class="id">F</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_fsetD1">i</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof362')">Proof.</span></div>
<div class="proofscript" id="proof362">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">set_fsetU1</span> <span class="id"><a name="bigcup_seq">bigcap_setU1</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_fsetD1</span> {<span class="id">T</span> <span class="id">U</span> : <span class="id">choiceType</span>} (<span class="id">x</span> : <span class="id">T</span>) (<span class="id">F</span> : <span class="id">T</span> -&gt; <span class="id">set</span> <span class="id">U</span>) (<span class="id">X</span> : {<span class="id">fset</span> <span class="id">T</span>}) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">x</span> \<span class="kwd">in</span> <span class="id">X</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> [<span class="id">set</span> <span class="id">i</span> | <span class="id">i</span> \<span class="kwd">in</span> <span class="id">X</span>]%<span class="id">fset</span>) <span class="id">F</span> <span class="id">i</span> =<br/>
&nbsp;&nbsp;<span class="id">F</span> <span class="id">x</span> `|` \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> [<span class="id">set</span> <span class="id">i</span> | <span class="id">i</span> \<span class="kwd">in</span> <span class="id">X</span> `\ <span class="id">x</span>]%<span class="id">fset</span>) <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof363')">Proof.</span></div>
<div class="proofscript" id="proof363">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Xx</span>; <span class="id">rewrite</span> (<span class="id">bigcup_setD1</span> <span class="id">x</span>)// <span class="id">set_fsetD1</span>. Qed.</div>
<span class="kwd">Arguments</span> <span class="id">bigcup_fsetD1</span> {<span class="id">T</span> <span class="id">U</span>} <span class="id">x</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcap_fsetD1</span> {<span class="id">T</span> <span class="id">U</span> : <span class="id">choiceType</span>} (<span class="id">x</span> : <span class="id">T</span>) (<span class="id">F</span> : <span class="id">T</span> -&gt; <span class="id">set</span> <span class="id">U</span>) (<span class="id">X</span> : {<span class="id">fset</span> <span class="id">T</span>}) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">x</span> \<span class="kwd">in</span> <span class="id">X</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> [<span class="id">set</span> <span class="id">i</span> | <span class="id">i</span> \<span class="kwd">in</span> <span class="id">X</span>]%<span class="id">fset</span>) <span class="id">F</span> <span class="id">i</span> =<br/>
&nbsp;&nbsp;<span class="id">F</span> <span class="id">x</span> `&amp;` \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> [<span class="id">set</span> <span class="id">i</span> | <span class="id">i</span> \<span class="kwd">in</span> <span class="id">X</span> `\ <span class="id">x</span>]%<span class="id">fset</span>) <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof364')">Proof.</span></div>
<div class="proofscript" id="proof364">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Xx</span>; <span class="id">rewrite</span> (<span class="id">bigcap_setD1</span> <span class="id">x</span>)// <span class="id">set_fsetD1</span>. Qed.</div>
<span class="kwd">Arguments</span> <span class="id">bigcup_fsetD1</span> {<span class="id">T</span> <span class="id">U</span>} <span class="id">x</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">bigcup_seq</a></span>.<br/>
<span class="kwd">Variables</span> (<span class="id">T</span> : <span class="id">choiceType</span>) (<span class="id">U</span> : <span class="kwd">Type</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_seq_cond</span> (<span class="id">s</span> : <span class="id">seq</span> <span class="id">T</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">set</span> <span class="id">U</span>) (<span class="id">P</span> : <span class="id">pred</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">t</span> <span class="kwd">in</span> [<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">set</a></span> <span class="id">x</span> | (<span class="id">x</span> \<span class="kwd">in</span> <span class="id">s</span>) &amp;&amp; <span class="id">P</span> <span class="id">x</span>]) (<span class="id">f</span> <span class="id">t</span>) =<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id"><a name="bigcup_seq">_</a></span>(<span class="id">t</span> &lt;- <span class="id">s</span> | <span class="id">P</span> <span class="id">t</span>) (<span class="id">f</span> <span class="id">t</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof365')">Proof.</span></div>
<div class="proofscript" id="proof365">
<span class="id">elim</span>: <span class="id">s</span> =&gt; [/=|<span class="id">h</span> <span class="id">s</span> <span class="id">ih</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">set_nil</span> <span class="id">bigcup_set0</span> <span class="id">big_nil</span>.<br/>
<span class="id">rewrite</span> <span class="id">big_cons</span> -<span class="id">ih</span> <span class="id">predeqE</span> =&gt; <span class="id">u</span>; <span class="id">split</span>=&gt; [[<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#xpredT">t</a></span> /<span class="id">andP</span>[]]|].<br/>
- <span class="id">rewrite</span> <span class="id">inE</span> =&gt; /<span class="id">orP</span>[/<span class="id">eqP</span> -&gt;{<span class="id">t</span>} -&gt; <span class="id">fhu</span>|<span class="id"><a href="mathcomp.classical.boolp.html#funeqE">ts</a></span> <span class="id">Pt</span> <span class="id">ftu</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbT">left</a></span>.<br/>
&nbsp;&nbsp;<span class="id">case</span>: <span class="id">ifPn</span> =&gt; <span class="id">Ph</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">right</span>; <span class="kwd">exists</span> <span class="id">t</span> =&gt; //; <span class="id">apply</span>/<span class="id">andP</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">t</span> =&gt; //; <span class="id">apply</span>/<span class="id">andP</span>; <span class="id">split</span>.<br/>
- <span class="id">case</span>: <span class="id">ifPn</span> =&gt; [<span class="id">Ph</span> [<span class="id"><a href="mathcomp.classical.classical_sets.html#setI">fhu</a></span>|[<span class="id"><a href="mathcomp.classical.classical_sets.html#setT">t</a></span> /<span class="id">andP</span>[<span class="id">ts</span> <span class="id">Pt</span>] <span class="id">ftu</span>]]|<span class="id">Ph</span> [<span class="id">t</span> /<span class="id">andP</span>[<span class="id">ts</span> <span class="id">Pt</span> <span class="id">ftu</span>]]].<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">h</span> =&gt; //; <span class="id">apply</span>/<span class="id">andP</span>; <span class="id">split</span> =&gt; //; <span class="id">rewrite</span> <span class="id">mem_head</span>.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">t</span> =&gt; //; <span class="id">apply</span>/<span class="id">andP</span>; <span class="id">split</span> =&gt; //; <span class="id">rewrite</span> <span class="id">inE</span> <span class="id">orbC</span> <span class="id">ts</span>.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">t</span> =&gt; //; <span class="id">apply</span>/<span class="id">andP</span>; <span class="id">split</span> =&gt; //; <span class="id">rewrite</span> <span class="id">inE</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setC_inj">orbC</a></span> <span class="id">ts</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_seq</span> (<span class="id">s</span> : <span class="id">seq</span> <span class="id">T</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">set</span> <span class="id">U</span>) :<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">t</span> <span class="kwd">in</span> [<span class="id">set</span>` <span class="id">s</span>]) (<span class="id">f</span> <span class="id">t</span>) = \<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">t</span> &lt;- <span class="id">s</span>) (<span class="id">f</span> <span class="id">t</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof366')">Proof.</span></div>
<div class="proofscript" id="proof366">
<span class="id">rewrite</span> -(<span class="id">bigcup_seq_cond</span> <span class="id">s</span> <span class="id">f</span> <span class="id">xpredT</span>); <span class="id">congr</span> (\<span class="id">bigcup_</span>(<span class="id">t</span> <span class="kwd">in</span> <span class="id">mkset</span> <span class="id">_</span>) <span class="id">_</span>).<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">t</span>; <span class="id">rewrite</span> <span class="id">andbT</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcap_seq_cond</span> (<span class="id">s</span> : <span class="id">seq</span> <span class="id">T</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">set</span> <span class="id">U</span>) (<span class="id">P</span> : <span class="id">pred</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;\<span class="id">bigcap_</span>(<span class="id">t</span> <span class="kwd">in</span> [<span class="id">set</span> <span class="id">x</span> | (<span class="id">x</span> \<span class="kwd">in</span> <span class="id">s</span>) &amp;&amp; <span class="id">P</span> <span class="id">x</span>]) (<span class="id">f</span> <span class="id">t</span>) =<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">setI</span>/<span class="id">setT</span>]<span class="id">_</span>(<span class="id">t</span> &lt;- <span class="id">s</span> | <span class="id">P</span> <span class="id"><a name="bigcap_set">t</a></span>) (<span class="id">f</span> <span class="id">t</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof367')">Proof.</span></div>
<div class="proofscript" id="proof367">
 <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">setC_inj</span>; <span class="id">rewrite</span> <span class="id">setC_bigcap</span> <span class="id">setC_bigsetI</span> <span class="id">bigcup_seq_cond</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcap_seq</span> (<span class="id">s</span> : <span class="id">seq</span> <span class="id">T</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">set</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#bigcap_seq_cond">U</a></span>) :<br/>
&nbsp;&nbsp;\<span class="id">bigcap_</span>(<span class="id">t</span> <span class="kwd">in</span> [<span class="id">set</span>` <span class="id">s</span>]) (<span class="id">f</span> <span class="id">t</span>) = \<span class="id">big</span>[<span class="id">setI</span>/<span class="id">setT</span>]<span class="id">_</span>(<span class="id">t</span> &lt;- <span class="id">s</span>) (<span class="id">f</span> <span class="id">t</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof368')">Proof.</span></div>
<div class="proofscript" id="proof368">
 <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">setC_inj</span>; <span class="id">rewrite</span> <span class="id">setC_bigcap</span> <span class="id">setC_bigsetI</span> <span class="id">bigcup_seq</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">bigcup_seq</span>.<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.4",<span class="id">note</span>="<span class="id">Use</span> <span class="id">bigcup_seq</span> <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#mem_set">bigcup_set</a></span> := <span class="id">bigcup_seq</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.4",<span class="id">note</span>="<span class="id">Use</span> <span class="id">bigcup_seq_cond</span> <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">bigcup_set_cond</span> := <span class="id">bigcup_seq_cond</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.4",<span class="id">note</span>="<span class="id">Use</span> <span class="id">bigcap_seq</span> <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">bigcap_set</span> := <span class="id">bigcap_seq</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id"><a href="mathcomp.classical.classical_sets.html#smallest.G">analysis</a></span> 0.6.4",<span class="id">note</span>="<span class="id">Use</span> <span class="id">bigcap_seq_cond</span> <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">bigcap_set_cond</span> := <span class="id">bigcap_seq_cond</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_pred</span> [<span class="id">T</span> : <span class="id">finType</span>] [<span class="id">U</span> : <span class="kwd">Type</span>] (<span class="id">P</span> : {<span class="id">pred</span> <span class="id">T</span>}) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">set</span> <span class="id">U</span>) :<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id"><a name="smallest_sub">t</a></span> <span class="kwd">in</span> [<span class="id">set</span>` <span class="id">P</span>]) <span class="id">f</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#smallest.C">t</a></span> = \<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id"><a href="mathcomp.classical.classical_sets.html#smallest">_</a></span>(<span class="id">t</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">f</span> <span class="id">t</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof369')">Proof.</span></div>
<div class="proofscript" id="proof369">
<span class="id">apply</span>/<span class="id">predeqP</span> =&gt; <span class="id">u</span>; <span class="id">split</span>=&gt; [[<span class="id">x</span> <span class="id">Px</span> <span class="id">fxu</span>]|]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#smallest">bigD1</a></span> <span class="id">x</span>)//; <span class="id">left</span>.<br/>
<span class="id">move</span>=&gt; /<span class="id">mem_set</span>; <span class="id">rewrite</span> (@<span class="id">big_morph</span> <span class="id">_</span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#smallest_sub">X</a></span> =&gt; <span class="id">u</span> \<span class="kwd">in</span> <span class="id">X</span>) <span class="id">false</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#sub_smallest">orb</a></span>).<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big_has_cond</span> =&gt; /<span class="id">hasP</span>[<span class="id">x</span> <span class="id">_</span> /<span class="id">andP</span>[<span class="id">xP</span>]]; <span class="id">rewrite</span> <span class="id">inE</span> =&gt; <span class="id">ufx</span>; <span class="kwd">exists</span> <span class="id">x</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; /= <span class="id">x</span> <span class="id">y</span>; <span class="id">apply</span>/<span class="id">idP</span>/<span class="id">orP</span>; <span class="id">rewrite</span> !<span class="id">inE</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">in_set0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">smallest</span>.<br/>
<span class="kwd">Context</span> {<span class="id">T</span>} (<span class="id">C</span> : <span class="id">set</span> <span class="id">T</span> -&gt; <span class="kwd">Prop</span>) (<span class="id">G</span> : <span class="id">set</span> <span class="id">T</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">smallest</span> := \<span class="id">bigcap_</span>(<span class="id">A</span> <span class="kwd">in</span> [<span class="id">set</span> <span class="id">M</span> | <span class="id">C</span> <span class="id">M</span> /\ <span class="id">G</span> `&lt;=` <span class="id">M</span>]) <span class="id">A</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">sub_smallest</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">X</a></span> : <span class="id">X</span> `&lt;=` <span class="id">G</span> -&gt; <span class="id">X</span> `&lt;=` <span class="id">smallest</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof370')">Proof.</span></div>
<div class="proofscript" id="proof370">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">XG</span> <span class="id">A</span> /<span class="id">XG</span> <span class="id">GA</span> <span class="id">Y</span> /= [<span class="id">PY</span>]; <span class="id">apply</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sub_gen_smallest</span> : <span class="id">G</span> `&lt;=` <span class="id">smallest</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof371')">Proof.</span></div>
<div class="proofscript" id="proof371">
 <span class="id">exact</span>: <span class="id">sub_smallest</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">smallest_sub</span> <span class="id">X</span> : <span class="id">C</span> <span class="id">X</span> -&gt; <span class="id">G</span> `&lt;=` <span class="id">X</span> -&gt; <span class="id">smallest</span> `&lt;=` <span class="id">X</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof372')">Proof.</span></div>
<div class="proofscript" id="proof372">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">XC</span> <span class="id">GX</span> <span class="id">A</span>; <span class="id">apply</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">smallest_id</span> : <span class="id">C</span> <span class="id">G</span> -&gt; <span class="id">smallest</span> = <span class="id">G</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof373')">Proof.</span></div>
<div class="proofscript" id="proof373">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Cs</span>; <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>; [<span class="id">apply</span>: <span class="id">smallest_sub</span>|<span class="id">apply</span>: <span class="id">sub_smallest</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">smallest</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sub_gen_smallest</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">sub_smallest2r</span> {<span class="id">T</span>} (<span class="id">C</span> : <span class="id">set</span> <span class="id">T</span>-&gt; <span class="kwd">Prop</span>) <span class="id">G1</span> <span class="id">G2</span> :<br/>
&nbsp;&nbsp;&nbsp;<span class="id">C</span> (<span class="id">smallest</span> <span class="id">C</span> <span class="id">G2</span>) -&gt; <span class="id">G1</span> `&lt;=` <span class="id">G2</span> -&gt; <span class="id">smallest</span> <span class="id">C</span> <span class="id">G1</span> `&lt;=` <span class="id">smallest</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setC_bigcap">C</a></span> <span class="id">G2</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof374')">Proof.</span></div>
<div class="proofscript" id="proof374">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; *; <span class="id">apply</span>: <span class="id">smallest_sub</span>=&gt; //; <span class="id">apply</span>: <span class="id">sub_smallest</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setU">sub_smallest2l</a></span> {<span class="id">T</span>} (<span class="id">C1</span> <span class="id">C2</span> : <span class="id">set</span> <span class="id">T</span> -&gt; <span class="kwd">Prop</span>) :<br/>
&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">G</span>, <span class="id">C2</span> <span class="id">G</span> -&gt; <span class="id">C1</span> <span class="id">G</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">G</span>, <span class="id">smallest</span> <span class="id">C1</span> <span class="id">G</span> `&lt;=` <span class="id">smallest</span> <span class="id">C2</span> <span class="id">G</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof375')">Proof.</span></div>
<div class="proofscript" id="proof375">
 <span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setU">move</a></span>=&gt; <span class="id">C12</span> <span class="id">G</span> <span class="id">X</span> <span class="id">sX</span> <span class="id">M</span> [/<span class="id">C12</span> <span class="id">C1M</span> <span class="id">GM</span>]; <span class="id">apply</span>: <span class="id">sX</span>. Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">bigop_nat_lemmas</span>.<br/>
<span class="kwd">Context</span> {<span class="id">T</span> : <span class="kwd">Type</span>}.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">F</span> : <span class="id">nat</span> -&gt; <span class="id">set</span> <span class="id">T</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_mkord</span> <span class="id">n</span> <span class="id">F</span> : \<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup2">bigcup_</a></span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">i</span> = \<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof376')">Proof.</span></div>
<div class="proofscript" id="proof376">
<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup2inE">rewrite</a></span> -(<span class="id">big_mkord</span> <span class="id">xpredT</span> <span class="id">F</span>) -<span class="id">bigcup_seq</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">eq_bigcupl</span>; <span class="id">split</span>=&gt; <span class="id">i</span>; <span class="id">rewrite</span> /= <span class="id">mem_index_iota</span> <span class="id">leq0n</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcap_mkord</span> <span class="id">n</span> <span class="id">F</span> : \<span class="id">bigcap_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">i</span> = \<span class="id">big</span>[<span class="id">setI</span>/<span class="id">setT</span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof377')">Proof.</span></div>
<div class="proofscript" id="proof377">
 <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">setC_inj</span>; <span class="id">rewrite</span> <span class="id">setC_bigsetI</span> <span class="id">setC_bigcap</span> <span class="id">bigcup_mkord</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigsetU_sup</span> <span class="id">i</span> <span class="id">n</span> <span class="id">F</span> : (<span class="id">i</span> &lt; <span class="id">n</span>)%<span class="id">N</span> -&gt; <span class="id">F</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_setU">i</a></span> `&lt;=` \<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">j</span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">j</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof378')">Proof.</span></div>
<div class="proofscript" id="proof378">
 <span class="kwd">by</span> <span class="id">move</span>: <span class="id">n</span> =&gt; // <span class="id">n</span> <span class="id">ni</span>; <span class="id">rewrite</span> -<span class="id">bigcup_mkord</span>; <span class="id">exact</span>/<span class="id">bigcup_sup</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigsetU_bigcup</span> <span class="id">F</span> <span class="id">n</span> : \<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">i</span> `&lt;=` \<span class="id">bigcup_k</span> <span class="id">F</span> <span class="id">k</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof379')">Proof.</span></div>
<div class="proofscript" id="proof379">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">bigcup_mkord</span> =&gt; <span class="id">x</span> [<span class="id">k</span> <span class="id">_</span> <span class="id">Fkx</span>]; <span class="kwd">exists</span> <span class="id">k</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigsetU_bigcup2</span> (<span class="id">A</span> <span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#setC_bigcap">set</a></span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;&nbsp;\<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_splitn">big</a></span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">i</span> &lt; 2) <span class="id">bigcup2</span> <span class="id">A</span> <span class="id">B</span> <span class="id">i</span> = <span class="id">A</span> `|` <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof380')">Proof.</span></div>
<div class="proofscript" id="proof380">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">bigcup_mkord</span> <span class="id">bigcup2inE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigsetI_bigcap2</span> (<span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">setI</span>/<span class="id">setT</span>]<span class="id">_</span>(<span class="id">i</span> &lt; 2) <span class="id">bigcap2</span> <span class="id">A</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_mkord">B</a></span> <span class="id">i</span> = <span class="id">A</span> `&amp;` <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof381')">Proof.</span></div>
<div class="proofscript" id="proof381">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">bigcap_mkord</span> <span class="id">bigcap2inE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcup_splitn</span> <span class="id">n</span> <span class="id">F</span> :<br/>
&nbsp;&nbsp;\<span class="id">bigcup_i</span> <span class="id">F</span> <span class="id">i</span> = \<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">F</a></span> <span class="id">i</span> `|` \<span class="id">bigcup_i</span> <span class="id">F</span> (<span class="id">n</span> + <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof382')">Proof.</span></div>
<div class="proofscript" id="proof382">
<span class="id">rewrite</span> -<span class="id">bigcup_mkord</span> -(<span class="id">bigcup_image</span> <span class="id">_</span> (<span class="id">addn</span> <span class="id">n</span>)) -<span class="id">bigcup_setU</span>.<br/>
<span class="id">apply</span>: <span class="id">eq_bigcupl</span>; <span class="id">split</span>=&gt; // <span class="id">k</span> <span class="id">_</span>.<br/>
<span class="id">have</span> [<span class="id">ltkn</span>|<span class="id">lenk</span>] := <span class="id">ltnP</span> <span class="id">k</span> <span class="id">n</span>; [<span class="id">left</span> =&gt; //|<span class="id">right</span>].<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">k</span> - <span class="id">n</span>); <span class="id">rewrite</span> // <span class="id">subnKC</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcap_splitn</span> <span class="id">n</span> <span class="id">F</span> :<br/>
&nbsp;&nbsp;\<span class="id">bigcap_i</span> <span class="id">F</span> <span class="id">i</span> = \<span class="id">big</span>[<span class="id">setI</span>/<span class="id">setT</span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">i</span> `&amp;` \<span class="id">bigcap_i</span> <span class="id">F</span> (<span class="id">n</span> + <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof383')">Proof.</span></div>
<div class="proofscript" id="proof383">
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">setC_inj</span>; <span class="id">rewrite</span> <span class="id">setCI</span> !<span class="id">setC_bigcap</span> (<span class="id">bigcup_splitn</span> <span class="id">n</span>) <span class="id">setC_bigsetI</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subset_bigsetU</span> <span class="id">F</span> :<br/>
&nbsp;&nbsp;{<span class="id">homo</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">i</span>) : <span class="id">n</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">m</a></span> / (<span class="id">n</span> &lt;= <span class="id">m</span>) &gt;-&gt; <span class="id">n</span> `&lt;=` <span class="id">m</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof384')">Proof.</span></div>
<div class="proofscript" id="proof384">
<span class="id">move</span>=&gt; <span class="id">m</span> <span class="id">n</span> <span class="id">mn</span>; <span class="id">rewrite</span> -!<span class="id">bigcup_mkord</span> =&gt; <span class="id">x</span> [<span class="id">i</span> <span class="id">im</span> <span class="id">Fix</span>].<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">i</span> =&gt; //=; <span class="id">rewrite</span> (<span class="id">leq_trans</span> <span class="id">im</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subset_bigsetI</span> <span class="id">F</span> :<br/>
&nbsp;&nbsp;{<span class="id">homo</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">big</span>[<span class="id">setI</span>/<span class="id">setT</span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id"><a href="mathcomp.classical.classical_sets.html#bigop_nat_lemmas">n</a></span>) <span class="id">F</span> <span class="id">i</span>) : <span class="id">n</span> <span class="id">m</span> / (<span class="id">n</span> &lt;= <span class="id">m</span>) &gt;-&gt; <span class="id">m</span> `&lt;=` <span class="id">n</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof385')">Proof.</span></div>
<div class="proofscript" id="proof385">
<span class="id">move</span>=&gt; <span class="id">m</span> <span class="id">n</span> <span class="id">mn</span>; <span class="id">rewrite</span> -<span class="id">setCS</span> !<span class="id">setC_bigsetI</span>.<br/>
<span class="id">exact</span>: (@<span class="id">subset_bigsetU</span> (<span class="id">setC</span> \<span class="id">o</span> <span class="id">F</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subset_bigsetU_cond</span> (<span class="id">P</span> : <span class="id">pred</span> <span class="id">nat</span>) <span class="id">F</span> :<br/>
&nbsp;&nbsp;{<span class="id">homo</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">F</span> <span class="id">i</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id">n</span> <span class="id">m</span> / (<span class="id">n</span> &lt;= <span class="id">m</span>) &gt;-&gt; <span class="id">n</span> `&lt;=` <span class="id"><a name="is_totalfun">m</a></span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof386')">Proof.</span></div>
<div class="proofscript" id="proof386">
<span class="id">move</span>=&gt; <span class="id">n</span> <span class="id">m</span> <span class="id">nm</span>; <span class="id">rewrite</span> <span class="id">big_mkcond</span> [<span class="kwd">in</span> <span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span> `&lt;=` <span class="id">X</span>]<span class="id">big_mkcond</span>/=.<br/>
<span class="id">exact</span>: (@<span class="id">subset_bigsetU</span> (<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="kwd">if</span> <span class="id">P</span> <span class="id">i</span> <span class="kwd">then</span> <span class="id">F</span> <span class="id">i</span> <span class="kwd">else</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">_</a></span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subset_bigsetI_cond</span> (<span class="id">P</span> : <span class="id">pred</span> <span class="id">nat</span>) <span class="id">F</span> :<br/>
&nbsp;&nbsp;{<span class="id">homo</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">big</span>[<span class="id">setI</span>/<span class="id">setT</span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">F</span> <span class="id">i</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id">n</span> <span class="id">m</span> / (<span class="id">n</span> &lt;= <span class="id">m</span>) &gt;-&gt; <span class="id">m</span> `&lt;=` <span class="id">n</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof387')">Proof.</span></div>
<div class="proofscript" id="proof387">
<span class="id">move</span>=&gt; <span class="id">n</span> <span class="id">m</span> <span class="id">nm</span>; <span class="id">rewrite</span> <span class="id">big_mkcond</span> [<span class="kwd">in</span> <span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span> `&lt;=` <span class="id">X</span>]<span class="id">big_mkcond</span>/=.<br/>
<span class="id">exact</span>: (@<span class="id">subset_bigsetI</span> (<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="kwd">if</span> <span class="id">P</span> <span class="id">i</span> <span class="kwd">then</span> <span class="id">F</span> <span class="id">i</span> <span class="kwd">else</span> <span class="id">_</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">bigop_nat_lemmas</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">is_subset1</span> {<span class="id">T</span>} (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) := <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id">A</span> <span class="id">x</span> -&gt; <span class="id">A</span> <span class="id">y</span> -&gt; <span class="id">x</span> = <span class="id"><a href="mathcomp.classical.classical_sets.html#xget">y</a></span>.<br/>
<span class="kwd">Definition</span> <span class="id">is_fun</span> {<span class="id">T1</span> <span class="id">T2</span>} (<span class="id">f</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#xget">T1</a></span> -&gt; <span class="id">T2</span> -&gt; <span class="kwd">Prop</span>) := <span class="id">Logic.all</span> (<span class="id">is_subset1</span> \<span class="id">o</span> <span class="id">f</span>).<br/>
<span class="kwd">Definition</span> <span class="id">is_total</span> {<span class="id">T1</span> <span class="id">T2</span>} (<span class="id">f</span> : <span class="id">T1</span> -&gt; <span class="id">T2</span> -&gt; <span class="kwd">Prop</span>) := <span class="id">Logic.all</span> (<span class="id">nonempty</span> \<span class="id">o</span> <span class="id">f</span>).<br/>
<span class="kwd">Definition</span> <span class="id">is_totalfun</span> {<span class="id">T1</span> <span class="id">T2</span>} (<span class="id">f</span> : <span class="id">T1</span> -&gt; <span class="id">T2</span> -&gt; <span class="kwd">Prop</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id">f</span> <span class="id">x</span> !=<span class="id">set0</span> /\ <span class="id">is_subset1</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#contra_not">f</a></span> <span class="id">x</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">xget</span> {<span class="id">T</span> : <span class="id">choiceType</span>} <span class="id">x0</span> (<span class="id">P</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">T</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">pselect</span> (<span class="kwd">exists</span> <span class="id">x</span> : <span class="id">T</span>, `[&lt;<span class="id"><a href="mathcomp.classical.classical_sets.html#set">P</a></span> <span class="id">x</span>&gt;]) <span class="id">isn</span>'<span class="id">t</span> <span class="id">left</span> <span class="id">exP</span> <span class="kwd">then</span> <span class="id">x0</span><br/>
&nbsp;&nbsp;<span class="kwd">else</span> <span class="id">projT1</span> (<span class="id">sigW</span> <span class="id">exP</span>).<br/>
<br/>
<span class="kwd">CoInductive</span> <span class="id">xget_spec</span> {<span class="id">T</span> : <span class="id">choiceType</span>} <span class="id">x0</span> (<span class="id">P</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">T</span> -&gt; <span class="kwd">Prop</span> -&gt; <span class="kwd">Type</span> :=<br/>
| <span class="id">XGetSome</span> <span class="id">x</span> <span class="id">of</span> <span class="id">x</span> = <span class="id">xget</span> <span class="id">x0</span> <span class="id">P</span> &amp; <span class="id">P</span> <span class="id">x</span> : <span class="id">xget_spec</span> <span class="id">x0</span> <span class="id">P</span> <span class="id">x</span> <span class="id">True</span><br/>
| <span class="id">XGetNone</span> <span class="id">of</span> (<span class="kwd">forall</span> <span class="id">x</span>, ~ <span class="id">P</span> <span class="id">x</span>) : <span class="id">xget_spec</span> <span class="id">x0</span> <span class="id">P</span> <span class="id">x0</span> <span class="id">False</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">xgetP</a></span> {<span class="id">T</span> : <span class="id">choiceType</span>} <span class="id">x0</span> (<span class="id">P</span> : <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.classical_sets.html#xget">xget_spec</a></span> <span class="id">x0</span> <span class="id">P</span> (<span class="id">xget</span> <span class="id">x0</span> <span class="id">P</span>) (<span class="id">P</span> (<span class="id">xget</span> <span class="id">x0</span> <span class="id">P</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof388')">Proof.</span></div>
<div class="proofscript" id="proof388">
<span class="id">move</span>: (<span class="id">erefl</span> (<span class="id">xget</span> <span class="id">x0</span> <span class="id">P</span>)); <span class="id">set</span> <span class="id">y</span> := {2}(<span class="id">xget</span> <span class="id">x0</span> <span class="id">P</span>).<br/>
<span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#set">xget</a></span>; <span class="id">case</span>: <span class="id">pselect</span> =&gt; /= [?|<span class="id">neqP</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>: <span class="id">sigW</span> =&gt; <span class="id">x</span> /= /<span class="id">asboolP</span> <span class="id">Px</span>; <span class="id">rewrite</span> [<span class="id">P</span> <span class="id">x</span>]<span class="id">propT</span> //; <span class="id">constructor</span>.<br/>
<span class="id">suff</span> <span class="id">NP</span> <span class="id">x</span> : ~ <span class="id">P</span> <span class="id">x</span> <span class="kwd">by</span> <span class="id">rewrite</span> [<span class="id">P</span> <span class="id">x0</span>]<span class="id">propF</span> //; <span class="id">constructor</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">contra_not</span> <span class="id">neqP</span> =&gt; <span class="id">Px</span>; <span class="kwd">exists</span> <span class="id">x</span>; <span class="id">apply</span>/<span class="id">asboolP</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">xgetPex</span> {<span class="id">T</span> : <span class="id">choiceType</span>} <span class="id">x0</span> (<span class="id">P</span> : <span class="id">set</span> <span class="id">T</span>) : (<span class="kwd">exists</span> <span class="id">x</span>, <span class="id">P</span> <span class="id">x</span>) -&gt; <span class="id">P</span> (<span class="id">xget</span> <span class="id">x0</span> <span class="id">P</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof389')">Proof.</span></div>
<div class="proofscript" id="proof389">
 <span class="kwd">by</span> <span class="id">case</span>: <span class="id">xgetP</span>=&gt; // <span class="id">NP</span> [<span class="id">x</span> /<span class="id">NP</span>]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">xgetI</span> {<span class="id">T</span> : <span class="id">choiceType</span>} <span class="id">x0</span> (<span class="id">P</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">x</span> : <span class="id">T</span>): <span class="id">P</span> <span class="id">x</span> -&gt; <span class="id">P</span> (<span class="id">xget</span> <span class="id">x0</span> <span class="id">P</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof390')">Proof.</span></div>
<div class="proofscript" id="proof390">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Px</span>; <span class="id">apply</span>: <span class="id">xgetPex</span>; <span class="kwd">exists</span> <span class="id">x</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">xget_subset1</span> {<span class="id">T</span> : <span class="id">choiceType</span>} <span class="id">x0</span> (<span class="id">P</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">x</span> : <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id">P</span> <span class="id">x</span> -&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#fun_of_rel">is_subset1</a></span> <span class="id">P</span> -&gt; <span class="id">xget</span> <span class="id">x0</span> <span class="id">P</span> = <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof391')">Proof.</span></div>
<div class="proofscript" id="proof391">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Px</span> /(<span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">xgetI</span> <span class="id">x0</span> <span class="id">Px</span>) <span class="id">Px</span>). Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">xget_unique</span>  {<span class="id">T</span> : <span class="id">choiceType</span>} <span class="id">x0</span> (<span class="id">P</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">x</span> : <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id">P</span> <span class="id">x</span> -&gt; (<span class="kwd">forall</span> <span class="id">y</span>, <span class="id">P</span> <span class="id">y</span> -&gt; <span class="id">y</span> = <span class="id">x</span>) -&gt; <span class="id">xget</span> <span class="id">x0</span> <span class="id">P</span> = <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof392')">Proof.</span></div>
<div class="proofscript" id="proof392">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">xget_subset1</span> <span class="id">gPx</span> <span class="id">eqx</span>; <span class="id">apply</span>: <span class="id">gPx</span>=&gt; <span class="id">y</span> <span class="id">z</span> /<span class="id">eqx</span>-&gt; /<span class="id">eqx</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">xgetPN</span> {<span class="id">T</span> : <span class="id">choiceType</span>} <span class="id">x0</span> (<span class="id">P</span> : <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, ~ <span class="id">P</span> <span class="id">x</span>) -&gt; <span class="id">xget</span> <span class="id">x0</span> <span class="id">P</span> = <span class="id">x0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof393')">Proof.</span></div>
<div class="proofscript" id="proof393">
 <span class="kwd">by</span> <span class="id">case</span>: <span class="id">xgetP</span> =&gt; // <span class="id">x</span> <span class="id">_</span> <span class="id">Px</span> /(<span class="id">_</span> <span class="id">x</span>). Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">fun_of_rel</span> {<span class="id">aT</span>} {<span class="id">rT</span> : <span class="id">choiceType</span>} (<span class="id">f0</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>)<br/>
&nbsp;&nbsp;(<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span> -&gt; <span class="kwd">Prop</span>) := <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">xget</span> (<span class="id">f0</span> <span class="id">x</span>) (<span class="id">f</span> <span class="id">x</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">fun_of_relP</span> {<span class="id">aT</span>} {<span class="id">rT</span> : <span class="id">choiceType</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span> -&gt; <span class="kwd">Prop</span>) (<span class="id">f0</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">a</span> :<br/>
&nbsp;&nbsp;<span class="id">f</span> <span class="id">a</span> !=<span class="id">set0</span> -&gt; <span class="id">f</span> <span class="id">a</span> (<span class="id">fun_of_rel</span> <span class="id">f0</span> <span class="id">f</span> <span class="id">a</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof394')">Proof.</span></div>
<div class="proofscript" id="proof394">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">b</span> <span class="id">fab</span>]; <span class="id">rewrite</span> /<span class="id">fun_of_rel</span>; <span class="id">apply</span>: <span class="id">xgetI</span> <span class="id">fab</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">fun_of_rel_uniq</span> {<span class="id">aT</span>} {<span class="id">rT</span> : <span class="id">choiceType</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span> -&gt; <span class="kwd">Prop</span>) (<span class="id">f0</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">a</span> :<br/>
&nbsp;&nbsp;<span class="id">is_subset1</span> (<span class="id">f</span> <span class="id">a</span>) -&gt; <span class="kwd">forall</span> <span class="id">b</span>, <span class="id">f</span> <span class="id">a</span> <span class="id">b</span> -&gt;  <span class="id">fun_of_rel</span> <span class="id">f0</span> <span class="id">f</span> <span class="id">a</span> = <span class="id">b</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof395')">Proof.</span></div>
<div class="proofscript" id="proof395">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">fa1</span> <span class="id">b</span> /<span class="id">xget_subset1</span> <span class="id">xgeteq</span>; <span class="id">rewrite</span> /<span class="id">fun_of_rel</span> <span class="id">xgeteq</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">forall_sig</span> <span class="id">T</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">P</span> : {<span class="id">x</span> | <span class="id">x</span> \<span class="kwd">in</span> <span class="id">A</span>} -&gt; <span class="kwd">Prop</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">u</span> : {<span class="id">x</span> | <span class="id">x</span> \<span class="kwd">in</span> <span class="id">A</span>}, <span class="id">P</span> <span class="id">u</span>) =<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">u</span> : <span class="id">T</span>, <span class="kwd">forall</span> (<span class="id">a</span> : <span class="id">A</span> <span class="id">u</span>), <span class="id">P</span> (<span class="id">exist</span> <span class="id">_</span> <span class="id">u</span> (<span class="id">mem_set</span> <span class="id">a</span>))).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof396')">Proof.</span></div>
<div class="proofscript" id="proof396">
<span class="id">rewrite</span> <span class="id">propeqE</span>; <span class="id">split</span>=&gt; [+ <span class="id">u</span> <span class="id">a</span>|<span class="id">PA</span> [<span class="id">u</span> <span class="id">a</span>]]; <span class="id">first</span> <span class="id">exact</span>.<br/>
<span class="id">have</span> <span class="id">Au</span> : <span class="id">A</span> <span class="id">u</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">inE</span> <span class="kwd">in</span> <span class="id">a</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">Prop_irrelevance</span> <span class="id">a</span> (<span class="id">mem_set</span> <span class="id">Au</span>)); <span class="id">apply</span>: <span class="id">PA</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">in_setP</span> {<span class="id">U</span>} (<span class="id">A</span> : <span class="id">set</span> <span class="id">U</span>) (<span class="id">P</span> : <span class="id">U</span> -&gt; <span class="kwd">Prop</span>) :<br/>
&nbsp;&nbsp;{<span class="kwd">in</span> <span class="id">A</span>, <span class="kwd">forall</span> <span class="id">x</span>, <span class="id">P</span> <span class="id">x</span>} &lt;-&gt; <span class="kwd">forall</span> <span class="id">x</span>, <span class="id">A</span> <span class="id">x</span> -&gt; <span class="id">P</span> <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof397')">Proof.</span></div>
<div class="proofscript" id="proof397">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; <span class="id">AP</span> <span class="id">x</span>; <span class="id">have</span> := <span class="id">AP</span> <span class="id">x</span>; <span class="id">rewrite</span> <span class="id">inE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">in_set2P</span> {<span class="id">U</span> <span class="id">V</span>} (<span class="id">A</span> : <span class="id">set</span> <span class="id">U</span>) (<span class="id">B</span> : <span class="id">set</span> <span class="id">V</span>) (<span class="id">P</span> : <span class="id">U</span> -&gt; <span class="id">V</span> -&gt; <span class="kwd">Prop</span>) :<br/>
&nbsp;&nbsp;{<span class="kwd">in</span> <span class="id">A</span> &amp; <span class="id">B</span>, <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id">P</span> <span class="id">x</span> <span class="id">y</span>} &lt;-&gt; (<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id">A</span> <span class="id">x</span> -&gt; <span class="id">B</span> <span class="id">y</span> -&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">P</a></span> <span class="id">x</span> <span class="id">y</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof398')">Proof.</span></div>
<div class="proofscript" id="proof398">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; <span class="id">AP</span> <span class="id">x</span> <span class="id">y</span>; <span class="id">have</span> := <span class="id">AP</span> <span class="id">x</span> <span class="id">y</span>; <span class="id">rewrite</span> !<span class="id">inE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">in1TT</span> [<span class="id">T1</span>] [<span class="id">P1</span> : <span class="id">T1</span> -&gt; <span class="kwd">Prop</span>] :<br/>
&nbsp;&nbsp;{<span class="kwd">in</span> [<span class="id">set</span>: <span class="id">T1</span>], <span class="kwd">forall</span> <span class="id">x</span> : <span class="id">T1</span>, <span class="id">P1</span> <span class="id">x</span> : <span class="kwd">Prop</span>} -&gt; <span class="kwd">forall</span> <span class="id">x</span> : <span class="id">T1</span>, <span class="id">P1</span> <span class="id">x</span> : <span class="kwd">Prop</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof399')">Proof.</span></div>
<div class="proofscript" id="proof399">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; + *; <span class="id">apply</span>; <span class="id">rewrite</span> !<span class="id">inE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">in2TT</span> [<span class="id">T1</span> <span class="id">T2</span>] [<span class="id">P2</span> : <span class="id">T1</span> -&gt; <span class="id">T2</span> -&gt; <span class="kwd">Prop</span>] :<br/>
&nbsp;&nbsp;{<span class="kwd">in</span> [<span class="id">set</span>: <span class="id">T1</span>] &amp; [<span class="id">set</span>: <span class="id">T2</span>], <span class="kwd">forall</span> (<span class="id">x</span> : <span class="id">T1</span>) (<span class="id">y</span> : <span class="id">T2</span>), <span class="id">P2</span> <span class="id">x</span> <span class="id">y</span> : <span class="kwd">Prop</span>} -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">x</span> : <span class="id">T1</span>) (<span class="id">y</span> : <span class="id">T2</span>), <span class="id">P2</span> <span class="id">x</span> <span class="id">y</span> : <span class="kwd">Prop</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof400')">Proof.</span></div>
<div class="proofscript" id="proof400">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; + *; <span class="id">apply</span>; <span class="id">rewrite</span> !<span class="id">inE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">in3TT</span> [<span class="id">T1</span> <span class="id">T2</span> <span class="id">T3</span>] [<span class="id">P3</span> : <span class="id">T1</span> -&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.Pack">T2</a></span> -&gt; <span class="id">T3</span> -&gt; <span class="kwd">Prop</span>] :<br/>
&nbsp;&nbsp;{<span class="kwd">in</span> [<span class="id">set</span>: <span class="id">T1</span>] &amp; [<span class="id">set</span>: <span class="id">T2</span>] &amp; [<span class="id">set</span>: <span class="id">T3</span>], <span class="kwd">forall</span> (<span class="id">x</span> : <span class="id">T1</span>) (<span class="id">y</span> : <span class="id">T2</span>) (<span class="id">z</span> : <span class="id">T3</span>), <span class="id">P3</span> <span class="id">x</span> <span class="id">y</span> <span class="id">z</span> : <span class="kwd">Prop</span>} -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">x</span> : <span class="id">T1</span>) (<span class="id">y</span> : <span class="id"><a name="Pointed.xclass">T2</a></span>) (<span class="id">z</span> : <span class="id">T3</span>), <span class="id">P3</span> <span class="id">x</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.class_of">y</a></span> <span class="id">z</span> : <span class="kwd">Prop</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof401')">Proof.</span></div>
<div class="proofscript" id="proof401">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; + *; <span class="id">apply</span>; <span class="id">rewrite</span> !<span class="id">inE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">inTT_bij</span> [<span class="id">T1</span> <span class="id">T2</span> : <span class="kwd">Type</span>] [<span class="id">f</span> : <span class="id">T1</span> -&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#phant_id">T2</a></span>] :<br/>
&nbsp;&nbsp;{<span class="kwd">in</span> [<span class="id">set</span>: <span class="id">T1</span>], <span class="id">bijective</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.Pack">f</a></span>} -&gt; <span class="id">bijective</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof402')">Proof.</span></div>
<div class="proofscript" id="proof402">
 <span class="kwd">by</span> <span class="id">case</span>=&gt; [<span class="id">g</span> /<span class="id">in1TT</span> + /<span class="id">in1TT</span> +]; <span class="kwd">exists</span> <span class="id">g</span>. Qed.</div>
<br/>
<span class="kwd">Module</span> <span class="id">Pointed</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">point_of</span> (<span class="id">T</span> : <span class="kwd">Type</span>) := <span class="id">T</span>.<br/>
<br/>
<span class="kwd">Record</span> <span class="id">class_of</span> (<span class="id">T</span> : <span class="kwd">Type</span>) := <span class="kwd">Class</span> {<br/>
&nbsp;&nbsp;<span class="id">base</span> : <span class="id">Choice.class_of</span> <span class="id">T</span>;<br/>
&nbsp;&nbsp;<span class="id">mixin</span> : <span class="id">point_of</span> <span class="id">T</span><br/>
}.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">ClassDef</span>.<br/>
<br/>
<span class="kwd">Structure</span> <span class="id">type</span> := <span class="id">Pack</span> { <span class="id">sort</span>; <span class="id">_</span> : <span class="id">class_of</span> <span class="id">sort</span> }.<br/>
<span class="id">Local</span> <span class="kwd">Coercion</span> <span class="id">sort</span> : <span class="id">type</span> &gt;-&gt; <span class="id">Sortclass</span>.<br/>
<span class="kwd">Variables</span> (<span class="id">T</span> : <span class="kwd">Type</span>) (<span class="id">cT</span> : <span class="id">type</span>).<br/>
<span class="kwd">Definition</span> <span class="id">class</span> := <span class="kwd">let</span>: <span class="id">Pack</span> <span class="id">_</span> <span class="id">c</span> := <span class="id">cT</span> <span class="kwd">return</span> <span class="id">class_of</span> <span class="id">cT</span> <span class="kwd">in</span> <span class="id">c</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">clone</span> <span class="id">c</span> <span class="id">of</span> <span class="id">phant_id</span> <span class="id">class</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#idfun">c</a></span> := @<span class="id">Pack</span> <span class="id">T</span> <span class="id">c</span>.<br/>
<span class="kwd">Let</span> <span class="id">xT</span> := <span class="kwd">let</span>: <span class="id">Pack</span> <span class="id">T</span> <span class="id">_</span> := <span class="id">cT</span> <span class="kwd">in</span> <span class="id">T</span>.<br/>
<span class="kwd">Notation</span> <span class="id">xclass</span> := (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#idfun">class</a></span> : <span class="id">class_of</span> <span class="id">xT</span>).<br/>
<span class="id">Local</span> <span class="kwd">Coercion</span> <span class="id">base</span> : <span class="id">class_of</span> &gt;-&gt; <span class="id">Choice.class_of</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">pack</span> <span class="id">m</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">bT</span> <span class="id">b</span> <span class="id">of</span> <span class="id">phant_id</span> (<span class="id">Choice.class</span> <span class="id">bT</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#id">b</a></span> =&gt; @<span class="id">Pack</span> <span class="id">T</span> (<span class="kwd">Class</span> <span class="id">b</span> <span class="id">m</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">eqType</span> := @<span class="id">Equality.Pack</span> <span class="id">cT</span> <span class="id">xclass</span>.<br/>
<span class="kwd">Definition</span> <span class="id">choiceType</span> := @<span class="id">Choice.Pack</span> <span class="id">cT</span> <span class="id">xclass</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">ClassDef</span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#pointedType">Exports</a></span>.<br/>
<br/>
<span class="kwd">Coercion</span> <span class="id">sort</span> : <span class="id">type</span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#class">Sortclass</a></span>.<br/>
<span class="kwd">Coercion</span> <span class="id">base</span> : <span class="id">class_of</span> &gt;-&gt; <span class="id">Choice.class_of</span>.<br/>
<span class="kwd">Coercion</span> <span class="id">mixin</span> : <span class="id">class_of</span> &gt;-&gt; <span class="id">point_of</span>.<br/>
<span class="kwd">Coercion</span> <span class="id">eqType</span> : <span class="id">type</span> &gt;-&gt; <span class="id">Equality.type</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">eqType</span>.<br/>
<span class="kwd">Coercion</span> <span class="id">choiceType</span> : <span class="id">type</span> &gt;-&gt; <span class="id">Choice.type</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">choiceType</span>.<br/>
<span class="kwd">Notation</span> <span class="id">pointedType</span> := <span class="id">type</span>.<br/>
<span class="kwd">Notation</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#point">PointedType</a></span> <span class="id">T</span> <span class="id">m</span> := (@<span class="id">pack</span> <span class="id">T</span> <span class="id">m</span> <span class="id">_</span> <span class="id">_</span> <span class="id">idfun</span>).<br/>
<span class="kwd">Notation</span> "[ '<span class="id">pointedType</span>' '<span class="id">of</span>' <span class="id">T</span> '<span class="kwd">for</span>' <span class="id">cT</span> ]" :=  (@<span class="id">clone</span> <span class="id">T</span> <span class="id">cT</span> <span class="id">_</span> <span class="id">idfun</span>)<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">format</span> "[ '<span class="id">pointedType</span>'  '<span class="id">of</span>'  <span class="id">T</span>  '<span class="kwd">for</span>'  <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#False">cT</a></span> ]") : <span class="id">form_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">pointedType</span>' '<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">of</a></span>' <span class="id">T</span> ]" := (@<span class="id">clone</span> <span class="id">T</span> <span class="id">_</span> <span class="id">_</span> <span class="id">id</span>)<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">format</span> "[ '<span class="id">pointedType</span>'  '<span class="id">of</span>'  <span class="id">T</span> ]") : <span class="id">form_scope</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">Exports</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">Pointed</span>.<br/>
<br/>
<span class="kwd">Export</span> <span class="id">Pointed.Exports</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">point</span> {<span class="id">M</span> : <span class="id">pointedType</span>} : <span class="id">M</span> := <span class="id">Pointed.mixin</span> (<span class="id">Pointed.class</span> <span class="id">M</span>).<br/>
<br/>
<span class="kwd">Canonical</span> <span class="id">arrow_pointedType</span> (<span class="id">T</span> : <span class="kwd">Type</span>) (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#option">T</a></span>' : <span class="id">pointedType</span>) :=<br/>
&nbsp;&nbsp;<span class="id">PointedType</span> (<span class="id">T</span> -&gt; <span class="id">T</span>') (<span class="kwd">fun</span>=&gt; <span class="id">point</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">dep_arrow_pointedType</span> (<span class="id">T</span> : <span class="kwd">Type</span>) (<span class="id">T</span>' : <span class="id">T</span> -&gt; <span class="id">pointedType</span>) :=<br/>
&nbsp;&nbsp;<span class="id">Pointed.Pack</span><br/>
&nbsp;&nbsp;&nbsp;(<span class="id">Pointed.Class</span> (<span class="id">dep_arrow_choiceClass</span> <span class="id">T</span>') (<span class="kwd">fun</span> <span class="id">i</span> =&gt; @<span class="id">point</span> (<span class="id">T</span>' <span class="id">i</span>))).<br/>
<br/>
<span class="kwd">Canonical</span> <span class="id">unit_pointedType</span> := <span class="id">PointedType</span> <span class="id">unit</span> <span class="id">tt</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">bool_pointedType</span> := <span class="id">PointedType</span> <span class="id">bool</span> <span class="id">false</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">Prop_pointedType</span> := <span class="id">PointedType</span> <span class="kwd">Prop</span> <span class="id">False</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">nat_pointedType</span> := <span class="id">PointedType</span> <span class="id">nat</span> 0.<br/>
<span class="kwd">Canonical</span> <span class="id">prod_pointedType</span> (<span class="id">T</span> <span class="id">T</span>' : <span class="id">pointedType</span>) :=<br/>
&nbsp;&nbsp;<span class="id">PointedType</span> (<span class="id">T</span> * <span class="id">T</span>') (<span class="id">point</span>, <span class="id">point</span>).<br/>
<span class="kwd">Canonical</span> <span class="id">matrix_pointedType</span> <span class="id">m</span> <span class="id">n</span> (<span class="id">T</span> : <span class="id">pointedType</span>) :=<br/>
&nbsp;&nbsp;<span class="id">PointedType</span> '<span class="id">M</span>[<span class="id">T</span>]<span class="id">_</span>(<span class="id">m</span>, <span class="id">n</span>) (\<span class="id">matrix_</span>(<span class="id">_</span>, <span class="id">_</span>) <span class="id">point</span>)%<span class="id">R</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">option_pointedType</span> (<span class="id">T</span> : <span class="id"><a name="getI">choiceType</a></span>) := <span class="id">PointedType</span> (<span class="id">option</span> <span class="id">T</span>) <span class="id">None</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">pointed_fset</span> {<span class="id">T</span> : <span class="id">choiceType</span>} := <span class="id">PointedType</span> {<span class="id">fset</span> <span class="id">T</span>} <span class="id">fset0</span>.<br/>
<br/>
<span class="kwd">Notation</span> <span class="id">get</span> := (<span class="id">xget</span> <span class="id">point</span>).<br/>
<span class="kwd">Notation</span> "[ '<span class="id">get</span>' <span class="id">x</span> | <span class="id"><a href="mathcomp.classical.classical_sets.html#xget_subset1">E</a></span> ]" := (<span class="id">get</span> [<span class="id">set</span> <span class="id">x</span> | <span class="id">E</span>])<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">x</span> <span class="id">name</span>, <span class="id"><a href="mathcomp.classical.classical_sets.html#set">format</a></span> "[ '<span class="id">get</span>'  <span class="id">x</span>  |  <span class="id">E</span> ]", <span class="id">only</span> <span class="id">printing</span>) : <span class="id">form_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">get</span>' <span class="id">x</span> : <span class="id">T</span> | <span class="id">E</span> ]" := (<span class="id"><a href="mathcomp.classical.classical_sets.html#point">get</a></span> (<span class="kwd">fun</span> <span class="id">x</span> : <span class="id">T</span>  =&gt; <span class="id">E</span>))<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">x</span> <span class="id">name</span>, <span class="id">format</span> "[ '<span class="id">get</span>'  <span class="id">x</span>  :  <span class="id"><a href="mathcomp.classical.classical_sets.html#point">T</a></span>  |  <span class="id">E</span> ]", <span class="id">only</span> <span class="id">parsing</span>) : <span class="id">form_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">get</span>' <span class="id">x</span> | <span class="id">E</span> ]" := (<span class="id">get</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">E</span>))<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">x</a></span> <span class="id">name</span>, <span class="id">format</span> "[ '<span class="id">get</span>'  <span class="id">x</span>  |  <span class="id">E</span> ]") : <span class="id">form_scope</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">PointedTheory</span>.<br/>
<span class="kwd">Context</span> {<span class="id">T</span> : <span class="id">pointedType</span>}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">getPex</span> (<span class="id">P</span> : <span class="id">set</span> <span class="id">T</span>) : (<span class="kwd">exists</span> <span class="id">x</span>, <span class="id">P</span> <span class="id">x</span>) -&gt; <span class="id">P</span> (<span class="id">get</span> <span class="id">P</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof403')">Proof.</span></div>
<div class="proofscript" id="proof403">
 <span class="id">exact</span>: (<span class="id">xgetPex</span> <span class="id">point</span>). Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">getI</span> (<span class="id">P</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">x</span> : <span class="id">T</span>): <span class="id">P</span> <span class="id">x</span> -&gt; <span class="id">P</span> (<span class="id">get</span> <span class="id">P</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof404')">Proof.</span></div>
<div class="proofscript" id="proof404">
 <span class="id">exact</span>: (<span class="id">xgetI</span> <span class="id">point</span>). Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">get_subset1</span> (<span class="id">P</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">x</span> : <span class="id">T</span>) : <span class="id">P</span> <span class="id">x</span> -&gt; <span class="id">is_subset1</span> <span class="id">P</span> -&gt; <span class="id">get</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#projT1">P</a></span> = <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof405')">Proof.</span></div>
<div class="proofscript" id="proof405">
 <span class="id">exact</span>: (<span class="id">xget_subset1</span> <span class="id">point</span>). Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">get_unique</span> (<span class="id">P</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">x</span> : <span class="id">T</span>) :<br/>
&nbsp;&nbsp;&nbsp;<span class="id">P</span> <span class="id">x</span> -&gt; (<span class="kwd">forall</span> <span class="id">y</span>, <span class="id">P</span> <span class="id">y</span> -&gt; <span class="id">y</span> = <span class="id">x</span>) -&gt; <span class="id">get</span> <span class="id">P</span> = <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof406')">Proof.</span></div>
<div class="proofscript" id="proof406">
 <span class="id">exact</span>: (<span class="id">xget_unique</span> <span class="id">point</span>). Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">getPN</span> (<span class="id">P</span> : <span class="id">set</span> <span class="id">T</span>) : (<span class="kwd">forall</span> <span class="id">x</span>, ~ <span class="id">P</span> <span class="id">x</span>) -&gt; <span class="id">get</span> <span class="id">P</span> = <span class="id">point</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof407')">Proof.</span></div>
<div class="proofscript" id="proof407">
 <span class="id"><a name="Empty.EqMixin.m">exact</a></span>: (<span class="id">xgetPN</span> <span class="id">point</span>). Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">setT0</span> : <span class="id">setT</span> != <span class="id">set0</span> :&gt; <span class="id"><a name="Empty.eq_opP">set</a></span> <span class="id">T</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof408')">Proof.</span></div>
<div class="proofscript" id="proof408">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">eqP</span> =&gt; /<span class="id">seteqP</span>[] /(<span class="id">_</span> <span class="id">point</span>) /(<span class="id">_</span> <span class="id">Logic.I</span>). Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">PointedTheory</span>.<br/>
<br/>
<span class="kwd">Variant</span> <span class="id">squashed</span> <span class="id">T</span> : <span class="kwd">Prop</span> := <span class="id">squash</span> (<span class="id">x</span> : <span class="id">T</span>).<br/>
<span class="kwd">Arguments</span> <span class="id">squash</span> {<span class="id">T</span>} <span class="id">x</span>.<br/>
<span class="kwd">Notation</span> "$| <span class="id"><a name="Empty.find">T</a></span> |" := (<span class="id">squashed</span> <span class="id">T</span>) : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#option">form_scope</a></span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">squash</span>" <span class="id">uconstr</span>(<span class="id">x</span>) := (<span class="kwd">exists</span>; <span class="id">refine</span> <span class="id">x</span>) ||<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> |- $| ?<span class="id">T</span> | =&gt; <span class="kwd">exists</span>; <span class="id">refine</span> [<span class="id">the</span> <span class="id">T</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">of</a></span> <span class="id">x</span>] <span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">unsquash</span> {<span class="id">T</span>} (<span class="id">s</span> : $|<span class="id">T</span>|) : <span class="id"><a href="mathcomp.classical.classical_sets.html#Empty.find">T</a></span> :=<br/>
&nbsp;&nbsp;<span class="id">projT1</span> (<span class="id">cid</span> (<span class="kwd">let</span>: <span class="id">squash</span> <span class="id">x</span> := <span class="id"><a name="Empty.eq_find">s</a></span> <span class="kwd">in</span> @<span class="id">ex_intro</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">T</a></span> <span class="id">_</span> <span class="id">x</span> <span class="id">isT</span>)).<br/>
<span class="kwd">Lemma</span> <span class="id">unsquashK</span> {<span class="id"><a href="mathcomp.classical.classical_sets.html#Empty.find">T</a></span>} : <span class="id">cancel</span> (@<span class="id">unsquash</span> <span class="id">T</span>) <span class="id">squash</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof409')">Proof.</span></div>
<div class="proofscript" id="proof409">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; []. Qed.</div>
<br/>
<br/>
<span class="kwd">Module</span> <span class="id">Empty</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">mixin_of</span> <span class="id"><a name="Empty.CountMixin">T</a></span> := <span class="id">T</span> -&gt; <span class="id">False</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">EqMixin</span>.<br/>
<span class="kwd">Variables</span> (<span class="id">T</span> : <span class="kwd">Type</span>) (<span class="id">m</span> : <span class="id">mixin_of</span> <span class="id">T</span>).<br/>
<span class="kwd">Definition</span> <span class="id">eq_op</span> (<span class="id">x</span> <span class="id">y</span> : <span class="id">T</span>) := <span class="id">true</span>.<br/>
<span class="kwd">Lemma</span> <span class="id">eq_opP</span> : <span class="id">Equality.axiom</span> <span class="id">eq_op</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof410')">Proof.</span></div>
<div class="proofscript" id="proof410">
 <span class="kwd">by</span> []. Qed.</div>
<span class="kwd">Definition</span> <span class="id">eqMixin</span> := <span class="id">EqMixin</span> <span class="id">eq_opP</span>.<br/>
<span class="kwd">End</span> <span class="id">EqMixin</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">ChoiceMixin</span>.<br/>
<span class="kwd">Variables</span> (<span class="id">T</span> : <span class="kwd">Type</span>) (<span class="id">m</span> : <span class="id">mixin_of</span> <span class="id">T</span>).<br/>
<span class="kwd">Definition</span> <span class="id">find</span> <span class="id">of</span> <span class="id">pred</span> <span class="id">T</span> &amp; <span class="id">nat</span> : <span class="id"><a name="Empty.FinMixin.m">option</a></span> <span class="id">T</span> := <span class="id">None</span>.<br/>
<span class="kwd">Lemma</span> <span class="id">findP</span> (<span class="id">P</span> : <span class="id">pred</span> <span class="id">T</span>) (<span class="id">n</span> : <span class="id">nat</span>) (<span class="id">x</span> : <span class="id">T</span>) :  <span class="id">find</span> <span class="id">P</span> <span class="id">n</span> = <span class="id">Some</span> <span class="id">x</span> -&gt; <span class="id">P</span> <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof411')">Proof.</span></div>
<div class="proofscript" id="proof411">
 <span class="kwd">by</span> []. Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#Empty.fin_axiom">ex_find</a></span> (<span class="id">P</span> : <span class="id">pred</span> <span class="id">T</span>) : (<span class="kwd">exists</span> <span class="id">x</span> : <span class="id">T</span>, <span class="id">P</span> <span class="id">x</span>) -&gt; <span class="kwd">exists</span> <span class="id">n</span> : <span class="id">nat</span>, <span class="id">find</span> <span class="id">P</span> <span class="id">n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof412')">Proof.</span></div>
<div class="proofscript" id="proof412">
 <span class="kwd">by</span> <span class="id">case</span>. Qed.</div>
<span class="kwd">Lemma</span> <span class="id">eq_find</span> (<span class="id">P</span> <span class="id">Q</span> : <span class="id">pred</span> <span class="id">T</span>) : <span class="id">P</span> =1 <span class="id">Q</span> -&gt; <span class="id">find</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#Empty.mixin_of">P</a></span> =1 <span class="id">find</span> <span class="id">Q</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof413')">Proof.</span></div>
<div class="proofscript" id="proof413">
 <span class="kwd">by</span> []. Qed.</div>
<span class="kwd">Definition</span> <span class="id">choiceMixin</span> := <span class="id">Choice.Mixin</span> <span class="id">findP</span> <span class="id">ex_find</span> <span class="id">eq_find</span>.<br/>
<span class="kwd">End</span> <span class="id">ChoiceMixin</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">CountMixin</span>.<br/>
<span class="kwd">Variables</span> (<span class="id">T</span> : <span class="kwd">Type</span>) (<span class="id">m</span> : <span class="id">mixin_of</span> <span class="id">T</span>).<br/>
<span class="kwd">Definition</span> <span class="id">pickle</span> : <span class="id">T</span> -&gt; <span class="id">nat</span> := <span class="kwd">fun</span>=&gt; 0.<br/>
<span class="kwd">Definition</span> <span class="id">unpickle</span> : <span class="id">nat</span> -&gt; <span class="id">option</span> <span class="id">T</span> := <span class="kwd">fun</span>=&gt; <span class="id">None</span>.<br/>
<span class="kwd">Lemma</span> <span class="id">pickleK</span> : <span class="id">pcancel</span> <span class="id">pickle</span> <span class="id">unpickle</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof414')">Proof.</span></div>
<div class="proofscript" id="proof414">
 <span class="kwd">by</span> []. Qed.</div>
<span class="kwd">Definition</span> <span class="id">countMixin</span> := <span class="id"><a href="mathcomp.classical.classical_sets.html#Empty.ClassDef.T">CountMixin</a></span> <span class="id">pickleK</span>.<br/>
<span class="kwd">End</span> <span class="id">CountMixin</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">FinMixin</span>.<br/>
<span class="kwd">Variables</span> (<span class="id">T</span> : <span class="id">countType</span>) (<span class="id">m</span> : <span class="id">mixin_of</span> <span class="id">T</span>).<br/>
<span class="kwd">Lemma</span> <span class="id">fin_axiom</span> : <span class="id">Finite.axiom</span> ([::] : <span class="id">seq</span> <span class="id">T</span>)<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof415')">Proof.</span></div>
<div class="proofscript" id="proof415">
 <span class="kwd">by</span> []. Qed.</div>
<span class="kwd">Definition</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#Empty.class">finMixin</a></span> := <span class="id">FinMixin</span> <span class="id">fin_axiom</span>.<br/>
<span class="kwd">End</span> <span class="id">FinMixin</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">ClassDef</span>.<br/>
<br/>
<span class="kwd">Set</span> <span class="id">Primitive</span> <span class="id">Projections</span>.<br/>
<span class="kwd">Record</span> <span class="id">class_of</span> <span class="id">T</span> := <span class="kwd">Class</span> {<br/>
&nbsp;&nbsp;<span class="id">base</span> : <span class="id">Finite.class_of</span> <span class="id">T</span>;<br/>
&nbsp;&nbsp;<span class="id">mixin</span> : <span class="id">mixin_of</span> <span class="id">T</span><br/>
}.<br/>
<span class="id">Unset</span> <span class="id"><a name="Empty.Exports">Primitive</a></span> <span class="id">Projections</span>.<br/>
<span class="id">Local</span> <span class="kwd">Coercion</span> <span class="id">base</span> : <span class="id">class_of</span> &gt;-&gt; <span class="id">Finite.class_of</span>.<br/>
<br/>
<span class="kwd">Structure</span> <span class="id">type</span> : <span class="kwd">Type</span> := <span class="id">Pack</span> {<span class="id">sort</span>; <span class="id">_</span> : <span class="id">class_of</span> <span class="id">sort</span>}.<br/>
<span class="id">Local</span> <span class="kwd">Coercion</span> <span class="id">sort</span> : <span class="id">type</span> &gt;-&gt; <span class="id">Sortclass</span>.<br/>
<span class="kwd">Variables</span> (<span class="id">T</span> : <span class="kwd">Type</span>) (<span class="id">cT</span> : <span class="id">type</span>).<br/>
<span class="kwd">Definition</span> <span class="id">class</span> := <span class="kwd">let</span>: <span class="id">Pack</span> <span class="id">_</span> <span class="id">c</span> <span class="kwd">as</span> <span class="id">cT</span>' := <span class="id">cT</span> <span class="kwd">return</span> <span class="id">class_of</span> <span class="id">cT</span>' <span class="kwd">in</span> <span class="id">c</span>.<br/>
<span class="kwd">Definition</span> <span class="id">clone</span> <span class="id">c</span> <span class="id">of</span> <span class="id">phant_id</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#Empty.countType">class</a></span> <span class="id">c</span> := @<span class="id">Pack</span> <span class="id">T</span> <span class="id">c</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">pack</span> (<span class="id">m0</span> : <span class="id">mixin_of</span> <span class="id">T</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">bT</span> <span class="id">b</span> &amp; <span class="id">phant_id</span> (<span class="id">Finite.class</span> <span class="id">bT</span>) <span class="id">b</span> =&gt;<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">m</span> &amp; <span class="id">phant_id</span> <span class="id">m0</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#Empty.pack">m</a></span> =&gt; <span class="id">Pack</span> (@<span class="kwd">Class</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#id">T</a></span> <span class="id">b</span> <span class="id">m</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">eqType</span> := @<span class="id">Equality.Pack</span> <span class="id">cT</span> <span class="id">class</span>.<br/>
<span class="kwd">Definition</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#idfun">choiceType</a></span> := @<span class="id">Choice.Pack</span> <span class="id">cT</span> <span class="id">class</span>.<br/>
<span class="kwd">Definition</span> <span class="id">countType</span> := @<span class="id">Countable.Pack</span> <span class="id">cT</span> <span class="id">class</span>.<br/>
<span class="kwd">Definition</span> <span class="id">finType</span> := @<span class="id">Finite.Pack</span> <span class="id">cT</span> <span class="id">class</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">ClassDef</span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="kwd">Import</span> <span class="id">Exports</span>.<br/>
<span class="kwd">Coercion</span> <span class="id">base</span> : <span class="id">class_of</span> &gt;-&gt; <span class="id">Finite.class_of</span>.<br/>
<span class="kwd">Coercion</span> <span class="id">mixin</span> : <span class="id">class_of</span> &gt;-&gt; <span class="id">mixin_of</span>.<br/>
<span class="kwd">Coercion</span> <span class="id">sort</span> : <span class="id">type</span> &gt;-&gt; <span class="id">Sortclass</span>.<br/>
<span class="kwd">Coercion</span> <span class="id">eqType</span> : <span class="id">type</span> &gt;-&gt; <span class="id">Equality.type</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">eqType</span>.<br/>
<span class="kwd">Coercion</span> <span class="id">choiceType</span> : <span class="id">type</span> &gt;-&gt; <span class="id">Choice.type</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">choiceType</span>.<br/>
<span class="kwd">Coercion</span> <span class="id">countType</span> : <span class="id">type</span> &gt;-&gt; <span class="id">Countable.type</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">countType</span>.<br/>
<span class="kwd">Coercion</span> <span class="id">finType</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#False_emptyMixin">type</a></span> &gt;-&gt; <span class="id">Finite.type</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">finType</span>.<br/>
<span class="kwd">Notation</span> <span class="id">emptyType</span> := <span class="id">type</span>.<br/>
<span class="kwd">Notation</span> <span class="id">EmptyType</span> <span class="id">T</span> <span class="id">m</span> := (@<span class="id">pack</span> <span class="id">T</span> <span class="id">m</span> <span class="id">_</span> <span class="id">_</span> <span class="id">id</span> <span class="id">_</span> <span class="id">id</span>).<br/>
<span class="kwd">Notation</span> "[ '<span class="id">emptyType</span>' '<span class="id">of</span>' <span class="id">T</span> '<span class="kwd">for</span>' <span class="id">cT</span> ]" := (@<span class="id">clone</span> <span class="id">T</span> <span class="id">cT</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#False">idfun</a></span>)<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id"><a href="mathcomp.classical.classical_sets.html#False_emptyMixin">format</a></span> "[ '<span class="id">emptyType</span>'  '<span class="id">of</span>'  <span class="id"><a name="False_emptyType">T</a></span>  '<span class="kwd">for</span>'  <span class="id">cT</span> ]") : <span class="id"><a href="mathcomp.classical.classical_sets.html#EmptyType">form_scope</a></span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">emptyType</span>' '<span class="id">of</span>' <span class="id">T</span> ]" := (@<span class="id">clone</span> <span class="id">T</span> <span class="id">_</span> <span class="id">_</span> <span class="id">id</span>)<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">format</span> "[ '<span class="id">emptyType</span>'  '<span class="id">of</span>'  <span class="id">T</span> ]") : <span class="id">form_scope</span>.<br/>
<span class="kwd">Coercion</span> <span class="id">eqMixin</span> : <span class="id">mixin_of</span> &gt;-&gt; <span class="id">Equality.mixin_of</span>.<br/>
<span class="kwd">Coercion</span> <span class="id">choiceMixin</span> : <span class="id">mixin_of</span> &gt;-&gt; <span class="id">Choice.mixin_of</span>.<br/>
<span class="kwd">Coercion</span> <span class="id">countMixin</span> : <span class="id">mixin_of</span> &gt;-&gt; <span class="id">Countable.mixin_of</span>.<br/>
<span class="kwd">End</span> <span class="id">Exports</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">Empty</span>.<br/>
<span class="kwd">Export</span> <span class="id">Empty.Exports</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">False_emptyMixin</span> : <span class="id">Empty.mixin_of</span> <span class="id">False</span> := <span class="id">id</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">False_eqType</span> := <span class="id">EqType</span> <span class="id">False</span> <span class="id">False_emptyMixin</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">False_choiceType</span> := <span class="id">ChoiceType</span> <span class="id">False</span> <span class="id">False_emptyMixin</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">False_countType</span> := <span class="id">CountType</span> <span class="id">False</span> <span class="id">False_emptyMixin</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">False_finType</span> := <span class="id">FinType</span> <span class="id">False</span> (<span class="id">Empty.finMixin</span> <span class="id">False_emptyMixin</span>).<br/>
<span class="kwd">Canonical</span> <span class="id">False_emptyType</span> := <span class="id">EmptyType</span> <span class="id">False</span> <span class="id">False_emptyMixin</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">void_emptyMixin</span> : <span class="id">Empty.mixin_of</span> <span class="id">void</span> := @<span class="id">of_void</span> <span class="id">_</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">void_emptyType</span> := <span class="id">EmptyType</span> <span class="id">void</span> <span class="id">void_emptyMixin</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">no</span> {<span class="id">T</span> : <span class="id">emptyType</span>} : <span class="id">T</span> -&gt; <span class="id">False</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">Empty.Pack</span> <span class="id">_</span> (<span class="id">Empty.Class</span> <span class="id">_</span> <span class="id">f</span>) := <span class="id">T</span> <span class="kwd">in</span> <span class="id">f</span>.<br/>
<span class="kwd">Definition</span> <span class="id">any</span> {<span class="id">T</span> : <span class="id">emptyType</span>} {<span class="id"><a href="mathcomp.classical.boolp.html#cid">U</a></span>}  : <span class="id">T</span> -&gt; <span class="id">U</span> := @<span class="id">False_rect</span> <span class="id">_</span> \<span class="id">o</span> <span class="id">no</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">empty_eq0</span> {<span class="id">T</span> : <span class="id"><a name="choicePpointed">emptyType</a></span>} : <span class="id">all_equal_to</span> (<span class="id">set0</span> : <span class="id">set</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof416')">Proof.</span></div>
<div class="proofscript" id="proof416">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">X</span>; <span class="id">apply</span>/<span class="id">setF_eq0</span>/<span class="id">no</span>. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">quasi_canonical_of</span> <span class="id">T</span> <span class="id">C</span> (<span class="id">sort</span> : <span class="id">C</span> -&gt; <span class="id">T</span>) (<span class="id">alt</span>  : <span class="id">emptyType</span> -&gt; <span class="id">T</span>):=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">G</span> : <span class="id">T</span> -&gt; <span class="kwd">Type</span>), (<span class="kwd">forall</span> <span class="id">s</span> : <span class="id">emptyType</span>, <span class="id">G</span> (<span class="id">alt</span> <span class="id">s</span>)) -&gt; (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id">G</span> (<span class="id">sort</span> <span class="id">x</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id">G</span> <span class="id">x</span>.<br/>
<span class="kwd">Notation</span> <span class="id">quasi_canonical_</span> <span class="id">sort</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#EmptyType">alt</a></span> := (@<span class="id">quasi_canonical_of</span> <span class="id">_</span> <span class="id">_</span> <span class="id">sort</span> <span class="id">alt</span>).<br/>
<span class="kwd">Notation</span> <span class="id">quasi_canonical</span> <span class="id">T</span> <span class="id">C</span> := (@<span class="id">quasi_canonical_of</span> <span class="id">T</span> <span class="id">C</span> <span class="id">id</span> <span class="id">id</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">qcanon</span> <span class="id">T</span> <span class="id">C</span> (<span class="id">sort</span> : <span class="id">C</span> -&gt; <span class="id">T</span>) (<span class="id">alt</span> : <span class="id">emptyType</span> -&gt; <span class="id">T</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, (<span class="kwd">exists</span> <span class="id">y</span> : <span class="id">emptyType</span>, <span class="id">alt</span> <span class="id">y</span> = <span class="id">x</span>) + (<span class="kwd">exists</span> <span class="id">y</span>, <span class="id">sort</span> <span class="id">y</span> = <span class="id">x</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id">quasi_canonical_</span> <span class="id">sort</span> <span class="id">alt</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof417')">Proof.</span></div>
<div class="proofscript" id="proof417">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; + <span class="id">G</span> <span class="id">Cx</span> <span class="id">Gs</span> <span class="id">x</span> =&gt; /(<span class="id">_</span> <span class="id">x</span>)[/<span class="id">cid</span>[<span class="id">y</span> &lt;-]|/<span class="id">cid</span>[<span class="id">y</span> &lt;-]]. Qed.</div>
<span class="kwd">Arguments</span> <span class="id">qcanon</span> {<span class="id">T</span> <span class="id">C</span> <span class="id">sort</span> <span class="id">alt</span>} <span class="id">x</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">choicePpointed</span> : <span class="id">quasi_canonical</span> <span class="id">choiceType</span> <span class="id">pointedType</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof418')">Proof.</span></div>
<div class="proofscript" id="proof418">
<span class="id">apply</span>: <span class="id">qcanon</span> =&gt; <span class="id">T</span>; <span class="id">have</span> [/<span class="id">unsquash</span> <span class="id">x</span>|/(<span class="id">_</span> (<span class="id">squash</span> <span class="id">_</span>)) <span class="id">TF</span>] := <span class="id">pselect</span> $|<span class="id">T</span>|.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">right</span>; <span class="kwd">exists</span> (<span class="id">PointedType</span> <span class="id">T</span> <span class="id">x</span>); <span class="id">case</span>: <span class="id">T</span> <span class="id">x</span>.<br/>
<span class="id"><a name="trivIset1">left</a></span>.<br/>
<span class="id">pose</span> <span class="id">cT</span> := <span class="id">CountType</span> <span class="id">_</span> (<span class="id">TF</span> : <span class="id">Empty.mixin_of</span> <span class="id">T</span>).<br/>
<span class="id">pose</span> <span class="id">fM</span> := <span class="id">Empty.finMixin</span> (<span class="id">TF</span> : <span class="id">Empty.mixin_of</span> <span class="id"><a name="ltn_trivIset">cT</a></span>).<br/>
<span class="kwd">exists</span> (<span class="id">EmptyType</span> (<span class="id">FinType</span> <span class="id">_</span> <span class="id">fM</span>) <span class="id">TF</span>) =&gt; //=.<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id">T</span> <span class="id">TF</span> @<span class="id">cT</span> @<span class="id">fM</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eqPpointed</span> : <span class="id">quasi_canonical</span> <span class="id">eqType</span> <span class="id">pointedType</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof419')">Proof.</span></div>
<div class="proofscript" id="proof419">
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negPn">qcanon</a></span>; <span class="id">elim</span>/<span class="id">eqPchoice</span>; <span class="id">elim</span>/<span class="id">choicePpointed</span> =&gt; [[<span class="id">T</span> <span class="id">F</span>]|<span class="id">T</span>];<br/>
&nbsp;&nbsp;&nbsp;[<span class="id">left</span>; <span class="kwd">exists</span> (<span class="id">Empty.Pack</span> <span class="id">F</span>) | <span class="id">right</span>; <span class="kwd">exists</span> <span class="id">T</span>].<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id">Ppointed</span> : <span class="id">quasi_canonical</span> <span class="kwd">Type</span> <span class="id">pointedType</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof420')">Proof.</span></div>
<div class="proofscript" id="proof420">
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">qcanon</span>; <span class="id">elim</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#setT">Peq</a></span>; <span class="id">elim</span>/<span class="id">eqPpointed</span> =&gt; [[<span class="id">T</span> <span class="id">F</span>]|<span class="id">T</span>];<br/>
&nbsp;&nbsp;&nbsp;[<span class="id">left</span>; <span class="kwd">exists</span> (<span class="id">Empty.Pack</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIC">F</a></span>) | <span class="id">right</span>; <span class="kwd">exists</span> <span class="id">T</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">partitions</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">trivIset</span> <span class="id">T</span> <span class="id">I</span> (<span class="id">D</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#subsetC">I</a></span> -&gt; <span class="id">set</span> <span class="id">T</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">j</span> : <span class="id">I</span>, <span class="id"><a name="trivIset_mkcond">D</a></span> <span class="id">i</span> -&gt; <span class="id">D</span> <span class="id">j</span> -&gt; <span class="id">F</span> <span class="id">i</span> `&amp;` <span class="id">F</span> <span class="id">j</span> !=<span class="id">set0</span> -&gt; <span class="id">i</span> = <span class="id">j</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">trivIset1</span> <span class="id">T</span> <span class="id">I</span> (<span class="id">i</span> : <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) : <span class="id">trivIset</span> [<span class="id">set</span> <span class="id">i</span>] <span class="id">F</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof421')">Proof.</span></div>
<div class="proofscript" id="proof421">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">j</span> <span class="id">k</span> &lt;- &lt;-. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">ltn_trivIset</span> <span class="id">T</span> (<span class="id">F</span> : <span class="id">nat</span> -&gt; <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span> <span class="id">m</span>, (<span class="id">m</span> &lt; <span class="id">n</span>)%<span class="id">N</span> -&gt; <span class="id">F</span> <span class="id">m</span> `&amp;` <span class="id">F</span> <span class="id">n</span> = <span class="id">set0</span>) -&gt; <span class="id">trivIset</span> <span class="id">setT</span> <span class="id">F</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof422')">Proof.</span></div>
<div class="proofscript" id="proof422">
<span class="id">move</span>=&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#set0I">h</a></span> <span class="id">m</span> <span class="id">n</span> <span class="id">_</span> <span class="id">_</span> [<span class="id">t</span> [<span class="id">mt</span> <span class="id">nt</span>]]; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">apply</a></span>/<span class="id">eqP</span>/<span class="id">negPn</span>/<span class="id">negP</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">neq_ltn</span> =&gt; /<span class="id">orP</span>[] /<span class="id"><a href="mathcomp.classical.classical_sets.html#setI0">h</a></span>; <span class="id">apply</span>/<span class="id">eqP</span>/<span class="id">set0P</span>; <span class="kwd">exists</span> <span class="id"><a name="trivIset_set0">t</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subsetC_trivIset</span> <span class="id">T</span> (<span class="id">F</span> : <span class="id">nat</span> -&gt; <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">F</span> <span class="id">n</span>.+1 `&lt;=` ~` \<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span>.+1) <span class="id">F</span> <span class="id">i</span>) -&gt; <span class="id">trivIset</span> <span class="id">setT</span> <span class="id">F</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof423')">Proof.</span></div>
<div class="proofscript" id="proof423">
<span class="id">move</span>=&gt; <span class="id">sF</span>; <span class="id">apply</span>: <span class="id">ltn_trivIset</span> =&gt; <span class="id">n</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">m</a></span> <span class="id">h</span>; <span class="id">rewrite</span> <span class="id">setIC</span>; <span class="id">apply</span>/<span class="id">disjoints_subset</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id">n</span> <span class="id">h</span> =&gt; // <span class="id">n</span> <span class="id">h</span>; <span class="id">apply</span>: (<span class="id">subset_trans</span> (<span class="id">sF</span> <span class="id">n</span>)); <span class="id">exact</span>/<span class="id">subsetC</span>/<span class="id">bigsetU_sup</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">trivIset_mkcond</span> <span class="id">T</span> <span class="id">I</span> (<span class="id">D</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id">trivIset</span> <span class="id">D</span> <span class="id">F</span> &lt;-&gt; <span class="id">trivIset</span> <span class="id">setT</span> (<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="kwd">if</span> <span class="id">i</span> \<span class="kwd">in</span> <span class="id">D</span> <span class="kwd">then</span> <span class="id">F</span> <span class="id">i</span> <span class="kwd">else</span> <span class="id">set0</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof424')">Proof.</span></div>
<div class="proofscript" id="proof424">
<span class="id">split</span>=&gt; [<span class="id">tA</span> <span class="id">i</span> <span class="id">j</span> <span class="id">_</span> <span class="id">_</span>|<span class="id">tA</span> <span class="id">i</span> <span class="id">j</span> <span class="id">Di</span> <span class="id">Dj</span>]; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">have</span> := <span class="id">tA</span> <span class="id">i</span> <span class="id">j</span> <span class="id">Logic.I</span> <span class="id">Logic.I</span>; <span class="id">rewrite</span> !<span class="id">mem_set</span>.<br/>
<span class="id">case</span>: <span class="id">ifPn</span> =&gt; <span class="id">iD</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">set0I</span> =&gt; -[].<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id">ifPn</span> =&gt; [<span class="id">jD</span> /<span class="id">tA</span>|<span class="id">jD</span>]; [<span class="id">apply</span>; <span class="id">exact</span>: <span class="id">set_mem</span>|<span class="id">rewrite</span> <span class="id">setI0</span> =&gt; -[]].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">trivIset_set0</span> {<span class="id">I</span> <span class="id">T</span>} (<span class="id">D</span> : <span class="id">set</span> <span class="id">I</span>) : <span class="id">trivIset</span> <span class="id">D</span> (<span class="kwd">fun</span>=&gt; <span class="id">set0</span> : <span class="id">set</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof425')">Proof.</span></div>
<div class="proofscript" id="proof425">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span> <span class="id">j</span> <span class="id">Di</span> <span class="id">Dj</span>; <span class="id">rewrite</span> <span class="id">setI0</span> =&gt; /<span class="id">set0P</span>; <span class="id">rewrite</span> <span class="id">eqxx</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">trivIsetP</span> {<span class="id">T</span>} {<span class="id">I</span> : <span class="id">eqType</span>} {<span class="id">D</span> : <span class="id">set</span> <span class="id">I</span>} {<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>} :<br/>
&nbsp;&nbsp;<span class="id">trivIset</span> <span class="id">D</span> <span class="id">F</span> &lt;-&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">j</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset">I</a></span>, <span class="id">D</span> <span class="id">i</span> -&gt; <span class="id">D</span> <span class="id">j</span> -&gt; <span class="id">i</span> != <span class="id">j</span> -&gt; <span class="id">F</span> <span class="id">i</span> `&amp;` <span class="id">F</span> <span class="id">j</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof426')">Proof.</span></div>
<div class="proofscript" id="proof426">
<span class="id">split</span>=&gt; <span class="id">tDF</span> <span class="id">i</span> <span class="id">j</span> <span class="id">Di</span> <span class="id">Dj</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">contraNeq</span> =&gt; /<span class="id">set0P</span>/<span class="id">tDF</span>-&gt;.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">set0P</span>; <span class="id">apply</span>: <span class="id">contraNeq</span> =&gt; /<span class="id">tDF</span>-&gt;.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">trivIset_bigsetUI</span> <span class="id">T</span> (<span class="id">D</span> : {<span class="id">pred</span> <span class="id">nat</span>}) (<span class="id">F</span> : <span class="id">nat</span> -&gt; <span class="id">set</span> <span class="id">T</span>) : <span class="id">trivIset</span> <span class="id">D</span> <span class="id">F</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">m</span>, <span class="id">D</span> <span class="id">m</span> -&gt; <span class="id">n</span> &lt;= <span class="id">m</span> -&gt; \<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span> | <span class="id">D</span> <span class="id">i</span>) <span class="id">F</span> <span class="id">i</span> `&amp;` <span class="id">F</span> <span class="id">m</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof427')">Proof.</span></div>
<div class="proofscript" id="proof427">
<span class="id">move</span>=&gt; /<span class="id">trivIsetP</span> <span class="id">tA</span>; <span class="id">elim</span> =&gt; [|<span class="id">n</span> <span class="id">IHn</span>] <span class="id"><a href="mathcomp.classical.classical_sets.html#set">m</a></span> <span class="id">Dm</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">big_ord0</span> <span class="id">set0I</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">lt_nm</span>; <span class="id">rewrite</span> <span class="id">big_mkcond</span>/= <span class="id">big_ord_recr</span> -<span class="id">big_mkcond</span>/=.<br/>
<span class="id">rewrite</span> <span class="id">setIUl</span> <span class="id">IHn</span> 1?<span class="id">ltnW</span>// <span class="id">set0U</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id">ifPn</span> =&gt; [<span class="id">Dn</span>|<span class="id">NDn</span>]; <span class="id">rewrite</span> ?<span class="id">set0I</span>// <span class="id">tA</span>// <span class="id">ltn_eqF</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">trivIset_setIl</span> (<span class="id">T</span> <span class="id">I</span> : <span class="kwd">Type</span>) (<span class="id">D</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) (<span class="id">G</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id">trivIset</span> <span class="id">D</span> <span class="id">F</span> -&gt; <span class="id">trivIset</span> <span class="id">D</span> (<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="id">G</span> <span class="id">i</span> `&amp;` <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof428')">Proof.</span></div>
<div class="proofscript" id="proof428">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">tF</span> <span class="id">i</span> <span class="id">j</span> <span class="id">Di</span> <span class="id">Dj</span> [<span class="id">x</span> [[<span class="id">Gix</span> <span class="id">Fix</span>] [<span class="id">Gjx</span> <span class="id">Fjx</span>]]]; <span class="id"><a href="mathcomp.classical.classical_sets.html#setI0">apply</a></span> <span class="id">tF</span> =&gt; //; <span class="kwd">exists</span> <span class="id">x</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">trivIset_setIr</span> (<span class="id">T</span> <span class="id">I</span> : <span class="kwd">Type</span>) (<span class="id">D</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) (<span class="id">G</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id">trivIset</span> <span class="id">D</span> <span class="id">F</span> -&gt; <span class="id">trivIset</span> <span class="id">D</span> (<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="id">F</span> <span class="id">i</span> `&amp;` <span class="id">G</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof429')">Proof.</span></div>
<div class="proofscript" id="proof429">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">tF</span> <span class="id">i</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">j</a></span> <span class="id">Di</span> <span class="id">Dj</span> [<span class="id">x</span> [[<span class="id">Fix</span> <span class="id">Gix</span>] [<span class="id">Fjx</span> <span class="id">Gjx</span>]]]; <span class="id">apply</span> <span class="id">tF</span> =&gt; //; <span class="kwd">exists</span> <span class="id">x</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sub_trivIset</span> <span class="id">I</span> <span class="id">T</span> (<span class="id">D</span> <span class="id">D</span>' : <span class="id">set</span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id">D</span> `&lt;=` <span class="id">D</span>' -&gt; <span class="id">trivIset</span> <span class="id">D</span>' <span class="id">F</span> -&gt; <span class="id">trivIset</span> <span class="id">D</span> <span class="id">F</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof430')">Proof.</span></div>
<div class="proofscript" id="proof430">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">DD</span>' <span class="id">Ftriv</span> <span class="id">i</span> <span class="id">j</span> /<span class="id">DD</span>' + /<span class="id">DD</span>' + /<span class="id">Ftriv</span>-&gt;//. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">trivIset_bigcup2</span> <span class="id">T</span> (<span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;(<span class="id">A</span> `&amp;` <span class="id">B</span> = <span class="id">set0</span>) = <span class="id">trivIset</span> <span class="id">setT</span> (<span class="id">bigcup2</span> <span class="id">A</span> <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof431')">Proof.</span></div>
<div class="proofscript" id="proof431">
<span class="id">apply</span>/<span class="id">propext</span>; <span class="id">split</span>=&gt; [<span class="id">AB0</span>|/<span class="id">trivIsetP</span>/(<span class="id">_</span> 0 1 <span class="id">Logic.I</span> <span class="id">Logic.I</span> <span class="id">erefl</span>)//].<br/>
<span class="id">apply</span>/<span class="id">trivIsetP</span> =&gt; -[/=|]; <span class="id">rewrite</span> /<span class="id">bigcup2</span> /=.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; [//|[<span class="id">_</span> <span class="id">_</span> <span class="id">_</span> //|<span class="id">j</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>]]; <span class="id">rewrite</span> <span class="id">setI0</span>.<br/>
- <span class="id">move</span>=&gt; [[<span class="id">j</span> <span class="id">_</span> <span class="id">_</span>|]|<span class="id">i</span> <span class="id">j</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>]; [<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setIC</span>| |<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">set0I</span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; [//|<span class="id">j</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>]; <span class="id">rewrite</span> <span class="id">setI0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">trivIset_image</span> <span class="id">T</span> <span class="id">I</span> <span class="id">I</span>' (<span class="id">D</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">f</span> : <span class="id">I</span> -&gt; <span class="id">I</span>') (<span class="id">F</span> : <span class="id">I</span>' -&gt; <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id">trivIset</span> <span class="id">D</span> (<span class="id">F</span> \<span class="id">o</span> <span class="id">f</span>) -&gt; <span class="id">trivIset</span> (<span class="id">f</span> @` <span class="id">D</span>) <span class="id">F</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof432')">Proof.</span></div>
<div class="proofscript" id="proof432">
<span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset">move</a></span>=&gt; <span class="id">trivF</span> <span class="id">i</span> <span class="id">j</span> [{}<span class="id">i</span> <span class="id">Di</span> &lt;-] [{}<span class="id">j</span> <span class="id">Dj</span> &lt;-] <span class="id">Ffij</span>; <span class="id">congr</span> (<span class="id">f</span> <span class="id">_</span>); <span class="id">apply</span>: <span class="id">trivF</span>.<br/>
Qed.</div>
<span class="kwd">Arguments</span> <span class="id">trivIset_image</span> {<span class="id">T</span> <span class="id">I</span> <span class="id">I</span>'} <span class="id">D</span> <span class="id">f</span> <span class="id">F</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">trivIset_comp</span> <span class="id">T</span> <span class="id">I</span> <span class="id">I</span>' (<span class="id">D</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">f</span> : <span class="id">I</span> -&gt; <span class="id">I</span>') (<span class="id">F</span> : <span class="id">I</span>' -&gt; <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="kwd">in</span> <span class="id">D</span> &amp;, <span class="id">injective</span> <span class="id">f</span>} -&gt;<br/>
&nbsp;&nbsp;<span class="id">trivIset</span> <span class="id">D</span> (<span class="id">F</span> \<span class="id">o</span> <span class="id">f</span>) = <span class="id">trivIset</span> (<span class="id">f</span> @` <span class="id">D</span>) <span class="id">F</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof433')">Proof.</span></div>
<div class="proofscript" id="proof433">
<span class="id">move</span>=&gt; <span class="id">finj</span>; <span class="id">apply</span>/<span class="id">propext</span>; <span class="id">split</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">trivIset_image</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">trivF</span> <span class="id">i</span> <span class="id">j</span> <span class="id">Di</span> <span class="id">Dj</span> <span class="id">Ffij</span>; <span class="id">apply</span>: <span class="id">finj</span>; <span class="id">rewrite</span> ?<span class="id">in_setE</span>//.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">trivF</span> =&gt; //=; [<span class="kwd">exists</span> <span class="id">i</span>| <span class="kwd">exists</span> <span class="id">j</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">trivIset_preimage1</span> {<span class="id">aT</span> <span class="id">rT</span>} <span class="id">D</span> (<span class="id">f</span> : <span class="id"><a href="mathcomp.classical.boolp.html#pselect">aT</a></span> -&gt; <span class="id">rT</span>) :<br/>
&nbsp;&nbsp;<span class="id">trivIset</span> <span class="id">D</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">f</span> @^-1` [<span class="id">set</span> <span class="id">x</span>]).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof434')">Proof.</span></div>
<div class="proofscript" id="proof434">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">y</span> <span class="id">z</span> <span class="id">_</span> <span class="id">_</span> [<span class="id">x</span> [&lt;- &lt;-]]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">trivIset_preimage1_in</span> {<span class="id">aT</span>} {<span class="id">rT</span> : <span class="id">choiceType</span>} (<span class="id">D</span> : <span class="id">set</span> <span class="id">rT</span>) (<span class="id">A</span> : <span class="id">set</span> <span class="id">aT</span>)<br/>
&nbsp;&nbsp;(<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) : <span class="id">trivIset</span> <span class="id">D</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">A</span> `&amp;` <span class="id">f</span> @^-1` [<span class="id">set</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#cover">x</a></span>]).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof435')">Proof.</span></div>
<div class="proofscript" id="proof435">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">y</span> <span class="id">z</span> <span class="id">_</span> <span class="id">_</span> [<span class="id">x</span> [[<span class="id">_</span> &lt;-] [<span class="id">_</span> &lt;-]]]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">trivIset_bigcup</span> (<span class="id">I</span> <span class="id">T</span> : <span class="kwd">Type</span>) (<span class="id">J</span> : <span class="id">eqType</span>) (<span class="id">D</span> : <span class="id">J</span> -&gt; <span class="id">set</span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">trivIset</span> (<span class="id">D</span> <span class="id">n</span>) <span class="id">F</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span> <span class="id">m</span> <span class="id">i</span> <span class="id">j</span>, <span class="id">n</span> != <span class="id">m</span> -&gt; <span class="id">D</span> <span class="id">n</span> <span class="id">i</span> -&gt; <span class="id">D</span> <span class="id">m</span> <span class="id">j</span> -&gt; <span class="id">F</span> <span class="id">i</span> `&amp;` <span class="id">F</span> <span class="id">j</span> !=<span class="id">set0</span> -&gt; <span class="id">i</span> = <span class="id">j</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">trivIset</span> (\<span class="id">bigcup_k</span> <span class="id">D</span> <span class="id">k</span>) <span class="id">F</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof436')">Proof.</span></div>
<div class="proofscript" id="proof436">
<span class="id">move</span>=&gt; <span class="id">tB</span> <span class="id">H</span>; <span class="id">move</span>=&gt; <span class="id">i</span> <span class="id">j</span> [<span class="id">n</span> <span class="id"><a name="partition">_</a></span> <span class="id">Dni</span>] [<span class="id">m</span> <span class="id">_</span> <span class="id">Dmi</span>] <span class="id">ij</span>.<br/>
<span class="id">have</span> [<span class="id">nm</span>|<span class="id">nm</span>] := <span class="id">eqVneq</span> <span class="id">n</span> <span class="id">m</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">apply</span>: (<span class="id">tB</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset">m</a></span>) =&gt; //; <span class="id">rewrite</span> -<span class="id">nm</span>.<br/>
<span class="id">exact</span>: (<span class="id">H</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">nm</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">trivIsetT_bigcup</span> <span class="id">T1</span> <span class="id">T2</span> (<span class="id">I</span> : <span class="id">eqType</span>) (<span class="id">D</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T1</span>) (<span class="id">F</span> : <span class="id">T1</span> -&gt; <span class="id">set</span> <span class="id">T2</span>) :<br/>
&nbsp;&nbsp;<span class="id">trivIset</span> <span class="id">setT</span> <span class="id">D</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">trivIset</span> (\<span class="id">bigcup_i</span> <span class="id">D</span> <span class="id">i</span>) <span class="id">F</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">trivIset</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">setT</a></span> (<span class="kwd">fun</span> <span class="id">i</span> =&gt; \<span class="id">bigcup_</span>(<span class="id">t</span> <span class="kwd">in</span> <span class="id">D</span> <span class="id">i</span>) <span class="id">F</span> <span class="id">t</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof437')">Proof.</span></div>
<div class="proofscript" id="proof437">
<span class="id">move</span>=&gt; <span class="id">D0</span> <span class="id">h</span> <span class="id">i</span> <span class="id">j</span> <span class="id">_</span> <span class="id">_</span> [<span class="id">t</span> [[<span class="id">m</span> <span class="id">Dim</span> <span class="id">Fmt</span>] [<span class="id">n</span> <span class="id">Djn</span> <span class="id">Fnt</span>]]].<br/>
<span class="id">have</span> <span class="id">mn</span> : <span class="id">m</span> = <span class="id">n</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">h</span> =&gt; //; [<span class="kwd">exists</span> <span class="id">i</span>|<span class="kwd">exists</span> <span class="id">j</span>|<span class="kwd">exists</span> <span class="id">t</span>].<br/>
<span class="id">rewrite</span> {}<span class="id">mn</span> {<span class="id">m</span>} <span class="kwd">in</span> <span class="id">Dim</span> <span class="id">Fmt</span> *.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">D0</span> =&gt; //; <span class="kwd">exists</span> <span class="id">n</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">cover</span> <span class="id">T</span> <span class="id">I</span> <span class="id">D</span> (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) := \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">D</span>) <span class="id">F</span> <span class="id">i</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">coverE</span> <span class="id">T</span> <span class="id">I</span> <span class="id">D</span> (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) : <span class="id">cover</span> <span class="id">D</span> <span class="id">F</span> = \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">D</span>) <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof438')">Proof.</span></div>
<div class="proofscript" id="proof438">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cover_restr</span> <span class="id">T</span> <span class="id">I</span> <span class="id">D</span>' <span class="id">D</span> (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id">D</span> `&lt;=` <span class="id">D</span>' -&gt; (<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">D</span>' <span class="id">i</span> -&gt; ~ <span class="id">D</span> <span class="id">i</span> -&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset">F</a></span> <span class="id">i</span> = <span class="id">set0</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">cover</span> <span class="id">D</span> <span class="id">F</span> = <span class="id">cover</span> <span class="id">D</span>' <span class="id">F</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof439')">Proof.</span></div>
<div class="proofscript" id="proof439">
<span class="id">move</span>=&gt; <span class="id">DD</span>' <span class="id">D</span>'<span class="id">DF</span>; <span class="id">rewrite</span> /<span class="id">cover</span> <span class="id">eqEsubset</span>; <span class="id">split</span>=&gt; [<span class="id">r</span> [<span class="id">i</span> <span class="id">Di</span> <span class="id">Fit</span>]|<span class="id">r</span> [<span class="id">i</span> <span class="id">D</span>'<span class="id">i</span> <span class="id">Fit</span>]].<br/>
- <span class="kwd">by</span> <span class="id">have</span> [<span class="id">D</span>'<span class="id">i</span>|] := <span class="id">pselect</span> (<span class="id">D</span>' <span class="id">i</span>); [<span class="kwd">exists</span> <span class="id">i</span> | <span class="id">have</span> := <span class="id">DD</span>' <span class="id">_</span> <span class="id">Di</span>].<br/>
- <span class="kwd">by</span> <span class="id">have</span> [<span class="id">Di</span>|<span class="id">Di</span>] := <span class="id">pselect</span> (<span class="id">D</span> <span class="id">i</span>); [<span class="kwd">exists</span> <span class="id">i</span> | <span class="id">move</span>: <span class="id">Fit</span>; <span class="id">rewrite</span> (<span class="id">D</span>'<span class="id">DF</span> <span class="id">i</span>)].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eqcover_r</span> <span class="id">T</span> <span class="id">I</span> <span class="id">D</span> (<span class="id">F</span> <span class="id">G</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;[<span class="id">set</span> <span class="id">F</span> <span class="id">i</span> | <span class="id">i</span> <span class="kwd">in</span> <span class="id">D</span>] = [<span class="id">set</span> <span class="id">G</span> <span class="id">i</span> | <span class="id">i</span> <span class="kwd">in</span> <span class="id">D</span>] -&gt;<br/>
&nbsp;&nbsp;<span class="id">cover</span> <span class="id">D</span> <span class="id">F</span> = <span class="id">cover</span> <span class="id">D</span> <span class="id">G</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof440')">Proof.</span></div>
<div class="proofscript" id="proof440">
<span class="id">move</span>=&gt; <span class="id">FG</span>.<br/>
<span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id"><a href="mathcomp.classical.classical_sets.html#set">split</a></span> =&gt; [<span class="id">t</span> [<span class="id"><a href="mathcomp.classical.classical_sets.html#set">i</a></span> <span class="id">Di</span> <span class="id">Fit</span>]|<span class="id">t</span> [<span class="id">i</span> <span class="id">Di</span> <span class="id">Git</span>]].<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">j</span> <span class="id">Dj</span> <span class="id">GF</span>] : [<span class="id">set</span> <span class="id">G</span> <span class="id">i</span> | <span class="id">i</span> <span class="kwd">in</span> <span class="id">D</span>] (<span class="id">F</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset">i</a></span>) <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">FG</span> /<span class="id">mkset</span>; <span class="kwd">exists</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">j</span> =&gt; //; <span class="id">rewrite</span> <span class="id">GF</span>.<br/>
<span class="id">have</span> [<span class="id">j</span> <span class="id">Dj</span> <span class="id">GF</span>] : [<span class="id">set</span> <span class="id">F</span> <span class="id">i</span> | <span class="id">i</span> <span class="kwd">in</span> <span class="id">D</span>] (<span class="id">G</span> <span class="id">i</span>) <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">FG</span> /<span class="id">mkset</span>; <span class="kwd">exists</span> <span class="id">i</span>.<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">j</span> =&gt; //; <span class="id">rewrite</span> <span class="id">GF</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">partition</span> <span class="id">T</span> <span class="id">I</span> <span class="id">D</span> (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) :=<br/>
&nbsp;&nbsp;[/\ <span class="id">cover</span> <span class="id">D</span> <span class="id">F</span> = <span class="id">A</span>, <span class="id">trivIset</span> <span class="id">D</span> <span class="id">F</span> &amp; <span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">D</a></span> <span class="id">i</span> -&gt; <span class="id">F</span> <span class="id">i</span> !=<span class="id">set0</span>].<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">pblock_index</span> <span class="id">T</span> (<span class="id">I</span> : <span class="id">pointedType</span>) <span class="id">D</span> (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) (<span class="id">x</span> : <span class="id">T</span>) :=<br/>
&nbsp;&nbsp;[<span class="id">get</span> <span class="id">i</span> | <span class="id">D</span> <span class="id">i</span> /\ <span class="id">F</span> <span class="id">i</span> <span class="id">x</span>].<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">pblock</span> <span class="id">T</span> (<span class="id">I</span> : <span class="id">pointedType</span>) <span class="id">D</span> (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#O">x</a></span> : <span class="id">T</span>) :=<br/>
&nbsp;&nbsp;<span class="id">F</span> (<span class="id">pblock_index</span> <span class="id">D</span> <span class="id">F</span> <span class="id">x</span>).<br/>
<br/>
<br/>
<span class="kwd">Notation</span> <span class="id">trivIsets</span> <span class="id">X</span> := (<span class="id">trivIset</span> <span class="id">X</span> <span class="id">id</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">trivIset_sets</span> <span class="id">T</span> <span class="id">I</span> <span class="id">D</span> (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id">trivIset</span> <span class="id">D</span> <span class="id">F</span> -&gt; <span class="id">trivIsets</span> [<span class="id">set</span> <span class="id">F</span> <span class="id">i</span> | <span class="id">i</span> <span class="kwd">in</span> <span class="id">D</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof441')">Proof.</span></div>
<div class="proofscript" id="proof441">
 <span class="id">exact</span>: <span class="id">trivIset_image</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">trivIset_widen</span> <span class="id">T</span> <span class="id">I</span> <span class="id">D</span>' <span class="id">D</span> (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id">D</span> `&lt;=` <span class="id">D</span>' -&gt; (<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">D</span>' <span class="id">i</span> -&gt; ~ <span class="id">D</span> <span class="id">i</span> -&gt; <span class="id">F</span> <span class="id">i</span> = <span class="id">set0</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">trivIset</span> <span class="id">D</span> <span class="id">F</span> = <span class="id">trivIset</span> <span class="id">D</span>' <span class="id">F</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof442')">Proof.</span></div>
<div class="proofscript" id="proof442">
<span class="id">move</span>=&gt; <span class="id">DD</span>' <span class="id">DD</span>'<span class="id">F</span>.<br/>
<span class="id">rewrite</span> <span class="id">propeqE</span>; <span class="id">split</span>=&gt; [<span class="id">DF</span> <span class="id">i</span> <span class="id">j</span> <span class="id">D</span>'<span class="id">i</span> <span class="id">D</span>'<span class="id">j</span> <span class="id">FiFj0</span>|<span class="id">D</span>'<span class="id">F</span> <span class="id">i</span> <span class="id">j</span> <span class="id">Di</span> <span class="id">Dj</span> <span class="id">FiFj0</span>].<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">Di</span>|<span class="id">Di</span>] := <span class="id">pselect</span> (<span class="id">D</span> <span class="id">i</span>); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>: <span class="id">FiFj0</span>; <span class="id">rewrite</span> (<span class="id">DD</span>'<span class="id">F</span> <span class="id">i</span>) // <span class="id">set0I</span> =&gt; /<span class="id">set0P</span>; <span class="id">rewrite</span> <span class="id">eqxx</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">Dj</span>|<span class="id">Dj</span>] := <span class="id">pselect</span> (<span class="id">D</span> <span class="id"><a name="ZL.tot_lub">j</a></span>).<br/>
&nbsp;&nbsp;- <span class="id">exact</span>: <span class="id">DF</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>: <span class="id">FiFj0</span>; <span class="id"><a href="mathcomp.classical.classical_sets.html#ZL.R">rewrite</a></span> (<span class="id">DD</span>'<span class="id">F</span> <span class="id">j</span>) // <span class="id">setI0</span> =&gt; /<span class="id">set0P</span>; <span class="id">rewrite</span> <span class="id">eqxx</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span> <span class="id">D</span>'<span class="id">F</span> =&gt; //; <span class="id">apply</span> <span class="id">DD</span>'.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">perm_eq_trivIset</span> {<span class="id">T</span> : <span class="id">eqType</span>} (<span class="id">s1</span> <span class="id">s2</span> : <span class="id">seq</span> (<span class="id">set</span> <span class="id">T</span>)) (<span class="id">D</span> : <span class="id">set</span> <span class="id">nat</span>) :<br/>
&nbsp;&nbsp;[<span class="id">set</span> <span class="id">k</span> | (<span class="id">k</span> &lt; <span class="id">size</span> <span class="id">s1</span>)] `&lt;=` <span class="id">D</span> -&gt; <span class="id">perm_eq</span> <span class="id">s1</span> <span class="id">s2</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">trivIset</span> <span class="id">D</span> (<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="id">nth</span> <span class="id">set0</span> <span class="id">s1</span> <span class="id">i</span>) -&gt; <span class="id">trivIset</span> <span class="id">D</span> (<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="id">nth</span> <span class="id">set0</span> <span class="id">s2</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof443')">Proof.</span></div>
<div class="proofscript" id="proof443">
<span class="id">move</span>=&gt; <span class="id">s1D</span>; <span class="id"><a href="mathcomp.classical.classical_sets.html#ZL.Tch">rewrite</a></span> <span class="id">perm_sym</span> =&gt; /(<span class="id">perm_iotaP</span> <span class="id">set0</span>)[<span class="id">s</span> <span class="id">ss1</span> <span class="id">s12</span>] /<span class="id">trivIsetP</span> <span class="id">ts1</span>.<br/>
<span class="id">apply</span>/<span class="id">trivIsetP</span> =&gt; <span class="id">i</span> <span class="id">j</span> <span class="id">Di</span> <span class="id">Dj</span> <span class="id">ij</span>.<br/>
<span class="id">rewrite</span> {}<span class="id">s12</span> {<span class="id">s2</span>}; <span class="id">have</span> [<span class="id">si</span>|<span class="id">si</span>] := <span class="id">ltnP</span> <span class="id">i</span> (<span class="id">size</span> <span class="id">s</span>); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">nth_default</span> <span class="id">set0</span>) ?<span class="id">size_map</span>// <span class="id">set0I</span>.<br/>
<span class="id">rewrite</span> (<span class="id">nth_map</span> <span class="id">O</span>) //; <span class="id">have</span> [<span class="id">sj</span>|<span class="id">sj</span>] := <span class="id">ltnP</span> <span class="id">j</span> (<span class="id">size</span> <span class="id">s</span>); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">nth_default</span> <span class="id">set0</span>) ?<span class="id">size_map</span>// <span class="id">setI0</span>.<br/>
<span class="id">have</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#ZL.lub">nth_mem</a></span> <span class="id">k</span> : <span class="id">k</span> &lt; <span class="id">size</span> <span class="id">s</span> -&gt; <span class="id">nth</span> <span class="id">O</span> <span class="id">s</span> <span class="id">k</span> \<span class="kwd">in</span> <span class="id">iota</span> 0 (<span class="id">size</span> <span class="id">s1</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; ?; <span class="id">rewrite</span> -(<span class="id">perm_mem</span> <span class="id">ss1</span>) <span class="id">mem_nth</span>.<br/>
<span class="id">rewrite</span> (<span class="id">nth_map</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#ZL.R">O</a></span>)// <span class="id">ts1</span> ?(<span class="id">nth_uniq</span>,(<span class="id">perm_uniq</span> <span class="id">ss1</span>),<span class="id">iota_uniq</span>)//; <span class="id">apply</span>/<span class="id">s1D</span>.<br/>
- <span class="kwd">by</span> <span class="id">have</span> := <span class="id"><a href="mathcomp.classical.classical_sets.html#ZL.Tp">nth_mem</a></span> <span class="id">_</span> <span class="id">si</span>; <span class="id">rewrite</span> <span class="id">mem_iota</span> <span class="id">leq0n</span> <span class="id">add0n</span>.<br/>
- <span class="kwd">by</span> <span class="id">have</span> := <span class="id">nth_mem</span> <span class="id">_</span> <span class="id">sj</span>; <span class="id">rewrite</span> <span class="id">mem_iota</span> <span class="id">leq0n</span> <span class="id">add0n</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">partitions</span>.<br/>
<br/>
#[<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#svalP">deprecated</a></span>(<span class="id">note</span>="<span class="id">Use</span> <span class="id">trivIset_setIl</span> <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">trivIset_setI</span> := <span class="id">trivIset_setIl</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">total_on</span> <span class="id">T</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">R</span> : <span class="id">T</span> -&gt; <span class="id">T</span> -&gt; <span class="kwd">Prop</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#ZL.R">t</a></span>, <span class="id">A</span> <span class="id">s</span> -&gt; <span class="id">A</span> <span class="id">t</span> -&gt; <span class="id">R</span> <span class="id">s</span> <span class="id">t</span> \/ <span class="id">R</span> <span class="id">t</span> <span class="id">s</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">ZL</span>.<br/>
<br/>
<span class="kwd">Variable</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#ZL.R">T</a></span> : <span class="kwd">Type</span>) (<span class="id">t0</span> : <span class="id">T</span>) (<span class="id">R</span> : <span class="id">T</span> -&gt; <span class="id">T</span> -&gt; <span class="kwd">Prop</span>).<br/>
<span class="kwd">Hypothesis</span> (<span class="id">Rrefl</span> : <span class="kwd">forall</span> <span class="id">t</span>, <span class="id">R</span> <span class="id">t</span> <span class="id">t</span>).<br/>
<span class="kwd">Hypothesis</span> (<span class="id">Rtrans</span> : <span class="kwd">forall</span> <span class="id">r</span> <span class="id">s</span> <span class="id">t</span>, <span class="id">R</span> <span class="id">r</span> <span class="id">s</span> -&gt; <span class="id">R</span> <span class="id">s</span> <span class="id">t</span> -&gt; <span class="id">R</span> <span class="id">r</span> <span class="id">t</span>).<br/>
<span class="kwd">Hypothesis</span> (<span class="id">Rantisym</span> : <span class="kwd">forall</span> <span class="id">s</span> <span class="id">t</span>, <span class="id">R</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#ZL.R">s</a></span> <span class="id">t</span> -&gt; <span class="id">R</span> <span class="id">t</span> <span class="id">s</span> -&gt; <span class="id">s</span> = <span class="id">t</span>).<br/>
<span class="kwd">Hypothesis</span> (<span class="id">tot_lub</span> : <span class="kwd">forall</span> <span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>, <span class="id">total_on</span> <span class="id">A</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#ZL.R">R</a></span> -&gt; <span class="kwd">exists</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">s</span>, <span class="id">A</span> <span class="id">s</span> -&gt; <span class="id">R</span> <span class="id">s</span> <span class="id">t</span>) /\ <span class="kwd">forall</span> <span class="id">r</span>, (<span class="kwd">forall</span> <span class="id">s</span>, <span class="id">A</span> <span class="id">s</span> -&gt; <span class="id">R</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#ZL.Tp">s</a></span> <span class="id">r</span>) -&gt; <span class="id">R</span> <span class="id">t</span> <span class="id">r</span>).<br/>
<span class="kwd">Hypothesis</span> (<span class="id">Rsucc</span> : <span class="kwd">forall</span> <span class="id">s</span>, <span class="kwd">exists</span> <span class="id">t</span>, <span class="id">R</span> <span class="id">s</span> <span class="id">t</span> /\ <span class="id">s</span> &lt;&gt; <span class="id">t</span> /\<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span>, <span class="id">R</span> <span class="id">s</span> <span class="id">r</span> -&gt; <span class="id">R</span> <span class="id">r</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#total_on">t</a></span> -&gt; <span class="id">r</span> = <span class="id"><a href="mathcomp.classical.classical_sets.html#tower">s</a></span> \/ <span class="id">r</span> = <span class="id">t</span>).<br/>
<br/>
<span class="kwd">Let</span> <span class="id">Teq</span> := @<span class="id">gen_eqMixin</span> <span class="id">T</span>.<br/>
<span class="kwd">Let</span> <span class="id">Tch</span> := @<span class="id">gen_choiceMixin</span> <span class="id">T</span>.<br/>
<span class="kwd">Let</span> <span class="id">Tp</span> := <span class="id">Pointed.Pack</span> (<span class="id">Pointed.Class</span> (<span class="id">Choice.Class</span> <span class="id">Teq</span> <span class="id">Tch</span>) <span class="id">t0</span>).<br/>
<span class="kwd">Let</span> <span class="id">lub</span> := <span class="kwd">fun</span> <span class="id">A</span> : {<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span> | <span class="id">total_on</span> <span class="id">A</span> <span class="id">R</span>} =&gt;<br/>
&nbsp;&nbsp;[<span class="id"><a href="mathcomp.classical.boolp.html#asboolP">get</a></span> <span class="id">t</span> : <span class="id">Tp</span> | (<span class="kwd">forall</span> <span class="id">s</span>, <span class="id">sval</span> <span class="id">A</span> <span class="id">s</span> -&gt; <span class="id">R</span> <span class="id">s</span> <span class="id">t</span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span>, (<span class="kwd">forall</span> <span class="id">s</span>, <span class="id">sval</span> <span class="id">A</span> <span class="id">s</span> -&gt; <span class="id">R</span> <span class="id">s</span> <span class="id">r</span>) -&gt; <span class="id">R</span> <span class="id">t</span> <span class="id">r</span>].<br/>
<span class="kwd">Let</span> <span class="id"><a href="mathcomp.classical.boolp.html#existsp_asboolPn">succ</a></span> := <span class="kwd">fun</span> <span class="id">s</span> =&gt; [<span class="id">get</span> <span class="id">t</span> : <span class="id">Tp</span> | <span class="id">R</span> <span class="id">s</span> <span class="id">t</span> /\ <span class="id">s</span> &lt;&gt; <span class="id">t</span> /\<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span>, <span class="id">R</span> <span class="id">s</span> <span class="id">r</span> -&gt; <span class="id">R</span> <span class="id">r</span> <span class="id">t</span> -&gt; <span class="id">r</span> = <span class="id">s</span> \/ <span class="id">r</span> = <span class="id">t</span>].<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id">tower</span> : <span class="id">set</span> <span class="id">T</span> :=<br/>
&nbsp;&nbsp;| <span class="id">Lub</span> : <span class="kwd">forall</span> <span class="id">A</span>, <span class="id">sval</span> <span class="id">A</span> `&lt;=` <span class="id">tower</span> -&gt; <span class="id">tower</span> (<span class="id">lub</span> <span class="id">A</span>)<br/>
&nbsp;&nbsp;| <span class="id">Succ</span> : <span class="kwd">forall</span> <span class="id">t</span>, <span class="id">tower</span> <span class="id">t</span> -&gt; <span class="id">tower</span> (<span class="id">succ</span> <span class="id">t</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">ZL</span>' : <span class="id">False</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof444')">Proof.</span></div>
<div class="proofscript" id="proof444">
<span class="id">have</span> <span class="id">lub_ub</span> (<span class="id">A</span> : {<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span> | <span class="id">total_on</span> <span class="id">A</span> <span class="id">R</span>}) :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span>, <span class="id">sval</span> <span class="id">A</span> <span class="id">s</span> -&gt; <span class="id">R</span> <span class="id">s</span> (<span class="id">lub</span> <span class="id">A</span>).<br/>
&nbsp;&nbsp;<span class="id">suff</span> /<span class="id">getPex</span> [] : <span class="kwd">exists</span> <span class="id">t</span> : <span class="id">Tp</span>, (<span class="kwd">forall</span> <span class="id">s</span>, <span class="id">sval</span> <span class="id">A</span> <span class="id">s</span> -&gt; <span class="id">R</span> <span class="id">s</span> <span class="id">t</span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span>, (<span class="kwd">forall</span> <span class="id">s</span>, <span class="id">sval</span> <span class="id">A</span> <span class="id">s</span> -&gt; <span class="id">R</span> <span class="id">s</span> <span class="id">r</span>) -&gt; <span class="id">R</span> <span class="id">t</span> <span class="id">r</span> <span class="kwd">by</span> [].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">tot_lub</span>; <span class="id">apply</span>: (<span class="id">svalP</span> <span class="id">A</span>).<br/>
<span class="id">have</span> <span class="id">lub_lub</span> (<span class="id">A</span> : {<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span> | <span class="id">total_on</span> <span class="id">A</span> <span class="id">R</span>}) :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span>, (<span class="kwd">forall</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#ZL.Rtrans">s</a></span>, <span class="id">sval</span> <span class="id">A</span> <span class="id">s</span> -&gt; <span class="id">R</span> <span class="id">s</span> <span class="id">t</span>) -&gt; <span class="id">R</span> (<span class="id">lub</span> <span class="id">A</span>) <span class="id">t</span>.<br/>
&nbsp;&nbsp;<span class="id">suff</span> /<span class="id">getPex</span> [] : <span class="kwd">exists</span> <span class="id">t</span> : <span class="id">Tp</span>, (<span class="kwd">forall</span> <span class="id">s</span>, <span class="id">sval</span> <span class="id">A</span> <span class="id">s</span> -&gt; <span class="id">R</span> <span class="id">s</span> <span class="id">t</span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span>, (<span class="kwd">forall</span> <span class="id">s</span>, <span class="id">sval</span> <span class="id">A</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#Succ">s</a></span> -&gt; <span class="id">R</span> <span class="id">s</span> <span class="id">r</span>) -&gt; <span class="id">R</span> <span class="id">t</span> <span class="id">r</span> <span class="kwd">by</span> [].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">tot_lub</span>; <span class="id">apply</span>: (<span class="id">svalP</span> <span class="id">A</span>).<br/>
<span class="id">have</span> <span class="id">RS</span> <span class="id">s</span> : <span class="id">R</span> <span class="id">s</span> (<span class="id">succ</span> <span class="id">s</span>) /\ <span class="id">s</span> &lt;&gt; <span class="id">succ</span> <span class="id">s</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">have</span> /<span class="id">getPex</span> [? []] : <span class="kwd">exists</span> <span class="id">t</span> : <span class="id">Tp</span>, <span class="id">R</span> <span class="id">s</span> <span class="id">t</span> /\ <span class="id">s</span> &lt;&gt; <span class="id">t</span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span>, <span class="id">R</span> <span class="id">s</span> <span class="id">r</span> -&gt; <span class="id">R</span> <span class="id">r</span> <span class="id">t</span> -&gt; <span class="id">r</span> = <span class="id">s</span> \/ <span class="id">r</span> = <span class="id">t</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">Rsucc</span>.<br/>
<span class="id">have</span> <span class="id">succS</span> <span class="id">s</span> : <span class="kwd">forall</span> <span class="id">t</span>, <span class="id">R</span> <span class="id">s</span> <span class="id">t</span> -&gt; <span class="id">R</span> <span class="id">t</span> (<span class="id">succ</span> <span class="id">s</span>) -&gt; <span class="id">t</span> = <span class="id">s</span> \/ <span class="id">t</span> = <span class="id">succ</span> <span class="id">s</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">have</span> /<span class="id">getPex</span> [? []] : <span class="kwd">exists</span> <span class="id">t</span> : <span class="id">Tp</span>, <span class="id">R</span> <span class="id">s</span> <span class="id">t</span> /\ <span class="id">s</span> &lt;&gt; <span class="id">t</span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span>, <span class="id">R</span> <span class="id">s</span> <span class="id">r</span> -&gt; <span class="id">R</span> <span class="id">r</span> <span class="id">t</span> -&gt; <span class="id">r</span> = <span class="id">s</span> \/ <span class="id">r</span> = <span class="id">t</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">Rsucc</span>.<br/>
<span class="id">suff</span> <span class="id">Twtot</span> : <span class="id">total_on</span> <span class="id">tower</span> <span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">R_S</span>] := <span class="id">RS</span> (<span class="id">lub</span> (<span class="id">exist</span> <span class="id">_</span> <span class="id">tower</span> <span class="id">Twtot</span>)); <span class="id">apply</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">Rantisym</span> =&gt; //; <span class="id">apply</span>/<span class="id">lub_ub</span>/<span class="id">Succ</span>/<span class="id">Lub</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">s</span> <span class="id">t</span> <span class="id">Tws</span>; <span class="id">elim</span>: <span class="id">Tws</span> <span class="id">t</span> =&gt; {<span class="id">s</span>} [<span class="id">A</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#subset_trans">sATw</a></span> <span class="id">ihA</span>|<span class="id">s</span> <span class="id">Tws</span> <span class="id">ihs</span>] <span class="id">t</span> <span class="id">Twt</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> [?|/<span class="id">asboolP</span>] := <span class="id">pselect</span> (<span class="kwd">forall</span> <span class="id">s</span>, <span class="id">sval</span> <span class="id">A</span> <span class="id">s</span> -&gt; <span class="id">R</span> <span class="id">s</span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">left</span>; <span class="id">apply</span>: <span class="id">lub_lub</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">asbool_neg</span> =&gt; /<span class="id">existsp_asboolPn</span> [<span class="id">s</span> /<span class="id">asboolP</span>].<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">asbool_neg</span> =&gt; /<span class="id">imply_asboolPn</span> [<span class="id">As</span> <span class="id">nRst</span>]; <span class="id">right</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">have</span> /<span class="id">lub_ub</span> := <span class="id">As</span>; <span class="id">apply</span>: <span class="id">Rtrans</span>; <span class="id">have</span> [] := <span class="id">ihA</span> <span class="id">_</span> <span class="id">As</span> <span class="id">_</span> <span class="id">Twt</span>.<br/>
<span class="id">suff</span> /(<span class="id">_</span> <span class="id">_</span> <span class="id">Twt</span>) [<span class="id">Rts</span>|<span class="id">RSst</span>] : <span class="kwd">forall</span> <span class="id">r</span>, <span class="id">tower</span> <span class="id">r</span> -&gt; <span class="id">R</span> <span class="id">r</span> <span class="id">s</span> \/ <span class="id">R</span> (<span class="id">succ</span> <span class="id">s</span>) <span class="id">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">right</span>; <span class="id">apply</span>: <span class="id">Rtrans</span> <span class="id">Rts</span> <span class="id">_</span>; <span class="id">have</span> [] := <span class="id">RS</span> <span class="id">s</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">left</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">r</span>; <span class="id">elim</span>=&gt; {<span class="id">r</span>} [<span class="id">A</span> <span class="id">sATw</span> <span class="id">ihA</span>|<span class="id">r</span> <span class="id">Twr</span> <span class="id">ihr</span>].<br/>
&nbsp;&nbsp;<span class="id">have</span> [?|/<span class="id">asboolP</span>] := <span class="id">pselect</span> (<span class="kwd">forall</span> <span class="id">r</span>, <span class="id">sval</span> <span class="id">A</span> <span class="id">r</span> -&gt; <span class="id">R</span> <span class="id">r</span> <span class="id">s</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">left</span>; <span class="id">apply</span>: <span class="id">lub_lub</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">asbool_neg</span> =&gt; /<span class="id">existsp_asboolPn</span> [<span class="id">r</span> /<span class="id">asboolP</span>].<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">asbool_neg</span> =&gt; /<span class="id">imply_asboolPn</span> [<span class="id">Ar</span> <span class="id">nRrs</span>]; <span class="id">right</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">have</span> /<span class="id">lub_ub</span> := <span class="id">Ar</span>; <span class="id">apply</span>: <span class="id">Rtrans</span>; <span class="id">have</span> /<span class="id">ihA</span> [] := <span class="id">Ar</span>.<br/>
<span class="id">have</span> [<span class="id">Rrs</span>|<span class="id">RSsr</span>] := <span class="id">ihr</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">right</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.boolp.html#asbool_neg">Rtrans</a></span> <span class="id">RSsr</span> <span class="id">_</span>; <span class="id"><a href="mathcomp.classical.boolp.html#forallp_asboolPn">have</a></span> [] := <span class="id">RS</span> <span class="id">r</span>.<br/>
<span class="id">have</span> : <span class="id">tower</span> (<span class="id">succ</span> <span class="id">r</span>) <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">Succ</span>.<br/>
<span class="id">move</span>=&gt; /<span class="id">ihs</span> [<span class="id">RsSr</span>|]; <span class="id">last</span> <span class="kwd">by</span> <span class="id">left</span>.<br/>
<span class="kwd">by</span> <span class="id">have</span> [-&gt;|-&gt;] := <span class="id">succS</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.boolp.html#asbool_neg">Rrs</a></span> <span class="id">RsSr</span>; [<span class="id">right</span>|<span class="id">left</span>]; <span class="id">apply</span>: <span class="id">Rrefl</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">ZL</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">Zorn</span> <span class="id">T</span> (<span class="id">R</span> : <span class="id">T</span> -&gt; <span class="id">T</span> -&gt; <span class="kwd">Prop</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">t</span>, <span class="id">R</span> <span class="id">t</span> <span class="id">t</span>) -&gt; (<span class="kwd">forall</span> <span class="id">r</span> <span class="id">s</span> <span class="id">t</span>, <span class="id">R</span> <span class="id">r</span> <span class="id">s</span> -&gt; <span class="id">R</span> <span class="id">s</span> <span class="id">t</span> -&gt; <span class="id">R</span> <span class="id">r</span> <span class="id">t</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">s</span> <span class="id">t</span>, <span class="id">R</span> <span class="id">s</span> <span class="id">t</span> -&gt; <span class="id">R</span> <span class="id">t</span> <span class="id">s</span> -&gt; <span class="id">s</span> = <span class="id">t</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>, <span class="id">total_on</span> <span class="id">A</span> <span class="id">R</span> -&gt; <span class="kwd">exists</span> <span class="id">t</span>, <span class="kwd">forall</span> <span class="id">s</span>, <span class="id">A</span> <span class="id">s</span> -&gt; <span class="id">R</span> <span class="id">s</span> <span class="id">t</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">t</span>, <span class="kwd">forall</span> <span class="id">s</span>, <span class="id">R</span> <span class="id">t</span> <span class="id">s</span> -&gt; <span class="id">s</span> = <span class="id">t</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof445')">Proof.</span></div>
<div class="proofscript" id="proof445">
<span class="id">move</span>=&gt; <span class="id">Rrefl</span> <span class="id">Rtrans</span> <span class="id">Rantisym</span> <span class="id">Rtot_max</span>.<br/>
<span class="id">pose</span> <span class="id">totR</span> := {<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span> | <span class="id">total_on</span> <span class="id">A</span> <span class="id">R</span>}.<br/>
<span class="id">set</span> <span class="id">R</span>' := <span class="kwd">fun</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">totR</span> =&gt; <span class="id">sval</span> <span class="id">A</span> `&lt;=` <span class="id">sval</span> <span class="id">B</span>.<br/>
<span class="id">have</span> <span class="id">R</span>'<span class="id">refl</span> <span class="id">A</span> : <span class="id">R</span>' <span class="id">A</span> <span class="id">A</span> <span class="kwd">by</span> [].<br/>
<span class="id">have</span> <span class="id">R</span>'<span class="id">trans</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> : <span class="id">R</span>' <span class="id">A</span> <span class="id">B</span> -&gt; <span class="id">R</span>' <span class="id">B</span> <span class="id">C</span> -&gt; <span class="id">R</span>' <span class="id">A</span> <span class="id">C</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">subset_trans</span>.<br/>
<span class="id">have</span> <span class="id">R</span>'<span class="id">antisym</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">R</span>' <span class="id">A</span> <span class="id">B</span> -&gt; <span class="id">R</span>' <span class="id">B</span> <span class="id">A</span> -&gt; <span class="id">A</span> = <span class="id">B</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id">R</span>'; <span class="id">move</span>: <span class="id">A</span> <span class="id">B</span> =&gt; [/= <span class="id">A</span> <span class="id">totA</span>] [/= <span class="id">B</span> <span class="id">totB</span>] <span class="id">sAB</span> <span class="id">sBA</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">eq_exist</span>; <span class="id">rewrite</span> <span class="id">predeqE</span>=&gt; ?; <span class="id">split</span>=&gt; [/<span class="id">sAB</span>|/<span class="id">sBA</span>].<br/>
<span class="id">have</span> <span class="id">R</span>'<span class="id">tot_lub</span> <span class="id">A</span> : <span class="id">total_on</span> <span class="id">A</span> <span class="id">R</span>' -&gt; <span class="kwd">exists</span> <span class="id">t</span>, (<span class="kwd">forall</span> <span class="id">s</span>, <span class="id">A</span> <span class="id">s</span> -&gt; <span class="id">R</span>' <span class="id">s</span> <span class="id">t</span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span>, (<span class="kwd">forall</span> <span class="id">s</span>, <span class="id">A</span> <span class="id">s</span> -&gt; <span class="id">R</span>' <span class="id">s</span> <span class="id">r</span>) -&gt; <span class="id">R</span>' <span class="id">t</span> <span class="id">r</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">Atot</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">AUtot</span> : <span class="id">total_on</span> (\<span class="id">bigcup_</span>(<span class="id">B</span> <span class="kwd">in</span> <span class="id">A</span>) (<span class="id">sval</span> <span class="id">B</span>)) <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">s</span> <span class="id">t</span> [<span class="id">B</span> <span class="id">AB</span> <span class="id">Bs</span>] [<span class="id">C</span> <span class="id"><a name="Zorn_subset">AC</a></span> <span class="id">Ct</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> [/(<span class="id">_</span> <span class="id">_</span> <span class="id"><a name="Zorn_subset.T">Bs</a></span>) <span class="id">Cs</span>|/(<span class="id">_</span> <span class="id"><a name="Zorn_subset.P">_</a></span> <span class="id">Ct</span>) <span class="id">Bt</span>] := <span class="id">Atot</span> <span class="id">_</span> <span class="id">_</span> <span class="id">AB</span> <span class="id"><a name="Zorn_bigcup">AC</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">have</span> /(<span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Cs</span> <span class="id">Ct</span>) := <span class="id">svalP</span> <span class="id">C</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">have</span> /(<span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Bs</span> <span class="id">Bt</span>) := <span class="id">svalP</span> <span class="id">B</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">exist</span> <span class="id">_</span> (\<span class="id">bigcup_</span>(<span class="id">B</span> <span class="kwd">in</span> <span class="id">A</span>) <span class="id">sval</span> <span class="id">B</span>) <span class="id">AUtot</span>); <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">B</span> ? ? ?; <span class="kwd">exists</span> <span class="id">B</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">B</span> <span class="id">Bub</span> ? /= [? /<span class="id">Bub</span>]; <span class="id">apply</span>.<br/>
<span class="id">apply</span>: <span class="id">contrapT</span> =&gt; <span class="id">nomax</span>.<br/>
<span class="id">have</span> {}<span class="id">nomax</span> <span class="id">t</span> : <span class="kwd">exists</span> <span class="id">s</span>, <span class="id">R</span> <span class="id">t</span> <span class="id">s</span> /\ <span class="id">s</span> &lt;&gt; <span class="id">t</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> /<span class="id">asboolP</span> := <span class="id">nomax</span>; <span class="id">rewrite</span> <span class="id">asbool_neg</span> =&gt; /<span class="id">forallp_asboolPn</span> /(<span class="id">_</span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; /<span class="id">asboolP</span>; <span class="id">rewrite</span> <span class="id">asbool_neg</span> =&gt; /<span class="id">existsp_asboolPn</span> [<span class="id">s</span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">asboolP</span>; <span class="id">rewrite</span> <span class="id">asbool_neg</span> =&gt; /<span class="id">imply_asboolPn</span> []; <span class="kwd">exists</span> <span class="id">s</span>.<br/>
<span class="id">have</span> <span class="id">tot0</span> : <span class="id">total_on</span> <span class="id">set0</span> <span class="id">R</span> <span class="kwd">by</span> [].<br/>
<span class="id">apply</span>: (<span class="id">ZL</span>' (<span class="id">exist</span> <span class="id">_</span> <span class="id">set0</span> <span class="id">tot0</span>)) <span class="id">R</span>'<span class="id">tot_lub</span> <span class="id">_</span> =&gt; // <span class="id">A</span>.<br/>
<span class="id">have</span> /<span class="id">Rtot_max</span> [<span class="id">t</span> <span class="id">tub</span>] := <span class="id">svalP</span> <span class="id">A</span>; <span class="id">have</span> [<span class="id">s</span> [<span class="id">Rts</span> <span class="id">snet</span>]] := <span class="id">nomax</span> <span class="id">t</span>.<br/>
<span class="id">have</span> <span class="id">Astot</span> : <span class="id">total_on</span> (<span class="id">sval</span> <span class="id">A</span> `|` [<span class="id">set</span> <span class="id">s</span>]) <span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">u</span> <span class="id">v</span> [<span class="id">Au</span>|-&gt;]; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; [/<span class="id">tub</span> <span class="id">Rvt</span>|-&gt;]; <span class="id">right</span>=&gt; //; <span class="id">apply</span>: <span class="id">Rtrans</span> <span class="id">Rts</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; [<span class="id">Av</span>|-&gt;]; [<span class="id">apply</span>: (<span class="id">svalP</span> <span class="id">A</span>)|<span class="id">left</span>] =&gt; //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">Rtrans</span> <span class="id">Rts</span>; <span class="id"><a href="mathcomp.classical.classical_sets.html#set_mem">apply</a></span>: <span class="id">tub</span>.<br/>
<span class="kwd">exists</span> (<span class="id">exist</span> <span class="id">_</span> (<span class="id">sval</span> <span class="id">A</span> `|` [<span class="id">set</span> <span class="id">s</span>]) <span class="id">Astot</span>); <span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; ? ?; <span class="id">left</span>.<br/>
<span class="id">split</span>=&gt; [<span class="id">AeAs</span>|[<span class="id">B</span> <span class="id">Btot</span>] <span class="id">sAB</span> <span class="id">sBAs</span>].<br/>
&nbsp;&nbsp;<span class="id">have</span> [/<span class="id">tub</span> <span class="id">Rst</span>|] := <span class="id">pselect</span> (<span class="id">sval</span> <span class="id"><a name="premaximal">A</a></span> <span class="id">s</span>); <span class="id">first</span> <span class="id">exact</span>/<span class="id">snet</span>/<span class="id">Rantisym</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">AeAs</span> /=; <span class="id">apply</span>; <span class="id">right</span>.<br/>
<span class="id">have</span> [<span class="id">Bs</span>|<span class="id">nBs</span>] := <span class="id">pselect</span> (<span class="id">B</span> <span class="id">s</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">right</span>; <span class="id">apply</span>: <span class="id">eq_exist</span>; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">r</span>; <span class="id">split</span>=&gt; [/<span class="id">sBAs</span>|[/<span class="id">sAB</span>|-&gt;]].<br/>
<span class="id">left</span>; <span class="id">case</span>: <span class="id">A</span> <span class="id">tub</span> <span class="id">Astot</span> <span class="id">sBAs</span> <span class="id">sAB</span> =&gt; <span class="id">A</span> <span class="id">Atot</span> /= <span class="id">tub</span> <span class="id">Astot</span> <span class="id">sBAs</span> <span class="id">sAB</span>.<br/>
<span class="id">apply</span>: <span class="id">eq_exist</span>; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">r</span>; <span class="id">split</span>=&gt; [<span class="id">Br</span>|/<span class="id">sAB</span>] //.<br/>
<span class="kwd">by</span> <span class="id">have</span> /<span class="id">sBAs</span> [|<span class="id">ser</span>] // := <span class="id">Br</span>; <span class="id">rewrite</span> <span class="id">ser</span> <span class="kwd">in</span> <span class="id">Br</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">Zorn_subset</span>.<br/>
<span class="kwd">Variables</span> (<span class="id">T</span> : <span class="kwd">Type</span>) (<span class="id">P</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">T</span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">Zorn_bigcup</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">F</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">T</span>), <span class="id">F</span> `&lt;=` <span class="id">P</span> -&gt; <span class="id">total_on</span> <span class="id">F</span> <span class="id">subset</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> (\<span class="id">bigcup_</span>(<span class="id">X</span> <span class="kwd">in</span> <span class="id">F</span>) <span class="id">X</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">A</span>, <span class="id">P</span> <span class="id">A</span> /\ <span class="kwd">forall</span> <span class="id">B</span>, <span class="id">A</span> `&lt;` <span class="id">B</span> -&gt; ~ <span class="id">P</span> <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof446')">Proof.</span></div>
<div class="proofscript" id="proof446">
<span class="id">move</span>=&gt; <span class="id">totP</span>; <span class="id">pose</span> <span class="id">R</span> (<span class="id">sA</span> <span class="id">sB</span> : <span class="id">P</span>) := <span class="id">sval</span> <span class="id">sA</span> `&lt;=` <span class="id">sval</span> <span class="id">sB</span>.<br/>
<span class="id">have</span> {}<span class="id">totR</span> <span class="id">F</span> (<span class="id">FR</span> : <span class="id">total_on</span> <span class="id">F</span> <span class="id">R</span>) : <span class="kwd">exists</span> <span class="id">sB</span>, <span class="kwd">forall</span> <span class="id">sA</span>, <span class="id">F</span> <span class="id">sA</span> -&gt; <span class="id">R</span> <span class="id">sA</span> <span class="id">sB</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">have</span> <span class="id">FP</span> : [<span class="id">set</span> <span class="id">val</span> <span class="id">x</span> | <span class="id">x</span> <span class="kwd">in</span> <span class="id">F</span>] `&lt;=` <span class="id">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">X</span> <span class="id">FX</span> &lt;-]; <span class="id">apply</span>: <span class="id">set_mem</span>; <span class="id">apply</span>: <span class="id">valP</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">have</span> <span class="id">totF</span> : <span class="id">total_on</span> [<span class="id">set</span> <span class="id">val</span> <span class="id">x</span> | <span class="id">x</span> <span class="kwd">in</span> <span class="id">F</span>] <span class="id">subset</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span> <span class="id">_</span> [<span class="id">X</span> <span class="id">FX</span> &lt;-] [<span class="id">Y</span> <span class="id">FY</span> &lt;-]; <span class="id">apply</span>: <span class="id">FR</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">SigSub</span> (<span class="id">mem_set</span> (<span class="id">totP</span> <span class="id">_</span> <span class="id">FP</span> <span class="id">totF</span>))) =&gt; <span class="id">A</span> <span class="id">FA</span>; <span class="id">rewrite</span> /<span class="id">R</span>/=.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: (<span class="id">bigcup_sup</span> (<span class="id">imageP</span> <span class="id">val</span> <span class="id">_</span>)).<br/>
<span class="id">have</span> [| | |<span class="id">sA</span> <span class="id">sAmax</span>] := <span class="id">Zorn</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">totR</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; ?; <span class="id">exact</span>: <span class="id">subset_refl</span>.<br/>
- <span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.boolp.html#Prop_irrelevance">move</a></span>=&gt; ? ? ?; <span class="id">exact</span>: <span class="id">subset_trans</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">A</span> <span class="id">PA</span>] [<span class="id">B</span> <span class="id">PB</span>]; <span class="id">rewrite</span> /<span class="id">R</span> /= =&gt; <span class="id">AB</span> <span class="id">BA</span>; <span class="id">exact</span>/<span class="id">eq_exist</span>/<span class="id">seteqP</span>.<br/>
- <span class="kwd">exists</span> (<span class="id">val</span> <span class="id">sA</span>); <span class="id">case</span>: <span class="id">sA</span> =&gt; <span class="id">A</span> <span class="id">PA</span> /= <span class="kwd">in</span> <span class="id">sAmax</span> *; <span class="id">split</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">set_mem</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">B</span> <span class="id">AB</span> <span class="id">PB</span>; <span class="id">have</span> [<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#congr1">BA</a></span>] := <span class="id">sAmax</span> (<span class="id">SigSub</span> (<span class="id">mem_set</span> <span class="id">PB</span>)) (<span class="id">properW</span> <span class="id">AB</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>: <span class="id">AB</span>; <span class="id">rewrite</span> <span class="id">BA</span>; <span class="id">exact</span>: <span class="id">properxx</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">Zorn_subset</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">maximal_disjoint_subcollection</span> <span class="id">T</span> <span class="id">I</span> (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) (<span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> <span class="id">I</span>) :=<br/>
&nbsp;&nbsp;[/\ <span class="id">A</span> `&lt;=` <span class="id">B</span>, <span class="id">trivIset</span> <span class="id">A</span> <span class="id">F</span> &amp; <span class="kwd">forall</span> <span class="id">C</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">A</span> `&lt;` <span class="id">C</span> -&gt; <span class="id">C</span> `&lt;=` <span class="id">B</span> -&gt; ~ <span class="id">trivIset</span> <span class="id">C</span> <span class="id">F</span> ].<br/>
<br/>
<span class="kwd">Section</span> <span class="id">maximal_disjoint_subcollection</span>.<br/>
<span class="kwd">Context</span> {<span class="id">I</span> <span class="id">T</span> : <span class="kwd">Type</span>}.<br/>
<span class="kwd">Variables</span> (<span class="id">B</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) (<span class="id">D</span> : <span class="id">set</span> <span class="id">I</span>).<br/>
<br/>
<span class="kwd">Let</span> <span class="id">P</span> := <span class="kwd">fun</span> <span class="id">X</span> =&gt; <span class="id">X</span> `&lt;=` <span class="id">D</span> /\ <span class="id">trivIset</span> <span class="id">X</span> <span class="id">B</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">maxP</span> (<span class="id">A</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">I</span>)) :<br/>
&nbsp;&nbsp;<span class="id">A</span> `&lt;=` <span class="id">P</span> -&gt; <span class="id">total_on</span> <span class="id">A</span> (<span class="kwd">fun</span> <span class="id">x</span> <span class="id">y</span> =&gt; <span class="id">x</span> `&lt;=` <span class="id">y</span>) -&gt; <span class="id">P</span> (\<span class="id">bigcup_</span>(<span class="id">x</span> <span class="kwd">in</span> <span class="id">A</span>) <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof447')">Proof.</span></div>
<div class="proofscript" id="proof447">
<span class="id">move</span>=&gt; <span class="id">AP</span> <span class="id">h</span>; <span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigcup_sub</span> =&gt; <span class="id">E</span> /<span class="id">AP</span> [].<br/>
<span class="id">move</span>=&gt; <span class="id">i</span> <span class="id">j</span> [<span class="id">x</span> <span class="id">Ax</span>] <span class="id">xi</span> [<span class="id">y</span> <span class="id">Ay</span>] <span class="id">yj</span> <span class="id">ij</span>; <span class="id">have</span> [<span class="id">xy</span>|<span class="id">yx</span>] := <span class="id">h</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Ax</span> <span class="id">Ay</span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>: (<span class="id">AP</span> <span class="id">_</span> <span class="id">Ay</span>).2 =&gt; //; <span class="id">exact</span>: <span class="id">xy</span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>: (<span class="id">AP</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#Zorn">Ax</a></span>).2 =&gt; //; <span class="id">exact</span>: <span class="id">yx</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">ex_maximal_disjoint_subcollection</span> :<br/>
&nbsp;&nbsp;{ <span class="id">E</span> | <span class="id">maximal_disjoint_subcollection</span> <span class="id">B</span> <span class="id">E</span> <span class="id">D</span> }.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof448')">Proof.</span></div>
<div class="proofscript" id="proof448">
<span class="id">have</span> /<span class="id">cid</span>[<span class="id">E</span> [[<span class="id">ED</span> <span class="id">tEB</span>] <span class="id">maxE</span>]] := <span class="id">Zorn_bigcup</span> <span class="id">maxP</span>.<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">E</span>; <span class="id">split</span> =&gt; // <span class="id">F</span> /<span class="id">maxE</span> + <span class="id">FD</span>; <span class="id">exact</span>: <span class="id">contra_not</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">maximal_disjoint_subcollection</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">premaximal</span> <span class="id">T</span> (<span class="id">R</span> : <span class="id">T</span> -&gt; <span class="id">T</span> -&gt; <span class="kwd">Prop</span>) (<span class="id">t</span> : <span class="id">T</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span>, <span class="id">R</span> <span class="id">t</span> <span class="id">s</span> -&gt; <span class="id">R</span> <span class="id">s</span> <span class="id">t</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">ZL_preorder</span> <span class="id">T</span> (<span class="id">t0</span> : <span class="id">T</span>) (<span class="id">R</span> : <span class="id">T</span> -&gt; <span class="id">T</span> -&gt; <span class="kwd">Prop</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">t</span>, <span class="id">R</span> <span class="id">t</span> <span class="id">t</span>) -&gt; (<span class="kwd">forall</span> <span class="id">r</span> <span class="id">s</span> <span class="id">t</span>, <span class="id">R</span> <span class="id">r</span> <span class="id">s</span> -&gt; <span class="id">R</span> <span class="id">s</span> <span class="id">t</span> -&gt; <span class="id">R</span> <span class="id">r</span> <span class="id">t</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>, <span class="id">total_on</span> <span class="id">A</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#UpperLowerTheory.T">R</a></span> -&gt; <span class="kwd">exists</span> <span class="id">t</span>, <span class="kwd">forall</span> <span class="id">s</span>, <span class="id">A</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">s</a></span> -&gt; <span class="id">R</span> <span class="id">s</span> <span class="id">t</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">t</span>, <span class="id">premaximal</span> <span class="id">R</span> <span class="id">t</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof449')">Proof.</span></div>
<div class="proofscript" id="proof449">
<span class="id">set</span> <span class="id">Teq</span> := @<span class="id">gen_eqMixin</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#UpperLowerTheory.T">T</a></span>; <span class="id">set</span> <span class="id">Tch</span> := @<span class="id">gen_choiceMixin</span> <span class="id">T</span>.<br/>
<span class="id">set</span> <span class="id">Tp</span> := <span class="id">Pointed.Pack</span> (<span class="id">Pointed.Class</span> (<span class="id">Choice.Class</span> <span class="id">Teq</span> <span class="id">Tch</span>) <span class="id"><a href="mathcomp.classical.classical_sets.html#ubound">t0</a></span>).<br/>
<span class="id">move</span>=&gt; <span class="id">Rrefl</span> <span class="id">Rtrans</span> <span class="id">tot_max</span>.<br/>
<span class="id">set</span> <span class="id"><a name="lbP">eqR</a></span> := <span class="kwd">fun</span> <span class="id">s</span> <span class="id">t</span> =&gt; <span class="id">R</span> <span class="id">s</span> <span class="id">t</span> /\ <span class="id">R</span> <span class="id">t</span> <span class="id">s</span>; <span class="id">set</span> <span class="id">ceqR</span> := <span class="kwd">fun</span> <span class="id">s</span> =&gt; [<span class="id">set</span> <span class="id">t</span> | <span class="id">eqR</span> <span class="id">s</span> <span class="id">t</span>].<br/>
<span class="id">have</span> <span class="id">eqR_trans</span> <span class="id">r</span> <span class="id">s</span> <span class="id">t</span> : <span class="id">eqR</span> <span class="id">r</span> <span class="id">s</span> -&gt; <span class="id">eqR</span> <span class="id">s</span> <span class="id">t</span> -&gt; <span class="id">eqR</span> <span class="id">r</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">Rrs</span> <span class="id"><a href="mathcomp.classical.boolp.html#propeqE">Rsr</a></span>] [<span class="id">Rst</span> <span class="id">Rts</span>]; <span class="id">split</span>; [<span class="id">apply</span>: <span class="id">Rtrans</span> <span class="id">Rst</span>|<span class="id">apply</span>: <span class="id">Rtrans</span> <span class="id"><a name="lb_set1">Rsr</a></span>].<br/>
<span class="id">have</span> <span class="id">ceqR_uniq</span> <span class="id">s</span> <span class="id">t</span> : <span class="id">eqR</span> <span class="id">s</span> <span class="id">t</span> -&gt; <span class="id">ceqR</span> <span class="id">s</span> = <span class="id">ceqR</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; - [<span class="id">Rst</span> <span class="id">Rts</span>] <span class="id">r</span>; <span class="id">split</span>=&gt; [[<span class="id">Rr</span> <span class="id">rR</span>] | [<span class="id">Rr</span> <span class="id">rR</span>]]; <span class="id">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">try</span> <span class="id">exact</span>: <span class="id">Rtrans</span> <span class="id">Rr</span>; <span class="id">exact</span>: <span class="id">Rtrans</span> <span class="id">rR</span> <span class="id">_</span>.<br/>
<span class="id">set</span> <span class="id">ceqRs</span> := <span class="id">ceqR</span> @` <span class="id">setT</span>; <span class="id">set</span> <span class="id">quotR</span> := <span class="id">sig</span> <span class="id">ceqRs</span>.<br/>
<span class="id">have</span> <span class="id">ceqRP</span> <span class="id">t</span> : <span class="id">ceqRs</span> (<span class="id">ceqR</span> <span class="id">t</span>) <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">t</span>.<br/>
<span class="id">set</span> <span class="id">lift</span> := <span class="kwd">fun</span> <span class="id">t</span> =&gt; <span class="id">exist</span> <span class="id">_</span> (<span class="id">ceqR</span> <span class="id">t</span>) (<span class="id">ceqRP</span> <span class="id">t</span>).<br/>
<span class="id">have</span> <span class="id">lift_surj</span> (<span class="id">A</span> : <span class="id">quotR</span>) : <span class="kwd">exists</span> <span class="id">t</span> : <span class="id">Tp</span>, <span class="id">lift</span> <span class="id">t</span> = <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">case</span>: <span class="id">A</span> =&gt; <span class="id">A</span> [<span class="id">t</span> <span class="id">Tt</span> <span class="id">ctA</span>]; <span class="kwd">exists</span> <span class="id">t</span>; <span class="id">rewrite</span> /<span class="id">lift</span>; <span class="id">case</span> : <span class="id">_</span> / <span class="id">ctA</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">congr1</span>/<span class="id">Prop_irrelevance</span>.<br/>
<span class="id">have</span> <span class="id">lift_inj</span> <span class="id">s</span> <span class="id">t</span> : <span class="id">eqR</span> <span class="id">s</span> <span class="id">t</span> -&gt; <span class="id">lift</span> <span class="id">s</span> = <span class="id">lift</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">eqRst</span>; <span class="id">apply</span>/<span class="id">eq_exist</span>/<span class="id">ceqR_uniq</span>.<br/>
<span class="id">have</span> <span class="id">lift_eqR</span> <span class="id">s</span> <span class="id">t</span> : <span class="id">lift</span> <span class="id">s</span> = <span class="id">lift</span> <span class="id">t</span> -&gt; <span class="id">eqR</span> <span class="id">s</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;<span class="id"><a name="lb_ub_lb">move</a></span>=&gt; <span class="id">cst</span>; <span class="id">have</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#lbound">ceqst</a></span> : <span class="id">ceqR</span> <span class="id">s</span> = <span class="id">ceqR</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#lbound">t</a></span> <span class="kwd">by</span> <span class="id">have</span> := <span class="id">congr1</span> <span class="id">sval</span> <span class="id">cst</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> [<span class="id">_</span> <span class="id">s</span>]<span class="id">ceqst</span>; <span class="id">split</span>; <span class="id">apply</span>: <span class="id">Rrefl</span>.<br/>
<span class="id">set</span> <span class="id">repr</span> := <span class="kwd">fun</span> <span class="id">A</span> : <span class="id">quotR</span> =&gt; <span class="id">get</span> [<span class="id">set</span> <span class="id">t</span> : <span class="id">Tp</span> | <span class="id">lift</span> <span class="id">t</span> = <span class="id">A</span>].<br/>
<span class="id">have</span> <span class="id">repr_liftE</span> <span class="id">t</span> : <span class="id">eqR</span> <span class="id">t</span> (<span class="id">repr</span> (<span class="id">lift</span> <span class="id">t</span>))<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">lift_eqR</span>; <span class="id">have</span> -&gt; := <span class="id">getPex</span> (<span class="id">lift_surj</span> (<span class="id">lift</span> <span class="id">t</span>)).<br/>
<span class="id">set</span> <span class="id">R</span>' := <span class="kwd">fun</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">quotR</span> =&gt; <span class="id">R</span> (<span class="id">repr</span> <span class="id">A</span>) (<span class="id">repr</span> <span class="id"><a name="has_sup">B</a></span>).<br/>
<span class="id">have</span> <span class="id">R</span>'<span class="id">refl</span> <span class="id">A</span> : <span class="id">R</span>' <span class="id">A</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#has_ubound">A</a></span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">Rrefl</span>.<br/>
<span class="id">have</span> <span class="id">R</span>'<span class="id">trans</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> : <span class="id">R</span>' <span class="id">A</span> <span class="id">B</span> -&gt; <span class="id">R</span>' <span class="id">B</span> <span class="id">C</span> -&gt; <span class="id">R</span>' <span class="id">A</span> <span class="id">C</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">Rtrans</span>.<br/>
<span class="id">have</span> <span class="id">R</span>'<span class="id">antisym</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">R</span>' <span class="id">A</span> <span class="id">B</span> -&gt; <span class="id">R</span>' <span class="id">B</span> <span class="id">A</span> -&gt; <span class="id">A</span> = <span class="id">B</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">RAB</span> <span class="id">RBA</span>; <span class="id">have</span> [<span class="id">t</span> <span class="id">tA</span>] := <span class="id">lift_surj</span> <span class="id">A</span>; <span class="id"><a href="mathcomp.classical.classical_sets.html#ub_set1">have</a></span> [<span class="id">s</span> <span class="id">sB</span>] := <span class="id">lift_surj</span> <span class="id">B</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">tA</span> -<span class="id">sB</span>; <span class="id">apply</span>: <span class="id">lift_inj</span>; <span class="id">apply</span> (<span class="id">eqR_trans</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">repr_liftE</span> <span class="id">t</span>)).<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">eAB</span> : <span class="id">eqR</span> (<span class="id">repr</span> <span class="id">A</span>) (<span class="id">repr</span> <span class="id">B</span>) <span class="kwd">by</span> [].<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">tA</span>; <span class="id"><a href="mathcomp.classical.classical_sets.html#UpperLowerTheory.T">apply</a></span>: <span class="id">eqR_trans</span> <span class="id">eAB</span> <span class="id">_</span>; <span class="id">rewrite</span> -<span class="id">sB</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">have</span> [] := <span class="id"><a href="mathcomp.classical.classical_sets.html#set0P">repr_liftE</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negPn">s</a></span>.<br/>
<span class="id">have</span> [<span class="id">A</span> <span class="id">Atot</span>|<span class="id">A</span> <span class="id">Amax</span>] := <span class="id">Zorn</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#has_sup">R</a></span>'<span class="id">refl</span> <span class="id">R</span>'<span class="id">trans</span> <span class="id">R</span>'<span class="id">antisym</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> /<span class="id">tot_max</span> [<span class="id">t</span> <span class="id">tmax</span>] : <span class="id">total_on</span> [<span class="id">set</span> <span class="id">repr</span> <span class="id">B</span> | <span class="id">B</span> <span class="kwd">in</span> <span class="id">A</span>] <span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; ?? [<span class="id">B</span> <span class="id">AB</span> &lt;-] [<span class="id">C</span> <span class="id">AC</span> &lt;-]; <span class="id">apply</span>: <span class="id">Atot</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">lift</span> <span class="id">t</span>) =&gt; <span class="id">B</span> <span class="id">AB</span>; <span class="id">have</span> [<span class="id">Rt</span> <span class="id">_</span>] := <span class="id">repr_liftE</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">Rtrans</span> <span class="id">Rt</span>; <span class="id">apply</span>: <span class="id">tmax</span>; <span class="kwd">exists</span> <span class="id">B</span>.<br/>
<span class="kwd">exists</span> (<span class="id">repr</span> <span class="id">A</span>) =&gt; <span class="id">t</span> <span class="id">RAt</span>.<br/>
<span class="id">have</span> /<span class="id">Amax</span> &lt;- : <span class="id">R</span>' <span class="id">A</span> (<span class="id">lift</span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">have</span> [<span class="id">Rt</span> <span class="id">_</span>] := <span class="id">repr_liftE</span> <span class="id">t</span>; <span class="id">apply</span>: <span class="id">Rtrans</span> <span class="id">Rt</span>.<br/>
<span class="kwd">by</span> <span class="id">have</span> [] := <span class="id">repr_liftE</span> <span class="id">t</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">UpperLowerTheory</span>.<br/>
<span class="kwd">Import</span> <span class="id">Order.TTheory</span>.<br/>
<span class="kwd">Variables</span> (<span class="id">d</span> : <span class="id">unit</span>) (<span class="id">T</span> : <span class="id">porderType</span> <span class="id">d</span>).<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">x</span> <span class="id">y</span> <span class="id">z</span> : <span class="id">T</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">ubound</span> <span class="id">A</span> : <span class="id">set</span> <span class="id">T</span> := [<span class="id">set</span> <span class="id">y</span> | <span class="kwd">forall</span> <span class="id">x</span>, <span class="id">A</span> <span class="id">x</span> -&gt; (<span class="id">x</span> &lt;= <span class="id">y</span>)%<span class="id">O</span>].<br/>
<span class="kwd">Definition</span> <span class="id">lbound</span> <span class="id">A</span> : <span class="id">set</span> <span class="id">T</span> := [<span class="id">set</span> <span class="id">y</span> | <span class="kwd">forall</span> <span class="id">x</span>, <span class="id">A</span> <span class="id">x</span> -&gt; (<span class="id">y</span> &lt;= <span class="id">x</span>)%<span class="id">O</span>].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">ubP</span> <span class="id">A</span> <span class="id">x</span> : (<span class="kwd">forall</span> <span class="id">y</span>, <span class="id">A</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#lbound">y</a></span> -&gt; (<span class="id">y</span> &lt;= <span class="id">x</span>)%<span class="id">O</span>) &lt;-&gt; <span class="id">ubound</span> <span class="id">A</span> <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof450')">Proof.</span></div>
<div class="proofscript" id="proof450">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">lbP</span> <span class="id">A</span> <span class="id">x</span> : (<span class="kwd">forall</span> <span class="id">y</span>, <span class="id">A</span> <span class="id">y</span> -&gt; (<span class="id">x</span> &lt;= <span class="id">y</span>)%<span class="id"><a href="mathcomp.classical.boolp.html#predeqE">O</a></span>) &lt;-&gt; <span class="id">lbound</span> <span class="id">A</span> <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof451')">Proof.</span></div>
<div class="proofscript" id="proof451">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">ub_set1</span> <span class="id">x</span> <span class="id">y</span> : <span class="id">ubound</span> [<span class="id">set</span> <span class="id">x</span>] <span class="id">y</span> = (<span class="id">x</span> &lt;= <span class="id">y</span>)%<span class="id">O</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof452')">Proof.</span></div>
<div class="proofscript" id="proof452">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">propeqE</span>; <span class="id">split</span> =&gt; [/(<span class="id">_</span> <span class="id">x</span> <span class="id">erefl</span>)//|<span class="id">xy</span> <span class="id">z</span> -&gt;]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">lb_set1</span> <span class="id">x</span> <span class="id">y</span> : <span class="id">lbound</span> [<span class="id">set</span> <span class="id">x</span>] <span class="id">y</span> = (<span class="id">x</span> &gt;= <span class="id">y</span>)%<span class="id"><a href="mathcomp.classical.classical_sets.html#is_subset1">O</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof453')">Proof.</span></div>
<div class="proofscript" id="proof453">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">propeqE</span>; <span class="id">split</span> =&gt; [/(<span class="id">_</span> <span class="id">x</span> <span class="id">erefl</span>)//|<span class="id">xy</span> <span class="id">z</span> -&gt;]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">lb_ub_set1</span> <span class="id">x</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#ub_lb_ub">y</a></span> : <span class="id">lbound</span> (<span class="id">ubound</span> [<span class="id">set</span> <span class="id">x</span>]) <span class="id">y</span> -&gt; (<span class="id">y</span> &lt;= <span class="id">x</span>)%<span class="id">O</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof454')">Proof.</span></div>
<div class="proofscript" id="proof454">
 <span class="kwd">by</span> <span class="id">move</span>/(<span class="id">_</span> <span class="id">x</span>); <span class="id">apply</span>; <span class="id">rewrite</span> <span class="id">ub_set1</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#supremums">ub_lb_set1</a></span> <span class="id">x</span> <span class="id">y</span> : <span class="id">ubound</span> (<span class="id">lbound</span> [<span class="id">set</span> <span class="id">x</span>]) <span class="id">y</span> -&gt; (<span class="id">x</span> &lt;= <span class="id">y</span>)%<span class="id">O</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof455')">Proof.</span></div>
<div class="proofscript" id="proof455">
 <span class="kwd">by</span> <span class="id">move</span>/(<span class="id">_</span> <span class="id">x</span>); <span class="id">apply</span>; <span class="id">rewrite</span> <span class="id">lb_set1</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">lb_ub_refl</span> <span class="id">x</span> : <span class="id">lbound</span> (<span class="id">ubound</span> [<span class="id">set</span> <span class="id">x</span>]) <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof456')">Proof.</span></div>
<div class="proofscript" id="proof456">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">y</span>; <span class="id">apply</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">ub_lb_refl</span> <span class="id">x</span> : <span class="id">ubound</span> (<span class="id">lbound</span> [<span class="id">set</span> <span class="id">x</span>]) <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof457')">Proof.</span></div>
<div class="proofscript" id="proof457">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">y</span>; <span class="id">apply</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">ub_lb_ub</span> <span class="id">A</span> <span class="id">x</span> <span class="id">y</span> : <span class="id">ubound</span> <span class="id">A</span> <span class="id">y</span> -&gt; <span class="id">lbound</span> (<span class="id">ubound</span> <span class="id">A</span>) <span class="id">x</span> -&gt; (<span class="id">x</span> &lt;= <span class="id">y</span>)%<span class="id">O</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof458')">Proof.</span></div>
<div class="proofscript" id="proof458">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Ay</span>; <span class="id">apply</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">lb_ub_lb</span> <span class="id">A</span> <span class="id">x</span> <span class="id">y</span> : <span class="id">lbound</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#supremum">A</a></span> <span class="id">y</span> -&gt; <span class="id">ubound</span> (<span class="id">lbound</span> <span class="id">A</span>) <span class="id">x</span> -&gt; (<span class="id">y</span> &lt;= <span class="id">x</span>)%<span class="id">O</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof459')">Proof.</span></div>
<div class="proofscript" id="proof459">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Ey</span>; <span class="id">apply</span>. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">down</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#lbound">A</a></span> : <span class="id">set</span> <span class="id">T</span> := [<span class="id">set</span> <span class="id"><a name="infimums1">x</a></span> | <span class="kwd">exists</span> <span class="id">y</span>, <span class="id"><a href="mathcomp.classical.classical_sets.html#infimums">A</a></span> <span class="id">y</span> /\ (<span class="id">x</span> &lt;= <span class="id">y</span>)%<span class="id">O</span>].<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">has_ubound</span> <span class="id">A</span> := <span class="id">ubound</span> <span class="id">A</span> !=<span class="id">set0</span>.<br/>
<span class="kwd">Definition</span> <span class="id">has_sup</span> <span class="id">A</span> := <span class="id">A</span> !=<span class="id">set0</span> /\ <span class="id">has_ubound</span> <span class="id">A</span>.<br/>
<span class="kwd">Definition</span> <span class="id">has_lbound</span> <span class="id">A</span> := <span class="id">lbound</span> <span class="id">A</span> !=<span class="id">set0</span>.<br/>
<span class="kwd">Definition</span> <span class="id">has_inf</span> <span class="id">A</span> := <span class="id">A</span> !=<span class="id">set0</span> /\ <span class="id">has_lbound</span> <span class="id">A</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">has_ub_set1</span> <span class="id">x</span> : <span class="id">has_ubound</span> [<span class="id">set</span> <span class="id">x</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof460')">Proof.</span></div>
<div class="proofscript" id="proof460">
 <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#infimums">x</a></span>; <span class="id">rewrite</span> <span class="id">ub_set1</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">has_inf0</span> : ~ <span class="id">has_inf</span> (@<span class="id">set0</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof461')">Proof.</span></div>
<div class="proofscript" id="proof461">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">has_inf</span> <span class="id">not_andP</span>; <span class="id">left</span>; <span class="id">apply</span>/<span class="id">set0P</span>/<span class="id">negP</span>/<span class="id">negPn</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">has_sup0</span> : ~ <span class="id">has_sup</span> (@<span class="id">set0</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof462')">Proof.</span></div>
<div class="proofscript" id="proof462">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">has_sup</span> <span class="id">not_andP</span>; <span class="id">left</span>; <span class="id">apply</span>/<span class="id"><a name="UpperLowerOrderTheory">set0P</a></span>/<span class="id">negP</span>/<span class="id">negPn</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">has_sup1</span> <span class="id">x</span> : <span class="id">has_sup</span> [<span class="id">set</span> <span class="id"><a name="UpperLowerOrderTheory.d">x</a></span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof463')">Proof.</span></div>
<div class="proofscript" id="proof463">
 <span class="kwd">by</span> <span class="id">split</span>; [<span class="kwd">exists</span> <span class="id">x</span> | <span class="kwd">exists</span> <span class="id">x</span> =&gt; <span class="id">y</span> -&gt;]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">has_inf1</span> <span class="id">x</span> : <span class="id">has_inf</span> [<span class="id">set</span> <span class="id">x</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof464')">Proof.</span></div>
<div class="proofscript" id="proof464">
 <span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#supremums">split</a></span>; [<span class="kwd">exists</span> <span class="id">x</span> | <span class="kwd">exists</span> <span class="id">x</span> =&gt; <span class="id">y</span> -&gt;]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subset_has_lbound</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&lt;=` <span class="id">B</span> -&gt; <span class="id">has_lbound</span> <span class="id">B</span> -&gt; <span class="id">has_lbound</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof465')">Proof.</span></div>
<div class="proofscript" id="proof465">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">AB</span> [<span class="id">l</span> <span class="id">Bl</span>]; <span class="kwd">exists</span> <span class="id">l</span> =&gt; <span class="id">a</span> <span class="id">Aa</span>; <span class="id">apply</span>/<span class="id">Bl</span>/<span class="id">AB</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subset_has_ubound</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&lt;=` <span class="id">B</span> -&gt; <span class="id">has_ubound</span> <span class="id">B</span> -&gt; <span class="id">has_ubound</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof466')">Proof.</span></div>
<div class="proofscript" id="proof466">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">AB</span> [<span class="id">l</span> <span class="id">Bl</span>]; <span class="kwd">exists</span> <span class="id">l</span> =&gt; <span class="id">a</span> <span class="id">Aa</span>; <span class="id">apply</span>/<span class="id">Bl</span>/<span class="id">AB</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">downP</span> <span class="id">A</span> <span class="id">x</span> : (<span class="kwd">exists2</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#xgetP">y</a></span>, <span class="id">A</span> <span class="id">y</span> &amp; (<span class="id">x</span> &lt;= <span class="id">y</span>)%<span class="id">O</span>) &lt;-&gt; <span class="id">down</span> <span class="id">A</span> <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof467')">Proof.</span></div>
<div class="proofscript" id="proof467">
 <span class="kwd">by</span> <span class="id">split</span> =&gt; [[<span class="id">y</span> <span class="id">Ay</span> <span class="id">xy</span>]|[<span class="id">y</span> [<span class="id">Ay</span> <span class="id">xy</span>]]]; [<span class="kwd">exists</span> <span class="id"><a name="nat_supremums_neq0">y</a></span>| <span class="kwd">exists</span> <span class="id">y</span>]. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">isLub</span> <span class="id">A</span> <span class="id">m</span> := <span class="id">ubound</span> <span class="id">A</span> <span class="id">m</span> /\ <span class="kwd">forall</span> <span class="id">b</span>, <span class="id">ubound</span> <span class="id">A</span> <span class="id">b</span> -&gt; (<span class="id">m</span> &lt;= <span class="id">b</span>)%<span class="id">O</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">supremums</span> <span class="id">A</span> := <span class="id">ubound</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#O">A</a></span> `&amp;` <span class="id">lbound</span> (<span class="id">ubound</span> <span class="id">A</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">supremums1</span> <span class="id">x</span> : <span class="id">supremums</span> [<span class="id">set</span> <span class="id">x</span>] = [<span class="id">set</span> <span class="id">x</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof468')">Proof.</span></div>
<div class="proofscript" id="proof468">
<span class="id">rewrite</span> /<span class="id">supremums</span> <span class="id">predeqE</span> =&gt; <span class="id"><a href="mathcomp.classical.boolp.html#not_implyP">y</a></span>; <span class="id">split</span> =&gt; [[]|-&gt;{<span class="id">y</span>}]; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">split</span>; [<span class="id">rewrite</span> <span class="id">ub_set1</span>|<span class="id">exact</span>: <span class="id">lb_ub_refl</span>].<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ub_set1</span> =&gt; <span class="id">xy</span> /<span class="id">lb_ub_set1</span> <span class="id">yx</span>; <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">eq_le</span> <span class="id">xy</span> <span class="id">yx</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_subset1_supremums</span> <span class="id">A</span> : <span class="id">is_subset1</span> (<span class="id">supremums</span> <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof469')">Proof.</span></div>
<div class="proofscript" id="proof469">
<span class="id">move</span>=&gt; <span class="id">x</span> <span class="id">y</span> [<span class="id">Ax</span> <span class="id">xA</span>] [<span class="id">Ay</span> <span class="id">yA</span>]; <span class="id">apply</span>/<span class="id">eqP</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eq_le</span> (<span class="id">ub_lb_ub</span> <span class="id">Ax</span> <span class="id">yA</span>) (<span class="id">ub_lb_ub</span> <span class="id">Ay</span> <span class="id">xA</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">supremum</span> <span class="id">x0</span> <span class="id">A</span> := <span class="kwd">if</span> <span class="id">A</span> == <span class="id">set0</span> <span class="kwd">then</span> <span class="id">x0</span> <span class="kwd">else</span> <span class="id">xget</span> <span class="id">x0</span> (<span class="id">supremums</span> <span class="id">A</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">supremum_out</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIC">x0</a></span> <span class="id">A</span> : ~ <span class="id">has_sup</span> <span class="id">A</span> -&gt; <span class="id">supremum</span> <span class="id">x0</span> <span class="id">A</span> = <span class="id">x0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof470')">Proof.</span></div>
<div class="proofscript" id="proof470">
<span class="id">move</span>=&gt; <span class="id">hsA</span>; <span class="id">rewrite</span> /<span class="id">supremum</span>; <span class="id">case</span>: <span class="id">ifPn</span> =&gt; // /<span class="id">set0P</span>[/= <span class="id">x</span> <span class="id">Ax</span>].<br/>
<span class="id">case</span>: <span class="id">xgetP</span> =&gt; //= <span class="id">_</span> -&gt; [<span class="id">uA</span> <span class="id">_</span>]; <span class="id">exfalso</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">hsA</span>; <span class="id">split</span>; [<span class="kwd">exists</span> <span class="id">x</span>|<span class="kwd">exists</span> (<span class="id">xget</span> <span class="id">x0</span> (<span class="id">supremums</span> <span class="id">A</span>))].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">supremum0</span> <span class="id">x0</span> : <span class="id">supremum</span> <span class="id">x0</span> <span class="id">set0</span> = <span class="id">x0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof471')">Proof.</span></div>
<div class="proofscript" id="proof471">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">supremum</span> <span class="id">eqxx</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">supremum1</span> <span class="id">x0</span> <span class="id">x</span> : <span class="id">supremum</span> <span class="id">x0</span> [<span class="id">set</span> <span class="id">x</span>] = <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof472')">Proof.</span></div>
<div class="proofscript" id="proof472">
<span class="id">rewrite</span> /<span class="id">supremum</span> <span class="id">ifF</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; /(<span class="id">_</span> <span class="id">x</span>)[+ <span class="id">_</span>]; <span class="id">apply</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">supremums1</span>; <span class="id">case</span>: <span class="id">xgetP</span> =&gt; // /(<span class="id">_</span> <span class="id">x</span>) /(<span class="id">_</span> <span class="id">erefl</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">infimums</span> <span class="id">A</span> := <span class="id">lbound</span> <span class="id">A</span> `&amp;` <span class="id">ubound</span> (<span class="id">lbound</span> <span class="id">A</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">infimums1</span> <span class="id">x</span> : <span class="id">infimums</span> [<span class="id">set</span> <span class="id">x</span>] = [<span class="id">set</span> <span class="id">x</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof473')">Proof.</span></div>
<div class="proofscript" id="proof473">
<span class="id">rewrite</span> /<span class="id">infimums</span> <span class="id">predeqE</span> =&gt; <span class="id">y</span>; <span class="id">split</span> =&gt; [[]|-&gt;{<span class="id">y</span>}]; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">split</span>; [<span class="id">rewrite</span> <span class="id">lb_set1</span>|<span class="id">apply</span> <span class="id">ub_lb_refl</span>].<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lb_set1</span> =&gt; <span class="id">xy</span> /<span class="id">ub_lb_set1</span> <span class="id">yx</span>; <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">eq_le</span> <span class="id">xy</span> <span class="id">yx</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_subset1_infimums</span> <span class="id">A</span> : <span class="id">is_subset1</span> (<span class="id">infimums</span> <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof474')">Proof.</span></div>
<div class="proofscript" id="proof474">
<span class="id">move</span>=&gt; <span class="id">x</span> <span class="id">y</span> [<span class="id">Ax</span> <span class="id">xA</span>] [<span class="id">Ay</span> <span class="id">yA</span>]; <span class="id">apply</span>/<span class="id">eqP</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eq_le</span> (<span class="id">lb_ub_lb</span> <span class="id">Ax</span> <span class="id">yA</span>) (<span class="id">lb_ub_lb</span> <span class="id">Ay</span> <span class="id">xA</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">infimum</span> <span class="id">x0</span> <span class="id">A</span> := <span class="kwd">if</span> <span class="id">A</span> == <span class="id">set0</span> <span class="kwd">then</span> <span class="id">x0</span> <span class="kwd">else</span> <span class="id">xget</span> <span class="id">x0</span> (<span class="id">infimums</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setKI">A</a></span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id">UpperLowerTheory</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">UpperLowerOrderTheory</span>.<br/>
<span class="kwd">Import</span> <span class="id">Order.TTheory</span>.<br/>
<span class="kwd">Variables</span> (<span class="id">d</span> : <span class="id">unit</span>) (<span class="id">T</span> : <span class="id">orderType</span> <span class="id">d</span>).<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">x</span> <span class="id">y</span> <span class="id">z</span> : <span class="id">T</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">ge_supremum_Nmem</span> <span class="id">x0</span> <span class="id">A</span> <span class="id">t</span> :<br/>
&nbsp;&nbsp;<span class="id">supremums</span> <span class="id">A</span> !=<span class="id">set0</span> -&gt; <span class="id">A</span> <span class="id">t</span> -&gt; (<span class="id">supremum</span> <span class="id">x0</span> <span class="id">A</span> &gt;= <span class="id">t</span>)%<span class="id">O</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof475')">Proof.</span></div>
<div class="proofscript" id="proof475">
<span class="id">case</span>=&gt; <span class="id">x</span> <span class="id">Ax</span>; <span class="id">rewrite</span> /<span class="id">supremum</span>; <span class="id">case</span>: <span class="id">ifPn</span> =&gt; [/<span class="id">eqP</span> -&gt; //|<span class="id"><a href="mathcomp.classical.classical_sets.html#SetOrder.Internal.SetOrder.T">_</a></span>].<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id">xgetP</span> =&gt; [<span class="id">y</span> <span class="id">yA</span> [<span class="id">uAy</span> <span class="id">_</span>]|/(<span class="id">_</span> <span class="id">x</span>) //]; <span class="id">exact</span>: <span class="id">uAy</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">le_infimum_Nmem</span> <span class="id">x0</span> <span class="id">A</span> <span class="id">t</span> :<br/>
&nbsp;&nbsp;<span class="id">infimums</span> <span class="id">A</span> !=<span class="id">set0</span> -&gt; <span class="id">A</span> <span class="id">t</span> -&gt; (<span class="id">infimum</span> <span class="id">x0</span> <span class="id">A</span> &lt;= <span class="id">t</span>)%<span class="id"><a href="mathcomp.classical.boolp.html#asboolP">O</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof476')">Proof.</span></div>
<div class="proofscript" id="proof476">
<span class="id">case</span>=&gt; <span class="id">x</span> <span class="id">Ex</span>; <span class="id">rewrite</span> /<span class="id">infimum</span>; <span class="id">case</span>: <span class="id">ifPn</span> =&gt; [/<span class="id">eqP</span> -&gt; //|<span class="id">_</span>].<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id">xgetP</span> =&gt; [<span class="id">y</span> <span class="id">yE</span> [<span class="id">uEy</span> <span class="id">_</span>]|/(<span class="id">_</span> <span class="id">x</span>) //]; <span class="id">exact</span>: <span class="id">uEy</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">UpperLowerOrderTheory</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">nat_supremums_neq0</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">nat</span>) : <span class="id">ubound</span> <span class="id">A</span> !=<span class="id"><a name="SetOrder.Internal.tbLatticeType">set0</a></span> -&gt; <span class="id">supremums</span> <span class="id">A</span> !=<span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof477')">Proof.</span></div>
<div class="proofscript" id="proof477">
<span class="id">case</span> =&gt; /=; <span class="id">elim</span> =&gt; [<span class="id">A0</span>|<span class="id">n</span> <span class="id">ih</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">O</span>.<br/>
<span class="id">case</span>: (<span class="id">pselect</span> (<span class="id">ubound</span> <span class="id">A</span> <span class="id">n</span>)) =&gt; [/<span class="id">ih</span> //|<span class="id">An</span> {<span class="id">ih</span>}] <span class="id">An1</span>.<br/>
<span class="kwd">exists</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#SetOrder.Internal.SetOrder.T">n</a></span>.+1; <span class="id">split</span> =&gt; // <span class="id">m</span> <span class="id"><a name="SetOrder.Internal.tbDistrLatticeType">Am</a></span>; <span class="id">case</span>/<span class="id">existsNP</span> : <span class="id">An</span> =&gt; <span class="id">k</span> /<span class="id">not_implyP</span>[<span class="id">Ak</span> /<span class="id">negP</span>].<br/>
<span class="id">rewrite</span> -<span class="id"><a name="SetOrder.Internal.subKI">Order.TotalTheory.ltNge</a></span> =&gt; <span class="id">kn</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">Order.POrderTheory.le_trans</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#setI0">Am</a></span> <span class="id">_</span> <span class="id">Ak</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">meets</span> <span class="id">T</span> (<span class="id">F</span> <span class="id">G</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">T</span>)) :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span> <span class="id">B</span>, <span class="id">F</span> <span class="id">A</span> -&gt; <span class="id">G</span> <span class="id">B</span> -&gt; <span class="id">A</span> `&amp;` <span class="id">B</span> !=<span class="id"><a href="mathcomp.classical.classical_sets.html#setD0">set0</a></span>.<br/>
<br/>
<span class="kwd">Notation</span> "<span class="id">F</span> `#` <span class="id">G</span>" := (<span class="id">meets</span> <span class="id">F</span> <span class="id">G</span>) : <span class="id">classical_set_scope</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">meets</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">meetsC</span> <span class="id">T</span> (<span class="id">F</span> <span class="id">G</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">T</span>)) : <span class="id">F</span> `#` <span class="id">G</span> = <span class="id">G</span> `#` <span class="id">F</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof478')">Proof.</span></div>
<div class="proofscript" id="proof478">
<span class="id">gen</span> <span class="id">have</span> <span class="id">sFG</span> : <span class="id"><a name="SetOrder.Internal.ctbDistrLatticeType">F</a></span> <span class="id">G</span> / <span class="id">F</span> `#` <span class="id">G</span> -&gt; <span class="id">G</span> `#` <span class="id">F</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">FG</span> <span class="id">B</span> <span class="id">A</span> =&gt; /<span class="id">FG</span>; <span class="id">rewrite</span> <span class="id">setIC</span>; <span class="id">apply</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">propeqE</span>; <span class="id">split</span>; <span class="id">apply</span>: <span class="id">sFG</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sub_meets</span> <span class="id">T</span> (<span class="id">F</span> <span class="id">F</span>' <span class="id">G</span> <span class="id">G</span>' : <span class="id">set</span> (<span class="id">set</span> <span class="id">T</span>)) :<br/>
&nbsp;&nbsp;<span class="id">F</span> `&lt;=` <span class="id">F</span>' -&gt; <span class="id">G</span> `&lt;=` <span class="id">G</span>' -&gt; <span class="id">F</span>' `#` <span class="id">G</span>' -&gt; <span class="id">F</span> `#` <span class="id">G</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof479')">Proof.</span></div>
<div class="proofscript" id="proof479">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">sF</span> <span class="id">sG</span> <span class="id">FG</span> <span class="id">A</span> <span class="id">B</span> /<span class="id">sF</span> <span class="id">FA</span> /<span class="id">sG</span> <span class="id">GB</span>; <span class="id">apply</span>: (<span class="id">FG</span> <span class="id">A</span> <span class="id">B</span>). Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">meetsSr</span> <span class="id">T</span> (<span class="id">F</span> <span class="id">G</span> <span class="id">G</span>' : <span class="id">set</span> (<span class="id">set</span> <span class="id">T</span>)) :<br/>
&nbsp;&nbsp;<span class="id">G</span> `&lt;=` <span class="id">G</span>' -&gt; <span class="id">F</span> `#` <span class="id">G</span>' -&gt; <span class="id">F</span> `#` <span class="id">G</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof480')">Proof.</span></div>
<div class="proofscript" id="proof480">
 <span class="id">exact</span>: <span class="id">sub_meets</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">meetsSl</span> <span class="id">T</span> (<span class="id">G</span> <span class="id">F</span> <span class="id">F</span>' : <span class="id">set</span> (<span class="id">set</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#SetOrder.Internal.cbDistrLatticeType">T</a></span>)) :<br/>
&nbsp;&nbsp;<span class="id">F</span> `&lt;=` <span class="id">F</span>' -&gt; <span class="id">F</span>' `#` <span class="id">G</span> -&gt; <span class="id">F</span> `#` <span class="id"><a href="mathcomp.classical.classical_sets.html#SetOrder.Internal.ctbDistrLatticeType">G</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof481')">Proof.</span></div>
<div class="proofscript" id="proof481">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">sub_meets</span>; <span class="id">apply</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">meets</span>.<br/>
<br/>
<span class="kwd">Fact</span> <span class="id">set_display</span> : <span class="id">unit</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof482')">Proof.</span></div>
<div class="proofscript" id="proof482">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Module</span> <span class="id">SetOrder</span>.<br/>
<span class="kwd">Module</span> <span class="id">Internal</span>.<br/>
<span class="kwd">Section</span> <span class="id">SetOrder</span>.<br/>
<br/>
<span class="kwd">Context</span> {<span class="id">T</span> : <span class="kwd">Type</span>}.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">A</span> <span class="id"><a name="SetOrder.Exports.properEset">B</a></span> : <span class="id">set</span> <span class="id">T</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">le_def</span> <span class="id">A</span> <span class="id">B</span> : `[&lt; <span class="id">A</span> `&lt;=` <span class="id">B</span> &gt;] = (<span class="id">A</span> `&amp;` <span class="id">B</span> == <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof483')">Proof.</span></div>
<div class="proofscript" id="proof483">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">asboolP</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">setIidPl</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">lt_def</span> <span class="id">A</span> <span class="id">B</span> : `[&lt; <span class="id">A</span> `&lt;` <span class="id">B</span> &gt;] = (<span class="id">B</span> != <span class="id">A</span>) &amp;&amp; `[&lt; <span class="id">A</span> `&lt;=` <span class="id">B</span> &gt;].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof484')">Proof.</span></div>
<div class="proofscript" id="proof484">
<span class="id">apply</span>/<span class="id">idP</span>/<span class="id">idP</span> =&gt; [/<span class="id"><a name="SetOrder.Exports.botEset">asboolP</a></span>|/<span class="id">andP</span>[<span class="id">BA</span> /<span class="id">asboolP</span> <span class="id">AB</span>]]; <span class="id">rewrite</span> <span class="id">properEneq</span> <span class="id"><a name="SetOrder.Exports.topEset">eq_sym</a></span>;<br/>
&nbsp;&nbsp;<span class="kwd">by</span> [<span class="id">move</span>=&gt; [] -&gt; /<span class="id">asboolP</span>|<span class="id">apply</span>/<span class="id">asboolP</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">joinKI</span> <span class="id">B</span> <span class="id">A</span> : <span class="id">A</span> `&amp;` (<span class="id">A</span> `|` <span class="id">B</span>) = <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof485')">Proof.</span></div>
<div class="proofscript" id="proof485">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setUC</span> <span class="id">setKU</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">meetKU</span> <span class="id">B</span> <span class="id">A</span> : <span class="id">A</span> `|` (<span class="id">A</span> `&amp;` <span class="id">B</span>) = <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof486')">Proof.</span></div>
<div class="proofscript" id="proof486">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setIC</span> <span class="id">setKI</span>. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">orderMixin</span> := @<span class="id">MeetJoinMixin</span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#idP">_</a></span> (<span class="kwd">fun</span> <span class="id">A</span> <span class="id">B</span> =&gt; `[&lt;<span class="id">proper</span> <span class="id">A</span> <span class="id">B</span>&gt;]) <span class="id">setI</span><br/>
&nbsp;&nbsp;<span class="id"><a name="SetOrder.Exports.properPset">setU</a></span> <span class="id">le_def</span> <span class="id">lt_def</span> (@<span class="id">setIC</span> <span class="id">_</span>) (@<span class="id">setUC</span> <span class="id">_</span>) (@<span class="id">setIA</span> <span class="id">_</span>) (@<span class="id">setUA</span> <span class="id">_</span>) <span class="id">joinKI</span> <span class="id">meetKU</span><br/>
&nbsp;&nbsp;(@<span class="id">setIUl</span> <span class="id">_</span>) <span class="id">setIid</span>.<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Canonical</span> <span class="id">porderType</span> := <span class="id">POrderType</span> <span class="id">set_display</span> (<span class="id">set</span> <span class="id">T</span>) <span class="id">orderMixin</span>.<br/>
<span class="id">Local</span> <span class="kwd">Canonical</span> <span class="id">latticeType</span> := <span class="id">LatticeType</span> (<span class="id">set</span> <span class="id">T</span>) <span class="id">orderMixin</span>.<br/>
<span class="id">Local</span> <span class="kwd">Canonical</span> <span class="id"><a name="subset_fst_set">distrLatticeType</a></span> := <span class="id">DistrLatticeType</span> (<span class="id">set</span> <span class="id">T</span>) <span class="id">orderMixin</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">SetOrder_sub0set</span> <span class="id">A</span> : (<span class="id">set0</span> &lt;= <span class="id">A</span>)%<span class="id">O</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof487')">Proof.</span></div>
<div class="proofscript" id="proof487">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">asboolP</span>; <span class="id">apply</span>: <span class="id">sub0set</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">SetOrder_setTsub</span> <span class="id">A</span> : (<span class="id">A</span> &lt;= <span class="id">setT</span>)%<span class="id">O</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof488')">Proof.</span></div>
<div class="proofscript" id="proof488">
 <span class="id">exact</span>/<span class="id">asboolP</span>. Qed.</div>
<br/>
<span class="id">Local</span> <span class="kwd">Canonical</span> <span class="id">bLatticeType</span> :=<br/>
&nbsp;&nbsp;<span class="id">BLatticeType</span> (<span class="id">set</span> <span class="id">T</span>) (<span class="id">Order.BLattice.Mixin</span> <span class="id">SetOrder_sub0set</span>).<br/>
<span class="id">Local</span> <span class="kwd">Canonical</span> <span class="id">tbLatticeType</span> :=<br/>
&nbsp;&nbsp;<span class="id">TBLatticeType</span> (<span class="id">set</span> <span class="id">T</span>) (<span class="id">Order.TBLattice.Mixin</span> <span class="id">SetOrder_setTsub</span>).<br/>
<span class="id">Local</span> <span class="kwd">Canonical</span> <span class="id">bDistrLatticeType</span> := [<span class="id">bDistrLatticeType</span> <span class="id">of</span> <span class="id">set</span> <span class="id">T</span>].<br/>
<span class="id">Local</span> <span class="kwd">Canonical</span> <span class="id">tbDistrLatticeType</span> := [<span class="id">tbDistrLatticeType</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">of</a></span> <span class="id">set</span> <span class="id">T</span>].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">subKI</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">B</span> `&amp;` (<span class="id">A</span> `\` <span class="id">B</span>) = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof489')">Proof.</span></div>
<div class="proofscript" id="proof489">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a name="fst_setMR">setDE</a></span> <span class="id">setICA</span> <span class="id">setICr</span> <span class="id">setI0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">joinIB</span> <span class="id">A</span> <span class="id">B</span> : (<span class="id">A</span> `&amp;` <span class="id">B</span>) `|` <span class="id">A</span> `\` <span class="id">B</span> = <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof490')">Proof.</span></div>
<div class="proofscript" id="proof490">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setUC</span> -<span class="id">setDDr</span> <span class="id">setDv</span> <span class="id">setD0</span>. Qed.</div>
<br/>
<span class="id">Local</span> <span class="kwd">Canonical</span> <span class="id"><a name="section.T2">cbDistrLatticeType</a></span> := <span class="id">CBDistrLatticeType</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#section.T2">set</a></span> <span class="id">T</span>)<br/>
&nbsp;&nbsp;(@<span class="id">CBDistrLatticeMixin</span> <span class="id">_</span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">A</span> <span class="id">B</span> =&gt; <span class="id">A</span> `\` <span class="id">B</span>) <span class="id">subKI</span> <span class="id">joinIB</span>).<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Canonical</span> <span class="id"><a name="ysection">ctbDistrLatticeType</a></span> := <span class="id">CTBDistrLatticeType</span> (<span class="id">set</span> <span class="id">T</span>)<br/>
&nbsp;&nbsp;(@<span class="id">CTBDistrLatticeMixin</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">A</span> =&gt; ~` <span class="id">A</span>) (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">esym</span> (<span class="id">setTD</span> <span class="id">x</span>))).<br/>
<br/>
<span class="kwd">End</span> <span class="id">SetOrder</span>.<br/>
<span class="kwd">End</span> <span class="id">Internal</span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id">Exports</span>.<br/>
<br/>
<span class="kwd">Canonical</span> <span class="id">Internal.porderType</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">Internal.latticeType</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">Internal.distrLatticeType</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">Internal.bLatticeType</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">Internal.tbLatticeType</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">Internal.bDistrLatticeType</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">Internal.tbDistrLatticeType</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">Internal.cbDistrLatticeType</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">Internal.ctbDistrLatticeType</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">exports</span>.<br/>
<span class="kwd">Context</span> {<span class="id">T</span> : <span class="kwd">Type</span>}.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> <span class="id">T</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">subsetEset</span> <span class="id">A</span> <span class="id">B</span> : (<span class="id">A</span> &lt;= <span class="id">B</span>)%<span class="id"><a name="xsection0">O</a></span> = (<span class="id">A</span> `&lt;=` <span class="id">B</span>) :&gt; <span class="kwd">Prop</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof491')">Proof.</span></div>
<div class="proofscript" id="proof491">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">asboolE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">properEset</span> <span class="id">A</span> <span class="id">B</span> : (<span class="id">A</span> &lt; <span class="id">B</span>)%<span class="id">O</span> = (<span class="id">A</span> `&lt;` <span class="id">B</span>) :&gt; <span class="kwd">Prop</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof492')">Proof.</span></div>
<div class="proofscript" id="proof492">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">asboolE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subEset</span> <span class="id">A</span> <span class="id">B</span> : (<span class="id">A</span> `\` <span class="id">B</span>)%<span class="id">O</span> = (<span class="id">A</span> `\` <span class="id">B</span>)<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof493')">Proof.</span></div>
<div class="proofscript" id="proof493">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">complEset</span> <span class="id">A</span> : (~` <span class="id">A</span>)%<span class="id">O</span> = ~` <span class="id">A</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof494')">Proof.</span></div>
<div class="proofscript" id="proof494">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">botEset</span> : 0%<span class="id">O</span> = @<span class="id">set0</span> <span class="id">T</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof495')">Proof.</span></div>
<div class="proofscript" id="proof495">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">topEset</span> : 1%<span class="id">O</span> = @<span class="id">setT</span> <span class="id">T</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof496')">Proof.</span></div>
<div class="proofscript" id="proof496">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">meetEset</span> <span class="id">A</span> <span class="id">B</span> : (<span class="id">A</span> `&amp;` <span class="id">B</span>)%<span class="id">O</span> = (<span class="id">A</span> `&amp;` <span class="id">B</span>)<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof497')">Proof.</span></div>
<div class="proofscript" id="proof497">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">joinEset</span> <span class="id">A</span> <span class="id">B</span> : (<span class="id">A</span> `|` <span class="id">B</span>)%<span class="id">O</span> = (<span class="id">A</span> `|` <span class="id">B</span>)<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof498')">Proof.</span></div>
<div class="proofscript" id="proof498">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subsetPset</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">reflect</span> (<span class="id">A</span> `&lt;=` <span class="id">B</span>) (<span class="id">A</span> &lt;= <span class="id">B</span>)%<span class="id">O</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof499')">Proof.</span></div>
<div class="proofscript" id="proof499">
 <span class="kwd">by</span> <span class="id">apply</span>: (<span class="id">iffP</span> <span class="id">idP</span>); <span class="id">rewrite</span> <span class="id">subsetEset</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">properPset</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">reflect</span> (<span class="id">A</span> `&lt;` <span class="id">B</span>) (<span class="id">A</span> &lt; <span class="id"><a href="mathcomp.classical.classical_sets.html#ysection">B</a></span>)%<span class="id">O</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof500')">Proof.</span></div>
<div class="proofscript" id="proof500">
 <span class="kwd">by</span> <span class="id">apply</span>: (<span class="id">iffP</span> <span class="id">idP</span>); <span class="id">rewrite</span> <span class="id">properEset</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">exports</span>.<br/>
<span class="kwd">End</span> <span class="id">Exports</span>.<br/>
<span class="kwd">End</span> <span class="id">SetOrder</span>.<br/>
<span class="kwd">Export</span> <span class="id">SetOrder.Exports</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">product</span>.<br/>
<span class="kwd">Variables</span> (<span class="id">T1</span> <span class="id">T2</span> : <span class="kwd">Type</span>).<br/>
<span class="kwd">Implicit</span> <span class="kwd">Type</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> (<span class="id">T1</span> * <span class="id">T2</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#xsection">subset_fst_set</a></span> : {<span class="id">homo</span> @<span class="id">fst_set</span> <span class="id">T1</span> <span class="id">T2</span> : <span class="id">A</span> <span class="id">B</span> / <span class="id">A</span> `&lt;=` <span class="id">B</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof501')">Proof.</span></div>
<div class="proofscript" id="proof501">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">AB</span> <span class="id">x</span> [<span class="id">y</span> <span class="id">Axy</span>]; <span class="kwd">exists</span> <span class="id">y</span>; <span class="id">exact</span>/<span class="id">AB</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subset_snd_set</span> : {<span class="id">homo</span> @<span class="id">snd_set</span> <span class="id">T1</span> <span class="id">T2</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#xsection">A</a></span> <span class="id">B</span> / <span class="id">A</span> `&lt;=` <span class="id">B</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof502')">Proof.</span></div>
<div class="proofscript" id="proof502">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">AB</span> <span class="id">x</span> [<span class="id">y</span> <span class="id">Axy</span>]; <span class="kwd">exists</span> <span class="id">y</span>; <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">exact</a></span>/<span class="id">AB</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">fst_set_fst</span> <span class="id">A</span> : <span class="id">A</span> `&lt;=` <span class="id">A</span>.`1 \<span class="id"><a name="xsection_bigcup">o</a></span> <span class="id">fst</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof503')">Proof.</span></div>
<div class="proofscript" id="proof503">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">x</span> <span class="id">y</span>]; <span class="kwd">exists</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#section.T2">y</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">snd_set_snd</span> <span class="id">A</span>: <span class="id">A</span> `&lt;=` <span class="id">A</span>.`2 \<span class="id">o</span> <span class="id">snd</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof504')">Proof.</span></div>
<div class="proofscript" id="proof504">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">x</span> <span class="id">y</span>]; <span class="kwd">exists</span> <span class="id">x</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">fst_setM</span> (<span class="id">X</span> : <span class="id">set</span> <span class="id">T1</span>) (<span class="id">Y</span> : <span class="id">set</span> <span class="id">T2</span>) : (<span class="id">X</span> `*` <span class="id">Y</span>).`1 `&lt;=` <span class="id">X</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof505')">Proof.</span></div>
<div class="proofscript" id="proof505">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> [<span class="id">y</span> [//]]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">snd_setM</span> (<span class="id">X</span> : <span class="id">set</span> <span class="id">T1</span>) (<span class="id">Y</span> : <span class="id">set</span> <span class="id">T2</span>) : (<span class="id">X</span> `*` <span class="id">Y</span>).`2 `&lt;=` <span class="id">Y</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof506')">Proof.</span></div>
<div class="proofscript" id="proof506">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> [<span class="id">y</span> [//]]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">fst_setMR</span> (<span class="id">X</span> : <span class="id">set</span> <span class="id">T1</span>) (<span class="id">Y</span> : <span class="id">T1</span> -&gt; <span class="id">set</span> <span class="id">T2</span>) : (<span class="id">X</span> `*`` <span class="id">Y</span>).`1 `&lt;=` <span class="id">X</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof507')">Proof.</span></div>
<div class="proofscript" id="proof507">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> [<span class="id">y</span> [//]]. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">product</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">section</span>.<br/>
<span class="kwd">Variables</span> (<span class="id">T1</span> <span class="id">T2</span> : <span class="kwd">Type</span>).<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">A</span> : <span class="id">set</span> (<span class="id">T1</span> * <span class="id">T2</span>)) (<span class="id">x</span> : <span class="id">T1</span>) (<span class="id">y</span> : <span class="id">T2</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">xsection</span> <span class="id">A</span> <span class="id">x</span> := [<span class="id">set</span> <span class="id">y</span> | (<span class="id">x</span>, <span class="id">y</span>) \<span class="kwd">in</span> <span class="id">A</span>].<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">ysection</span> <span class="id">A</span> <span class="id">y</span> := [<span class="id">set</span> <span class="id">x</span> | (<span class="id">x</span>, <span class="id">y</span>) \<span class="kwd">in</span> <span class="id">A</span>].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">xsection_snd_set</span> <span class="id">A</span> <span class="id">x</span> : <span class="id">xsection</span> <span class="id">A</span> <span class="id">x</span> `&lt;=` <span class="id">A</span>.`2.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof508')">Proof.</span></div>
<div class="proofscript" id="proof508">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#trivIsetP">y</a></span> <span class="id">Axy</span>; <span class="kwd">exists</span> <span class="id">x</span>; <span class="id">rewrite</span> /<span class="id">xsection</span>/= <span class="id">inE</span> <span class="kwd">in</span> <span class="id">Axy</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">ysection_fst_set</span> <span class="id">A</span> <span class="id">y</span> : <span class="id">ysection</span> <span class="id">A</span> <span class="id">y</span> `&lt;=` <span class="id">A</span>.`1.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof509')">Proof.</span></div>
<div class="proofscript" id="proof509">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> <span class="id">Axy</span>; <span class="kwd">exists</span> <span class="id">y</span>; <span class="id">rewrite</span> /<span class="id">ysection</span>/= <span class="id">inE</span> <span class="kwd">in</span> <span class="id">Axy</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">mem_xsection</span> <span class="id">x</span> <span class="id">y</span> <span class="id">A</span> : (<span class="id">y</span> \<span class="kwd">in</span> <span class="id">xsection</span> <span class="id">A</span> <span class="id">x</span>) = ((<span class="id">x</span>, <span class="id">y</span>) \<span class="kwd">in</span> <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof510')">Proof.</span></div>
<div class="proofscript" id="proof510">
 <span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">apply</a></span>/<span class="id">idP</span>/<span class="id">idP</span> =&gt; [|]; [<span class="id">rewrite</span> <span class="id">inE</span>|<span class="id">rewrite</span> /<span class="id">xsection</span> !<span class="id">inE</span> /= <span class="id">inE</span>]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">mem_ysection</span> <span class="id">x</span> <span class="id">y</span> <span class="id">A</span> : (<span class="id">x</span> \<span class="kwd">in</span> <span class="id">ysection</span> <span class="id">A</span> <span class="id">y</span>) = ((<span class="id">x</span>, <span class="id">y</span>) \<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">A</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof511')">Proof.</span></div>
<div class="proofscript" id="proof511">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">idP</span>/<span class="id">idP</span> =&gt; [|]; [<span class="id">rewrite</span> <span class="id">inE</span>|<span class="id">rewrite</span> /<span class="id">ysection</span> !<span class="id">inE</span> /= <span class="id">inE</span>]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">xsection0</span> <span class="id">x</span> : <span class="id">xsection</span> <span class="id">set0</span> <span class="id">x</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof512')">Proof.</span></div>
<div class="proofscript" id="proof512">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> /<span class="id">xsection</span> =&gt; <span class="id">y</span>; <span class="id">split</span> =&gt; //=; <span class="id">rewrite</span> <span class="id">inE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">ysection0</span> <span class="id">y</span> : <span class="id">ysection</span> <span class="id">set0</span> <span class="id">y</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof513')">Proof.</span></div>
<div class="proofscript" id="proof513">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> /<span class="id">ysection</span> =&gt; <span class="id">x</span>; <span class="id">split</span> =&gt; //=; <span class="id">rewrite</span> <span class="id">inE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">in_xsectionM</span> <span class="id">X1</span> <span class="id">X2</span> <span class="id">x</span> : <span class="id">x</span> \<span class="kwd">in</span> <span class="id">X1</span> -&gt; <span class="id">xsection</span> (<span class="id">X1</span> `*` <span class="id">X2</span>) <span class="id">x</span> = <span class="id">X2</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof514')">Proof.</span></div>
<div class="proofscript" id="proof514">
<span class="id">move</span>=&gt; <span class="id">xX1</span>; <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>=&gt; [<span class="id">y</span> /<span class="id">xsection_snd_set</span>|]; <span class="id">first</span> <span class="id">exact</span>: <span class="id">snd_setM</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">y</span> <span class="id">X2y</span>; <span class="id">rewrite</span> /<span class="id">xsection</span>/= <span class="id">inE</span>; <span class="id">split</span>=&gt; //=; <span class="id">rewrite</span> <span class="id">inE</span> <span class="kwd">in</span> <span class="id">xX1</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">in_ysectionM</span> <span class="id">X1</span> <span class="id">X2</span> <span class="id">y</span> : <span class="id">y</span> \<span class="kwd">in</span> <span class="id">X2</span> -&gt; <span class="id">ysection</span> (<span class="id">X1</span> `*` <span class="id">X2</span>) <span class="id">y</span> = <span class="id">X1</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof515')">Proof.</span></div>
<div class="proofscript" id="proof515">
<span class="id">move</span>=&gt; <span class="id">yX2</span>; <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>=&gt; [<span class="id">x</span> /<span class="id">ysection_fst_set</span>|]; <span class="id">first</span> <span class="id">exact</span>: <span class="id">fst_setM</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> <span class="id">X1x</span>; <span class="id">rewrite</span> /<span class="id"><a name="xsectionD">ysection</a></span>/= <span class="id">inE</span>; <span class="id">split</span>=&gt; //=; <span class="id">rewrite</span> <span class="id">inE</span> <span class="kwd">in</span> <span class="id">yX2</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">notin_xsectionM</span> <span class="id">X1</span> <span class="id">X2</span> <span class="id">x</span> : <span class="id">x</span> \<span class="id"><a href="mathcomp.classical.boolp.html#predeqE">notin</a></span> <span class="id">X1</span> -&gt; <span class="id">xsection</span> (<span class="id">X1</span> `*` <span class="id">X2</span>) <span class="id">x</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof516')">Proof.</span></div>
<div class="proofscript" id="proof516">
<span class="id">move</span>=&gt; <span class="id">xX1</span>; <span class="id">rewrite</span> /<span class="id">xsection</span> /= <span class="id">predeqE</span> =&gt; <span class="id">y</span>; <span class="id">split</span> =&gt; //.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">xsection</span>/= <span class="id">inE</span> =&gt; -[] /=; <span class="id">rewrite</span> <span class="id">notin_set</span> <span class="kwd">in</span> <span class="id">xX1</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">notin_ysectionM</span> <span class="id">X1</span> <span class="id">X2</span> <span class="id">y</span> : <span class="id">y</span> \<span class="id">notin</span> <span class="id">X2</span> -&gt; <span class="id">ysection</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">X1</a></span> `*` <span class="id">X2</span>) <span class="id">y</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof517')">Proof.</span></div>
<div class="proofscript" id="proof517">
<span class="id">move</span>=&gt; <span class="id">yX2</span>; <span class="id">rewrite</span> /<span class="id">xsection</span> /= <span class="id">predeqE</span> =&gt; <span class="id">x</span>; <span class="id">split</span> =&gt; //.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">ysection</span>/= <span class="id">inE</span> =&gt; -[<span class="id">_</span>]; <span class="id">rewrite</span> <span class="id">notin_set</span> <span class="kwd">in</span> <span class="id">yX2</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">xsection_bigcup</span> (<span class="id">F</span> : <span class="id">nat</span> -&gt; <span class="id">set</span> (<span class="id">T1</span> * <span class="id">T2</span>)) <span class="id">x</span> :<br/>
&nbsp;&nbsp;<span class="id">xsection</span> (\<span class="id">bigcup_n</span> <span class="id">F</span> <span class="id">n</span>) <span class="id">x</span> = \<span class="id">bigcup_n</span> <span class="id">xsection</span> (<span class="id">F</span> <span class="id">n</span>) <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof518')">Proof.</span></div>
<div class="proofscript" id="proof518">
<span class="id">rewrite</span> <span class="id">predeqE</span> /<span class="id">xsection</span> =&gt; <span class="id">y</span>; <span class="id">split</span> =&gt; [|[<span class="id">n</span> <span class="id">_</span>]] /=; <span class="id">rewrite</span> <span class="id">inE</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; -[<span class="id">n</span> <span class="id">_</span> <span class="id">Fnxy</span>]; <span class="kwd">exists</span> <span class="id">n</span> =&gt; //=; <span class="id">rewrite</span> <span class="id">inE</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Fnxy</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">inE</a></span>; <span class="kwd">exists</span> <span class="id">n</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">ysection_bigcup</span> (<span class="id">F</span> : <span class="id">nat</span> -&gt; <span class="id">set</span> (<span class="id">T1</span> * <span class="id">T2</span>)) <span class="id">y</span> :<br/>
&nbsp;&nbsp;<span class="id">ysection</span> (\<span class="id">bigcup_n</span> <span class="id">F</span> <span class="id">n</span>) <span class="id">y</span> = \<span class="id">bigcup_n</span> <span class="id">ysection</span> (<span class="id">F</span> <span class="id">n</span>) <span class="id">y</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof519')">Proof.</span></div>
<div class="proofscript" id="proof519">
<span class="id">rewrite</span> <span class="id">predeqE</span> /<span class="id">ysection</span> =&gt; <span class="id">x</span>; <span class="id">split</span> =&gt; [|[<span class="id">n</span> <span class="id">_</span>]] /=; <span class="id">rewrite</span> <span class="id">inE</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">move</a></span>=&gt; -[<span class="id">n</span> <span class="id">_</span> <span class="id">Fnxy</span>]; <span class="kwd">exists</span> <span class="id">n</span> =&gt; //=; <span class="id">rewrite</span> <span class="id">inE</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Fnxy</span>; <span class="id"><a href="mathcomp.classical.classical_sets.html#eqEsubset">rewrite</a></span> <span class="id">inE</span>; <span class="kwd">exists</span> <span class="id">n</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">trivIset_xsection</span> (<span class="id">F</span> : <span class="id">nat</span> -&gt; <span class="id">set</span> (<span class="id">T1</span> * <span class="id">T2</span>)) <span class="id">x</span> : <span class="id">trivIset</span> <span class="id">setT</span> <span class="id">F</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">trivIset</span> <span class="id">setT</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">xsection</span> (<span class="id">F</span> <span class="id">n</span>) <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof520')">Proof.</span></div>
<div class="proofscript" id="proof520">
<span class="id">move</span>=&gt; /<span class="id">trivIsetP</span> <span class="id">h</span>; <span class="id">apply</span>/<span class="id">trivIsetP</span> =&gt; <span class="id">i</span> <span class="id">j</span> <span class="id">_</span> <span class="id">_</span> <span class="id">ij</span>.<br/>
<span class="id">rewrite</span> /<span class="id">xsection</span> /= <span class="id">predeqE</span> =&gt; <span class="id">y</span>; <span class="id">split</span> =&gt; //= -[]; <span class="id">rewrite</span> !<span class="id">inE</span> =&gt; <span class="id">Fixy</span> <span class="id">Fjxy</span>.<br/>
<span class="kwd">by</span> <span class="id">have</span> := <span class="id">h</span> <span class="id">i</span> <span class="id">j</span> <span class="id">Logic.I</span> <span class="id">Logic.I</span> <span class="id">ij</span>; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; /(<span class="id">_</span> (<span class="id">x</span>, <span class="id">y</span>))[+ <span class="id">_</span>]; <span class="id">apply</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">trivIset_ysection</span> (<span class="id">F</span> : <span class="id">nat</span> -&gt; <span class="id">set</span> (<span class="id">T1</span> * <span class="id">T2</span>)) <span class="id">y</span> : <span class="id">trivIset</span> <span class="id">setT</span> <span class="id">F</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">trivIset</span> <span class="id">setT</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">ysection</span> (<span class="id">F</span> <span class="id">n</span>) <span class="id">y</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof521')">Proof.</span></div>
<div class="proofscript" id="proof521">
<span class="id">move</span>=&gt; /<span class="id">trivIsetP</span> <span class="id">h</span>; <span class="id">apply</span>/<span class="id">trivIsetP</span> =&gt; <span class="id">i</span> <span class="id">j</span> <span class="id">_</span> <span class="id">_</span> <span class="id">ij</span>.<br/>
<span class="id">rewrite</span> /<span class="id">ysection</span> /= <span class="id">predeqE</span> =&gt; <span class="id">x</span>; <span class="id">split</span> =&gt; //= -[]; <span class="id">rewrite</span> !<span class="id">inE</span> =&gt; <span class="id">Fixy</span> <span class="id">Fjxy</span>.<br/>
<span class="kwd">by</span> <span class="id">have</span> := <span class="id">h</span> <span class="id">i</span> <span class="id">j</span> <span class="id">Logic.I</span> <span class="id">Logic.I</span> <span class="id">ij</span>; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; /(<span class="id">_</span> (<span class="id">x</span>, <span class="id">y</span>))[+ <span class="id">_</span>]; <span class="id">apply</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">le_xsection</span> <span class="id">x</span> : {<span class="id">homo</span> <span class="id">xsection</span> ^~ <span class="id">x</span> : <span class="id">X</span> <span class="id">Y</span> / <span class="id">X</span> `&lt;=` <span class="id">Y</span> &gt;-&gt; <span class="id">X</span> `&lt;=` <span class="id">Y</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof522')">Proof.</span></div>
<div class="proofscript" id="proof522">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">X</span> <span class="id">Y</span> <span class="id">XY</span> <span class="id">y</span>; <span class="id">rewrite</span> /<span class="id">xsection</span> /= 2!<span class="id">inE</span> =&gt; /<span class="id">XY</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">le_ysection</span> <span class="id">y</span> : {<span class="id">homo</span> <span class="id">ysection</span> ^~ <span class="id">y</span> : <span class="id">X</span> <span class="id">Y</span> / <span class="id">X</span> `&lt;=` <span class="id">Y</span> &gt;-&gt; <span class="id">X</span> `&lt;=` <span class="id">Y</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof523')">Proof.</span></div>
<div class="proofscript" id="proof523">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">X</span> <span class="id">Y</span> <span class="id">XY</span> <span class="id">x</span>; <span class="id">rewrite</span> /<span class="id">ysection</span> /= 2!<span class="id">inE</span> =&gt; /<span class="id">XY</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">xsectionI</span> <span class="id">A</span> <span class="id">B</span> <span class="id">x</span> : <span class="id">xsection</span> (<span class="id">A</span> `&amp;` <span class="id">B</span>) <span class="id">x</span> = <span class="id">xsection</span> <span class="id">A</span> <span class="id">x</span> `&amp;` <span class="id">xsection</span> <span class="id">B</span> <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof524')">Proof.</span></div>
<div class="proofscript" id="proof524">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">xsection</span> <span class="id">predeqE</span> =&gt; <span class="id">y</span>/=; <span class="id">split</span>; <span class="id">rewrite</span> !<span class="id">inE</span> =&gt; -[]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">ysectionI</span> <span class="id">A</span> <span class="id">B</span> <span class="id">y</span> : <span class="id">ysection</span> (<span class="id">A</span> `&amp;` <span class="id">B</span>) <span class="id">y</span> = <span class="id">ysection</span> <span class="id">A</span> <span class="id">y</span> `&amp;` <span class="id">ysection</span> <span class="id">B</span> <span class="id">y</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof525')">Proof.</span></div>
<div class="proofscript" id="proof525">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">ysection</span> <span class="id">predeqE</span> =&gt; <span class="id">x</span>/=; <span class="id">split</span>; <span class="id">rewrite</span> !<span class="id">inE</span> =&gt; -[]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">xsectionD</span> <span class="id">X</span> <span class="id">Y</span> <span class="id">x</span> : <span class="id">xsection</span> (<span class="id">X</span> `\` <span class="id">Y</span>) <span class="id">x</span> = <span class="id">xsection</span> <span class="id">X</span> <span class="id">x</span> `\` <span class="id">xsection</span> <span class="id">Y</span> <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof526')">Proof.</span></div>
<div class="proofscript" id="proof526">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> /<span class="id">xsection</span> /= =&gt; <span class="id">y</span>; <span class="id">split</span>; <span class="id">rewrite</span> !<span class="id">inE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">ysectionD</span> <span class="id">X</span> <span class="id">Y</span> <span class="id">y</span> : <span class="id">ysection</span> (<span class="id">X</span> `\` <span class="id">Y</span>) <span class="id">y</span> = <span class="id">ysection</span> <span class="id">X</span> <span class="id">y</span> `\` <span class="id">ysection</span> <span class="id">Y</span> <span class="id">y</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof527')">Proof.</span></div>
<div class="proofscript" id="proof527">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> /<span class="id">ysection</span> /= =&gt; <span class="id">x</span>; <span class="id">split</span>; <span class="id">rewrite</span> !<span class="id">inE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">xsection_preimage_snd</span> (<span class="id">B</span> : <span class="id">set</span> <span class="id">T2</span>) <span class="id">x</span> : <span class="id">xsection</span> (<span class="id">snd</span> @^-1` <span class="id">B</span>) <span class="id">x</span> = <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof528')">Proof.</span></div>
<div class="proofscript" id="proof528">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>; <span class="id">move</span>=&gt; <span class="id">y</span>/=; <span class="id">rewrite</span> /<span class="id">xsection</span>/= <span class="id">inE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">ysection_preimage_fst</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T1</span>) <span class="id">y</span> : <span class="id">ysection</span> (<span class="id">fst</span> @^-1` <span class="id">A</span>) <span class="id">y</span> = <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof529')">Proof.</span></div>
<div class="proofscript" id="proof529">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>; <span class="id">move</span>=&gt; <span class="id">x</span>/=; <span class="id">rewrite</span> /<span class="id">ysection</span>/= <span class="id">inE</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">section</span>.<br/>
<br/>
<span class="kwd">Notation</span> "<span class="id">B</span> \; <span class="id">A</span>" :=<br/>
&nbsp;&nbsp;([<span class="id">set</span> <span class="id">xy</span> | <span class="kwd">exists2</span> <span class="id">z</span>, <span class="id">A</span> (<span class="id">xy</span>.1, <span class="id">z</span>) &amp; <span class="id">B</span> (<span class="id">z</span>, <span class="id">xy</span>.2)]) : <span class="id">classical_set_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_compose_subset</span> {<span class="id">X</span> <span class="id">Y</span> : <span class="kwd">Type</span>} (<span class="id">A</span> <span class="id">C</span> : <span class="id">set</span> (<span class="id">X</span> * <span class="id">Y</span>)) (<span class="id">B</span> <span class="id">D</span> : <span class="id">set</span> (<span class="id">Y</span> * <span class="id">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id">A</span> `&lt;=` <span class="id">C</span> -&gt; <span class="id">B</span> `&lt;=` <span class="id">D</span> -&gt; <span class="id">A</span> \; <span class="id">B</span> `&lt;=` <span class="id">C</span> \; <span class="id">D</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof530')">Proof.</span></div>
<div class="proofscript" id="proof530">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">AsubC</span> <span class="id">BD</span> [<span class="id">x</span> <span class="id">z</span>] /= [<span class="id">y</span>] <span class="id">Bxy</span> <span class="id">Ayz</span>; <span class="kwd">exists</span> <span class="id">y</span>; [<span class="id">exact</span>: <span class="id">BD</span> | <span class="id">exact</span>: <span class="id">AsubC</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_compose_diag</span> {<span class="id">X</span> : <span class="kwd">Type</span>} (<span class="id">E</span> : <span class="id">set</span> (<span class="id">X</span> * <span class="id">X</span>)) :<br/>
&nbsp;&nbsp;<span class="id">E</span> \; <span class="id">range</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; (<span class="id">x</span>, <span class="id">x</span>)) = <span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof531')">Proof.</span></div>
<div class="proofscript" id="proof531">
<span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; [[<span class="id">_</span> <span class="id">_</span>] [<span class="id">_</span> [<span class="id">_</span> <span class="id">_</span> [&lt;- &lt;-//]]]|[<span class="id">x</span> <span class="id">y</span>] <span class="id">Exy</span>]/=.<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">x</span> =&gt; //; <span class="kwd">exists</span> <span class="id">x</span>.<br/>
Qed.</div>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/tree/yoshihiro503%40generate_index">a fork of coq2html</a></div>
</body>
</html>
