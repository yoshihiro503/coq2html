
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module mathcomp.analysis.measure</title>
<meta name="description" content="Documentation of Coq module mathcomp.analysis.measure" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>

<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">
<h1 class="title">Module mathcomp.analysis.measure</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">all_ssreflect</span> <span class="id">all_algebra</span> <span class="id">finmap</span>.<br/>
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="mathcomp.classical.mathcomp_extra.html">mathcomp_extra</a></span> <span class="id"><a href="mathcomp.classical.boolp.html">boolp</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html">classical_sets</a></span> <span class="id"><a href="mathcomp.classical.functions.html">functions</a></span>.<br/>
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="mathcomp.classical.cardinality.html">cardinality</a></span> <span class="id"><a href="mathcomp.classical.fsbigop.html">fsbigop</a></span> .<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="mathcomp.analysis.reals.html">reals</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html">ereal</a></span> <span class="id"><a href="mathcomp.analysis.signed.html">signed</a></span> <span class="id"><a href="mathcomp.analysis.topology.html">topology</a></span> <span class="id"><a href="mathcomp.analysis.normedtype.html">normedtype</a></span> <span class="id"><a href="mathcomp.analysis.sequences.html">sequences</a></span> <span class="id"><a href="mathcomp.analysis.esum.html">esum</a></span> <span class="id"><a href="mathcomp.analysis.numfun.html">numfun</a></span>.<br/>
<span class="kwd">From</span> <span class="id">HB</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">structures</span>.<br/>
<br/>
<pre class="ssrdoc">
                           Measure Theory                                  
                                                                           
NB: See CONTRIBUTING.md for an introduction to HB concepts and commands.   
                                                                           
This files provides a formalization of the basics of measure theory. This  
includes the formalization of mathematical structures and of measures, as  
well as standard theorems such as the Measure Extension theorem.           
                                                                           
References:                                                                
- Daniel Li, Int√©gration et applications, 2016                             
- Achim Klenke, Probability Theory 2nd edition, 2014                       
                                                                           
* Mathematical structures                                                  
   semiRingOfSetsType d == the type of semirings of sets                   
                           The carrier is a set of sets A_i such that      
                           "measurable A_i" holds.                         
                           "measurable A" is printed as "d.-measurable A"  
                           where d is a "display parameter" whose purpose  
                           is to distinguish different "measurable"        
                           predicates in the same context.                 
                           The HB class is SemiRingOfSets.                 
       ringOfSetsType d == the type of rings of sets                       
                           The HB class is RingOfSets.                     
    algebraOfSetsType d == the type of algebras of sets                    
                           The HB class is AlgebraOfsets.                  
         measurableType == the type of sigma-algebras                      
                           The HB class is Measurable.                     
                                                                           
* Instances of mathematical structures                                     
discrete_measurable_unit == the measurableType corresponding to            
                            [set: set unit]                                
discrete_measurable_bool == the measurableType corresponding to            
                            [set: set bool]                                
 discrete_measurable_nat == the measurableType corresponding to            
                            [set: set nat]                                 
               setring G == the set of sets G contains the empty set, is   
                            closed by union, and difference                
                &lt;&lt;r G &gt;&gt; := smallest setring G                             
                            &lt;&lt;r G &gt;&gt; is equipped with a structure of ring  
                            of sets.                                       
   G.-ring.-measurable A == A belongs for the ring of sets &lt;&lt;r G &gt;&gt;        
       sigma_algebra D G == the set of sets G forms a sigma algebra on D   
             &lt;&lt;s D, G &gt;&gt; == sigma-algebra generated by G on D              
                         := smallest (sigma_algebra D) G                   
                &lt;&lt;s G &gt;&gt; := &lt;&lt;s setT, G &gt;&gt;                                 
                            &lt;&lt;s G &gt;&gt; is equipped with a structure of       
                            sigma-algebra                                  
  G.-sigma.-measurable A == A is measurable for the sigma-algebra &lt;&lt;s G &gt;&gt; 
          salgebraType G == the measurableType corresponding to &lt;&lt;s G &gt;&gt;   
                            This is an HB alias.                           
   mu .-cara.-measurable == sigma-algebra of Caratheodory measurable sets  
                                                                           
* Structures for functions on classes of sets                              
  (There are a few details about mixins/factories to highlight             
  implementations peculiarities.)                                          
{content set T -&gt; \bar R} == type of contents                              
                           T is expected to be a semiring of sets and R a  
                           numFieldType.                                   
                           The HB class is Content.                        
{measure set T -&gt; \bar R} == type of (non-negative) measures               
                           T is expected to be a semiring of sets and R a  
                           numFieldType.                                   
                           The HB class is Measure.                        
Content_SubSigmaAdditive_isMeasure ==                                      
                     mixin that extends a content to a measure with the    
                     proof that it is semi_sigma_additive                  
Content_isMeasure == factory that extends a content to a measure with      
                     the proof that it is sub_sigma_additive               
                isMeasure == factory corresponding to the "textbook        
                           definition" of measures                         
          sfinite_measure == predicate for s-finite measure functions      
{sfinite_measure set T -&gt; \bar R} == type of s-finite measures             
                           The HB class is SFiniteMeasure.                 
   sfinite_measure_seq mu == the sequence of finite measures of the        
                           s-finite measure mu                             
 Measure_isSFinite_subdef == mixin for s-finite measures                   
        Measure_isSFinite == factory for s-finite measures                 
{sigma_finite_content set T -&gt; \bar R} == contents that are also sigma     
                           finite                                          
                           The HB class is SigmaFiniteContent.             
{sigma_finite_measure set T -&gt; \bar R} == measures that are also sigma     
                           finite                                          
                           The HB class is SigmaFiniteMeasure.             
         sigma_finite A f == the measure function f is sigma-finite on the 
                           A : set T with T a semiring of sets             
              fin_num_fun == predicate for finite function over measurable 
                           sets                                            
           FinNumFun.type == type of functions over semiring of sets       
                           returning a fin_num                             
                           The HB class is FinNumFun.                      
{finite_measure set T -&gt; \bar R} == finite measures                        
                           The HB class is FiniteMeasure.                  
     SigmaFinite_isFinite == mixin for finite measures                     
         Measure_isFinite == factory for finite measures                   
      subprobability T R == subprobability measure over the measurableType 
                           T with values in \bar R with R : realType       
                           The HB class is SubProbability.                 
        probability T R == probability measure over the measurableType T   
                           with values in \bar with R : realType           
              probability == type of probability measures                  
                           The HB class is Probability.                    
    Measure_isProbability == factor for probability measures               
             mnormalize mu == normalization of a measure to a probability  
{outer_measure set T -&gt; \bar R} == type of an outer measure over sets      
                           of elements of type T : Type where R is         
                           expected to be a numFieldType                   
                           The HB class is OuterMeasure.                   
                                                                           
* Instances of measures                                                    
 pushforward mf m == pushforward/image measure of m by f, where mf is a    
                     proof that f is measurable                            
             \d_a == Dirac measure                                         
        msum mu n == the measure corresponding to the sum of the measures  
                     mu_0, ..., mu_{n-1}                                   
       @mzero T R == the zero measure                                      
measure_add m1 m2 == the measure corresponding to the sum of the           
                     measures m1 and m2                                    
       mscale r m == the measure of corresponding to fun A =&gt; r * m A      
                     where r has type {nonneg R}                           
     mseries mu n == the measure corresponding to the sum of the           
                     measures mu_n, mu_{n+1}, ...                          
     mrestr mu mD == restriction of the measure mu to a set D; mD is a     
                     proof that D is measurable                            
     counting T R == counting measure                                      
                                                                           
     setI_closed G == the set of sets G is closed under finite             
                      intersection                                         
     setU_closed G == the set of sets G is closed under finite union       
     setC_closed G == the set of sets G is closed under complement         
     setD_closed G == the set of sets G is closed under difference         
    ndseq_closed G == the set of sets G is closed under non-decreasing     
                      countable union                                      
 trivIset_closed G == the set of sets G is closed under pairwise-disjoint  
                      countable union                                      
                                                                           
* Hierarchy of s-finite, sigma-finite, finite measures:                    
    sfinite_measure == predicate for s-finite measure functions            
    Measure_isSFinite_subdef == mixin for s-finite measures                
    SFiniteMeasure == structure of s-finite measures                       
    {sfinite_measure set T -&gt; \bar R} == type of s-finite measures         
    Measure_isSFinite == factory for s-finite measures                     
    sfinite_measure_seq mu == the sequence of finite measures of the       
                              s-finite measure mu                          
                                                                           
    sigma_finite A f == the measure function f is sigma-finite on the set  
                        A : set T  with T : semiRingOfSetsType             
    isSigmaFinite == mixin corresponding to sigma finiteness               
    {sigma_finite_content set T -&gt; \bar R} == contents that are also sigma 
                                              finite                       
    {sigma_finite_measure set T -&gt; \bar R} == measures that are also sigma 
                                              finite                       
                                                                           
    fin_num_fun == predicate for finite function over measurable sets      
    SigmaFinite_isFinite == mixin for finite measures                      
    FiniteMeasure == structure of finite measures                          
    Measure_isFinite == factory for finite measures                        
                                                                           
    mfrestr mD muDoo == finite measure corresponding to the restriction of 
                        the measure mu over D with mu D &lt; +oo,             
                        mD : measurable D, muDoo : mu D &lt; +oo              
                                                                           
    FiniteMeasure_isSubProbability = mixin corresponding to subprobability 
    SubProbability = structure of subprobability                           
    subprobability T R == subprobability measure over the measurableType T 
                          with value in R : realType                       
    Measure_isSubProbability == factory for subprobability measures        
                                                                           
    isProbability == mixin corresponding to probability measures           
    Probability == structure of probability measures                       
    probability T R == probability measure over the measurableType T with  
                       value in R : realType                               
    Measure_isProbability == factor for probability measures               
                                                                           
     monotone_class D G == G is a monotone class of subsets of D           
            &lt;&lt;m D, G &gt;&gt; == monotone class generated by G on D              
               &lt;&lt;m G &gt;&gt; := &lt;&lt;m setT, G &gt;&gt;                                  
               dynkin G == G is a set of sets that form a Dynkin           
                           (or a lambda) system                            
               &lt;&lt;d G &gt;&gt; == Dynkin system generated by G, i.e.,             
                           smallest dynkin G                               
                                                                           
     measurable_fun D f == the function f with domain D is measurable      
   preimage_class D f G == class of the preimages by f of sets in G        
      image_class D f G == class of the sets with a preimage by f in G     
                                                                           
       mu.-negligible A == A is mu negligible                              
 measure_is_complete mu == the measure mu is complete                      
 {ae mu, forall x, P x} == P holds almost everywhere for the measure mu,   
                           declared as an instance of the type of filters  
                                                                           
* From a premeasure to an outer measure (Measure Extension Theorem part 1) 
  measurable_cover X == the set of sequences F such that                   
                        - forall k, F k is measurable                      
                        - X `&lt;=` \bigcup_k (F k)                           
                mu^* == extension of the measure mu over a semiring of     
                        sets (it is an outer measure)                      
* From an outer measure to a measure (Measure Extension Theorem part 2):   
       mu.-caratheodory == the set of Caratheodory measurable sets for the 
                        outer measure mu, i.e., sets A such that           
                        forall B, mu A = mu (A `&amp;` B) + mu (A `&amp;` ~` B)    
   caratheodory_type mu := T, where mu : {outer_measure set T -&gt; \bar R}   
                        It is a canonical mesurableType copy of T.         
                        The restriction of the outer measure mu to the     
                        sigma algebra of Caratheodory measurable sets is a 
                        measure.                                           
                        Remark: sets that are negligible for               
                        this measure are Caratheodory measurable.          
* Measure Extension Theorem:                                               
   measure_extension mu == extension of the content mu over a semiring of  
                        sets to a measure over the generated sigma algebra 
                        (requires a proof of sigma-sub-additivity)         
                                                                           
* Product of measurable spaces:                                            
  preimage_classes f1 f2 == sigma-algebra generated by the union of the    
                            preimages by f1 and the preimages by f2 with   
                            f1 : T -&gt; T1 and f : T -&gt; T2, T1 and T2 being  
                            measurableType's                               
  (d1, d2).-prod.-measurable A == A is measurable for the sigma-algebra    
                            generated from T1 x T2, with T1 and T2         
                            measurableType's with resp. display d1 and d2  
                                                                           
 m1 `&lt;&lt; m2 == m1 is absolutely continuous w.r.t. m2 or m2 dominates m1     
 ess_sup f == essential supremum of the function f : T -&gt; R where T is a   
              measurableType and R is a realType                           
                                                                           
</pre>
<br/>
<span class="kwd">Set</span> <span class="kwd">Implicit</span> <span class="kwd">Arguments</span>.<br/>
<span class="id">Unset</span> <span class="id">Strict</span> <span class="kwd">Implicit</span>.<br/>
<span class="id">Unset</span> <span class="id">Printing</span> <span class="kwd">Implicit</span> <span class="id">Defensive</span>.<br/>
<span class="kwd">Import</span> <span class="id">Order.TTheory</span> <span class="id">GRing.Theory</span> <span class="id">Num.Def</span> <span class="id">Num.Theory</span>.<br/>
<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'<span class="id">s</span>&lt;|' <span class="id">D</span> , <span class="id">G</span> '|&gt;'" (<span class="kwd">at</span> <span class="id">level</span> 40, <span class="id">G</span>, <span class="id">D</span> <span class="kwd">at</span> <span class="id">next</span> <span class="id">level</span>).<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'<span class="id">s</span>&lt;&lt;' <span class="id">A</span> '&gt;&gt;'".<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'<span class="id">d</span>&lt;&lt;' <span class="id">D</span> '&gt;&gt;'".<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">mu</span> .-<span class="id">negligible</span>" (<span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "<span class="id">mu</span> .-<span class="id">negligible</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "{ '<span class="id">ae</span>' <span class="id">m</span> , <span class="id">P</span> }" (<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">format</span> "{ '<span class="id">ae</span>'  <span class="id">m</span> ,  <span class="id">P</span> }").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">mu</span> .-<span class="id">measurable</span>" (<span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "<span class="id">mu</span> .-<span class="id">measurable</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'\<span class="id">d_</span>' <span class="id">a</span>" (<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">a</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "'\<span class="id">d_</span>' <span class="id">a</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">G</span> .-<span class="id">sigma</span>" (<span class="kwd">at</span> <span class="id">level</span> 1, <span class="id">format</span> "<span class="id">G</span> .-<span class="id">sigma</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">G</span> .-<span class="id">sigma</span>.-<span class="id">measurable</span>"<br/>
&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "<span class="id">G</span> .-<span class="id">sigma</span>.-<span class="id">measurable</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">d</span> .-<span class="id">ring</span>" (<span class="kwd">at</span> <span class="id">level</span> 1, <span class="id">format</span> "<span class="id">d</span> .-<span class="id">ring</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">d</span> .-<span class="id">ring</span>.-<span class="id">measurable</span>"<br/>
&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "<span class="id">d</span> .-<span class="id">ring</span>.-<span class="id">measurable</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">mu</span> .-<span class="id">cara</span>" (<span class="kwd">at</span> <span class="id">level</span> 1, <span class="id">format</span> "<span class="id">mu</span> .-<span class="id">cara</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">mu</span> .-<span class="id">cara</span>.-<span class="id">measurable</span>"<br/>
&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "<span class="id">mu</span> .-<span class="id">cara</span>.-<span class="id">measurable</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">mu</span> .-<span class="id">caratheodory</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "<span class="id">mu</span> .-<span class="id">caratheodory</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'&lt;&lt;<span class="id">m</span>' <span class="id">D</span> , <span class="id">G</span> '&gt;&gt;'"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "'&lt;&lt;<span class="id">m</span>'  <span class="id">D</span> ,  <span class="id">G</span>  '&gt;&gt;'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'&lt;&lt;<span class="id">m</span>' <span class="id">G</span> '&gt;&gt;'"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "'&lt;&lt;<span class="id">m</span>'  <span class="id">G</span>  '&gt;&gt;'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'&lt;&lt;<span class="id">d</span>' <span class="id">G</span> '&gt;&gt;'"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "'&lt;&lt;<span class="id">d</span>'  <span class="id">G</span> '&gt;&gt;'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'&lt;&lt;<span class="id">s</span>' <span class="id">D</span> , <span class="id">G</span> '&gt;&gt;'"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "'&lt;&lt;<span class="id">s</span>'  <span class="id">D</span> ,  <span class="id">G</span>  '&gt;&gt;'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'&lt;&lt;<span class="id">s</span>' <span class="id">G</span> '&gt;&gt;'"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "'&lt;&lt;<span class="id">s</span>'  <span class="id">G</span>  '&gt;&gt;'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'&lt;&lt;<span class="id">r</span>' <span class="id">G</span> '&gt;&gt;'"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "'&lt;&lt;<span class="id">r</span>'  <span class="id">G</span> '&gt;&gt;'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "{ '<span class="id">content</span>' <span class="id">fUV</span> }" (<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">format</span> "{ '<span class="id">content</span>'  <span class="id">fUV</span> }").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">content</span>' '<span class="id">of</span>' <span class="id">f</span> '<span class="kwd">as</span>' <span class="id">g</span> ]"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">format</span> "[ '<span class="id">content</span>'  '<span class="id">of</span>'  <span class="id">f</span>  '<span class="kwd">as</span>'  <span class="id">g</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">content</span>' '<span class="id">of</span>' <span class="id">f</span> ]"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">format</span> "[ '<span class="id">content</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "{ '<span class="id">measure</span>' <span class="id">fUV</span> }"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">format</span> "{ '<span class="id">measure</span>'  <span class="id">fUV</span> }").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">measure</span>' '<span class="id">of</span>' <span class="id">f</span> '<span class="kwd">as</span>' <span class="id">g</span> ]"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">format</span> "[ '<span class="id">measure</span>'  '<span class="id">of</span>'  <span class="id">f</span>  '<span class="kwd">as</span>'  <span class="id">g</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">measure</span>' '<span class="id">of</span>' <span class="id">f</span> ]"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">format</span> "[ '<span class="id">measure</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "{ '<span class="id">outer_measure</span>' <span class="id">fUV</span> }"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">format</span> "{ '<span class="id">outer_measure</span>'  <span class="id">fUV</span> }").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">outer_measure</span>' '<span class="id">of</span>' <span class="id">f</span> '<span class="kwd">as</span>' <span class="id">g</span> ]"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">format</span> "[ '<span class="id">outer_measure</span>'  '<span class="id">of</span>'  <span class="id">f</span>  '<span class="kwd">as</span>'  <span class="id">g</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">outer_measure</span>' '<span class="id">of</span>' <span class="id">f</span> ]"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">format</span> "[ '<span class="id">outer_measure</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">p</span> .-<span class="id">prod</span>" (<span class="kwd">at</span> <span class="id">level</span> 1, <span class="id">format</span> "<span class="id">p</span> .-<span class="id">prod</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">p</span> .-<span class="id">prod</span>.-<span class="id">measurable</span>"<br/>
&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "<span class="id">p</span> .-<span class="id">prod</span>.-<span class="id">measurable</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">m1</span> `&lt;&lt; <span class="id">m2</span>" (<span class="kwd">at</span> <span class="id">level</span> 51).<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="measure_display">measure_display</a></span> := <span class="id"><a name="default_measure_display">default_measure_display</a></span>.<br/>
<span class="id">Declare</span> <span class="kwd">Scope</span> <span class="id">measure_display_scope</span>.<br/>
<span class="id">Delimit</span> <span class="kwd">Scope</span> <span class="id">measure_display_scope</span> <span class="kwd">with</span> <span class="id">mdisp</span>.<br/>
<span class="id">Bind</span> <span class="kwd">Scope</span> <span class="id">measure_display_scope</span> <span class="kwd">with</span> <span class="id">measure_display</span>.<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">classical_set_scope</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ring_scope</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="classes">classes</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">T</span>} (<span class="id">C</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) -&gt; <span class="kwd">Prop</span>) (<span class="id">D</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) (<span class="id">G</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>)).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="setC_closed">setC_closed</a></span> := <span class="kwd">forall</span> <span class="id">A</span>, <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> <span class="id">A</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> (~` <span class="id">A</span>).<br/>
<span class="kwd">Definition</span> <span class="id"><a name="setI_closed">setI_closed</a></span> := <span class="kwd">forall</span> <span class="id">A</span> <span class="id">B</span>, <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> <span class="id">A</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> <span class="id">B</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> (<span class="id">A</span> `&amp;` <span class="id">B</span>).<br/>
<span class="kwd">Definition</span> <span class="id"><a name="setU_closed">setU_closed</a></span> := <span class="kwd">forall</span> <span class="id">A</span> <span class="id">B</span>, <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> <span class="id">A</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> <span class="id">B</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> (<span class="id">A</span> `|` <span class="id">B</span>).<br/>
<span class="kwd">Definition</span> <span class="id"><a name="setD_closed">setD_closed</a></span> := <span class="kwd">forall</span> <span class="id">A</span> <span class="id">B</span>, <span class="id">B</span> `&lt;=` <span class="id">A</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> <span class="id">A</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> <span class="id">B</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> (<span class="id">A</span> `\` <span class="id">B</span>).<br/>
<span class="kwd">Definition</span> <span class="id"><a name="setDI_closed">setDI_closed</a></span> := <span class="kwd">forall</span> <span class="id">A</span> <span class="id">B</span>, <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> <span class="id">A</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> <span class="id">B</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> (<span class="id">A</span> `\` <span class="id">B</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="fin_bigcap_closed">fin_bigcap_closed</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">I</span> (<span class="id">D</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) <span class="id">A_</span>, <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">D</span> -&gt; (<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">D</span> <span class="id">i</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> (<span class="id">A_</span> <span class="id">i</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> (\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">D</span>) (<span class="id">A_</span> <span class="id">i</span>)).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="finN0_bigcap_closed">finN0_bigcap_closed</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">I</span> (<span class="id">D</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) <span class="id">A_</span>, <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">D</span> -&gt; <span class="id">D</span> !=<span class="id">set0</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">D</span> <span class="id">i</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> (<span class="id">A_</span> <span class="id">i</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> (\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">D</span>) (<span class="id">A_</span> <span class="id">i</span>)).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="fin_bigcup_closed">fin_bigcup_closed</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">I</span> (<span class="id">D</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) <span class="id">A_</span>, <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">D</span> -&gt; (<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">D</span> <span class="id">i</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> (<span class="id">A_</span> <span class="id">i</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> (\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">D</span>) (<span class="id">A_</span> <span class="id">i</span>)).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="semi_setD_closed">semi_setD_closed</a></span> := <span class="kwd">forall</span> <span class="id">A</span> <span class="id">B</span>, <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> <span class="id">A</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> <span class="id">B</span> -&gt; <span class="kwd">exists</span> <span class="id">D</span>,<br/>
&nbsp;&nbsp;[/\ <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">D</span>, <span class="id">D</span> `&lt;=` <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span>, <span class="id">A</span> `\` <span class="id">B</span> = \<span class="id">bigcup_</span>(<span class="id">X</span> <span class="kwd">in</span> <span class="id">D</span>) <span class="id">X</span> &amp; <span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset">trivIset</a></span> <span class="id">D</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#id">id</a></span>].<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ndseq_closed">ndseq_closed</a></span> :=<br/>
&nbsp;<span class="kwd">forall</span> <span class="id">F</span>, <span class="id">nondecreasing_seq</span> <span class="id">F</span> -&gt; (<span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> (<span class="id">F</span> <span class="id">i</span>)) -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> (\<span class="id">bigcup_i</span> (<span class="id">F</span> <span class="id">i</span>)).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="trivIset_closed">trivIset_closed</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F</span> : (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#classes.T">T</a></span>)^<span class="id">nat</span>, <span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset">trivIset</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id">F</span> -&gt; (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> (<span class="id">F</span> <span class="id">n</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> (\<span class="id">bigcup_k</span> <span class="id">F</span> <span class="id">k</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="fin_trivIset_closed">fin_trivIset_closed</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">I</span> (<span class="id">D</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#classes.T">T</a></span>), <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">D</span> -&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset">trivIset</a></span> <span class="id">D</span> <span class="id">F</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">D</span> <span class="id">i</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> (<span class="id">F</span> <span class="id">i</span>)) -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> (\<span class="id">bigcup_</span>(<span class="id">k</span> <span class="kwd">in</span> <span class="id">D</span>) <span class="id">F</span> <span class="id">k</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="setring">setring</a></span> := [/\ <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#setU_closed">setU_closed</a></span> &amp; <span class="id"><a href="mathcomp.analysis.measure.html#setDI_closed">setDI_closed</a></span>].<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sigma_algebra">sigma_algebra</a></span> :=<br/>
&nbsp;&nbsp;[/\ <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>, (<span class="kwd">forall</span> <span class="id">A</span>, <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> <span class="id">A</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> (<span class="id"><a href="mathcomp.analysis.measure.html#classes.D">D</a></span> `\` <span class="id">A</span>)) &amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">A</span> : (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#classes.T">T</a></span>)^<span class="id">nat</span>, (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> (<span class="id">A</span> <span class="id">n</span>)) -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> (\<span class="id">bigcup_k</span> <span class="id">A</span> <span class="id">k</span>))].<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="dynkin">dynkin</a></span> := [/\ <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#setC_closed">setC_closed</a></span> &amp; <span class="id"><a href="mathcomp.analysis.measure.html#trivIset_closed">trivIset_closed</a></span>].<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="monotone_class">monotone_class</a></span> :=<br/>
&nbsp;&nbsp;[/\ <span class="kwd">forall</span> <span class="id">A</span>, <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> <span class="id">A</span> -&gt; <span class="id">A</span> `&lt;=` <span class="id"><a href="mathcomp.analysis.measure.html#classes.D">D</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#classes.G">G</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#classes.D">D</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#setD_closed">setD_closed</a></span> &amp; <span class="id"><a href="mathcomp.analysis.measure.html#ndseq_closed">ndseq_closed</a></span>].<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.measure.html#classes">classes</a></span>.<br/>
<br/>
<span class="kwd">Notation</span> "'&lt;&lt;<span class="id">m</span>' <span class="id">D</span> , <span class="id">G</span> '&gt;&gt;'" := (<span class="id"><a href="mathcomp.classical.classical_sets.html#smallest">smallest</a></span> (<span class="id"><a href="mathcomp.analysis.measure.html#monotone_class">monotone_class</a></span> <span class="id">D</span>) <span class="id">G</span>) :<br/>
&nbsp;&nbsp;<span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "'&lt;&lt;<span class="id">m</span>' <span class="id">G</span> '&gt;&gt;'" := (&lt;&lt;<span class="id">m</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span>, <span class="id">G</span>&gt;&gt;) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "'&lt;&lt;<span class="id">d</span>' <span class="id">G</span> '&gt;&gt;'" := (<span class="id"><a href="mathcomp.classical.classical_sets.html#smallest">smallest</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#dynkin">dynkin</a></span> <span class="id">G</span>) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "'&lt;&lt;<span class="id">s</span>' <span class="id">D</span> , <span class="id">G</span> '&gt;&gt;'" := (<span class="id"><a href="mathcomp.classical.classical_sets.html#smallest">smallest</a></span> (<span class="id"><a href="mathcomp.analysis.measure.html#sigma_algebra">sigma_algebra</a></span> <span class="id">D</span>) <span class="id">G</span>) :<br/>
&nbsp;&nbsp;<span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "'&lt;&lt;<span class="id">s</span>' <span class="id">G</span> '&gt;&gt;'" := (&lt;&lt;<span class="id">s</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span>, <span class="id">G</span>&gt;&gt;) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "'&lt;&lt;<span class="id">r</span>' <span class="id">G</span> '&gt;&gt;'" := (<span class="id"><a href="mathcomp.classical.classical_sets.html#smallest">smallest</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#setring">setring</a></span> <span class="id">G</span>) : <span class="id">classical_set_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fin_bigcup_closedP">fin_bigcup_closedP</a></span> <span class="id">T</span> (<span class="id">G</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>)) :<br/>
&nbsp;&nbsp;(<span class="id">G</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span> /\ <span class="id"><a href="mathcomp.analysis.measure.html#setU_closed">setU_closed</a></span> <span class="id">G</span>) &lt;-&gt; <span class="id"><a href="mathcomp.analysis.measure.html#fin_bigcup_closed">fin_bigcup_closed</a></span> <span class="id">G</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
<span class="id">split</span>=&gt; [[<span class="id">G0</span> <span class="id">GU</span>] <span class="id">I</span> <span class="id">D</span> <span class="id">A</span> <span class="id">DF</span> <span class="id">GA</span>|<span class="id">GU</span>]; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">G0</span> : <span class="id">G</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span> <span class="kwd">by</span> <span class="id">have</span> := <span class="id">GU</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#void">void</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#point">point</a></span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup0">bigcup0</a></span>//; <span class="id">apply</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">split</span>=&gt; // <span class="id">A</span> <span class="id">B</span> <span class="id">GA</span> <span class="id">GB</span>; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup2inE">bigcup2inE</a></span>; <span class="id">apply</span>: <span class="id">GU</span> =&gt; // -[|[|[]]].<br/>
<span class="id">elim</span>/<span class="id"><a href="mathcomp.classical.boolp.html#Pchoice">Pchoice</a></span>: <span class="id">I</span> =&gt; <span class="id">I</span> <span class="kwd">in</span> <span class="id">D</span> <span class="id">DF</span> <span class="id">A</span> <span class="id">GA</span> *; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.cardinality.html#bigsetU_fset_set">bigsetU_fset_set</a></span>// <span class="id">big_seq</span>.<br/>
<span class="kwd">by</span> <span class="id">elim</span>/<span class="id">big_ind</span>: <span class="id">_</span> =&gt; // <span class="id">i</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.cardinality.html#in_fset_set">in_fset_set</a></span>// <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> =&gt; /<span class="id">GA</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="finN0_bigcap_closedP">finN0_bigcap_closedP</a></span> <span class="id">T</span> (<span class="id">G</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>)) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#setI_closed">setI_closed</a></span> <span class="id">G</span> &lt;-&gt; <span class="id"><a href="mathcomp.analysis.measure.html#finN0_bigcap_closed">finN0_bigcap_closed</a></span> <span class="id">G</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
<span class="id">split</span>=&gt; [<span class="id">GI</span> <span class="id">I</span> <span class="id">D</span> <span class="id">A</span> <span class="id">DF</span> [<span class="id">i</span> <span class="id">Di</span>] <span class="id">GA</span>|<span class="id">GI</span> <span class="id">A</span> <span class="id">B</span> <span class="id">GA</span> <span class="id">GB</span>]; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcap2inE">bigcap2inE</a></span>; <span class="id">apply</span>: <span class="id">GI</span> =&gt; // [|[|[|[]]]]; <span class="id">first</span> <span class="kwd">by</span> <span class="kwd">exists</span> 0%<span class="id">N</span>.<br/>
<span class="id">elim</span>/<span class="id"><a href="mathcomp.classical.boolp.html#Pchoice">Pchoice</a></span>: <span class="id">I</span> =&gt; <span class="id">I</span> <span class="kwd">in</span> <span class="id">D</span> <span class="id">DF</span> <span class="id">i</span> <span class="id">Di</span> <span class="id">A</span> <span class="id">GA</span> *.<br/>
<span class="id">have</span> <span class="id">finDDi</span> : <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> (<span class="id">D</span> `\ <span class="id">i</span>) <span class="kwd">by</span> <span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.cardinality.html#finite_setD">finite_setD</a></span>.<br/>
<span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcap_setD1">bigcap_setD1</a></span> <span class="id">i</span>)// -<span class="id"><a href="mathcomp.classical.cardinality.html#bigsetI_fset_set">bigsetI_fset_set</a></span>// <span class="id">big_seq</span>.<br/>
<span class="id">elim</span>/<span class="id">big_rec</span>: <span class="id">_</span> =&gt; // [|<span class="id">j</span> <span class="id">B</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIT">setIT</a></span>; <span class="id">apply</span>: <span class="id">GA</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.cardinality.html#in_fset_set">in_fset_set</a></span>// <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> =&gt; -[<span class="id">Dj</span> /<span class="id">eqP</span> <span class="id">nij</span>] <span class="id">GAB</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setICA">setICA</a></span>; <span class="id">apply</span>: <span class="id">GI</span> =&gt; //; <span class="id">apply</span>: <span class="id">GA</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sedDI_closedP">sedDI_closedP</a></span> <span class="id">T</span> (<span class="id">G</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>)) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#setDI_closed">setDI_closed</a></span> <span class="id">G</span> &lt;-&gt; (<span class="id"><a href="mathcomp.analysis.measure.html#setI_closed">setI_closed</a></span> <span class="id">G</span> /\ <span class="id"><a href="mathcomp.analysis.measure.html#setD_closed">setD_closed</a></span> <span class="id">G</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
<span class="id">split</span>=&gt; [<span class="id">GDI</span>|[<span class="id">GI</span> <span class="id">GD</span>]].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">split</span>=&gt; <span class="id">A</span> <span class="id">B</span> =&gt; [|<span class="id">AB</span>] =&gt; <span class="id">GA</span> <span class="id">GB</span>; <span class="id">rewrite</span> -?<span class="id"><a href="mathcomp.classical.classical_sets.html#setDD">setDD</a></span>//; <span class="id">do</span> ?<span class="id">apply</span>: (<span class="id">GDI</span>).<br/>
<span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">GA</span> <span class="id">GB</span>; <span class="id">suff</span> &lt;- : <span class="id">A</span> `\` (<span class="id">A</span> `&amp;` <span class="id">B</span>) = <span class="id">A</span> `\` <span class="id">B</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">GD</span> =&gt; //; <span class="id">apply</span>: <span class="id">GI</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDE">setDE</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setCI">setCI</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIUr">setIUr</a></span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setDE">setDE</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDv">setDv</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0U">set0U</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sigma_algebra_bigcap">sigma_algebra_bigcap</a></span> <span class="id">T</span> (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">D</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>)) (<span class="id">J</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">J</span> <span class="id">n</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#sigma_algebra">sigma_algebra</a></span> <span class="id">D</span> (<span class="id">F</span> <span class="id">n</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#sigma_algebra">sigma_algebra</a></span> <span class="id">D</span> (\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">J</span>) <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
<span class="id">move</span>=&gt; <span class="id">mG</span>; <span class="id">split</span>=&gt; [<span class="id">i</span> <span class="id">Ji</span>|<span class="id">A</span> <span class="id">AJ</span> <span class="id">i</span> <span class="id">Ji</span>|<span class="id">H</span> <span class="id">GH</span> <span class="id">i</span> <span class="id">Ji</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">have</span> [] := <span class="id">mG</span> <span class="id">i</span>.<br/>
- <span class="kwd">by</span> <span class="id">have</span> [<span class="id">_</span> <span class="id">mGiC</span> <span class="id">_</span>] := <span class="id">mG</span> <span class="id">i</span> <span class="id">Ji</span>; <span class="id">exact</span>/<span class="id">mGiC</span>/<span class="id">AJ</span>.<br/>
- <span class="kwd">by</span> <span class="id">have</span> [<span class="id">_</span> <span class="id">_</span> <span class="id">mGiU</span>] := <span class="id">mG</span> <span class="id">i</span> <span class="id">Ji</span>; <span class="id">apply</span>: <span class="id">mGiU</span> =&gt; <span class="id">j</span>; <span class="id">exact</span>: <span class="id">GH</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sigma_algebraP">sigma_algebraP</a></span> <span class="id">T</span> <span class="id">U</span> (<span class="id">C</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>)) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">X</span>, <span class="id">C</span> <span class="id">X</span> -&gt; <span class="id">X</span> `&lt;=` <span class="id">U</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#sigma_algebra">sigma_algebra</a></span> <span class="id">U</span> <span class="id">C</span> &lt;-&gt;<br/>
&nbsp;&nbsp;[/\ <span class="id">C</span> <span class="id">U</span>, <span class="id"><a href="mathcomp.analysis.measure.html#setD_closed">setD_closed</a></span> <span class="id">C</span>, <span class="id"><a href="mathcomp.analysis.measure.html#ndseq_closed">ndseq_closed</a></span> <span class="id">C</span> &amp; <span class="id"><a href="mathcomp.analysis.measure.html#setI_closed">setI_closed</a></span> <span class="id">C</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
<span class="id">move</span>=&gt; <span class="id">C_subU</span>; <span class="id">split</span> =&gt; [[<span class="id">C0</span> <span class="id">CD</span> <span class="id">CU</span>]|[<span class="id">DT</span> <span class="id">DC</span> <span class="id">DU</span> <span class="id">DI</span>]]; <span class="id">split</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> -(<span class="id"><a href="mathcomp.classical.classical_sets.html#setD0">setD0</a></span> <span class="id">U</span>); <span class="id">apply</span>: <span class="id">CD</span>.<br/>
- <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">BA</span> <span class="id">CA</span> <span class="id">CB</span>; <span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">A</span> `\` <span class="id">B</span> = <span class="id">U</span> `\` ((<span class="id">U</span> `\` <span class="id">A</span>) `|` <span class="id">B</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span> <span class="id">CD</span>; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup2E">bigcup2E</a></span>; <span class="id">apply</span>: <span class="id">CU</span> =&gt; -[|[|[|]]] //=; <span class="id">exact</span>: <span class="id">CD</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDUr">setDUr</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDD">setDD</a></span> [<span class="kwd">in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS</a></span>]<span class="id"><a href="mathcomp.classical.classical_sets.html#setDE">setDE</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIACA">setIACA</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIid">setIid</a></span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setDE">setDE</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIidr">setIidr</a></span>//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDE">setDE</a></span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#subIset">subIset</a></span>; <span class="id">left</span>; <span class="id">apply</span>: <span class="id">C_subU</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">F</span> <span class="id">ndF</span> <span class="id">DF</span>; <span class="id">exact</span>: <span class="id">CU</span>.<br/>
- <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">DA</span> <span class="id">DB</span>; <span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">A</span> `&amp;` <span class="id">B</span> = <span class="id">U</span> `\` ((<span class="id">U</span> `\` <span class="id">A</span>) `|` (<span class="id">U</span> `\` <span class="id">B</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span> <span class="id">CD</span>; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup2E">bigcup2E</a></span>; <span class="id">apply</span>: <span class="id">CU</span> =&gt; -[|[|[|]]] //; <span class="id">exact</span>: <span class="id">CD</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDUr">setDUr</a></span> !<span class="id"><a href="mathcomp.classical.classical_sets.html#setDD">setDD</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIACA">setIACA</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIid">setIid</a></span> (@<span class="id"><a href="mathcomp.classical.classical_sets.html#setIidr">setIidr</a></span> <span class="id">_</span> <span class="id">U</span>)//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#subIset">subIset</a></span>; <span class="id">left</span>; <span class="id">exact</span>: <span class="id">C_subU</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> -(<span class="id"><a href="mathcomp.classical.classical_sets.html#setDv">setDv</a></span> <span class="id">U</span>); <span class="id">exact</span>: <span class="id">DC</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">CA</span>; <span class="id">apply</span>: <span class="id">DC</span> =&gt; //; <span class="id">exact</span>: <span class="id">C_subU</span>.<br/>
- <span class="id">move</span>=&gt; <span class="id">F</span> <span class="id">DF</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">C</span> <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> = \<span class="id">bigcup_i</span> \<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.classical_sets.html#setU">setU</a></span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>]<span class="id">_</span>(<span class="id">j</span> &lt; <span class="id">i</span>.+1) <span class="id">F</span> <span class="id">j</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">DU</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; *; <span class="id">exact</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#SetOrder.Exports.subsetPset">subsetPset</a></span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#subset_bigsetU">subset_bigsetU</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">elim</span>=&gt; [|<span class="id">n</span> <span class="id">ih</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big_ord_recr</span> /= <span class="id">big_ord0</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0U">set0U</a></span>; <span class="id">exact</span>: <span class="id">DF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> <span class="id">CU</span> : <span class="id"><a href="mathcomp.analysis.measure.html#setU_closed">setU_closed</a></span> <span class="id">C</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">DA</span> <span class="id">DB</span>; <span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">A</span> `|` <span class="id">B</span> = <span class="id">U</span> `\` ((<span class="id">U</span> `\` <span class="id">A</span>) `&amp;` (<span class="id">U</span> `\` <span class="id">B</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">DC</span> =&gt; //; <span class="id">last</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">DI</span>; <span class="id">apply</span>: <span class="id">DC</span> =&gt; //; <span class="id">exact</span>: <span class="id">C_subU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#subIset">subIset</a></span>; <span class="id">left</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#subIset">subIset</a></span>; <span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDIr">setDIr</a></span>// !<span class="id"><a href="mathcomp.classical.classical_sets.html#setDD">setDD</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#setIidr">setIidr</a></span> (<span class="id">C_subU</span> <span class="id">_</span> <span class="id">DA</span>)) (<span class="id"><a href="mathcomp.classical.classical_sets.html#setIidr">setIidr</a></span> (<span class="id">C_subU</span> <span class="id">_</span> <span class="id">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big_ord_recr</span>; <span class="id">exact</span>: <span class="id">CU</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; <span class="id">x</span>; <span class="id">split</span> =&gt; [[<span class="id">n</span> <span class="id">_</span> <span class="id">Fnx</span>]|[<span class="id">n</span> <span class="id">_</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">n</span> =&gt; //; <span class="id">rewrite</span> <span class="id">big_ord_recr</span> /=; <span class="id">right</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_mkord">bigcup_mkord</a></span> =&gt; -[<span class="id">m</span> /=]; <span class="id">rewrite</span> <span class="id">ltnS</span> =&gt; <span class="id">_</span> <span class="id">Fmx</span>; <span class="kwd">exists</span> <span class="id">m</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="generated_sigma_algebra">generated_sigma_algebra</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">T</span> : <span class="kwd">Type</span>} (<span class="id">D</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) (<span class="id">G</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>)).<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">M</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.T">T</a></span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="smallest_sigma_algebra">smallest_sigma_algebra</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#sigma_algebra">sigma_algebra</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.D">D</a></span> &lt;&lt;<span class="id">s</span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.D">D</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.G">G</a></span> &gt;&gt;.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
<span class="id">split</span>=&gt; [|<span class="id">A</span> <span class="id">GA</span>|<span class="id">A</span> <span class="id">GA</span>] <span class="id">P</span> [[<span class="id">P0</span> <span class="id">PD</span> <span class="id">PU</span>]] <span class="id">GP</span> //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: (<span class="id">PD</span>); <span class="id">apply</span>: <span class="id">GA</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: (<span class="id">PU</span>) =&gt; <span class="id">n</span>; <span class="id">apply</span>: <span class="id">GA</span>.<br/>
Qed.</div>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">smallest_sigma_algebra</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sub_sigma_algebra2">sub_sigma_algebra2</a></span> <span class="id">M</span> : <span class="id">M</span> `&lt;=` <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.G">G</a></span> -&gt; &lt;&lt;<span class="id">s</span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.D">D</a></span>, <span class="id">M</span> &gt;&gt; `&lt;=` &lt;&lt;<span class="id">s</span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.D">D</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.G">G</a></span> &gt;&gt;.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
 <span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#sub_smallest2r">sub_smallest2r</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sigma_algebra_id">sigma_algebra_id</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#sigma_algebra">sigma_algebra</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.D">D</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.G">G</a></span> -&gt; &lt;&lt;<span class="id">s</span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.D">D</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.G">G</a></span> &gt;&gt; = <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.G">G</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id"><a href="mathcomp.classical.classical_sets.html#smallest_id">smallest_id</a></span>-&gt;. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sub_sigma_algebra">sub_sigma_algebra</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.G">G</a></span> `&lt;=` &lt;&lt;<span class="id">s</span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.D">D</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.G">G</a></span> &gt;&gt;<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
 <span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#sub_smallest">sub_smallest</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sigma_algebra0">sigma_algebra0</a></span> : &lt;&lt;<span class="id">s</span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.D">D</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.G">G</a></span> &gt;&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
 <span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="mathcomp.analysis.measure.html#smallest_sigma_algebra">smallest_sigma_algebra</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sigma_algebraCD">sigma_algebraCD</a></span> : <span class="kwd">forall</span> <span class="id">A</span>, &lt;&lt;<span class="id">s</span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.D">D</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.G">G</a></span> &gt;&gt; <span class="id">A</span> -&gt; &lt;&lt;<span class="id">s</span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.D">D</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.G">G</a></span> &gt;&gt; (<span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.D">D</a></span> `\` <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
 <span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="mathcomp.analysis.measure.html#smallest_sigma_algebra">smallest_sigma_algebra</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sigma_algebra_bigcup">sigma_algebra_bigcup</a></span> (<span class="id">A</span> : (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.T">T</a></span>)^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, &lt;&lt;<span class="id">s</span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.D">D</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.G">G</a></span> &gt;&gt; (<span class="id">A</span> <span class="id">i</span>)) -&gt;  &lt;&lt;<span class="id">s</span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.D">D</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra.G">G</a></span> &gt;&gt; (\<span class="id">bigcup_i</span> (<span class="id">A</span> <span class="id">i</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
 <span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="mathcomp.analysis.measure.html#smallest_sigma_algebra">smallest_sigma_algebra</a></span> <span class="id">A</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_sigma_algebra">generated_sigma_algebra</a></span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">smallest_sigma_algebra</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="generated_setring">generated_setring</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">T</span> : <span class="kwd">Type</span>} (<span class="id">G</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>)).<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">M</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_setring.T">T</a></span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="smallest_setring">smallest_setring</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#setring">setring</a></span> &lt;&lt;<span class="id">r</span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_setring.G">G</a></span> &gt;&gt;.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
<span class="id">split</span>=&gt; [|<span class="id">A</span> <span class="id">B</span> <span class="id">GA</span> <span class="id">GB</span>|<span class="id">A</span> <span class="id">B</span> <span class="id">GA</span> <span class="id">GB</span>] <span class="id">P</span> [[<span class="id">P0</span> <span class="id">PU</span> <span class="id">PDI</span>]] <span class="id">GP</span> //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: (<span class="id">PU</span>); [<span class="id">apply</span>: <span class="id">GA</span>|<span class="id">apply</span>: <span class="id">GB</span>].<br/>
<span class="kwd">by</span> <span class="id">apply</span>: (<span class="id">PDI</span>); [<span class="id">apply</span>: <span class="id">GA</span>|<span class="id">apply</span>: <span class="id">GB</span>].<br/>
Qed.</div>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">smallest_setring</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sub_setring2">sub_setring2</a></span> <span class="id">M</span> : <span class="id">M</span> `&lt;=` <span class="id"><a href="mathcomp.analysis.measure.html#generated_setring.G">G</a></span> -&gt; &lt;&lt;<span class="id">r</span> <span class="id">M</span> &gt;&gt; `&lt;=` &lt;&lt;<span class="id">r</span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_setring.G">G</a></span> &gt;&gt;.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
 <span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#sub_smallest2r">sub_smallest2r</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="setring_id">setring_id</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#setring">setring</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_setring.G">G</a></span> -&gt; &lt;&lt;<span class="id">r</span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_setring.G">G</a></span> &gt;&gt; = <span class="id"><a href="mathcomp.analysis.measure.html#generated_setring.G">G</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id"><a href="mathcomp.classical.classical_sets.html#smallest_id">smallest_id</a></span>-&gt;. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sub_setring">sub_setring</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#generated_setring.G">G</a></span> `&lt;=` &lt;&lt;<span class="id">r</span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_setring.G">G</a></span> &gt;&gt;<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
 <span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#sub_smallest">sub_smallest</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="setring0">setring0</a></span> : &lt;&lt;<span class="id">r</span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_setring.G">G</a></span> &gt;&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
 <span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="mathcomp.analysis.measure.html#smallest_setring">smallest_setring</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="setringDI">setringDI</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#setDI_closed">setDI_closed</a></span> &lt;&lt;<span class="id">r</span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_setring.G">G</a></span>&gt;&gt;.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
 <span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="mathcomp.analysis.measure.html#smallest_setring">smallest_setring</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="setringU">setringU</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#setU_closed">setU_closed</a></span> &lt;&lt;<span class="id">r</span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_setring.G">G</a></span>&gt;&gt;.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
 <span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="mathcomp.analysis.measure.html#smallest_setring">smallest_setring</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="setring_fin_bigcup">setring_fin_bigcup</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#fin_bigcup_closed">fin_bigcup_closed</a></span> &lt;&lt;<span class="id">r</span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_setring.G">G</a></span>&gt;&gt;.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.measure.html#fin_bigcup_closedP">fin_bigcup_closedP</a></span>; <span class="id">split</span>; [<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#setring0">setring0</a></span>|<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#setringU">setringU</a></span>].<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.measure.html#generated_setring">generated_setring</a></span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">smallest_setring</span> <span class="id">setring0</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="monotone_class_g_salgebra">monotone_class_g_salgebra</a></span> <span class="id">T</span> (<span class="id">G</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>)) (<span class="id">D</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">X</span>, &lt;&lt;<span class="id">s</span> <span class="id">D</span>, <span class="id">G</span> &gt;&gt; <span class="id">X</span> -&gt; <span class="id">X</span> `&lt;=` <span class="id">D</span>) -&gt; <span class="id">G</span> <span class="id">D</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#monotone_class">monotone_class</a></span> <span class="id">D</span> (&lt;&lt;<span class="id">s</span> <span class="id">D</span>, <span class="id">G</span> &gt;&gt;).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
<span class="id">move</span>=&gt; <span class="id">sDGD</span> <span class="id">GD</span>; <span class="id">have</span> := <span class="id"><a href="mathcomp.analysis.measure.html#smallest_sigma_algebra">smallest_sigma_algebra</a></span> <span class="id">D</span> <span class="id">G</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; /(<span class="id"><a href="mathcomp.analysis.measure.html#sigma_algebraP">sigma_algebraP</a></span> <span class="id">sDGD</span>) [<span class="id">sT</span> <span class="id">sD</span> <span class="id">snd</span> <span class="id">sI</span>]; <span class="id">split</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="smallest_monotone_classE">smallest_monotone_classE</a></span>.<br/>
<span class="kwd">Variables</span> (<span class="id"><a name="smallest_monotone_classE.T">T</a></span> : <span class="kwd">Type</span>) (<span class="id"><a name="smallest_monotone_classE.G">G</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>)) (<span class="id"><a name="smallest_monotone_classE.setIG">setIG</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#setI_closed">setI_closed</a></span> <span class="id">G</span>).<br/>
<span class="kwd">Variables</span> (<span class="id"><a name="smallest_monotone_classE.D">D</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.T">T</a></span>) (<span class="id"><a name="smallest_monotone_classE.GD">GD</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.G">G</a></span> <span class="id">D</span>).<br/>
<span class="kwd">Variables</span> (<span class="id"><a name="smallest_monotone_classE.H">H</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.T">T</a></span>)) (<span class="id"><a name="smallest_monotone_classE.monoH">monoH</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#monotone_class">monotone_class</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.D">D</a></span> <span class="id">H</span>) (<span class="id"><a name="smallest_monotone_classE.GH">GH</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.G">G</a></span> `&lt;=` <span class="id">H</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="smallest_monotone_classE">smallest_monotone_classE</a></span> : (<span class="kwd">forall</span> <span class="id">X</span>, &lt;&lt;<span class="id">s</span> <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.D">D</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.G">G</a></span> &gt;&gt; <span class="id">X</span> -&gt; <span class="id">X</span> `&lt;=` <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.D">D</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">E</span>, <span class="id"><a href="mathcomp.analysis.measure.html#monotone_class">monotone_class</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.D">D</a></span> <span class="id">E</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.G">G</a></span> `&lt;=` <span class="id">E</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.H">H</a></span> `&lt;=` <span class="id">E</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.H">H</a></span> = &lt;&lt;<span class="id">s</span> <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.D">D</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.G">G</a></span> &gt;&gt;.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
<span class="id">move</span>=&gt; <span class="id">sDGD</span> <span class="id">smallestH</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#eqEsubset">eqEsubset</a></span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: (<span class="id">smallestH</span> <span class="id">_</span> <span class="id">_</span> (@<span class="id"><a href="mathcomp.analysis.measure.html#sub_sigma_algebra">sub_sigma_algebra</a></span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.D">D</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.G">G</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#monotone_class_g_salgebra">monotone_class_g_salgebra</a></span>.<br/>
<span class="id">suff</span>: <span class="id"><a href="mathcomp.analysis.measure.html#setI_closed">setI_closed</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.H">H</a></span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">IH</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#smallest_sub">smallest_sub</a></span> =&gt; //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.measure.html#sigma_algebraP">sigma_algebraP</a></span>; <span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.monoH">monoH</a></span>.<br/>
<span class="id">pose</span> <span class="id">H_</span> <span class="id">A</span> := [<span class="id">set</span> <span class="id">X</span> | <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.H">H</a></span> <span class="id">X</span> /\ <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.H">H</a></span> (<span class="id">X</span> `&amp;` <span class="id">A</span>)].<br/>
<span class="id">have</span> <span class="id">setDH_</span> <span class="id">A</span> : <span class="id"><a href="mathcomp.analysis.measure.html#setD_closed">setD_closed</a></span> (<span class="id">H_</span> <span class="id">A</span>).<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">X</span> <span class="id">Y</span> <span class="id">XY</span> [<span class="id">HX</span> <span class="id">HXA</span>] [<span class="id">HY</span> <span class="id">HYA</span>]; <span class="id">case</span>: <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.monoH">monoH</a></span> =&gt; <span class="id">h</span> <span class="id">_</span> <span class="id">setDH</span> <span class="id">_</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">setDH</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">_</span> `&amp;` <span class="id">_</span> = (<span class="id">X</span> `&amp;` <span class="id">A</span>) `\` (<span class="id">Y</span> `&amp;` <span class="id">A</span>)); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; <span class="id">x</span>; <span class="id">split</span>=&gt; [[[? ?] ?]|]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">split</span> =&gt; // -[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; [[? ?] <span class="id">YAx</span>]; <span class="id">split</span> =&gt; //; <span class="id">split</span> =&gt; //; <span class="id">apply</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#contra_not">contra_not</a></span> <span class="id">YAx</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">setDH</span> =&gt; //; <span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#setSI">setSI</a></span>.<br/>
<span class="id">have</span> <span class="id">ndH_</span> <span class="id">A</span> : <span class="id"><a href="mathcomp.analysis.measure.html#ndseq_closed">ndseq_closed</a></span> (<span class="id">H_</span> <span class="id">A</span>).<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">F</span> <span class="id">ndF</span> <span class="id">H_AF</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.monoH">monoH</a></span> =&gt; <span class="id">h</span> <span class="id">_</span> <span class="id">_</span>; <span class="id">apply</span> =&gt; // =&gt; <span class="id">n</span>; <span class="id">have</span> [] := <span class="id">H_AF</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setI_bigcupl">setI_bigcupl</a></span>; <span class="id">case</span>: <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.monoH">monoH</a></span> =&gt; <span class="id">h</span> <span class="id">_</span> <span class="id">_</span>; <span class="id">apply</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">m</span> <span class="id">n</span> <span class="id">mn</span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#SetOrder.Exports.subsetPset">subsetPset</a></span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#setSI">setSI</a></span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#SetOrder.Exports.subsetPset">subsetPset</a></span>/<span class="id">ndF</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span>; <span class="id">have</span> [] := <span class="id">H_AF</span> <span class="id">n</span>.<br/>
<span class="id">have</span> <span class="id">GGH_</span> <span class="id">X</span> : <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.G">G</a></span> <span class="id">X</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.G">G</a></span> `&lt;=` <span class="id">H_</span> <span class="id">X</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; *; <span class="id">split</span>; [<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.GH">GH</a></span> | <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.GH">GH</a></span>; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.setIG">setIG</a></span>].<br/>
<span class="id">have</span> <span class="id">GHH_</span> <span class="id">X</span> : <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.G">G</a></span> <span class="id">X</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.H">H</a></span> `&lt;=` <span class="id">H_</span> <span class="id">X</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">CX</span>; <span class="id">apply</span>: <span class="id">smallestH</span>; [<span class="id">split</span> =&gt; //; <span class="id">last</span> <span class="id">exact</span>: <span class="id">GGH_</span>|<span class="id">exact</span>: <span class="id">GGH_</span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; ? [? ?]; <span class="id">case</span>: <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.monoH">monoH</a></span> =&gt; + <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>; <span class="id">exact</span>.<br/>
<span class="id">have</span> <span class="id">HGH_</span> <span class="id">X</span> : <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.H">H</a></span> <span class="id">X</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.G">G</a></span> `&lt;=` <span class="id">H_</span> <span class="id">X</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; *; <span class="id">split</span>; [<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.GH">GH</a></span>|<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIC">setIC</a></span>; <span class="id">apply</span> <span class="id">GHH_</span>].<br/>
<span class="id">have</span> <span class="id">HHH_</span> <span class="id">X</span> : <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.H">H</a></span> <span class="id">X</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.H">H</a></span> `&lt;=` <span class="id">H_</span> <span class="id">X</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">HX</span>; <span class="id">apply</span>: (<span class="id">smallestH</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">HGH_</span> <span class="id">_</span> <span class="id">HX</span>)); <span class="id">split</span>=&gt; //.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; ? [? ?]; <span class="id">case</span>: <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE.monoH">monoH</a></span> =&gt; + <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>; <span class="id">exact</span>.<br/>
&nbsp;&nbsp;- <span class="id">exact</span>: <span class="id">HGH_</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; *; <span class="id">apply</span> <span class="id">HHH_</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE">smallest_monotone_classE</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="monotone_class_subset">monotone_class_subset</a></span>.<br/>
<span class="kwd">Variables</span> (<span class="id"><a name="monotone_class_subset.T">T</a></span> : <span class="kwd">Type</span>) (<span class="id"><a name="monotone_class_subset.G">G</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>)) (<span class="id"><a name="monotone_class_subset.setIG">setIG</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#setI_closed">setI_closed</a></span> <span class="id">G</span>).<br/>
<span class="kwd">Variables</span> (<span class="id"><a name="monotone_class_subset.D">D</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#monotone_class_subset.T">T</a></span>) (<span class="id"><a name="monotone_class_subset.GD">GD</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#monotone_class_subset.G">G</a></span> <span class="id">D</span>).<br/>
<span class="kwd">Variables</span> (<span class="id"><a name="monotone_class_subset.H">H</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#monotone_class_subset.T">T</a></span>)) (<span class="id"><a name="monotone_class_subset.monoH">monoH</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#monotone_class">monotone_class</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#monotone_class_subset.D">D</a></span> <span class="id">H</span>) (<span class="id"><a name="monotone_class_subset.GH">GH</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#monotone_class_subset.G">G</a></span> `&lt;=` <span class="id">H</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="monotone_class_subset">monotone_class_subset</a></span> : (<span class="kwd">forall</span> <span class="id">X</span>, (&lt;&lt;<span class="id">s</span> <span class="id"><a href="mathcomp.analysis.measure.html#monotone_class_subset.D">D</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#monotone_class_subset.G">G</a></span> &gt;&gt;) <span class="id">X</span> -&gt; <span class="id">X</span> `&lt;=` <span class="id"><a href="mathcomp.analysis.measure.html#monotone_class_subset.D">D</a></span>) -&gt;<br/>
&nbsp;&nbsp;&lt;&lt;<span class="id">s</span> <span class="id"><a href="mathcomp.analysis.measure.html#monotone_class_subset.D">D</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#monotone_class_subset.G">G</a></span> &gt;&gt; `&lt;=` <span class="id"><a href="mathcomp.analysis.measure.html#monotone_class_subset.H">H</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
<span class="id">move</span>=&gt; <span class="id">sDGD</span>; <span class="id">set</span> <span class="id">M</span> := &lt;&lt;<span class="id">m</span> <span class="id"><a href="mathcomp.analysis.measure.html#monotone_class_subset.D">D</a></span>, <span class="id"><a href="mathcomp.analysis.measure.html#monotone_class_subset.G">G</a></span> &gt;&gt;.<br/>
<span class="id">rewrite</span> -(@<span class="id"><a href="mathcomp.analysis.measure.html#smallest_monotone_classE">smallest_monotone_classE</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.measure.html#monotone_class_subset.setIG">setIG</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">M</span>) //.<br/>
- <span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#smallest_sub">smallest_sub</a></span>.<br/>
- <span class="id">split</span> =&gt; [<span class="id">A</span> <span class="id">MA</span> | <span class="id">E</span> [<span class="id">monoE</span>] | <span class="id">A</span> <span class="id">B</span> <span class="id">BA</span> <span class="id">MA</span> <span class="id">MB</span> <span class="id">E</span> [[<span class="id">EsubD</span> <span class="id">ED</span> <span class="id">setDE</span> <span class="id">ndE</span>] <span class="id">GE</span>] |].<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="mathcomp.analysis.measure.html#monotone_class_subset.monoH">monoH</a></span> =&gt; + <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>; <span class="id">apply</span>; <span class="id">exact</span>: <span class="id">MA</span>.<br/>
&nbsp;&nbsp;+ <span class="id">exact</span>.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">apply</span> <span class="id">setDE</span> =&gt; //; [<span class="id">exact</span>: <span class="id">MA</span>|<span class="id">exact</span>: <span class="id">MB</span>].<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">F</span> <span class="id">ndF</span> <span class="id">MF</span> <span class="id">E</span> [[<span class="id">EsubD</span> <span class="id">ED</span> <span class="id">setDE</span> <span class="id">ndE</span>] <span class="id">CE</span>]; <span class="id">apply</span> <span class="id">ndE</span>=&gt; // <span class="id">n</span>; <span class="id">exact</span>: <span class="id">MF</span>.<br/>
- <span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#sub_smallest">sub_smallest</a></span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; ? ? ?; <span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#smallest_sub">smallest_sub</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.measure.html#monotone_class_subset">monotone_class_subset</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="dynkin">dynkin</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="dynkin.T">T</a></span> : <span class="kwd">Type</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">G</span> <span class="id">D</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#dynkin.T">T</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="dynkinT">dynkinT</a></span> <span class="id">G</span> : <span class="id"><a href="mathcomp.analysis.measure.html#dynkin">dynkin</a></span> <span class="id">G</span> -&gt; <span class="id">G</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
 <span class="kwd">by</span> <span class="id">case</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="dynkinC">dynkinC</a></span> <span class="id">G</span> : <span class="id"><a href="mathcomp.analysis.measure.html#dynkin">dynkin</a></span> <span class="id">G</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#setC_closed">setC_closed</a></span> <span class="id">G</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
 <span class="kwd">by</span> <span class="id">case</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="dynkinU">dynkinU</a></span> <span class="id">G</span> : <span class="id"><a href="mathcomp.analysis.measure.html#dynkin">dynkin</a></span> <span class="id">G</span> -&gt; (<span class="kwd">forall</span> <span class="id">F</span> : (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#dynkin.T">T</a></span>)^<span class="id">nat</span>, <span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset">trivIset</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id">F</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">G</span> (<span class="id">F</span> <span class="id">n</span>)) -&gt; <span class="id">G</span> (\<span class="id">bigcup_k</span> <span class="id">F</span> <span class="id">k</span>))<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
 <span class="kwd">by</span> <span class="id">case</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.measure.html#dynkin">dynkin</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="dynkin_lemmas">dynkin_lemmas</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="dynkin_lemmas.T">T</a></span> : <span class="kwd">Type</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">D</span> <span class="id">G</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#dynkin_lemmas.T">T</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="dynkin_monotone">dynkin_monotone</a></span> <span class="id">G</span> : <span class="id"><a href="mathcomp.analysis.measure.html#dynkin">dynkin</a></span> <span class="id">G</span> &lt;-&gt; <span class="id"><a href="mathcomp.analysis.measure.html#monotone_class">monotone_class</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id">G</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
<span class="id">split</span> =&gt; [[<span class="id">GT</span> <span class="id">setCG</span> <span class="id">trG</span>]|[<span class="id">_</span> <span class="id">GT</span> <span class="id">setDG</span> <span class="id">ndG</span>]]; <span class="id">split</span> =&gt; //.<br/>
- <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">BA</span> <span class="id">GA</span> <span class="id">GB</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDE">setDE</a></span> -(<span class="id"><a href="mathcomp.classical.classical_sets.html#setCK">setCK</a></span> (<span class="id">_</span> `&amp;` <span class="id">_</span>)) <span class="id"><a href="mathcomp.classical.classical_sets.html#setCI">setCI</a></span>; <span class="id">apply</span>: (<span class="id">setCG</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setCK">setCK</a></span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup2E">bigcup2E</a></span>; <span class="id">apply</span> <span class="id">trG</span>.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset_bigcup2">trivIset_bigcup2</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIC">setIC</a></span>; <span class="id">apply</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#subsets_disjoint">subsets_disjoint</a></span>.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">move</span>=&gt; [|[//|<span class="id">n</span>]]; [<span class="id">exact</span>: <span class="id">setCG</span>|<span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup2">bigcup2</a></span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setCT">setCT</a></span>; <span class="id">apply</span>: <span class="id">setCG</span>].<br/>
- <span class="id">move</span>=&gt; <span class="id">F</span> <span class="id">ndF</span> <span class="id">GF</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.sequences.html#eq_bigcup_seqD">eq_bigcup_seqD</a></span>; <span class="id">apply</span>: (<span class="id">trG</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.sequences.html#trivIset_seqD">trivIset_seqD</a></span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; [/=|<span class="id">n</span>]; <span class="id">first</span> <span class="id">exact</span>: <span class="id">GF</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.sequences.html#seqD">seqD</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDE">setDE</a></span> -(<span class="id"><a href="mathcomp.classical.classical_sets.html#setCK">setCK</a></span> (<span class="id">_</span> `&amp;` <span class="id">_</span>)) <span class="id"><a href="mathcomp.classical.classical_sets.html#setCI">setCI</a></span>; <span class="id">apply</span>: (<span class="id">setCG</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setCK">setCK</a></span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup2E">bigcup2E</a></span>; <span class="id">apply</span>: <span class="id">trG</span>.<br/>
&nbsp;&nbsp;+ <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset_bigcup2">trivIset_bigcup2</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIC">setIC</a></span>; <span class="id">apply</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#subsets_disjoint">subsets_disjoint</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#SetOrder.Exports.subsetPset">subsetPset</a></span>/<span class="id">ndF</span>/<span class="id">ltnW</span>.<br/>
&nbsp;&nbsp;+ <span class="id">move</span>=&gt; [|[|]]; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup2">bigcup2</a></span> /=; [<span class="id">exact</span>/<span class="id">setCG</span>/<span class="id">GF</span>|<span class="id">exact</span>/<span class="id">GF</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span>; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setCT">setCT</a></span>; <span class="id">apply</span>: <span class="id">setCG</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span>; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setTD">setTD</a></span>; <span class="id">apply</span>: <span class="id">setDG</span>.<br/>
- <span class="id">move</span>=&gt; <span class="id">F</span> <span class="id">tF</span> <span class="id">GF</span>; <span class="id">pose</span> <span class="id">A</span> <span class="id">i</span> := \<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.classical_sets.html#setU">setU</a></span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>]<span class="id">_</span>(<span class="id">k</span> &lt; <span class="id">i</span>.+1) <span class="id">F</span> <span class="id">k</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">_</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup">bigcup</a></span> <span class="id">_</span> <span class="id">_</span> = \<span class="id">bigcup_i</span> <span class="id">A</span> <span class="id">i</span>); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; <span class="id">t</span>; <span class="id">split</span> =&gt; [[<span class="id">n</span> <span class="id">_</span> <span class="id">Fn</span>]|[<span class="id">n</span> <span class="id">_</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">n</span> =&gt; //; <span class="id">rewrite</span> /<span class="id">A</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_mkord">bigcup_mkord</a></span>; <span class="kwd">exists</span> <span class="id">n</span>=&gt; //=; <span class="id">rewrite</span> <span class="id">ltnS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">A</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_mkord">bigcup_mkord</a></span> =&gt; -[<span class="id">m</span> /=]; <span class="id">rewrite</span> <span class="id">ltnS</span> =&gt; <span class="id">mn</span> <span class="id">Fmt</span>; <span class="kwd">exists</span> <span class="id">m</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">ndG</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">a</span> <span class="id">b</span> <span class="id">ab</span>; <span class="id">exact</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#SetOrder.Exports.subsetPset">subsetPset</a></span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#subset_bigsetU">subset_bigsetU</a></span>.<br/>
&nbsp;&nbsp;<span class="id">elim</span>=&gt; /= =&gt; [|<span class="id">n</span> <span class="id">ih</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">A</span> <span class="id">big_ord_recr</span> /= <span class="id">big_ord0</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0U">set0U</a></span>; <span class="id">exact</span>: <span class="id">GF</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id">A</span> /= <span class="id">big_ord_recr</span> /= -/(<span class="id">A</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">_</span> `|` <span class="id">_</span> = ~` (~` <span class="id">A</span> <span class="id">n</span> `\` <span class="id">F</span> <span class="id">n</span>.+1)); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDE">setDE</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setCI">setCI</a></span> !<span class="id"><a href="mathcomp.classical.classical_sets.html#setCK">setCK</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setTD">setTD</a></span>; <span class="id">apply</span>: (<span class="id">setDG</span>) =&gt; //; <span class="id">apply</span>: (<span class="id">setDG</span>) =&gt; //; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setTD">setTD</a></span>; <span class="id">apply</span>: <span class="id">setDG</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#disjoints_subset">disjoints_subset</a></span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIC">setIC</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: (@<span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset_bigsetUI">trivIset_bigsetUI</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#predT">predT</a></span>) =&gt; //; <span class="id">rewrite</span> /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#predT">predT</a></span> /= <span class="id"><a href="mathcomp.classical.boolp.html#trueE">trueE</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="dynkin_g_dynkin">dynkin_g_dynkin</a></span> <span class="id">G</span> : <span class="id"><a href="mathcomp.analysis.measure.html#dynkin">dynkin</a></span> (&lt;&lt;<span class="id">d</span> <span class="id">G</span> &gt;&gt;).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
<span class="id">split</span>=&gt; [<span class="id">D</span> /= [] []//| | ].<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Y</span> <span class="id">sGY</span> <span class="id">D</span> /= [<span class="id">dD</span> <span class="id">GD</span>]; <span class="id">exact</span>/(<span class="id"><a href="mathcomp.analysis.measure.html#dynkinC">dynkinC</a></span> <span class="id">dD</span>)/(<span class="id">sGY</span> <span class="id">D</span>).<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">F</span> <span class="id">tF</span> <span class="id">gGF</span> <span class="id">D</span> /= [<span class="id">dD</span> <span class="id">GD</span>]; <span class="id">apply</span> <span class="id">dD</span> =&gt; // <span class="id">k</span>; <span class="id">exact</span>: <span class="id">gGF</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sigma_algebra_dynkin">sigma_algebra_dynkin</a></span> <span class="id">G</span> : <span class="id"><a href="mathcomp.analysis.measure.html#sigma_algebra">sigma_algebra</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id">G</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#dynkin">dynkin</a></span> <span class="id">G</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
<span class="id">case</span>=&gt; ? <span class="id">DC</span> <span class="id">DU</span>; <span class="id">split</span> =&gt; [| |? ? ?]; <span class="id">last</span> <span class="id">exact</span>: <span class="id">DU</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setC0">setC0</a></span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setTD">setTD</a></span>; <span class="id">exact</span>: <span class="id">DC</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">GA</span>; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setTD">setTD</a></span>; <span class="id">apply</span>: <span class="id">DC</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="dynkin_setI_bigsetI">dynkin_setI_bigsetI</a></span> <span class="id">G</span> (<span class="id">F</span> : (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#dynkin_lemmas.T">T</a></span>)^<span class="id">nat</span>) : <span class="id"><a href="mathcomp.analysis.measure.html#dynkin">dynkin</a></span> <span class="id">G</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#setI_closed">setI_closed</a></span> <span class="id">G</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">G</span> (<span class="id">F</span> <span class="id">n</span>)) -&gt; <span class="kwd">forall</span> <span class="id">n</span>, <span class="id">G</span> (\<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.classical_sets.html#setI">setI</a></span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
<span class="id">move</span>=&gt; <span class="id">dG</span> <span class="id">GI</span> <span class="id">GF</span>; <span class="id">elim</span> =&gt; [|<span class="id">n</span> <span class="id">ih</span>]; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big_ord_recr</span> /=; <span class="id">apply</span>: <span class="id">GI</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big_ord0</span>; <span class="id">exact</span>: (<span class="id"><a href="mathcomp.analysis.measure.html#dynkinT">dynkinT</a></span> <span class="id">dG</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="dynkin_setI_sigma_algebra">dynkin_setI_sigma_algebra</a></span> <span class="id">G</span> : <span class="id"><a href="mathcomp.analysis.measure.html#dynkin">dynkin</a></span> <span class="id">G</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#setI_closed">setI_closed</a></span> <span class="id">G</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#sigma_algebra">sigma_algebra</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id">G</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
<span class="id">move</span>=&gt; <span class="id">dG</span> <span class="id">GI</span>; <span class="id">split</span> =&gt; [|//|<span class="id">F</span> <span class="id">DF</span>].<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setCT">setCT</a></span>; <span class="id">exact</span>/(<span class="id"><a href="mathcomp.analysis.measure.html#dynkinC">dynkinC</a></span> <span class="id">dG</span>)/(<span class="id"><a href="mathcomp.analysis.measure.html#dynkinT">dynkinT</a></span> <span class="id">dG</span>).<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">GA</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setTD">setTD</a></span>; <span class="id">exact</span>: (<span class="id"><a href="mathcomp.analysis.measure.html#dynkinC">dynkinC</a></span> <span class="id">dG</span>).<br/>
- <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.sequences.html#seqDU_bigcup_eq">seqDU_bigcup_eq</a></span>; <span class="id">apply</span>/(<span class="id"><a href="mathcomp.analysis.measure.html#dynkinU">dynkinU</a></span> <span class="id">dG</span>) =&gt; //.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">n</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.sequences.html#seqDU">seqDU</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDE">setDE</a></span>; <span class="id">apply</span> <span class="id">GI</span> =&gt; //.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_mkord">bigcup_mkord</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setC_bigcup">setC_bigcup</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#bigcap_mkord">bigcap_mkord</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: (@<span class="id"><a href="mathcomp.analysis.measure.html#dynkin_setI_bigsetI">dynkin_setI_bigsetI</a></span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; ~` <span class="id">F</span> <span class="id">x</span>)) =&gt; // ?; <span class="id">exact</span>/(<span class="id"><a href="mathcomp.analysis.measure.html#dynkinC">dynkinC</a></span> <span class="id">dG</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="setI_closed_gdynkin_salgebra">setI_closed_gdynkin_salgebra</a></span> <span class="id">G</span> : <span class="id"><a href="mathcomp.analysis.measure.html#setI_closed">setI_closed</a></span> <span class="id">G</span> -&gt; &lt;&lt;<span class="id">d</span> <span class="id">G</span> &gt;&gt; = &lt;&lt;<span class="id">s</span> <span class="id">G</span> &gt;&gt;.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
<span class="id">move</span>=&gt; <span class="id">GI</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#eqEsubset">eqEsubset</a></span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#sub_smallest2l">sub_smallest2l</a></span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#sigma_algebra_dynkin">sigma_algebra_dynkin</a></span>.<br/>
<span class="id">pose</span> <span class="id">delta</span> (<span class="id">D</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#dynkin_lemmas.T">T</a></span>) := [<span class="id">set</span> <span class="id">E</span> | &lt;&lt;<span class="id">d</span> <span class="id">G</span> &gt;&gt; (<span class="id">E</span> `&amp;` <span class="id">D</span>)].<br/>
<span class="id">have</span> <span class="id">ddelta</span> (<span class="id">D</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#dynkin_lemmas.T">T</a></span>) : &lt;&lt;<span class="id">d</span> <span class="id">G</span> &gt;&gt; <span class="id">D</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#dynkin">dynkin</a></span> (<span class="id">delta</span> <span class="id">D</span>).<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">dGD</span>; <span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">delta</span> /= <span class="id"><a href="mathcomp.classical.classical_sets.html#setTI">setTI</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">move</span>=&gt; <span class="id">E</span> <span class="id">DE</span>; <span class="id">rewrite</span> /<span class="id">delta</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> -&gt; : (~` <span class="id">E</span>) `&amp;` <span class="id">D</span> = ~` ((<span class="id">E</span> `&amp;` <span class="id">D</span>) `|` (~` <span class="id">D</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -[<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS</a></span>]<span class="id"><a href="mathcomp.classical.classical_sets.html#setU0">setU0</a></span> -(<span class="id"><a href="mathcomp.classical.classical_sets.html#setICl">setICl</a></span> <span class="id">D</span>) -<span class="id"><a href="mathcomp.classical.classical_sets.html#setIUl">setIUl</a></span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setCI">setCI</a></span> -{2}(<span class="id"><a href="mathcomp.classical.classical_sets.html#setCK">setCK</a></span> <span class="id">D</span>) -<span class="id"><a href="mathcomp.classical.classical_sets.html#setCU">setCU</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> : &lt;&lt;<span class="id">d</span> <span class="id">G</span> &gt;&gt; ((<span class="id">E</span> `&amp;` <span class="id">D</span>) `|` ~` <span class="id">D</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup2E">bigcup2E</a></span> =&gt; <span class="id">S</span> [<span class="id">dS</span> <span class="id">GS</span>]; <span class="id">apply</span>: (<span class="id"><a href="mathcomp.analysis.measure.html#dynkinU">dynkinU</a></span> <span class="id">dS</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; [|[|<span class="id">i</span>]] [|[|<span class="id">j</span>]] =&gt; // <span class="id">_</span> <span class="id">_</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup2">bigcup2</a></span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setIA">setIA</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setICr">setICr</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setI0">setI0</a></span> =&gt; /<span class="id"><a href="mathcomp.classical.classical_sets.html#set0P">set0P</a></span>; <span class="id">rewrite</span> <span class="id">eqxx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setI0">setI0</a></span> =&gt; /<span class="id"><a href="mathcomp.classical.classical_sets.html#set0P">set0P</a></span>; <span class="id">rewrite</span> <span class="id">eqxx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setICA">setICA</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setICl">setICl</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setI0">setI0</a></span> =&gt; /<span class="id"><a href="mathcomp.classical.classical_sets.html#set0P">set0P</a></span>; <span class="id">rewrite</span> <span class="id">eqxx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setI0">setI0</a></span> =&gt; /<span class="id"><a href="mathcomp.classical.classical_sets.html#set0P">set0P</a></span>; <span class="id">rewrite</span> <span class="id">eqxx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0I">set0I</a></span> =&gt; /<span class="id"><a href="mathcomp.classical.classical_sets.html#set0P">set0P</a></span>; <span class="id">rewrite</span> <span class="id">eqxx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0I">set0I</a></span> =&gt; /<span class="id"><a href="mathcomp.classical.classical_sets.html#set0P">set0P</a></span>; <span class="id">rewrite</span> <span class="id">eqxx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0I">set0I</a></span> =&gt; /<span class="id"><a href="mathcomp.classical.classical_sets.html#set0P">set0P</a></span>; <span class="id">rewrite</span> <span class="id">eqxx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; [|[|<span class="id">n</span>]] //; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup2">bigcup2</a></span> /=; [<span class="id">exact</span>: <span class="id">DE</span>| |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">suff</span>: &lt;&lt;<span class="id">d</span> <span class="id">G</span> &gt;&gt; (~` <span class="id">D</span>) <span class="kwd">by</span> <span class="id">exact</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">F</span> [<span class="id">dF</span> <span class="id">GF</span>]; <span class="id">apply</span>: (<span class="id"><a href="mathcomp.analysis.measure.html#dynkinC">dynkinC</a></span> <span class="id">dF</span>) =&gt; //; <span class="id">exact</span>: <span class="id">dGD</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setCT">setCT</a></span>; <span class="id">apply</span>/(<span class="id"><a href="mathcomp.analysis.measure.html#dynkinC">dynkinC</a></span> <span class="id">dS</span>)/(<span class="id"><a href="mathcomp.analysis.measure.html#dynkinT">dynkinT</a></span> <span class="id">dS</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">dGEDD</span> <span class="id">S</span> /= [+ <span class="id">GS</span>] =&gt; <span class="id">dS</span>; <span class="id">apply</span>/(<span class="id"><a href="mathcomp.analysis.measure.html#dynkinC">dynkinC</a></span> <span class="id">dS</span>); <span class="id">exact</span>: <span class="id">dGEDD</span>.<br/>
&nbsp;&nbsp;- <span class="id">move</span>=&gt; <span class="id">F</span> <span class="id">tF</span> <span class="id">deltaDF</span>; <span class="id">rewrite</span> /<span class="id">delta</span> /= =&gt; <span class="id">S</span> /= [<span class="id">dS</span> <span class="id">GS</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setI_bigcupl">setI_bigcupl</a></span>; <span class="id">apply</span>: (<span class="id"><a href="mathcomp.analysis.measure.html#dynkinU">dynkinU</a></span> <span class="id">dS</span>) =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">under</span> <span class="id"><a href="mathcomp.classical.boolp.html#eq_fun">eq_fun</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIC">setIC</a></span>; <span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset_setIl">trivIset_setIl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span>; <span class="id">exact</span>: <span class="id">deltaDF</span>.<br/>
<span class="id">have</span> <span class="id">GdG</span> : <span class="id">G</span> `&lt;=` &lt;&lt;<span class="id">d</span> <span class="id">G</span> &gt;&gt; <span class="kwd">by</span> <span class="id">move</span>=&gt; ? ? ? [<span class="id">_</span>]; <span class="id">apply</span>.<br/>
<span class="id">have</span> <span class="id">Gdelta</span> <span class="id">A</span> : <span class="id">G</span> <span class="id">A</span> -&gt; <span class="id">G</span> `&lt;=` <span class="id">delta</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; ? ? ?; <span class="id">rewrite</span> /<span class="id">delta</span> /= =&gt; ? [?]; <span class="id">apply</span>; <span class="id">exact</span>/<span class="id">GI</span>.<br/>
<span class="id">have</span> <span class="id">GdGdelta</span> <span class="id">A</span> : <span class="id">G</span> <span class="id">A</span> -&gt; &lt;&lt;<span class="id">d</span> <span class="id">G</span> &gt;&gt; `&lt;=` <span class="id">delta</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; ?; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#smallest_sub">smallest_sub</a></span> =&gt; //; <span class="id">last</span> <span class="id">exact</span>: <span class="id">Gdelta</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">ddelta</span>; <span class="id">exact</span>: <span class="id">GdG</span>.<br/>
<span class="id">have</span> <span class="id">dGGI</span> <span class="id">A</span> <span class="id">B</span> : &lt;&lt;<span class="id">d</span> <span class="id">G</span> &gt;&gt; <span class="id">A</span> -&gt; <span class="id">G</span> <span class="id">B</span> -&gt; &lt;&lt;<span class="id">d</span> <span class="id">G</span> &gt;&gt; (<span class="id">A</span> `&amp;` <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; ? ?; <span class="id">apply</span>: <span class="id">GdGdelta</span>.<br/>
<span class="id">have</span> <span class="id">dGGdelta</span> <span class="id">A</span> : &lt;&lt;<span class="id">d</span> <span class="id">G</span> &gt;&gt; <span class="id">A</span> -&gt; <span class="id">G</span> `&lt;=` <span class="id">delta</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; ? ? ?; <span class="id">rewrite</span> /<span class="id">delta</span> /= <span class="id"><a href="mathcomp.classical.classical_sets.html#setIC">setIC</a></span>; <span class="id">exact</span>: <span class="id">dGGI</span>.<br/>
<span class="id">have</span> <span class="id">dGdGdelta</span> <span class="id">A</span> : &lt;&lt;<span class="id">d</span> <span class="id">G</span> &gt;&gt; <span class="id">A</span> -&gt; &lt;&lt;<span class="id">d</span> <span class="id">G</span> &gt;&gt; `&lt;=` <span class="id">delta</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; ?; <span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#smallest_sub">smallest_sub</a></span> (<span class="id">ddelta</span> <span class="id">_</span> <span class="id">_</span>) (<span class="id">dGGdelta</span> <span class="id">_</span> <span class="id">_</span>).<br/>
<span class="id">have</span> <span class="id">dGdGdG</span> <span class="id">A</span> <span class="id">B</span> : &lt;&lt;<span class="id">d</span> <span class="id">G</span> &gt;&gt; <span class="id">A</span> -&gt; &lt;&lt;<span class="id">d</span> <span class="id">G</span> &gt;&gt; <span class="id">B</span> -&gt; &lt;&lt;<span class="id">d</span> <span class="id">G</span> &gt;&gt; (<span class="id">A</span> `&amp;` <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; ? ?; <span class="id">exact</span>: <span class="id">dGdGdelta</span>.<br/>
<span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#smallest_sub">smallest_sub</a></span> =&gt; //; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#dynkin_setI_sigma_algebra">dynkin_setI_sigma_algebra</a></span> =&gt; //.<br/>
<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#dynkin_g_dynkin">dynkin_g_dynkin</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.measure.html#dynkin_lemmas">dynkin_lemmas</a></span>.<br/>
<br/>
<span class="id"><a name="isSemiRingOfSets">HB.mixin</a></span> <span class="kwd">Record</span> <span class="id">isSemiRingOfSets</span> (<span class="id">d</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measure_display">measure_display</a></span>) <span class="id">T</span> := {<br/>
&nbsp;&nbsp;<span class="id">ptclass</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.class_of">Pointed.class_of</a></span> <span class="id">T</span>;<br/>
&nbsp;&nbsp;<span class="id">measurable</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) ;<br/>
&nbsp;&nbsp;<span class="id">measurable0</span> : <span class="id">measurable</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span> ;<br/>
&nbsp;&nbsp;<span class="id">measurableI</span> : <span class="id"><a href="mathcomp.analysis.measure.html#setI_closed">setI_closed</a></span> <span class="id">measurable</span>;<br/>
&nbsp;&nbsp;<span class="id">semi_measurableD</span> : <span class="id"><a href="mathcomp.analysis.measure.html#semi_setD_closed">semi_setD_closed</a></span> <span class="id">measurable</span>;<br/>
}.<br/>
<br/>
#[<span class="id">short</span>(<span class="id">type</span>=<span class="id">semiRingOfSetsType</span>)]<br/>
<span class="id">HB.structure</span> <span class="kwd">Definition</span> <span class="id">SemiRingOfSets</span> <span class="id">d</span> := {<span class="id">T</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.measure.html#isSemiRingOfSets">isSemiRingOfSets</a></span> <span class="id">d</span> <span class="id">T</span>}.<br/>
<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="semiRingOfSets_eqType">semiRingOfSets_eqType</a></span> <span class="id">d</span> (<span class="id">T</span> : <span class="id"><a href="mathcomp.analysis.measure.html#semiRingOfSetsType">semiRingOfSetsType</a></span> <span class="id">d</span>) := <span class="id">EqType</span> <span class="id">T</span> <span class="id"><a href="mathcomp.analysis.measure.html#ptclass">ptclass</a></span>.<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="semiRingOfSets_choiceType">semiRingOfSets_choiceType</a></span> <span class="id">d</span> (<span class="id">T</span> : <span class="id"><a href="mathcomp.analysis.measure.html#semiRingOfSetsType">semiRingOfSetsType</a></span> <span class="id">d</span>) :=<br/>
&nbsp;&nbsp;<span class="id">ChoiceType</span> <span class="id">T</span> <span class="id"><a href="mathcomp.analysis.measure.html#ptclass">ptclass</a></span>.<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="semiRingOfSets_ptType">semiRingOfSets_ptType</a></span> <span class="id">d</span> (<span class="id">T</span> : <span class="id"><a href="mathcomp.analysis.measure.html#semiRingOfSetsType">semiRingOfSetsType</a></span> <span class="id">d</span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.Exports.PointedType">PointedType</a></span> <span class="id">T</span> <span class="id"><a href="mathcomp.analysis.measure.html#ptclass">ptclass</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurable_curry">measurable_curry</a></span> (<span class="id">T1</span> <span class="id">T2</span> : <span class="kwd">Type</span>) <span class="id">d</span> (<span class="id">T</span> : <span class="id"><a href="mathcomp.analysis.measure.html#semiRingOfSetsType">semiRingOfSetsType</a></span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">G</span> : <span class="id">T1</span> * <span class="id">T2</span> -&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) (<span class="id">x</span> : <span class="id">T1</span> * <span class="id">T2</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (<span class="id">G</span> <span class="id">x</span>) &lt;-&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#curry">curry</a></span> <span class="id">G</span> <span class="id">x</span>.1 <span class="id">x</span>.2).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
 <span class="kwd">by</span> <span class="id">case</span>: <span class="id">x</span>. Qed.</div>
<br/>
<span class="kwd">Notation</span> "<span class="id">d</span> .-<span class="id">measurable</span>" := (@<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">d</span>%<span class="id">mdisp</span>) : <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Notation</span> "'<span class="id">measurable</span>" :=<br/>
&nbsp;&nbsp;(@<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#default_measure_display">default_measure_display</a></span>) : <span class="id">classical_set_scope</span>.<br/>
<br/>
<span class="id"><a name="SemiRingOfSets_isRingOfSets">HB.mixin</a></span> <span class="kwd">Record</span> <span class="id">SemiRingOfSets_isRingOfSets</span> <span class="id">d</span> <span class="id">T</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.measure.html#isSemiRingOfSets">isSemiRingOfSets</a></span> <span class="id">d</span> <span class="id">T</span> := {<br/>
&nbsp;&nbsp;<span class="id">measurableU</span> : <span class="id"><a href="mathcomp.analysis.measure.html#setU_closed">setU_closed</a></span> (@<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">d</span> [<span class="id">the</span> <span class="id"><a href="mathcomp.analysis.measure.html#semiRingOfSetsType">semiRingOfSetsType</a></span> <span class="id">d</span> <span class="id">of</span> <span class="id">T</span>]) }.<br/>
<br/>
#[<span class="id">short</span>(<span class="id">type</span>=<span class="id">ringOfSetsType</span>)]<br/>
<span class="id">HB.structure</span> <span class="kwd">Definition</span> <span class="id">RingOfSets</span> <span class="id">d</span> :=<br/>
&nbsp;&nbsp;{<span class="id">T</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.measure.html#SemiRingOfSets_isRingOfSets">SemiRingOfSets_isRingOfSets</a></span> <span class="id">d</span> <span class="id">T</span> &amp; <span class="id"><a href="mathcomp.analysis.measure.html#SemiRingOfSets">SemiRingOfSets</a></span> <span class="id">d</span> <span class="id">T</span>}.<br/>
<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="ringOfSets_eqType">ringOfSets_eqType</a></span> <span class="id">d</span> (<span class="id">T</span> : <span class="id"><a href="mathcomp.analysis.measure.html#ringOfSetsType">ringOfSetsType</a></span> <span class="id">d</span>) := <span class="id">EqType</span> <span class="id">T</span> <span class="id"><a href="mathcomp.analysis.measure.html#ptclass">ptclass</a></span>.<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="ringOfSets_choiceType">ringOfSets_choiceType</a></span> <span class="id">d</span> (<span class="id">T</span> : <span class="id"><a href="mathcomp.analysis.measure.html#ringOfSetsType">ringOfSetsType</a></span> <span class="id">d</span>) := <span class="id">ChoiceType</span> <span class="id">T</span> <span class="id"><a href="mathcomp.analysis.measure.html#ptclass">ptclass</a></span>.<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="ringOfSets_ptType">ringOfSets_ptType</a></span> <span class="id">d</span> (<span class="id">T</span> : <span class="id"><a href="mathcomp.analysis.measure.html#ringOfSetsType">ringOfSetsType</a></span> <span class="id">d</span>) := <span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.Exports.PointedType">PointedType</a></span> <span class="id">T</span> <span class="id"><a href="mathcomp.analysis.measure.html#ptclass">ptclass</a></span>.<br/>
<br/>
<span class="id"><a name="RingOfSets_isAlgebraOfSets">HB.mixin</a></span> <span class="kwd">Record</span> <span class="id">RingOfSets_isAlgebraOfSets</span> <span class="id">d</span> <span class="id">T</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.measure.html#RingOfSets">RingOfSets</a></span> <span class="id">d</span> <span class="id">T</span> := {<br/>
&nbsp;&nbsp;<span class="id">measurableT</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> [<span class="id">set</span>: <span class="id">T</span>]<br/>
}.<br/>
<br/>
#[<span class="id">short</span>(<span class="id">type</span>=<span class="id">algebraOfSetsType</span>)]<br/>
<span class="id">HB.structure</span> <span class="kwd">Definition</span> <span class="id">AlgebraOfSets</span> <span class="id">d</span> :=<br/>
&nbsp;&nbsp;{<span class="id">T</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.measure.html#RingOfSets_isAlgebraOfSets">RingOfSets_isAlgebraOfSets</a></span> <span class="id">d</span> <span class="id">T</span> &amp; <span class="id"><a href="mathcomp.analysis.measure.html#RingOfSets">RingOfSets</a></span> <span class="id">d</span> <span class="id">T</span>}.<br/>
<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="algebraOfSets_eqType">algebraOfSets_eqType</a></span> <span class="id">d</span> (<span class="id">T</span> : <span class="id"><a href="mathcomp.analysis.measure.html#algebraOfSetsType">algebraOfSetsType</a></span> <span class="id">d</span>) := <span class="id">EqType</span> <span class="id">T</span> <span class="id"><a href="mathcomp.analysis.measure.html#ptclass">ptclass</a></span>.<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="algebraOfSets_choiceType">algebraOfSets_choiceType</a></span> <span class="id">d</span> (<span class="id">T</span> : <span class="id"><a href="mathcomp.analysis.measure.html#algebraOfSetsType">algebraOfSetsType</a></span> <span class="id">d</span>) :=<br/>
&nbsp;&nbsp;<span class="id">ChoiceType</span> <span class="id">T</span> <span class="id"><a href="mathcomp.analysis.measure.html#ptclass">ptclass</a></span>.<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="algebraOfSets_ptType">algebraOfSets_ptType</a></span> <span class="id">d</span> (<span class="id">T</span> : <span class="id"><a href="mathcomp.analysis.measure.html#algebraOfSetsType">algebraOfSetsType</a></span> <span class="id">d</span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.Exports.PointedType">PointedType</a></span> <span class="id">T</span> <span class="id"><a href="mathcomp.analysis.measure.html#ptclass">ptclass</a></span>.<br/>
<br/>
<span class="id"><a name="AlgebraOfSets_isMeasurable">HB.mixin</a></span> <span class="kwd">Record</span> <span class="id">AlgebraOfSets_isMeasurable</span> <span class="id">d</span> <span class="id">T</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.measure.html#AlgebraOfSets">AlgebraOfSets</a></span> <span class="id">d</span> <span class="id">T</span> := {<br/>
&nbsp;&nbsp;<span class="id">bigcupT_measurable</span> : <span class="kwd">forall</span> <span class="id">F</span> : (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>)^<span class="id">nat</span>, (<span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (<span class="id">F</span> <span class="id">i</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (\<span class="id">bigcup_i</span> (<span class="id">F</span> <span class="id">i</span>))<br/>
}.<br/>
<br/>
#[<span class="id">short</span>(<span class="id">type</span>=<span class="id">measurableType</span>)]<br/>
<span class="id">HB.structure</span> <span class="kwd">Definition</span> <span class="id">Measurable</span> <span class="id">d</span> :=<br/>
&nbsp;&nbsp;{<span class="id">T</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.measure.html#AlgebraOfSets_isMeasurable">AlgebraOfSets_isMeasurable</a></span> <span class="id">d</span> <span class="id">T</span> &amp; <span class="id"><a href="mathcomp.analysis.measure.html#AlgebraOfSets">AlgebraOfSets</a></span> <span class="id">d</span> <span class="id">T</span>}.<br/>
<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="measurable_eqType">measurable_eqType</a></span> <span class="id">d</span> (<span class="id">T</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurableType">measurableType</a></span> <span class="id">d</span>) := <span class="id">EqType</span> <span class="id">T</span> <span class="id"><a href="mathcomp.analysis.measure.html#ptclass">ptclass</a></span>.<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="measurable_choiceType">measurable_choiceType</a></span> <span class="id">d</span> (<span class="id">T</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurableType">measurableType</a></span> <span class="id">d</span>) := <span class="id">ChoiceType</span> <span class="id">T</span> <span class="id"><a href="mathcomp.analysis.measure.html#ptclass">ptclass</a></span>.<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="measurable_ptType">measurable_ptType</a></span> <span class="id">d</span> (<span class="id">T</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurableType">measurableType</a></span> <span class="id">d</span>) := <span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.Exports.PointedType">PointedType</a></span> <span class="id">T</span> <span class="id"><a href="mathcomp.analysis.measure.html#ptclass">ptclass</a></span>.<br/>
<br/>
<span class="id"><a name="isRingOfSets">HB.factory</a></span> <span class="kwd">Record</span> <span class="id">isRingOfSets</span> (<span class="id">d</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measure_display">measure_display</a></span>) <span class="id">T</span> := {<br/>
&nbsp;&nbsp;<span class="id">ptclass</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.class_of">Pointed.class_of</a></span> <span class="id">T</span>;<br/>
&nbsp;&nbsp;<span class="id">measurable</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) ;<br/>
&nbsp;&nbsp;<span class="id">measurable0</span> : <span class="id">measurable</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span> ;<br/>
&nbsp;&nbsp;<span class="id">measurableU</span> : <span class="id"><a href="mathcomp.analysis.measure.html#setU_closed">setU_closed</a></span> <span class="id">measurable</span>;<br/>
&nbsp;&nbsp;<span class="id">measurableD</span> : <span class="id"><a href="mathcomp.analysis.measure.html#setDI_closed">setDI_closed</a></span> <span class="id">measurable</span>;<br/>
}.<br/>
<br/>
<span class="id"><a name="Builders_27">HB.builders</a></span> <span class="kwd">Context</span> <span class="id">d</span> <span class="id">T</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.measure.html#isRingOfSets">isRingOfSets</a></span> <span class="id">d</span> <span class="id">T</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">A</span> <span class="id">B</span> <span class="id">C</span> <span class="id">D</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_27.Builders_27.T">T</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Builders_27.mI">mI</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#setI_closed">setI_closed</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_27.measurable">measurable</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">mA</span> <span class="id">mB</span>; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setDD">setDD</a></span>; <span class="id">do</span> ?<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#Builders_27.measurableD">measurableD</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Builders_27.mD">mD</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#semi_setD_closed">semi_setD_closed</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_27.measurable">measurable</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
<span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">Am</span> <span class="id">Bm</span>; <span class="kwd">exists</span> [<span class="id">set</span> <span class="id">A</span> `\` <span class="id">B</span>]; <span class="id">split</span>; <span class="id">rewrite</span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_set1">bigcup_set1</a></span>//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">C</span> -&gt;; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#Builders_27.measurableD">measurableD</a></span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">X</span> <span class="id">Y</span> -&gt; -&gt;.<br/>
Qed.</div>
<br/>
<span class="id"><a name="Builders_27.HB_unnamed_factory_29">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> :=<br/>
&nbsp;&nbsp;@<span class="id"><a href="mathcomp.analysis.measure.html#isSemiRingOfSets.Build">isSemiRingOfSets.Build</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_27.Builders_27.d">d</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_27.Builders_27.T">T</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_27.ptclass">ptclass</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_27.measurable">measurable</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_27.measurable0">measurable0</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_27.mI">mI</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_27.mD">mD</a></span>.<br/>
<br/>
<span class="id"><a name="Builders_27.HB_unnamed_factory_31">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.analysis.measure.html#SemiRingOfSets_isRingOfSets.Build">SemiRingOfSets_isRingOfSets.Build</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_27.Builders_27.d">d</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_27.Builders_27.T">T</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_27.measurableU">measurableU</a></span>.<br/>
<br/>
<span class="id"><a href="mathcomp.analysis.measure.html#Builders_27.Builders_27">HB.end</a></span>.<br/>
<br/>
<span class="id"><a name="isAlgebraOfSets">HB.factory</a></span> <span class="kwd">Record</span> <span class="id">isAlgebraOfSets</span> (<span class="id">d</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measure_display">measure_display</a></span>) <span class="id">T</span> := {<br/>
&nbsp;&nbsp;<span class="id">ptclass</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.class_of">Pointed.class_of</a></span> <span class="id">T</span>;<br/>
&nbsp;&nbsp;<span class="id">measurable</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) ;<br/>
&nbsp;&nbsp;<span class="id">measurable0</span> : <span class="id">measurable</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span> ;<br/>
&nbsp;&nbsp;<span class="id">measurableU</span> : <span class="id"><a href="mathcomp.analysis.measure.html#setU_closed">setU_closed</a></span> <span class="id">measurable</span>;<br/>
&nbsp;&nbsp;<span class="id">measurableC</span> : <span class="id"><a href="mathcomp.analysis.measure.html#setC_closed">setC_closed</a></span> <span class="id">measurable</span><br/>
}.<br/>
<br/>
<span class="id"><a name="Builders_33">HB.builders</a></span> <span class="kwd">Context</span> <span class="id">d</span> <span class="id">T</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.measure.html#isAlgebraOfSets">isAlgebraOfSets</a></span> <span class="id">d</span> <span class="id">T</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Builders_33.mD">mD</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#setDI_closed">setDI_closed</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_33.measurable">measurable</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
<span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">mA</span> <span class="id">mB</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDE">setDE</a></span> -[<span class="id">A</span>]<span class="id"><a href="mathcomp.classical.classical_sets.html#setCK">setCK</a></span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setCU">setCU</a></span>.<br/>
<span class="kwd">by</span> <span class="id">do</span> ?[<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#Builders_33.measurableU">measurableU</a></span> | <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#Builders_33.measurableC">measurableC</a></span>].<br/>
Qed.</div>
<br/>
<span class="id"><a name="Builders_33.HB_unnamed_factory_35">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> :=<br/>
&nbsp;&nbsp;@<span class="id"><a href="mathcomp.analysis.measure.html#isRingOfSets.Build">isRingOfSets.Build</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_33.Builders_33.d">d</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_33.Builders_33.T">T</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_33.ptclass">ptclass</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_33.measurable">measurable</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_33.measurable0">measurable0</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_33.measurableU">measurableU</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_33.mD">mD</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Builders_33.measurableT">measurableT</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#Builders_33.measurable">measurable</a></span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.measure.html#Builders_33.Builders_33.T">T</a></span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setC0">setC0</a></span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#Builders_33.measurableC">measurableC</a></span>; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#Builders_33.measurable0">measurable0</a></span>. Qed.</div>
<br/>
<span class="id"><a name="Builders_33.HB_unnamed_factory_38">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.analysis.measure.html#RingOfSets_isAlgebraOfSets.Build">RingOfSets_isAlgebraOfSets.Build</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_33.Builders_33.d">d</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_33.Builders_33.T">T</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_33.measurableT">measurableT</a></span>.<br/>
<br/>
<span class="id"><a href="mathcomp.analysis.measure.html#Builders_33.Builders_33">HB.end</a></span>.<br/>
<br/>
<span class="id"><a name="isMeasurable">HB.factory</a></span> <span class="kwd">Record</span> <span class="id">isMeasurable</span> (<span class="id">d</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measure_display">measure_display</a></span>) <span class="id">T</span> := {<br/>
&nbsp;&nbsp;<span class="id">ptclass</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.class_of">Pointed.class_of</a></span> <span class="id">T</span>;<br/>
&nbsp;&nbsp;<span class="id">measurable</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) ;<br/>
&nbsp;&nbsp;<span class="id">measurable0</span> : <span class="id">measurable</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span> ;<br/>
&nbsp;&nbsp;<span class="id">measurableC</span> : <span class="kwd">forall</span> <span class="id">A</span>, <span class="id">measurable</span> <span class="id">A</span> -&gt; <span class="id">measurable</span> (~` <span class="id">A</span>) ;<br/>
&nbsp;&nbsp;<span class="id">measurable_bigcup</span> : <span class="kwd">forall</span> <span class="id">F</span> : (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>)^<span class="id">nat</span>, (<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">measurable</span> (<span class="id">F</span> <span class="id">i</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">measurable</span> (\<span class="id">bigcup_i</span> (<span class="id">F</span> <span class="id">i</span>))<br/>
}.<br/>
<br/>
<span class="id"><a name="Builders_40">HB.builders</a></span> <span class="kwd">Context</span> <span class="id">d</span> <span class="id">T</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.measure.html#isMeasurable">isMeasurable</a></span> <span class="id">d</span> <span class="id">T</span>.<br/>
<br/>
<span class="kwd">Obligation</span> <span class="kwd">Tactic</span> := <span class="id">idtac</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Builders_40.mU">mU</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#setU_closed">setU_closed</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_40.measurable">measurable</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
<span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">mA</span> <span class="id">mB</span>; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup2E">bigcup2E</a></span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#Builders_40.measurable_bigcup">measurable_bigcup</a></span> =&gt; -[//|[//|<span class="id">i</span>]]; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#Builders_40.measurable0">measurable0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Builders_40.mC">mC</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#setC_closed">setC_closed</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_40.measurable">measurable</a></span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; *; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#Builders_40.measurableC">measurableC</a></span>. Qed.</div>
<br/>
<span class="id"><a name="Builders_40.HB_unnamed_factory_42">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> :=<br/>
&nbsp;&nbsp;@<span class="id"><a href="mathcomp.analysis.measure.html#isAlgebraOfSets.Build">isAlgebraOfSets.Build</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_40.Builders_40.d">d</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_40.Builders_40.T">T</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_40.ptclass">ptclass</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_40.measurable">measurable</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_40.measurable0">measurable0</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_40.mU">mU</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_40.mC">mC</a></span>.<br/>
<br/>
<span class="id"><a name="Builders_40.HB_unnamed_factory_46">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> :=<br/>
&nbsp;&nbsp;@<span class="id"><a href="mathcomp.analysis.measure.html#AlgebraOfSets_isMeasurable.Build">AlgebraOfSets_isMeasurable.Build</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_40.Builders_40.d">d</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_40.Builders_40.T">T</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_40.measurable_bigcup">measurable_bigcup</a></span>.<br/>
<br/>
<span class="id"><a href="mathcomp.analysis.measure.html#Builders_40.Builders_40">HB.end</a></span>.<br/>
<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>) =&gt; <span class="id">solve</span> [<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurable0">measurable0</a></span>] : <span class="id">core</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span>) =&gt; <span class="id">solve</span> [<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableT">measurableT</a></span>] : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="ringofsets_lemmas">ringofsets_lemmas</a></span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id"><a href="mathcomp.analysis.measure.html#ringOfSetsType">ringOfSetsType</a></span> <span class="id">d</span>).<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">A</span> <span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#ringofsets_lemmas.T">T</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bigsetU_measurable">bigsetU_measurable</a></span> <span class="id">I</span> <span class="id">r</span> (<span class="id">P</span> : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">pred</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#ringofsets_lemmas.T">T</a></span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (<span class="id">F</span> <span class="id">i</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (\<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.classical_sets.html#setU">setU</a></span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>]<span class="id">_</span>(<span class="id">i</span> &lt;- <span class="id">r</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">mF</span>; <span class="id">elim</span>/<span class="id">big_ind</span> : <span class="id">_</span> =&gt; //; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableU">measurableU</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fin_bigcup_measurable">fin_bigcup_measurable</a></span> <span class="id">I</span> (<span class="id">D</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#ringofsets_lemmas.T">T</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">D</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">D</span> <span class="id">i</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (<span class="id">F</span> <span class="id">i</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">D</span>) <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
<span class="id">elim</span>/<span class="id"><a href="mathcomp.classical.boolp.html#Pchoice">Pchoice</a></span>: <span class="id">I</span> =&gt; <span class="id">I</span> <span class="kwd">in</span> <span class="id">D</span> <span class="id">F</span> * =&gt; <span class="id">Dfin</span> <span class="id">Fm</span>.<br/>
<span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.cardinality.html#bigsetU_fset_set">bigsetU_fset_set</a></span>// <span class="id">big_seq</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#bigsetU_measurable">bigsetU_measurable</a></span> =&gt; <span class="id">i</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.cardinality.html#in_fset_set">in_fset_set</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>// =&gt; *; <span class="id">apply</span>: <span class="id">Fm</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurableD">measurableD</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#setDI_closed">setDI_closed</a></span> (@<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#ringofsets_lemmas.d">d</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#ringofsets_lemmas.T">T</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
<span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">mA</span> <span class="id">mB</span>; <span class="id">case</span>: (<span class="id"><a href="mathcomp.analysis.measure.html#semi_measurableD">semi_measurableD</a></span> <span class="id">A</span> <span class="id">B</span>) =&gt; // [<span class="id">D</span> [<span class="id">Dfin</span> <span class="id">Dl</span> -&gt; <span class="id">_</span>]].<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#fin_bigcup_measurable">fin_bigcup_measurable</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.measure.html#ringofsets_lemmas">ringofsets_lemmas</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="algebraofsets_lemmas">algebraofsets_lemmas</a></span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id"><a href="mathcomp.analysis.measure.html#algebraOfSetsType">algebraOfSetsType</a></span> <span class="id">d</span>).<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">A</span> <span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#algebraofsets_lemmas.T">T</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurableC">measurableC</a></span> <span class="id">A</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">A</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (~` <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">mA</span>; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setTD">setTD</a></span>; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableD">measurableD</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bigsetI_measurable">bigsetI_measurable</a></span> <span class="id">I</span> <span class="id">r</span> (<span class="id">P</span> : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">pred</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#algebraofsets_lemmas.T">T</a></span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (<span class="id">F</span> <span class="id">i</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (\<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.classical_sets.html#setI">setI</a></span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span>]<span class="id">_</span>(<span class="id">i</span> &lt;- <span class="id">r</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
<span class="id">move</span>=&gt; <span class="id">mF</span>; <span class="id">rewrite</span> -[<span class="id">X</span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">X</span>]<span class="id"><a href="mathcomp.classical.classical_sets.html#setCK">setCK</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setC_bigsetI">setC_bigsetI</a></span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableC">measurableC</a></span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#bigsetU_measurable">bigsetU_measurable</a></span> =&gt; <span class="id">i</span> <span class="id">Pi</span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.measure.html#measurableC">measurableC</a></span>/<span class="id">mF</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fin_bigcap_measurable">fin_bigcap_measurable</a></span> <span class="id">I</span> (<span class="id">D</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#algebraofsets_lemmas.T">T</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">D</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">D</span> <span class="id">i</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (<span class="id">F</span> <span class="id">i</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">D</span>) <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
<span class="id">elim</span>/<span class="id"><a href="mathcomp.classical.boolp.html#Pchoice">Pchoice</a></span>: <span class="id">I</span> =&gt; <span class="id">I</span> <span class="kwd">in</span> <span class="id">D</span> <span class="id">F</span> * =&gt; <span class="id">Dfin</span> <span class="id">Fm</span>.<br/>
<span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.cardinality.html#bigsetI_fset_set">bigsetI_fset_set</a></span>// <span class="id">big_seq</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#bigsetI_measurable">bigsetI_measurable</a></span> =&gt; <span class="id">i</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.cardinality.html#in_fset_set">in_fset_set</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>// =&gt; *; <span class="id">apply</span>: <span class="id">Fm</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.measure.html#algebraofsets_lemmas">algebraofsets_lemmas</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="measurable_lemmas">measurable_lemmas</a></span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurableType">measurableType</a></span> <span class="id">d</span>).<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">A</span> <span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable_lemmas.T">T</a></span>) (<span class="id">F</span> : (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable_lemmas.T">T</a></span>)^<span class="id">nat</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sigma_algebra_measurable">sigma_algebra_measurable</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#sigma_algebra">sigma_algebra</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> (@<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable_lemmas.d">d</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable_lemmas.T">T</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; // [<span class="id">A</span>|]; [<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableD">measurableD</a></span>|<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#bigcupT_measurable">bigcupT_measurable</a></span>]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bigcup_measurable">bigcup_measurable</a></span> <span class="id">F</span> <span class="id">P</span> :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, <span class="id">P</span> <span class="id">k</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (<span class="id">F</span> <span class="id">k</span>)) -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
<span class="id">move</span>=&gt; <span class="id">PF</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_mkcond">bigcup_mkcond</a></span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#bigcupT_measurable">bigcupT_measurable</a></span> =&gt; <span class="id">k</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">ifP</a></span> =&gt; //; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>; <span class="id">exact</span>: <span class="id">PF</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bigcap_measurable">bigcap_measurable</a></span> <span class="id">F</span> <span class="id">P</span> :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, <span class="id">P</span> <span class="id">k</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (<span class="id">F</span> <span class="id">k</span>)) -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
<span class="id">move</span>=&gt; <span class="id">PF</span>; <span class="id">rewrite</span> -[<span class="id">X</span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">X</span>]<span class="id"><a href="mathcomp.classical.classical_sets.html#setCK">setCK</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setC_bigcap">setC_bigcap</a></span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableC">measurableC</a></span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#bigcup_measurable">bigcup_measurable</a></span> =&gt; <span class="id">k</span> <span class="id">Pk</span>; <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.measure.html#measurableC">measurableC</a></span>/<span class="id">PF</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bigcapT_measurable">bigcapT_measurable</a></span> <span class="id">F</span> : (<span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (<span class="id">F</span> <span class="id">i</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (\<span class="id">bigcap_i</span> (<span class="id">F</span> <span class="id">i</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; ?; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#bigcap_measurable">bigcap_measurable</a></span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable_lemmas">measurable_lemmas</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bigcupT_measurable_rat">bigcupT_measurable_rat</a></span> <span class="id">d</span> (<span class="id">T</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id">F</span> : <span class="id">rat</span> -&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (<span class="id">F</span> <span class="id">i</span>)) -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (\<span class="id">bigcup_i</span> <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</span></div>
<div class="proofscript" id="proof50">
<span class="id">move</span>=&gt; <span class="id">Fm</span>; <span class="id">have</span> /<span class="id"><a href="mathcomp.classical.cardinality.html#ppcard_eqP">ppcard_eqP</a></span>[<span class="id">f</span>] := <span class="id"><a href="mathcomp.classical.cardinality.html#card_rat">card_rat</a></span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.functions.html#reindex_bigcup">reindex_bigcup</a></span> <span class="id">f</span>^-1%<span class="id">FUN</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span>)//=; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#bigcupT_measurable">bigcupT_measurable</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="discrete_measurable_unit">discrete_measurable_unit</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="discrete_measurable_unit">discrete_measurable_unit</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span>) := [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span>].<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="discrete_measurable_unit.discrete_measurable0">discrete_measurable0</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_unit">discrete_measurable_unit</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</span></div>
<div class="proofscript" id="proof51">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="discrete_measurable_unit.discrete_measurableC">discrete_measurableC</a></span> <span class="id">X</span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_unit">discrete_measurable_unit</a></span> <span class="id">X</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_unit">discrete_measurable_unit</a></span> (~` <span class="id">X</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</span></div>
<div class="proofscript" id="proof52">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="discrete_measurable_unit.discrete_measurableU">discrete_measurableU</a></span> (<span class="id">F</span> : (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span>)^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_unit">discrete_measurable_unit</a></span> (<span class="id">F</span> <span class="id">i</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_unit">discrete_measurable_unit</a></span> (\<span class="id">bigcup_i</span> <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</span></div>
<div class="proofscript" id="proof53">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="id"><a name="HB_unnamed_factory_48">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := @<span class="id"><a href="mathcomp.analysis.measure.html#Build">isMeasurable.Build</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#default_measure_display">default_measure_display</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.class">Pointed.class</a></span> <span class="id">_</span>) <span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_unit">discrete_measurable_unit</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_unit.discrete_measurable0">discrete_measurable0</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_unit.discrete_measurableC">discrete_measurableC</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_unit.discrete_measurableU">discrete_measurableU</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_unit">discrete_measurable_unit</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="discrete_measurable_bool">discrete_measurable_bool</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="discrete_measurable_bool">discrete_measurable_bool</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span>) := [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span>].<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="discrete_measurable_bool.discrete_measurable0">discrete_measurable0</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_bool">discrete_measurable_bool</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof54')">Proof.</span></div>
<div class="proofscript" id="proof54">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="discrete_measurable_bool.discrete_measurableC">discrete_measurableC</a></span> <span class="id">X</span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_bool">discrete_measurable_bool</a></span> <span class="id">X</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_bool">discrete_measurable_bool</a></span> (~` <span class="id">X</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</span></div>
<div class="proofscript" id="proof55">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="discrete_measurable_bool.discrete_measurableU">discrete_measurableU</a></span> (<span class="id">F</span> : (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span>)^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_bool">discrete_measurable_bool</a></span> (<span class="id">F</span> <span class="id">i</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_bool">discrete_measurable_bool</a></span> (\<span class="id">bigcup_i</span> <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof56')">Proof.</span></div>
<div class="proofscript" id="proof56">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="id"><a name="HB_unnamed_factory_57">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := @<span class="id"><a href="mathcomp.analysis.measure.html#Build">isMeasurable.Build</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#default_measure_display">default_measure_display</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.class">Pointed.class</a></span> <span class="id">_</span>) <span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_bool">discrete_measurable_bool</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_bool.discrete_measurable0">discrete_measurable0</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_bool.discrete_measurableC">discrete_measurableC</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_bool.discrete_measurableU">discrete_measurableU</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_bool">discrete_measurable_bool</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="discrete_measurable_nat">discrete_measurable_nat</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="discrete_measurable_nat">discrete_measurable_nat</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>) := [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>].<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="discrete_measurable_nat.discrete_measurable_nat0">discrete_measurable_nat0</a></span> : <span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_nat">discrete_measurable_nat</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof57')">Proof.</span></div>
<div class="proofscript" id="proof57">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="discrete_measurable_nat.discrete_measurable_natC">discrete_measurable_natC</a></span> <span class="id">X</span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_nat">discrete_measurable_nat</a></span> <span class="id">X</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_nat">discrete_measurable_nat</a></span> (~` <span class="id">X</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof58')">Proof.</span></div>
<div class="proofscript" id="proof58">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="discrete_measurable_nat.discrete_measurable_natU">discrete_measurable_natU</a></span> (<span class="id">F</span> : (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>)^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_nat">discrete_measurable_nat</a></span> (<span class="id">F</span> <span class="id">i</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_nat">discrete_measurable_nat</a></span> (\<span class="id">bigcup_i</span> <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof59')">Proof.</span></div>
<div class="proofscript" id="proof59">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="id"><a name="HB_unnamed_factory_70">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := @<span class="id"><a href="mathcomp.analysis.measure.html#Build">isMeasurable.Build</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#default_measure_display">default_measure_display</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.class">Pointed.class</a></span> <span class="id">_</span>) <span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_nat">discrete_measurable_nat</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_nat.discrete_measurable_nat0">discrete_measurable_nat0</a></span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_nat.discrete_measurable_natC">discrete_measurable_natC</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_nat.discrete_measurable_natU">discrete_measurable_natU</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.measure.html#discrete_measurable_nat">discrete_measurable_nat</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sigma_display">sigma_display</a></span> {<span class="id">T</span>} : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measure_display">measure_display</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof60')">Proof.</span></div>
<div class="proofscript" id="proof60">
 <span class="id">exact</span>. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="salgebraType">salgebraType</a></span> {<span class="id">T</span>} (<span class="id">G</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>)) := <span class="id">T</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="g_salgebra_instance">g_salgebra_instance</a></span>.<br/>
<span class="kwd">Variables</span> (<span class="id"><a name="g_salgebra_instance.T">T</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.Exports.pointedType">pointedType</a></span>) (<span class="id"><a name="g_salgebra_instance.G">G</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sigma_algebraC">sigma_algebraC</a></span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_instance.T">T</a></span>) : &lt;&lt;<span class="id">s</span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_instance.G">G</a></span> &gt;&gt; <span class="id">A</span> -&gt; &lt;&lt;<span class="id">s</span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_instance.G">G</a></span> &gt;&gt; (~` <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof61')">Proof.</span></div>
<div class="proofscript" id="proof61">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">sGA</span>; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setTD">setTD</a></span>; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#sigma_algebraCD">sigma_algebraCD</a></span>. Qed.</div>
<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="salgebraType_eqType">salgebraType_eqType</a></span> := <span class="id">EqType</span> (<span class="id"><a href="mathcomp.analysis.measure.html#salgebraType">salgebraType</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_instance.G">G</a></span>) (<span class="id">Equality.class</span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_instance.T">T</a></span>).<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="salgebraType_choiceType">salgebraType_choiceType</a></span> := <span class="id">ChoiceType</span> (<span class="id"><a href="mathcomp.analysis.measure.html#salgebraType">salgebraType</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_instance.G">G</a></span>) (<span class="id">Choice.class</span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_instance.T">T</a></span>).<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="salgebraType_ptType">salgebraType_ptType</a></span> := <span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.Exports.PointedType">PointedType</a></span> (<span class="id"><a href="mathcomp.analysis.measure.html#salgebraType">salgebraType</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_instance.G">G</a></span>) (<span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.class">Pointed.class</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_instance.T">T</a></span>).<br/>
<span class="id"><a name="HB_unnamed_factory_83">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := @<span class="id"><a href="mathcomp.analysis.measure.html#Build">isMeasurable.Build</a></span> (<span class="id"><a href="mathcomp.analysis.measure.html#sigma_display">sigma_display</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_instance.G">G</a></span>)<br/>
&nbsp;&nbsp;(<span class="id"><a href="mathcomp.analysis.measure.html#salgebraType">salgebraType</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_instance.G">G</a></span>) (<span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.class">Pointed.class</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_instance.T">T</a></span>)<br/>
&nbsp;&nbsp;&lt;&lt;<span class="id">s</span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_instance.G">G</a></span> &gt;&gt; (@<span class="id"><a href="mathcomp.analysis.measure.html#sigma_algebra0">sigma_algebra0</a></span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_instance.G">G</a></span>) (@<span class="id"><a href="mathcomp.analysis.measure.html#sigma_algebraC">sigma_algebraC</a></span>)<br/>
&nbsp;&nbsp;(@<span class="id"><a href="mathcomp.analysis.measure.html#sigma_algebra_bigcup">sigma_algebra_bigcup</a></span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_instance.G">G</a></span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_instance">g_salgebra_instance</a></span>.<br/>
<br/>
<span class="kwd">Notation</span> "<span class="id">G</span> .-<span class="id">sigma</span>" := (<span class="id"><a href="mathcomp.analysis.measure.html#sigma_display">sigma_display</a></span> <span class="id">G</span>) : <span class="id">measure_display_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">G</span> .-<span class="id">sigma</span>.-<span class="id">measurable</span>" :=<br/>
&nbsp;&nbsp;(<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.analysis.measure.html#salgebraType">salgebraType</a></span> <span class="id">G</span>))) : <span class="id">classical_set_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurable_g_measurableTypeE">measurable_g_measurableTypeE</a></span> (<span class="id">T</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.Exports.pointedType">pointedType</a></span>) (<span class="id">G</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>)) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#sigma_algebra">sigma_algebra</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id">G</span> -&gt; <span class="id">G</span>.-<span class="id">sigma</span>.-<span class="id">measurable</span> = <span class="id">G</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof62')">Proof.</span></div>
<div class="proofscript" id="proof62">
 <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#sigma_algebra_id">sigma_algebra_id</a></span>. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="measurable_fun">measurable_fun</a></span> <span class="id">d</span> <span class="id">d</span>' (<span class="id">T</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurableType">measurableType</a></span> <span class="id">d</span>) (<span class="id">U</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurableType">measurableType</a></span> <span class="id">d</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">D</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">U</span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">D</span> -&gt; <span class="kwd">forall</span> <span class="id">Y</span>, <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">Y</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (<span class="id">D</span> `&amp;` <span class="id">f</span> @^-1` <span class="id">Y</span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="measurable_fun">measurable_fun</a></span>.<br/>
<span class="kwd">Context</span> <span class="id">d1</span> <span class="id">d2</span> <span class="id">d3</span> (<span class="id">T1</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurableType">measurableType</a></span> <span class="id">d1</span>) (<span class="id">T2</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurableType">measurableType</a></span> <span class="id">d2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">T3</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurableType">measurableType</a></span> <span class="id">d3</span>).<br/>
<span class="kwd">Implicit</span> <span class="kwd">Type</span> <span class="id">D</span> <span class="id">E</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T1">T1</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurable_id">measurable_id</a></span> <span class="id">D</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">D</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#id">id</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof63')">Proof.</span></div>
<div class="proofscript" id="proof63">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">mD</span> <span class="id">A</span> <span class="id">mA</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableI">measurableI</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurable_comp">measurable_comp</a></span> <span class="id">F</span> (<span class="id">f</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T2">T2</a></span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T3">T3</a></span>) <span class="id">E</span> (<span class="id">g</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T1">T1</a></span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T2">T2</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">F</span> -&gt; <span class="id">g</span> @` <span class="id">E</span> `&lt;=` <span class="id">F</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">F</span> <span class="id">f</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">E</span> <span class="id">g</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">E</span> (<span class="id">f</span> \<span class="id">o</span> <span class="id">g</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof64')">Proof.</span></div>
<div class="proofscript" id="proof64">
<span class="id">move</span>=&gt; <span class="id">mF</span> <span class="id">FgE</span> <span class="id">mf</span> <span class="id">mg</span> /= <span class="id">mE</span> <span class="id">A</span> <span class="id">mA</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#comp_preimage">comp_preimage</a></span>.<br/>
<span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">_</span> `&amp;` <span class="id">_</span> = <span class="id">E</span> `&amp;` <span class="id">g</span> @^-1` (<span class="id">F</span> `&amp;` <span class="id">f</span> @^-1` <span class="id">A</span>)); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">seteqP</a></span>; <span class="id">split</span>=&gt; [|? [?] []//].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span>/= [<span class="id">Ex</span> <span class="id">Afgx</span>]; <span class="id">split</span> =&gt; //; <span class="id">split</span> =&gt; //; <span class="id">exact</span>: <span class="id">FgE</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">mg</span> =&gt; //; <span class="id">exact</span>: <span class="id">mf</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurableT_comp">measurableT_comp</a></span> (<span class="id">f</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T2">T2</a></span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T3">T3</a></span>) <span class="id">E</span> (<span class="id">g</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T1">T1</a></span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T2">T2</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id">f</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">E</span> <span class="id">g</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">E</span> (<span class="id">f</span> \<span class="id">o</span> <span class="id">g</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof65')">Proof.</span></div>
<div class="proofscript" id="proof65">
 <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurable_comp">measurable_comp</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eq_measurable_fun">eq_measurable_fun</a></span> <span class="id">D</span> (<span class="id">f</span> <span class="id">g</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T1">T1</a></span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T2">T2</a></span>) :<br/>
&nbsp;&nbsp;{<span class="kwd">in</span> <span class="id">D</span>, <span class="id">f</span> =1 <span class="id">g</span>} -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">D</span> <span class="id">f</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">D</span> <span class="id">g</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof66')">Proof.</span></div>
<div class="proofscript" id="proof66">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">fg</span> <span class="id">mf</span> <span class="id">mD</span> <span class="id">A</span> <span class="id">mA</span>; <span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> = <span class="id">D</span> `&amp;` <span class="id">f</span> @^-1` <span class="id">A</span>);<br/>
&nbsp;&nbsp;[<span class="id">exact</span>: <span class="id">mf</span>|<span class="id">exact</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#esym">esym</a></span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#eq_preimage">eq_preimage</a></span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurable_cst">measurable_cst</a></span> <span class="id">D</span> (<span class="id">r</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T2">T2</a></span>) : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">D</span> (<span class="id"><a href="mathcomp.classical.functions.html#cst">cst</a></span> <span class="id">r</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T1">T1</a></span> -&gt; <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof67')">Proof.</span></div>
<div class="proofscript" id="proof67">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">mD</span> /= <span class="id">Y</span> <span class="id">mY</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#preimage_cst">preimage_cst</a></span>; <span class="id">case</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span>; <span class="id">rewrite</span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#setIT">setIT</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#setI0">setI0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurable_fun_bigcup">measurable_fun_bigcup</a></span> (<span class="id">E</span> : (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T1">T1</a></span>)^<span class="id">nat</span>) (<span class="id">f</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T1">T1</a></span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T2">T2</a></span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (<span class="id">E</span> <span class="id">i</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> (\<span class="id">bigcup_i</span> <span class="id">E</span> <span class="id">i</span>) <span class="id">f</span> &lt;-&gt; (<span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> (<span class="id">E</span> <span class="id">i</span>) <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof68')">Proof.</span></div>
<div class="proofscript" id="proof68">
<span class="id">move</span>=&gt; <span class="id">mE</span>; <span class="id">split</span> =&gt; [|<span class="id">mf</span> /= <span class="id">_</span> <span class="id">A</span> <span class="id">mA</span>]; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setI_bigcupl">setI_bigcupl</a></span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#bigcup_measurable">bigcup_measurable</a></span> =&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">exact</span>: <span class="id">mf</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">mf</span> <span class="id">i</span> <span class="id">_</span> <span class="id">A</span> /<span class="id">mf</span> =&gt; /(<span class="id">_</span> (<span class="id"><a href="mathcomp.analysis.measure.html#bigcup_measurable">bigcup_measurable</a></span> (<span class="kwd">fun</span> <span class="id">k</span> <span class="id">_</span> =&gt; <span class="id">mE</span> <span class="id">k</span>))).<br/>
<span class="id">move</span>=&gt; /(<span class="id"><a href="mathcomp.analysis.measure.html#measurableI">measurableI</a></span> (<span class="id">E</span> <span class="id">i</span>))-/(<span class="id">_</span> (<span class="id">mE</span> <span class="id">i</span>)).<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setICA">setICA</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIA">setIA</a></span> (@<span class="id"><a href="mathcomp.classical.classical_sets.html#setIidr">setIidr</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">E</span> <span class="id">i</span>))//; <span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_sup">bigcup_sup</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurable_funU">measurable_funU</a></span> <span class="id">D</span> <span class="id">E</span> (<span class="id">f</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T1">T1</a></span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T2">T2</a></span>) : <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">D</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">E</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> (<span class="id">D</span> `|` <span class="id">E</span>) <span class="id">f</span> &lt;-&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">D</span> <span class="id">f</span> /\ <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">E</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof69')">Proof.</span></div>
<div class="proofscript" id="proof69">
<span class="id">move</span>=&gt; <span class="id">mD</span> <span class="id">mE</span>; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup2E">bigcup2E</a></span>; <span class="id">apply</span>: (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#iff_trans">iff_trans</a></span> (<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun_bigcup">measurable_fun_bigcup</a></span> <span class="id">_</span> <span class="id">_</span>)).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; [//|[//|//=]].<br/>
<span class="id">split</span>=&gt; [<span class="id">mf</span>|[<span class="id">Df</span> <span class="id">Dg</span>] [//|[//|/= <span class="id">_</span> <span class="id">_</span> <span class="id">Y</span> <span class="id">mY</span>]]]; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0I">set0I</a></span>.<br/>
<span class="kwd">by</span> <span class="id">split</span>; [<span class="id">exact</span>: (<span class="id">mf</span> 0%<span class="id">N</span>)|<span class="id">exact</span>: (<span class="id">mf</span> 1%<span class="id">N</span>)].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurable_funS">measurable_funS</a></span> <span class="id">E</span> <span class="id">D</span> (<span class="id">f</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T1">T1</a></span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T2">T2</a></span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">E</span> -&gt; <span class="id">D</span> `&lt;=` <span class="id">E</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">E</span> <span class="id">f</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">D</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof70')">Proof.</span></div>
<div class="proofscript" id="proof70">
<span class="id">move</span>=&gt; <span class="id">mE</span> <span class="id">DE</span> <span class="id">mf</span> <span class="id">mD</span>; <span class="id">have</span> <span class="id">mC</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (<span class="id">E</span> `\` <span class="id">D</span>) <span class="kwd">by</span> <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableD">measurableD</a></span>.<br/>
<span class="id">move</span>: (<span class="id">mD</span>).<br/>
<span class="id">have</span> := <span class="id"><a href="mathcomp.analysis.measure.html#measurable_funU">measurable_funU</a></span> <span class="id">f</span> <span class="id">mD</span> <span class="id">mC</span>.<br/>
<span class="id">suff</span> -&gt; : <span class="id">D</span> `|` (<span class="id">E</span> `\` <span class="id">D</span>) = <span class="id">E</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; [[]] //.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDUK">setDUK</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurable_funTS">measurable_funTS</a></span> <span class="id">D</span> (<span class="id">f</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T1">T1</a></span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T2">T2</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id">f</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">D</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof71')">Proof.</span></div>
<div class="proofscript" id="proof71">
 <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurable_funS">measurable_funS</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurable_restrict">measurable_restrict</a></span> <span class="id">D</span> <span class="id">E</span> (<span class="id">f</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T1">T1</a></span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T2">T2</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">D</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">E</span> -&gt; <span class="id">D</span> `&lt;=` <span class="id">E</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">D</span> <span class="id">f</span> &lt;-&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">E</span> (<span class="id">f</span> \<span class="id">_</span> <span class="id">D</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof72')">Proof.</span></div>
<div class="proofscript" id="proof72">
<span class="id">move</span>=&gt; <span class="id">mD</span> <span class="id">mE</span> <span class="id">DE</span>; <span class="id">split</span> =&gt; <span class="id">mf</span> <span class="id">_</span> /= <span class="id">X</span> <span class="id">mX</span>.<br/>
- <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#preimage_restrict">preimage_restrict</a></span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.measure.html#measurableI">measurableI</a></span> =&gt; //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.measure.html#measurableU">measurableU</a></span>/<span class="id">mf</span> =&gt; //; <span class="id">case</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">ifP</a></span> =&gt; // <span class="id">_</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableC">measurableC</a></span>.<br/>
- <span class="id">have</span> := <span class="id">mf</span> <span class="id">mE</span> <span class="id">_</span> <span class="id">mX</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#preimage_restrict">preimage_restrict</a></span>.<br/>
&nbsp;&nbsp;<span class="id">case</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">ifP</a></span> =&gt; <span class="id">ptX</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0U">set0U</a></span> =&gt; /(<span class="id"><a href="mathcomp.analysis.measure.html#measurableI">measurableI</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">mD</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#setIA">setIA</a></span> <span class="id">D</span>) (<span class="id"><a href="mathcomp.classical.classical_sets.html#setIidl">setIidl</a></span> <span class="id">DE</span>) <span class="id"><a href="mathcomp.classical.classical_sets.html#setIA">setIA</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIid">setIid</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setUIr">setUIr</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setvU">setvU</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setTI">setTI</a></span> =&gt; /(<span class="id"><a href="mathcomp.analysis.measure.html#measurableI">measurableI</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">mD</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIA">setIA</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#setIidl">setIidl</a></span> <span class="id">DE</span>) <span class="id"><a href="mathcomp.classical.classical_sets.html#setIUr">setIUr</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setICr">setICr</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0U">set0U</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurable_fun_if">measurable_fun_if</a></span> (<span class="id">g</span> <span class="id">h</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T1">T1</a></span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T2">T2</a></span>) <span class="id">D</span> (<span class="id">mD</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">D</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T1">T1</a></span> -&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">mf</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">D</span> <span class="id">f</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> (<span class="id">D</span> `&amp;` (<span class="id">f</span> @^-1` [<span class="id">set</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true</a></span>])) <span class="id">g</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> (<span class="id">D</span> `&amp;` (<span class="id">f</span> @^-1` [<span class="id">set</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false</a></span>])) <span class="id">h</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">D</span> (<span class="kwd">fun</span> <span class="id">t</span> =&gt; <span class="kwd">if</span> <span class="id">f</span> <span class="id">t</span> <span class="kwd">then</span> <span class="id">g</span> <span class="id">t</span> <span class="kwd">else</span> <span class="id">h</span> <span class="id">t</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof73')">Proof.</span></div>
<div class="proofscript" id="proof73">
<span class="id">move</span>=&gt; <span class="id">mx</span> <span class="id">my</span> /= <span class="id">_</span> <span class="id">B</span> <span class="id">mB</span>; <span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">_</span> @^-1` <span class="id">B</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id">f</span> @^-1` [<span class="id">set</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true</a></span>]) `&amp;` (<span class="id">g</span> @^-1` <span class="id">B</span>)) `|`<br/>
&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id">f</span> @^-1` [<span class="id">set</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false</a></span>]) `&amp;` (<span class="id">h</span> @^-1` <span class="id">B</span>))).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIUr">setIUr</a></span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableU">measurableU</a></span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIA">setIA</a></span>; <span class="id">apply</span>: <span class="id">mx</span> =&gt; //; <span class="id">exact</span>: <span class="id">mf</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIA">setIA</a></span>; <span class="id">apply</span>: <span class="id">my</span> =&gt; //; <span class="id">exact</span>: <span class="id">mf</span>.<br/>
<span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">seteqP</a></span>; <span class="id">split</span>=&gt; [<span class="id">t</span> /=| <span class="id">t</span> /= [] [] -&gt;//].<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span> =&gt; <span class="id">ft</span>; [<span class="id">left</span>|<span class="id">right</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurable_fun_ifT">measurable_fun_ifT</a></span> (<span class="id">g</span> <span class="id">h</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T1">T1</a></span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T2">T2</a></span>) (<span class="id">f</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T1">T1</a></span> -&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mf</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id">f</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id">g</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id">h</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> (<span class="kwd">fun</span> <span class="id">t</span> =&gt; <span class="kwd">if</span> <span class="id">f</span> <span class="id">t</span> <span class="kwd">then</span> <span class="id">g</span> <span class="id">t</span> <span class="kwd">else</span> <span class="id">h</span> <span class="id">t</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof74')">Proof.</span></div>
<div class="proofscript" id="proof74">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">mx</span> <span class="id">my</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun_if">measurable_fun_if</a></span> =&gt; //;<br/>
&nbsp;&nbsp;[<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurable_funS">measurable_funS</a></span> <span class="id">mx</span>|<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurable_funS">measurable_funS</a></span> <span class="id">my</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="measurable_fun_bool">measurable_fun_bool</a></span> <span class="id">D</span> (<span class="id">f</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun.T1">T1</a></span> -&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#bool">bool</a></span>) <span class="id">b</span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> (<span class="id">f</span> @^-1` [<span class="id">set</span> <span class="id">b</span>]) -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">D</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof75')">Proof.</span></div>
<div class="proofscript" id="proof75">
<span class="id">have</span> <span class="id">FNT</span> : [<span class="id">set</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">false</a></span>] = [<span class="id">set</span>~ <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true</a></span>] <span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">seteqP</a></span>; <span class="id">split</span> =&gt; -[]//=.<br/>
<span class="id">wlog</span> {<span class="id">b</span>}-&gt; : <span class="id">b</span> / <span class="id">b</span> = <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">case</span>: <span class="id">b</span> =&gt; [|<span class="id">h</span>]; <span class="id">first</span> <span class="id">exact</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">FNT</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#preimage_setC">preimage_setC</a></span> =&gt; /<span class="id"><a href="mathcomp.analysis.measure.html#measurableC">measurableC</a></span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setCK">setCK</a></span>; <span class="id">exact</span>: <span class="id">h</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">mfT</span> <span class="id">mD</span> /= <span class="id">Y</span>; <span class="id">have</span> := @<span class="id"><a href="mathcomp.classical.classical_sets.html#subsetT">subsetT</a></span> <span class="id">_</span> <span class="id">Y</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT_bool">setT_bool</a></span> =&gt; <span class="id">YT</span>.<br/>
<span class="id">have</span> [-&gt; <span class="id">_</span>|-&gt; <span class="id">_</span>|-&gt; <span class="id">_</span> |-&gt; <span class="id">_</span>] := <span class="id"><a href="mathcomp.classical.classical_sets.html#subset_set2">subset_set2</a></span> <span class="id">YT</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#preimage0">preimage0</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#setI0">setI0</a></span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableI">measurableI</a></span> =&gt; //; <span class="id">exact</span>: <span class="id">mfT</span>.<br/>
- <span class="id">rewrite</span> -[<span class="id">X</span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">X</span>]<span class="id"><a href="mathcomp.classical.classical_sets.html#setCK">setCK</a></span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableC">measurableC</a></span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setCI">setCI</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableU">measurableU</a></span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableC">measurableC</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">FNT</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#preimage_setC">preimage_setC</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setCK">setCK</a></span>; <span class="id">exact</span>: <span class="id">mfT</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setT_bool">setT_bool</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#preimage_setT">preimage_setT</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIT">setIT</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">_</span> (<span class="kwd">fun</span>=&gt; <span class="id">_</span>)) =&gt;<br/>
&nbsp;&nbsp;<span class="id">solve</span> [<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurable_cst">measurable_cst</a></span>] : <span class="id">core</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">_</span> (<span class="id"><a href="mathcomp.classical.functions.html#cst">cst</a></span> <span class="id">_</span>)) =&gt;<br/>
&nbsp;&nbsp;<span class="id">solve</span> [<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurable_cst">measurable_cst</a></span>] : <span class="id">core</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">measurable_fun</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#id">id</a></span>) =&gt;<br/>
&nbsp;&nbsp;<span class="id">solve</span> [<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurable_id">measurable_id</a></span>] : <span class="id">core</span>.<br/>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.analysis.measure.html#eq_measurable_fun">eq_measurable_fun</a></span> {<span class="id">d1</span> <span class="id">d2</span> <span class="id">T1</span> <span class="id">T2</span> <span class="id">D</span>} <span class="id">f</span> {<span class="id">g</span>}.<br/>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun_bool">measurable_fun_bool</a></span> {<span class="id">d1</span> <span class="id">T1</span> <span class="id">D</span> <span class="id">f</span>} <span class="id">b</span>.<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.2", <span class="id">note</span>="<span class="id">renamed</span> `<span class="id">eq_measurable_fun</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id"><a name="measurable_fun_ext">measurable_fun_ext</a></span> := <span class="id"><a href="mathcomp.analysis.measure.html#eq_measurable_fun">eq_measurable_fun</a></span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id">renamed</span> `<span class="id">measurable_id</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">measurable_fun_id</span> := <span class="id">measurable_id</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id">renamed</span> `<span class="id">measurable_cst</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">measurable_fun_cst</span> := <span class="id">measurable_cst</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id">renamed</span> `<span class="id">measurable_comp</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">measurable_fun_comp</span> := <span class="id">measurable_comp</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id">renamed</span> `<span class="id">measurableT_comp</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">measurable_funT_comp</span> := <span class="id">measurableT_comp</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id">measurability</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">preimage_class</span> (<span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>) (<span class="id">D</span> : <span class="id">set</span> <span class="id">aT</span>) (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">G</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">rT</span>)) : <span class="id">set</span> (<span class="id">set</span> <span class="id">aT</span>) :=<br/>
&nbsp;&nbsp;[<span class="id">set</span> <span class="id">D</span> `&amp;` <span class="id">f</span> @^-1` <span class="id">B</span> | <span class="id">B</span> <span class="kwd">in</span> <span class="id">G</span>].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_class_measurable_fun</span> <span class="id">d</span> (<span class="id">aT</span> : <span class="id">pointedType</span>) (<span class="id">rT</span> : <span class="id">measurableType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;(<span class="id">D</span> : <span class="id">set</span> <span class="id">aT</span>) (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) :<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> (<span class="id">D</span> : <span class="id">set</span> (<span class="id">salgebraType</span> (<span class="id">preimage_class</span> <span class="id">D</span> <span class="id">f</span> <span class="id">measurable</span>))) <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof76')">Proof.</span></div>
<div class="proofscript" id="proof76">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">mD</span> <span class="id">A</span> <span class="id">mA</span>; <span class="id">apply</span>: <span class="id">sub_sigma_algebra</span>; <span class="kwd">exists</span> <span class="id">A</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigma_algebra_preimage_class</span> (<span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>) (<span class="id">G</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">rT</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">D</span> : <span class="id">set</span> <span class="id">aT</span>) (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) :<br/>
&nbsp;&nbsp;<span class="id">sigma_algebra</span> <span class="id">setT</span> <span class="id">G</span> -&gt; <span class="id">sigma_algebra</span> <span class="id">D</span> (<span class="id">preimage_class</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#preimage_set0">D</a></span> <span class="id">f</span> <span class="id">G</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof77')">Proof.</span></div>
<div class="proofscript" id="proof77">
<span class="id">case</span>=&gt; <span class="id">h0</span> <span class="id">hC</span> <span class="id">hU</span>; <span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">set0</span> =&gt; //; <span class="id">rewrite</span> <span class="id">preimage_set0</span> <span class="id">setI0</span>.<br/>
- <span class="id">move</span>=&gt; <span class="id">A</span>; <span class="id">rewrite</span> /<span class="id">preimage_class</span> /= =&gt; -[<span class="id">B</span> <span class="id">mB</span> &lt;-{<span class="id">A</span>}].<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> (~` <span class="id">B</span>); <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setTD</span>; <span class="id">exact</span>: <span class="id">hC</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">x</span>; <span class="id">split</span>=&gt; [[<span class="id">Dx</span> <span class="id">Bfx</span>]|[<span class="id">Dx</span>]]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">split</span> =&gt; // -[] <span class="id">_</span> /<span class="id">Bfx</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">not_andP</span>[].<br/>
- <span class="id">move</span>=&gt; <span class="id">F</span>; <span class="id">rewrite</span> /<span class="id">preimage_class</span> /= =&gt; <span class="id">mF</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> {}<span class="id">mF</span> <span class="id">n</span> : <span class="kwd">exists</span> <span class="id">x</span>, <span class="id">G</span> <span class="id">x</span> /\ <span class="id">D</span> `&amp;` <span class="id">f</span> @^-1` <span class="id">x</span> = <span class="id">F</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">have</span> := <span class="id">mF</span> <span class="id">n</span> =&gt; -[<span class="id">B</span> <span class="id">mB</span> &lt;-]; <span class="kwd">exists</span> <span class="id">B</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">F</span>' <span class="id">mF</span>'] := @<span class="id">choice</span> <span class="id">_</span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">x</span> <span class="id">y</span> =&gt; <span class="id">G</span> <span class="id">y</span> /\ <span class="id">D</span> `&amp;` <span class="id">f</span> @^-1` <span class="id">y</span> = <span class="id">F</span> <span class="id">x</span>) <span class="id">mF</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> (\<span class="id">bigcup_k</span> (<span class="id">F</span>' <span class="id">k</span>)); <span class="id">first</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">hU</span> =&gt; <span class="id">n</span>; <span class="id">exact</span>: (<span class="id">mF</span>' <span class="id">n</span>).1.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">preimage_bigcup</span> <span class="id">setI_bigcupr</span>; <span class="id">apply</span>: <span class="id">eq_bigcupr</span> =&gt; <span class="id">i</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>: (<span class="id">mF</span>' <span class="id">i</span>).2.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">image_class</span> (<span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>) (<span class="id">D</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">G</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">aT</span>)) : <span class="id">set</span> (<span class="id">set</span> <span class="id">rT</span>) :=<br/>
&nbsp;&nbsp;[<span class="id">set</span> <span class="id">B</span> : <span class="id">set</span> <span class="id">rT</span> | <span class="id"><a href="mathcomp.classical.classical_sets.html#set">G</a></span> (<span class="id">D</span> `&amp;` <span class="id">f</span> @^-1` <span class="id">B</span>)].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigma_algebra_image_class</span> (<span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>) (<span class="id"><a href="mathcomp.analysis.measure.html#sigma_algebra">D</a></span> : <span class="id">set</span> <span class="id">aT</span>) (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">G</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">aT</span>)) :<br/>
&nbsp;&nbsp;<span class="id">sigma_algebra</span> <span class="id">D</span> <span class="id">G</span> -&gt; <span class="id">sigma_algebra</span> <span class="id">setT</span> (<span class="id">image_class</span> <span class="id">D</span> <span class="id">f</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#preimage_set0">G</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof78')">Proof.</span></div>
<div class="proofscript" id="proof78">
<span class="id">move</span>=&gt; [<span class="id">G0</span> <span class="id">GC</span> <span class="id">GU</span>]; <span class="id">split</span>; <span class="id">rewrite</span> /<span class="id">image_class</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> /= <span class="id">preimage_set0</span> <span class="id">setI0</span>.<br/>
- <span class="id">move</span>=&gt; <span class="id">A</span> /= <span class="id">GfAD</span>; <span class="id">rewrite</span> <span class="id">setTD</span> -<span class="id">preimage_setC</span> -<span class="id">setDE</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">_</span> `\` <span class="id">_</span> = <span class="id">D</span> `\` (<span class="id">D</span> `&amp;` <span class="id">f</span> @^-1` <span class="id">A</span>)); <span class="id">first</span> <span class="id">exact</span>: <span class="id">GC</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">x</span>; <span class="id">split</span>=&gt; [[<span class="id">Dx</span> <span class="id">fAx</span>]|[<span class="id">Dx</span> <span class="id">fADx</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">split</span> =&gt; // -[] <span class="id">_</span> /<span class="id">fAx</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">split</span> =&gt; //; <span class="id">exact</span>: <span class="id">contra_not</span> <span class="id">fADx</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">F</span> /= <span class="id">mF</span>; <span class="id">rewrite</span> <span class="id">preimage_bigcup</span> <span class="id">setI_bigcupr</span>; <span class="id">exact</span>: <span class="id">GU</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigma_algebra_preimage_classE</span> <span class="id">aT</span> (<span class="id">rT</span> : <span class="id">pointedType</span>) (<span class="id">D</span> : <span class="id">set</span> <span class="id">aT</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) (<span class="id">G</span>' : <span class="id">set</span> (<span class="id">set</span> <span class="id">rT</span>)) :<br/>
&nbsp;&nbsp;&lt;&lt;<span class="id">s</span> <span class="id">D</span>, <span class="id">preimage_class</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#eqEsubset">D</a></span> <span class="id">f</span> <span class="id">G</span>' &gt;&gt; =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">preimage_class</span> <span class="id">D</span> <span class="id">f</span> (<span class="id">G</span>'.-<span class="id">sigma</span>.-<span class="id">measurable</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof79')">Proof.</span></div>
<div class="proofscript" id="proof79">
<span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">mG</span> : <span class="id">sigma_algebra</span> <span class="id">D</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">preimage_class</span> <span class="id">D</span> <span class="id">f</span> (<span class="id">G</span>'.-<span class="id">sigma</span>.-<span class="id">measurable</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">sigma_algebra_preimage_class</span>/<span class="id">sigma_algebra_measurable</span>.<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#preimage_class">have</a></span> <span class="id">subset_preimage</span> : <span class="id">preimage_class</span> <span class="id">D</span> <span class="id">f</span> <span class="id">G</span>' `&lt;=`<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">preimage_class</span> <span class="id">D</span> <span class="id">f</span> (<span class="id">G</span>'.-<span class="id">sigma</span>.-<span class="id">measurable</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#smallest_sub">move</a></span>=&gt; <span class="id">A</span> [<span class="id">B</span> <span class="id">CCB</span> &lt;-{<span class="id">A</span>}]; <span class="kwd">exists</span> <span class="id">B</span> =&gt; //; <span class="id"><a href="mathcomp.analysis.measure.html#preimage_class">apply</a></span>: <span class="id">sub_sigma_algebra</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">smallest_sub</span>.<br/>
<span class="id">have</span> <span class="id">G</span>'<span class="id">pre</span> <span class="id">A</span>' : <span class="id">G</span>' <span class="id">A</span>' -&gt; (<span class="id">preimage_class</span> <span class="id">D</span> <span class="id">f</span> <span class="id">G</span>') (<span class="id">D</span> `&amp;` <span class="id">f</span> @^-1` <span class="id">A</span>').<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; ?; <span class="kwd">exists</span> <span class="id">A</span>'.<br/>
<span class="id">pose</span> <span class="id"><a href="mathcomp.analysis.measure.html#image_class">I</a></span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">aT</span>) := &lt;&lt;<span class="id">s</span> <span class="id">D</span>, <span class="id">preimage_class</span> <span class="id">D</span> <span class="id">f</span> <span class="id">G</span>' &gt;&gt;.<br/>
<span class="id">have</span> <span class="id"><a href="mathcomp.analysis.measure.html#sub_sigma_algebra">G</a></span>'<span class="id">sfun</span> : <span class="id">G</span>' `&lt;=` <span class="id">image_class</span> <span class="id">D</span> <span class="id">f</span> <span class="id">I</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span>' /<span class="id">G</span>'<span class="id">pre</span>[<span class="id">B</span> <span class="id">G</span>'<span class="id">B</span> <span class="id">h</span>]; <span class="id">apply</span>: <span class="id">sub_sigma_algebra</span>; <span class="kwd">exists</span> <span class="id">B</span>.<br/>
<span class="id">have</span> <span class="id">sG</span>'<span class="id">sfun</span> : &lt;&lt;<span class="id">s</span> <span class="id">G</span>' &gt;&gt; `&lt;=` <span class="id">image_class</span> <span class="id">D</span> <span class="id">f</span> <span class="id"><a href="mathcomp.analysis.measure.html#smallest_sigma_algebra">I</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">smallest_sub</span> =&gt; //; <span class="id">apply</span>: <span class="id">sigma_algebra_image_class</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id"><a name="measurability">smallest_sigma_algebra</a></span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">B</span> <span class="id">mB</span> &lt;-]; <span class="id">exact</span>: <span class="id">sG</span>'<span class="id">sfun</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurability</span> <span class="id">d</span> <span class="id">d</span>' (<span class="id">aT</span> : <span class="id">measurableType</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">d</a></span>) (<span class="id">rT</span> : <span class="id">measurableType</span> <span class="id">d</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">D</span> : <span class="id">set</span> <span class="id">aT</span>) (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">G</span>' : <span class="id">set</span> (<span class="id">set</span> <span class="id">rT</span>)) :<br/>
&nbsp;&nbsp;@<span class="id">measurable</span> <span class="id">_</span> <span class="id">rT</span> = &lt;&lt;<span class="id">s</span> <span class="id">G</span>' &gt;&gt; -&gt; <span class="id">preimage_class</span> <span class="id">D</span> <span class="id">f</span> <span class="id">G</span>' `&lt;=` @<span class="id">measurable</span> <span class="id">_</span> <span class="id">aT</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">D</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof80')">Proof.</span></div>
<div class="proofscript" id="proof80">
<span class="id">move</span>=&gt; <span class="id">sG_rT</span> <span class="id">fG_aT</span> <span class="id">mD</span>.<br/>
<span class="id">suff</span> <span class="id">h</span> : <span class="id">preimage_class</span> <span class="id">D</span> <span class="id">f</span> (@<span class="id">measurable</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.measure.html#preimage_class">rT</a></span>) `&lt;=` @<span class="id">measurable</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable">_</a></span> <span class="id">aT</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">mA</span>; <span class="id">apply</span>: <span class="id">h</span>; <span class="kwd">exists</span> <span class="id">A</span>.<br/>
<span class="id">have</span> -&gt; : <span class="id">preimage_class</span> <span class="id">D</span> <span class="id">f</span> (@<span class="id">measurable</span> <span class="id">_</span> <span class="id">rT</span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">s</span> <span class="id">D</span> , (<span class="id">preimage_class</span> <span class="id">D</span> <span class="id">f</span> <span class="id">G</span>')&gt;&gt;.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> [<span class="kwd">in</span> <span class="id">LHS</span>]<span class="id">sG_rT</span> [<span class="kwd">in</span> <span class="id">RHS</span>]<span class="id">sigma_algebra_preimage_classE</span>.<br/>
<span class="id">apply</span>: <span class="id">smallest_sub</span> =&gt; //; <span class="id"><a href="mathcomp.analysis.measure.html#bigcupT_measurable">split</a></span> =&gt; //.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">mA</span>; <span class="id">exact</span>: <span class="id">measurableD</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">F</span> <span class="id">h</span>; <span class="id">exact</span>: <span class="id">bigcupT_measurable</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">measurability</span>.<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">additivity</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">R</span> : <span class="id">numFieldType</span>) (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">semi_additive2</span> := <span class="kwd">forall</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">A</a></span> <span class="id">B</span>, <span class="id">measurable</span> <span class="id">A</span> -&gt; <span class="id">measurable</span> <span class="id">B</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">measurable</span> (<span class="id">A</span> `|` <span class="id">B</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">A</span> `&amp;` <span class="id">B</span> = <span class="id">set0</span> -&gt; <span class="id">mu</span> (<span class="id">A</span> `|` <span class="id">B</span>) = <span class="id">mu</span> <span class="id">A</span> + <span class="id">mu</span> <span class="id">B</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">semi_additive</span> := <span class="kwd">forall</span> <span class="id">F</span> <span class="id">n</span>,<br/>
&nbsp;(<span class="kwd">forall</span> <span class="id">k</span> : <span class="id">nat</span>, <span class="id">measurable</span> (<span class="id">F</span> <span class="id">k</span>)) -&gt; <span class="id">trivIset</span> <span class="id">setT</span> <span class="id">F</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">measurable</span> (\<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">k</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> (\<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">i</span>) = \<span class="id">sum_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">mu</span> (<span class="id">F</span> <span class="id">i</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">semi_sigma_additive</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F</span>, (<span class="kwd">forall</span> <span class="id">i</span> : <span class="id">nat</span>, <span class="id">measurable</span> (<span class="id">F</span> <span class="id">i</span>)) -&gt; <span class="id">trivIset</span> <span class="id">setT</span> <span class="id">F</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">measurable</span> (\<span class="id">bigcup_n</span> <span class="id">F</span> <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(0 &lt;= <span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">mu</span> (<span class="id">F</span> <span class="id">i</span>)) --&gt; <span class="id">mu</span> (\<span class="id">bigcup_n</span> <span class="id">F</span> <span class="id">n</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">additive2</span> := <span class="kwd">forall</span> <span class="id">A</span> <span class="id">B</span>, <span class="id">measurable</span> <span class="id">A</span> -&gt; <span class="id">measurable</span> <span class="id">B</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">A</span> `&amp;` <span class="id">B</span> = <span class="id">set0</span> -&gt; <span class="id">mu</span> (<span class="id">A</span> `|` <span class="id">B</span>) = <span class="id">mu</span> <span class="id">A</span> + <span class="id">mu</span> <span class="id">B</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">additive</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F</span>, (<span class="kwd">forall</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">i</a></span> : <span class="id">nat</span>, <span class="id">measurable</span> (<span class="id">F</span> <span class="id">i</span>)) -&gt; <span class="id">trivIset</span> <span class="id">setT</span> <span class="id">F</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">mu</span> (\<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">i</span>) = \<span class="id">sum_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">mu</span> (<span class="id">F</span> <span class="id">i</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">sigma_additive</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">F</span>, (<span class="kwd">forall</span> <span class="id">i</span> : <span class="id"><a href="mathcomp.analysis.measure.html#additivity.mu">nat</a></span>, <span class="id">measurable</span> (<span class="id">F</span> <span class="id">i</span>)) -&gt; <span class="id">trivIset</span> <span class="id">setT</span> <span class="id">F</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(0 &lt;= <span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">mu</span> (<span class="id">F</span> <span class="id">i</span>)) --&gt; <span class="id">mu</span> (\<span class="id">bigcup_n</span> <span class="id">F</span> <span class="id">n</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">sub_additive</span> := <span class="kwd">forall</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">F</span> : <span class="id">nat</span> -&gt; <span class="id">set</span> <span class="id">T</span>) <span class="id">n</span>,<br/>
&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, `<span class="id">I_n</span> <span class="id">k</span> -&gt; <span class="id">measurable</span> (<span class="id">F</span> <span class="id">k</span>)) -&gt; <span class="id">measurable</span> <span class="id">A</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">A</span> `&lt;=` \<span class="id"><a name="sigma_sub_additive">big</a></span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">k</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> <span class="id">A</span> &lt;= \<span class="id">sum_</span>(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">k</a></span> &lt; <span class="id">n</span>) <span class="id"><a href="mathcomp.classical.classical_sets.html#set">mu</a></span> (<span class="id"><a href="mathcomp.analysis.measure.html#additivity.T">F</a></span> <span class="id">k</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">sigma_sub_additive</span> := <span class="kwd">forall</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">F</span> : <span class="id">nat</span> -&gt; <span class="id">set</span> <span class="id">T</span>),<br/>
&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">measurable</span> (<span class="id">F</span> <span class="id">n</span>)) -&gt; <span class="id">measurable</span> <span class="id">A</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">A</span> `&lt;=` \<span class="id">bigcup_n</span> <span class="id">F</span> <span class="id">n</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> <span class="id">A</span> &lt;= \<span class="id">sum_</span>(<span class="id">n</span> &lt;<span class="id">oo</span>) <span class="id">mu</span> (<span class="id">F</span> <span class="id">n</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">semi_additiveW</span> : <span class="id">mu</span> <span class="id">set0</span> = 0 -&gt; <span class="id">semi_additive</span> -&gt; <span class="id">semi_additive2</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof81')">Proof.</span></div>
<div class="proofscript" id="proof81">
<span class="id">move</span>=&gt; <span class="id">mu0</span> <span class="id">amx</span> <span class="id">A</span> <span class="id">B</span> <span class="id">mA</span> <span class="id">mB</span> + <span class="id">AB</span>; <span class="id">rewrite</span> -<span class="id">bigcup2inE</span> <span class="id">bigcup_mkord</span>.<br/>
<span class="id">move</span>=&gt; /(<span class="id">amx</span> (<span class="id">bigcup2</span> <span class="id">A</span> <span class="id">B</span>))-&gt;.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> !(<span class="id">big_ord_recl</span>, <span class="id">big_ord0</span>)/= <span class="id">adde0</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; [|[|[]]]//=.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; [|[|<span class="id">i</span>]] [|[|<span class="id">j</span>]]/= <span class="id">_</span> <span class="id">_</span>; <span class="id">rewrite</span> ?(<span class="id">AB</span>, <span class="id">setI0</span>, <span class="id">set0I</span>, <span class="id">setIC</span>) =&gt; -[].<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">additivity</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">ring_additivity</a></span>.<br/>
<span class="kwd">Context</span> <span class="id"><a name="semi_additiveE">d</a></span> (<span class="id">R</span> : <span class="id">numFieldType</span>) (<span class="id">T</span> : <span class="id">ringOfSetsType</span> <span class="id">d</span>) (<span class="id"><a href="mathcomp.analysis.measure.html#ring_additivity.mu">mu</a></span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.classical.boolp.html#propeqE">R</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">semi_additiveE</span> : <span class="id">semi_additive</span> <span class="id">mu</span> = <span class="id">additive</span> <span class="id">mu</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof82')">Proof.</span></div>
<div class="proofscript" id="proof82">
<span class="id">rewrite</span> <span class="id">propeqE</span>; <span class="id">split</span>=&gt; [<span class="id">sa</span> <span class="id">A</span> <span class="id">mA</span> <span class="id">tA</span> <span class="id">n</span>|+ <span class="id">A</span> <span class="id">m</span> <span class="id">mA</span> <span class="id">tA</span> <span class="id">UAm</span>]; <span class="id">last</span> <span class="kwd">by</span> <span class="id">move</span>-&gt;.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">sa</span> //; <span class="id">exact</span>: <span class="id">bigsetU_measurable</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">semi_additive2E</span> : <span class="id">semi_additive2</span> <span class="id">mu</span> = <span class="id">additive2</span> <span class="id">mu</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof83')">Proof.</span></div>
<div class="proofscript" id="proof83">
<span class="id">rewrite</span> <span class="id">propeqE</span>; <span class="id">split</span>=&gt; [<span class="id">amu</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurableU">A</a></span> <span class="id">B</span> ? ? ?|<span class="id">amu</span> <span class="id">A</span> <span class="id">B</span> ? ? <span class="id">_</span> ?]; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">amu</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">amu</span> //; <span class="id">exact</span>: <span class="id">measurableU</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">additive2P</span> : <span class="id">mu</span> <span class="id"><a href="mathcomp.analysis.measure.html#semi_additive2E">set0</a></span> = 0 -&gt; <span class="id">semi_additive</span> <span class="id">mu</span> &lt;-&gt; <span class="id">additive2</span> <span class="id">mu</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof84')">Proof.</span></div>
<div class="proofscript" id="proof84">
<span class="id">move</span>=&gt; <span class="id"><a href="mathcomp.analysis.measure.html#semi_additiveE">mu0</a></span>; <span class="id">rewrite</span> -<span class="id">semi_additive2E</span>; <span class="id">split</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">semi_additiveW</span>.<br/>
<span class="id">rewrite</span> <span class="id">semi_additiveE</span> <span class="id">semi_additive2E</span> =&gt; <span class="id">muU</span> <span class="id">A</span> <span class="id">Am</span> <span class="id">Atriv</span> <span class="id">n</span>.<br/>
<span class="id">elim</span>: <span class="id">n</span> =&gt; [|<span class="id">n</span> <span class="id">IHn</span>]; <span class="id">rewrite</span> ?(<span class="id">big_ord_recr</span>, <span class="id">big_ord0</span>) ?<span class="id">mu0</span>//=.<br/>
<span class="id">rewrite</span> <span class="id">muU</span> ?<span class="id">IHn</span>//=; <span class="id">first</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigsetU_measurable</span>.<br/>
<span class="id">rewrite</span> -<span class="id">bigcup_mkord</span> -<span class="id">subset0</span> =&gt; <span class="id"><a href="mathcomp.analysis.measure.html#ring_additivity">x</a></span> [[/= <span class="id">m</span> + <span class="id">Amx</span>] <span class="id">Anx</span>].<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">Atriv</span> <span class="id">m</span> <span class="id">n</span>) ?<span class="id">ltnn</span>//=; <span class="kwd">exists</span> <span class="id">x</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">ring_additivity</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">semi_sigma_additive_is_additive</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">mu</span> <span class="id">set0</span> = 0 -&gt; <span class="id">semi_sigma_additive</span> <span class="id">mu</span> -&gt; <span class="id">semi_additive</span> <span class="id">mu</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof85')">Proof.</span></div>
<div class="proofscript" id="proof85">
<span class="id">move</span>=&gt; <span class="id">mu0</span> <span class="id">samu</span> <span class="id">A</span> <span class="id">n</span> <span class="id">Am</span> <span class="id">Atriv</span> <span class="id">UAm</span>.<br/>
<span class="id">have</span> := <span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup0">samu</a></span> (<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="kwd">if</span> (<span class="id">i</span> &lt; <span class="id">n</span>)%<span class="id">N</span> <span class="kwd">then</span> <span class="id">A</span> <span class="id">i</span> <span class="kwd">else</span> <span class="id">set0</span>).<br/>
<span class="id">rewrite</span> (<span class="id">bigcup_splitn</span> <span class="id">n</span>) <span class="id">bigcup0</span> ?<span class="id">setU0</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">rewrite</span> -<span class="id">ltn_subRL</span> <span class="id">subnn</span>.<br/>
<span class="id">under</span> <span class="id">eq_bigr</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">ltn_ord</span>.<br/>
<span class="id">move</span>=&gt; /(<span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">UAm</span>)/(@<span class="id">cvg_lim</span> <span class="id">_</span>) &lt;-//; <span class="id">last</span> 2 <span class="id">first</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span>; <span class="id">case</span>: <span class="id">ifP</span>.<br/>
- <span class="id">move</span>=&gt; <span class="id">i</span> <span class="id">j</span> <span class="id">_</span> <span class="id">_</span>; <span class="id">do</span> 2![<span class="id">case</span>: <span class="id">ifP</span>] =&gt; ? ?; <span class="id">do</span> ?<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">setI0</span>, <span class="id">set0I</span>) =&gt; -[].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">Atriv</span>; <span class="id">apply</span>.<br/>
<span class="id">apply</span>: <span class="id">lim_near_cst</span> =&gt; //=; <span class="id">near</span>=&gt; <span class="id">i</span>.<br/>
<span class="id">have</span> /<span class="id">subnKC</span>&lt;- : (<span class="id">n</span> &lt;= <span class="id">i</span>)%<span class="id">N</span> <span class="kwd">by</span> <span class="id">near</span>: <span class="id">i</span>; <span class="kwd">exists</span> <span class="id">n</span>.<br/>
<span class="id">transitivity</span> (\<span class="id">sum_</span>(<span class="id">j</span> &lt; <span class="id">n</span> + (<span class="id">i</span> - <span class="id">n</span>)) <span class="id">mu</span> (<span class="kwd">if</span> (<span class="id">j</span> &lt; <span class="id">n</span>)%<span class="id">N</span> <span class="kwd">then</span> <span class="id">A</span> <span class="id">j</span> <span class="kwd">else</span> <span class="id">set0</span>)).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big_mkord</span>.<br/>
<span class="id">rewrite</span> <span class="id">big_split_ord</span>/=; <span class="id">under</span> <span class="id">eq_bigr</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">ltn_ord</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span> + <span class="id">X</span>]<span class="id">big1</span> ?<span class="id">adde0</span>// =&gt; ?; <span class="id">rewrite</span> -<span class="id">ltn_subRL</span> <span class="id">subnn</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">semi_sigma_additiveE</span><br/>
&nbsp;&nbsp;(<span class="id">R</span> : <span class="id">numFieldType</span>) <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">semi_sigma_additive</span> <span class="id">mu</span> = <span class="id">sigma_additive</span> <span class="id">mu</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof86')">Proof.</span></div>
<div class="proofscript" id="proof86">
<span class="id">rewrite</span> <span class="id">propeqE</span>; <span class="id">split</span>=&gt; [<span class="id">amu</span> <span class="id">A</span> <span class="id">mA</span> <span class="id">tA</span>|<span class="id">amu</span> <span class="id">A</span> <span class="id">mA</span> <span class="id">tA</span> <span class="id">mbigcupA</span>]; <span class="id">last</span> <span class="id">exact</span>: <span class="id">amu</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">amu</span> =&gt; //; <span class="id">exact</span>: <span class="id">bigcupT_measurable</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigma_additive_is_additive</span><br/>
&nbsp;&nbsp;(<span class="id">R</span> : <span class="id">realFieldType</span>) <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">mu</span> <span class="id">set0</span> = 0 -&gt; <span class="id">sigma_additive</span> <span class="id">mu</span> -&gt; <span class="id">additive</span> <span class="id">mu</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof87')">Proof.</span></div>
<div class="proofscript" id="proof87">
<span class="id">move</span>=&gt; <span class="id">mu0</span>; <span class="id">rewrite</span> -<span class="id">semi_sigma_additiveE</span> -<span class="id">semi_additiveE</span>.<br/>
<span class="id">exact</span>: <span class="id">semi_sigma_additive_is_additive</span>.<br/>
Qed.</div>
<br/>
<span class="id">HB.mixin</span> <span class="kwd">Record</span> <span class="id">isContent</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">numFieldType</span>) (<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) := {<br/>
&nbsp;&nbsp;<span class="id">measure_ge0</span> : <span class="kwd">forall</span> <span class="id">x</span>, 0 &lt;= <span class="id">mu</span> <span class="id">x</span> ;<br/>
&nbsp;&nbsp;<span class="id">measure_semi_additive</span> : <span class="id">semi_additive</span> <span class="id">mu</span> }.<br/>
<br/>
<span class="id">HB.structure</span> <span class="kwd">Definition</span> <span class="id">Content</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">numFieldType</span>) := {<br/>
&nbsp;&nbsp;<span class="id">mu</span> &amp; <span class="id">isContent</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id">mu</span> }.<br/>
<br/>
<span class="kwd">Notation</span> <span class="id">content</span> := <span class="id">Content.type</span>.<br/>
<span class="kwd">Notation</span> "{ '<span class="id">content</span>' '<span class="id">set</span>' <span class="id">T</span> '-&gt;' '\<span class="id">bar</span>' <span class="id">R</span> }" :=<br/>
&nbsp;&nbsp;(<span class="id">content</span> <span class="id">T</span> <span class="id">R</span>) (<span class="kwd">at</span> <span class="id">level</span> 36, <span class="id">T</span>, <span class="id">R</span> <span class="kwd">at</span> <span class="id">next</span> <span class="id">level</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "{ '<span class="id">content</span>'  '<span class="id">set</span>'  <span class="id">T</span>  '-&gt;'  '\<span class="id">bar</span>'  <span class="id">R</span> }") : <span class="id">ring_scope</span>.<br/>
<br/>
<span class="kwd">Arguments</span> <span class="id">measure_ge0</span> {<span class="id">d</span> <span class="id">T</span> <span class="id">R</span>} <span class="id">_</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">content_signed</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">numFieldType</span>).<br/>
<br/>
<span class="kwd">Variable</span> <span class="id">mu</span> : {<span class="id">content</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">content_snum_subproof</span> <span class="id">S</span> : <span class="id">Signed.spec</span> 0 ?=0 &gt;=0 (<span class="id">mu</span> <span class="id">S</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof88')">Proof.</span></div>
<div class="proofscript" id="proof88">
 <span class="id">exact</span>: <span class="id">measure_ge0</span>. Qed.</div>
<br/>
<span class="kwd">Canonical</span> <span class="id">content_snum</span> <span class="id">S</span> := <span class="id">Signed.mk</span> (<span class="id">content_snum_subproof</span> <span class="id">S</span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id">content_signed</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">content_on_semiring_of_sets</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">numFieldType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu</span> : {<span class="id">content</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measure0</span> : <span class="id"><a href="mathcomp.analysis.measure.html#content_on_semiring_of_sets.mu">mu</a></span> <span class="id">set0</span> = 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof89')">Proof.</span></div>
<div class="proofscript" id="proof89">
<span class="id">have</span> /[!<span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset_set0">big_ord0</a></span>] -&gt;// := @<span class="id">measure_semi_additive</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">mu</span> (<span class="kwd">fun</span>=&gt; <span class="id">set0</span>) 0%<span class="id">N</span>.<br/>
<span class="id">exact</span>: <span class="id">trivIset_set0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">measure0</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">measure_ge0</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">measure_semi_additive</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measure_semi_additive_ord</span> (<span class="id">n</span> : <span class="id">nat</span>) (<span class="id"><a href="mathcomp.classical.classical_sets.html#setT">F</a></span> : '<span class="id">I_n</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable">set</a></span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> (<span class="id">k</span> : '<span class="id">I_n</span>), <span class="id">measurable</span> (<span class="id">F</span> <span class="id">k</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id">trivIset</span> <span class="id">setT</span> <span class="id">F</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">measurable</span> (\<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">k</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> (\<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">i</a></span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">i</span>) = \<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">sum_</a></span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">mu</span> (<span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof90')">Proof.</span></div>
<div class="proofscript" id="proof90">
<span class="id">move</span>=&gt; <span class="id">mF</span> <span class="id">tF</span> <span class="id">mUF</span>; <span class="id">pose</span> <span class="id">F</span>' (<span class="id">i</span> : <span class="id">nat</span>) := <span class="id">oapp</span> <span class="id">F</span> <span class="id">set0</span> (<span class="id">insub</span> <span class="id">i</span>).<br/>
<span class="id">have</span> <span class="id">FE</span> (<span class="id">i</span> : '<span class="id">I_n</span>) : <span class="id">F</span> <span class="id">i</span> = (<span class="id">F</span>' \<span class="id">o</span> <span class="id">val</span>) <span class="id">i</span> <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">F</span>'/= <span class="id">valK</span>/=.<br/>
<span class="id">rewrite</span> (<span class="id">eq_bigr</span> (<span class="id">F</span>' \<span class="id">o</span> <span class="id">val</span>))// (<span class="id">eq_bigr</span> (<span class="id">mu</span> \<span class="id">o</span> <span class="id">F</span>' \<span class="id">o</span> <span class="id">val</span>))//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">FE</span>.<br/>
<span class="id">rewrite</span> -<span class="id">measure_semi_additive</span>//.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">k</span>; <span class="id">rewrite</span> /<span class="id">F</span>'; <span class="id">case</span>: <span class="id">insubP</span> =&gt; /=.<br/>
- <span class="id">apply</span>/<span class="id">trivIsetP</span>=&gt; <span class="id">i</span> <span class="id">j</span> <span class="id">_</span> <span class="id">_</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#trivIsetP">F</a></span>'.<br/>
&nbsp;&nbsp;<span class="id">do</span> 2?[<span class="id">case</span>: <span class="id">insubP</span>; <span class="id">rewrite</span> ?(<span class="id">set0I</span>, <span class="id">setI0</span>)//= =&gt; ? <span class="id">_</span> &lt;-].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>/<span class="id">trivIsetP</span>: <span class="id">tF</span>; <span class="id">apply</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">eq_bigr</span> (<span class="id">F</span>' \<span class="id">o</span> <span class="id">val</span>)) <span class="kwd">in</span> <span class="id">mUF</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measure_semi_additive_ord_I</span> (<span class="id">F</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset">nat</a></span> -&gt; <span class="id">set</span> <span class="id">T</span>) (<span class="id">n</span> : <span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, (<span class="id">k</span> &lt; <span class="id">n</span>)%<span class="id">N</span> -&gt; <span class="id">measurable</span> (<span class="id">F</span> <span class="id">k</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id">trivIset</span> `<span class="id">I_n</span> <span class="id">F</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">measurable</span> (\<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">k</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> (\<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">i</span>) = \<span class="id">sum_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">mu</span> (<span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof91')">Proof.</span></div>
<div class="proofscript" id="proof91">
<span class="id">move</span>=&gt; <span class="id">mF</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset_comp">tF</a></span>; <span class="id">apply</span>: <span class="id">measure_semi_additive_ord</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">k</span>; <span class="id">apply</span>: <span class="id">mF</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">trivIset_comp</span>// ?(<span class="id">image_eq</span> [<span class="id">surjfun</span> <span class="id">of</span> <span class="id">val</span>])//; <span class="id">apply</span>: '<span class="id">inj_val</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">content_fin_bigcup</span> (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">D</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">finite_set</span> <span class="id">D</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">trivIset</span> <span class="id">D</span> <span class="id">F</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">D</span> <span class="id">i</span> -&gt; <span class="id">measurable</span> (<span class="id">F</span> <span class="id">i</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">measurable</span> (\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">D</span>) <span class="id"><a href="mathcomp.classical.classical_sets.html#choicePpointed">F</a></span> <span class="id">i</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> (\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">D</span>) <span class="id">F</span> <span class="id">i</span>) = \<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">D</span>) <span class="id">mu</span> (<span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof92')">Proof.</span></div>
<div class="proofscript" id="proof92">
<span class="id">elim</span>/<span class="id">choicePpointed</span>: <span class="id">I</span> =&gt; <span class="id">I</span> <span class="kwd">in</span> <span class="id">D</span> <span class="id">F</span> *.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id">emptyE</span> =&gt; *; <span class="id">rewrite</span> <span class="id">fsbig_set0</span> <span class="id">bigcup0</span>.<br/>
<span class="id">move</span>=&gt; [<span class="id">n</span> /<span class="id">ppcard_eqP</span>[<span class="id">f</span>]] <span class="id">Ftriv</span> <span class="id">Fm</span> <span class="id">UFm</span>.<br/>
<span class="id">rewrite</span> -(<span class="id">image_eq</span> [<span class="id">surjfun</span> <span class="id">of</span> <span class="id">f</span>^-1%<span class="id">FUN</span>])/= <span class="kwd">in</span> <span class="id">UFm</span> <span class="id">Ftriv</span> *.<br/>
<span class="id">rewrite</span> <span class="id">bigcup_image</span> <span class="id">fsbig_image</span>//= <span class="id">bigcup_mkord</span> -<span class="id">fsbig_ord</span>/= <span class="kwd">in</span> <span class="id">UFm</span> *.<br/>
<span class="id">rewrite</span> (@<span class="id">measure_semi_additive_ord_I</span> (<span class="id">F</span> \<span class="id">o</span> <span class="id">f</span>^-1))//= 1?<span class="id">trivIset_comp</span>//.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">k</span> <span class="id">kn</span>; <span class="id">apply</span>: <span class="id">Fm</span>; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#semi_additiveW">funS</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measure_semi_additive2</span> : <span class="id">semi_additive2</span> <span class="id">mu</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof93')">Proof.</span></div>
<div class="proofscript" id="proof93">
 <span class="id">exact</span>/<span class="id">semi_additiveW</span>. Qed.</div>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id"><a href="mathcomp.analysis.measure.html#measure0">measure_semi_additive2</a></span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">content_on_semiring_of_sets</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">measure0</span> {<span class="id">d</span> <span class="id">T</span> <span class="id">R</span>} <span class="id">_</span>.<br/>
<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0<br/>
&nbsp;&nbsp;(<span class="id">is_true</span> (0 &lt;= (<span class="id">_</span> : {<span class="id">content</span> <span class="id">set</span> <span class="id">_</span> -&gt; \<span class="id">bar</span> <span class="id">_</span>}) <span class="id">_</span>)%<span class="id">E</span>) =&gt;<br/>
&nbsp;&nbsp;<span class="id">solve</span> [<span class="id">apply</span>: <span class="id">measure_ge0</span>] : <span class="id">core</span>.<br/>
<br/>
#[<span class="id">global</span>]<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">measure0</span> <span class="id">measure_semi_additive2</span> <span class="id">measure_semi_additive</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">content_on_ring_of_sets</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">R</span> : <span class="id">realFieldType</span>)(<span class="id">T</span> : <span class="id">ringOfSetsType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu</span> : {<span class="id">content</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measureU</span> : <span class="id">additive2</span> <span class="id">mu</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof94')">Proof.</span></div>
<div class="proofscript" id="proof94">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">semi_additive2E</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measure_bigsetU</span> : <span class="id">additive</span> <span class="id">mu</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof95')">Proof.</span></div>
<div class="proofscript" id="proof95">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">semi_additiveE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measure_fin_bigcup</span> (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">D</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">finite_set</span> <span class="id">D</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">trivIset</span> <span class="id">D</span> <span class="id">F</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">D</span> <span class="id">i</span> -&gt; <span class="id">measurable</span> (<span class="id">F</span> <span class="id">i</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> (\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">D</span>) <span class="id">F</span> <span class="id">i</span>) = \<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">D</span>) <span class="id">mu</span> (<span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof96')">Proof.</span></div>
<div class="proofscript" id="proof96">
<span class="id">move</span>=&gt; <span class="id">Dfin</span> <span class="id">Ftriv</span> <span class="id">Fm</span>; <span class="id">rewrite</span> <span class="id">content_fin_bigcup</span>//.<br/>
<span class="id">exact</span>: <span class="id">fin_bigcup_measurable</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measure_bigsetU_ord_cond</span> <span class="id">n</span> (<span class="id">P</span> : {<span class="id">pred</span> '<span class="id">I_n</span>}) (<span class="id">F</span> : '<span class="id">I_n</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#content_on_ring_of_sets.mu">set</a></span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span> : '<span class="id">I_n</span>, <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id">measurable</span> (<span class="id">F</span> <span class="id">i</span>)) -&gt; <span class="id">trivIset</span> <span class="id">P</span> <span class="id">F</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> (\<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">F</span> <span class="id">i</span>) = (\<span class="id">sum_</span>(<span class="id">i</span> &lt; <span class="id">n</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">mu</span> (<span class="id">F</span> <span class="id">i</span>))%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof97')">Proof.</span></div>
<div class="proofscript" id="proof97">
<span class="id">move</span>=&gt; <span class="id">mF</span> <span class="id">tF</span>; <span class="id">rewrite</span> !(<span class="id">big_mkcond</span> <span class="id">P</span>)/= <span class="id">measure_semi_additive_ord</span>//.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">eq_bigr</span> =&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">rewrite</span> (<span class="id">fun_if</span> <span class="id">mu</span>) <span class="id">measure0</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">k</span>; <span class="id">case</span>: <span class="id">ifP</span> =&gt; //; <span class="id">apply</span>: <span class="id">mF</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">patch_pred</span> <span class="id">trivIset_restr</span> <span class="id">setIT</span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigsetU_measurable</span>=&gt; <span class="id">k</span> <span class="id">_</span>; <span class="id">case</span>: <span class="id">ifP</span> =&gt; //; <span class="id">apply</span>: <span class="id">mF</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measure_bigsetU_ord</span> <span class="id">n</span> (<span class="id">P</span> : {<span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset">pred</a></span> '<span class="id">I_n</span>}) (<span class="id">F</span> : '<span class="id">I_n</span> -&gt; <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span> : '<span class="id">I_n</span>, <span class="id">measurable</span> (<span class="id">F</span> <span class="id">i</span>)) -&gt; <span class="id">trivIset</span> <span class="id">setT</span> <span class="id">F</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> (\<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span> | <span class="id">P</span> <span class="id"><a href="mathcomp.analysis.measure.html#measure_bigsetU_ord_cond">i</a></span>) <span class="id">F</span> <span class="id">i</span>) = (\<span class="id">sum_</span>(<span class="id">i</span> &lt; <span class="id">n</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">mu</span> (<span class="id">F</span> <span class="id">i</span>))%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof98')">Proof.</span></div>
<div class="proofscript" id="proof98">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">mF</span> <span class="id">tF</span>; <span class="id">rewrite</span> <span class="id">measure_bigsetU_ord_cond</span>//; <span class="id">apply</span>: <span class="id">sub_trivIset</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">tF</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measure_fbigsetU</span> (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">A</span> : {<span class="id">fset</span> <span class="id">I</span>}) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id"><a href="mathcomp.analysis.measure.html#content_on_ring_of_sets.mu">T</a></span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">i</span> \<span class="kwd">in</span> <span class="id">A</span> -&gt; <span class="id">measurable</span> (<span class="id">F</span> <span class="id">i</span>)) -&gt; <span class="id">trivIset</span> [<span class="id">set</span>` <span class="id">A</span>] <span class="id">F</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> (\<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">i</span> &lt;- <span class="id">A</span>) <span class="id">F</span> <span class="id">i</span>) = (\<span class="id">sum_</span>(<span class="id">i</span> &lt;- <span class="id">A</span>) <span class="id">mu</span> (<span class="id">F</span> <span class="id">i</span>))%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof99')">Proof.</span></div>
<div class="proofscript" id="proof99">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">mF</span> <span class="id">tF</span>; <span class="id">rewrite</span> -<span class="id">bigcup_fset</span> <span class="id">measure_fin_bigcup</span>// -<span class="id">fsbig_seq</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">content_on_ring_of_sets</span>.<br/>
<br/>
#[<span class="id">global</span>]<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id"><a href="mathcomp.analysis.measure.html#semiRingOfSetsType">measureU</a></span> <span class="id">measure_bigsetU</span> : <span class="id">core</span>.<br/>
<br/>
<span class="id">HB.mixin</span> <span class="kwd">Record</span> <span class="id">Content_isMeasure</span> <span class="id">d</span> (<span class="id"><a href="mathcomp.analysis.measure.html#Content">T</a></span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">R</span> : <span class="id">numFieldType</span>) (<span class="id"><a href="mathcomp.analysis.measure.html#semi_sigma_additive">mu</a></span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) <span class="id">of</span> <span class="id">Content</span> <span class="id">d</span> <span class="id">mu</span> := {<br/>
&nbsp;&nbsp;<span class="id">measure_semi_sigma_additive</span> : <span class="id">semi_sigma_additive</span> <span class="id">mu</span> }.<br/>
<br/>
#[<span class="id">short</span>(<span class="id">type</span>=<span class="id">measure</span>)]<br/>
<span class="id">HB.structure</span> <span class="kwd">Definition</span> <span class="id">Measure</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">R</span> : <span class="id">numFieldType</span>) :=<br/>
&nbsp;&nbsp;{<span class="id">mu</span> <span class="id">of</span> <span class="id">Content_isMeasure</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id">mu</span> &amp; <span class="id">Content</span> <span class="id">d</span> <span class="id">mu</span>}.<br/>
<br/>
<span class="kwd">Notation</span> "{ '<span class="id">measure</span>' '<span class="id">set</span>' <span class="id">T</span> '-&gt;' '\<span class="id">bar</span>' <span class="id">R</span> }" := (<span class="id">measure</span> <span class="id">T</span>%<span class="id">type</span> <span class="id">R</span>)<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 36, <span class="id">T</span>, <span class="id">R</span> <span class="kwd">at</span> <span class="id">next</span> <span class="id">level</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "{ '<span class="id">measure</span>'  '<span class="id">set</span>'  <span class="id">T</span>  '-&gt;'  '\<span class="id">bar</span>'  <span class="id">R</span> }") : <span class="id">ring_scope</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">measure_signed</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">R</span> : <span class="id">numFieldType</span>) (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>).<br/>
<br/>
<span class="kwd">Variable</span> <span class="id">mu</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measure_snum_subproof</span> <span class="id">S</span> : <span class="id">Signed.spec</span> 0 ?=0 &gt;=0 (<span class="id">mu</span> <span class="id">S</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof100')">Proof.</span></div>
<div class="proofscript" id="proof100">
 <span class="id">exact</span>: <span class="id">measure_ge0</span>. Qed.</div>
<br/>
<span class="kwd">Canonical</span> <span class="id">measure_snum</span> <span class="id">S</span> := <span class="id">Signed.mk</span> (<span class="id">measure_snum_subproof</span> <span class="id">S</span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id">measure_signed</span>.<br/>
<br/>
<span class="id">HB.factory</span> <span class="kwd">Record</span> <span class="id">isMeasure</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realFieldType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) := {<br/>
&nbsp;&nbsp;<span class="id">measure0</span> : <span class="id">mu</span> <span class="id">set0</span> = 0 ;<br/>
&nbsp;&nbsp;<span class="id">measure_ge0</span> : <span class="kwd">forall</span> <span class="id">x</span>, 0 &lt;= <span class="id">mu</span> <span class="id">x</span> ;<br/>
&nbsp;&nbsp;<span class="id">measure_semi_sigma_additive</span> : <span class="id">semi_sigma_additive</span> <span class="id">mu</span> }.<br/>
<br/>
<span class="id">HB.builders</span> <span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realFieldType</span>)<br/>
&nbsp;&nbsp;(<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) <span class="id">of</span> <span class="id">isMeasure</span> <span class="id">_</span> <span class="id">T</span> <span class="id">R</span> <span class="id">mu</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">semi_additive_mu</span> : <span class="id">semi_additive</span> <span class="id">mu</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof101')">Proof.</span></div>
<div class="proofscript" id="proof101">
<span class="id">apply</span>: <span class="id">semi_sigma_additive_is_additive</span>.<br/>
- <span class="id">exact</span>: <span class="id">measure0</span>.<br/>
- <span class="id">exact</span>: <span class="id">measure_semi_sigma_additive</span>.<br/>
Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">isContent.Build</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id">mu</span><br/>
&nbsp;&nbsp;<span class="id">measure_ge0</span> <span class="id">semi_additive_mu</span>.<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">Content_isMeasure.Build</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id">mu</span><br/>
&nbsp;&nbsp;<span class="id">measure_semi_sigma_additive</span>.<br/>
<span class="id">HB.end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">eq_measure</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realFieldType</span>)<br/>
&nbsp;&nbsp;(<span class="id">m1</span> <span class="id">m2</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) :<br/>
&nbsp;&nbsp;(<span class="id">m1</span> = <span class="id">m2</span> :&gt; (<span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>)) -&gt; <span class="id">m1</span> = <span class="id">m2</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof102')">Proof.</span></div>
<div class="proofscript" id="proof102">
<span class="id">move</span>: <span class="id">m1</span> <span class="id">m2</span> =&gt; [<span class="id">m1</span> [[<span class="id">m10</span> <span class="id">m1ge0</span> [<span class="id">m1sa</span>]]]] [<span class="id">m2</span> [[+ + [+]]]] /= <span class="id">m1m2</span>.<br/>
<span class="id">rewrite</span> -{}<span class="id">m1m2</span> =&gt; <span class="id">m10</span>' <span class="id">m1ge0</span>' <span class="id">m1sa</span>'; <span class="id">f_equal</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id"><a name="measure_lemmas">_</a></span> : <span class="id">m10</span>' = <span class="id">m10</span>)// (<span class="id">_</span> : <span class="id">m1ge0</span>' = <span class="id">m1ge0</span>)// (<span class="id">_</span> : <span class="id">m1sa</span>' = <span class="id">m1sa</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">measure_lemmas</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id"><a href="mathcomp.analysis.measure.html#measure_lemmas.T">R</a></span> : <span class="id">realFieldType</span>) (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>).<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">mu</a></span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">measure_semi_bigcup</a></span> <span class="id">A</span> : (<span class="kwd">forall</span> <span class="id">i</span> : <span class="id">nat</span>, <span class="id">measurable</span> (<span class="id">A</span> <span class="id">i</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">trivIset</span> <span class="id">setT</span> <span class="id">A</span> -&gt; <span class="id">measurable</span> (\<span class="id">bigcup_n</span> <span class="id">A</span> <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> (\<span class="id">bigcup_n</span> <span class="id">A</span> <span class="id">n</span>) = \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span>) <span class="id">mu</span> (<span class="id">A</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof103')">Proof.</span></div>
<div class="proofscript" id="proof103">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Am</span> <span class="id">Atriv</span> /<span class="id">measure_semi_sigma_additive</span>/<span class="id">cvg_lim</span>&lt;-//. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">measure_lemmas</span>.<br/>
<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">_</span> <span class="id">set0</span> = 0) =&gt; <span class="id">solve</span> [<span class="id">apply</span>: <span class="id">measure0</span>] : <span class="id">core</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id"><a name="measure_lemmas">Extern</a></span> 0 (<span class="id">is_true</span> (0 &lt;= <span class="id">_</span>)) =&gt; <span class="id">solve</span> [<span class="id">apply</span>: <span class="id">measure_ge0</span>] : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">measure_lemmas</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>).<br/>
<span class="kwd">Variable</span> <span class="id">mu</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measure_sigma_additive</span> : <span class="id">sigma_additive</span> <span class="id">mu</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof104')">Proof.</span></div>
<div class="proofscript" id="proof104">
<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">semi_sigma_additiveE</span> //; <span class="id">apply</span>: <span class="id">measure_semi_sigma_additive</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measure_bigcup</span> (<span class="id">D</span> : <span class="id">set</span> <span class="id">nat</span>) <span class="id">F</span> : (<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">D</span> <span class="id">i</span> -&gt; <span class="id">measurable</span> (<span class="id">F</span> <span class="id">i</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id">trivIset</span> <span class="id">D</span> <span class="id">F</span> -&gt; <span class="id">mu</span> (\<span class="id">bigcup_</span>(<span class="id">n</span> <span class="kwd">in</span> <span class="id">D</span>) <span class="id">F</span> <span class="id">n</span>) = \<span class="id"><a href="mathcomp.analysis.measure.html#measure_semi_bigcup">sum_</a></span>(<span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">i</span> \<span class="kwd">in</span> <span class="id">D</span>) <span class="id">mu</span> (<span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof105')">Proof.</span></div>
<div class="proofscript" id="proof105">
<span class="id">move</span>=&gt; <span class="id">mF</span> <span class="id">tF</span>; <span class="id">rewrite</span> <span class="id">bigcup_mkcond</span> <span class="id">measure_semi_bigcup</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> [<span class="kwd">in</span> <span class="id">RHS</span>]<span class="id">eseries_mkcond</span>; <span class="id">apply</span>: <span class="id">eq_eseriesr</span> =&gt; <span class="id">n</span> <span class="id">_</span>; <span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset_mkcond">case</a></span>: <span class="id">ifPn</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span>; <span class="id">case</span>: <span class="id">ifPn</span> =&gt; // /<span class="id">set_mem</span>; <span class="id">exact</span>: <span class="id">mF</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>/<span class="id">trivIset_mkcond</span> : <span class="id">tF</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">bigcup_mkcond</span>; <span class="id">apply</span>: <span class="id">bigcup_measurable</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">measure_lemmas</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">measure_bigcup</span> {<span class="id"><a href="mathcomp.analysis.measure.html#measure_sigma_additive">d</a></span> <span class="id">R</span> <span class="id">T</span>} <span class="id">_</span> <span class="id">_</span>.<br/>
<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">sigma_additive</span> <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;<span class="id">solve</span> [<span class="id">apply</span>: <span class="id">measure_sigma_additive</span>] : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">pushforward_measure</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> <span class="id">d</span>' (<span class="id"><a name="pushforward_measure.R">T1</a></span> : <span class="id">measurableType</span> <span class="id"><a name="pushforward_measure.m">d</a></span>) (<span class="id">T2</span> : <span class="id">measurableType</span> <span class="id">d</span>') (<span class="id">f</span> : <span class="id">T1</span> -&gt; <span class="id">T2</span>).<br/>
<span class="kwd">Variables</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">m</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T1</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">pushforward</span> (<span class="id">mf</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">measurable_fun</a></span> <span class="id">setT</span> <span class="id">f</span>) <span class="id">A</span> := <span class="id"><a href="mathcomp.analysis.measure.html#pushforward">m</a></span> (<span class="id">f</span> @^-1` <span class="id">A</span>).<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="id">mf</span> : <span class="id">measurable_fun</span> <span class="id">setT</span> <span class="id">f</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">pushforward0</span> : <span class="id">pushforward</span> <span class="id">mf</span> <span class="id"><a name="pushforward_measure.pushforward_ge0">set0</a></span> = 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof106')">Proof.</span></div>
<div class="proofscript" id="proof106">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">pushforward</span> <span class="id">preimage_set0</span> <span class="id">measure0</span>. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">pushforward_ge0</span> <span class="id">A</span> : 0 &lt;= <span class="id">pushforward</span> <span class="id">mf</span> <span class="id"><a href="mathcomp.analysis.measure.html#pushforward_measure.mf">A</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof107')">Proof.</span></div>
<div class="proofscript" id="proof107">
 <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measure_ge0</span>; <span class="id">rewrite</span> -[<span class="id"><a href="mathcomp.analysis.measure.html#semi_sigma_additive">X</a></span> <span class="kwd">in</span> <span class="id">measurable</span> <span class="id">X</span>]<span class="id">setIT</span>; <span class="id">apply</span>: <span class="id">mf</span>. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">pushforward_sigma_additive</span> : <span class="id">semi_sigma_additive</span> (<span class="id">pushforward</span> <span class="id">mf</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof108')">Proof.</span></div>
<div class="proofscript" id="proof108">
<span class="id">move</span>=&gt; <span class="id">F</span> <span class="id">mF</span> <span class="id">tF</span> <span class="id">mUF</span>; <span class="id">rewrite</span> /<span class="id">pushforward</span> <span class="id">preimage_bigcup</span>.<br/>
<span class="id">apply</span>: <span class="id">measure_semi_sigma_additive</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span>; <span class="id">rewrite</span> -[<span class="id">X</span> <span class="kwd">in</span> <span class="id">measurable</span> <span class="id">X</span>]<span class="id">setTI</span>; <span class="id">exact</span>: <span class="id">mf</span>.<br/>
- <span class="id">apply</span>/<span class="id">trivIsetP</span> =&gt; /= <span class="id">i</span> <span class="id">j</span> <span class="id">_</span> <span class="id">_</span> <span class="id">ij</span>; <span class="id">rewrite</span> -<span class="id">preimage_setI</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>/<span class="id">trivIsetP</span> : <span class="id">tF</span> =&gt; /(<span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">ij</span>) -&gt;//; <span class="id">rewrite</span> <span class="id">preimage_set0</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">preimage_bigcup</span> -[<span class="id">X</span> <span class="kwd">in</span> <span class="id">measurable</span> <span class="id">X</span>]<span class="id">setTI</span>; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#pushforward_measure.mf">mf</a></span>.<br/>
Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id"><a href="mathcomp.analysis.measure.html#pushforward_measure.pushforward_sigma_additive">_</a></span> := <span class="id">isMeasure.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span><br/>
&nbsp;&nbsp;(<span class="id">pushforward</span> <span class="id">mf</span>) <span class="id">pushforward0</span> <span class="id">pushforward_ge0</span> <span class="id">pushforward_sigma_additive</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">pushforward_measure</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">dirac_measure</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">a</span> : <span class="id">T</span>) (<span class="id">R</span> : <span class="id">realFieldType</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">dirac</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) : \<span class="id">bar</span> <span class="id">R</span> := (\1<span class="id">_A</span> <span class="id">a</span>)%:<span class="id">E</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">dirac0</span> : <span class="id">dirac</span> <span class="id">set0</span> = 0<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof109')">Proof.</span></div>
<div class="proofscript" id="proof109">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">dirac</span> <span class="id">indic0</span>. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">dirac_ge0</span> <span class="id">B</span> : 0 &lt;= <span class="id"><a href="mathcomp.analysis.measure.html#semi_sigma_additive">dirac</a></span> <span class="id">B</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof110')">Proof.</span></div>
<div class="proofscript" id="proof110">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">dirac</span> <span class="id">indicE</span>. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">dirac_sigma_additive</span> : <span class="id">semi_sigma_additive</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#boolP">dirac</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof111')">Proof.</span></div>
<div class="proofscript" id="proof111">
<span class="id">move</span>=&gt; <span class="id">F</span> <span class="id">mF</span> <span class="id">tF</span> <span class="id">mUF</span>; <span class="id">rewrite</span> /<span class="id">dirac</span> <span class="id">indicE</span>; <span class="id">have</span> [|<span class="id">aFn</span>] /= := <span class="id">boolP</span> (<span class="id">a</span> \<span class="kwd">in</span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">inE</span> =&gt; -[<span class="id">n</span> <span class="id">_</span> <span class="id">Fna</span>].<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">naF</span> <span class="id">m</span> : <span class="id">m</span> != <span class="id">n</span> -&gt; <span class="id">a</span> \<span class="id">notin</span> <span class="id">F</span> <span class="id">m</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">mn</span>; <span class="id">rewrite</span> <span class="id">notin_set</span> =&gt; <span class="id">Fma</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>/<span class="id">trivIsetP</span> : <span class="id">tF</span> =&gt; /(<span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.topology.html#cvg_ballP">Logic.I</a></span> <span class="id">Logic.I</span> <span class="id">mn</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; /(<span class="id">_</span> <span class="id">a</span>)[+ <span class="id">_</span>]; <span class="id">exact</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">cvg_ballP</span> =&gt; <span class="id">_</span>/<span class="id">posnumP</span>[<span class="id">e</span>]; <span class="id">near</span>=&gt; <span class="id">m</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">mn</span> : (<span class="id">n</span> &lt; <span class="id">m</span>)%<span class="id">N</span> <span class="kwd">by</span> <span class="id">near</span>: <span class="id">m</span>; <span class="kwd">exists</span> <span class="id">n</span>.+1.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">big_mkord</span> (<span class="id">bigID</span> (<span class="id">xpred1</span> (<span class="id">Ordinal</span> <span class="id">mn</span>)))//= <span class="id">big_pred1_eq</span>/= <span class="id">big1</span>/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">adde0</span> <span class="id">indicE</span> <span class="id">mem_set</span>//; <span class="id">exact</span>: <span class="id">ballxx</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">j</span> <span class="id">ij</span>; <span class="id">rewrite</span> <span class="id">indicE</span> (<span class="id">negbTE</span> (<span class="id">naF</span> <span class="id">_</span> <span class="id">_</span>)).<br/>
<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">X</span> --&gt; <span class="id">_</span>](<span class="id">_</span> : <span class="id">_</span> = <span class="id">cst</span> 0); <span class="id">first</span> <span class="id">exact</span>: <span class="id">cvg_cst</span>.<br/>
<span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> <span class="id">big1</span>// =&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">indicE</span>; <span class="id">apply</span>/<span class="id">eqP</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eqe</span> <span class="id">pnatr_eq0</span> <span class="id">eqb0</span>; <span class="id">apply</span>: <span class="id">contra</span> <span class="id">aFn</span> =&gt; /[!<span class="id">inE</span>] <span class="id">aFn</span>; <span class="kwd">exists</span> <span class="id">i</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="id"><a href="mathcomp.analysis.measure.html#dirac_measure.dirac_sigma_additive">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">isMeasure.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#dirac">dirac</a></span> <span class="id">dirac0</span> <span class="id">dirac_ge0</span> <span class="id">dirac_sigma_additive</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">dirac_measure</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">dirac</span> {<span class="id">d</span> <span class="id">T</span>} <span class="id">_</span> {<span class="id">R</span>}.<br/>
<br/>
<span class="kwd">Notation</span> "\<span class="id">d_</span> <span class="id">a</span>" := (<span class="id">dirac</span> <span class="id">a</span>) : <span class="id">ring_scope</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">dirac_lemmas_realFieldType</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realFieldType</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">diracE</span> <span class="id">a</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) : \<span class="id">d_a</span> <span class="id">A</span> = (<span class="id">a</span> \<span class="kwd">in</span> <span class="id">A</span>)%:<span class="id">R</span>%:<span class="id">E</span> :&gt; \<span class="id">bar</span> <span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof112')">Proof.</span></div>
<div class="proofscript" id="proof112">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">dirac</span> <span class="id">indicE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">dirac0</span> (<span class="id">a</span> : <span class="id">T</span>) : \<span class="id">d_a</span> <span class="id">set0</span> = 0 :&gt; \<span class="id"><a href="mathcomp.classical.classical_sets.html#setT">bar</a></span> <span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof113')">Proof.</span></div>
<div class="proofscript" id="proof113">
 <span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.measure.html#dirac_lemmas_realFieldType.R">rewrite</a></span> <span class="id">diracE</span> <span class="id">in_set0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">diracT</span> (<span class="id">a</span> : <span class="id">T</span>) : \<span class="id">d_a</span> <span class="id">setT</span> = 1 :&gt; \<span class="id">bar</span> <span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof114')">Proof.</span></div>
<div class="proofscript" id="proof114">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">diracE</span> <span class="id">in_setT</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">dirac_lemmas_realFieldType</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">dirac_lemmas</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">T</a></span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">finite_card_sum</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">finite_set</span> <span class="id">A</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">esum_</span>(<span class="id"><a href="mathcomp.analysis.esum.html#esum_fset">i</a></span> <span class="kwd">in</span> <span class="id">A</span>) 1 = (#|` <span class="id">fset_set</span> <span class="id">A</span>|%:<span class="id">R</span>)%:<span class="id">E</span> :&gt; \<span class="id">bar</span> <span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof115')">Proof.</span></div>
<div class="proofscript" id="proof115">
<span class="id">move</span>=&gt; <span class="id">finA</span>; <span class="id">rewrite</span> <span class="id">esum_fset</span>// (<span class="id">eq_fsbigr</span> (<span class="id">cst</span> 1))//.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">card_fset_sum1</span>// <span class="id">natr_sum</span> -<span class="id">sumEFin</span> <span class="id">fsbig_finite</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">finite_card_dirac</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id"><a href="mathcomp.analysis.measure.html#dirac_lemmas.R">finite_set</a></span> <span class="id">A</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">esum_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">A</span>) \<span class="id">d_</span> <span class="id">i</span> <span class="id">A</span> = (#|` <span class="id">fset_set</span> <span class="id">A</span>|%:<span class="id">R</span>)%:<span class="id">E</span> :&gt; \<span class="id">bar</span> <span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof116')">Proof.</span></div>
<div class="proofscript" id="proof116">
<span class="id">move</span>=&gt; <span class="id">finA</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#sumEFin">esum_fset</a></span>// (<span class="id">eq_fsbigr</span> (<span class="id">cst</span> 1))//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">card_fset_sum1</span>// <span class="id">natr_sum</span> -<span class="id">sumEFin</span> <span class="id">fsbig_finite</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span> <span class="id">iA</span>; <span class="id">rewrite</span> <span class="id">diracE</span> <span class="id">iA</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">infinite_card_dirac</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">infinite_set</span> <span class="id">A</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">esum_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">A</span>) \<span class="id">d_</span> <span class="id">i</span> <span class="id">A</span> = +<span class="id">oo</span> :&gt; \<span class="id">bar</span> <span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof117')">Proof.</span></div>
<div class="proofscript" id="proof117">
<span class="id">move</span>=&gt; <span class="id">infA</span>; <span class="id">apply</span>/<span class="id">eqyP</span> =&gt; <span class="id">r</span> <span class="id">r0</span>.<br/>
<span class="id">have</span> [<span class="id">B</span> <span class="id">BA</span> <span class="id">Br</span>] := <span class="id">infinite_set_fset</span> `|<span class="id">ceil</span> <span class="id">r</span>| <span class="id">infA</span>.<br/>
<span class="id">apply</span>: <span class="id">esum_ge</span>; <span class="kwd">exists</span> [<span class="id">set</span>` <span class="id">B</span>] =&gt; //; <span class="id">apply</span>: (@<span class="id">le_trans</span> <span class="id"><a href="mathcomp.analysis.reals.html#ceil_ge">_</a></span> <span class="id">_</span> `|<span class="id">ceil</span> <span class="id">r</span>|%:<span class="id">R</span>%:<span class="id">E</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lee_fin</span> <span class="id">natr_absz</span> <span class="id">gtr0_norm</span> ?<span class="id">ceil_gt0</span>// <span class="id">ceil_ge</span>.<br/>
<span class="id">move</span>: <span class="id">Br</span>; <span class="id">rewrite</span> -(@<span class="id">ler_nat</span> <span class="id">R</span>) -<span class="id">lee_fin</span> =&gt; /<span class="id">le_trans</span>; <span class="id">apply</span>.<br/>
<span class="id">rewrite</span> (<span class="id">eq_fsbigr</span> (<span class="id">cst</span> 1))/=; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span> /[!<span class="id">inE</span>] /<span class="id">BA</span> /<span class="id">mem_set</span> <span class="id">iA</span>; <span class="id">rewrite</span> <span class="id">diracE</span> <span class="id">iA</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">fsbig_finite</span>//= <span class="id">card_fset_sum1</span> <span class="id">sumEFin</span> <span class="id">natr_sum</span>// <span class="id">set_fsetK</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">dirac_lemmas</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">measure_sum</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>).<br/>
<span class="kwd">Variables</span> (<span class="id">m</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}^<span class="id">nat</span>) (<span class="id">n</span> : <span class="id">nat</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">msum</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) : \<span class="id">bar</span> <span class="id">R</span> := \<span class="id">sum_</span>(<span class="id">k</span> &lt; <span class="id">n</span>) <span class="id"><a name="measure_sum.msum_ge0">m</a></span> <span class="id">k</span> <span class="id">A</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">msum0</span> : <span class="id">msum</span> <span class="id">set0</span> = 0<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof118')">Proof.</span></div>
<div class="proofscript" id="proof118">
 <span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.measure.html#msum">rewrite</a></span> /<span class="id">msum</span> <span class="id">big1</span>. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">msum_ge0</span> <span class="id">B</span> : 0 &lt;= <span class="id">msum</span> <span class="id">B</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof119')">Proof.</span></div>
<div class="proofscript" id="proof119">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.measure.html#msum">msum</a></span>; <span class="id">apply</span>: <span class="id">sume_ge0</span>. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">msum_sigma_additive</span> : <span class="id">semi_sigma_additive</span> <span class="id">msum</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof120')">Proof.</span></div>
<div class="proofscript" id="proof120">
<span class="id">move</span>=&gt; <span class="id">F</span> <span class="id">mF</span> <span class="id"><a href="mathcomp.analysis.measure.html#msum">tF</a></span> <span class="id">mUF</span>; <span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span> --&gt; <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lim</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(0 &lt;= <span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">msum</span> (<span class="id">F</span> <span class="id">i</span>))).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">is_cvg_ereal_nneg_natsum</span> =&gt; <span class="id">k</span> <span class="id">_</span>; <span class="id"><a href="mathcomp.analysis.measure.html#measure_semi_bigcup">exact</a></span>: <span class="id">sume_ge0</span>.<br/>
<span class="id">rewrite</span> <span class="id">nneseries_sum</span>//; <span class="id">apply</span>: <span class="id">eq_bigr</span> =&gt; /= <span class="id">i</span> <span class="id">_</span>.<br/>
<span class="id">exact</span>: <span class="id">measure_semi_bigcup</span>.<br/>
Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id"><a href="mathcomp.analysis.measure.html#measure_sum">_</a></span> := <span class="id">isMeasure.Build</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.measure.html#msum">_</a></span> <span class="id">_</span> <span class="id">msum</span><br/>
&nbsp;&nbsp;<span class="id">msum0</span> <span class="id">msum_ge0</span> <span class="id">msum_sigma_additive</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">measure_sum</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">msum</span> {<span class="id">d</span> <span class="id">T</span> <span class="id">R</span>}.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">measure_zero</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id"><a href="mathcomp.analysis.measure.html#measure_zero.R">T</a></span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">mzero</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) : \<span class="id">bar</span> <span class="id">R</span> := 0.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">mzero0</span> : <span class="id">mzero</span> <span class="id">set0</span> = 0<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof121')">Proof.</span></div>
<div class="proofscript" id="proof121">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id"><a href="mathcomp.analysis.measure.html#semi_sigma_additive">mzero_ge0</a></span> <span class="id">B</span> : 0 &lt;= <span class="id">mzero</span> <span class="id">B</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof122')">Proof.</span></div>
<div class="proofscript" id="proof122">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">mzero_sigma_additive</span> : <span class="id">semi_sigma_additive</span> <span class="id">mzero</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof123')">Proof.</span></div>
<div class="proofscript" id="proof123">
<span class="id">move</span>=&gt; <span class="id">F</span> <span class="id">mF</span> <span class="id">tF</span> <span class="id"><a href="mathcomp.classical.boolp.html#funext">mUF</a></span>; <span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">X</span> --&gt; <span class="id">_</span>](<span class="id">_</span> : <span class="id">_</span> = <span class="id">cst</span> 0); <span class="id">first</span> <span class="id">exact</span>: <span class="id">cvg_cst</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> <span class="id">big1</span>.<br/>
Qed.</div>
<br/>
<span class="id"><a href="mathcomp.analysis.measure.html#measure_zero.mzero_sigma_additive">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">isMeasure.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">mzero</span><br/>
&nbsp;&nbsp;<span class="id">mzero0</span> <span class="id">mzero_ge0</span> <span class="id">mzero_sigma_additive</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">measure_zero</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">mzero</span> {<span class="id">d</span> <span class="id">T</span> <span class="id">R</span>}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">msum_mzero</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id"><a href="mathcomp.analysis.measure.html#mzero">d</a></span>) (<span class="id">R</span> : <span class="id">realType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="mathcomp.classical.boolp.html#funext">m_</a></span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id"><a href="mathcomp.analysis.measure.html#msum">bar</a></span> <span class="id">R</span>}^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">msum</span> <span class="id">m_</span> 0 = <span class="id">mzero</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof124')">Proof.</span></div>
<div class="proofscript" id="proof124">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">A</span>/=; <span class="id">rewrite</span> /<span class="id">msum</span> <span class="id">big_ord0</span>. Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">measure_add</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>).<br/>
<span class="kwd">Variables</span> (<span class="id">m1</span> <span class="id">m2</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">measure_add</span> := <span class="id">msum</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="kwd">if</span> <span class="id">n</span> <span class="id">is</span> 0%<span class="id">N</span> <span class="kwd">then</span> <span class="id">m1</span> <span class="kwd">else</span> <span class="id">m2</span>) 2.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measure_addE</span> <span class="id">A</span> : <span class="id">measure_add</span> <span class="id">A</span> = <span class="id">m1</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#adde0">A</a></span> + <span class="id">m2</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof125')">Proof.</span></div>
<div class="proofscript" id="proof125">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">measure_add</span>/= /<span class="id">msum</span> 2!<span class="id">big_ord_recl</span>/= <span class="id">big_ord0</span> <span class="id">adde0</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">measure_add</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">measure_scale</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id"><a href="mathcomp.analysis.measure.html#measure_scale.R">R</a></span> : <span class="id">realFieldType</span>).<br/>
<span class="kwd">Variables</span> (<span class="id">r</span> : {<span class="id">nonneg</span> <span class="id"><a href="mathcomp.analysis.measure.html#measure_scale.R">R</a></span>}) (<span class="id"><a href="mathcomp.analysis.measure.html#measure_scale.r">m</a></span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">mscale</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) : \<span class="id">bar</span> <span class="id">R</span> := <span class="id"><a href="mathcomp.analysis.measure.html#measure0">r</a></span>%:<span class="id">num</span>%:<span class="id">E</span> * <span class="id">m</span> <span class="id">A</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">mscale0</span> : <span class="id">mscale</span> <span class="id">set0</span> = 0<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof126')">Proof.</span></div>
<div class="proofscript" id="proof126">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">mscale</span> <span class="id"><a href="mathcomp.analysis.measure.html#mscale">measure0</a></span> <span class="id">mule0</span>. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">mscale_ge0</span> <span class="id">B</span> : 0 &lt;= <span class="id">mscale</span> <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof127')">Proof.</span></div>
<div class="proofscript" id="proof127">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">mscale</span> <span class="id">mule_ge0</span>. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">mscale_sigma_additive</span> : <span class="id">semi_sigma_additive</span> <span class="id">mscale</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof128')">Proof.</span></div>
<div class="proofscript" id="proof128">
<span class="id">move</span>=&gt; <span class="id">F</span> <span class="id">mF</span> <span class="id">tF</span> <span class="id">mUF</span>; <span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">X</span> --&gt; <span class="id">_</span>](<span class="id">_</span> : <span class="id">_</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">n</span> =&gt; (<span class="id">r</span>%:<span class="id">num</span>)%:<span class="id">E</span> * \<span class="id">sum_</span>(0 &lt;= <span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">m</span> (<span class="id">F</span> <span class="id">i</span>))); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">k</span>; <span class="id">rewrite</span> <span class="id">ge0_sume_distrr</span>.<br/>
<span class="id">rewrite</span> /<span class="id">mscale</span>; <span class="id">have</span> [-&gt;|<span class="id">r0</span>] := <span class="id">eqVneq</span> <span class="id">r</span>%:<span class="id">num</span> 0%<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">mul0e</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">X</span> --&gt; <span class="id">_</span>](<span class="id">_</span> : <span class="id">_</span> = (<span class="kwd">fun</span>=&gt; 0)); <span class="id">first</span> <span class="id">exact</span>: <span class="id">cvg_cst</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">under</span> <span class="id">eq_fun</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">mul0e</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">cvgeMl</span> =&gt; //; <span class="id">exact</span>: <span class="id">measure_semi_sigma_additive</span>.<br/>
Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">isMeasure.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">mscale</span><br/>
&nbsp;&nbsp;<span class="id">mscale0</span> <span class="id">mscale_ge0</span> <span class="id">mscale_sigma_additive</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">measure_scale</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">mscale</span> {<span class="id">d</span> <span class="id">T</span> <span class="id">R</span>}.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">measure_series</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>).<br/>
<span class="kwd">Variables</span> (<span class="id"><a href="mathcomp.analysis.measure.html#measure_series.T">m</a></span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}^<span class="id">nat</span>) (<span class="id">n</span> : <span class="id">nat</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">mseries</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) : \<span class="id">bar</span> <span class="id">R</span> := \<span class="id">sum_</span>(<span class="id">n</span> &lt;= <span class="id"><a href="mathcomp.analysis.sequences.html#ereal_series">k</a></span> &lt;<span class="id">oo</span>) <span class="id">m</span> <span class="id">k</span> <span class="id">A</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">mseries0</span> : <span class="id">mseries</span> <span class="id">set0</span> = 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof129')">Proof.</span></div>
<div class="proofscript" id="proof129">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">mseries</span> <span class="id">ereal_series</span> <span class="id">eseries0</span>. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">mseries_ge0</span> <span class="id">B</span> : 0 &lt;= <span class="id">mseries</span> <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof130')">Proof.</span></div>
<div class="proofscript" id="proof130">
<span class="kwd">by</span> <span class="id"><a name="measure_series.mseries_sigma_additive">rewrite</a></span> /<span class="id">mseries</span> <span class="id">ereal_series</span> <span class="id">nneseries_esum</span>//; <span class="id">exact</span>: <span class="id">esum_ge0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">mseries_sigma_additive</span> : <span class="id">semi_sigma_additive</span> <span class="id">mseries</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof131')">Proof.</span></div>
<div class="proofscript" id="proof131">
<span class="id">move</span>=&gt; <span class="id">F</span> <span class="id">mF</span> <span class="id">tF</span> <span class="id">mUF</span>; <span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span> --&gt; <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> =<br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">lim</a></span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(0 &lt;= <span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">mseries</span> (<span class="id">F</span> <span class="id">i</span>))); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="kwd">in</span> <span class="id">LHS</span>]/<span class="id">mseries</span>.<br/>
&nbsp;&nbsp;<span class="id">transitivity</span> (\<span class="id">sum_</span>(<span class="id">n</span> &lt;= <span class="id">k</span> &lt;<span class="id">oo</span>) \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span>) <span class="id">m</span> <span class="id"><a href="mathcomp.analysis.measure.html#measure_series.m">k</a></span> (<span class="id">F</span> <span class="id">i</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> 2!<span class="id">ereal_series</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: (@<span class="id">eq_eseriesr</span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">k</span> =&gt; <span class="id"><a href="mathcomp.analysis.sequences.html#ereal_series">m</a></span> <span class="id">k</span> (\<span class="id">bigcup_n0</span> <span class="id">F</span> <span class="id">n0</span>))) =&gt; <span class="id">i</span> <span class="id">ni</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">measure_semi_bigcup</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">ereal_series</span> <span class="id"><a href="mathcomp.analysis.measure.html#measure_series.n">nneseries_interchange</a></span>//.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: (@<span class="id">eq_eseriesr</span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">j</span> =&gt; \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | (<span class="id">n</span> &lt;= <span class="id">i</span>)%<span class="id">N</span>) <span class="id">m</span> <span class="id">i</span> (<span class="id">F</span> <span class="id">j</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">i</span> =&gt; \<span class="id">sum_</span>(<span class="id">n</span> &lt;= <span class="id">k</span> &lt;<span class="id">oo</span>) <span class="id">m</span> <span class="id">k</span> (<span class="id">F</span> <span class="id">i</span>))).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">ereal_series</span>.<br/>
<span class="id">apply</span>: <span class="id">is_cvg_ereal_nneg_natsum</span> =&gt; <span class="id">k</span> <span class="id">_</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">mseries</span> <span class="id">ereal_series</span>; <span class="id">exact</span>: <span class="id">nneseries_ge0</span>.<br/>
Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">isMeasure.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">mseries</span><br/>
&nbsp;&nbsp;<span class="id">mseries0</span> <span class="id">mseries_ge0</span> <span class="id">mseries_sigma_additive</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">measure_series</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">mseries</span> {<span class="id">d</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">T</a></span> <span class="id">R</span>}.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">mrestr</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">D</span> : <span class="id">set</span> <span class="id">T</span>)<br/>
&nbsp;&nbsp;(<span class="id"><a name="measure_restr">f</a></span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) (<span class="id">mD</span> : <span class="id">measurable</span> <span class="id">D</span>) := <span class="kwd">fun</span> <span class="id">X</span> =&gt; <span class="id">f</span> (<span class="id">X</span> `&amp;` <span class="id">D</span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id">measure_restr</span>.<br/>
<span class="kwd">Context</span> <span class="id"><a href="mathcomp.analysis.measure.html#measure_restr.T">d</a></span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realFieldType</span>).<br/>
<span class="kwd">Variables</span> (<span class="id">mu</span> : {<span class="id"><a name="restr">measure</a></span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) (<span class="id">D</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id"><a href="mathcomp.analysis.measure.html#restr">mD</a></span> : <span class="id">measurable</span> <span class="id">D</span>).<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id">restr</span> := (<span class="id">mrestr</span> <span class="id">mu</span> <span class="id">mD</span>).<br/>
<br/>
<span class="kwd">Let</span> <span class="id">restr0</span> : <span class="id">restr</span> <span class="id">set0</span> = 0%<span class="id">E</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof132')">Proof.</span></div>
<div class="proofscript" id="proof132">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">mrestr</span> <span class="id">set0I</span> <span class="id">measure0</span>. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id"><a href="mathcomp.analysis.measure.html#measure_ge0">restr_ge0</a></span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">_</span>) : (0 &lt;= <span class="id">restr</span> <span class="id">A</span>)%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof133')">Proof.</span></div>
<div class="proofscript" id="proof133">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">restr</span>; <span class="id">apply</span>: <span class="id">measure_ge0</span>; <span class="id">exact</span>: <span class="id">measurableI</span>. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">restr_sigma_additive</span> : <span class="id">semi_sigma_additive</span> <span class="id">restr</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof134')">Proof.</span></div>
<div class="proofscript" id="proof134">
<span class="id">move</span>=&gt; <span class="id">F</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurableI">mF</a></span> <span class="id">tF</span> <span class="id">mU</span>; <span class="id">pose</span> <span class="id">FD</span> <span class="id">i</span> := <span class="id">F</span> <span class="id">i</span> `&amp;` <span class="id">D</span>.<br/>
<span class="id">have</span> <span class="id">mFD</span> <span class="id">i</span> : <span class="id">measurable</span> (<span class="id">FD</span> <span class="id">i</span>) <span class="kwd">by</span> <span class="id">exact</span>: <span class="id">measurableI</span>.<br/>
<span class="id">have</span> <span class="id">tFD</span> : <span class="id">trivIset</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">setT</a></span> <span class="id">FD</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">trivIsetP</span> =&gt; <span class="id">i</span> <span class="id">j</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIACA">ij</a></span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>/<span class="id">trivIsetP</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set0I">tF</a></span> =&gt; /(<span class="id">_</span> <span class="id">i</span> <span class="id">j</span> <span class="id">Logic.I</span> <span class="id">Logic.I</span> <span class="id">ij</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">FD</span> <span class="id">setIACA</span> =&gt; -&gt;; <span class="id">rewrite</span> <span class="id">set0I</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">restr</span> <span class="id">setI_bigcupl</span>; <span class="id">exact</span>: <span class="id">measure_sigma_additive</span>.<br/>
Qed.</div>
<br/>
<span class="id"><a href="mathcomp.analysis.measure.html#measure_restr.restr_sigma_additive">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">isMeasure.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">restr</span><br/>
&nbsp;&nbsp;<span class="id">restr0</span> <span class="id">restr_ge0</span> <span class="id">restr_sigma_additive</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">measure_restr</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">counting</span> (<span class="id">T</span> : <span class="id">choiceType</span>) (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">X</span> : <span class="id">set</span> <span class="id">T</span>) : \<span class="id">bar</span> <span class="id">R</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> `[&lt; <span class="id">finite_set</span> <span class="id">X</span> &gt;] <span class="kwd">then</span> (#|` <span class="id">fset_set</span> <span class="id">X</span> |)%:<span class="id">R</span>%:<span class="id">E</span> <span class="kwd">else</span> +<span class="id">oo</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">counting</span> {<span class="id">T</span> <span class="id">R</span>}.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="measure_count.D">measure_count</a></span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>).<br/>
<span class="kwd">Variables</span> (<span class="id">D</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">mD</span> : <span class="id">measurable</span> <span class="id">D</span>).<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id">counting</span> := (@<span class="id">counting</span> [<span class="id">choiceType</span> <span class="id">of</span> <span class="id">T</span>] <span class="id">R</span>).<br/>
<br/>
<span class="kwd">Let</span> <span class="id">counting0</span> : <span class="id">counting</span> <span class="id">set0</span> = 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof135')">Proof.</span></div>
<div class="proofscript" id="proof135">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">counting</span> <span class="id">asboolT</span>// <span class="id">fset_set0</span>. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">counting_ge0</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) : 0 &lt;= <span class="id">counting</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof136')">Proof.</span></div>
<div class="proofscript" id="proof136">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">counting</span>; <span class="id">case</span>: <span class="id">ifPn</span>; <span class="id">rewrite</span> ?<span class="id">lee_fin</span>// <span class="id">lee_pinfty</span>. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">counting_sigma_additive</span> : <span class="id">semi_sigma_additive</span> <span class="id">counting</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof137')">Proof.</span></div>
<div class="proofscript" id="proof137">
<span class="id">move</span>=&gt; <span class="id">F</span> <span class="id">mF</span> <span class="id">tF</span> <span class="id">mU</span>.<br/>
<span class="id">have</span> [[<span class="id">i</span> <span class="id">Fi</span>]|<span class="id">infinF</span>] := <span class="id">pselect</span> (<span class="kwd">exists</span> <span class="id">k</span>, <span class="id">infinite_set</span> (<span class="id">F</span> <span class="id">k</span>)).<br/>
&nbsp;&nbsp;<span class="id">have</span> -&gt; : <span class="id">counting</span> (\<span class="id">bigcup_n</span> <span class="id">F</span> <span class="id">n</span>) = +<span class="id">oo</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id">counting</span> <span class="id">asboolF</span>//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">contra_not</span> <span class="id">Fi</span>; <span class="id">exact</span>/<span class="id">sub_finite_set</span>/<span class="id">bigcup_sup</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">cvgeyPge</span> =&gt; <span class="id">M</span>; <span class="id">near</span>=&gt; <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">ni</span> : (<span class="id">i</span> &lt; <span class="id">n</span>)%<span class="id">N</span> <span class="kwd">by</span> <span class="id">near</span>: <span class="id">n</span>; <span class="kwd">exists</span> <span class="id">i</span>.+1.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">bigID</span> (<span class="id">xpred1</span> <span class="id">i</span>))/= <span class="id"><a href="mathcomp.classical.boolp.html#asboolF">big_mkord</a></span> (<span class="id">big_pred1</span> (<span class="id">Ordinal</span> <span class="id">ni</span>))//=.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">X</span> + <span class="id">_</span>]/(<span class="id">counting</span> <span class="id">_</span>) <span class="id">asboolF</span>// <span class="id">addye</span> ?<span class="id">leey</span>//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">gt_eqF</span>// (@<span class="id">lt_le_trans</span> <span class="id">_</span> <span class="id">_</span> 0)//; <span class="id">exact</span>: <span class="id">sume_ge0</span>.<br/>
<span class="id">have</span> {<span class="id">infinF</span>}<span class="id">finF</span> : <span class="kwd">forall</span> <span class="id"><a href="mathcomp.classical.cardinality.html#fset_set">i</a></span>, <span class="id">finite_set</span> (<span class="id">F</span> <span class="id">i</span>) <span class="kwd">by</span> <span class="id">exact</span>/<span class="id">not_forallP</span>.<br/>
<span class="id">pose</span> <span class="id">u</span> : <span class="id">nat</span>^<span class="id">nat</span> := <span class="kwd">fun</span> <span class="id">n</span> =&gt; #|` <span class="id">fset_set</span> (<span class="id">F</span> <span class="id">n</span>) |.<br/>
<span class="id">have</span> <span class="id">sumFE</span> <span class="id">n</span> : \<span class="id">sum_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">counting</span> (<span class="id">F</span> <span class="id">i</span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#|` <span class="id">fset_set</span> (\<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">k</span>) |%:<span class="id">R</span>%:<span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">trivIset_sum_card</span>// <span class="id">natr_sum</span> -<span class="id">sumEFin</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.boolp.html#pselect">apply</a></span>: <span class="id">eq_bigr</span> =&gt; // <span class="id">i</span> <span class="id">_</span>; <span class="id">rewrite</span> /<span class="id">counting</span> <span class="id">asboolT</span>.<br/>
<span class="id">have</span> [<span class="id">cvg_u</span>|<span class="id">dvg_u</span>] := <span class="id">pselect</span> (<span class="id">cvg</span> (<span class="id">nseries</span> <span class="id">u</span>)).<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">N</span> <span class="id">_</span> <span class="id">Nu</span>] : \<span class="kwd">forall</span> <span class="id">n</span> \<span class="id">near</span> \<span class="id">oo</span>, <span class="id">u</span> <span class="id">n</span> = 0%<span class="id">N</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">cvg_nseries_near</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span> --&gt; <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> = \<span class="id">sum_</span>(<span class="id">i</span> &lt; <span class="id">N</span>) <span class="id">counting</span> (<span class="id">F</span> <span class="id">i</span>)); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> -&gt; : \<span class="id">bigcup_i</span> (<span class="id">F</span> <span class="id">i</span>) = \<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">N</span>) <span class="id">F</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">bigcupID</span> (`<span class="id">I_N</span>)) <span class="id">setTI</span> <span class="id">bigcup_mkord</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span> `|` <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> = <span class="id">set0</span>) ?<span class="id">setU0</span>// <span class="id">bigcup0</span>// =&gt; <span class="id">i</span> [<span class="id">_</span> /<span class="id">negP</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">leqNgt</span> =&gt; /<span class="id">Nu</span>/<span class="id">eqP</span>/[!<span class="id">cardfs_eq0</span>]/<span class="id">eqP</span>/<span class="id">fset_set_set0</span> -&gt;.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">counting</span> /= <span class="id">asboolT</span> ?<span class="id">sumFE</span>// -<span class="id">bigcup_mkord</span>; <span class="id">exact</span>: <span class="id">bigcup_finite</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -(<span class="id">cvg_shiftn</span> <span class="id">N</span>)/=.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">_</span> : (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">_</span>) = (<span class="kwd">fun</span>=&gt; \<span class="id">sum_</span>(<span class="id">i</span> &lt; <span class="id">N</span>) <span class="id">counting</span> (<span class="id">F</span> <span class="id">i</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">cvg_cst</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> /<span class="id">index_iota</span> <span class="id">subn0</span> (<span class="id">addnC</span> <span class="id">n</span>) <span class="id">iotaD</span> <span class="id">big_cat</span>/=.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span> + <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> = 0) ?<span class="id">adde0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -{1}(<span class="id">subn0</span> <span class="id">N</span>) <span class="id">big_mkord</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">add0n</span> <span class="id">big_seq</span> <span class="id">big1</span>// =&gt; <span class="id">i</span> /[!<span class="id">mem_iota</span>] =&gt; /<span class="id">andP</span>[<span class="id">NI</span> <span class="id">iNn</span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.measure.html#counting">counting</a></span> <span class="id">asboolT</span>//= -/(<span class="id">u</span> <span class="id">_</span>) <span class="id">Nu</span>.<br/>
<span class="id">have</span> {<span class="id">dvg_u</span>}<span class="id">cvg_F</span> : (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">counting</span> (<span class="id">F</span> <span class="id">i</span>)) --&gt; +<span class="id">oo</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">_</span> : (<span class="kwd">fun</span> <span class="id"><a href="mathcomp.analysis.sequences.html#dvg_nseries">n</a></span> =&gt; <span class="id">_</span>) = [<span class="id">sequence</span> (\<span class="id">sum_</span>(0 &lt;= <span class="id">i</span> &lt; <span class="id">n</span>) (<span class="id">u</span> <span class="id">i</span>))%:<span class="id">R</span>%:<span class="id">E</span>]<span class="id">_n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">cvgenyP</span>/<span class="id">dvg_nseries</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">n</span> /=; <span class="id">under</span> <span class="id">eq_bigr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">counting</span> =&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">asboolT</span>//; <span class="id">over</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">sumEFin</span> <span class="id">natr_sum</span> <span class="id">big_mkord</span>.<br/>
<span class="id">have</span> [<span class="id">UFoo</span>|/<span class="id">contrapT</span>[<span class="id">k</span> <span class="id">UFk</span>]] := <span class="id">pselect</span> (<span class="id">infinite_set</span> (\<span class="id">bigcup_n</span> <span class="id">F</span> <span class="id">n</span>)).<br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#false">rewrite</a></span> /<span class="id">counting</span> <span class="id">asboolF</span>//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">under</span> <span class="id">eq_fun</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">big_mkord</span>.<br/>
<span class="id">suff</span>: <span class="id">false</span> <span class="kwd">by</span> [].<br/>
<span class="id">move</span>: <span class="id">cvg_F</span> =&gt;/<span class="id">cvgeyPge</span>/(<span class="id">_</span> <span class="id">k</span>.+1%:<span class="id">R</span>) [<span class="id">K</span> <span class="id">_</span>] /(<span class="id">_</span> <span class="id">K</span> (<span class="id">leqnn</span> <span class="id">_</span>)) /=; <span class="id">apply</span>: <span class="id">contra_leT</span> =&gt; <span class="id">_</span>.<br/>
<span class="id">rewrite</span> <span class="id">sumFE</span> <span class="id">lte_fin</span> <span class="id">ltr_nat</span> <span class="id">ltnS</span>.<br/>
<span class="id">have</span> -&gt; : <span class="id"><a href="mathcomp.classical.cardinality.html#fset_setK">k</a></span> = #|` <span class="id">fset_set</span> (\<span class="id">bigcup_n</span> <span class="id">F</span> <span class="id">n</span>) |.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">esym</span>/<span class="id">card_eq_fsetP</span>; <span class="id">rewrite</span> <span class="id">fset_setK</span>//; <span class="kwd">exists</span> <span class="id">k</span>.<br/>
<span class="id">apply</span>/<span class="id">fsubset_leq_card</span>; <span class="id">rewrite</span> -<span class="id">fset_set_sub</span> //.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; /= <span class="id">t</span>; <span class="id">rewrite</span> -<span class="id">bigcup_mkord</span> =&gt; -[<span class="id">m</span> <span class="id">_</span> <span class="id">Fmt</span>]; <span class="kwd">exists</span> <span class="id">m</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">bigcup_mkord</span>; <span class="id">exact</span>: <span class="id">bigcup_finite</span>.<br/>
- <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">k</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">isMeasure.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">counting</span><br/>
&nbsp;&nbsp;<span class="id"><a name="big_trivIset">counting0</a></span> <span class="id">counting_ge0</span> <span class="id">counting_sigma_additive</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">measure_count</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">big_trivIset</span> (<span class="id">I</span> : <span class="id">choiceType</span>) <span class="id">D</span> <span class="id">T</span> (<span class="id">R</span> : <span class="kwd">Type</span>) (<span class="id">idx</span> : <span class="id">R</span>)<br/>
&nbsp;&nbsp;&nbsp;(<span class="id">op</span> : <span class="id">Monoid.com_law</span> <span class="id">idx</span>) (<span class="id">A</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) (<span class="id">F</span> : <span class="id">set</span> <span class="id">T</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">finite_set</span> <span class="id">D</span> -&gt; <span class="id">trivIset</span> <span class="id">D</span> <span class="id">A</span> -&gt; <span class="id">F</span> <span class="id">set0</span> = <span class="id">idx</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">i</span> &lt;- <span class="id">fset_set</span> <span class="id"><a href="mathcomp.classical.boolp.html#Pchoice">D</a></span>) <span class="id">F</span> (<span class="id">A</span> <span class="id">i</span>) =<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">X</span> &lt;- (<span class="id">A</span> @` <span class="id">fset_set</span> <span class="id">D</span>)%<span class="id">fset</span>) <span class="id">F</span> <span class="id">X</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof138')">Proof.</span></div>
<div class="proofscript" id="proof138">
<span class="id">elim</span>/<span class="id">Pchoice</span>: <span class="id">R</span> =&gt; <span class="id">R</span> <span class="kwd">in</span> <span class="id">idx</span> <span class="id">op</span> <span class="id">F</span> *.<br/>
<span class="id">move</span>=&gt; <span class="id">Dfin</span> <span class="id">Atriv</span> <span class="id">F0</span>; <span class="id">symmetry</span>.<br/>
<span class="id">pose</span> <span class="id">D</span>' := [<span class="id">fset</span> <span class="id">i</span> <span class="kwd">in</span> <span class="id">fset_set</span> <span class="id">D</span> | <span class="id">A</span> <span class="id">i</span> != <span class="id">set0</span>]%<span class="id">fset</span>.<br/>
<span class="id">transitivity</span> (\<span class="id">big</span>[<span class="id">op</span>/<span class="id">idx</span>]<span class="id">_</span>(<span class="id">X</span> &lt;- (<span class="id">A</span> @` <span class="id">D</span>')%<span class="id">fset</span>) <span class="id">F</span> <span class="id">X</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">perm_big_supp</span>; <span class="id">rewrite</span> <span class="id">uniq_perm</span> ?<span class="id">filter_uniq</span>//=.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">X</span>; <span class="id">rewrite</span> !<span class="id">mem_filter</span>; <span class="id">case</span>: (<span class="id">eqVneq</span> (<span class="id">F</span> <span class="id">X</span>) <span class="id">idx</span>) =&gt; //= <span class="id">FXNidx</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">imfsetP</span>/<span class="id">imfsetP</span>=&gt; -[<span class="id">i</span>/=]; <span class="id">rewrite</span> ?(<span class="id">inE</span>, <span class="id">in_fset_set</span>)//=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">Di</span> <span class="id">XAi</span>; <span class="kwd">exists</span> <span class="id">i</span>; <span class="id">rewrite</span> // !(<span class="id">inE</span>, <span class="id">in_fset_set</span>)//=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">mem_set</span> <span class="id">Di</span>)/= -<span class="id">XAi</span>; <span class="id">apply</span>: <span class="id">contra_neq</span> <span class="id">FXNidx</span> =&gt; -&gt;.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">andP</span>[<span class="id">Di</span> <span class="id">AiN0</span>] <span class="id">XAi</span>; <span class="kwd">exists</span> <span class="id">i</span>; <span class="id">rewrite</span> ?<span class="id">in_fset_set</span>.<br/>
<span class="id">rewrite</span> <span class="id">big_imfset</span>//=; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">i</span> <span class="id">j</span>; <span class="id">rewrite</span> !(<span class="id">inE</span>, <span class="id">in_fset_set</span>)//= =&gt; /<span class="id">andP</span>[+ +] /<span class="id">andP</span>[+ +].<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> !<span class="id">inE</span> =&gt; <span class="id">Di</span> /<span class="id">set0P</span>[<span class="id">x</span> <span class="id">Aix</span>] <span class="id">Dj</span> <span class="id">_</span> <span class="id">Aij</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: (<span class="id">Atriv</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Di</span> <span class="id">Dj</span>); <span class="kwd">exists</span> <span class="id">x</span>; <span class="id">split</span>=&gt; //; <span class="id">rewrite</span> -<span class="id">Aij</span>.<br/>
<span class="id">apply</span>: <span class="id">perm_big_supp</span>; <span class="id">rewrite</span> <span class="id">uniq_perm</span> ?<span class="id">filter_uniq</span>//= =&gt; <span class="id">i</span>.<br/>
<span class="id"><a href="mathcomp.classical.cardinality.html#in_fset_set">rewrite</a></span> !<span class="id">mem_filter</span>; <span class="id">case</span>: (<span class="id">eqVneq</span> (<span class="id">F</span> (<span class="id">A</span> <span class="id">i</span>)) <span class="id">idx</span>) =&gt; //= <span class="id">FAiidx</span>.<br/>
<span class="id">rewrite</span> !(<span class="id">in_fset_set</span>, <span class="id">inE</span>)//=; <span class="id">case</span>: (<span class="id">boolP</span> (<span class="id">i</span> \<span class="kwd">in</span> <span class="id">D</span>)) =&gt; //= <span class="id">Di</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">contra_neq</span> <span class="id">FAiidx</span> =&gt; -&gt;.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">covering</span>.<br/>
<span class="kwd">Context</span> {<span class="id">T</span> : <span class="kwd">Type</span>}.<br/>
<span class="kwd">Implicit</span> <span class="kwd">Type</span> (<span class="id">C</span> : <span class="kwd">forall</span> <span class="id">I</span>, <span class="id">set</span> (<span class="id">set</span> <span class="id">I</span>)).<br/>
<span class="kwd">Implicit</span> <span class="kwd">Type</span> (<span class="id">P</span> : <span class="kwd">forall</span> <span class="id">I</span>, <span class="id">set</span> <span class="id">I</span> -&gt; <span class="id">set</span> (<span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>)).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">covered_by</span> <span class="id">C</span> <span class="id">P</span> :=<br/>
&nbsp;&nbsp;[<span class="id">set</span> <span class="id">X</span> : <span class="id">set</span> <span class="id">T</span> | <span class="kwd">exists</span> <span class="id">I</span> <span class="id">D</span> <span class="id">A</span>, [/\ <span class="id">C</span> <span class="id">I</span> <span class="id">D</span>, <span class="id">P</span> <span class="id">I</span> <span class="id">D</span> <span class="id">A</span> &amp; <span class="id">X</span> = \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">D</span>) <span class="id">A</span> <span class="id"><a href="mathcomp.analysis.measure.html#covered_by">i</a></span>]].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">covered_bySr</span> <span class="id">C</span> <span class="id">P</span> <span class="id">P</span>' : (<span class="kwd">forall</span> <span class="id">I</span> <span class="id">D</span> <span class="id">A</span>, <span class="id">P</span> <span class="id">I</span> <span class="id">D</span> <span class="id">A</span> -&gt; <span class="id">P</span>' <span class="id">I</span> <span class="id">D</span> <span class="id">A</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">covered_by</span> <span class="id">C</span> <span class="id">P</span> `&lt;=` <span class="id">covered_by</span> <span class="id">C</span> <span class="id">P</span>'.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof139')">Proof.</span></div>
<div class="proofscript" id="proof139">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">PP</span>' <span class="id">X</span> [<span class="id"><a name="covered_byP">I</a></span> [<span class="id">D</span> [<span class="id">A</span> [<span class="id">CX</span> <span class="id">PX</span> -&gt;]]]]; <span class="kwd">exists</span> <span class="id">I</span>, <span class="id">D</span>, <span class="id">A</span>; <span class="id">split</span>=&gt; //; <span class="id">apply</span>: <span class="id">PP</span>'.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">covered_byP</span> <span class="id">C</span> <span class="id">P</span> <span class="id">I</span> <span class="id">D</span> <span class="id">A</span> : <span class="id">C</span> <span class="id">I</span> <span class="id">D</span> -&gt; <span class="id">P</span> <span class="id">I</span> <span class="id">D</span> <span class="id">A</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">covered_by</span> <span class="id">C</span> <span class="id">P</span> (\<span class="id">bigcup_</span>(<span class="id">i</span>  <span class="kwd">in</span> <span class="id">D</span>) <span class="id">A</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof140')">Proof.</span></div>
<div class="proofscript" id="proof140">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">CID</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">PIDA</a></span>; <span class="kwd">exists</span> <span class="id">I</span>, <span class="id">D</span>, <span class="id">A</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">covered_by_finite</a></span> <span class="id">P</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">I</span> (<span class="id">D</span> : <span class="id">set</span> <span class="id">I</span>) <span class="id">A</span>, (<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">D</span> <span class="id">i</span> -&gt; <span class="id">A</span> <span class="id">i</span> = <span class="id">set0</span>) -&gt; <span class="id">P</span> <span class="id">I</span> <span class="id">D</span> <span class="id">A</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> (<span class="id">I</span> : <span class="id">pointedType</span>) <span class="id">D</span> <span class="id">A</span>, <span class="id">finite_set</span> <span class="id">D</span> -&gt; <span class="id">P</span> <span class="id">I</span> <span class="id"><a href="mathcomp.analysis.measure.html#covered_by">D</a></span> <span class="id">A</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> <span class="id">nat</span> `<span class="id">I_</span>#|` <span class="id">fset_set</span> <span class="id">D</span>| (<span class="id">A</span> \<span class="id">o</span> <span class="id">nth</span> <span class="id">point</span> (<span class="id">fset_set</span> <span class="id">D</span>))) -&gt;<br/>
&nbsp;&nbsp;<span class="id">covered_by</span> (@<span class="id">finite_set</span>) <span class="id">P</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">set</span> <span class="id">X</span> : <span class="id">set</span> <span class="id">T</span> | <span class="kwd">exists</span> <span class="id">n</span> <span class="id">A</span>, [/\ <span class="id">P</span> <span class="id">nat</span> `<span class="id">I_n</span> <span class="id">A</span> &amp; <span class="id">X</span> = \<span class="id">bigcup_</span>(<span class="id"><a href="mathcomp.classical.classical_sets.html#cover">i</a></span> &lt; <span class="id">n</span>) <span class="id">A</span> <span class="id">i</span>]].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof141')">Proof.</span></div>
<div class="proofscript" id="proof141">
<span class="id">move</span>=&gt; <span class="id">P0</span> <span class="id">Pc</span>; <span class="id">apply</span>/<span class="id">predeqP</span>=&gt; <span class="id">X</span>; <span class="id">rewrite</span> /<span class="id">covered_by</span> /<span class="id">cover</span>/=; <span class="id">split</span>; <span class="id">last</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#Ppointed">first</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">n</span> [<span class="id">A</span> [<span class="id">Am</span> -&gt;]]]; <span class="kwd">exists</span> <span class="id">nat</span>, `<span class="id">I_n</span>, <span class="id">A</span>; <span class="id">split</span>.<br/>
<span class="id">case</span>; <span class="id">elim</span>/<span class="id">Ppointed</span>=&gt; <span class="id">I</span> [<span class="id">D</span> [<span class="id">A</span> [<span class="id">Dfin</span> <span class="id">Am</span> -&gt;]]].<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> 0%<span class="id">N</span>, (<span class="kwd">fun</span>=&gt; <span class="id">set0</span>); <span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">II0</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#point">P0</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> //= <span class="id">emptyE</span> <span class="id">II0</span> !<span class="id">bigcup0</span>.<br/>
<span class="kwd">exists</span> #|`<span class="id">fset_set</span> <span class="id">D</span>|, (<span class="id">A</span> \<span class="id">o</span> <span class="id">nth</span> <span class="id">point</span> (<span class="id">fset_set</span> <span class="id">D</span>)).<br/>
<span class="id">split</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">Pc</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">bigsetU_fset_set</span>// (<span class="id">big_nth</span> <span class="id">point</span>) <span class="id">big_mkord</span> <span class="id">bigcup_mkord</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">covered_by_countable</span> <span class="id">P</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">I</span> (<span class="id">D</span> : <span class="id">set</span> <span class="id">I</span>) <span class="id">A</span>, (<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">D</span> <span class="id">i</span> -&gt; <span class="id">A</span> <span class="id">i</span> = <span class="id">set0</span>) -&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">P</a></span> <span class="id">I</span> <span class="id">D</span> <span class="id">A</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">D</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">A</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) (<span class="id">f</span> : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> -&gt; <span class="id">I</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">set_surj</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.cardinality.html#countable">nat</a></span>] <span class="id">D</span> <span class="id">f</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> <span class="id">I</span> <span class="id">D</span> <span class="id">A</span> -&gt; <span class="id">P</span> <span class="id"><a href="mathcomp.analysis.measure.html#covering.T">nat</a></span> [<span class="id">set</span>: <span class="id">nat</span>] (<span class="id">A</span> \<span class="id">o</span> <span class="id">f</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">covered_by</a></span> (@<span class="id">countable</span>) <span class="id">P</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">set</span> <span class="id">X</span> : <span class="id">set</span> <span class="id">T</span> | <span class="kwd">exists</span> <span class="id">A</span>, [/\ <span class="id">P</span> <span class="id">nat</span> [<span class="id">set</span>: <span class="id">nat</span>] <span class="id">A</span> &amp; <span class="id">X</span> = \<span class="id">bigcup_i</span> <span class="id">A</span> <span class="id">i</span>]].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof142')">Proof.</span></div>
<div class="proofscript" id="proof142">
<span class="id">move</span>=&gt; <span class="id">P0</span> <span class="id">Pc</span>; <span class="id">apply</span>/<span class="id">predeqP</span>=&gt; <span class="id">X</span>; <span class="id">rewrite</span> /<span class="id">covered_by</span> /<span class="id">cover</span>/=; <span class="id">split</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">A</span> [<span class="id">Am</span> -&gt;]]; <span class="kwd">exists</span> <span class="id">nat</span>, [<span class="id">set</span>: <span class="id">nat</span>], <span class="id">A</span>; <span class="id">split</span>.<br/>
<span class="id">case</span>; <span class="id">elim</span>/<span class="id">Ppointed</span>=&gt; <span class="id">I</span> [<span class="id">D</span> [<span class="id">A</span> [<span class="id"><a href="mathcomp.classical.cardinality.html#emptyE">Dcnt</a></span> <span class="id">Am</span> -&gt;]]].<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="kwd">fun</span>=&gt; <span class="id">set0</span>); <span class="id">split</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">P0</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">emptyE</span> <span class="id">bigcup_set0</span> <span class="id">bigcup0</span>.<br/>
<span class="id">have</span> /<span class="id">pfcard_geP</span>[-&gt;|[<span class="id">f</span>]] := <span class="id">Dcnt</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="kwd">fun</span>=&gt; <span class="id">set0</span>); <span class="id">split</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">P0</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id">bigcup_set0</span> <span class="id">bigcup0</span>.<br/>
<span class="id">pose</span> <span class="id">g</span> := [<span class="id">splitsurjfun</span> <span class="id">of</span> <span class="id">split</span> <span class="id">f</span>].<br/>
<span class="kwd">exists</span> (<span class="id">A</span> \<span class="id">o</span> <span class="id">g</span>); <span class="id">split</span>=&gt; /=; <span class="id">first</span> <span class="id">exact</span>: <span class="id">Pc</span> <span class="id">Am</span>.<br/>
<span class="id">apply</span>/<span class="id">predeqP</span>=&gt; <span class="id">x</span>; <span class="id">split</span>=&gt; [[<span class="id">i</span> <span class="id">Di</span> <span class="id">Aix</span>]|[<span class="id">n</span> <span class="id">_</span> <span class="id">Afnx</span>]].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">g</span>^-1%<span class="id">FUN</span> <span class="id">i</span>) =&gt; //=; <span class="id">rewrite</span> <span class="id">invK</span>// <span class="id">inE</span>.<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">g</span> <span class="id">n</span>) =&gt; //; <span class="id">apply</span>: <span class="id">funS</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">covering</span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id">SetRing</span>.<br/>
<span class="kwd">Definition</span> <span class="id">type</span> (<span class="id">T</span> : <span class="kwd">Type</span>) := <span class="id">T</span>.<br/>
<span class="kwd">Definition</span> <span class="id">display</span> : <span class="id">measure_display</span> -&gt; <span class="id">measure_display</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof143')">Proof.</span></div>
<div class="proofscript" id="proof143">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">SetRing</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> {<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>}.<br/>
<br/>
<span class="kwd">Notation</span> <span class="id">rT</span> := (<span class="id">type</span> <span class="id">T</span>).<br/>
<span class="kwd">Canonical</span> <span class="id">ring_eqType</span> := <span class="id">EqType</span> <span class="id">rT</span> <span class="id">ptclass</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">ring_choiceType</span> := <span class="id">ChoiceType</span> <span class="id">rT</span> <span class="id">ptclass</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">ring_ptType</span> := <span class="id">PointedType</span> <span class="id">rT</span> <span class="id"><a href="mathcomp.analysis.measure.html#SetRing.SetRing.d">ptclass</a></span>.<br/>
#[<span class="id">export</span>]<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">isRingOfSets.Build</span> (<span class="id">display</span> <span class="id">d</span>) <span class="id"><a href="mathcomp.analysis.measure.html#SetRing.SetRing.T">rT</a></span> <span class="id">ptclass</span><br/>
&nbsp;&nbsp;(@<span class="id">setring0</span> <span class="id">T</span> <span class="id">measurable</span>) (@<span class="id">setringU</span> <span class="id">T</span> <span class="id">measurable</span>) (@<span class="id">setringDI</span> <span class="id">T</span> <span class="id">measurable</span>).<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> "<span class="id">d</span> .-<span class="id">ring</span>" := (<span class="id">display</span> <span class="id">d</span>) (<span class="kwd">at</span> <span class="id">level</span> 1, <span class="id">format</span> "<span class="id">d</span> .-<span class="id">ring</span>").<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> "<span class="id">d</span> .-<span class="id">ring</span>.-<span class="id">measurable</span>" :=<br/>
&nbsp;&nbsp;((<span class="id">d</span>%<span class="id">mdisp</span>.-<span class="id">ring</span>).-<span class="id">measurable</span> : <span class="id">set</span> (<span class="id">set</span> (<span class="id">type</span> <span class="id">_</span>))).<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Definition</span> <span class="id">measurable_fin_trivIset</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">T</span>) :=<br/>
&nbsp;&nbsp;[<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#SetRing.SetRing.T">A</a></span> | <span class="kwd">exists</span> <span class="id">B</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">T</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[/\ <span class="id">A</span> = \<span class="id">bigcup_</span>(<span class="id">X</span> <span class="kwd">in</span> <span class="id">B</span>) <span class="id">X</span>, <span class="kwd">forall</span> <span class="id">X</span> : <span class="id">set</span> <span class="id">T</span>, <span class="id">B</span> <span class="id">X</span> -&gt; <span class="id">measurable</span> <span class="id">X</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">finite_set</span> <span class="id">B</span> &amp; <span class="id">trivIset</span> <span class="id">B</span> <span class="id">id</span>]].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">ring_measurableE</span> : <span class="id">d</span>.-<span class="id">ring</span>.-<span class="id">measurable</span> = <span class="id">measurable_fin_trivIset</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof144')">Proof.</span></div>
<div class="proofscript" id="proof144">
<span class="id"><a href="mathcomp.analysis.measure.html#fin_bigcup_measurable">apply</a></span>/<span class="id">seteqP</span>; <span class="id">split</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">B</span> [-&gt; <span class="id">Bm</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#sub_gen_smallest">Bfin</a></span> <span class="id">Btriv</span>]]; <span class="id">apply</span>: <span class="id">fin_bigcup_measurable</span> =&gt; //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span> <span class="id">Di</span>; <span class="id">apply</span>: <span class="id">sub_gen_smallest</span>; <span class="id">apply</span>: <span class="id">Bm</span>.<br/>
<span class="id">have</span> <span class="id">mdW</span> <span class="id">A</span> : <span class="id">measurable</span> <span class="id">A</span> -&gt; <span class="id">measurable_fin_trivIset</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">Am</span>; <span class="kwd">exists</span> [<span class="id">set</span> <span class="id">A</span>]; <span class="id">split</span>; <span class="id">do</span> ?<span class="kwd">by</span> [<span class="id">rewrite</span> <span class="id">bigcup_set1</span>|<span class="id">move</span>=&gt; ? -&gt;|].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; ? ? -&gt; -&gt;.<br/>
<span class="id">have</span> <span class="id">mdI</span> : <span class="id">setI_closed</span> <span class="id">measurable_fin_trivIset</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">_</span> <span class="id">_</span> [<span class="id">A</span> [-&gt; <span class="id">Am</span> <span class="id">Afin</span> <span class="id">Atriv</span>]] [<span class="id"><a href="mathcomp.classical.classical_sets.html#setI_bigcupr">B</a></span> [-&gt; <span class="id">Bm</span> <span class="id">Bfin</span> <span class="id">Btriv</span>]].<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_setM">rewrite</a></span> <span class="id">setI_bigcupl</span>; <span class="id">under</span> <span class="id">eq_bigcupr</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">setI_bigcupr</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">bigcup_setM</span> -(<span class="id">bigcup_image</span> <span class="id">_</span> <span class="id">_</span> <span class="id">id</span>).<br/>
&nbsp;&nbsp;<span class="id">eexists</span>; <span class="id">split</span>; [<span class="id">reflexivity</span> | | <span class="id">exact</span>/<span class="id">finite_image</span>/<span class="id">finite_setM</span> |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset_sets">move</a></span>=&gt; <span class="id">_</span> [<span class="id">X</span> [? ?] &lt;-]; <span class="id">apply</span>: <span class="id">measurableI</span>; [<span class="id">apply</span>: <span class="id">Am</span>|<span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#setIACA">Bm</a></span>].<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">trivIset_sets</span> =&gt; -[<span class="id">a</span> <span class="id">b</span>] [<span class="id">a</span>' <span class="id">b</span>']/= [<span class="id">Xa</span> <span class="id">Xb</span>] [<span class="id">Xa</span>' <span class="id">Xb</span>']; <span class="id">rewrite</span> <span class="id">setIACA</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">x</span> [<span class="id">Ax</span> <span class="id"><a href="mathcomp.analysis.measure.html#finN0_bigcap_closed">Bx</a></span>]]; <span class="id">rewrite</span> (<span class="id">Atriv</span> <span class="id">a</span> <span class="id">a</span>') 1?(<span class="id">Btriv</span> <span class="id">b</span> <span class="id">b</span>')//; <span class="kwd">exists</span> <span class="id">x</span>.<br/>
<span class="id">have</span> <span class="id">mdisj_bigcap</span> : <span class="id">finN0_bigcap_closed</span> <span class="id">measurable_fin_trivIset</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">finN0_bigcap_closedP</span>/<span class="id">mdI</span>.<br/>
<span class="id">have</span> <span class="id">mDbigcup</span> <span class="id">I</span> (<span class="id">D</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">B</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) : <span class="id">finite_set</span> <span class="id">D</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">measurable</span> <span class="id">A</span> -&gt; (<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">D</span> <span class="id">i</span> -&gt; <span class="id">measurable</span> (<span class="id">B</span> <span class="id">i</span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">measurable_fin_trivIset</span> (<span class="id">A</span> `\` \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">D</span>) <span class="id">B</span> <span class="id">i</span>).<br/>
&nbsp;&nbsp;<span class="id">have</span> [-&gt;|/<span class="id">set0P</span> <span class="id">D0</span>] := <span class="id">eqVneq</span> <span class="id">D</span> <span class="id">set0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">bigcup0</span>// <span class="id">setD0</span> =&gt; *; <span class="id">apply</span>: <span class="id">mdW</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">Dfin</span> <span class="id">Am</span> <span class="id">Bm</span>; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.analysis.measure.html#semi_measurableD">bigcupDr</a></span>//; <span class="id">apply</span>: <span class="id">mdisj_bigcap</span>=&gt; // <span class="id">i</span> <span class="id">Di</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">have</span> [<span class="id">F</span> [<span class="id">Ffin</span> <span class="id">Fm</span> -&gt; ?]] := <span class="id">semi_measurableD</span> <span class="id">A</span> (<span class="id">B</span> <span class="id">i</span>) <span class="id">Am</span> (<span class="id">Bm</span> <span class="id">_</span> <span class="id">Di</span>); <span class="kwd">exists</span> <span class="id">F</span>.<br/>
<span class="id">have</span> <span class="id">mdU</span> : <span class="id">fin_trivIset_closed</span> <span class="id">measurable_fin_trivIset</span>.<br/>
&nbsp;&nbsp;<span class="id">elim</span>/<span class="id">Pchoice</span>=&gt; <span class="id">I</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">D</a></span> <span class="id">F</span> <span class="id">Dfin</span> <span class="id">Ftriv</span> <span class="id">Fm</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> /(<span class="id">_</span> <span class="id">_</span> (<span class="id">set_mem</span> <span class="id">_</span>))/<span class="id">cid</span>-/(<span class="id">all_sig_cond_dep</span> (<span class="kwd">fun</span>=&gt; <span class="id">set0</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">G</span> /(<span class="id">_</span> <span class="id">_</span> (<span class="id">mem_set</span> <span class="id">_</span>))<span class="id">GP</span>] := <span class="id">Fm</span> <span class="id">_</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="id">under</span> <span class="id">eq_bigcupr</span> =&gt; <span class="id">i</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#id">Di</a></span> <span class="id">do</span> <span class="id">case</span>: (<span class="id">GP</span> <span class="id">i</span> <span class="id">Di</span>) =&gt; -&gt;.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">bigcup_setM_dep</span> -(<span class="id">bigcup_image</span> <span class="id">_</span> <span class="id">_</span> <span class="id">id</span>); <span class="id">eexists</span>; <span class="id">split</span>=&gt; //.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.cardinality.html#finite_image">move</a></span>=&gt; <span class="id">_</span> [<span class="id">i</span> [<span class="id">Di</span> <span class="id">Gi</span>] &lt;-]; <span class="id">have</span> [<span class="id">_</span> + <span class="id">_</span> <span class="id">_</span>] := <span class="id">GP</span> <span class="id">i</span>.1 <span class="id">Di</span>; <span class="id">apply</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">finite_image</span>; <span class="id">apply</span>: <span class="id">finite_setMR</span>=&gt; // <span class="id">i</span> <span class="id">Di</span>; <span class="id">have</span> [] := <span class="id">GP</span> <span class="id">i</span> <span class="id">Di</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">trivIset_sets</span> =&gt; -[<span class="id">i</span> <span class="id">X</span>] [<span class="id">j</span> <span class="id">Y</span>] /= [<span class="id">Di</span> <span class="id">Gi</span>] [<span class="id">Dj</span> <span class="id">Gj</span>] <span class="id">XYN0</span>.<br/>
&nbsp;&nbsp;<span class="id">suff</span> <span class="id">eqij</span> : <span class="id">i</span> = <span class="id">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> {<span class="id">i</span>}<span class="id">eqij</span> <span class="kwd">in</span> <span class="id">Di</span> <span class="id">Gi</span> *; <span class="id">have</span> [<span class="id">_</span> <span class="id">_</span> <span class="id">_</span> /(<span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">XYN0</span>)-&gt;] := <span class="id">GP</span> <span class="id">j</span> <span class="id">Dj</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">Ftriv</span> =&gt; //; <span class="id">have</span> [-&gt; <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>] := <span class="id">GP</span> <span class="id">j</span> <span class="id">Dj</span>; <span class="id">have</span> [-&gt; <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>] := <span class="id">GP</span> <span class="id">i</span> <span class="id">Di</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>: <span class="id">XYN0</span> =&gt; [<span class="id"><a href="mathcomp.analysis.measure.html#SetRing.measurable_fin_trivIset">x</a></span> [<span class="id">Xx</span> <span class="id">Yx</span>]]; <span class="kwd">exists</span> <span class="id">x</span>; <span class="id">split</span>; [<span class="kwd">exists</span> <span class="id">X</span>|<span class="kwd">exists</span> <span class="id">Y</span>].<br/>
<span class="id">have</span> <span class="id">mdDI</span> : <span class="id">setDI_closed</span> <span class="id">measurable_fin_trivIset</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">mA</span> <span class="id">mB</span>; <span class="id">have</span> [<span class="id">F</span> [-&gt; <span class="id">Fm</span> <span class="id">Ffin</span> <span class="id">Ftriv</span>]] := <span class="id">mA</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">F</span>' [-&gt; <span class="id">F</span>'<span class="id">m</span> <span class="id">F</span>'<span class="id">fin</span> <span class="id">F</span>'<span class="id">triv</span>]] := <span class="id">mB</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> [-&gt;|/<span class="id">set0P</span> <span class="id">F</span>'<span class="id">N0</span>] := <span class="id">eqVneq</span> <span class="id">F</span>' <span class="id">set0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">bigcup_set0</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset_setIr">setD0</a></span>; <span class="kwd">exists</span> <span class="id">F</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">setD_bigcupl</span>; <span class="id">apply</span>: <span class="id">mdU</span> =&gt; //; <span class="id">first</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">trivIset_setIr</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">X</span> <span class="id">DX</span>; <span class="id">rewrite</span> -<span class="id">bigcupDr</span>//; <span class="id">apply</span>: <span class="id">mdisj_bigcap</span> =&gt; //.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">Y</span> <span class="id">DY</span>; <span class="id">case</span>: (<span class="id">semi_measurableD</span> <span class="id">X</span> <span class="id">Y</span>); [<span class="id"><a href="mathcomp.classical.classical_sets.html#smallest_sub">exact</a></span>: <span class="id">Fm</span>|<span class="id">exact</span>: <span class="id">F</span>'<span class="id">m</span>|].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">G</span> [<span class="id">Gfin</span> <span class="id">Gm</span> -&gt; <span class="id">Gtriv</span>]; <span class="kwd">exists</span> <span class="id">G</span>.<br/>
<span class="id">apply</span>: <span class="id">smallest_sub</span> =&gt; //; <span class="id">split</span>=&gt; //; <span class="id">first</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">mdW</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">mA</span> <span class="id">mB</span>; <span class="id">rewrite</span> -(<span class="id">setUIDK</span> <span class="id">B</span> <span class="id">A</span>) <span class="id">setUA</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">X</span> `|` <span class="id">_</span>]<span class="id">setUidl</span>//.<br/>
<span class="id">rewrite</span> -<span class="id">bigcup2inE</span>; <span class="id">apply</span>: <span class="id">mdU</span> =&gt; //; <span class="id">last</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; [|[]]// <span class="id">_</span>; <span class="id">apply</span>: <span class="id">mdDI</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; [|[]]// [|[]]//= <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.measure.html#SetRing.SetRing.d">_</a></span> []; <span class="id">rewrite</span> <span class="id">setDE</span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#set">setIA</a></span> =&gt; <span class="id">X</span> [] []//.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_subring</span> : (<span class="id">d</span>.-<span class="id">measurable</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">T</span>)) `&lt;=` <span class="id">d</span>.-<span class="id">ring</span>.-<span class="id">measurable</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof145')">Proof.</span></div>
<div class="proofscript" id="proof145">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#set">measurable</a></span> =&gt; <span class="id">X</span> <span class="id">Xmeas</span> /= <span class="id">M</span> /= [<span class="id">_</span>]; <span class="id">apply</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">ring_finite_set</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">rT</span>) : <span class="id">measurable</span> <span class="id">A</span> -&gt; <span class="kwd">exists</span> <span class="id">B</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">T</span>),<br/>
&nbsp;&nbsp;[/\ <span class="id">finite_set</span> <span class="id">B</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">X</span>, <span class="id"><a href="mathcomp.analysis.measure.html#measurable">B</a></span> <span class="id">X</span> -&gt; <span class="id">X</span> !=<span class="id">set0</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">trivIset</span> <span class="id">B</span> <span class="id">id</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">X</span> : <span class="id">set</span> <span class="id">T</span>, <span class="id">X</span> \<span class="kwd">in</span> <span class="id">B</span> -&gt; <span class="id">measurable</span> <span class="id">X</span>) &amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">A</span> = \<span class="id">bigcup_</span>(<span class="id">X</span> <span class="kwd">in</span> <span class="id">B</span>) <span class="id">X</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof146')">Proof.</span></div>
<div class="proofscript" id="proof146">
<span class="id">rewrite</span> <span class="id">ring_measurableE</span> =&gt; -[<span class="id">B</span> [-&gt; <span class="id">Bm</span> <span class="id">Bfin</span> <span class="id">Btriv</span>]].<br/>
<span class="kwd">exists</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#subIsetl">B</a></span> `&amp;` [<span class="id">set</span> <span class="id">X</span> | <span class="id">X</span> != <span class="id">set0</span>]); <span class="id">split</span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sub_finite_set</span> <span class="id">Bfin</span>; <span class="id">exact</span>: <span class="id">subIsetl</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; ?/= [<span class="id">_</span> /<span class="id">set0P</span>].<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">X</span> <span class="id">Y</span>/= [<span class="id">XB</span> <span class="id">_</span>] [<span class="id">YB</span> <span class="id">_</span>]; <span class="id">exact</span>: <span class="id">Btriv</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">X</span>/= /[!<span class="id">inE</span>] -[] /<span class="id">Bm</span>.<br/>
<span class="id">rewrite</span> <span class="id">bigcup_mkcondr</span>; <span class="id">apply</span>: <span class="id">eq_bigcupr</span> =&gt; <span class="id">X</span> <span class="id">Bx</span>; <span class="id">case</span>: <span class="id">ifPn</span> =&gt; //.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">notin_set</span>/= =&gt; /<span class="id">negP</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">negPn</a></span>/<span class="id">eqP</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">decomp</span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measurable">set</a></span> <span class="id">rT</span>) : <span class="id">set</span> (<span class="id">set</span> <span class="id">T</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#projT1">A</a></span> == <span class="id">set0</span> <span class="kwd">then</span> [<span class="id">set</span> <span class="id">set0</span>] <span class="kwd">else</span><br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id">pselect</span> (<span class="id">measurable</span> <span class="id">A</span>) <span class="id">is</span> <span class="id">left</span> <span class="id">mA</span> <span class="kwd">then</span> <span class="id">projT1</span> (<span class="id">cid</span> (<span class="id">ring_finite_set</span> <span class="id">mA</span>))<br/>
&nbsp;&nbsp;<span class="kwd">else</span> [<span class="id">set</span> <span class="id">A</span>].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">decomp_finite_set</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">rT</span>) : <span class="id">finite_set</span> (<span class="id">decomp</span> <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof147')">Proof.</span></div>
<div class="proofscript" id="proof147">
<span class="id">rewrite</span> /<span class="id">decomp</span>; <span class="id">case</span>: <span class="id"><a name="SetRing.decomp_triv">ifPn</a></span> =&gt; // <span class="id">A0</span>; <span class="id">case</span>: <span class="id"><a href="mathcomp.analysis.measure.html#SetRing.rT">pselect</a></span> =&gt; // <span class="id">X</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#id">cid</a></span> =&gt; /= ? [].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">decomp_triv</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">rT</span>) : <span class="id">trivIset</span> (<span class="id">decomp</span> <span class="id">A</span>) <span class="id">id</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof148')">Proof.</span></div>
<div class="proofscript" id="proof148">
<span class="id">rewrite</span> /<span class="id">decomp</span>; <span class="id">case</span>: <span class="id">ifP</span> =&gt; <span class="id">_</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span> <span class="id">j</span>/= -&gt; -&gt;.<br/>
<span class="id">case</span>: <span class="id">pselect</span> =&gt; // <span class="id">Am</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">case</span>: <span class="id">cid</span> =&gt; //= ? [].<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span> <span class="id">j</span> /= -&gt; -&gt;.<br/>
Qed.</div>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">decomp_triv</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">all_decomp_neq0</span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set0P">set</a></span> <span class="id">rT</span>) :<br/>
&nbsp;&nbsp;<span class="id">A</span> !=<span class="id">set0</span> -&gt; (<span class="kwd">forall</span> <span class="id">X</span>, <span class="id">decomp</span> <span class="id">A</span> <span class="id">X</span> -&gt; <span class="id">X</span> !=<span class="id">set0</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof149')">Proof.</span></div>
<div class="proofscript" id="proof149">
<span class="id">move</span>=&gt; /<span class="id">set0P</span> <span class="id">AN0</span>; <span class="id">rewrite</span> /<span class="id">decomp</span>/= (<span class="id">negPf</span> <span class="id">AN0</span>).<br/>
<span class="id">case</span>: <span class="id">pselect</span> =&gt; //= <span class="id">Am</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#set">cid</a></span> =&gt; //= ? [].<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">X</span> -&gt;; <span class="id">exact</span>/<span class="id">set0P</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">decomp_neq0</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">rT</span>) <span class="id">X</span> : <span class="id">A</span> !=<span class="id">set0</span> -&gt; <span class="id">X</span> \<span class="kwd">in</span> <span class="id">decomp</span> <span class="id">A</span> -&gt; <span class="id">X</span> !=<span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof150')">Proof.</span></div>
<div class="proofscript" id="proof150">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">all_decomp_neq0</span>/(<span class="id">_</span> <span class="id">X</span>) /[!<span class="id">inE</span>]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">decomp_measurable</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">rT</span>) (<span class="id">X</span> : <span class="id"><a href="mathcomp.analysis.measure.html#SetRing.decomp">set</a></span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id">measurable</span> <span class="id">A</span> -&gt; <span class="id">X</span> \<span class="kwd">in</span> <span class="id">decomp</span> <span class="id">A</span> -&gt; <span class="id">measurable</span> <span class="id">X</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof151')">Proof.</span></div>
<div class="proofscript" id="proof151">
<span class="id">rewrite</span> /<span class="id">decomp</span>; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.boolp.html#cid">ifP</a></span> =&gt; <span class="id">_</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">inE</span> =&gt; <span class="id">_</span> -&gt;.<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id">pselect</span> =&gt; // <span class="id"><a href="mathcomp.classical.classical_sets.html#set">Am</a></span> <span class="id">_</span>; <span class="id">case</span>: <span class="id">cid</span> =&gt; //= ? [<span class="id">_</span> <span class="id">_</span> <span class="id">_</span> + <span class="id">_</span>]; <span class="id">apply</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="mathcomp.analysis.measure.html#SetRing.decomp">cover_decomp</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">A</a></span> : <span class="id">set</span> <span class="id">rT</span>) : \<span class="id">bigcup_</span>(<span class="id">X</span> <span class="kwd">in</span> <span class="id">decomp</span> <span class="id">A</span>) <span class="id">X</span> = <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof152')">Proof.</span></div>
<div class="proofscript" id="proof152">
<span class="id">rewrite</span> /<span class="id">decomp</span>; <span class="id">case</span>: <span class="id">ifP</span> =&gt; [/<span class="id"><a href="mathcomp.classical.boolp.html#cid">eqP</a></span>-&gt;|<span class="id">_</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">bigcup0</span>.<br/>
<span class="id">case</span>: <span class="id">pselect</span> =&gt; // <span class="id">Am</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">case</a></span>: <span class="id">cid</span> =&gt; //= ? [].<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">bigcup_set1</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">decomp_sub</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">rT</span>) (<span class="id">X</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">X</span> \<span class="kwd">in</span> <span class="id">decomp</span> <span class="id">A</span> -&gt; <span class="id">X</span> `&lt;=` <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof153')">Proof.</span></div>
<div class="proofscript" id="proof153">
<span class="id">rewrite</span> /<span class="id">decomp</span>; <span class="id">case</span>: <span class="id">ifP</span> =&gt; <span class="id">_</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">inE</span>/= =&gt; -&gt;//.<br/>
<span class="id">case</span>: <span class="id">pselect</span> =&gt; //= <span class="id">Am</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">inE</span> =&gt; -&gt;.<br/>
<span class="kwd">by</span> <span class="id"><a name="SetRing.decomp_set0">case</a></span>: <span class="id">cid</span> =&gt; //= <span class="id">D</span> [<span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> -&gt;] /[!<span class="id">inE</span>] <span class="id">XD</span>; <span class="id">apply</span>: <span class="id">bigcup_sup</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">decomp_set0</span> : <span class="id">decomp</span> <span class="id">set0</span> = [<span class="id">set</span> <span class="id"><a href="mathcomp.analysis.measure.html#SetRing.decomp">set0</a></span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof154')">Proof.</span></div>
<div class="proofscript" id="proof154">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">decomp</span> <span class="id">eqxx</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">decompN0</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">rT</span>) : <span class="id">decomp</span> <span class="id">A</span> != <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof155')">Proof.</span></div>
<div class="proofscript" id="proof155">
<span class="id">rewrite</span> /<span class="id">decomp</span>; <span class="id">case</span>: <span class="id">ifPn</span> =&gt; [<span class="id">_</span>|<span class="id">AN0</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">set0P</span>; <span class="kwd">exists</span> <span class="id">set0</span>.<br/>
<span class="id">case</span>: <span class="id">pselect</span>=&gt; //= <span class="id">Am</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">set0P</span>; <span class="kwd">exists</span> <span class="id">A</span>.<br/>
<span class="id">case</span>: <span class="id">cid</span>=&gt; //= <span class="id">D</span> [<span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Aeq</span>]; <span class="id">apply</span>: <span class="id">contra_neq</span> <span class="id">AN0</span>; <span class="id">rewrite</span> <span class="id">Aeq</span> =&gt; -&gt;.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">bigcup_set0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">measure</span> (<span class="id">R</span> : <span class="id">numDomainType</span>) (<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>)<br/>
&nbsp;&nbsp;(<span class="id">A</span> : <span class="id">set</span> <span class="id">rT</span>) : \<span class="id">bar</span> <span class="id">R</span> := \<span class="id">sum_</span>(<span class="id">X</span> \<span class="kwd">in</span> <span class="id">decomp</span> <span class="id">A</span>) <span class="id">mu</span> <span class="id">X</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">content</span>.<br/>
<span class="kwd">Context</span> {<span class="id">R</span> : <span class="id">realFieldType</span>} (<span class="id">mu</span> : {<span class="id">content</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}).<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id">Rmu</span> := (<span class="id">measure</span> <span class="id">mu</span>).<br/>
<span class="kwd">Arguments</span> <span class="id">big_trivIset</span> {<span class="id">I</span> <span class="id">D</span> <span class="id">T</span> <span class="id">R</span> <span class="id">idx</span> <span class="id">op</span>} <span class="id">A</span> <span class="id">F</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">Rmu_fin_bigcup</span> (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">D</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">finite_set</span> <span class="id">D</span> -&gt; <span class="id">trivIset</span> <span class="id">D</span> <span class="id">F</span> -&gt; (<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">i</span> \<span class="kwd">in</span> <span class="id">D</span> -&gt; <span class="id">measurable</span> (<span class="id">F</span> <span class="id">i</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id">Rmu</span> (\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">D</span>) <span class="id">F</span> <span class="id">i</span>) = \<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">D</span>) <span class="id">mu</span> (<span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof156')">Proof.</span></div>
<div class="proofscript" id="proof156">
<span class="id">move</span>=&gt; <span class="id">Dfin</span> <span class="id">Ftriv</span> <span class="id">Fm</span>; <span class="id">rewrite</span> /<span class="id">measure</span>.<br/>
<span class="id">have</span> <span class="id">mUD</span> : <span class="id">measurable</span> (\<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">D</span>) <span class="id">F</span> <span class="id">i</span> : <span class="id">set</span> <span class="id">rT</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">fin_bigcup_measurable</span> =&gt; // *; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">sub_gen_smallest</a></span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">Fm</span>/<span class="id">mem_set</span>.<br/>
<span class="id">have</span> [-&gt;|/<span class="id">set0P</span>[<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_set1">i0</a></span> <span class="id">Di0</span>]] := <span class="id">eqVneq</span> <span class="id">D</span> <span class="id"><a href="mathcomp.analysis.measure.html#SetRing.decomp">set0</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">bigcup_set0</span> <span class="id">decomp_set0</span> <span class="id">fsbig_set0</span> <span class="id">fsbig_set1</span>.<br/>
<span class="id">set</span> <span class="id">E</span> := <span class="id">decomp</span> <span class="id">_</span>; <span class="id">have</span> <span class="id">Em</span> <span class="id">X</span> := <span class="id">decomp_measurable</span> <span class="id">mUD</span> <span class="id">X</span>.<br/>
<span class="id">transitivity</span> (\<span class="id">sum_</span>(<span class="id">X</span> \<span class="kwd">in</span> <span class="id">E</span>) \<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">D</span>) <span class="id">mu</span> (<span class="id">X</span> `&amp;` <span class="id">F</span> <span class="id">i</span>)).<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">eq_fsbigr</span> =&gt; /= <span class="id">X</span> <span class="id">XE</span>; <span class="id">have</span> <span class="id">XDF</span> : <span class="id">X</span> = \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">D</span>) (<span class="id">X</span> `&amp;` <span class="id">F</span> <span class="id">i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setI_bigcupr</span> <span class="id">setIidl</span>//; <span class="id">exact</span>: <span class="id">decomp_sub</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="kwd">in</span> <span class="id">LHS</span>]<span class="id">XDF</span> <span class="id">content_fin_bigcup</span>//; <span class="id">first</span> <span class="id">exact</span>: <span class="id">trivIset_setIl</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span> /<span class="id">mem_set</span> <span class="id">Di</span>; <span class="id">apply</span>: <span class="id">measurableI</span>; [<span class="id">exact</span>: <span class="id">Em</span>|<span class="id">exact</span>: <span class="id">Fm</span>].<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">XDF</span>; <span class="id">exact</span>: <span class="id">Em</span>.<br/>
<span class="id">rewrite</span> <span class="id">exchange_fsbig</span> //; <span class="id">last</span> <span class="id">exact</span>: <span class="id">decomp_finite_set</span>.<br/>
<span class="id">apply</span>: <span class="id">eq_fsbigr</span> =&gt; <span class="id">i</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIidr">Di</a></span>; <span class="id">have</span> <span class="id">Feq</span> : <span class="id">F</span> <span class="id">i</span> = \<span class="id">bigcup_</span>(<span class="id">X</span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_sup">E</a></span>) (<span class="id">X</span> `&amp;` <span class="id">F</span> <span class="id">i</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">setI_bigcupl</span> <span class="id">setIidr</span>// <span class="id">cover_decomp</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">bigcup_sup</span>; <span class="id">exact</span>: <span class="id">set_mem</span>.<br/>
<span class="id">rewrite</span> -<span class="id">content_fin_bigcup</span> -?<span class="id">Feq</span>//; [<span class="id">exact</span>/<span class="id">decomp_finite_set</span>| | |<span class="id"><a href="mathcomp.analysis.measure.html#measurableI">exact</a></span>/<span class="id">Fm</span>].<br/>
- <span class="id">exact</span>/<span class="id">trivIset_setIr</span>/<span class="id">decomp_triv</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">X</span> /= <span class="id">XE</span>; <span class="id">apply</span>: <span class="id">measurableI</span>; [<span class="id">apply</span>: <span class="id">Em</span>; <span class="id">rewrite</span> <span class="id">inE</span> | <span class="id">exact</span>: <span class="id">Fm</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">RmuE</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">measurable</span> <span class="id">A</span> -&gt; <span class="id">Rmu</span> <span class="id">A</span> = <span class="id">mu</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof157')">Proof.</span></div>
<div class="proofscript" id="proof157">
<span class="id">move</span>=&gt; <span class="id">Am</span>; <span class="id">rewrite</span> -[<span class="id">A</span> <span class="kwd">in</span> <span class="id">LHS</span>](@<span class="id">bigcup_set1</span> <span class="id">_</span> <span class="id">unit</span> <span class="id">_</span> <span class="id">tt</span>).<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">Rmu_fin_bigcup</span>// ?<span class="id">fsbig_set1</span>// =&gt; -[].<br/>
Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">Rmu0</span> : <span class="id">Rmu</span> <span class="id"><a href="mathcomp.analysis.measure.html#SetRing.Rmu_fin_bigcup">set0</a></span> = 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof158')">Proof.</span></div>
<div class="proofscript" id="proof158">
<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_set0">rewrite</a></span> -(<span class="id">bigcup_set0</span> (<span class="kwd">fun</span> <span class="id">_</span> : <span class="id">void</span> =&gt; <span class="id">set0</span>)).<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">Rmu_fin_bigcup</span>// <span class="id">fsbig_set0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">Rmu_ge0</span> <span class="id">A</span> : <span class="id">Rmu</span> <span class="id">A</span> &gt;= 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof159')">Proof.</span></div>
<div class="proofscript" id="proof159">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">sume_ge0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">Rmu_additive</span> : <span class="id">semi_additive</span> <span class="id">Rmu</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof160')">Proof.</span></div>
<div class="proofscript" id="proof160">
<span class="id">apply</span>/(<span class="id">additive2P</span> <span class="id">Rmu0</span>) =&gt; // <span class="id">A</span> <span class="id">B</span> /<span class="id">ring_finite_set</span>[/= {}<span class="id">A</span> [? <span class="id">_</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#subset0">Atriv</a></span> <span class="id">Am</span> -&gt;]].<br/>
<span class="id">move</span>=&gt; /<span class="id">ring_finite_set</span>[/= {}<span class="id">B</span> [? <span class="id">_</span> <span class="id">Btriv</span> <span class="id">Bm</span> -&gt;]].<br/>
<span class="id">rewrite</span> -<span class="id">subset0</span> =&gt; <span class="id">coverAB0</span>.<br/>
<span class="id">have</span> <span class="id">AUBfin</span> : <span class="id">finite_set</span> (<span class="id">A</span> `|` <span class="id">B</span>) <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">finite_setU</span>.<br/>
<span class="id">have</span> <span class="id">AUBtriv</span> : <span class="id">trivIset</span> (<span class="id">A</span> `|` <span class="id">B</span>) <span class="id">id</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">X</span> <span class="id">Y</span> [] <span class="id">ABX</span> [] <span class="id">ABY</span>; <span class="id">do</span> ?<span class="kwd">by</span> [<span class="id">exact</span>: <span class="id">Atriv</span>|<span class="id">exact</span>: <span class="id">Btriv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">u</span> [<span class="id">Xu</span> <span class="id">Yu</span>]]; <span class="id">case</span>: (<span class="id">coverAB0</span> <span class="id">u</span>); <span class="id">split</span>; [<span class="kwd">exists</span> <span class="id">X</span>|<span class="kwd">exists</span> <span class="id">Y</span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">u</span> [<span class="id">Xu</span> <span class="id">Yu</span>]]; <span class="id">case</span>: (<span class="id">coverAB0</span> <span class="id">u</span>); <span class="id">split</span>; [<span class="kwd">exists</span> <span class="id">Y</span>|<span class="kwd">exists</span> <span class="id">X</span>].<br/>
<span class="id">rewrite</span> -<span class="id">bigcup_setU</span> !<span class="id">Rmu_fin_bigcup</span>//=.<br/>
- <span class="id">rewrite</span> <span class="id">fsbigU</span>//= =&gt; [<span class="id">X</span> /= [<span class="id">XA</span> <span class="id">XB</span>]]; <span class="id">have</span> [-&gt;//|/<span class="id">set0P</span>[<span class="id">x</span> <span class="id">Xx</span>]] := <span class="id">eqVneq</span> <span class="id">X</span> <span class="id">set0</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>: (<span class="id">coverAB0</span> <span class="id">x</span>); <span class="id">split</span>; <span class="kwd">exists</span> <span class="id">X</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">X</span> /<span class="id">set_mem</span> [|] /<span class="id">mem_set</span> ?; [<span class="id">exact</span>: <span class="id">Am</span>|<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#SetRing.Rmu_ge0">Bm</a></span>].<br/>
Qed.</div>
<br/>
#[<span class="id">export</span>]<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">isContent.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Rmu</span> <span class="id">Rmu_ge0</span> <span class="id">Rmu_additive</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">content</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">SetRing</span>.<br/>
<span class="kwd">Module</span> <span class="id">Exports</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">ring_eqType</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">ring_choiceType</span>.<br/>
<span class="kwd">Canonical</span> <span class="id">ring_ptType</span>.<br/>
<span class="id">HB.reexport</span> <span class="id">SetRing</span>.<br/>
<span class="kwd">End</span> <span class="id">Exports</span>.<br/>
<span class="kwd">End</span> <span class="id">SetRing</span>.<br/>
<span class="kwd">Export</span> <span class="id">SetRing.Exports</span>.<br/>
<br/>
<span class="kwd">Notation</span> "<span class="id">d</span> .-<span class="id">ring</span>" := (<span class="id">SetRing.display</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 1, <span class="id">format</span> "<span class="id">d</span> .-<span class="id">ring</span>") : <span class="id">measure_display_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">d</span> .-<span class="id">ring</span>.-<span class="id">measurable</span>" :=<br/>
&nbsp;&nbsp;((<span class="id">d</span>%<span class="id">mdisp</span>.-<span class="id">ring</span>).-<span class="id">measurable</span> : <span class="id">set</span> (<span class="id">set</span> (<span class="id">SetRing.type</span> <span class="id">_</span>))) : <span class="id">classical_set_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">le_measure</span> <span class="id">d</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu</span> : {<span class="id">content</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) :<br/>
&nbsp;&nbsp;{<span class="kwd">in</span> <span class="id">measurable</span> &amp;, {<span class="id">homo</span> <span class="id">mu</span> : <span class="id">A</span> <span class="id">B</span> / <span class="id">A</span> `&lt;=` <span class="id">B</span> &gt;-&gt; (<span class="id">A</span> &lt;= <span class="id">B</span>)%<span class="id">E</span>}}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof161')">Proof.</span></div>
<div class="proofscript" id="proof161">
<span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span>; <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leye_eq">rewrite</a></span> ?<span class="id">inE</span> =&gt; <span class="id">mA</span> <span class="id">mB</span> <span class="id">AB</span>; <span class="id">have</span> [|<span class="id">muBfin</span>] := <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#leRHS">leP</a></span> +<span class="id">oo</span>%<span class="id">E</span> (<span class="id">mu</span> <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">leye_eq</span> =&gt; /<span class="id">eqP</span> -&gt;; <span class="id">rewrite</span> <span class="id">leey</span>.<br/>
<span class="id">rewrite</span> -[<span class="id">leRHS</span>]<span class="id">SetRing.RmuE</span>// -[<span class="id">B</span>](<span class="id">setDUK</span> <span class="id">AB</span>) <span class="id">measureU</span>/= ?<span class="id">setDIK</span>//.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">SetRing.RmuE</span> ?<span class="id">lee_addl</span>.<br/>
- <span class="id">exact</span>: <span class="id">sub_gen_smallest</span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurableD</span>; <span class="id">exact</span>: <span class="id">sub_gen_smallest</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measure_le0</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realFieldType</span>)<br/>
&nbsp;&nbsp;(<span class="id">mu</span> : {<span class="id">content</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;(<span class="id">mu</span> <span class="id">A</span> &lt;= 0)%<span class="id"><a name="more_content_semiring_lemmas">E</a></span> = (<span class="id">mu</span> <span class="id">A</span> == 0)%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof162')">Proof.</span></div>
<div class="proofscript" id="proof162">
 <span class="kwd">by</span> <span class="id">case</span>: <span class="id">ltgtP</span> (<span class="id">measure_ge0</span> <span class="id">mu</span> <span class="id">A</span>). Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">more_content_semiring_lemmas</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id"><a name="content_sub_additive">T</a></span> : <span class="id">semiRingOfSetsType</span> <span class="id"><a href="mathcomp.analysis.measure.html#sub_additive">d</a></span>).<br/>
<span class="kwd">Variable</span> <span class="id"><a href="mathcomp.analysis.measure.html#more_content_semiring_lemmas.mu">mu</a></span> : {<span class="id">content</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">content_sub_additive</span> : <span class="id">sub_additive</span> <span class="id">mu</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof163')">Proof.</span></div>
<div class="proofscript" id="proof163">
<span class="id">move</span>=&gt; <span class="id">X</span> <span class="id">A</span> <span class="id">n</span> <span class="id">Am</span> <span class="id">Xm</span> <span class="id">XA</span>; <span class="id">pose</span> <span class="id">B</span> <span class="id">i</span> := <span class="id">A</span>\<span class="id">_</span>`<span class="id">I_n</span> <span class="id">i</span> `&amp;` <span class="id">X</span>.<br/>
<span class="id">have</span> <span class="id">XE</span> : <span class="id">X</span> = \<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_mkord">_</a></span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">B</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">big_distrl</span>/= <span class="id">setIidr</span>// =&gt; <span class="id">x</span> /<span class="id">XA</span>/=.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -!<span class="id">bigcup_mkord</span> =&gt; -[<span class="id">k</span> <span class="id">nk</span> <span class="id">Ax</span>]; <span class="kwd">exists</span> <span class="id">k</span>; <span class="id">rewrite</span> // <span class="id">patchT</span> ?<span class="id">inE</span>.<br/>
<span class="id">have</span> <span class="id">Bm</span> <span class="id">i</span> : <span class="id">measurable</span> (<span class="id">B</span> <span class="id">i</span>).<br/>
&nbsp;&nbsp;<span class="id">case</span>: (<span class="id">ltnP</span> <span class="id">i</span> <span class="id">n</span>) =&gt; <span class="id">ltin</span>; <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">last</a></span> <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">B</span> <span class="id">patchC</span> ?<span class="id">inE</span> ?<span class="id">set0I</span>//= <span class="id">leq_gtF</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">B</span> ?<span class="id">patchT</span> ?<span class="id">inE</span>//; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#patch">measurableI</a></span> =&gt; //; <span class="id">apply</span>: <span class="id">Am</span>.<br/>
<span class="id">have</span> <span class="id">subBA</span> <span class="id">i</span> : <span class="id">B</span> <span class="id">i</span> `&lt;=` <span class="id">A</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">B</span>/<span class="id">patch</span>; <span class="id">case</span>: <span class="id">ifP</span>; <span class="id">rewrite</span> // <span class="id">set0I</span>//= =&gt; <span class="id">_</span> ?.<br/>
<span class="id">have</span> <span class="id">subDUB</span> <span class="id">i</span> : <span class="id">seqDU</span> <span class="id">B</span> <span class="id">i</span> `&lt;=` <span class="id">A</span> <span class="id">i</span> <span class="kwd">by</span>  <span class="id"><a href="mathcomp.analysis.measure.html#more_content_semiring_lemmas.T">move</a></span>=&gt; <span class="id">x</span> [/<span class="id">subBA</span>].<br/>
<span class="id">have</span> <span class="id">DUBm</span> <span class="id">i</span> : <span class="id">measurable</span> (<span class="id">seqDU</span> <span class="id">B</span> <span class="id">i</span> : <span class="id">set</span> (<span class="id">SetRing.type</span> <span class="id">T</span>)).<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">measurableD</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">sub_gen_smallest</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigsetU_measurable</span> =&gt; ? <span class="id">_</span>; <span class="id">apply</span>: <span class="id">sub_gen_smallest</span>.<br/>
<span class="id">have</span> <span class="id">DU0</span> <span class="id">i</span> : (<span class="id">i</span> &gt;= <span class="id">n</span>)%<span class="id"><a href="mathcomp.classical.functions.html#patchC">N</a></span> -&gt; <span class="id">seqDU</span> <span class="id">B</span> <span class="id">i</span> = <span class="id">set0</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">leni</span>; <span class="id">rewrite</span> -<span class="id">subset0</span> =&gt; <span class="id">x</span> []; <span class="id"><a href="mathcomp.analysis.sequences.html#bigsetU_seqDU">rewrite</a></span> /<span class="id">B</span> <span class="id">patchC</span> ?<span class="id">inE</span>/= ?<span class="id">leq_gtF</span>//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#leRHS">case</a></span>.<br/>
<span class="id">rewrite</span> -<span class="id">SetRing.RmuE</span>// <span class="id">XE</span> <span class="id">bigsetU_seqDU</span> <span class="id">measure_bigsetU</span>//.<br/>
<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_sum">rewrite</a></span> [<span class="id">leRHS</span>](<span class="id">big_ord_widen</span> <span class="id">n</span> (<span class="id">mu</span> \<span class="id">o</span> <span class="id">A</span>))//= [<span class="id">leRHS</span>]<span class="id">big_mkcond</span>/=.<br/>
<span class="id">rewrite</span> <span class="id">lee_sum</span> =&gt; // <span class="id">i</span> <span class="id">_</span>; <span class="id">case</span>: <span class="id">ltnP</span> =&gt; <span class="id">ltin</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">DU0</span> ?<span class="id">measure0</span>.<br/>
<span class="id">rewrite</span> -[<span class="id">leRHS</span>]<span class="id">SetRing.RmuE</span>; <span class="id">last</span> <span class="id">exact</span>: <span class="id">Am</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">le_measure</span> ?<span class="id">inE</span>//=; <span class="id">last</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sub_gen_smallest</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#set">Am</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">content_sub_fsum</span> (<span class="id">I</span> : <span class="id">choiceType</span>) <span class="id">D</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">A_</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id">finite_set</span> <span class="id">D</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">D</span> <span class="id">i</span> -&gt; <span class="id">measurable</span> (<span class="id">A_</span> <span class="id">i</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id">measurable</span> <span class="id">A</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">A</span> `&lt;=` \<span class="id">bigcup_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">D</span>) <span class="id">A_</span> <span class="id">i</span> -&gt; <span class="id">mu</span> <span class="id">A</span> &lt;= \<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">D</span>) <span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_set0">mu</a></span> (<span class="id">A_</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof164')">Proof.</span></div>
<div class="proofscript" id="proof164">
<span class="id">elim</span>/<span class="id">choicePpointed</span>: <span class="id">I</span> =&gt; <span class="id">I</span> <span class="kwd">in</span> <span class="id">A_</span> <span class="id">D</span> *.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> !<span class="id">emptyE</span> <span class="id">bigcup_set0</span>// <span class="id">subset0</span> =&gt; <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> -&gt;.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">measure0</span> <span class="id">fsbig_set0</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">Dfin</span> <span class="id">A_m</span> <span class="id">Am</span> <span class="id">Asub</span>; <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_ord">have</a></span> [<span class="id">n</span> /<span class="id">ppcard_eqP</span>[<span class="id">f</span>]] := <span class="id">Dfin</span>.<br/>
<span class="id">rewrite</span> (<span class="id">reindex_fsbig</span> <span class="id">f</span>^-1%<span class="id">FUN</span> `<span class="id">I_n</span>)//= -<span class="id">fsbig_ord</span>.<br/>
<span class="id">rewrite</span> (@<span class="id">content_sub_additive</span> <span class="id">A</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_ord">A_</a></span> \<span class="id">o</span> <span class="id">f</span>^-1%<span class="id">FUN</span>))//=.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span> <span class="id">ltin</span>; <span class="id">apply</span>: <span class="id">A_m</span>; <span class="id">apply</span>: <span class="id">funS</span>.<br/>
<span class="id">rewrite</span> (<span class="id">fsbig_ord</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">A_</span> \<span class="id">o</span> <span class="id">f</span>^-1%<span class="id">FUN</span>))/= -(<span class="id">reindex_fsbig</span> <span class="id">_</span> <span class="id">_</span> <span class="id">D</span>)//=.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">fsbig_setU</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">more_content_semiring_lemmas</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">content_ring_lemmas</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id"><a href="mathcomp.analysis.measure.html#content_ring_lemmas.R">R</a></span> : <span class="id">realType</span>) (<span class="id">T</span> : <span class="id">ringOfSetsType</span> <span class="id">d</span>).<br/>
<span class="kwd">Variable</span> <span class="id">mu</span> : {<span class="id">content</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">content_ring_sup_sigma_additive</span> (<span class="id">A</span> : <span class="id">nat</span> -&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset">set</a></span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">measurable</span> (<span class="id">A</span> <span class="id">i</span>)) -&gt; <span class="id">measurable</span> (\<span class="id">bigcup_i</span> <span class="id">A</span> <span class="id">i</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">trivIset</span> [<span class="id">set</span>: <span class="id">nat</span>] <span class="id">A</span> -&gt; \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span>) <span class="id">mu</span> (<span class="id">A</span> <span class="id">i</span>) &lt;= <span class="id">mu</span> (\<span class="id">bigcup_i</span> <span class="id">A</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof165')">Proof.</span></div>
<div class="proofscript" id="proof165">
<span class="id">move</span>=&gt; <span class="id">Am</span> <span class="id">UAm</span> <span class="id">At</span>; <span class="id">rewrite</span> <span class="id">lime_le</span>//; <span class="id">first</span> <span class="id">exact</span>: <span class="id">is_cvg_nneseries</span>.<br/>
<span class="id">near</span>=&gt; <span class="id">n</span>; <span class="id">rewrite</span> <span class="id">big_mkord</span> -<span class="id">measure_bigsetU</span>//= <span class="id">le_measure</span> ?<span class="id">inE</span>//=.<br/>
- <span class="id">exact</span>: <span class="id">bigsetU_measurable</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">bigcup_mkord</span>; <span class="id">apply</span>: <span class="id">bigcup_sub</span> =&gt; <span class="id">i</span> <span class="id">lein</span>; <span class="id">apply</span>: <span class="id">bigcup_sup</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="mathcomp.analysis.measure.html#content_ring_lemmas.mu">content_ring_sigma_additive</a></span> : <span class="id">sigma_sub_additive</span> <span class="id">mu</span> -&gt; <span class="id">semi_sigma_additive</span> <span class="id"><a href="mathcomp.analysis.measure.html#content_ring_lemmas.mu">mu</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof166')">Proof.</span></div>
<div class="proofscript" id="proof166">
<span class="id">move</span>=&gt; <span class="id">mu_sub</span> <span class="id">A</span> <span class="id">Am</span> <span class="id">Atriv</span> <span class="id">UAm</span>.<br/>
<span class="id">suff</span> &lt;- : \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span>) <span class="id">mu</span> (<span class="id">A</span> <span class="id">i</span>) = <span class="id">mu</span> (\<span class="id">bigcup_n</span> <span class="id">A</span> <span class="id">n</span>) <span class="kwd">by</span> <span class="id">exact</span>: <span class="id">is_cvg_nneseries</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">eq_le</span> <span class="id">mu_sub</span>// ?<span class="id">content_ring_sup_sigma_additive</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">content_ring_lemmas</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">ring_sigma_sub_additive_content</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu</span> : {<span class="id">content</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}).<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id">Rmu</span> := (<span class="id">SetRing.measure</span> <span class="id">mu</span>).<br/>
<span class="kwd">Import</span> <span class="id">SetRing</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">ring_sigma_sub_additive</span> : <span class="id">sigma_sub_additive</span> <span class="id">mu</span> -&gt; <span class="id">sigma_sub_additive</span> <span class="id">Rmu</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof167')">Proof.</span></div>
<div class="proofscript" id="proof167">
<span class="id">move</span>=&gt; <span class="id">muS</span>; <span class="id">move</span>=&gt; /= <span class="id">D</span> <span class="id">A</span> <span class="id">Am</span> <span class="id">Dm</span> <span class="id">Dsub</span>.<br/>
<span class="id">rewrite</span> /<span class="id">Rmu</span> -(<span class="id">eq_eseriesr</span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">esum_fset</span> <span class="id">_</span> <span class="id">_</span>))//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; *; <span class="id">exact</span>: <span class="id">decomp_finite_set</span>.<br/>
<span class="id">rewrite</span> <span class="id">nneseries_esum</span> ?<span class="id"><a href="mathcomp.classical.cardinality.html#ppcard_eqP">esum_esum</a></span>//=; <span class="id">last</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; *; <span class="id">rewrite</span> <span class="id">esum_ge0</span>.<br/>
<span class="id">set</span> <span class="id">K</span> := <span class="id">_</span> `*`` <span class="id">_</span>.<br/>
<span class="id">have</span> /<span class="id">ppcard_eqP</span>[<span class="id">f</span>] : (<span class="id">K</span> #= [<span class="id">set</span>: <span class="id">nat</span>])%<span class="id"><a href="mathcomp.classical.classical_sets.html#setT">card</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.boolp.html#predeqP">cardMR_eq_nat</a></span> =&gt; [|<span class="id">i</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">_</span> : [<span class="id">set</span> <span class="id">_</span> | <span class="id">true</span>] = <span class="id">setT</span>)//; <span class="id">exact</span>/<span class="id">predeqP</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">finite_set_countable</span>; <span class="id">exact</span>: <span class="id">decomp_finite_set</span>.<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.classical_sets.html#subset_trans">exact</a></span>/<span class="id">set0P</span>/<span class="id">decompN0</span>.<br/>
<span class="id">have</span> {<span class="id">Dsub</span>} : <span class="id">D</span> `&lt;=` \<span class="id">bigcup_</span>(<span class="id">k</span> <span class="kwd">in</span> <span class="id">K</span>) <span class="id">k</span>.2.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: (<span class="id">subset_trans</span> <span class="id">Dsub</span>); <span class="id">apply</span>: <span class="id">bigcup_sub</span> =&gt; <span class="id">i</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -[<span class="id">A</span> <span class="id">i</span>]<span class="id">cover_decomp</span>; <span class="id">apply</span>: <span class="id">bigcup_sub</span> =&gt; <span class="id">X</span>/= <span class="id">XAi</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> <span class="id">Xx</span>; <span class="kwd">exists</span> (<span class="id">i</span>, <span class="id">X</span>).<br/>
<span class="id">rewrite</span> -(<span class="id">image_eq</span> [<span class="id">bij</span> <span class="id">of</span> <span class="id">f</span>^-1%<span class="id">FUN</span>])/=.<br/>
<span class="id">rewrite</span> (<span class="id">esum_set_image</span> <span class="id">_</span> <span class="id">f</span>^-1)//= <span class="id">bigcup_image</span> =&gt; <span class="id">Dsub</span>.<br/>
<span class="id">have</span> <span class="id">DXsub</span> <span class="id">X</span> : <span class="id">X</span> \<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setI_bigcupl">decomp</a></span> <span class="id">D</span> -&gt; <span class="id">X</span> `&lt;=` \<span class="id">bigcup_i</span> ((<span class="id">f</span>^-1%<span class="id">FUN</span> <span class="id">i</span>).2 `&amp;` <span class="id">X</span>).<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">XD</span>; <span class="id">rewrite</span> -<span class="id">setI_bigcupl</span> -[<span class="id">Y</span> <span class="kwd">in</span> <span class="id">Y</span> `&lt;=` <span class="id">_</span>](<span class="id">setIidr</span> (<span class="id">decomp_sub</span> <span class="id">XD</span>)).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">setSI</span>.<br/>
<span class="id">have</span> <span class="id">mf</span> <span class="id">i</span> : <span class="id">measurable</span> ((<span class="id"><a href="mathcomp.classical.classical_sets.html#setT">f</a></span>^-1)%<span class="id">function</span> <span class="id">i</span>).2.<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">_</span> /<span class="id">mem_set</span>/<span class="id">decomp_measurable</span>] := '<span class="id">invS_f</span> (<span class="id">I</span> : <span class="id">setT</span> <span class="id">i</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>; <span class="id">exact</span>: <span class="id">Am</span>.<br/>
<span class="id">have</span> <span class="id">mfD</span> <span class="id">i</span> <span class="id">X</span> : <span class="id">X</span> \<span class="kwd">in</span> <span class="id">decomp</span> <span class="id">D</span> -&gt; <span class="id">measurable</span> (((<span class="id">f</span>^-1)%<span class="id">FUN</span> <span class="id">i</span>).2 `&amp;` <span class="id">X</span> : <span class="id">set</span> <span class="id">T</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">XD</span>; <span class="id">apply</span>: <span class="id">measurableI</span>; [<span class="id">exact</span>: <span class="id">mf</span>|<span class="id">exact</span>: (<span class="id">decomp_measurable</span> <span class="id">_</span> <span class="id">XD</span>)].<br/>
<span class="id">apply</span>: (@<span class="id">le_trans</span> <span class="id">_</span> <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(\<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id"><a href="mathcomp.analysis.sequences.html#nneseries_sum">oo</a></span>) \<span class="id">sum_</span>(<span class="id">X</span> &lt;- <span class="id">fset_set</span> (<span class="id">decomp</span> <span class="id">D</span>)) <span class="id">mu</span> ((<span class="id">f</span>^-1%<span class="id">FUN</span> <span class="id">i</span>).2 `&amp;` <span class="id">X</span>))).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">nneseries_sum</span>// <span class="id">fsbig_finite</span>/=; <span class="id">last</span> <span class="id">exact</span>: <span class="id">decomp_finite_set</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="id"><a href="mathcomp.classical.cardinality.html#in_fset_set">leLHS</a></span>]<span class="id">big_seq</span> [<span class="id">leRHS</span>]<span class="id">big_seq</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">lee_sum</span>// =&gt; <span class="id">X</span> /[!<span class="id">in_fset_set</span>]; <span class="id">last</span> <span class="id">exact</span>: <span class="id">decomp_finite_set</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">XD</span>; <span class="id">have</span> <span class="id">Xm</span> := <span class="id">decomp_measurable</span> <span class="id">Dm</span> <span class="id">XD</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.normedtype.html#lee_lim">apply</a></span>: <span class="id">muS</span> =&gt; // [<span class="id">i</span>|]; [<span class="id">exact</span>: <span class="id">mfD</span>|<span class="id">exact</span>: <span class="id">DXsub</span>].<br/>
<span class="id">apply</span>: <span class="id">lee_lim</span> =&gt; /=; <span class="id">do</span> ?<span class="id">apply</span>: <span class="id">is_cvg_nneseries</span>=&gt; //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span> <span class="id">_</span>; <span class="id">exact</span>: <span class="id">sume_ge0</span>.<br/>
<span class="id">near</span>=&gt; <span class="id">n</span>; <span class="id">rewrite</span> [<span class="id">n</span> <span class="kwd">in</span> <span class="id">_</span> &lt;= <span class="id">n</span>]<span class="id">big_mkcond</span>; <span class="id">apply</span>: <span class="id">lee_sum</span> =&gt; <span class="id">i</span> <span class="id">_</span>.<br/>
<span class="id">rewrite</span> <span class="id">ifT</span> ?<span class="id">inE</span>//.<br/>
<span class="id">under</span> <span class="id">eq_big_seq</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">x</span>; <span class="id">rewrite</span> <span class="id">in_fset_set</span>=&gt; [<span class="id">xD</span>|]; <span class="id">last</span> <span class="id">exact</span>: <span class="id">decomp_finite_set</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">RmuE</span>//; <span class="id">last</span> <span class="id"><a href="mathcomp.analysis.measure.html#decomp_finite_set">exact</a></span>: <span class="id">mfD</span>.<br/>
&nbsp;&nbsp;<span class="id">over</span>.<br/>
<span class="id">rewrite</span> -<span class="id">fsbig_finite</span>/=; <span class="id">last</span> <span class="id">exact</span>: <span class="id">decomp_finite_set</span>.<br/>
<span class="id"><a href="mathcomp.analysis.measure.html#cover_decomp">rewrite</a></span> -<span class="id">measure_fin_bigcup</span>//=.<br/>
- <span class="id">rewrite</span> -<span class="id">setI_bigcupr</span> (<span class="id">cover_decomp</span> <span class="id">D</span>) -[<span class="id">leRHS</span>]<span class="id">RmuE</span>// ?<span class="id">le_measure</span> ?<span class="id">inE</span>//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurableI</span> =&gt; //; <span class="id">apply</span>: <span class="id">sub_gen_smallest</span>; <span class="id">apply</span>: <span class="id">mf</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sub_gen_smallest</span>; <span class="id">apply</span>: <span class="id">mf</span>.<br/>
- <span class="id">exact</span>: <span class="id">decomp_finite_set</span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">trivIset_setIl</span>; <span class="id">apply</span>: <span class="id">decomp_triv</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">X</span> /= <span class="id">XD</span>; <span class="id">apply</span>: <span class="id">sub_gen_smallest</span>; <span class="id">apply</span>: <span class="id">mfD</span>; <span class="id">rewrite</span> <span class="id">inE</span>.<br/>
<span class="id">Unshelve</span>. <span class="id"><a href="mathcomp.analysis.measure.html#sigma_sub_additive">all</a></span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">ring_semi_sigma_additive</span> : <span class="id">sigma_sub_additive</span> <span class="id">mu</span> -&gt; <span class="id">semi_sigma_additive</span> <span class="id">Rmu</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof168')">Proof.</span></div>
<div class="proofscript" id="proof168">
<span class="id">move</span>=&gt; <span class="id">mu_sub</span>; <span class="id">apply</span>: <span class="id">content_ring_sigma_additive</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">ring_sigma_sub_additive</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">semiring_sigma_additive</span> : <span class="id">sigma_sub_additive</span> <span class="id">mu</span> -&gt; <span class="id">semi_sigma_additive</span> <span class="id">mu</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof169')">Proof.</span></div>
<div class="proofscript" id="proof169">
<span class="id">move</span>=&gt; /<span class="id">ring_semi_sigma_additive</span> <span class="id">Rmu_sigmadd</span> <span class="id">F</span> <span class="id">Fmeas</span> <span class="id">Ftriv</span> <span class="id">cupFmeas</span>.<br/>
<span class="id">have</span> <span class="id">Fringmeas</span> <span class="id">i</span> : <span class="id">d</span>.-<span class="id">ring</span>.-<span class="id">measurable</span> (<span class="id">F</span> <span class="id">i</span>) <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurable_subring</span>.<br/>
<span class="id">have</span> := <span class="id">Rmu_sigmadd</span> <span class="id"><a href="mathcomp.analysis.measure.html#RmuE">F</a></span> <span class="id">Fringmeas</span> <span class="id">Ftriv</span> (<span class="id">measurable_subring</span> <span class="id">cupFmeas</span>).<br/>
<span class="id">rewrite</span> <span class="id">SetRing.RmuE</span>//.<br/>
<span class="kwd">by</span> <span class="id">under</span> <span class="id">eq_fun</span> <span class="id">do</span> <span class="id">under</span> <span class="id">eq_bigr</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">SetRing.RmuE</span>//=.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">ring_sigma_sub_additive_content</span>.<br/>
<br/>
#[<span class="id">key</span>="<span class="id">mu</span>"]<br/>
<span class="id">HB.factory</span> <span class="kwd">Record</span> <span class="id">Content_SubSigmaAdditive_isMeasure</span> <span class="id">d</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>) (<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) <span class="id">of</span> <span class="id">Content</span> <span class="id">d</span> <span class="id">mu</span> := {<br/>
&nbsp;&nbsp;<span class="id">measure_sigma_sub_additive</span> : <span class="id">sigma_sub_additive</span> <span class="id">mu</span> }.<br/>
<br/>
<span class="id">HB.builders</span> <span class="kwd">Context</span> <span class="id">d</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;(<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id"><a name="Builders_174.HB_unnamed_factory_176">bar</a></span> <span class="id">R</span>) <span class="id">of</span> <span class="id">Content_SubSigmaAdditive_isMeasure</span> <span class="id">d</span> <span class="id">R</span> <span class="id">T</span> <span class="id">mu</span>.<br/>
&nbsp;&nbsp;<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">Content_isMeasure.Build</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id">mu</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">semiring_sigma_additive</span> (<span class="id">measure_sigma_sub_additive</span>)).<br/>
<span class="id">HB.end</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">more_premeasure_ring_lemmas</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>).<br/>
<span class="kwd">Variable</span> <span class="id">mu</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}.<br/>
<span class="kwd">Import</span> <span class="id">SetRing</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measure_sigma_sub_additive</span> : <span class="id">sigma_sub_additive</span> <span class="id">mu</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof170')">Proof.</span></div>
<div class="proofscript" id="proof170">
<span class="id">move</span>=&gt; <span class="id">X</span> <span class="id">A</span> <span class="id">Am</span> <span class="id">Xm</span> <span class="id">XA</span>; <span class="id">pose</span> <span class="id">B</span> <span class="id">i</span> := <span class="id">A</span> <span class="id">i</span> `&amp;` <span class="id">X</span>.<br/>
<span class="id">have</span> <span class="id">XE</span> : <span class="id">X</span> = \<span class="id">bigcup_i</span> <span class="id">B</span> <span class="id">i</span> <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setI_bigcupl</span> <span class="id">setIidr</span>.<br/>
<span class="id">have</span> <span class="id">Bm</span> <span class="id">i</span> : <span class="id">measurable</span> (<span class="id">B</span> <span class="id">i</span>) <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">B</span>; <span class="id">apply</span>: <span class="id">measurableI</span>.<br/>
<span class="id">have</span> <span class="id">subBA</span> <span class="id">i</span> : <span class="id">B</span> <span class="id">i</span> `&lt;=` <span class="id">A</span> <span class="id">i</span> <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">B</span>.<br/>
<span class="id">have</span> <span class="id">subDUB</span> <span class="id">i</span> : <span class="id">seqDU</span> <span class="id">B</span> <span class="id">i</span> `&lt;=` <span class="id">A</span> <span class="id">i</span> <span class="kwd">by</span>  <span class="id"><a href="mathcomp.classical.classical_sets.html#set">move</a></span>=&gt; <span class="id">x</span> [/<span class="id">subBA</span>].<br/>
<span class="id">have</span> <span class="id">DUBm</span> <span class="id">i</span> : <span class="id">measurable</span> (<span class="id">seqDU</span> <span class="id">B</span> <span class="id">i</span> : <span class="id">set</span> (<span class="id">SetRing.type</span> <span class="id">T</span>)).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurableD</span> =&gt; //;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">do</span> 1?<span class="id">apply</span>: <span class="id">bigsetU_measurable</span> =&gt; *; <span class="id"><a href="mathcomp.analysis.sequences.html#seqDU_bigcup_eq">apply</a></span>: <span class="id">sub_gen_smallest</span>.<br/>
<span class="id">rewrite</span> <span class="id">XE</span>; <span class="id">move</span>: (<span class="id">XE</span>); <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.measure.html#cover_decomp">seqDU_bigcup_eq</a></span>.<br/>
<span class="id">under</span> <span class="id">eq_bigcupr</span> <span class="id">do</span> <span class="id">rewrite</span> -[<span class="id">seqDU</span> <span class="id">B</span> <span class="id">_</span>]<span class="id">cover_decomp</span>//.<br/>
<span class="id">rewrite</span> -<span class="id">bigcup_setM_dep</span>; <span class="id">set</span> <span class="id">K</span> := <span class="id">_</span> `*`` <span class="id">_</span>.<br/>
<span class="id">have</span> /<span class="id">ppcard_eqP</span>[<span class="id">f</span>] : (<span class="id">K</span> #= [<span class="id">set</span>: <span class="id">nat</span>])%<span class="id">card</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">cardMR_eq_nat</span>=&gt; // <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set_countable">i</a></span>; <span class="id">split</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">set0P</span>; <span class="id">rewrite</span> <span class="id">decompN0</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">finite_set_countable</span>/<span class="id">decomp_finite_set</span>.<br/>
<span class="id">pose</span> <span class="id">f</span>' := <span class="id">f</span>^-1%<span class="id">FUN</span>; <span class="id">rewrite</span> -(<span class="id">image_eq</span> [<span class="id">bij</span> <span class="id">of</span> <span class="id">f</span>'])/= <span class="id">bigcup_image</span>/=.<br/>
<span class="id">pose</span> <span class="id">g</span> <span class="id">n</span> := (<span class="id">f</span>' <span class="id">n</span>).2; <span class="id">have</span> <span class="id">fVtriv</span> : <span class="id">trivIset</span> [<span class="id">set</span>: <span class="id">nat</span>] <span class="id">g</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">i</span> <span class="id">j</span> <span class="id"><a href="mathcomp.classical.functions.html#funS">_</a></span> <span class="id">_</span>; <span class="id">rewrite</span> /<span class="id">g</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> [/= <span class="id">_</span> <span class="id">f</span>'<span class="id">iB</span>] : <span class="id">K</span> (<span class="id">f</span>' <span class="id">i</span>) <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">funS</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> [/= <span class="id">_</span> <span class="id">f</span>'<span class="id">jB</span>] : <span class="id">K</span> (<span class="id">f</span>' <span class="id">j</span>) <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">funS</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">f</span>'<span class="id">ij</span>|<span class="id">f</span>'<span class="id">ij</span>] := <span class="id">eqVneq</span> (<span class="id">f</span>' <span class="id">i</span>).1 (<span class="id">f</span>' <span class="id">j</span>).1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; /(<span class="id">decomp_triv</span> <span class="id">f</span>'<span class="id">iB</span>)/=; <span class="id">rewrite</span> <span class="id">f</span>'<span class="id">ij</span> =&gt; /(<span class="id">_</span> <span class="id">f</span>'<span class="id">jB</span>) <span class="id">f</span>'<span class="id">ij2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: '<span class="id">inj_f</span>'; <span class="id">rewrite</span> ?<span class="id">inE</span>//= -!/(<span class="id">f</span>' <span class="id">_</span>); <span class="id">move</span>: <span class="id">f</span>'<span class="id">ij</span> <span class="id">f</span>'<span class="id">ij2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>: (<span class="id">f</span>' <span class="id">i</span>) (<span class="id">f</span>' <span class="id">j</span>) =&gt; [? ?] [? ?]//= -&gt; -&gt;.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; [<span class="id">x</span> [<span class="id">f</span>'<span class="id">ix</span> <span class="id">f</span>'<span class="id">jx</span>]]; <span class="id">have</span> <span class="id">Bij</span> := @<span class="id">trivIset_seqDU</span> <span class="id">_</span> <span class="id">B</span> (<span class="id">f</span>' <span class="id">i</span>).1 (<span class="id">f</span>' <span class="id">j</span>).1 <span class="id">I</span> <span class="id">I</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">Bij</span> ?<span class="id">eqxx</span>// <span class="kwd">in</span> <span class="id">f</span>'<span class="id">ij</span>; <span class="kwd">exists</span> <span class="id">x</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>/<span class="id">mem_set</span> : <span class="id">f</span>'<span class="id"><a href="mathcomp.analysis.measure.html#decomp_sub">iB</a></span> =&gt; /<span class="id">decomp_sub</span>; <span class="id">apply</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>/<span class="id">mem_set</span> : <span class="id">f</span>'<span class="id">jB</span> =&gt; /<span class="id">decomp_sub</span>; <span class="id">apply</span>.<br/>
<span class="id">have</span> <span class="id">g_inj</span> : <span class="id">set_inj</span> [<span class="id">set</span> <span class="id">i</span> | <span class="id">g</span> <span class="id">i</span> != <span class="id">set0</span>] <span class="id">g</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">trivIset_inj</span>=&gt; [<span class="id">i</span> /<span class="id">set0P</span>//|]; <span class="id">apply</span>: <span class="id">sub_trivIset</span> <span class="id">fVtriv</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">XEbig</span>; <span class="id">rewrite</span> <span class="id">measure_semi_bigcup</span>//= -?<span class="id">XEbig</span>//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">i</span>; <span class="id"><a href="mathcomp.analysis.measure.html#decomp_measurable">have</a></span> [/= <span class="id">_</span> /<span class="id">mem_set</span>] : <span class="id">K</span> (<span class="id">f</span>' <span class="id">i</span>) <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">funS</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">decomp_measurable</span>.<br/>
<span class="id">rewrite</span> [<span class="id">leLHS</span>](<span class="id">_</span> : <span class="id">_</span> = \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">g</span> <span class="id">i</span> != <span class="id"><a href="mathcomp.analysis.esum.html#esum_mkcond">set0</a></span>) <span class="id">mu</span> (<span class="id">g</span> <span class="id">i</span>)); <span class="id"><a href="mathcomp.analysis.esum.html#esum_mkcond">last</a></span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> !<span class="id">nneseries_esum</span>// <span class="id">esum_mkcond</span> [<span class="id">RHS</span>]<span class="id">esum_mkcond</span>; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">apply</a></span>: <span class="id">eq_esum</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#notin_set">i</a></span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">ifT</span> ?<span class="id">inE</span>//=; <span class="id">case</span>: <span class="id">ifPn</span> =&gt; //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">notin_set</span> /= -/(<span class="id">g</span> <span class="id">_</span>) =&gt; /<span class="id">negP</span>/<span class="id">negPn</span>/<span class="id">eqP</span> -&gt;.<br/>
<span class="id">rewrite</span> -(<span class="id">esum_pred_image</span> <span class="id">mu</span> <span class="id">g</span>)//.<br/>
<span class="id">rewrite</span> [<span class="id">leLHS</span>](<span class="id">_</span> : <span class="id">_</span> = \<span class="id">esum_</span>(<span class="id">X</span> <span class="kwd">in</span> <span class="id">range</span> <span class="id">g</span>) <span class="id">mu</span> <span class="id">X</span>); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">esum_mkcond</span> [<span class="id">RHS</span>]<span class="id">esum_mkcond</span>; <span class="id"><a href="mathcomp.classical.classical_sets.html#notin_set">apply</a></span>: <span class="id">eq_esum</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">Y</span> <span class="id">_</span>; <span class="id">case</span>: <span class="id">ifPn</span>; <span class="id">rewrite</span> ?(<span class="id">inE</span>, <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">notin_set</a></span>)/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">i</span> <span class="id">giN0</span> <span class="id">giY</span>]; <span class="id">rewrite</span> <span class="id">ifT</span>// ?<span class="id">inE</span>//=; <span class="kwd">exists</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">Ngx</span>; <span class="id">case</span>: <span class="id">ifPn</span>; <span class="id">rewrite</span> ?(<span class="id">inE</span>, <span class="id">notin_set</span>)//=.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; [<span class="id">i</span> <span class="id">_</span> <span class="id">giY</span>]; <span class="id">apply</span>: <span class="id">contra_not_eq</span> <span class="id">Ngx</span>; <span class="id">rewrite</span> -<span class="id">giY</span> =&gt; <span class="id">mugi</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">i</span> =&gt; //; <span class="id">apply</span>: <span class="id">contra_neq</span> <span class="id">mugi</span> =&gt; -&gt;; <span class="id"><a href="mathcomp.analysis.sequences.html#seqDU">rewrite</a></span> <span class="id">measure0</span>.<br/>
<span class="id">have</span> -&gt; : <span class="id">range</span> <span class="id">g</span> = \<span class="id">bigcup_i</span> (<span class="id">decomp</span> (<span class="id">seqDU</span> <span class="id">B</span> <span class="id">i</span>)).<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">predeqP</span> =&gt; /= <span class="id">Y</span>; <span class="id">split</span> =&gt; [[<span class="id">n</span> <span class="id">_</span> <span class="id">gnY</span>]|[<span class="id">n</span> <span class="id">_</span> /= <span class="id">YBn</span>]].<br/>
&nbsp;&nbsp;<span class="id">have</span> [/= <span class="id">_</span> <span class="id">f</span>'<span class="id">nB</span>] : <span class="id">K</span> (<span class="id">f</span>' <span class="id">n</span>) <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">funS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">f</span>' <span class="id">n</span>).1 =&gt; //=; <span class="id">rewrite</span> -<span class="id">gnY</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">f</span> (<span class="id">n</span>, <span class="id">Y</span>)) =&gt; //; <span class="id">rewrite</span> /<span class="id">g</span> /<span class="id">f</span>' <span class="id">funK</span>//= <span class="id">inE</span>.<br/>
<span class="id">rewrite</span> <span class="id">esum_bigcup</span>//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">i</a></span> <span class="id">j</span> /=.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">have</span> [-&gt;|/<span class="id">set0P</span> <span class="id">DUBiN0</span>] := <span class="id">eqVneq</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">seqDU</a></span> <span class="id">B</span> <span class="id">i</span>) <span class="id">set0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">decomp_set0</span> ?<span class="id">set_fset1</span> =&gt; /<span class="id">negP</span>[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">eqP</span>/<span class="id">predeqP</span>=&gt; <span class="id">x</span>; <span class="id">split</span>=&gt; [[<span class="id">Y</span>/=-&gt;]|-&gt;]//; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">measure0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">set0</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">have</span> [-&gt;|/<span class="id">set0P</span> <span class="id">DUBjN0</span>] := <span class="id">eqVneq</span> (<span class="id">seqDU</span> <span class="id">B</span> <span class="id">j</span>) <span class="id">set0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">decomp_set0</span> ?<span class="id">set_fset1</span> =&gt; <span class="id">_</span> /<span class="id">negP</span>[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">eqP</span>/<span class="id">predeqP</span>=&gt; <span class="id">x</span>; <span class="id">split</span>=&gt; [[<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">Y</a></span>/=-&gt;]|-&gt;]//=; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">measure0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">set0</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">_</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#mem_set">_</a></span> [<span class="id">Y</span> /= [/[<span class="id"><a href="mathcomp.classical.classical_sets.html#mem_set">dup</a></span>] +]].<br/>
&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; /<span class="id">mem_set</span> /<span class="id">decomp_sub</span> <span class="id">YBi</span> /<span class="id">mem_set</span> + /<span class="id">mem_set</span> /<span class="id">decomp_sub</span> <span class="id"><a href="mathcomp.analysis.sequences.html#trivIset_seqDU">YBj</a></span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; /(<span class="id">decomp_neq0</span> <span class="id">DUBiN0</span>) [<span class="id">y</span> <span class="id">Yy</span>].<br/>
&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: (@<span class="id">trivIset_seqDU</span> <span class="id">_</span> <span class="id">B</span>) =&gt; //; <span class="kwd">exists</span> <span class="id">y</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">split</span> =&gt; //; [<span class="id">exact</span>: <span class="id">YBi</span>|<span class="id">exact</span>: <span class="id">YBj</span>].<br/>
<span class="id">rewrite</span> <span class="id">nneseries_esum</span>// <span class="id">set_true</span> <span class="id">le_esum</span>// =&gt; <span class="id">i</span> <span class="id">_</span>.<br/>
<span class="id">rewrite</span> [<span class="id">leLHS</span>](<span class="id">_</span> : <span class="id">_</span> = \<span class="id">sum_</span>(<span class="id">j</span> \<span class="kwd">in</span> <span class="id">decomp</span> (<span class="id">seqDU</span> <span class="id">B</span> <span class="id">i</span>)) <span class="id">mu</span> <span class="id">j</span>); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">esum_fset</span>//; <span class="id">exact</span>: <span class="id">decomp_finite_set</span>.<br/>
<span class="id">rewrite</span> -<span class="id">SetRing.Rmu_fin_bigcup</span>//=; <span class="id">last</span> 3 <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">decomp_finite_set</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">decomp_triv</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; ?; <span class="id"><a href="mathcomp.analysis.measure.html#le_measure">exact</a></span>: <span class="id">decomp_measurable</span>.<br/>
<span class="id">rewrite</span> -[<span class="id">leRHS</span>]<span class="id">SetRing.RmuE</span>// <span class="id">le_measure</span>//; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">cover_decomp</span>.<br/>
- <span class="id">rewrite</span> <span class="id">inE</span>; <span class="id">apply</span>: <span class="id">fin_bigcup_measurable</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">decomp_finite_set</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">j</span> /<span class="id">mem_set</span> <span class="id">jdec</span>; <span class="id">apply</span>: <span class="id">sub_gen_smallest</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">decomp_measurable</span> <span class="id">jdec</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">inE</span>; <span class="id">apply</span>: <span class="id">sub_gen_smallest</span>; <span class="id">exact</span>: <span class="id">Am</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">more_premeasure_ring_lemmas</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measure_sigma_sub_additive_tail</span> <span class="id">d</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;(<span class="id">mu</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id"><a name="ring_sigma_content.ring_sigma_content">F</a></span> : <span class="id">nat</span> -&gt; <span class="id">set</span> <span class="id">T</span>) <span class="id">N</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">measurable</span> (<span class="id">F</span> <span class="id">n</span>)) -&gt; <span class="id">measurable</span> <span class="id">A</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">A</span> `&lt;=` \<span class="id">bigcup_</span>(<span class="id">n</span> <span class="kwd">in</span> ~` `<span class="id">I_N</span>) <span class="id">F</span> <span class="id">n</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a name="HB_unnamed_factory_178">mu</a></span> <span class="id">A</span> &lt;= \<span class="id">sum_</span>(<span class="id">N</span> &lt;= <span class="id">n</span> &lt;<span class="id">oo</span>) <span class="id">mu</span> (<span class="id">F</span> <span class="id">n</span>))%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof171')">Proof.</span></div>
<div class="proofscript" id="proof171">
<span class="id">move</span>=&gt; <span class="id">mF</span> <span class="id">mA</span> <span class="id">AF</span>; <span class="id">rewrite</span> <span class="id">eseries_cond</span> <span class="id">eseries_mkcondr</span>.<br/>
<span class="id">rewrite</span> (@<span class="id">eq_eseriesr</span> <span class="id">_</span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">mu</span> (<span class="kwd">if</span> (<span class="id">N</span> &lt;= <span class="id">n</span>)%<span class="id">N</span> <span class="kwd">then</span> <span class="id">F</span> <span class="id">n</span> <span class="kwd">else</span> <span class="id">set0</span>))).<br/>
- <span class="id">apply</span>: <span class="id">measure_sigma_sub_additive</span> =&gt; //.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span>; <span class="id">case</span>: <span class="id">ifPn</span>.<br/>
&nbsp;&nbsp;+ <span class="id">move</span>: <span class="id">AF</span>; <span class="id">rewrite</span> <span class="id">bigcup_mkcond</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">under</span> <span class="id">eq_bigcupr</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">mem_not_I</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">o</span> <span class="id">_</span>; <span class="id">rewrite</span> (<span class="id">fun_if</span> <span class="id">mu</span>) <span class="id">measure0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">ring_sigma_content</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}).<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id">Rmu</span> := (<span class="id">SetRing.measure</span> <span class="id">mu</span>).<br/>
<span class="kwd">Import</span> <span class="id">SetRing</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">ring_sigma_content</span> : <span class="id">semi_sigma_additive</span> <span class="id">Rmu</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof172')">Proof.</span></div>
<div class="proofscript" id="proof172">
 <span class="id">exact</span>/<span class="id">ring_semi_sigma_additive</span>/<span class="id">measure_sigma_sub_additive</span>. Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">Content_isMeasure.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Rmu</span><br/>
&nbsp;&nbsp;<span class="id">ring_sigma_content</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">ring_sigma_content</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">fin_num_fun</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">numDomainType</span>)<br/>
&nbsp;&nbsp;(<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) := <span class="kwd">forall</span> <span class="id">U</span>, <span class="id">measurable</span> <span class="id">U</span> -&gt; <span class="id">mu</span> <span class="id">U</span> \<span class="id">is</span> <span class="id">a</span> <span class="id">fin_num</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">fin_num_fun_lty</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">algebraOfSetsType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realFieldType</span>)<br/>
&nbsp;&nbsp;(<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id"><a href="mathcomp.classical.classical_sets.html#set">bar</a></span> <span class="id">R</span>) : <span class="id">fin_num_fun</span> <span class="id">mu</span> -&gt; <span class="id">mu</span> <span class="id">setT</span> &lt; +<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof173')">Proof.</span></div>
<div class="proofscript" id="proof173">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">h</span>; <span class="id">rewrite</span> <span class="id">ltey_eq</span> <span class="id">h</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">lty_fin_num_fun</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">algebraOfSetsType</span> <span class="id"><a name="fin_num_fun_sigma_finite">d</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">mu</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) :<br/>
&nbsp;&nbsp;<span class="id">mu</span> <span class="id">setT</span> &lt; +<span class="id">oo</span> -&gt; <span class="id">fin_num_fun</span> <span class="id">mu</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof174')">Proof.</span></div>
<div class="proofscript" id="proof174">
<span class="id">move</span>=&gt; <span class="id">h</span> <span class="id">U</span> <span class="id">mU</span>; <span class="id">rewrite</span> <span class="id">fin_real</span>// (<span class="id"><a href="mathcomp.analysis.measure.html#sigma_finite">lt_le_trans</a></span> <span class="id">_</span> (<span class="id">measure_ge0</span> <span class="id">mu</span> <span class="id">U</span>))//=.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">h</span>)//= <span class="id">le_measure</span>// <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">inE</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">sfinite_measure</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">exists2</span> <span class="id">s</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}^<span class="id">nat</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">fin_num_fun</span> (<span class="id">s</span> <span class="id">n</span>) &amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">U</span>, <span class="id">measurable</span> <span class="id">U</span> -&gt; <span class="id">mu</span> <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">U</a></span> = <span class="id">mseries</span> <span class="id">s</span> 0 <span class="id">U</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">sigma_finite</span> <span class="id">d</span> (<span class="id"><a href="mathcomp.analysis.measure.html#sigma_finite">T</a></span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">numDomainType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id"><a href="mathcomp.analysis.measure.html#sfinite_measure">bar</a></span> <span class="id">R</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">exists2</span> <span class="id">F</span> : (<span class="id">set</span> <span class="id">T</span>)^<span class="id">nat</span>, <span class="id">A</span> = \<span class="id"><a href="mathcomp.analysis.sequences.html#seqDU">bigcup_</a></span>(<span class="id">i</span> : <span class="id">nat</span>) <span class="id">F</span> <span class="id">i</span> &amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">measurable</span> (<span class="id">F</span> <span class="id">i</span>) /\ <span class="id">mu</span> (<span class="id">F</span> <span class="id">i</span>) &lt; +<span class="id">oo</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">fin_num_fun_sigma_finite</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">algebraOfSetsType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) : <span class="id">mu</span> <span class="id">set0</span> &lt; +<span class="id">oo</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">fin_num_fun</span> <span class="id">mu</span> -&gt; <span class="id">sigma_finite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setTI">setT</a></span> <span class="id">mu</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof175')">Proof.</span></div>
<div class="proofscript" id="proof175">
<span class="id">move</span>=&gt; <span class="id">muoo</span>; <span class="kwd">exists</span> (<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="kwd">if</span> <span class="id">i</span> \<span class="kwd">in</span> [<span class="id">set</span> 0%<span class="id">N</span>] <span class="kwd">then</span> <span class="id">setT</span> <span class="kwd">else</span> <span class="id">set0</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">bigcup_mkcondr</span> <span class="id">setTI</span> <span class="id">bigcup_const</span>//; <span class="kwd">exists</span> 0%<span class="id">N</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span>; <span class="id">split</span>; <span class="id">case</span>: <span class="id">ifPn</span> =&gt; // <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">fin_num_fun_lty</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sfinite_measure_sigma_finite</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="mathcomp.analysis.measure.html#mrestr">R</a></span> : <span class="id">realType</span>) (<span class="id">mu</span> : {<span class="id"><a href="mathcomp.analysis.topology.html#cvg_lim">measure</a></span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) :<br/>
&nbsp;&nbsp;<span class="id">sigma_finite</span> <span class="id">setT</span> <span class="id">mu</span> -&gt; <span class="id">sfinite_measure</span> <span class="id">mu</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof176')">Proof.</span></div>
<div class="proofscript" id="proof176">
<span class="id">move</span>=&gt; [<span class="id"><a href="mathcomp.analysis.measure.html#measure_sigma_additive">F</a></span> <span class="id">UF</span> <span class="id">mF</span>]; <span class="id">rewrite</span> /<span class="id">sfinite_measure</span>.<br/>
<span class="id">have</span> <span class="id">mDF</span> <span class="id">k</span> : <span class="id">measurable</span> (<span class="id">seqDU</span> <span class="id">F</span> <span class="id">k</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">measurableD</span>; <span class="id">first</span> <span class="id">exact</span>: (<span class="id">mF</span> <span class="id">k</span>).1.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigsetU_measurable</span> =&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">exact</span>: (<span class="id">mF</span> <span class="id">i</span>).1.<br/>
<span class="kwd">exists</span> (<span class="kwd">fun</span> <span class="id">k</span> =&gt; [<span class="id">the</span> <span class="id">measure</span> <span class="id">_</span> <span class="id">_</span> <span class="id">of</span> <span class="id">mrestr</span> <span class="id">mu</span> (<span class="id">mDF</span> <span class="id">k</span>)]) =&gt; [<span class="id">n</span>|<span class="id">U</span> <span class="id">mU</span>].<br/>
- <span class="id">apply</span>: <span class="id">lty_fin_num_fun</span> =&gt; //=.<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#sfinite_measure">rewrite</a></span> /<span class="id">mrestr</span> <span class="id">setTI</span> (@<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">mu</span> (<span class="id">F</span> <span class="id">n</span>)))//.<br/>
&nbsp;&nbsp;+ <span class="id">apply</span>: <span class="id">le_measure</span>; <span class="id">last</span> <span class="id">exact</span>: <span class="id">subDsetl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">rewrite</span> <span class="id">inE</span>; <span class="id"><a href="mathcomp.analysis.measure.html#Measure">apply</a></span>: <span class="id">measurableD</span>; <span class="id">first</span> <span class="id">exact</span>: (<span class="id">mF</span> <span class="id">n</span>).1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigsetU_measurable</span> =&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">exact</span>: (<span class="id">mF</span> <span class="id">i</span>).1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">inE</span>; <span class="id">exact</span>: (<span class="id">mF</span> <span class="id">n</span>).1.<br/>
&nbsp;&nbsp;+ <span class="id">exact</span>: (<span class="id">mF</span> <span class="id">n</span>).2.<br/>
<span class="id">rewrite</span> /<span class="id">mseries</span>/= /<span class="id">mrestr</span>/=; <span class="id">apply</span>/<span class="id">esym</span>/<span class="id">cvg_lim</span> =&gt; //.<br/>
<span class="id">rewrite</span> -[<span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span> --&gt; <span class="id">mu</span> <span class="id">X</span>]<span class="id">setIT</span> <span class="id">UF</span> <span class="id">seqDU_bigcup_eq</span> <span class="id">setI_bigcupr</span>.<br/>
<span class="id">apply</span>: (@<span class="id">measure_sigma_additive</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">mu</span> (<span class="kwd">fun</span> <span class="id">k</span> =&gt; <span class="id">U</span> `&amp;` <span class="id">seqDU</span> <span class="id">F</span> <span class="id">k</span>)).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span>; <span class="id">exact</span>: <span class="id">measurableI</span>.<br/>
<span class="id">exact</span>/<span class="id">trivIset_setIl</span>/<span class="id">trivIset_seqDU</span>.<br/>
Qed.</div>
<br/>
<span class="id">HB.mixin</span> <span class="kwd">Record</span> <span class="id"><a name="SigmaFiniteContent">Measure_isSFinite_subdef</a></span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) := {<br/>
&nbsp;&nbsp;<span class="id">sfinite_measure_subdef</span> : <span class="id">sfinite_measure</span> <span class="id">mu</span> }.<br/>
<br/>
<span class="id">HB.structure</span> <span class="kwd">Definition</span> <span class="id">SFiniteMeasure</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>) :=<br/>
&nbsp;&nbsp;{<span class="id">mu</span> <span class="id">of</span> @<span class="id">Measure</span> <span class="id">_</span> <span class="id">T</span> <span class="id">R</span> <span class="id">mu</span> &amp; <span class="id">Measure_isSFinite_subdef</span> <span class="id">_</span> <span class="id">T</span> <span class="id">R</span> <span class="id">mu</span> }.<br/>
<span class="kwd">Arguments</span> <span class="id">sfinite_measure_subdef</span> {<span class="id">d</span> <span class="id">T</span> <span class="id">R</span>} <span class="id">_</span>.<br/>
<br/>
<span class="kwd">Notation</span> "{ '<span class="id">sfinite_measure</span>' '<span class="id">set</span>' <span class="id">T</span> '-&gt;' '\<span class="id">bar</span>' <span class="id">R</span> }" :=<br/>
&nbsp;&nbsp;(<span class="id">SFiniteMeasure.type</span> <span class="id">T</span> <span class="id">R</span>) (<span class="kwd">at</span> <span class="id">level</span> 36, <span class="id">T</span>, <span class="id">R</span> <span class="kwd">at</span> <span class="id">next</span> <span class="id">level</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "{ '<span class="id">sfinite_measure</span>'  '<span class="id">set</span>'  <span class="id">T</span>  '-&gt;'  '\<span class="id">bar</span>'  <span class="id">R</span> }") : <span class="id">ring_scope</span>.<br/>
<br/>
<span class="id">HB.mixin</span> <span class="kwd">Record</span> <span class="id">isSigmaFinite</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">numFieldType</span>)<br/>
&nbsp;&nbsp;(<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) := { <span class="id">sigma_finiteT</span> : <span class="id">sigma_finite</span> <span class="id">setT</span> <span class="id">mu</span> }.<br/>
<br/>
#[<span class="id">short</span>(<span class="id">type</span>="<span class="id">sigma_finite_content</span>")]<br/>
<span class="id">HB.structure</span> <span class="kwd">Definition</span> <span class="id">SigmaFiniteContent</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> :=<br/>
&nbsp;&nbsp;{ <span class="id">mu</span> <span class="id">of</span> <span class="id">isSigmaFinite</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id">mu</span> &amp; @<span class="id">Content</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id">mu</span> }.<br/>
<br/>
<span class="kwd">Arguments</span> <span class="id">sigma_finiteT</span> {<span class="id">d</span> <span class="id">T</span> <span class="id">R</span>} <span class="id">s</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">sigma_finiteT</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Notation</span> "{ '<span class="id">sigma_finite_content</span>' '<span class="id">set</span>' <span class="id">T</span> '-&gt;' '\<span class="id"><a href="mathcomp.classical.classical_sets.html#setT">bar</a></span>' <span class="id">R</span> }" :=<br/>
&nbsp;&nbsp;(<span class="id">sigma_finite_content</span> <span class="id">T</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurableType">R</a></span>) (<span class="kwd">at</span> <span class="id">level</span> 36, <span class="id">T</span>, <span class="id">R</span> <span class="kwd">at</span> <span class="id">next</span> <span class="id">level</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "{ '<span class="id">sigma_finite_content</span>'  '<span class="id">set</span>'  <span class="id">T</span>  '-&gt;'  '\<span class="id">bar</span>'  <span class="id">R</span> }")<br/>
&nbsp;&nbsp;: <span class="id">ring_scope</span>.<br/>
<br/>
#[<span class="id">short</span>(<span class="id">type</span>="<span class="id">sigma_finite_measure</span>")]<br/>
<span class="id">HB.structure</span> <span class="kwd">Definition</span> <span class="id">SigmaFiniteMeasure</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> :=<br/>
&nbsp;&nbsp;{ <span class="id">mu</span> <span class="id">of</span> @<span class="id">SFiniteMeasure</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id">mu</span> &amp; <span class="id">isSigmaFinite</span> <span class="id">d</span> <span class="id"><a name="Builders_200.HB_unnamed_factory_204">T</a></span> <span class="id">R</span> <span class="id">mu</span> }.<br/>
<br/>
<span class="kwd">Notation</span> "{ '<span class="id">sigma_finite_measure</span>' '<span class="id">set</span>' <span class="id">T</span> '-&gt;' '\<span class="id">bar</span>' <span class="id">R</span> }" :=<br/>
&nbsp;&nbsp;(<span class="id">sigma_finite_measure</span> <span class="id">T</span> <span class="id">R</span>) (<span class="kwd">at</span> <span class="id">level</span> 36, <span class="id">T</span>, <span class="id">R</span> <span class="kwd">at</span> <span class="id">next</span> <span class="id">level</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "{ '<span class="id"><a href="mathcomp.analysis.measure.html#sigma_finite">sigma_finite_measure</a></span>'  '<span class="id">set</span>'  <span class="id">T</span>  '-&gt;'  '\<span class="id">bar</span>'  <span class="id">R</span> }")<br/>
&nbsp;&nbsp;: <span class="id">ring_scope</span>.<br/>
<br/>
<span class="id">HB.factory</span> <span class="kwd">Record</span> <span class="id">Measure_isSigmaFinite</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) <span class="id">of</span> <span class="id">isMeasure</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">mu</span> :=<br/>
&nbsp;&nbsp;{ <span class="id">sigma_finiteT</span> : <span class="id">sigma_finite</span> <span class="id">setT</span> <span class="id">mu</span> }.<br/>
<br/>
<span class="id">HB.builders</span> <span class="kwd">Context</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurableType">d</a></span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>)<br/>
&nbsp;&nbsp;<span class="id">mu</span> <span class="id">of</span> @<span class="id">Measure_isSigmaFinite</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id">mu</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">sfinite</span> : <span class="id">sfinite_measure</span> <span class="id">mu</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof177')">Proof.</span></div>
<div class="proofscript" id="proof177">
 <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sfinite_measure_sigma_finite</span>; <span class="id">exact</span>: <span class="id">sigma_finiteT</span>. Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := @<span class="id">Measure_isSFinite_subdef.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.measure.html#mzero">_</a></span> <span class="id">mu</span> <span class="id">sfinite</span>.<br/>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := @<span class="id">isSigmaFinite.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">mu</span> <span class="id">sigma_finiteT</span>.<br/>
<br/>
<span class="id">HB.end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigma_finite_mzero</span> <span class="id">d</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">T</a></span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>) :<br/>
&nbsp;&nbsp;<span class="id">sigma_finite</span> <span class="id">setT</span> (@<span class="id">mzero</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof178')">Proof.</span></div>
<div class="proofscript" id="proof178">
 <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">fin_num_fun_sigma_finite</span> =&gt; //; <span class="id">rewrite</span> <span class="id">measure0</span>. Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>) :=<br/>
&nbsp;&nbsp;@<span class="id">isSigmaFinite.Build</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id">mzero</span> (@<span class="id">sigma_finite_mzero</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">sfinite_mzero</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>) :<br/>
&nbsp;&nbsp;<span class="id">sfinite_measure</span> (@<span class="id">mzero</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof179')">Proof.</span></div>
<div class="proofscript" id="proof179">
 <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sfinite_measure_sigma_finite</span>; <span class="id">exact</span>: <span class="id">sigma_finite_mzero</span>. Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>) :=<br/>
&nbsp;&nbsp;@<span class="id">Measure_isSFinite_subdef.Build</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id">mzero</span> (@<span class="id">sfinite_mzero</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span>).<br/>
<br/>
<span class="id">HB.mixin</span> <span class="kwd">Record</span> <span class="id">SigmaFinite_isFinite</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">R</span> : <span class="id">numDomainType</span>) (<span class="id">k</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) :=<br/>
&nbsp;&nbsp;{ <span class="id">fin_num_measure</span> : <span class="id">fin_num_fun</span> <span class="id">k</span> }.<br/>
<br/>
<span class="id">HB.structure</span> <span class="kwd">Definition</span> <span class="id">FinNumFun</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">R</span> : <span class="id">numFieldType</span>) := { <span class="id">k</span> <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.measure.html#sfinite_measure">SigmaFinite_isFinite</a></span> <span class="id">_</span> <span class="id">T</span> <span class="id">R</span> <span class="id">k</span> }.<br/>
<br/>
<span class="id"><a href="mathcomp.analysis.measure.html#sfinite_measure_sigma_finite">HB.structure</a></span> <span class="kwd">Definition</span> <span class="id">FiniteMeasure</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>) :=<br/>
&nbsp;&nbsp;{ <span class="id">k</span> <span class="id">of</span> @<span class="id"><a href="mathcomp.analysis.measure.html#Builders_225.fin_num_measure">SigmaFiniteMeasure</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">k</span> &amp; <span class="id">SigmaFinite_isFinite</span> <span class="id">_</span> <span class="id">T</span> <span class="id">R</span> <span class="id">k</span> }.<br/>
<span class="kwd">Arguments</span> <span class="id">fin_num_measure</span> {<span class="id"><a href="mathcomp.analysis.measure.html#Builders_225.Builders_225.R">d</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_225.Builders_225.k">T</a></span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_225.Builders_225.sfinite">R</a></span>} <span class="id">_</span>.<br/>
<br/>
<span class="kwd">Notation</span> "{ '<span class="id">finite_measure</span>' '<span class="id">set</span>' <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">T</a></span> '-&gt;' '\<span class="id">bar</span>' <span class="id">R</span> }" :=<br/>
&nbsp;&nbsp;(<span class="id"><a href="mathcomp.analysis.measure.html#fin_num_fun_sigma_finite">FiniteMeasure.type</a></span> <span class="id">T</span> <span class="id">R</span>) (<span class="kwd">at</span> <span class="id">level</span> 36, <span class="id">T</span>, <span class="id">R</span> <span class="kwd">at</span> <span class="id">next</span> <span class="id"><a href="mathcomp.analysis.measure.html#Builders_225.fin_num_measure">level</a></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "{ '<span class="id">finite_measure</span>'  '<span class="id">set</span>'  <span class="id">T</span>  '-&gt;'  '\<span class="id">bar</span>'  <span class="id">R</span> }") : <span class="id">ring_scope</span>.<br/>
<br/>
<span class="id">HB.factory</span> <span class="kwd">Record</span> <span class="id">Measure_isFinite</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">k</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>)<br/>
&nbsp;&nbsp;<span class="id">of</span> <span class="id"><a href="mathcomp.analysis.measure.html#SigmaFinite_isFinite.Build">isMeasure</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">k</span> := { <span class="id">fin_num_measure</span> : <span class="id">fin_num_fun</span> <span class="id"><a name="Measure_isSFinite">k</a></span> }.<br/>
<br/>
<span class="id">HB.builders</span> <span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>) <span class="id">k</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">of</a></span> <span class="id">Measure_isFinite</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id">k</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">sfinite</span> : <span class="id">sfinite_measure</span> <span class="id">k</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof180')">Proof.</span></div>
<div class="proofscript" id="proof180">
<span class="id">apply</span>: <span class="id">sfinite_measure_sigma_finite</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">fin_num_fun_sigma_finite</span>; [<span class="id">rewrite</span> <span class="id">measure0</span>|<span class="id">exact</span>: <span class="id">fin_num_measure</span>].<br/>
Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurableType">_</a></span> := @<span class="id">Measure_isSFinite_subdef.Build</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id">k</span> <span class="id">sfinite</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">sigma_finite</span> : <span class="id">sigma_finite</span> <span class="id">setT</span> <span class="id">k</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof181')">Proof.</span></div>
<div class="proofscript" id="proof181">
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">fin_num_fun_sigma_finite</span>; [<span class="id">rewrite</span> <span class="id">measure0</span>|<span class="id">exact</span>: <span class="id">fin_num_measure</span>].<br/>
Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := @<span class="id">isSigmaFinite.Build</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id">k</span> <span class="id">sigma_finite</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">finite</span> : <span class="id">fin_num_fun</span> <span class="id">k</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof182')">Proof.</span></div>
<div class="proofscript" id="proof182">
 <span class="id">exact</span>: <span class="id">fin_num_measure</span>. Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := @<span class="id">SigmaFinite_isFinite.Build</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id">k</span> <span class="id">finite</span>.<br/>
<br/>
<span class="id">HB.end</span>.<br/>
<br/>
<span class="id">HB.factory</span> <span class="kwd">Record</span> <span class="id"><a href="mathcomp.analysis.measure.html#sfinite_measure.T">Measure_isSFinite</a></span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">k</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) <span class="id">of</span> <span class="id"><a name="sfinite_measure.s0">isMeasure</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">k</span> := {<br/>
&nbsp;&nbsp;<span class="id">sfinite_measure_subdef</span> : <span class="kwd">exists</span> <span class="id">s</span> : {<span class="id">finite_measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}^<span class="id">nat</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">U</span>, <span class="id">measurable</span> <span class="id">U</span> -&gt; <span class="id">k</span> <span class="id">U</span> = <span class="id">mseries</span> <span class="id">s</span> 0 <span class="id">U</span> }.<br/>
<br/>
<span class="id">HB.builders</span> <span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id"><a href="mathcomp.analysis.measure.html#sfinite_measure.s">measurableType</a></span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>)<br/>
&nbsp;&nbsp;<span class="id">k</span> <span class="id">of</span> <span class="id">Measure_isSFinite</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id">k</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">sfinite</span> : <span class="id">sfinite_measure</span> <span class="id">k</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof183')">Proof.</span></div>
<div class="proofscript" id="proof183">
<span class="id">have</span> [<span class="id">s</span> <span class="id">sE</span>] := <span class="id">sfinite_measure_subdef</span>.<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">s</span> =&gt; //=&gt; <span class="id">n</span>; <span class="id">exact</span>: <span class="id">fin_num_measure</span>.<br/>
Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := @<span class="id">Measure_isSFinite_subdef.Build</span> <span class="id">d</span> <span class="id">T</span> <span class="id"><a href="mathcomp.classical.boolp.html#cid2">R</a></span> <span class="id">k</span> <span class="id">sfinite</span>.<br/>
<br/>
<span class="id">HB.end</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">sfinite_measure</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu</span> : {<span class="id">sfinite_measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}).<br/>
<br/>
<span class="kwd">Let</span> <span class="id">s</span> : (<span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.measure.html#sfinite_measure.T">R</a></span>)^<span class="id">nat</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span>: <span class="id">exist2</span> <span class="id">x</span> <span class="id">_</span> <span class="id">_</span> := <span class="id">cid2</span> (<span class="id">sfinite_measure_subdef</span> <span class="id">mu</span>) <span class="kwd">in</span> <span class="id">x</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">s0</span> <span class="id">n</span> : <span class="id">s</span> <span class="id">n</span> <span class="id">set0</span> = 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof184')">Proof.</span></div>
<div class="proofscript" id="proof184">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">s</span>; <span class="id">case</span>: <span class="id">cid2</span>. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">s_ge0</span> <span class="id">n</span> <span class="id">x</span> : 0 &lt;= <span class="id">s</span> <span class="id">n</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#O">x</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof185')">Proof.</span></div>
<div class="proofscript" id="proof185">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">s</span>; <span class="id">case</span>: <span class="id">cid2</span>. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id"><a href="mathcomp.analysis.measure.html#sfinite_measure.s">s_semi_sigma_additive</a></span> <span class="id">n</span> : <span class="id">semi_sigma_additive</span> (<span class="id">s</span> <span class="id">n</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof186')">Proof.</span></div>
<div class="proofscript" id="proof186">
<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">s</span>; <span class="id">case</span>: <span class="id">cid2</span> =&gt; <span class="id">s</span>' <span class="id">s</span>'1 <span class="id">s</span>'2; <span class="id">exact</span>: <span class="id">measure_semi_sigma_additive</span>.<br/>
Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">n</span> := @<span class="id">isMeasure.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">s</span> <span class="id"><a href="mathcomp.analysis.measure.html#mrestr">n</a></span>) (<span class="id">s0</span> <span class="id">n</span>) (<span class="id">s_ge0</span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;(@<span class="id">s_semi_sigma_additive</span> <span class="id">n</span>).<br/>
<br/>
<span class="kwd">Let</span> <span class="id">s_fin</span> <span class="id">n</span> : <span class="id">fin_num_fun</span> (<span class="id">s</span> <span class="id">n</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof187')">Proof.</span></div>
<div class="proofscript" id="proof187">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">s</span>; <span class="id">case</span>: <span class="id">cid2</span> =&gt; <span class="id">F</span> <span class="id">finF</span> <span class="id">muE</span>; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measure_frestr.T">finF</a></span>. Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id"><a name="measure_frestr.moo">_</a></span> <span class="id">n</span> := @<span class="id">Measure_isFinite.Build</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> (<span class="id">s</span> <span class="id">n</span>) (<span class="id"><a href="mathcomp.analysis.measure.html#mfrestr">s_fin</a></span> <span class="id">n</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">sfinite_measure_seq</span> : {<span class="id">finite_measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}^<span class="id">nat</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">n</span> =&gt; [<span class="id">the</span> {<span class="id">finite_measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>} <span class="id">of</span> <span class="id"><a href="mathcomp.analysis.measure.html#mrestr">s</a></span> <span class="id">n</span>].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">sfinite_measure_seqP</span> <span class="id">U</span> : <span class="id">measurable</span> <span class="id">U</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> <span class="id">U</span> = <span class="id">mseries</span> <span class="id">sfinite_measure_seq</span> <span class="id">O</span> <span class="id">U</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof188')">Proof.</span></div>
<div class="proofscript" id="proof188">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">mU</span>; <span class="id">rewrite</span> /<span class="id">mseries</span> /= /<span class="id">s</span>; <span class="id">case</span>: <span class="id">cid2</span> =&gt; // <span class="id">x</span> <span class="id">xfin</span> -&gt;.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">sfinite_measure</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">mfrestr</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">D</span> : <span class="id">set</span> <span class="id">T</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) (<span class="id">mD</span> : <span class="id">measurable</span> <span class="id">D</span>) <span class="id">of</span> <span class="id">f</span> <span class="id">D</span> &lt; +<span class="id">oo</span> :=<br/>
&nbsp;&nbsp;<span class="id">mrestr</span> <span class="id">f</span> <span class="id">mD</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">measure_frestr</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>).<br/>
<span class="kwd">Variables</span> (<span class="id">mu</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) (<span class="id">D</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">mD</span> : <span class="id">measurable</span> <span class="id">D</span>).<br/>
<span class="kwd">Hypothesis</span> <span class="id">moo</span> : <span class="id">mu</span> <span class="id">D</span> &lt; +<span class="id">oo</span>.<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id">restr</span> := (<span class="id">mfrestr</span> <span class="id"><a name="Measure_isSubProbability">mD</a></span> <span class="id">moo</span>).<br/>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">Measure.on</span> <span class="id">restr</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">restr_fin</span> : <span class="id">fin_num_fun</span> <span class="id">restr</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof189')">Proof.</span></div>
<div class="proofscript" id="proof189">
<span class="id">move</span>=&gt; <span class="id">U</span> <span class="id">mU</span>; <span class="id"><a href="mathcomp.analysis.measure.html#isMeasure">rewrite</a></span> /<span class="id">restr</span> /<span class="id">mrestr</span> <span class="id">ge0_fin_numE</span> ?<span class="id">measure_ge0</span>//.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">moo</span>)// <span class="id">le_measure</span>// ?<span class="id">inE</span>//; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">measurableI</a></span>.<br/>
Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">Measure_isFinite.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">restr</span><br/>
&nbsp;&nbsp;<span class="id">restr_fin</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">measure_frestr</span>.<br/>
<br/>
<span class="id">HB.mixin</span> <span class="kwd">Record</span> <span class="id">FiniteMeasure_isSubProbability</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">P</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id"><a name="Builders_278.HB_unnamed_factory_284">R</a></span>) :=<br/>
&nbsp;&nbsp;{ <span class="id">sprobability_setT</span> : <span class="id">P</span> <span class="id">setT</span> &lt;= 1%<span class="id">E</span> }.<br/>
<br/>
#[<span class="id">short</span>(<span class="id">type</span>=<span class="id">subprobability</span>)]<br/>
<span class="id">HB.structure</span> <span class="kwd">Definition</span> <span class="id">SubProbability</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>)<br/>
&nbsp;&nbsp;:= {<span class="id">mu</span> <span class="id">of</span> @<span class="id">FiniteMeasure</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id">mu</span> &amp; <span class="id">FiniteMeasure_isSubProbability</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id">mu</span> }.<br/>
<br/>
<span class="id">HB.factory</span> <span class="kwd">Record</span> <span class="id">Measure_isSubProbability</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">P</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) <span class="id">of</span> <span class="id">isMeasure</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">P</span> :=<br/>
&nbsp;&nbsp;{ <span class="id">sprobability_setT</span> : <span class="id">P</span> <span class="id">setT</span> &lt;= 1%<span class="id">E</span> }.<br/>
<br/>
<span class="id"><a name="probability_lemmas">HB.builders</a></span> <span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>)<br/>
&nbsp;&nbsp;<span class="id">P</span> <span class="id">of</span> <span class="id">Measure_isSubProbability</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id"><a name="probability_le1">P</a></span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">finite</span> : @<span class="id">Measure_isFinite</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id">P</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof190')">Proof.</span></div>
<div class="proofscript" id="proof190">
<span class="id">split</span>; <span class="id">apply</span>: <span class="id">lty_fin_num_fun</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">le_lt_trans</span> (@<span class="id">sprobability_setT</span>))// <span class="id">ltey</span>.<br/>
Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">finite</span>.<br/>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> :=<br/>
&nbsp;&nbsp;@<span class="id">FiniteMeasure_isSubProbability.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">P</span> <span class="id">sprobability_setT</span>.<br/>
<br/>
<span class="id">HB.end</span>.<br/>
<br/>
<span class="id">HB.mixin</span> <span class="kwd">Record</span> <span class="id">isProbability</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>)<br/>
&nbsp;&nbsp;(<span class="id">P</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) := { <span class="id">probability_setT</span> : <span class="id">P</span> <span class="id">setT</span> = 1%<span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">E</a></span> }.<br/>
<br/>
#[<span class="id">short</span>(<span class="id">type</span>=<span class="id">probability</span>)]<br/>
<span class="id">HB.structure</span> <span class="kwd">Definition</span> <span class="id">Probability</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>) :=<br/>
&nbsp;&nbsp;{<span class="id">P</span> <span class="id">of</span> @<span class="id">SubProbability</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id">P</span> &amp; <span class="id">isProbability</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id">P</span> }.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">probability_lemmas</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">P</span> : <span class="id">probability</span> <span class="id">T</span> <span class="id">R</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">probability_le1</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">measurable</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurableType">A</a></span> -&gt; <span class="id">P</span> <span class="id">A</span> &lt;= 1.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof191')">Proof.</span></div>
<div class="proofscript" id="proof191">
<span class="id">move</span>=&gt; <span class="id">mA</span>; <span class="id">rewrite</span> -(@<span class="id">probability_setT</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.measure.html#mnormalize.T">_</a></span> <span class="id">_</span> <span class="id">P</span>).<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">le_measure</span> =&gt; //; <span class="id">rewrite</span> ?<span class="id">in_setE</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">probability_setC</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) : <span class="id">measurable</span> <span class="id">A</span> -&gt; <span class="id">P</span> (~` <span class="id">A</span>) = 1 - <span class="id">P</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof192')">Proof.</span></div>
<div class="proofscript" id="proof192">
<span class="id">move</span>=&gt; <span class="id">mA</span>.<br/>
<span class="id">rewrite</span> -(@<span class="id">probability_setT</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">P</span>) -(<span class="id">setvU</span> <span class="id">A</span>) <span class="id">measureU</span> ?<span class="id">addeK</span> ?<span class="id">setICl</span>//.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">fin_num_measure</span>.<br/>
- <span class="id">exact</span>: <span class="id">measurableC</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">probability_lemmas</span>.<br/>
<br/>
<span class="id">HB.factory</span> <span class="kwd">Record</span> <span class="id"><a name="mnormalize.mnormalize_ge0">Measure_isProbability</a></span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">P</span> : <span class="id">set</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">T</a></span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) <span class="id">of</span> <span class="id">isMeasure</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">P</span> :=<br/>
&nbsp;&nbsp;{ <span class="id">probability_setT</span> : <span class="id">P</span> <span class="id"><a href="mathcomp.analysis.measure.html#semi_sigma_additive">setT</a></span> = 1%<span class="id">E</span> }.<br/>
<br/>
<span class="id">HB.builders</span> <span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>)<br/>
&nbsp;&nbsp;<span class="id">P</span> <span class="id">of</span> <span class="id">Measure_isProbability</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id">P</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">subprobability</span> : @<span class="id">Measure_isSubProbability</span> <span class="id">d</span> <span class="id">T</span> <span class="id">R</span> <span class="id">P</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof193')">Proof.</span></div>
<div class="proofscript" id="proof193">
 <span class="kwd">by</span> <span class="id">split</span>; <span class="id">rewrite</span> <span class="id">probability_setT</span>. Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">subprobability</span>.<br/>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := @<span class="id">isProbability.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">P</span> <span class="id">probability_setT</span>.<br/>
<br/>
<span class="id">HB.end</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">mnormalize</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>).<br/>
<span class="kwd">Variables</span> (<span class="id">mu</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) (<span class="id">P</span> : <span class="id">probability</span> <span class="id">T</span> <span class="id"><a href="mathcomp.analysis.measure.html#mnormalize.mnormalize_ge0">R</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">mnormalize</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">evidence</span> := <span class="id">mu</span> [<span class="id">set</span>: <span class="id">T</span>] <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">if</span> (<span class="id">evidence</span> == 0) || (<span class="id">evidence</span> == +<span class="id">oo</span>) <span class="kwd">then</span> <span class="kwd">fun</span> <span class="id">U</span> =&gt; <span class="id">P</span> <span class="id">U</span><br/>
&nbsp;&nbsp;<span class="kwd">else</span> <span class="kwd">fun</span> <span class="id">U</span> =&gt; <span class="id">mu</span> <span class="id">U</span> * (<span class="id">fine</span> <span class="id">evidence</span>)^-1%:<span class="id">E</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">mnormalize0</span> : <span class="id">mnormalize</span> <span class="id">set0</span> = 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof194')">Proof.</span></div>
<div class="proofscript" id="proof194">
<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">mnormalize</span>; <span class="id">case</span>: <span class="id">ifPn</span> =&gt; // <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">measure0</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fineK">mul0e</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">mnormalize_ge0</span> <span class="id">U</span> : 0 &lt;= <span class="id">mnormalize</span> <span class="id">U</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof195')">Proof.</span></div>
<div class="proofscript" id="proof195">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">mnormalize</span>; <span class="id">case</span>: <span class="id">ifPn</span> =&gt; //; <span class="id">case</span>: <span class="id">ifPn</span>. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">mnormalize_sigma_additive</span> : <span class="id">semi_sigma_additive</span> <span class="id"><a name="pdirac">mnormalize</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof196')">Proof.</span></div>
<div class="proofscript" id="proof196">
<span class="id">move</span>=&gt; <span class="id">F</span> <span class="id">mF</span> <span class="id">tF</span> <span class="id">mUF</span>; <span class="id">rewrite</span> /<span class="id">mnormalize</span>/=.<br/>
<span class="id">case</span>: <span class="id">ifPn</span> =&gt; [<span class="id">_</span>|<span class="id">_</span>]; <span class="id">first</span> <span class="id">exact</span>: <span class="id">measure_semi_sigma_additive</span>.<br/>
<span class="id">rewrite</span> [<span class="id"><a href="mathcomp.analysis.measure.html#pdirac.T">X</a></span> <span class="kwd">in</span> <span class="id">X</span> --&gt; <span class="id">_</span>](<span class="id">_</span> : <span class="id">_</span> = (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(0 &lt;= <span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">mu</span> (<span class="id">F</span> <span class="id">i</span>)) \*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cst</span> (<span class="id">fine</span> (<span class="id">mu</span> <span class="id"><a href="mathcomp.analysis.measure.html#counting">setT</a></span>))^-1%:<span class="id">E</span>); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> -<span class="id">ge0_sume_distrl</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">cvgeMr</span> =&gt; //; <span class="id">exact</span>: <span class="id">measure_semi_sigma_additive</span>.<br/>
Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">isMeasure.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">mnormalize</span><br/>
&nbsp;&nbsp;<span class="id">mnormalize0</span> <span class="id">mnormalize_ge0</span> <span class="id">mnormalize_sigma_additive</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">mnormalize1</span> : <span class="id">mnormalize</span> [<span class="id">set</span>: <span class="id">T</span>] = 1.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof197')">Proof.</span></div>
<div class="proofscript" id="proof197">
<span class="id">rewrite</span> /<span class="id">mnormalize</span>; <span class="id">case</span>: <span class="id">ifPn</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">probability_setT</span>.<br/>
<span class="id">rewrite</span> <span class="id">negb_or</span> =&gt; /<span class="id">andP</span>[<span class="id">ft0</span> <span class="id">ftoo</span>].<br/>
<span class="id">have</span> ? : <span class="id">mu</span> <span class="id">setT</span> \<span class="id">is</span> <span class="id">a</span> <span class="id">fin_num</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a name="content_semiRingOfSetsType.mB">ge0_fin_numE</a></span>// <span class="id">ltey</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -{1}(@<span class="id">fineK</span> <span class="id">_</span> (<span class="id">mu</span> <span class="id">setT</span>))// -<span class="id">EFinM</span> <span class="id">divrr</span>// ?<span class="id">unitfE</span> <span class="id">fine_eq0</span>.<br/>
Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> :=<br/>
&nbsp;&nbsp;<span class="id">Measure_isProbability.Build</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.measure.html#content_semiRingOfSetsType.mu">_</a></span> <span class="id">_</span> <span class="id">mnormalize</span> <span class="id">mnormalize1</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">mnormalize</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">pdirac</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id"><a href="mathcomp.analysis.measure.html#content_semiRingOfSetsType.B">realType</a></span>).<br/>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">x</span> :=<br/>
&nbsp;&nbsp;<span class="id">Measure_isProbability.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.measure.html#measure_ge0">_</a></span> (@<span class="id">dirac</span> <span class="id">_</span> <span class="id">T</span> <span class="id">x</span> <span class="id">R</span>) (<span class="id">diracT</span> <span class="id">R</span> <span class="id">x</span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id">pdirac</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigma_finite_counting</span> (<span class="id">R</span> : <span class="id">realType</span>) :<br/>
&nbsp;&nbsp;<span class="id">sigma_finite</span> [<span class="id">set</span>: <span class="id">nat</span>] (@<span class="id">counting</span> <span class="id">_</span> <span class="id">R</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof198')">Proof.</span></div>
<div class="proofscript" id="proof198">
<span class="kwd">exists</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; `<span class="id">I_n</span>.+1); <span class="id">first</span> <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>=&gt; //<span class="id">x</span> <span class="id">_</span>; <span class="kwd">exists</span> <span class="id">x</span> =&gt; /=.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">k</span>; <span class="id">split</span> =&gt; //; <span class="id">rewrite</span> /<span class="id">counting</span>/= <span class="id"><a href="mathcomp.analysis.measure.html#measurable">asboolT</a></span>// <span class="id">ltry</span>.<br/>
Qed.</div>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">R</span> :=<br/>
&nbsp;&nbsp;@<span class="id">isSigmaFinite.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (@<span class="id">counting</span> <span class="id">_</span> <span class="id">R</span>) (<span class="id">sigma_finite_counting</span> <span class="id">R</span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id">content_semiRingOfSetsType</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>) (<span class="id"><a href="mathcomp.analysis.measure.html#measurableU">R</a></span> : <span class="id">realFieldType</span>).<br/>
<span class="kwd">Variables</span> (<span class="id">mu</span> : {<span class="id">content</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) (<span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIACA">T</a></span>).<br/>
<span class="kwd">Hypotheses</span> (<span class="id">mA</span> : <span class="id">measurable</span> <span class="id">A</span>) (<span class="id">mB</span> : <span class="id">measurable</span> <span class="id">B</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measureIl</span> : <span class="id">mu</span> (<span class="id">A</span> `&amp;` <span class="id">B</span>) &lt;= <span class="id">mu</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof199')">Proof.</span></div>
<div class="proofscript" id="proof199">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">le_measure</span> ?<span class="id">inE</span>//; <span class="id">apply</span>: <span class="id">measurableI</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measureIr</span> : <span class="id">mu</span> (<span class="id">A</span> `&amp;` <span class="id">B</span>) &lt;= <span class="id">mu</span> <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof200')">Proof.</span></div>
<div class="proofscript" id="proof200">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">le_measure</span> ?<span class="id">inE</span>//; <span class="id">apply</span>: <span class="id">measurableI</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subset_measure0</span> : <span class="id">A</span> `&lt;=` <span class="id">B</span> -&gt; <span class="id">mu</span> <span class="id">B</span> = 0 -&gt; <span class="id">mu</span> <span class="id">A</span> = 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof201')">Proof.</span></div>
<div class="proofscript" id="proof201">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; ? <span class="id">B0</span>; <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> -<span class="id">measure_le0</span> -<span class="id"><a href="mathcomp.analysis.measure.html#measurable">B0</a></span> <span class="id">le_measure</span> ?<span class="id">inE</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">content_semiRingOfSetsType</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">content_ringOfSetsType</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_mkord">T</a></span> : <span class="id">ringOfSetsType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realFieldType</span>).<br/>
<span class="kwd">Variable</span> <span class="id">mu</span> : {<span class="id">content</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> <span class="id">T</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measureDI</span> <span class="id">A</span> <span class="id"><a href="mathcomp.analysis.measure.html#bigsetU_measurable">B</a></span> : <span class="id">measurable</span> <span class="id">A</span> -&gt; <span class="id">measurable</span> <span class="id">B</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> <span class="id">A</span> = <span class="id">mu</span> (<span class="id">A</span> `\` <span class="id">B</span>) + <span class="id">mu</span> (<span class="id">A</span> `&amp;` <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof202')">Proof.</span></div>
<div class="proofscript" id="proof202">
<span class="id">move</span>=&gt; <span class="id">mA</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#add0e">mB</a></span>; <span class="id">rewrite</span> -<span class="id">measure_semi_additive2</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setDDr</span> <span class="id">setDv</span> <span class="id">setD0</span>.<br/>
- <span class="id">exact</span>: <span class="id">measurableD</span>.<br/>
- <span class="id">exact</span>: <span class="id">measurableI</span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurableU</span>; [<span class="id"><a href="mathcomp.analysis.measure.html#measureU.T">exact</a></span>: <span class="id">measurableD</span> |<span class="id">exact</span>: <span class="id">measurableI</span>].<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setDE</span> <span class="id">setIACA</span> <span class="id">setICl</span> <span class="id">setI0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measureD</span> <span class="id"><a href="mathcomp.analysis.measure.html#measureU.mu">A</a></span> <span class="id">B</span> : <span class="id">measurable</span> <span class="id">A</span> -&gt; <span class="id">measurable</span> <span class="id">B</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> <span class="id">A</span> &lt; +<span class="id">oo</span> -&gt; <span class="id">mu</span> (<span class="id">A</span> `\` <span class="id">B</span>) = <span class="id">mu</span> <span class="id">A</span> - <span class="id">mu</span> (<span class="id">A</span> `&amp;` <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof203')">Proof.</span></div>
<div class="proofscript" id="proof203">
<span class="id">move</span>=&gt; <span class="id">mA</span> <span class="id">mB</span> <span class="id">mAoo</span>.<br/>
<span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#setUidl">measureDI</a></span> <span class="id">mA</span> <span class="id">mB</span>) <span class="id">addeK</span>// <span class="id">fin_numE</span> 1?<span class="id">gt_eqF</span> 1?<span class="id">lt_eqF</span>//.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#setDv">le_lt_trans</a></span> <span class="id">_</span> <span class="id">mAoo</span>)// <span class="id">le_measure</span> // ?<span class="id">inE</span>//; <span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#setIA">measurableI</a></span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">lt_le_trans</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurableI">_</a></span> (<span class="id">measure_ge0</span> <span class="id">_</span> <span class="id">_</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measureU2</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">measurable</span> <span class="id">A</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable">measurable</a></span> <span class="id">B</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> (<span class="id">A</span> `|` <span class="id">B</span>) &lt;= <span class="id">mu</span> <span class="id">A</span> + <span class="id">mu</span> <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof204')">Proof.</span></div>
<div class="proofscript" id="proof204">
<span class="id">move</span>=&gt; ? ?; <span class="id">rewrite</span> -<span class="id">bigcup2inE</span> <span class="id">bigcup_mkord</span>.<br/>
<span class="id">rewrite</span> (<span class="id">le_trans</span> (@<span class="id">content_sub_additive</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.measure.html#measureU.mu">mu</a></span> <span class="id">_</span> (<span class="id">bigcup2</span> <span class="id">A</span> <span class="id">B</span>) 2%<span class="id">N</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>))//.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; -[//|[//|[|]]].<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigsetU_measurable</span> =&gt; -[] [//|[//|[|]]].<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big_ord_recr</span>/= <span class="id">big_ord_recr</span>/= <span class="id">big_ord0</span> <span class="id">add0e</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">content_ringOfSetsType</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">measureU</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">ringOfSetsType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realFieldType</span>).<br/>
<span class="kwd">Variable</span> <span class="id">mu</span> : {<span class="id">measure</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable">set</a></span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measureUfinr</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">measurable</span> <span class="id">A</span> -&gt; <span class="id">measurable</span> <span class="id">B</span> -&gt; <span class="id">mu</span> <span class="id">B</span> &lt; +<span class="id">oo</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> (<span class="id">A</span> `|` <span class="id">B</span>) = <span class="id">mu</span> <span class="id">A</span> + <span class="id">mu</span> <span class="id">B</span> - <span class="id">mu</span> (<span class="id">A</span> `&amp;` <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof205')">Proof.</span></div>
<div class="proofscript" id="proof205">
<span class="id">move</span>=&gt; <span class="id">Am</span> <span class="id">Bm</span> <span class="id">mBfin</span>; <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#sube0">rewrite</a></span> -[<span class="id">B</span> <span class="kwd">in</span> <span class="id">LHS</span>](<span class="id">setDUK</span> (@<span class="id">subIsetl</span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span>)) <span class="id">setUA</span>.<br/>
<span class="id">rewrite</span> [<span class="id">A</span> `|` <span class="id">_</span>]<span class="id">setUidl</span>; <span class="id">last</span> <span class="id">exact</span>: <span class="id">subIsetr</span>.<br/>
<span class="id">rewrite</span> <span class="id">measureU</span>//=; [|<span class="id">rewrite</span> <span class="id">setDIr</span> <span class="id">setDv</span> <span class="id">set0U</span> ?<span class="id">setDIK</span>//..].<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">measureD</span>// ?<span class="id">setIA</span> ?<span class="id">setIid</span> 1?<span class="id">setIC</span> ?<span class="id">addeA</span>//; <span class="id">exact</span>: <span class="id">measurableI</span>.<br/>
- <span class="id">exact</span>: <span class="id">measurableD</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measureUfinl</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">measurable</span> <span class="id">A</span> -&gt; <span class="id">measurable</span> <span class="id">B</span> -&gt; <span class="id">mu</span> <span class="id">A</span> &lt; +<span class="id">oo</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> (<span class="id">A</span> `|` <span class="id">B</span>) = <span class="id">mu</span> <span class="id">A</span> + <span class="id">mu</span> <span class="id">B</span> - <span class="id">mu</span> (<span class="id">A</span> `&amp;` <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof206')">Proof.</span></div>
<div class="proofscript" id="proof206">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; *; <span class="id">rewrite</span> <span class="id">setUC</span> <span class="id">measureUfinr</span>// <span class="id">setIC</span> [<span class="id">mu</span> <span class="id">B</span> + <span class="id">_</span>]<span class="id">addeC</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">null_set_setU</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">measurable</span> <span class="id">A</span> -&gt; <span class="id">measurable</span> <span class="id">B</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> <span class="id">A</span> = 0 -&gt; <span class="id">mu</span> <span class="id">B</span> = 0 -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurableU">mu</a></span> (<span class="id">A</span> `|` <span class="id">B</span>) = 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof207')">Proof.</span></div>
<div class="proofscript" id="proof207">
<span class="id">move</span>=&gt; <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leye_eq">mA</a></span> <span class="id">mB</span> <span class="id">A0</span> <span class="id">B0</span>; <span class="id">rewrite</span> <span class="id">measureUfinl</span>/= ?<span class="id">A0</span>//= ?<span class="id">B0</span> ?<span class="id">add0e</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">oppe_eq0</span> -<span class="id">measure_le0</span>/= -<span class="id">A0</span> <span class="id">measureIl</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measureU0</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">measurable</span> <span class="id">A</span> -&gt; <span class="id">measurable</span> <span class="id">B</span> -&gt; <span class="id">mu</span> <span class="id">B</span> = 0 -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> (<span class="id">A</span> `|` <span class="id">B</span>) = <span class="id">mu</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof208')">Proof.</span></div>
<div class="proofscript" id="proof208">
<span class="id">move</span>=&gt; <span class="id">mA</span> <span class="id">mB</span> <span class="id">B0</span>; <span class="id">rewrite</span> <span class="id">measureUfinr</span>/= ?<span class="id">B0</span>// <span class="id">adde0</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> (@<span class="id">subset_measure0</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">A</span> `&amp;` <span class="id">B</span>) <span class="id">B</span>) ?<span class="id">sube0</span>//; <span class="id">exact</span>: <span class="id">measurableI</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">measureU</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">eq_measureU</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">ringOfSetsType</span> <span class="id">d</span>) (<span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset">R</a></span> : <span class="id">realFieldType</span>) (<span class="id">A</span> <span class="id">B</span> : <span class="id"><a href="mathcomp.analysis.sequences.html#trivIset_seqD">set</a></span> <span class="id">T</span>)<br/>
&nbsp;&nbsp;&nbsp;(<span class="id">mu</span> <span class="id">mu</span>' : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">measurable</span> <span class="id">A</span> -&gt; <span class="id">measurable</span> <span class="id">B</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> <span class="id">A</span> = <span class="id">mu</span>' <span class="id">A</span> -&gt; <span class="id">mu</span> <span class="id">B</span> = <span class="id">mu</span>' <span class="id">B</span> -&gt; <span class="id">mu</span> (<span class="id">A</span> `&amp;` <span class="id">B</span>) = <span class="id"><a href="mathcomp.analysis.sequences.html#seqD">mu</a></span>' (<span class="id">A</span> `&amp;` <span class="id">B</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> (<span class="id">A</span> `|` <span class="id">B</span>) = <span class="id">mu</span>' (<span class="id">A</span> `|` <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof209')">Proof.</span></div>
<div class="proofscript" id="proof209">
<span class="id">move</span>=&gt; <span class="id">mA</span> <span class="id">mB</span> <span class="id">muA</span> <span class="id">muB</span> <span class="id">muAB</span>; <span class="id">have</span> [<span class="id">mu</span>'<span class="id">ANoo</span>|] := <span class="id">ltP</span> (<span class="id">mu</span>' <span class="id">A</span>) +<span class="id">oo</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id">measureUfinl</span>/= ?<span class="id">muA</span> ?<span class="id">muB</span> ?<span class="id">muAB</span>.<br/>
<span class="id">rewrite</span> <span class="id">leye_eq</span> =&gt; /<span class="id">eqP</span> <span class="id">mu</span>'<span class="id">A</span>; <span class="id">transitivity</span> (+<span class="id">oo</span> : \<span class="id">bar</span> <span class="id">R</span>); <span class="id">apply</span>/<span class="id">eqP</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">leye_eq</span> -<span class="id">mu</span>'<span class="id">A</span> -<span class="id">muA</span> <span class="id">le_measure</span> ?<span class="id">inE</span>//=; <span class="id">apply</span>: <span class="id">measurableU</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eq_sym</span> -<span class="id">leye_eq</span> -<span class="id">mu</span>'<span class="id">A</span> <span class="id">le_measure</span> ?<span class="id">inE</span>//=; <span class="id">apply</span>: <span class="id">measurableU</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">measure_continuity</span>.<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">nondecreasing_cvg_mu</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">ringOfSetsType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realFieldType</span>)<br/>
&nbsp;&nbsp;(<span class="id">mu</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) (<span class="id">F</span> : (<span class="id">set</span> <span class="id">T</span>) ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">measurable</span> (<span class="id"><a href="mathcomp.analysis.measure.html#algebraOfSetsType">F</a></span> <span class="id">i</span>)) -&gt; <span class="id">measurable</span> (\<span class="id">bigcup_n</span> <span class="id">F</span> <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span> <span class="id">F</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> \<span class="id">o</span> <span class="id">F</span> --&gt; <span class="id">mu</span> (\<span class="id">bigcup_n</span> <span class="id">F</span> <span class="id">n</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof210')">Proof.</span></div>
<div class="proofscript" id="proof210">
<span class="id">move</span>=&gt; <span class="id">mF</span> <span class="id">mbigcupF</span> <span class="id">ndF</span>.<br/>
<span class="id">have</span> <span class="id">Binter</span> : <span class="id">trivIset</span> <span class="id">setT</span> (<span class="id">seqD</span> <span class="id">F</span>) := <span class="id">trivIset_seqD</span> <span class="id">ndF</span>.<br/>
<span class="id">have</span> <span class="id">FBE</span> : <span class="kwd">forall</span> <span class="id">n</span>, <span class="id">F</span> <span class="id">n</span>.+1 = <span class="id">F</span> <span class="id">n</span> `|` <span class="id">seqD</span> <span class="id">F</span> <span class="id">n</span>.+1 := <span class="id">setU_seqD</span> <span class="id">ndF</span>.<br/>
<span class="id">have</span> <span class="id">FE</span> <span class="id">n</span> : <span class="id">F</span> <span class="id">n</span> = \<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#O">i</a></span> &lt; <span class="id">n</span>.+1) (<span class="id">seqD</span> <span class="id">F</span>) <span class="id">i</span> := <span class="id">eq_bigsetU_seqD</span> <span class="id">n</span> <span class="id">ndF</span>.<br/>
<span class="id">rewrite</span> <span class="id">eq_bigcup_seqD</span>.<br/>
<span class="id">have</span> <span class="id">mB</span> <span class="id">i</span> : <span class="id">measurable</span> (<span class="id">seqD</span> <span class="id">F</span> <span class="id">i</span>) <span class="kwd">by</span> <span class="id">elim</span>: <span class="id">i</span> =&gt; * //=; <span class="id">apply</span>: <span class="id">measurableD</span>.<br/>
<span class="id">apply</span>: <span class="id">cvg_trans</span> (<span class="id">measure_semi_sigma_additive</span> <span class="id">_</span> <span class="id">mB</span> <span class="id">Binter</span> <span class="id">_</span>); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">eq_bigcup_seqD</span>.<br/>
<span class="id">apply</span>: (@<span class="id">cvg_trans</span> <span class="id">_</span> [<span class="id">filter</span> <span class="id">of</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(<span class="id">i</span> &lt; <span class="id">n</span>.+1) <span class="id">mu</span> (<span class="id">seqD</span> <span class="id">F</span> <span class="id"><a href="mathcomp.analysis.normedtype.html#cvgeB">i</a></span>))]).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span> --&gt; <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> = <span class="id">mu</span> \<span class="id">o</span> <span class="id">F</span>) // <span class="id">funeqE</span> =&gt; <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">measure_semi_additive</span> // -?<span class="id">FE</span>// =&gt; -[|<span class="id">k</span>].<br/>
<span class="id">move</span>=&gt; <span class="id">S</span> [<span class="id">n</span> <span class="id">_</span>] <span class="id">nS</span>; <span class="kwd">exists</span> <span class="id">n</span> =&gt; // <span class="id">m</span> <span class="id">nm</span>.<br/>
<span class="id">under</span> <span class="id">eq_fun</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDE">do</a></span> <span class="id">rewrite</span> -(<span class="id">big_mkord</span> <span class="id">predT</span> (<span class="id">mu</span> \<span class="id">o</span> <span class="id">seqD</span> <span class="id">F</span>)).<br/>
<span class="id">exact</span>/(<span class="id">nS</span> <span class="id">m</span>.+1)/(<span class="id">leq_trans</span> <span class="id">nm</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">nonincreasing_cvg_mu</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">algebraOfSetsType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realFieldType</span>)<br/>
&nbsp;&nbsp;(<span class="id">mu</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) (<span class="id">F</span> : (<span class="id">set</span> <span class="id">T</span>) ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">mu</span> (<span class="id">F</span> 0%<span class="id">N</span>) &lt; +<span class="id">oo</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">measurable</span> (<span class="id">F</span> <span class="id">i</span>)) -&gt; <span class="id">measurable</span> (\<span class="id">bigcap_n</span> <span class="id">F</span> <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">nonincreasing_seq</span> <span class="id">F</span> -&gt; <span class="id">mu</span> \<span class="id">o</span> <span class="id">F</span> --&gt; <span class="id">mu</span> (\<span class="id">bigcap_n</span> <span class="id">F</span> <span class="id">n</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof211')">Proof.</span></div>
<div class="proofscript" id="proof211">
<span class="id">move</span>=&gt; <span class="id">F0pos</span> <span class="id">mF</span> <span class="id">mbigcapF</span> <span class="id">niF</span>; <span class="id">pose</span> <span class="id">G</span> <span class="id">n</span> := <span class="id">F</span> <span class="id">O</span> `\` <span class="id">F</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDS">n</a></span>.<br/>
<span class="id">have</span> ? : <span class="id">mu</span> (<span class="id">F</span> 0%<span class="id">N</span>) \<span class="id">is</span> <span class="id">a</span> <span class="id">fin_num</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ge0_fin_numE</span>.<br/>
<span class="id">have</span> <span class="id">F0E</span> <span class="id">r</span> : <span class="id">mu</span> (<span class="id">F</span> 0%<span class="id">N</span>) - (<span class="id">mu</span> (<span class="id">F</span> 0%<span class="id">N</span>) - <span class="id">r</span>) = <span class="id">r</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">oppeB</span> ?<span class="id">addeA</span> ?<span class="id">subee</span> ?<span class="id">add0e</span>// <span class="id">fin_num_adde_defr</span>.<br/>
<span class="id">rewrite</span> -[<span class="id">x</span> <span class="kwd">in</span> <span class="id">_</span> --&gt; <span class="id">x</span>] <span class="id">F0E</span>.<br/>
<span class="id">have</span> -&gt; : <span class="id">mu</span> \<span class="id">o</span> <span class="id">F</span> = <span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">mu</span> (<span class="id">F</span> 0%<span class="id">N</span>) - (<span class="id">mu</span> (<span class="id">F</span> 0%<span class="id">N</span>) - <span class="id">mu</span> (<span class="id">F</span> <span class="id">n</span>)).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>:<span class="id"><a href="mathcomp.analysis.measure.html#boole_inequality.mu">funext</a></span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> <span class="id">F0E</span>.<br/>
<span class="id">apply</span>: <span class="id">cvgeB</span>; <span class="id">rewrite</span> ?<span class="id"><a href="mathcomp.analysis.measure.html#boole_inequality.mu">fin_num_adde_defr</a></span>//; <span class="id">first</span> <span class="id">exact</span>: <span class="id">cvg_cst</span>.<br/>
<span class="id">have</span> -&gt; : \<span class="id">bigcap_n</span> <span class="id">F</span> <span class="id">n</span> = <span class="id">F</span> 0%<span class="id">N</span> `&amp;` \<span class="id">bigcap_n</span> <span class="id">F</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setIidr</span>//; <span class="id">exact</span>: <span class="id">bigcap_inf</span>.<br/>
<span class="id">rewrite</span> -<span class="id">measureD</span> // <span class="id"><a href="mathcomp.analysis.measure.html#Boole_inequality">setDE</a></span> <span class="id">setC_bigcap</span> <span class="id">setI_bigcupr</span> -[<span class="id">x</span> <span class="kwd">in</span> <span class="id">bigcup</span> <span class="id">_</span> <span class="id">x</span>]/<span class="id">G</span>.<br/>
<span class="id">have</span> -&gt; : (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">mu</span> (<span class="id">F</span> 0%<span class="id">N</span>) - <span class="id">mu</span> (<span class="id">F</span> <span class="id">n</span>)) = <span class="id">mu</span> \<span class="id">o</span> <span class="id">G</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">funext</span> =&gt; <span class="id">n</span> /=; <span class="id">rewrite</span> <span class="id">measureD</span>// <span class="id">setIidr</span>//; <span class="id">exact</span>/<span class="id">subsetPset</span>/<span class="id">niF</span>.<br/>
<span class="id">apply</span>: <span class="id">nondecreasing_cvg_mu</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; ?; <span class="id">apply</span>: <span class="id">measurableD</span>; <span class="id">exact</span>: <span class="id">mF</span>.<br/>
- <span class="id">rewrite</span> -<span class="id">setI_bigcupr</span>; <span class="id">apply</span>: <span class="id">measurableI</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">mF</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -@<span class="id">setC_bigcap</span>; <span class="id"><a href="mathcomp.classical.classical_sets.html#setU">exact</a></span>: <span class="id">measurableC</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span> <span class="id">m</span> <span class="id">NM</span>; <span class="id">apply</span>/<span class="id">subsetPset</span>; <span class="id">apply</span>: <span class="id">setDS</span>; <span class="id">apply</span>/<span class="id">subsetPset</span>/<span class="id">niF</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">measure_continuity</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">boole_inequality</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">T</span> : <span class="id">ringOfSetsType</span> <span class="id">d</span>).<br/>
<span class="kwd">Variable</span> <span class="id">mu</span> : {<span class="id">content</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id">Boole_inequality</span> (<span class="id">A</span> : (<span class="id">set</span> <span class="id">T</span>) ^<span class="id">nat</span>) <span class="id">n</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, `<span class="id">I_n</span> <span class="id">i</span> -&gt; <span class="id">measurable</span> (<span class="id">A</span> <span class="id">i</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> (\<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">A</span> <span class="id">i</span>) &lt;= \<span class="id">sum_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">mu</span> (<span class="id">A</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof212')">Proof.</span></div>
<div class="proofscript" id="proof212">
<span class="id">move</span>=&gt; <span class="id">Am</span>; <span class="id"><a href="mathcomp.analysis.measure.html#sigma_finite_lemma.mu">rewrite</a></span> <span class="id">content_sub_additive</span>// -<span class="id">bigcup_mkord</span>.<br/>
<span class="id">exact</span>: <span class="id">fin_bigcup_measurable</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">boole_inequality</span>.<br/>
<span class="kwd">Notation</span> <span class="id">le_mu_bigsetU</span> := <span class="id">Boole_inequality</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">sigma_finite_lemma</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">ringOfSetsType</span> <span class="id"><a href="mathcomp.analysis.measure.html#ringOfSetsType">d</a></span>) (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu</span> : {<span class="id">content</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="generalized_Boole_inequality">sigma_finiteP</a></span> : <span class="id">sigma_finite</span> <span class="id">A</span> <span class="id">mu</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">exists2</span> <span class="id">F</span>, <span class="id">A</span> = \<span class="id">bigcup_i</span> <span class="id">F</span> <span class="id">i</span> &amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nondecreasing_seq</span> <span class="id">F</span> /\ <span class="kwd">forall</span> <span class="id">i</span>, <span class="id">measurable</span> (<span class="id">F</span> <span class="id">i</span>) /\ <span class="id">mu</span> (<span class="id">F</span> <span class="id">i</span>) &lt; +<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof213')">Proof.</span></div>
<div class="proofscript" id="proof213">
<span class="id">move</span>=&gt; [<span class="id">S</span> <span class="id">AS</span> <span class="id">moo</span>]; <span class="kwd">exists</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span>.+1) <span class="id">S</span> <span class="id">i</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">AS</span> <span class="id"><a href="mathcomp.analysis.measure.html#generalized_boole_inequality">predeqE</a></span> =&gt; <span class="id">t</span>; <span class="id">split</span> =&gt; [[<span class="id">i</span> <span class="id">_</span> <span class="id">Sit</span>]|[<span class="id">i</span> <span class="id">_</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">i</span> =&gt; //; <span class="id">rewrite</span> <span class="id">big_ord_recr</span> /=; <span class="id">right</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">bigcup_mkord</span> =&gt; -[<span class="id">j</span> /= <span class="id">ji</span> <span class="id">Sjt</span>]; <span class="kwd">exists</span> <span class="id">j</span>.<br/>
<span class="id">split</span>=&gt; [|<span class="id">i</span>].<br/>
- <span class="id">apply</span>/<span class="id">nondecreasing_seqP</span> =&gt; <span class="id"><a href="mathcomp.analysis.measure.html#negligible.T">i</a></span>; <span class="id">rewrite</span> [<span class="kwd">in</span> <span class="id">leRHS</span>]<span class="id">big_ord_recr</span> /=.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">subsetPset</span>; <span class="id">left</span>.<br/>
- <span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigsetU_measurable</span> =&gt; <span class="id">j</span> <span class="id">_</span>; <span class="id">exact</span>: (<span class="id">moo</span> <span class="id">j</span>).1.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (@<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">_</span> (\<span class="id">sum_</span>(<span class="id">j</span> &lt; <span class="id">i</span>.+1) <span class="id">mu</span> (<span class="id">S</span> <span class="id">j</span>)))//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">Boole_inequality</span> =&gt; <span class="id">j</span> <span class="id">_</span>; <span class="id">exact</span>: (<span class="id">moo</span> <span class="id">j</span>).1.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">lte_sum_pinfty</span> =&gt; <span class="id">j</span> <span class="id">_</span>; <span class="id">exact</span>: (<span class="id">moo</span> <span class="id">j</span>).2.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">sigma_finite_lemma</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">generalized_boole_inequality</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id"><a href="mathcomp.analysis.measure.html#negligible.mu">T</a></span> : <span class="id">ringOfSetsType</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#in_setE">d</a></span>) (<span class="id">R</span> : <span class="id">realType</span>).<br/>
<span class="kwd">Variable</span> <span class="id">mu</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id">generalized_Boole_inequality</span> (<span class="id">A</span> : (<span class="id">set</span> <span class="id">T</span>) ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">measurable</span> (<span class="id">A</span> <span class="id">i</span>)) -&gt; <span class="id">measurable</span> (\<span class="id">bigcup_n</span> <span class="id">A</span> <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> (\<span class="id">bigcup_n</span> <span class="id">A</span> <span class="id">n</span>) &lt;= \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span>) <span class="id">mu</span> (<span class="id">A</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof214')">Proof.</span></div>
<div class="proofscript" id="proof214">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Am</span> <span class="id">UAm</span>; <span class="id">rewrite</span> <span class="id">measure_sigma_sub_additive</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">generalized_boole_inequality</span>.<br/>
<span class="kwd">Notation</span> <span class="id">le_mu_bigcup</span> := <span class="id">generalized_Boole_inequality</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">negligible</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realFieldType</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">negligible</span> (<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) <span class="id">N</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">A</span>, [/\ <span class="id">measurable</span> <span class="id">A</span>, <span class="id">mu</span> <span class="id">A</span> = 0 &amp; <span class="id">N</span> `&lt;=` <span class="id"><a href="mathcomp.analysis.measure.html#measurableI">A</a></span>].<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> "<span class="id">mu</span> .-<span class="id">negligible</span>" := (<span class="id">negligible</span> <span class="id">mu</span>).<br/>
<br/>
<span class="kwd">Variable</span> <span class="id">mu</span> : {<span class="id">content</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">negligibleP</span> <span class="id">A</span> : <span class="id">measurable</span> <span class="id">A</span> -&gt; <span class="id">mu</span>.-<span class="id">negligible</span> <span class="id">A</span> &lt;-&gt; <span class="id">mu</span> <span class="id">A</span> = 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof215')">Proof.</span></div>
<div class="proofscript" id="proof215">
<span class="id">move</span>=&gt; <span class="id">mA</span>; <span class="id">split</span> =&gt; [[<span class="id">B</span> [<span class="id">mB</span> <span class="id">mB0</span> <span class="id">AB</span>]]|<span class="id">mA0</span>]; <span class="id">last</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">A</span>; <span class="id">split</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> -<span class="id">measure_le0</span> -<span class="id">mB0</span> <span class="id">le_measure</span> ?<span class="id">inE</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">negligible_set0</span> : <span class="id">mu</span>.-<span class="id"><a href="mathcomp.analysis.measure.html#measurable">negligible</a></span> <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof216')">Proof.</span></div>
<div class="proofscript" id="proof216">
 <span class="id">exact</span>/<span class="id">negligibleP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measure_negligible</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id">measurable</span> <span class="id">A</span> -&gt; <span class="id">mu</span>.-<span class="id">negligible</span> <span class="id">A</span> -&gt; <span class="id">mu</span> <span class="id"><a href="mathcomp.analysis.measure.html#negligible_ringOfSetsType.T">A</a></span> = 0%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof217')">Proof.</span></div>
<div class="proofscript" id="proof217">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">mA</span> /<span class="id">negligibleP</span> -&gt;. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">negligibleS</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">B</span> `&lt;=` <span class="id">A</span> -&gt; <span class="id">mu</span>.-<span class="id">negligible</span> <span class="id">A</span> -&gt; <span class="id">mu</span>.-<span class="id">negligible</span> <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof218')">Proof.</span></div>
<div class="proofscript" id="proof218">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">BA</span> [<span class="id">N</span> [<span class="id">mN</span> <span class="id">N0</span> <span class="id">AN</span>]]; <span class="kwd">exists</span> <span class="id">N</span>; <span class="id">split</span> =&gt; //; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableU">subset_trans</a></span> <span class="id">AN</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">negligibleI</span> <span class="id">A</span> <span class="id">B</span> :<br/>
&nbsp;&nbsp;<span class="id">mu</span>.-<span class="id">negligible</span> <span class="id">A</span> -&gt; <span class="id">mu</span>.-<span class="id">negligible</span> <span class="id">B</span> -&gt; <span class="id">mu</span>.-<span class="id">negligible</span> (<span class="id">A</span> `&amp;` <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof219')">Proof.</span></div>
<div class="proofscript" id="proof219">
<span class="id">move</span>=&gt; [<span class="id">N</span> [<span class="id">mN</span> <span class="id">N0</span> <span class="id"><a href="mathcomp.analysis.measure.html#content_sub_additive">AN</a></span>]] [<span class="id">M</span> [<span class="id">mM</span> <span class="id">M0</span> <span class="id">BM</span>]]; <span class="kwd">exists</span> (<span class="id">N</span> `&amp;` <span class="id">M</span>); <span class="id">split</span> =&gt; //.<br/>
- <span class="id">exact</span>: <span class="id">measurableI</span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> -<span class="id">measure_le0</span> -<span class="id">N0</span> <span class="id">le_measure</span> ?<span class="id">inE</span>//; <span class="id">exact</span>: <span class="id">measurableI</span>.<br/>
- <span class="id">exact</span>: <span class="id">setISS</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">negligible</a></span>.<br/>
<span class="kwd">Notation</span> "<span class="id">mu</span> .-<span class="id">negligible</span>" := (<span class="id">negligible</span> <span class="id">mu</span>) : <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#add0e">type_scope</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">measure_is_complete</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realFieldType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) :=<br/>
&nbsp;&nbsp;<span class="id">mu</span>.-<span class="id">negligible</span> `&lt;=` <span class="id">measurable</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">negligible_ringOfSetsType</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">ringOfSetsType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realFieldType</span>).<br/>
<span class="kwd">Variable</span> <span class="id">mu</span> : {<span class="id">content</span> <span class="id"><a href="mathcomp.analysis.measure.html#negligibleU">set</a></span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">negligibleU</span> <span class="id">A</span> <span class="id">B</span> :<br/>
&nbsp;&nbsp;<span class="id">mu</span>.-<span class="id">negligible</span> <span class="id">A</span> -&gt; <span class="id">mu</span>.-<span class="id">negligible</span> <span class="id">B</span> -&gt; <span class="id">mu</span>.-<span class="id">negligible</span> (<span class="id">A</span> `|` <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof220')">Proof.</span></div>
<div class="proofscript" id="proof220">
<span class="id">move</span>=&gt; [<span class="id">N</span> [<span class="id">mN</span> <span class="id">N0</span> <span class="id">AN</span>]] [<span class="id">M</span> [<span class="id">mM</span> <span class="id">M0</span> <span class="id">BM</span>]]; <span class="kwd">exists</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">N</a></span> `|` <span class="id">M</span>); <span class="id">split</span> =&gt; //.<br/>
- <span class="id">exact</span>: <span class="id">measurableU</span>.<br/>
- <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> -<span class="id">measure_le0</span> -<span class="id">N0</span> -[<span class="id">leRHS</span>]<span class="id">adde0</span> -<span class="id">M0</span> -<span class="id">bigsetU_bigcup2</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">le_trans</span>.<br/>
&nbsp;&nbsp;+ <span class="id">apply</span>: (@<span class="id">content_sub_additive</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">bigcup2</span> <span class="id">N</span> <span class="id">M</span>) 2%<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#svalP">N</a></span>) =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="kwd">by</span> <span class="id">move</span>=&gt; [|[|[|]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">apply</span>: <span class="id">bigsetU_measurable</span> =&gt; // <span class="id">i</span> <span class="id">_</span>; <span class="id">rewrite</span> /<span class="id">bigcup2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>: <span class="id">ifPn</span> =&gt; // <span class="id">i0</span>; <span class="id">case</span>: <span class="id">ifPn</span>.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big_ord_recr</span>/= <span class="id">big_ord_recr</span>/= <span class="id">big_ord0</span> <span class="id">add0e</span>.<br/>
- <span class="id">exact</span>: <span class="id">setUSS</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">negligible_bigsetU</span> (<span class="id">F</span> : (<span class="id">set</span> <span class="id">T</span>)^<span class="id">nat</span>) <span class="id"><a href="mathcomp.classical.boolp.html#cid">s</a></span> (<span class="id">P</span> : <span class="id">pred</span> <span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, <span class="id">P</span> <span class="id">k</span> -&gt; <span class="id">mu</span>.-<span class="id">negligible</span> (<span class="id">F</span> <span class="id">k</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span>.-<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppe0">negligible</a></span> (\<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">k</span> &lt;- <span class="id">s</span> | <span class="id">P</span> <span class="id">k</span>) <span class="id">F</span> <span class="id">k</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof221')">Proof.</span></div>
<div class="proofscript" id="proof221">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">PF</span>; <span class="id">elim</span>/<span class="id">big_ind</span> : <span class="id">_</span> =&gt; //;<br/>
&nbsp;&nbsp;[<span class="id">exact</span>: <span class="id">negligible_set0</span>|<span class="id">exact</span>: <span class="id">negligibleU</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">negligible_ringOfSetsType</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">negligible_bigcup</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realFieldType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) (<span class="id">F</span> : (<span class="id">set</span> <span class="id">T</span>)^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, <span class="id">mu</span>.-<span class="id">negligible</span> (<span class="id">F</span> <span class="id">k</span>)) -&gt; <span class="id">mu</span>.-<span class="id">negligible</span> (\<span class="id">bigcup_k</span> <span class="id">F</span> <span class="id">k</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof222')">Proof.</span></div>
<div class="proofscript" id="proof222">
<span class="id"><a name="almost_everywhere">move</a></span>=&gt; <span class="id">mF</span>; <span class="kwd">exists</span> (\<span class="id">bigcup_k</span> <span class="id">sval</span> (<span class="id">cid</span> (<span class="id">mF</span> <span class="id">k</span>))); <span class="id">split</span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigcupT_measurable</span> =&gt; // <span class="id">k</span>; <span class="id">have</span> [] := <span class="id">svalP</span> (<span class="id">cid</span> (<span class="id">mF</span> <span class="id">k</span>)).<br/>
- <span class="id">rewrite</span> <span class="id">seqDU_bigcup_eq</span> <span class="id">measure_bigcup</span>//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">k</span> <span class="id">_</span>; <span class="id">apply</span>: <span class="id">measurableD</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">case</span>: <span class="id">cid</span> =&gt; //= <span class="id">A</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.measure.html#almost_everywhere">apply</a></span>: <span class="id">bigsetU_measurable</span> =&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">case</span>: <span class="id">cid</span> =&gt; //= <span class="id">A</span> [].<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">eseries0</span>// =&gt; <span class="id">k</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">mFk</span> <span class="id">mFk0</span> ?] := <span class="id">svalP</span> (<span class="id">cid</span> (<span class="id">mF</span> <span class="id">k</span>)).<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#semiRingOfSetsType">rewrite</a></span> <span class="id">measureD</span>//=.<br/>
&nbsp;&nbsp;+ <span class="id">rewrite</span> <span class="id">mFk0</span> <span class="id">sub0e</span> <span class="id">eqe_oppLRP</span> <span class="id">oppe0</span>; <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> -<span class="id">measure_le0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#almost_everywhere">rewrite</a></span> -[<span class="id">leRHS</span>]<span class="id">mFk0</span> <span class="id">le_measure</span>//= ?<span class="id">inE</span>//; <span class="id">apply</span>: <span class="id">measurableI</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigsetU_measurable</span> =&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">case</span>: <span class="id">cid</span> =&gt; // <span class="id">A</span> [].<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigsetU_measurable</span> =&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">case</span>: <span class="id">cid</span> =&gt; // <span class="id">A</span> [].<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">mFk0</span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">subset_bigcup</span> =&gt; <span class="id">k</span> <span class="id">_</span>; <span class="id">rewrite</span> /<span class="id">sval</span>/=; <span class="kwd">by</span> <span class="id">case</span>: <span class="id">cid</span> =&gt; //= <span class="id">A</span> [].<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">ae</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">almost_everywhere</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setCI">d</a></span>) (<span class="id">R</span> : <span class="id">realFieldType</span>)<br/>
&nbsp;&nbsp;(<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) (<span class="id">P</span> : <span class="id">T</span> -&gt; <span class="kwd">Prop</span>) := <span class="id">mu</span>.-<span class="id">negligible</span> (~` [<span class="id">set</span> <span class="id">x</span> | <span class="id">P</span> <span class="id">x</span>]).<br/>
<br/>
<span class="kwd">Let</span> <span class="id">almost_everywhereT</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realFieldType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu</span> : {<span class="id">content</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) : <span class="id">almost_everywhere</span> <span class="id">mu</span> <span class="id">setT</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof223')">Proof.</span></div>
<div class="proofscript" id="proof223">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">almost_everywhere</span> <span class="id">setCT</span>; <span class="id">exact</span>: <span class="id">negligible_set0</span>. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">almost_everywhereS</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realFieldType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) <span class="id">A</span> <span class="id">B</span> : <span class="id">A</span> `&lt;=` <span class="id">B</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">almost_everywhere</span> <span class="id">mu</span> <span class="id">A</span> -&gt; <span class="id">almost_everywhere</span> <span class="id">mu</span> <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof224')">Proof.</span></div>
<div class="proofscript" id="proof224">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">AB</span>; <span class="id">apply</span>: <span class="id">negligibleS</span>; <span class="id">exact</span>: <span class="id">subsetC</span>. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">almost_everywhereI</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">ringOfSetsType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realFieldType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) <span class="id">A</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negb_and">B</a></span> :<br/>
&nbsp;&nbsp;<span class="id">almost_everywhere</span> <span class="id">mu</span> <span class="id">A</span> -&gt; <span class="id">almost_everywhere</span> <span class="id">mu</span> <span class="id">B</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">almost_everywhere</span> <span class="id">mu</span> (<span class="id"><a href="mathcomp.analysis.measure.html#almost_everywhere">A</a></span> `&amp;` <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof225')">Proof.</span></div>
<div class="proofscript" id="proof225">
<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">almost_everywhere</span> =&gt; <span class="id">mA</span> <span class="id">mB</span>; <span class="id">rewrite</span> <span class="id">setCI</span>; <span class="id">exact</span>: <span class="id">negligibleU</span>.<br/>
Qed.</div>
<br/>
#[<span class="id">global</span>]<br/>
<span class="kwd">Instance</span> <span class="id">ae_filter_ringOfSetsType</span> <span class="id">d</span> {<span class="id">T</span> : <span class="id">ringOfSetsType</span> <span class="id">d</span>} (<span class="id">R</span> : <span class="id">realFieldType</span>)<br/>
&nbsp;&nbsp;(<span class="id">mu</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) : <span class="id">Filter</span> (<span class="id">almost_everywhere</span> <span class="id">mu</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof226')">Proof.</span></div>
<div class="proofscript" id="proof226">
<span class="kwd">by</span> <span class="id">split</span>; [<span class="id">exact</span>: <span class="id">almost_everywhereT</span>|<span class="id">exact</span>: <span class="id">almost_everywhereI</span>|<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">almost_everywhereS</span>].<br/>
Qed.</div>
<br/>
#[<span class="id">global</span>]<br/>
<span class="kwd">Instance</span> <span class="id">ae_properfilter_algebraOfSetsType</span> <span class="id">d</span> {<span class="id">T</span> : <span class="id">algebraOfSetsType</span> <span class="id">d</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">mu</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) :<br/>
&nbsp;&nbsp;<span class="id">mu</span> [<span class="id">set</span>: <span class="id">T</span>] &gt; 0 -&gt; <span class="id">ProperFilter</span> (<span class="id">almost_everywhere</span> <span class="id">mu</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof227')">Proof.</span></div>
<div class="proofscript" id="proof227">
<span class="id">move</span>=&gt; <span class="id">muT</span>; <span class="id">split</span>=&gt; [|]; <span class="id">last</span> <span class="id">exact</span>: <span class="id">ae_filter_ringOfSetsType</span>.<br/>
<span class="id">rewrite</span> /<span class="id">almost_everywhere</span> <span class="id">setC0</span> =&gt; /(<span class="id">measure_negligible</span> <span class="id">measurableT</span>).<br/>
<span class="kwd">by</span> <span class="id">move</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> -<span class="id">measure_le0</span> <span class="id">leNgt</span> =&gt; /<span class="id">negP</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">ae</span>.<br/>
<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">Filter</span> (<span class="id">almost_everywhere</span> <span class="id">_</span>)) =&gt;<br/>
&nbsp;&nbsp;(<span class="id">apply</span>: <span class="id">ae_filter_ringOfSetsType</span>) : <span class="id">typeclass_instances</span>.<br/>
<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">ProperFilter</span> (<span class="id">almost_everywhere</span> <span class="id">_</span>)) =&gt;<br/>
&nbsp;&nbsp;(<span class="id">apply</span>: <span class="id">ae_properfilter_algebraOfSetsType</span>) : <span class="id">typeclass_instances</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">almost_everywhere_notation</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) (<span class="id">P</span> : <span class="id">T</span> -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&amp; (<span class="id">phantom</span> <span class="kwd">Prop</span> (<span class="kwd">forall</span> <span class="id">x</span>, <span class="id">P</span> <span class="id">x</span>)) := <span class="id">almost_everywhere</span> <span class="id">mu</span> <span class="id">P</span>.<br/>
<span class="kwd">Notation</span> "{ '<span class="id">ae</span>' <span class="id">m</span> , <span class="id">P</span> }" :=<br/>
&nbsp;&nbsp;(<span class="id">almost_everywhere_notation</span> <span class="id">m</span> (<span class="id">inPhantom</span> <span class="id">P</span>)) : <span class="id">type_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">aeW</span> {<span class="id">d</span>} {<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>} {<span class="id">R</span> : <span class="id">realFieldType</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">_</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) (<span class="id">P</span> : <span class="id">T</span> -&gt; <span class="kwd">Prop</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id">P</span> <span class="id">x</span>) -&gt; {<span class="id">ae</span> <span class="id">mu</span>, <span class="kwd">forall</span> <span class="id">x</span>, <span class="id">P</span> <span class="id">x</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof228')">Proof.</span></div>
<div class="proofscript" id="proof228">
<span class="id">move</span>=&gt; <span class="id">aP</span>; <span class="id">have</span> -&gt; : <span class="id">P</span> = <span class="id">setT</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">negligibleP</span>; [<span class="id">rewrite</span> <span class="id">setCT</span>|<span class="id">rewrite</span> <span class="id">setCT</span> <span class="id">measure0</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">sigma_subadditive</span> {<span class="id">T</span>} {<span class="id">R</span> : <span class="id">numFieldType</span>}<br/>
&nbsp;&nbsp;(<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) := <span class="kwd">forall</span> (<span class="id">F</span> : (<span class="id">set</span> <span class="id">T</span>) ^<span class="id">nat</span>),<br/>
&nbsp;&nbsp;<span class="id">mu</span> (\<span class="id">bigcup_n</span> (<span class="id">F</span> <span class="id">n</span>)) &lt;= \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span>) <span class="id">mu</span> (<span class="id">F</span> <span class="id">i</span>).<br/>
<br/>
<span class="id">HB.mixin</span> <span class="kwd">Record</span> <span class="id">isOuterMeasure</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">R</span> : <span class="id">numFieldType</span>) (<span class="id">T</span> : <span class="kwd">Type</span>) (<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) := {<br/>
&nbsp;&nbsp;<span class="id">outer_measure0</span> : <span class="id">mu</span> <span class="id"><a href="mathcomp.analysis.measure.html#outer_measure_sigma_subadditive">set0</a></span> = 0 ;<br/>
&nbsp;&nbsp;<span class="id">outer_measure_ge0</span> : <span class="kwd">forall</span> <span class="id">x</span>, 0 &lt;= <span class="id">mu</span> <span class="id">x</span> ;<br/>
&nbsp;&nbsp;<span class="id">le_outer_measure</span> : {<span class="id">homo</span> <span class="id">mu</span> : <span class="id">A</span> <span class="id">B</span> / <span class="id">A</span> `&lt;=` <span class="id">B</span> &gt;-&gt; <span class="id">A</span> &lt;= <span class="id">B</span>} ;<br/>
&nbsp;&nbsp;<span class="id">outer_measure_sigma_subadditive</span> : <span class="id"><a href="mathcomp.analysis.measure.html#outer_measureU.T">sigma_subadditive</a></span> <span class="id">mu</span> }.<br/>
<br/>
#[<span class="id">short</span>(<span class="id">type</span>=<span class="id">outer_measure</span>)]<br/>
<span class="id">HB.structure</span> <span class="kwd">Definition</span> <span class="id">OuterMeasure</span> (<span class="id">R</span> : <span class="id">numFieldType</span>) (<span class="id"><a href="mathcomp.classical.classical_sets.html#setU">T</a></span> : <span class="kwd">Type</span>) :=<br/>
&nbsp;&nbsp;{<span class="id">mu</span> &amp; <span class="id">isOuterMeasure</span> <span class="id">R</span> <span class="id">T</span> <span class="id"><a href="mathcomp.analysis.measure.html#outer_measureU.mu">mu</a></span>}.<br/>
<br/>
<span class="kwd">Notation</span> "{ '<span class="id">outer_measure</span>' '<span class="id">set</span>' <span class="id">T</span> '-&gt;' '\<span class="id">bar</span>' <span class="id">R</span> }" := (<span class="id">outer_measure</span> <span class="id">R</span> <span class="id">T</span>)<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 36, <span class="id">T</span>, <span class="id">R</span> <span class="kwd">at</span> <span class="id">next</span> <span class="id">level</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "{ '<span class="id">outer_measure</span>'  '<span class="id">set</span>'  <span class="id">T</span>  '-&gt;'  '\<span class="id">bar</span>'  <span class="id">R</span> }") : <span class="id">ring_scope</span>.<br/>
<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id"><a href="mathcomp.analysis.measure.html#outer_measure_sigma_subadditive">Extern</a></span> 0 (<span class="id">_</span> <span class="id">set0</span> = 0) =&gt; <span class="id">solve</span> [<span class="id"><a href="mathcomp.analysis.measure.html#outer_measureU.mu">apply</a></span>: <span class="id">outer_measure0</span>] : <span class="id">core</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">sigma_subadditive</span> <span class="id">_</span>) =&gt;<br/>
&nbsp;&nbsp;<span class="id">solve</span> [<span class="id">apply</span>: <span class="id">outer_measure_sigma_subadditive</span>] : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Arguments</span> <span class="id">outer_measure0</span> {<span class="id">R</span> <span class="id">T</span>} <span class="id">_</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">outer_measure_ge0</span> {<span class="id">R</span> <span class="id">T</span>} <span class="id">_</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">le_outer_measure</span> {<span class="id">R</span> <span class="id">T</span>} <span class="id">_</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">outer_measure_sigma_subadditive</span> {<span class="id">R</span> <span class="id">T</span>} <span class="id">_</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">outer_measure_sigma_subadditive_tail</span> (<span class="id">T</span> : <span class="kwd">Type</span>) (<span class="id">R</span> : <span class="id">realType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu</span> : {<span class="id">outer_measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) <span class="id">N</span> (<span class="id">F</span> : (<span class="id">set</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_sum">T</a></span>) ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="id">mu</span> (\<span class="id">bigcup_</span>(<span class="id">n</span> <span class="kwd">in</span> ~` `<span class="id">I_N</span>) (<span class="id">F</span> <span class="id">n</span>)) &lt;= \<span class="id">sum_</span>(<span class="id">N</span> &lt;= <span class="id">i</span> &lt;<span class="id">oo</span>) <span class="id">mu</span> (<span class="id">F</span> <span class="id">i</span>))%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof229')">Proof.</span></div>
<div class="proofscript" id="proof229">
<span class="id">rewrite</span> <span class="id">bigcup_mkcond</span>.<br/>
<span class="id">have</span> := <span class="id">outer_measure_sigma_subadditive</span> <span class="id">mu</span><br/>
&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="kwd">if</span> <span class="id">n</span> \<span class="kwd">in</span> ~` `<span class="id">I_N</span> <span class="kwd">then</span> <span class="id">F</span> <span class="id">n</span> <span class="kwd">else</span> <span class="id">set0</span>).<br/>
<span class="id">move</span>/<span class="id">le_trans</span>; <span class="id">apply</span>.<br/>
<span class="id">rewrite</span> [<span class="kwd">in</span> <span class="id">leRHS</span>]<span class="id">eseries_cond</span> [<span class="kwd">in</span> <span class="id">leRHS</span>]<span class="id">eseries_mkcondr</span>; <span class="id">apply</span>: <span class="id">lee_nneseries</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">k</span> <span class="id">_</span>; <span class="id">exact</span>: <span class="id">outer_measure_ge0</span>.<br/>
- <span class="id">move</span>=&gt; <span class="id">k</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">fun_if</span>; <span class="id">case</span>: <span class="id">ifPn</span> =&gt; <span class="id">Nk</span>; <span class="id"><a href="mathcomp.classical.classical_sets.html#set">first</a></span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">mem_not_I</span> <span class="id">Nk</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">mem_not_I</span> (<span class="id">negbTE</span> <span class="id">Nk</span>) <span class="id">outer_measure0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">outer_measureU</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>).<br/>
<span class="kwd">Variable</span> <span class="id">mu</span> : {<span class="id">outer_measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">outer_measure_subadditive</span> (<span class="id">F</span> : <span class="id">nat</span> -&gt; <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#adde0">set</a></span> <span class="id">T</span>) <span class="id">n</span> :<br/>
&nbsp;&nbsp;<span class="id">mu</span> (\<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">i</span>) &lt;= \<span class="id">sum_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">mu</span> (<span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof230')">Proof.</span></div>
<div class="proofscript" id="proof230">
<span class="id">pose</span> <span class="id">F</span>' := <span class="kwd">fun</span> <span class="id">k</span> =&gt; <span class="kwd">if</span> (<span class="id">k</span> &lt; <span class="id">n</span>)%<span class="id">N</span> <span class="kwd">then</span> <span class="id">F</span> <span class="id">k</span> <span class="kwd">else</span> <span class="id">set0</span>.<br/>
<span class="id">rewrite</span> -(<span class="id">big_mkord</span> <span class="id">xpredT</span> <span class="id">F</span>) <span class="id">big_nat</span> (<span class="id">eq_bigr</span> <span class="id">F</span>')//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">k</span> /= <span class="id">kn</span>; <span class="id">rewrite</span> /<span class="id">F</span>' <span class="id">kn</span>.<br/>
<span class="id">rewrite</span> -<span class="id">big_nat</span> <span class="id">big_mkord</span>.<br/>
<span class="id">have</span> := <span class="id">outer_measure_sigma_subadditive</span> <span class="id">mu</span> <span class="id">F</span>'.<br/>
<span class="id">rewrite</span> (<span class="id">bigcup_splitn</span> <span class="id">n</span>) (<span class="id">_</span> : <span class="id">bigcup</span> <span class="id">_</span> <span class="id">_</span> = <span class="id">set0</span>) ?<span class="id">setU0</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIUr">bigcup0</a></span> // =&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#setIT">k</a></span> <span class="id">_</span>; <span class="id">rewrite</span> /<span class="id">F</span>' /= <span class="id">ltnNge</span> <span class="id">leq_addr</span>.<br/>
<span class="id">move</span>/<span class="id">le_trans</span>; <span class="id"><a name="caratheodory_measurable">apply</a></span>.<br/>
<span class="id">rewrite</span> (<span class="id">nneseries_split</span> <span class="id">n</span>); <span class="id">last</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; ?; <span class="id">exact</span>: <span class="id">outer_measure_ge0</span>.<br/>
<span class="id"><a href="mathcomp.classical.classical_sets.html#set">rewrite</a></span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span> + <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> = 0) ?<span class="id">adde0</span>//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">eseries_cond</span>/= <span class="id">eseries_mkcond</span> <span class="id">eseries0</span>//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">k</span> <span class="id">_</span>; <span class="id">case</span>: <span class="id">ifPn</span> =&gt; //; <span class="id">rewrite</span> /<span class="id">F</span>' <span class="id">leqNgt</span> =&gt; /<span class="id">negbTE</span> -&gt;.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">lee_sum</span> =&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">rewrite</span> /<span class="id">F</span>' <span class="id">ltn_ord</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">outer_measureU2</span> <span class="id">A</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">B</a></span> : <span class="id">mu</span> (<span class="id">A</span> `|` <span class="id">B</span>) &lt;= <span class="id">mu</span> <span class="id">A</span> + <span class="id">mu</span> <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof231')">Proof.</span></div>
<div class="proofscript" id="proof231">
<span class="id">have</span> := <span class="id">outer_measure_subadditive</span> (<span class="id">bigcup2</span> <span class="id">A</span> <span class="id">B</span>) 2.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id">big_ord_recl</span>/= !<span class="id">big_ord0</span> <span class="id">setU0</span> <span class="id">adde0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">outer_measureU</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">le_outer_measureIC</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) <span class="id">T</span><br/>
&nbsp;&nbsp;(<span class="id">mu</span> : {<span class="id">outer_measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) (<span class="id">A</span> <span class="id">X</span> : <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id">mu</span> <span class="id">X</span> &lt;= <span class="id">mu</span> (<span class="id">X</span> `&amp;` <span class="id">A</span>) + <span class="id">mu</span> (<span class="id">X</span> `&amp;` ~` <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof232')">Proof.</span></div>
<div class="proofscript" id="proof232">
<span class="id">pose</span> <span class="id">B</span> : (<span class="id">set</span> <span class="id">T</span>) ^<span class="id">nat</span> := <span class="id">bigcup2</span> (<span class="id">X</span> `&amp;` <span class="id"><a href="mathcomp.classical.classical_sets.html#set">A</a></span>) (<span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.T">X</a></span> `&amp;` ~` <span class="id">A</span>).<br/>
<span class="id">have</span> <span class="id">cvg_mu</span> : (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">mu</span> (<span class="id">B</span> <span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.mu">i</a></span>)) --&gt; <span class="id">mu</span> (<span class="id">B</span> 0%<span class="id">N</span>) + <span class="id">mu</span> (<span class="id">B</span> 1%<span class="id">N</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -2!<span class="id">cvg_shiftS</span> /=.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">X</span> --&gt; <span class="id">_</span>](<span class="id">_</span> : <span class="id">_</span> = (<span class="kwd">fun</span>=&gt; <span class="id">mu</span> (<span class="id">B</span> 0%<span class="id">N</span>) + <span class="id">mu</span> (<span class="id">B</span> 1%<span class="id">N</span>))); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">i</span>; <span class="id">rewrite</span> 2!<span class="id">big_ord_recl</span> /= <span class="id"><a name="caratheodory_measurable_set0">big1</a></span> ?<span class="id">adde0</span> // =&gt; <span class="id">j</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">B</span> /<span class="id">bigcup2</span> /=.<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">cvg_cst</span>.<br/>
<span class="id">have</span> := <span class="id">outer_measure_sigma_subadditive</span> <span class="id">mu</span> <span class="id">B</span>.<br/>
<span class="id">suff</span> : \<span class="id">bigcup_n</span> <span class="id">B</span> <span class="id">n</span> = <span class="id">X</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; -&gt; /<span class="id">le_trans</span>; <span class="id">apply</span>; <span class="id">under</span> <span class="id">eq_fun</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">big_mkord</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">cvg_lim</span> <span class="id">_</span> <span class="id">cvg_mu</span>).<br/>
<span class="id">transitivity</span> (\<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id"><a href="mathcomp.classical.classical_sets.html#set">i</a></span> &lt; 2) <span class="id">B</span> <span class="id">i</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">bigcup_splitn</span> 2) // -<span class="id">bigcup_mkord</span> <span class="id">setUidl</span>// =&gt; <span class="id">t</span> -[].<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> 2!<span class="id">big_ord_recl</span> <span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.mu">big_ord0</a></span> <span class="id">setU0</span> /= -<span class="id">setIUr</span> <span class="id">setUCr</span> <span class="id">setIT</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.mu">caratheodory_measurable</a></span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.mu">T</a></span> : <span class="kwd">Type</span>)<br/>
&nbsp;&nbsp;(<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) := <span class="kwd">forall</span> <span class="id">X</span>,<br/>
&nbsp;&nbsp;<span class="id">mu</span> <span class="id">X</span> = <span class="id">mu</span> (<span class="id">X</span> `&amp;` <span class="id">A</span>) + <span class="id">mu</span> (<span class="id">X</span> `&amp;` ~` <span class="id">A</span>).<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> "<span class="id">mu</span> .-<span class="id">caratheodory</span>" :=<br/>
&nbsp;&nbsp;&nbsp;(<span class="id">caratheodory_measurable</span> <span class="id">mu</span>) : <span class="id">classical_set_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">le_caratheodory_measurable</span> (<span class="id">R</span> : <span class="id">realType</span>) <span class="id">T</span><br/>
&nbsp;&nbsp;(<span class="id">mu</span> : {<span class="id">outer_measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) (<span class="id">A</span> : <span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.mu">set</a></span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">X</span>, <span class="id">mu</span> (<span class="id">X</span> `&amp;` <span class="id">A</span>) + <span class="id">mu</span> (<span class="id">X</span> `&amp;` ~` <span class="id">A</span>) &lt;= <span class="id">mu</span> <span class="id">X</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span>.-<span class="id">caratheodory</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof233')">Proof.</span></div>
<div class="proofscript" id="proof233">
<span class="id">move</span>=&gt; <span class="id">suf</span> <span class="id">X</span>; <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">eq_le</span>; <span class="id">apply</span>/<span class="id">andP</span>; <span class="id">split</span>;<br/>
&nbsp;&nbsp;[<span class="id">exact</span>: <span class="id">le_outer_measureIC</span> | <span class="id">exact</span>: <span class="id">suf</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">caratheodory_theorem_sigma_algebra</span>.<br/>
<span class="kwd">Variables</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">T</span> : <span class="kwd">Type</span>) (<span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.mu">mu</a></span> : {<span class="id">outer_measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">outer_measure_bigcup_lim</span> (<span class="id">A</span> : (<span class="id">set</span> <span class="id">T</span>) ^<span class="id">nat</span>) <span class="id">X</span> :<br/>
&nbsp;&nbsp;<span class="id">mu</span> (<span class="id">X</span> `&amp;` \<span class="id">bigcup_k</span> <span class="id">A</span> <span class="id">k</span>) &lt;= \<span class="id">sum_</span>(<span class="id">k</span> &lt;<span class="id">oo</span>) <span class="id"><a href="mathcomp.classical.classical_sets.html#setIT">mu</a></span> (<span class="id">X</span> `&amp;` <span class="id">A</span> <span class="id">k</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof234')">Proof.</span></div>
<div class="proofscript" id="proof234">
<span class="id"><a href="mathcomp.classical.classical_sets.html#setIUr">apply</a></span>: (<span class="id">le_trans</span> <span class="id">_</span> (<span class="id">outer_measure_sigma_subadditive</span> <span class="id">mu</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">X</span> `&amp;` <span class="id">A</span> <span class="id">n</span>))).<br/>
<span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setUidPl">apply</a></span>/<span class="id">le_outer_measure</span>; <span class="id"><a href="mathcomp.classical.classical_sets.html#subIset">rewrite</a></span> <span class="id">setI_bigcupr</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">M</span> := <span class="id">mu</span>.-<span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.mu">caratheodory</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">caratheodory_measurable_set0</span> : <span class="id">M</span> <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof235')">Proof.</span></div>
<div class="proofscript" id="proof235">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">X</span> /=; <span class="id">rewrite</span> <span class="id">setI0</span> <span class="id">outer_measure0</span> <span class="id">add0e</span> <span class="id">setC0</span> <span class="id">setIT</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">caratheodory_measurable_setC</span> <span class="id">A</span> : <span class="id">M</span> <span class="id">A</span> -&gt; <span class="id">M</span> (~` <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof236')">Proof.</span></div>
<div class="proofscript" id="proof236">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">MA</span> <span class="id">X</span>; <span class="id">rewrite</span> <span class="id">setCK</span> <span class="id">addeC</span> -<span class="id">MA</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">caratheodory_measurable_setU_le</span> (<span class="id">X</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id">mu</span>.-<span class="id">caratheodory</span> <span class="id">A</span> -&gt; <span class="id">mu</span>.-<span class="id">caratheodory</span> <span class="id">B</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> (<span class="id">X</span> `&amp;` (<span class="id">A</span> `|` <span class="id">B</span>)) + <span class="id">mu</span> (<span class="id">X</span> `&amp;` ~` (<span class="id">A</span> `|` <span class="id">B</span>)) &lt;= <span class="id">mu</span> <span class="id">X</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof237')">Proof.</span></div>
<div class="proofscript" id="proof237">
<span class="id">move</span>=&gt; <span class="id">mA</span> <span class="id">mB</span>; <span class="id">pose</span> <span class="id">Y</span> := <span class="id"><a href="mathcomp.classical.classical_sets.html#setU">X</a></span> `&amp;` <span class="id">A</span> `|` <span class="id">X</span> `&amp;` <span class="id">B</span> `&amp;` ~` <span class="id">A</span>.<br/>
<span class="id">have</span> /(<span class="id">lee_add2r</span> (<span class="id">mu</span> (<span class="id">X</span> `&amp;` ~` (<span class="id">A</span> `|` <span class="id">B</span>)))) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mu</span> <span class="id">Y</span> &lt;= <span class="id">mu</span> (<span class="id">X</span> `&amp;` <span class="id">A</span>) + <span class="id">mu</span> (<span class="id">X</span> `&amp;` <span class="id">B</span> `&amp;` ~` <span class="id">A</span>).<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">Z</span> := <span class="id">bigcup2</span> (<span class="id">X</span> `&amp;` <span class="id">A</span>) (<span class="id">X</span> `&amp;` <span class="id">B</span> `&amp;` ~` <span class="id">A</span>).<br/>
&nbsp;&nbsp;<span class="id">have</span> -&gt; : <span class="id">Y</span> = \<span class="id">bigcup_k</span> <span class="id">Z</span> <span class="id">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span>=&gt; [[?|?]|[]]; [<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">O</span>|<span class="kwd">by</span> <span class="kwd">exists</span> 1%<span class="id">N</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">_</span> ?|[<span class="id">_</span> ?|//]]; [<span class="id">left</span>|<span class="id">right</span>].<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">le_trans</span> (<span class="id">outer_measure_sigma_subadditive</span> <span class="id">mu</span> <span class="id">Z</span>))//.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a name="caratheodory_measurable_setD">le_eqVlt</a></span>; <span class="id">apply</span>/<span class="id">orP</span>; <span class="id">left</span>; <span class="id">apply</span>/<span class="id">eqP</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">cvg_lim</span> =&gt; //; <span class="id">rewrite</span> -(<span class="id">cvg_shiftn</span> 2)/=; <span class="id">apply</span>: <span class="id">cvg_near_cst</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">nearW</span> =&gt; <span class="id">k</span>; <span class="id">rewrite</span> <span class="id">big_mkord</span> <span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_measurable_setC">addn2</a></span> 2!<span class="id">big_ord_recl</span> <span class="id">big1</span> ?<span class="id">adde0</span>//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; ? <span class="id">_</span>; <span class="id">exact</span>: <span class="id">outer_measure0</span>.<br/>
<span class="id"><a name="caratheodory_theorem_sigma_algebra.additive_ext_lemmas.B">have</a></span> /<span class="id">le_trans</span> : <span class="id">mu</span> (<span class="id">X</span> `&amp;` (<span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.M">A</a></span> `|` <span class="id"><a name="caratheodory_theorem_sigma_algebra.additive_ext_lemmas.mB">B</a></span>)) + <span class="id">mu</span> (<span class="id">X</span> `&amp;` ~` (<span class="id">A</span> `|` <span class="id">B</span>)) &lt;=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mu</span> <span class="id">Y</span> + <span class="id">mu</span> (<span class="id">X</span> `&amp;` ~` (<span class="id">A</span> `|` <span class="id">B</span>)).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">setIUr</span> (<span class="id">_</span> : <span class="id">X</span> `&amp;` <span class="id">A</span> `|` <span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.mu">X</a></span> `&amp;` <span class="id">B</span> = <span class="id">Y</span>) //.<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.additive_ext_lemmas.B">rewrite</a></span> /<span class="id">Y</span> -[<span class="kwd">in</span> <span class="id">LHS</span>](<span class="id">setIT</span> <span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.additive_ext_lemmas.B">B</a></span>) -(<span class="id">setUCr</span> <span class="id">A</span>) 2!<span class="id">setIUr</span> <span class="id">setUC</span> -[<span class="kwd">in</span> <span class="id">RHS</span>]<span class="id">setIA</span>.<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.additive_ext_lemmas.mB">rewrite</a></span> <span class="id">setUC</span> <span class="id">setUA</span>; <span class="id">congr</span> (<span class="id">_</span> `|` <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setUidPl</span> <span class="id">setICA</span>; <span class="id">apply</span>: <span class="id">subIset</span>; <span class="id">right</span>.<br/>
<span class="id">suff</span> -&gt; : <span class="id">mu</span> (<span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.additive_ext_lemmas.A">X</a></span> `&amp;` <span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.additive_ext_lemmas.B">A</a></span>) + <span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.mu">mu</a></span> (<span class="id">X</span> `&amp;` <span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.additive_ext_lemmas.A">B</a></span> `&amp;` ~` <span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.additive_ext_lemmas.B">A</a></span>) +<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mu</span> (<span class="id">X</span> `&amp;` (~` (<span class="id">A</span> `|` <span class="id">B</span>))) = <span class="id">mu</span> <span class="id">X</span> <span class="kwd">by</span> <span class="id">exact</span>.<br/>
<span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.mu">rewrite</a></span> <span class="id">setCU</span> <span class="id">setIA</span> -(<span class="id">setIA</span> <span class="id">X</span>) <span class="id">setICA</span> (<span class="id">setIC</span> <span class="id">B</span>) -<span class="id">addeA</span> -<span class="id">mB</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setIC">mA</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">caratheodory_measurable_setU</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">M</span> <span class="id">A</span> -&gt; <span class="id">M</span> <span class="id">B</span> -&gt; <span class="id">M</span> (<span class="id">A</span> `|` <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof238')">Proof.</span></div>
<div class="proofscript" id="proof238">
<span class="id">move</span>=&gt; <span class="id">mA</span> <span class="id">mB</span> <span class="id">X</span>; <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">eq_le</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">le_outer_measureIC</span> <span class="id">andTb</span> <span class="id">caratheodory_measurable_setU_le</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">caratheodory_measurable_bigsetU</span> (<span class="id">A</span> : (<span class="id">set</span> <span class="id">T</span>) ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">M</span> (<span class="id">A</span> <span class="id">n</span>)) -&gt; <span class="kwd">forall</span> <span class="id">n</span>, <span class="id">M</span> (\<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id"><a href="mathcomp.classical.classical_sets.html#subsetUr">n</a></span>) <span class="id">A</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof239')">Proof.</span></div>
<div class="proofscript" id="proof239">
<span class="id">move</span>=&gt; <span class="id">MA</span> <span class="id">n</span>; <span class="id">elim</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#setIidPl">big_ind</a></span> : <span class="id">_</span> =&gt; //; <span class="id">first</span> <span class="id">exact</span>: <span class="id">caratheodory_measurable_set0</span>.<br/>
<span class="id">exact</span>: <span class="id">caratheodory_measurable_setU</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.mu">caratheodory_measurable_setI</a></span> <span class="id">A</span> <span class="id">B</span> : <span class="id">M</span> <span class="id">A</span> -&gt; <span class="id">M</span> <span class="id">B</span> -&gt; <span class="id">M</span> (<span class="id">A</span> `&amp;` <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof240')">Proof.</span></div>
<div class="proofscript" id="proof240">
<span class="id">move</span>=&gt; <span class="id">mA</span> <span class="id">mB</span>; <span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.additive_ext_lemmas.caratheodory_decomp">rewrite</a></span> -(<span class="id">setCK</span> <span class="id">A</span>) -(<span class="id"><a href="mathcomp.classical.classical_sets.html#setIA">setCK</a></span> <span class="id">B</span>) -<span class="id">setCU</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">caratheodory_measurable_setC</span>/<span class="id">caratheodory_measurable_setU</span>;<br/>
&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">caratheodory_measurable_setC</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">caratheodory_measurable_setD</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">M</span> <span class="id">A</span> -&gt; <span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.additive_ext_lemmas.A">M</a></span> <span class="id">B</span> -&gt; <span class="id">M</span> (<span class="id">A</span> `\` <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof241')">Proof.</span></div>
<div class="proofscript" id="proof241">
<span class="id">move</span>=&gt; <span class="id">mA</span> <span class="id">mB</span>; <span class="id">rewrite</span> <span class="id">setDE</span>; <span class="id">apply</span>: <span class="id">caratheodory_measurable_setI</span> =&gt; //.<br/>
<span class="id">exact</span>: <span class="id">caratheodory_measurable_setC</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">additive_ext_lemmas</span>.<br/>
<span class="kwd">Variable</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">set</span> <span class="id">T</span>.<br/>
<span class="kwd">Hypothesis</span> (<span class="id">mA</span> : <span class="id">M</span> <span class="id">A</span>) (<span class="id">mB</span> : <span class="id">M</span> <span class="id">B</span>).<br/>
<br/>
<span class="kwd">Let</span> <span class="id">caratheodory_decomp</span> <span class="id">X</span> :<br/>
&nbsp;&nbsp;<span class="id">mu</span> <span class="id">X</span> = <span class="id">mu</span> (<span class="id">X</span> `&amp;` <span class="id">A</span> `&amp;` <span class="id">B</span>) + <span class="id">mu</span> (<span class="id">X</span> `&amp;` <span class="id"><a name="caratheodory_additive">A</a></span> `&amp;` ~` <span class="id">B</span>) +<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mu</span> (<span class="id">X</span> `&amp;` ~` <span class="id">A</span> `&amp;` <span class="id">B</span>) + <span class="id">mu</span> (<span class="id">X</span> `&amp;` ~` <span class="id">A</span> `&amp;` ~` <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof242')">Proof.</span></div>
<div class="proofscript" id="proof242">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">mA</span> <span class="id">mB</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.mu">_</a></span> + <span class="id">_</span> + <span class="id">X</span> = <span class="id">_</span>]<span class="id">mB</span> <span class="id">addeA</span>. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">caratheorody_decompIU</span> <span class="id">X</span> : <span class="id">mu</span> (<span class="id">X</span> `&amp;` (<span class="id">A</span> `|` <span class="id">B</span>)) =<br/>
&nbsp;&nbsp;<span class="id">mu</span> (<span class="id">X</span> `&amp;` <span class="id">A</span> `&amp;` <span class="id">B</span>) + <span class="id">mu</span> (<span class="id">X</span> `&amp;` ~` <span class="id">A</span> `&amp;` <span class="id">B</span>) + <span class="id">mu</span> (<span class="id">X</span> `&amp;` <span class="id">A</span> `&amp;` ~` <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof243')">Proof.</span></div>
<div class="proofscript" id="proof243">
<span class="id">rewrite</span> <span class="id">caratheodory_decomp</span> -!<span class="id">addeA</span>; <span class="id">congr</span> (<span class="id">mu</span> <span class="id">_</span> + <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -!<span class="id">setIA</span>; <span class="id">congr</span> (<span class="id">_</span> `&amp;` <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setIC</span>; <span class="id">apply</span>/<span class="id">setIidPl</span>; <span class="id">apply</span>: <span class="id">subIset</span>; <span class="id">left</span>; <span class="id">exact</span>: <span class="id">subsetUl</span>.<br/>
<span class="id">rewrite</span> <span class="id">addeA</span> <span class="id">addeC</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">mu</span> <span class="id">X</span> + <span class="id">_</span>](<span class="id">_</span> : <span class="id">_</span> = <span class="id">set0</span>); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setIA</span> -<span class="id">setCU</span> -<span class="id">setIA</span> <span class="id">setICr</span> <span class="id">setI0</span>.<br/>
<span class="id"><a href="mathcomp.classical.classical_sets.html#setT">rewrite</a></span> <span class="id">outer_measure0</span> <span class="id">add0e</span> <span class="id">addeC</span> -!<span class="id">setIA</span>; <span class="id">congr</span> (<span class="id">mu</span> (<span class="id">X</span> `&amp;` <span class="id">_</span>) + <span class="id">mu</span> (<span class="id">X</span> `&amp;` <span class="id">_</span>)).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setIC</span>; <span class="id">apply</span>/<span class="id">setIidPl</span>; <span class="id">apply</span>: <span class="id">subIset</span>; <span class="id">right</span>; <span class="id">exact</span>: <span class="id">subsetUr</span>.<br/>
<span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setU">rewrite</a></span> <span class="id">setIC</span>; <span class="id">apply</span>/<span class="id">setIidPl</span>; <span class="id">apply</span>: <span class="id">subIset</span>; <span class="id">left</span>; <span class="id">exact</span>: <span class="id">subsetUl</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">disjoint_caratheodoryIU</span> <span class="id">X</span> : [<span class="id">disjoint</span> <span class="id">A</span> &amp; <span class="id">B</span>] -&gt;<br/>
&nbsp;&nbsp;<span class="id">mu</span> (<span class="id">X</span> `&amp;` (<span class="id">A</span> `|` <span class="id">B</span>)) = <span class="id">mu</span> (<span class="id">X</span> `&amp;` <span class="id">A</span>) + <span class="id">mu</span> (<span class="id">X</span> `&amp;` <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof244')">Proof.</span></div>
<div class="proofscript" id="proof244">
<span class="id">move</span>=&gt; /<span class="id">eqP</span> <span class="id">AB</span>; <span class="id">rewrite</span> <span class="id">caratheodory_decomp</span> -<span class="id">setIA</span> <span class="id">AB</span> <span class="id">setI0</span> <span class="id">outer_measure0</span>.<br/>
<span class="id">rewrite</span> <span class="id">add0e</span> <span class="id">addeC</span> -<span class="id">setIA</span> -<span class="id">setCU</span> -<span class="id">setIA</span> <span class="id">setICr</span> <span class="id">setI0</span> <span class="id">outer_measure0</span> <span class="id">add0e</span>.<br/>
<span class="id">rewrite</span> -!<span class="id">setIA</span>; <span class="id">congr</span> (<span class="id">mu</span> (<span class="id">X</span> `&amp;` <span class="id">_</span> ) + <span class="id">mu</span> (<span class="id">X</span> `&amp;` <span class="id">_</span>)).<br/>
<span class="id">rewrite</span> (<span class="id">setIC</span> <span class="id">A</span>) <span class="id">setIA</span> <span class="id">setIC</span>; <span class="id">apply</span>/<span class="id">setIidPl</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setIUl</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_subr_addr">setICr</a></span> <span class="id">setU0</span> <span class="id">subsetI</span>; <span class="id">move</span>/<span class="id">disjoints_subset</span> <span class="kwd">in</span> <span class="id">AB</span>; <span class="id">split</span>.<br/>
- <span class="id">rewrite</span> <span class="id">setIA</span> <span class="id">setIC</span>; <span class="id">apply</span>/<span class="id">setIidPl</span>; <span class="id">rewrite</span> <span class="id">setIUl</span> <span class="id">setICr</span> <span class="id">set0U</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>: <span class="id">AB</span>; <span class="id">rewrite</span> <span class="id">setIC</span> =&gt; /<span class="id">disjoints_subset</span> =&gt; <span class="id">AB</span>; <span class="id">rewrite</span> <span class="id">subsetI</span>; <span class="id">split</span>.<br/>
Qed.</div>
<span class="kwd">End</span> <span class="id">additive_ext_lemmas</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">caratheodory_additive</span> (<span class="id">A</span> : (<span class="id">set</span> <span class="id">T</span>) ^<span class="id">nat</span>) : (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">M</span> (<span class="id">A</span> <span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.mu">n</a></span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id">trivIset</span> <span class="id">setT</span> <span class="id">A</span> -&gt; <span class="kwd">forall</span> <span class="id">n</span> <span class="id">X</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mu</span> (<span class="id">X</span> `&amp;` \<span class="id">big</span>[<span class="id">setU</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#setIS">set0</a></span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">A</span> <span class="id">i</span>) = \<span class="id">sum_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">mu</span> (<span class="id">X</span> `&amp;` <span class="id">A</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof245')">Proof.</span></div>
<div class="proofscript" id="proof245">
<span class="id">move</span>=&gt; <span class="id">MA</span> <span class="id">ta</span>; <span class="id">elim</span>=&gt; [|<span class="id">n</span> <span class="id">ih</span>] <span class="id">X</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id">big_ord0</span> <span class="id">setI0</span> <span class="id">outer_measure0</span>.<br/>
<span class="id">rewrite</span> <span class="id">big_ord_recr</span> /= <span class="id">disjoint_caratheodoryIU</span> // ?<span class="id">ih</span> ?<span class="id">big_ord_recr</span> //.<br/>
- <span class="id">exact</span>: <span class="id">caratheodory_measurable_bigsetU</span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">eqP</span>/(@<span class="id">trivIset_bigsetUI</span> <span class="id">_</span> <span class="id">predT</span>) =&gt; //; <span class="id">rewrite</span> /<span class="id">predT</span> /= <span class="id">trueE</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">caratheodory_lime_le</span> (<span class="id">A</span> : (<span class="id">set</span> <span class="id">T</span>) ^<span class="id">nat</span>) : (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">M</span> (<span class="id">A</span> <span class="id">n</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id">trivIset</span> <span class="id">setT</span> <span class="id">A</span> -&gt; <span class="kwd">forall</span> <span class="id">X</span>,<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">k</span> &lt;<span class="id">oo</span>) <span class="id">mu</span> (<span class="id">X</span> `&amp;` <span class="id">A</span> <span class="id">k</span>) + <span class="id">mu</span> (<span class="id">X</span> `&amp;` ~` \<span class="id">bigcup_k</span> <span class="id">A</span> <span class="id">k</span>) &lt;= <span class="id">mu</span> <span class="id">X</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof246')">Proof.</span></div>
<div class="proofscript" id="proof246">
<span class="id">move</span>=&gt; <span class="id">MA</span> <span class="id">tA</span> <span class="id">X</span>.<br/>
<span class="id">set</span> <span class="id">A</span>' := \<span class="id">bigcup_k</span> <span class="id">A</span> <span class="id">k</span>; <span class="id">set</span> <span class="id">B</span> := <span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">big</span>[<span class="id">setU</span>/<span class="id">set0</span>]<span class="id">_</span>(<span class="id">k</span> &lt; <span class="id">n</span>) (<span class="id">A</span> <span class="id">k</span>).<br/>
<span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_lime_le">suff</a></span> : <span class="kwd">forall</span> <span class="id">n</span>, \<span class="id">sum_</span>(<span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">mu</span> (<span class="id"><a name="caratheodory_measurable_bigcup">X</a></span> `&amp;` <span class="id">A</span> <span class="id">k</span>) + <span class="id">mu</span> (<span class="id">X</span> `&amp;` ~` <span class="id">A</span>') &lt;= <span class="id">mu</span> <span class="id">X</span>.<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_theorem_sigma_algebra.T">move</a></span>=&gt; <span class="id">XA</span>; <span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">lim</span> <span class="id">_</span> = <span class="id">ereal_sup</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(<span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">mu</span> (<span class="id">X</span> `&amp;` <span class="id">A</span> <span class="id"><a href="mathcomp.analysis.sequences.html#eq_bigcup_seqD_bigsetU">k</a></span>)) @` <span class="id">setT</span>)); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">under</span> <span class="id">eq_fun</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">big_mkord</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">cvg_lim</span> =&gt; //; <span class="id">apply</span>: <span class="id">ereal_nondecreasing_cvgn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: (<span class="id">lee_sum_nneg_ord</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">mu</span> (<span class="id">X</span> `&amp;` <span class="id">A</span> <span class="id">n</span>)) <span class="id">xpredT</span>) =&gt; <span class="id">n</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">outer_measure_ge0</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span> <span class="id">XAx</span> : (<span class="id">mu</span> (<span class="id">X</span> `&amp;` ~` <span class="id">A</span>')) =&gt; [<span class="id">x</span>| |].<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> -<span class="id">lee_subr_addr</span> //; <span class="id">apply</span>: <span class="id">ub_ereal_sup</span> =&gt; /= <span class="id">_</span> [<span class="id">n</span> <span class="id">_</span>] &lt;-.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">EFinN</span> <span class="id">lee_subr_addr</span> // -<span class="id">XAx</span> <span class="id">XA</span>.<br/>
&nbsp;&nbsp;- <span class="id">suff</span> : <span class="id">mu</span> <span class="id">X</span> = +<span class="id">oo</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; -&gt;; <span class="id">rewrite</span> <span class="id">leey</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id"><a href="mathcomp.analysis.measure.html#measure_display">rewrite</a></span> -<span class="id">leye_eq</span> -<span class="id">XAx</span> <span class="id">le_outer_measure</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">addeNy</span> <span class="id">leNye</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">n</span>.<br/>
<span class="id">apply</span>: (@<span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">le_trans</a></span> <span class="id">_</span> <span class="id"><a name="caratheodory_sigma_algebra.T">_</a></span> (\<span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.Exports.pointedType">sum_</a></span>(<span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">mu</span> (<span class="id">X</span> `&amp;` <span class="id">A</span> <span class="id">k</span>) + <span class="id">mu</span> (<span class="id">X</span> `&amp;` ~` <span class="id">B</span> <span class="id">n</span>))).<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">lee_add2l</span>/<span class="id">le_outer_measure</span>; <span class="id">apply</span>: <span class="id">setIS</span>; <span class="id">exact</span>/<span class="id">subsetC</span>/<span class="id">bigsetU_bigcup</span>.<br/>
<span class="id">rewrite</span> [<span class="kwd">in</span> <span class="id">leRHS</span>](<span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_sigma_algebra.mu">caratheodory_measurable_bigsetU</a></span> <span class="id">MA</span> <span class="id">n</span>) <span class="id">lee_add2r</span>//.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">caratheodory_additive</span>.<br/>
Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> `<span class="id">caratheodory_lime_le</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">caratheodory_lim_lee</span> := <span class="id">caratheodory_lime_le</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">caratheodory_measurable_trivIset_bigcup</span> (<span class="id">A</span> : (<span class="id">set</span> <span class="id">T</span>) ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">M</span> (<span class="id">A</span> <span class="id">n</span>)) -&gt; <span class="id">trivIset</span> <span class="id">setT</span> <span class="id">A</span> -&gt; <span class="id">M</span> (\<span class="id">bigcup_k</span> (<span class="id">A</span> <span class="id">k</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof247')">Proof.</span></div>
<div class="proofscript" id="proof247">
<span class="id">move</span>=&gt; <span class="id">MA</span> <span class="id">tA</span>; <span class="id">apply</span>: <span class="id">le_caratheodory_measurable</span> =&gt; <span class="id">X</span> /=.<br/>
<span class="id">have</span> /(<span class="id">lee_add2r</span> (<span class="id">mu</span> (<span class="id">X</span> `&amp;` ~` \<span class="id">bigcup_k</span> <span class="id">A</span> <span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_measure.T">k</a></span>))) := <span class="id">outer_measure_bigcup_lim</span> <span class="id">A</span> <span class="id">X</span>.<br/>
<span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_measure.mu">move</a></span>/<span class="id">le_trans</span>; <span class="id">apply</span>; <span class="id">exact</span>: <span class="id">caratheodory_lime_le</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">caratheodory_measurable_bigcup</span> (<span class="id">A</span> : (<span class="id"><a name="caratheodory_measure_ge0">set</a></span> <span class="id">T</span>) ^<span class="id">nat</span>) : (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">M</span> (<span class="id">A</span> <span class="id">n</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id">M</span> (\<span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_measure.mu">bigcup_k</a></span> (<span class="id">A</span> <span class="id">k</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof248')">Proof.</span></div>
<div class="proofscript" id="proof248">
<span class="id">move</span>=&gt; <span class="id">MA</span>; <span class="id">rewrite</span> -<span class="id">eq_bigcup_seqD_bigsetU</span>.<br/>
<span class="id">apply</span>/<span class="id">caratheodory_measurable_trivIset_bigcup</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">trivIset_seqD</span> =&gt; <span class="id">m</span> <span class="id">n</span> <span class="id">mn</span>; <span class="id">exact</span>/<span class="id">subsetPset</span>/<span class="id">subset_bigsetU</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>=&gt; [|<span class="id">n</span> /=]; [| <span class="id">apply</span>/<span class="id">caratheodory_measurable_setD</span> =&gt; //];<br/>
&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">caratheodory_measurable_bigsetU</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">caratheodory_theorem_sigma_algebra</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">caratheodory_type</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id"><a href="mathcomp.classical.boolp.html#funeqE">T</a></span> : <span class="kwd">Type</span>)<br/>
&nbsp;&nbsp;(<span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) := <span class="id">T</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">caratheodory_display</span> <span class="id">R</span> <span class="id">T</span> : (<span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) -&gt; <span class="id">measure_display</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof249')">Proof.</span></div>
<div class="proofscript" id="proof249">
 <span class="id">exact</span>. Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">caratheodory_sigma_algebra</span>.<br/>
<span class="kwd">Variables</span> (<span class="id">R</span> : <span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_measure.mu">realType</a></span>) (<span class="id">T</span> : <span class="id">pointedType</span>) (<span class="id">mu</span> : {<span class="id">outer_measure</span> <span class="id"><a href="mathcomp.analysis.topology.html#cvg_ex">set</a></span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}).<br/>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := @<span class="id">isMeasurable.Build</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#xpredT">caratheodory_display</a></span> <span class="id">mu</span>)<br/>
&nbsp;&nbsp;(<span class="id">caratheodory_type</span> <span class="id">mu</span>) (<span class="id">Pointed.class</span> <span class="id">T</span>) <span class="id">mu</span>.-<span class="id">caratheodory</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">caratheodory_measurable_set0</span> <span class="id">mu</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id">caratheodory_measurable_setC</span> <span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_lime_le">_</a></span> <span class="id">_</span> <span class="id">mu</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id">caratheodory_measurable_bigcup</span> <span class="id">_</span> <span class="id">_</span> <span class="id">mu</span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id">caratheodory_sigma_algebra</span>.<br/>
<br/>
<span class="kwd">Notation</span> "<span class="id">mu</span> .-<span class="id">cara</span>" := (<span class="id">caratheodory_display</span> <span class="id">mu</span>) : <span class="id">measure_display_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">mu</span> .-<span class="id">cara</span>.-<span class="id">measurable</span>" :=<br/>
&nbsp;&nbsp;(<span class="id">measurable</span> : <span class="id">set</span> (<span class="id">set</span> (<span class="id">caratheodory_type</span> <span class="id">mu</span>))) : <span class="id">classical_set_scope</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">caratheodory_measure</span>.<br/>
<span class="kwd">Variables</span> (<span class="id">R</span> : <span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_measure_sigma_additive">realType</a></span>) (<span class="id">T</span> : <span class="id">pointedType</span>).<br/>
<span class="kwd">Variable</span> <span class="id">mu</span> : {<span class="id"><a name="measure_is_complete_caratheodory">outer_measure</a></span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}.<br/>
<span class="kwd">Let</span> <span class="id">U</span> := <span class="id">caratheodory_type</span> <span class="id">mu</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">caratheodory_measure0</span> : <span class="id">mu</span> (<span class="id">set0</span> : <span class="id">set</span> <span class="id">U</span>) = 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof250')">Proof.</span></div>
<div class="proofscript" id="proof250">
 <span class="id">exact</span>: <span class="id">outer_measure0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">caratheodory_measure_ge0</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">U</span>) : 0 &lt;= <span class="id">mu</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof251')">Proof.</span></div>
<div class="proofscript" id="proof251">
 <span class="id">exact</span>: <span class="id">outer_measure_ge0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">caratheodory_measure_sigma_additive</span> :<br/>
&nbsp;&nbsp;<span class="id">semi_sigma_additive</span> (<span class="id">mu</span> : <span class="id">set</span> <span class="id">U</span> -&gt; <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof252')">Proof.</span></div>
<div class="proofscript" id="proof252">
<span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">mA</span> <span class="id">tA</span> <span class="id">mbigcupA</span>; <span class="id">set</span> <span class="id">B</span> := \<span class="id"><a href="mathcomp.analysis.measure.html#caratheodory_measure.mu">bigcup_k</a></span> <span class="id">A</span> <span class="id">k</span>.<br/>
<span class="id">suff</span> : <span class="kwd">forall</span> <span class="id">X</span>, <span class="id">mu</span> <span class="id">X</span> = \<span class="id">sum_</span>(<span class="id">k</span> &lt;<span class="id">oo</span>) <span class="id">mu</span> (<span class="id">X</span> `&amp;` <span class="id">A</span> <span class="id">k</span>) + <span class="id">mu</span> (<span class="id">X</span> `&amp;` ~` <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="id">move</span>/(<span class="id">_</span> <span class="id">B</span>); <span class="id">rewrite</span> <span class="id">setICr</span> <span class="id">outer_measure0</span> <span class="id">adde0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">_</span> : (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">_</span>) = <span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(<span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">mu</span> (<span class="id">A</span> <span class="id">k</span>)); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> <span class="id">big_mkord</span>; <span class="id">apply</span>: <span class="id">eq_bigr</span> =&gt; <span class="id">i</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">_</a></span>; <span class="id">congr</span> (<span class="id">mu</span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setIC</span>; <span class="id">apply</span>/<span class="id">setIidPl</span>; <span class="id">exact</span>: <span class="id">bigcup_sup</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; -&gt;; <span class="id">have</span> := <span class="kwd">fun</span> <span class="id">n</span> (<span class="id">_</span> : <span class="id">xpredT</span> <span class="id">n</span>) =&gt; <span class="id">outer_measure_ge0</span> <span class="id">mu</span> (<span class="id">A</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="id">move</span>/(@<span class="id"><a href="mathcomp.analysis.signed.html#nonnegP">is_cvg_nneseries</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> 0) =&gt; /<span class="id">cvg_ex</span>[<span class="id">l</span>] <span class="id">hl</span>.<br/>
&nbsp;&nbsp;<span class="id">under</span> [<span class="kwd">in</span> <span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span> --&gt; <span class="id">X</span>]<span class="id">eq_fun</span> <span class="id">do</span> <span class="id">rewrite</span> -(<span class="id">big_mkord</span> <span class="id">xpredT</span> (<span class="id">mu</span> \<span class="id">o</span> <span class="id">A</span>)).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>/<span class="id">cvg_lim</span> : (<span class="id">hl</span>) =&gt; -&gt;.<br/>
<span class="id">move</span>=&gt; <span class="id">X</span>.<br/>
<span class="id">have</span> <span class="id"><a href="mathcomp.analysis.normedtype.html#limeD">mB</a></span> : <span class="id">mu</span>.-<span class="id">cara</span>.-<span class="id">measurable</span> <span class="id">B</span> := <span class="id">caratheodory_measurable_bigcup</span> <span class="id">mA</span>.<br/>
<span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">eq_le</span> (<span class="id">caratheodory_lime_le</span> <span class="id">mA</span> <span class="id">tA</span> <span class="id">X</span>) <span class="id">andbT</span>.<br/>
<span class="id">have</span> /(<span class="id">lee_add2r</span> (<span class="id">mu</span> (<span class="id">X</span> `&amp;` ~` <span class="id">B</span>))) := <span class="id">outer_measure_bigcup_lim</span> <span class="id">mu</span> <span class="id">A</span> <span class="id">X</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">le_caratheodory_measurable</span> // =&gt; ?; <span class="id">rewrite</span> -<span class="id">mB</span>.<br/>
Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">isMeasure.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span><br/>
&nbsp;&nbsp;(<span class="id">mu</span> : <span class="id">set</span> (<span class="id">caratheodory_type</span> <span class="id">mu</span>) -&gt; <span class="id"><a href="mathcomp.analysis.normedtype.html#limeD">_</a></span>)<br/>
&nbsp;&nbsp;<span class="id">caratheodory_measure0</span> <span class="id">caratheodory_measure_ge0</span><br/>
&nbsp;&nbsp;<span class="id">caratheodory_measure_sigma_additive</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measure_is_complete_caratheodory</span> :<br/>
&nbsp;&nbsp;<span class="id">measure_is_complete</span> (<span class="id">mu</span> : <span class="id">set</span> (<span class="id"><a href="mathcomp.analysis.topology.html#cvg_lim">caratheodory_type</a></span> <span class="id">mu</span>) -&gt; <span class="id">_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof253')">Proof.</span></div>
<div class="proofscript" id="proof253">
<span class="id">move</span>=&gt; <span class="id">B</span> [<span class="id">A</span> [<span class="id">mA</span> <span class="id">muA0</span> <span class="id">BA</span>]]; <span class="id">apply</span>: <span class="id">le_caratheodory_measurable</span> =&gt; <span class="id">X</span>.<br/>
<span class="id">suff</span> -&gt; : <span class="id">mu</span> (<span class="id">X</span> `&amp;` <span class="id">B</span>) = 0.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">add0e</span> <span class="id">le_outer_measure</span> //; <span class="id">apply</span>: <span class="id">subIset</span>; <span class="id">left</span>.<br/>
<span class="id">have</span> <span class="id">muB0</span> : <span class="id">mu</span> <span class="id">B</span> = 0.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">eq_le</span> <span class="id">outer_measure_ge0</span> <span class="id">andbT</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.topology.html#cvg_comp">apply</a></span>: (<span class="id">le_trans</span> (<span class="id">le_outer_measure</span> <span class="id">mu</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.sequences.html#cvg_geometric_series_half">BA</a></span>)); <span class="id">rewrite</span> -<span class="id">muA0</span>.<br/>
<span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">eq_le</span> <span class="id">outer_measure_ge0</span> <span class="id">andbT</span>.<br/>
<span class="id">have</span> : <span class="id">X</span> `&amp;` <span class="id">B</span> `&lt;=` <span class="id">B</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">subIset</span>; <span class="id">right</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>/(<span class="id">le_outer_measure</span> <span class="id">mu</span>); <span class="id">rewrite</span> <span class="id">muB0</span> =&gt; -&gt;.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">caratheodory_measure</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">epsilon_trick</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">A</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) <span class="id">e</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P</span> : <span class="id">pred</span> <span class="id">nat</span>) : (<span class="kwd">forall</span> <span class="id">n</span>, 0 &lt;= <span class="id">A</span> <span class="id">n</span>) -&gt; (0 &lt;= <span class="id">e</span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) (<span class="id">A</span> <span class="id">i</span> + (<span class="id">e</span> / (2 ^ <span class="id">i</span>.+1)%:<span class="id">R</span>)%:<span class="id">E</span>) &lt;=<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">A</span> <span class="id">i</span> + <span class="id">e</span>%:<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof254')">Proof.</span></div>
<div class="proofscript" id="proof254">
<span class="id">move</span>=&gt; <span class="id">A0</span> /<span class="id">nonnegP</span>[{}<span class="id">e</span>].<br/>
<span class="id">rewrite</span> (@<span class="id">le_trans</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">lim</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; (\<span class="id">sum_</span>(0 &lt;= <span class="id">i</span> &lt; <span class="id">n</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">A</span> <span class="id">i</span>) +<br/>
&nbsp;&nbsp;&nbsp;&nbsp;\<span class="id">sum_</span>(0 &lt;= <span class="id">i</span> &lt; <span class="id">n</span>) (<span class="id">e</span>%:<span class="id">num</span> / (2 ^ <span class="id">i</span>.+1)%:<span class="id">R</span>)%:<span class="id">E</span>))) //.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">nneseriesD</span> // <span class="id">limeD</span> //.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id">lee_add2l</span> //; <span class="id">apply</span>: <span class="id">lee_lim</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exact</span>: <span class="id">is_cvg_nneseries</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exact</span>: <span class="id">is_cvg_nneseries</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">near</span>=&gt; <span class="id">n</span>; <span class="id">exact</span>: <span class="id">lee_sum_nneg_subset</span>.<br/>
&nbsp;&nbsp;- <span class="id">exact</span>: <span class="id">is_cvg_nneseries</span>.<br/>
&nbsp;&nbsp;- <span class="id">exact</span>: <span class="id">is_cvg_nneseries</span>.<br/>
&nbsp;&nbsp;- <span class="id">exact</span>: <span class="id">adde_def_nneseries</span>.<br/>
<span class="id">suff</span> <span class="id">cvggeo</span> : (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(0 &lt;= <span class="id">i</span> &lt; <span class="id">n</span>) (<span class="id">e</span>%:<span class="id">num</span> / (2 ^ <span class="id">i</span>.+1)%:<span class="id">R</span>)%:<span class="id">E</span>) --&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">e</span>%:<span class="id">num</span>%:<span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">limeD</span> //.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lee_add2l</span> // (<span class="id">cvg_lim</span> <span class="id">_</span> <span class="id"><a name="cover_subset">cvggeo</a></span>).<br/>
&nbsp;&nbsp;- <span class="id">exact</span>: <span class="id">is_cvg_nneseries</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">is_cvg_nneseries</span> =&gt; ?; <span class="id">rewrite</span> <span class="id">lee_fin</span> <span class="id">divr_ge0</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">cvg_lim</span> <span class="id">_</span> <span class="id">cvggeo</span>) //= <span class="id">fin_num_adde_defl</span>.<br/>
<span class="id">rewrite</span> (<span class="id">_</span> : (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">_</span>) = <span class="id">EFin</span> \<span class="id">o</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(0 &lt;= <span class="id">i</span> &lt; <span class="id">n</span>) (<span class="id"><a href="mathcomp.analysis.measure.html#measurable">e</a></span>%:<span class="id">num</span> / (2 ^ (<span class="id">i</span> + 1))%:<span class="id">R</span>))%<span class="id">R</span>); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">n</span> /=; <span class="id">rewrite</span> (@<span class="id">big_morph</span> <span class="id">_</span> <span class="id">_</span> <span class="id">EFin</span> 0 <span class="id">adde</span>)//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">under</span> [<span class="kwd">in</span> <span class="id">RHS</span>]<span class="id"><a href="mathcomp.analysis.measure.html#semiRingOfSetsType">eq_bigr</a></span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">addn1</span>.<br/>
<span class="id">apply</span>: <span class="id">cvg_comp</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">apply</span> <span class="id">cvg_refl</span>.<br/>
<span class="id">have</span> := <span class="id">cvg_geometric_series_half</span> <span class="id">e</span>%:<span class="id">num</span> <span class="id">O</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">expr0</span> <span class="id">divr1</span>; <span class="id">apply</span>: <span class="id">cvg_trans</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">epsilon_trick0</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">eps</span> : <span class="id">R</span>) (<span class="id">P</span> : <span class="id">pred</span> <span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id">eps</span>)%<span class="id">R</span> -&gt; \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) (<span class="id">eps</span> / (2 ^ <span class="id">i</span>.+1)%:<span class="id">R</span>)%:<span class="id">E</span> &lt;= <span class="id">eps</span>%:<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof255')">Proof.</span></div>
<div class="proofscript" id="proof255">
<span class="id">move</span>=&gt; <span class="id">epspos</span>; <span class="id">have</span> := <span class="id">epsilon_trick</span> <span class="id">P</span> (<span class="kwd">fun</span>=&gt; <span class="id">lexx</span> 0) <span class="id">epspos</span>.<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;breaks&nbsp;coq&nbsp;8.15&nbsp;and&nbsp;below&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;(under&nbsp;eq_eseriesr&nbsp;&nbsp;do&nbsp;rewrite&nbsp;add0e)&nbsp;=&gt;&nbsp;/le_trans;&nbsp;apply.&nbsp;*)</span><br/>
<span class="id">rewrite</span> (@<span class="id">eq_eseriesr</span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; 0 + <span class="id">_</span>) (<span class="kwd">fun</span> <span class="id">n</span> =&gt; (<span class="id">eps</span>/(2^<span class="id">n</span>.+1)%:<span class="id">R</span>)%:<span class="id">E</span>)).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>/<span class="id">le_trans</span>; <span class="id">apply</span>; <span class="id">rewrite</span> <span class="id">eseries0</span> ?<span class="id">add0e</span>; [<span class="id"><a href="mathcomp.analysis.normedtype.html#lime_ge">exact</a></span>: <span class="id">lexx</span> | <span class="id">move</span>=&gt; ? ?].<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; ? ?; <span class="id">rewrite</span> <span class="id">add0e</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">measurable_cover</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>).<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">X</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">F</span> : (<span class="id">set</span> <span class="id">T</span>)^<span class="id">nat</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">measurable_cover</span> <span class="id">X</span> := [<span class="id">set</span> <span class="id">F</span> : (<span class="id">set</span> <span class="id">T</span>)^<span class="id">nat</span> |<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">measurable</span> (<span class="id">F</span> <span class="id">i</span>)) /\ <span class="id">X</span> `&lt;=` \<span class="id">bigcup_k</span> (<span class="id">F</span> <span class="id">k</span>)].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="mathcomp.analysis.topology.html#lim_near_cst">cover_measurable</a></span> <span class="id">X</span> <span class="id">F</span> : <span class="id">measurable_cover</span> <span class="id">X</span> <span class="id">F</span> -&gt; <span class="kwd">forall</span> <span class="id">k</span>, <span class="id">measurable</span> (<span class="id">F</span> <span class="id">k</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof256')">Proof.</span></div>
<div class="proofscript" id="proof256">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; + <span class="id">k</span>; <span class="id">rewrite</span> /<span class="id">measurable_cover</span> =&gt; -[] /(<span class="id">_</span> <span class="id">k</span>). Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cover_subset</span> <span class="id">X</span> <span class="id">F</span> : <span class="id">measurable_cover</span> <span class="id">X</span> <span class="id">F</span> -&gt; <span class="id">X</span> `&lt;=` \<span class="id">bigcup_k</span> (<span class="id">F</span> <span class="id">k</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof257')">Proof.</span></div>
<div class="proofscript" id="proof257">
 <span class="kwd">by</span> <span class="id">case</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">measurable_cover</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_uncurry</span> (<span class="id">T1</span> <span class="id">T2</span> : <span class="kwd">Type</span>) <span class="id"><a href="mathcomp.analysis.measure.html#mu_ext_ge0">d</a></span> (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">G</span> : <span class="id">T1</span> -&gt; <span class="id">T2</span> -&gt; <span class="id">set</span> <span class="id">T</span>) (<span class="id">x</span> : <span class="id">T1</span> * <span class="id">T2</span>) :<br/>
&nbsp;&nbsp;<span class="id">measurable</span> (<span class="id">G</span> <span class="id">x</span>.1 <span class="id">x</span>.2) &lt;-&gt; <span class="id">measurable</span> (<span class="id">uncurry</span> <span class="id">G</span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof258')">Proof.</span></div>
<div class="proofscript" id="proof258">
 <span class="kwd">by</span> <span class="id">case</span>: <span class="id">x</span>. Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">outer_measure_construction</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>).<br/>
<span class="kwd">Variable</span> <span class="id">mu</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>.<br/>
<span class="kwd">Hypothesis</span> (<span class="id">measure0</span> : <span class="id">mu</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable_cover">set0</a></span> = 0) (<span class="id">measure_ge0</span> : <span class="kwd">forall</span> <span class="id">X</span>, <span class="id">mu</span> <span class="id">X</span> &gt;= 0).<br/>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">measure_ge0</span> <span class="id">measure0</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">mu_ext</span> (<span class="id">X</span> : <span class="id">set</span> <span class="id">T</span>) : \<span class="id">bar</span> <span class="id">R</span> :=<br/>
&nbsp;&nbsp;<span class="id">ereal_inf</span> [<span class="id">set</span> \<span class="id">sum_</span>(<span class="id">k</span> &lt;<span class="id">oo</span>) <span class="id">mu</span> (<span class="id">A</span> <span class="id">k</span>) | <span class="id">A</span> <span class="kwd">in</span> <span class="id">measurable_cover</span> <span class="id">X</span>].<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> "<span class="id">mu</span>^*" := <span class="id">mu_ext</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">le_mu_ext</span> : {<span class="id">homo</span> <span class="id">mu</span>^* : <span class="id">A</span> <span class="id">B</span> / <span class="id">A</span> `&lt;=` <span class="id">B</span> &gt;-&gt; <span class="id">A</span> &lt;= <span class="id">B</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof259')">Proof.</span></div>
<div class="proofscript" id="proof259">
<span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">AB</span>; <span class="id">apply</span>/<span class="id">le_ereal_inf</span> =&gt; <span class="id">x</span> [<span class="id">B</span>' [<span class="id">mB</span>' <span class="id">BB</span>']].<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; &lt;-{<span class="id">x</span>}; <span class="kwd">exists</span> <span class="id">B</span>' =&gt; //; <span class="id">split</span> =&gt; //; <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf">apply</a></span>: <span class="id">subset_trans</span> <span class="id">AB</span> <span class="id">BB</span>'.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">mu_ext_ge0</span> <span class="id">A</span> : 0 &lt;= <span class="id">mu</span>^* <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof260')">Proof.</span></div>
<div class="proofscript" id="proof260">
<span class="id">apply</span>: <span class="id">lb_ereal_inf</span> =&gt; <span class="id">x</span> [<span class="id">B</span> [<span class="id">mB</span> <span class="id">AB</span>] &lt;-{<span class="id">x</span>}]; <span class="id">rewrite</span> <span class="id">lime_ge</span> //=.<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">is_cvg_nneseries</span>.<br/>
<span class="kwd">by</span> <span class="id">near</span>=&gt; <span class="id">n</span>; <span class="id">rewrite</span> <span class="id">sume_ge0</span>.<br/>
<span class="id">Unshelve</span>. <span class="id"><a href="mathcomp.analysis.ereal.html#lb_ereal_inf">all</a></span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">mu_ext0</span> : <span class="id">mu</span>^* <span class="id">set0</span> = 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof261')">Proof.</span></div>
<div class="proofscript" id="proof261">
<span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">eq_le</span>; <span class="id">apply</span>/<span class="id">andP</span>; <span class="id">split</span>; <span class="id">last</span> <span class="id">exact</span>/<span class="id">mu_ext_ge0</span>.<br/>
<span class="id">rewrite</span> /<span class="id">mu_ext</span>; <span class="id">apply</span>: <span class="id">ereal_inf_lb</span>; <span class="kwd">exists</span> (<span class="kwd">fun</span>=&gt; <span class="id">set0</span>); <span class="id">first</span> <span class="kwd">by</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#uncurry">split</a></span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">lim_near_cst</span> =&gt; //; <span class="id">near</span>=&gt; <span class="id">n</span> =&gt; /=; <span class="id">rewrite</span> <span class="id">big1</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">mu_ext_sigma_subadditive</span> : <span class="id">sigma_subadditive</span> <span class="id">mu</span>^*.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof262')">Proof.</span></div>
<div class="proofscript" id="proof262">
<span class="id">move</span>=&gt; <span class="id">A</span>; <span class="id">have</span> [[<span class="id">i</span> <span class="id">ioo</span>]|] := <span class="id">pselect</span> (<span class="kwd">exists</span> <span class="id">i</span>, <span class="id">mu</span>^* (<span class="id">A</span> <span class="id">i</span>) = +<span class="id">oo</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">eseries_pinfty</span> <span class="id">_</span> <span class="id">_</span> <span class="id">ioo</span>) ?<span class="id">leey</span>// =&gt; <span class="id">n</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">ltNye</span> (<span class="id">lt_le_trans</span> <span class="id">_</span> (<span class="id">mu_ext_ge0</span> <span class="id">_</span>)).<br/>
<span class="id">rewrite</span> -<span class="id">forallNE</span> =&gt; <span class="id">Aoo</span>.<br/>
<span class="id">suff</span> <span class="id">add2e</span> (<span class="id">e</span> : {<span class="id">posnum</span> <span class="id">R</span>}) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">mu</span>^* (\<span class="id">bigcup_n</span> <span class="id">A</span> <span class="id">n</span>) &lt;= \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span>) <span class="id"><a href="mathcomp.classical.functions.html#invK">mu</a></span>^* (<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">A</a></span> <span class="id">i</span>) + <span class="id">e</span>%:<span class="id">num</span>%:<span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">lee_addgt0Pr</span> =&gt; <span class="id">_</span>/<span class="id">posnumP</span>[].<br/>
<span class="id">rewrite</span> (<span class="id">le_trans</span> <span class="id">_</span> (<span class="id">epsilon_trick</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>))//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span>; <span class="id">exact</span>: <span class="id">mu_ext_ge0</span>.<br/>
<span class="id">pose</span> <span class="id">P</span> <span class="id"><a href="mathcomp.analysis.measure.html#outer_measure_construction.mu">n</a></span> (<span class="id">B</span> : (<span class="id">set</span> <span class="id">T</span>)^<span class="id">nat</span>) := <span class="id">measurable_cover</span> (<span class="id">A</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">n</a></span>) <span class="id">B</span> /\<br/>
&nbsp;&nbsp;\<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">sum_</a></span>(<span class="id">k</span> &lt;<span class="id">oo</span>) <span class="id">mu</span> (<span class="id">B</span> <span class="id">k</span>) &lt;= <span class="id">mu</span>^* (<span class="id">A</span> <span class="id">n</span>) + (<span class="id">e</span>%:<span class="id">num</span> / (2 ^ <span class="id">n</span>.+1)%:<span class="id">R</span>)%:<span class="id">E</span>.<br/>
<span class="id">have</span> [<span class="id">G</span> <span class="id">PG</span>] : {<span class="id">G</span> : ((<span class="id">set</span> <span class="id">T</span>)^<span class="id">nat</span>)^<span class="id">nat</span> &amp; <span class="kwd">forall</span> <span class="id">n</span>, <span class="id">P</span> <span class="id">n</span> (<span class="id">G</span> <span class="id">n</span>)}.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: (@<span class="id">choice</span> <span class="id">_</span> <span class="id">_</span> <span class="id">P</span>) =&gt; <span class="id">n</span>; <span class="id">rewrite</span> /<span class="id">P</span> /<span class="id">mu_ext</span>.<br/>
&nbsp;&nbsp;<span class="id">set</span> <span class="id">S</span> := (<span class="id">X</span> <span class="kwd">in</span> <span class="id">ereal_inf</span> <span class="id">X</span>); <span class="id">move</span> <span class="id">infS</span> : (<span class="id">ereal_inf</span> <span class="id">S</span>) =&gt; <span class="id">iS</span>.<br/>
&nbsp;&nbsp;<span class="id">case</span>: <span class="id">iS</span> <span class="id">infS</span> =&gt; [<span class="id">r</span> <span class="id">Sr</span>|<span class="id">Soo</span>|<span class="id">Soo</span>].<br/>
&nbsp;&nbsp;- <span class="id">have</span> <span class="id">en1</span> : (0 &lt; <span class="id">e</span>%:<span class="id">num</span> / (2 ^ <span class="id">n</span>.+1)%:<span class="id">R</span>)%<span class="id">R</span> <span class="kwd">by</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> /(<span class="id">lb_ereal_inf_adherent</span> <span class="id">en1</span>) : <span class="id">ereal_inf</span> <span class="id">S</span> \<span class="id">is</span> <span class="id">a</span> <span class="id">fin_num</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.measure.html#outer_measure_construction.measure_ge0">Sr</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; [<span class="id">x</span> [<span class="id">B</span> [<span class="id">mB</span> <span class="id">AnB</span> <span class="id">muBx</span>] <span class="id">xS</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">B</span>; <span class="id">split</span> =&gt; //; <span class="id">rewrite</span> <span class="id">muBx</span> -<span class="id">Sr</span>; <span class="id">exact</span>/<span class="id">ltW</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">have</span> := <span class="id">Aoo</span> <span class="id">n</span>; <span class="id">rewrite</span> /<span class="id">mu</span>^* <span class="id">Soo</span>.<br/>
&nbsp;&nbsp;- <span class="id">suff</span> : <span class="id">lbound</span> <span class="id">S</span> 0 <span class="kwd">by</span> <span class="id">move</span>/<span class="id">lb_ereal_inf</span>; <span class="id">rewrite</span> <span class="id">Soo</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; /= <span class="id">_</span> [<span class="id">B</span> [<span class="id">mB</span> <span class="id">AnB</span>] &lt;-]; <span class="id">exact</span>: <span class="id">nneseries_ge0</span>.<br/>
<span class="id">have</span> <span class="id">muG_ge0</span> <span class="id">x</span> : 0 &lt;= (<span class="id">mu</span> \<span class="id">o</span> <span class="id">uncurry</span> <span class="id">G</span>) <span class="id">x</span> <span class="kwd">by</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#can_inj">exact</a></span>: <span class="id">measure_ge0</span>.<br/>
<span class="id">apply</span>: (@<span class="id">le_trans</span> <span class="id">_</span> <span class="id">_</span> (\<span class="id">esum_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">setT</span>) (<span class="id">mu</span> \<span class="id">o</span> <span class="id">uncurry</span> <span class="id">G</span>) <span class="id">i</span>)).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id">mu_ext</span>; <span class="id">apply</span>: <span class="id">ereal_inf_lb</span> =&gt; /=.<br/>
&nbsp;&nbsp;<span class="id">have</span> /<span class="id">card_esym</span>/<span class="id">ppcard_eqP</span>[<span class="id">f</span>] := <span class="id">card_nat2</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">uncurry</span> <span class="id">G</span> \<span class="id">o</span> <span class="id">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span> =&gt; [<span class="id">i</span>|]; <span class="id">first</span> <span class="id">exact</span>/<span class="id">measurable_uncurry</span>/(<span class="id">PG</span> (<span class="id">f</span> <span class="id">i</span>).1).1.1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: (@<span class="id">subset_trans</span> <span class="id">_</span>  (\<span class="id">bigcup_n</span> \<span class="id">bigcup_k</span> <span class="id">G</span> <span class="id">n</span> <span class="id">k</span>)) =&gt; [<span class="id">t</span> [<span class="id">i</span> <span class="id">_</span>]|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; /(<span class="id">cover_subset</span> (<span class="id">PG</span> <span class="id"><a href="mathcomp.analysis.measure.html#outer_measure_construction">i</a></span>).1) -[<span class="id">j</span> <span class="id">_</span> ?]; <span class="kwd">exists</span> <span class="id">i</span> =&gt; //; <span class="kwd">exists</span> <span class="id">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">t</span> [<span class="id">i</span> <span class="id">_</span> [<span class="id">j</span> <span class="id">_</span> <span class="id">Bijt</span>]]; <span class="kwd">exists</span> (<span class="id">f</span>^-1%<span class="id">FUN</span> (<span class="id">i</span>, <span class="id">j</span>)) =&gt; //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">invK</span> ?<span class="id">inE</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -(<span class="id">esum_pred_image</span> (<span class="id">mu</span> \<span class="id">o</span> <span class="id">uncurry</span> <span class="id">G</span>) <span class="id">_</span> <span class="id">xpredT</span>) ?[<span class="kwd">fun</span>=&gt; <span class="id">_</span>]<span class="id">set_true</span>//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">image_eq</span>.<br/>
<span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">esum</span> <span class="id">_</span> <span class="id">_</span> = \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span>) \<span class="id">sum_</span>(<span class="id">j</span> &lt;<span class="id">oo</span> ) <span class="id">mu</span> (<span class="id">G</span> <span class="id"><a href="mathcomp.analysis.measure.html#outer_measure_of_content.T">i</a></span> <span class="id">j</span>)); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">J</span> : <span class="id">nat</span> -&gt; <span class="id">set</span> (<span class="id">nat</span> * <span class="id">nat</span>) := <span class="kwd">fun</span> <span class="id">i</span> =&gt; [<span class="id"><a href="mathcomp.analysis.measure.html#outer_measure_of_content.R">set</a></span> (<span class="id">i</span>, <span class="id"><a href="mathcomp.analysis.measure.html#mu_ext0">j</a></span>) | <span class="id">j</span> <span class="kwd">in</span> <span class="id">setT</span>].<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">setT</span> = \<span class="id">bigcup_k</span> <span class="id">J</span> <span class="id">k</span>); <span class="id"><a href="mathcomp.analysis.measure.html#mu_ext_ge0">last</a></span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; -[<span class="id">a</span> <span class="id">b</span>]; <span class="id"><a href="mathcomp.analysis.measure.html#outer_measure_of_content.mu">split</a></span> =&gt; // <span class="id">_</span>; <span class="kwd">exists</span> <span class="id">a</span> =&gt; //; <span class="kwd">exists</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">esum_bigcupT</span> /=; <span class="id">last</span> 2 <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span>/<span class="id">trivIsetP</span> =&gt; <span class="id">i</span> <span class="id">j</span> <span class="id">_</span> <span class="id">_</span> <span class="id">ij</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; -[<span class="id">n</span> <span class="id">m</span>] /=; <span class="id">split</span> =&gt; //= -[] [<span class="id">_</span>] <span class="id">_</span> [&lt;-{<span class="id">n</span>} <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id"><a name="g_salgebra_measure_unique_trace.D">m</a></span>' <span class="id">_</span>] [] /<span class="id">esym</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> (<span class="id">negbTE</span> <span class="id"><a name="g_salgebra_measure_unique_trace.H">ij</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_measure_unique_trace.G">move</a></span>=&gt; /= [<span class="id">n</span> <span class="id">m</span>]; <span class="id">apply</span>: <span class="id">measure_ge0</span>; <span class="id">exact</span>: (<span class="id">cover_measurable</span> (<span class="id">PG</span> <span class="id">n</span>).1).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -(<span class="id">image_id</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_measure_unique_trace.H">nat</a></span>]) -<span class="id">fun_true</span> <span class="id">esum_pred_image</span>//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span> <span class="id">_</span>; <span class="id">exact</span>: <span class="id">esum_ge0</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">eq_eseriesr</span> =&gt; /= <span class="id"><a name="g_salgebra_measure_unique_trace.m1oo">j</a></span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -(<span class="id">esum_pred_image</span> (<span class="id">mu</span> \<span class="id">o</span> <span class="id">uncurry</span> <span class="id">G</span>) (<span class="id">pair</span> <span class="id">j</span>) <span class="id">predT</span>)//=; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; ? ? <span class="id">_</span> <span class="id">_</span>; <span class="id">exact</span>: (@<span class="id">can_inj</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_measure_unique_trace.H">_</a></span> <span class="id">snd</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">congr</span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_measure_unique_trace.m2">esum</a></span>; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; -[<span class="id">a</span> <span class="id">b</span>]; <span class="id">split</span>; <span class="id">move</span>=&gt; [<span class="id"><a href="mathcomp.analysis.measure.html#measurable">i</a></span> <span class="id">_</span> &lt;-]; <span class="kwd">exists</span> <span class="id">i</span>.<br/>
<span class="id">apply</span>: <span class="id">lee_lim</span>.<br/>
- <span class="id">apply</span>: <span class="id">is_cvg_nneseries</span> =&gt; <span class="id">n</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">nneseries_ge0</span> =&gt; <span class="id">m</span> <span class="id">_</span>; <span class="id">exact</span>: (<span class="id">muG_ge0</span> (<span class="id">n</span>, <span class="id">m</span>)).<br/>
- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">is_cvg_nneseries</span> =&gt; <span class="id">n</span> <span class="id">_</span>; <span class="id">apply</span>: <span class="id">adde_ge0</span> =&gt; //; <span class="id">exact</span>: <span class="id">mu_ext_ge0</span>.<br/>
- <span class="kwd">by</span> <span class="id">near</span>=&gt; <span class="id">n</span>; <span class="id">apply</span>: <span class="id">lee_sum</span> =&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">exact</span>: (<span class="id"><a href="mathcomp.analysis.measure.html#measureD">PG</a></span> <span class="id">i</span>).2.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">outer_measure_construction</span>.<br/>
<span class="id">Declare</span> <span class="kwd">Scope</span> <span class="id">measure_scope</span>.<br/>
<span class="id">Delimit</span> <span class="kwd">Scope</span> <span class="id">measure_scope</span> <span class="kwd">with</span> <span class="id">mu</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">mu</span> ^*" := (<span class="id">mu_ext</span> <span class="id">mu</span>) : <span class="id">measure_scope</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">measure_scope</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">outer_measure_of_content</span>.<br/>
<span class="kwd">Context</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#subIset">d</a></span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>).<br/>
<span class="kwd">Variable</span> <span class="id">mu</span> : {<span class="id">content</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}.<br/>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">isOuterMeasure.Build</span><br/>
&nbsp;&nbsp;<span class="id">R</span> <span class="id">T</span> <span class="id">_</span> (@<span class="id">mu_ext0</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">measure0</span> <span class="id">mu</span>) (<span class="id">measure_ge0</span> <span class="id">mu</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu_ext_ge0</span> (<span class="id">measure_ge0</span> <span class="id"><a href="mathcomp.analysis.measure.html#nondecreasing_cvg_mu">mu</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">le_mu_ext</span> <span class="id">mu</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu_ext_sigma_subadditive</span> (<span class="id">measure_ge0</span> <span class="id">mu</span>)).<br/>
<br/>
<span class="kwd">End</span> <span class="id">outer_measure_of_content</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a href="mathcomp.classical.boolp.html#funeqE">g_salgebra_measure_unique_trace</a></span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>).<br/>
<span class="kwd">Variables</span> (<span class="id">G</span> : <span class="id"><a href="mathcomp.analysis.measure.html#bigcupT_measurable">set</a></span> (<span class="id">set</span> <span class="id">T</span>)) (<span class="id">D</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">mD</span> : <span class="id">measurable</span> <span class="id">D</span>).<br/>
<span class="kwd">Let</span> <span class="id">H</span> := [<span class="id">set</span> <span class="id">X</span> | <span class="id">G</span> <span class="id">X</span> /\ <span class="id">X</span> `&lt;=` <span class="id">D</span>] .<br/>
<span class="kwd">Hypotheses</span> (<span class="id">Hm</span> : <span class="id">H</span> `&lt;=` <span class="id">measurable</span>) (<span class="id">setIH</span> : <span class="id">setI_closed</span> <span class="id">H</span>) (<span class="id">HD</span> : <span class="id">H</span> <span class="id">D</span>).<br/>
<span class="kwd">Variables</span> <span class="id">m1</span> <span class="id">m2</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}.<br/>
<span class="kwd">Hypotheses</span> (<span class="id">m1m2</span> : <span class="kwd">forall</span> <span class="id">A</span>, <span class="id">H</span> <span class="id">A</span> -&gt; <span class="id">m1</span> <span class="id">A</span> = <span class="id">m2</span> <span class="id">A</span>) (<span class="id">m1oo</span> : (<span class="id">m1</span> <span class="id">D</span> &lt; +<span class="id">oo</span>)%<span class="id">E</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">g_salgebra_measure_unique_trace</span> :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_measure_unique.T">X</a></span>, (&lt;&lt;<span class="id">s</span> <span class="id">D</span>, <span class="id">H</span> &gt;&gt;) <span class="id">X</span> -&gt; <span class="id">X</span> `&lt;=` <span class="id">D</span>) -&gt; <span class="kwd">forall</span> <span class="id">X</span>, &lt;&lt;<span class="id">s</span> <span class="id">D</span>, <span class="id">H</span> &gt;&gt; <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_measure_unique.T">X</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">m1</span> <span class="id">X</span> = <span class="id">m2</span> <span class="id">X</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof263')">Proof.</span></div>
<div class="proofscript" id="proof263">
<span class="id">move</span>=&gt; <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_measure_unique.G">sDHD</a></span>; <span class="id">set</span> <span class="id">E</span> := [<span class="id">set</span> <span class="id"><a name="g_salgebra_measure_unique.g_cover">A</a></span> | [/\ <span class="id">measurable</span> <span class="id">A</span>, <span class="id">m1</span> <span class="id">A</span> = <span class="id">m2</span> <span class="id">A</span> &amp; <span class="id">A</span> `&lt;=` <span class="id">D</span>] ].<br/>
<span class="id">have</span> <span class="id">HE</span> : <span class="id">H</span> `&lt;=` <span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">X</span> <span class="id">HX</span>; <span class="id">rewrite</span> /<span class="id">E</span> /=; <span class="id">split</span>; [<span class="id">exact</span>: <span class="id">Hm</span>|<span class="id">exact</span>: <span class="id">m1m2</span>|<span class="id">case</span>: <span class="id">HX</span>].<br/>
<span class="id">have</span> <span class="id">setDE</span> : <span class="id">setD_closed</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">BA</span> [<span class="id">mA</span> <span class="id">m1m2A</span> <span class="id">AD</span>] [<span class="id">mB</span> <span class="id">m1m2B</span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_measure_unique.m1">BD</a></span>]; <span class="id">split</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">measurableD</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id">measureD</span>//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">m1oo</span>)//; <span class="id">apply</span>: <span class="id">le_measure</span> =&gt; // /[!<span class="id">inE</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">setIidr</span>//= <span class="id">m1m2A</span> <span class="id">m1m2B</span> <span class="id">measureD</span>// ?<span class="id">setIidr</span>//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">m1oo</span>)//= -<span class="id">m1m2A</span>; <span class="id">apply</span>: <span class="id">le_measure</span> =&gt; // /[!<span class="id">inE</span>].<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setDE</span>; <span class="id">apply</span>: <span class="id">subIset</span>; <span class="id">left</span>.<br/>
<span class="id">have</span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_measure_unique.m1">ndE</a></span> : <span class="id">ndseq_closed</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">ndA</span> <span class="id">EA</span>; <span class="id">split</span>; <span class="id">have</span> <span class="id">mA</span> <span class="id">n</span> : <span class="id">measurable</span> (<span class="id">A</span> <span class="id">n</span>) <span class="kwd">by</span> <span class="id">have</span> [] := <span class="id">EA</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;- <span class="id">exact</span>: <span class="id">bigcupT_measurable</span>.<br/>
&nbsp;&nbsp;- <span class="id">transitivity</span> (<span class="id">lim</span> (<span class="id">m1</span> \<span class="id">o</span> <span class="id">A</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">esym</span>/<span class="id">cvg_lim</span>=&gt;//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>/(<span class="id">nondecreasing_cvg_mu</span> <span class="id">mA</span> <span class="id">_</span> <span class="id">ndA</span>)/<span class="id">bigcupT_measurable</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">transitivity</span> (<span class="id">lim</span> (<span class="id"><a href="mathcomp.analysis.measure.html#eq_measureU">m2</a></span> \<span class="id">o</span> <span class="id">A</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">congr</span> (<span class="id">lim</span> <span class="id">_</span>); <span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">n</span>; <span class="id">have</span> [] := <span class="id">EA</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.classical_sets.html#setIA">apply</a></span>/<span class="id">cvg_lim</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.classical_sets.html#setICA">exact</a></span>/(<span class="id"><a href="mathcomp.classical.classical_sets.html#setIid">nondecreasing_cvg_mu</a></span> <span class="id">mA</span> <span class="id">_</span> <span class="id">ndA</span>)/<span class="id">bigcupT_measurable</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigcup_sub</span> =&gt; <span class="id">n</span>; <span class="id">have</span> [] := <span class="id">EA</span> <span class="id">n</span>.<br/>
<span class="id">have</span> <span class="id">sDHE</span> : &lt;&lt;<span class="id">s</span> <span class="id">D</span>, <span class="id">H</span> &gt;&gt; `&lt;=` <span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">monotone_class_subset</span> =&gt; //; <span class="id">split</span> =&gt; //; [<span class="id">move</span>=&gt; <span class="id">A</span> []|<span class="id">exact</span>/<span class="id">HE</span>].<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">X</span> /<span class="id">sDHE</span>[].<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">g_salgebra_measure_unique_trace</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">g_salgebra_measure_unique</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>).<br/>
<span class="kwd">Variable</span> <span class="id">G</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">T</span>).<br/>
<span class="kwd">Hypothesis</span> <span class="id">Gm</span> : <span class="id">G</span> `&lt;=` <span class="id">measurable</span>.<br/>
<span class="kwd">Variable</span> <span class="id">g</span> : (<span class="id"><a href="mathcomp.analysis.topology.html#lim">set</a></span> <span class="id">T</span>)^<span class="id">nat</span>.<br/>
<span class="kwd">Hypotheses</span> <span class="id">Gg</span> : <span class="kwd">forall</span> <span class="id">i</span>, <span class="id">G</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#esym">g</a></span> <span class="id">i</span>).<br/>
<span class="kwd">Hypothesis</span> <span class="id">g_cover</span> : \<span class="id">bigcup_k</span> (<span class="id">g</span> <span class="id">k</span>) = <span class="id">setT</span>.<br/>
<span class="kwd">Variables</span> <span class="id">m1</span> <span class="id">m2</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">g_salgebra_measure_unique_cover</span> :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span> <span class="id">A</span>, &lt;&lt;<span class="id">s</span> <span class="id">G</span> &gt;&gt; <span class="id">A</span> -&gt; <span class="id">m1</span> (<span class="id">g</span> <span class="id">n</span> `&amp;` <span class="id">A</span>) = <span class="id">m2</span> (<span class="id">g</span> <span class="id">n</span> `&amp;` <span class="id">A</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span>, &lt;&lt;<span class="id">s</span> <span class="id">G</span> &gt;&gt; <span class="id">A</span> -&gt; <span class="id">m1</span> <span class="id">A</span> = <span class="id">m2</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof264')">Proof.</span></div>
<div class="proofscript" id="proof264">
<span class="id">pose</span> <span class="id">GT</span> := [<span class="id">the</span> <span class="id">ringOfSetsType</span> <span class="id">_</span> <span class="id">of</span> <span class="id">salgebraType</span> <span class="id">G</span>].<br/>
<span class="id">move</span>=&gt; <span class="id">sGm1m2</span>; <span class="id">pose</span> <span class="id">g</span>' <span class="id">k</span> := \<span class="id">bigcup_</span>(<span class="id">i</span> &lt; <span class="id">k</span>) <span class="id">g</span> <span class="id">i</span>.<br/>
<span class="id">have</span> <span class="id">sGm</span> := <span class="id">smallest_sub</span> (@<span class="id">sigma_algebra_measurable</span> <span class="id">_</span> <span class="id">T</span>) <span class="id">Gm</span>.<br/>
<span class="id">have</span> <span class="id">Gg</span>' <span class="id">i</span> : &lt;&lt;<span class="id">s</span> <span class="id">G</span> &gt;&gt; (<span class="id">g</span>' <span class="id"><a href="mathcomp.analysis.measure.html#measurableI">i</a></span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span>: (@<span class="id">fin_bigcup_measurable</span> <span class="id">_</span> <span class="id">GT</span>) =&gt; //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span> <span class="id">_</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measurableI">sub_sigma_algebra</a></span>.<br/>
<span class="id">have</span> <span class="id">sG</span>'<span class="id">m1m2</span> <span class="id">n</span> <span class="id">A</span> : &lt;&lt;<span class="id">s</span> <span class="id">G</span> &gt;&gt; <span class="id">A</span> -&gt; <span class="id">m1</span> (<span class="id">g</span>' <span class="id">n</span> `&amp;` <span class="id">A</span>) = <span class="id">m2</span> (<span class="id">g</span>' <span class="id">n</span> `&amp;` <span class="id">A</span>).<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">sGA</span>; <span class="id">rewrite</span> <span class="id">setI_bigcupl</span> <span class="id">bigcup_mkord</span>.<br/>
&nbsp;&nbsp;<span class="id">elim</span>: <span class="id">n</span> =&gt; [|<span class="id"><a name="g_salgebra_measure_unique.m1m2">n</a></span> <span class="id">IHn</span>] <span class="kwd">in</span> <span class="id">A</span> <span class="id">sGA</span> *; <span class="id">rewrite</span> (<span class="id">big_ord0</span>, <span class="id">big_ord_recr</span>) ?<span class="id">measure0</span>//=.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">sGgA</span> <span class="id">i</span> : &lt;&lt;<span class="id">s</span> <span class="id">G</span> &gt;&gt; (<span class="id">g</span> <span class="id">i</span> `&amp;` <span class="id">A</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: (@<span class="id">measurableI</span> <span class="id">_</span> <span class="id">GT</span>) =&gt; //; <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_measure_unique.m1">exact</a></span>: <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_measure_unique.m2">sub_sigma_algebra</a></span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">eq_measureU</span>; <span class="id">rewrite</span> ?<span class="id">sGm1m2</span> ?<span class="id">IHn</span>//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">big_distrl</span> -<span class="id">setIA</span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_measure_unique.G">big_distrl</a></span>/= <span class="id">IHn</span>// <span class="id">setICA</span> <span class="id">setIid</span>.<br/>
&nbsp;&nbsp;- <span class="id">exact</span>/<span class="id">sGm</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigsetU_measurable</span> =&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#setIidr">i</a></span> <span class="id">_</span>; <span class="id">apply</span>/<span class="id">sGm</span>.<br/>
<span class="id">have</span> <span class="id">g</span>'<span class="id">_cover</span> : \<span class="id">bigcup_k</span> (<span class="id">g</span>' <span class="id">k</span>) = <span class="id">setT</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">subTset</span> -<span class="id">g_cover</span> =&gt; <span class="id">x</span> [<span class="id">k</span> <span class="id">_</span> <span class="id">gx</span>]; <span class="kwd">exists</span> <span class="id">k</span>.+1 =&gt; //; <span class="kwd">exists</span> <span class="id">k</span> =&gt; /=.<br/>
<span class="id">have</span> <span class="id">nd_g</span>' : <span class="id">nondecreasing_seq</span> <span class="id">g</span>'.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">m</span> <span class="id">n</span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_measure_unique.G">lemn</a></span>; <span class="id">rewrite</span> <span class="id">subsetEset</span> =&gt; <span class="id">x</span> [<span class="id">k</span> <span class="id">km</span> <span class="id">gx</span>]; <span class="kwd">exists</span> <span class="id">k</span> =&gt; //=.<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">leq_trans</span> <span class="id">lemn</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">gA</span>.<br/>
<span class="id">have</span> -&gt; : <span class="id">A</span> = \<span class="id">bigcup_n</span> (<span class="id">g</span>' <span class="id">n</span> `&amp;` <span class="id">A</span>) <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setI_bigcupl</span> <span class="id">g</span>'<span class="id">_cover</span> <span class="id">setTI</span>.<br/>
<span class="id">transitivity</span> (<span class="id">lim</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#setIC">m1</a></span> (<span class="id">g</span>' <span class="id">n</span> `&amp;` <span class="id">A</span>))).<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.measure.html#preimage_class">esym</a></span>/<span class="id">cvg_lim</span> =&gt; //; <span class="id">apply</span>: <span class="id">nondecreasing_cvg_mu</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">n</span>; <span class="id">apply</span>: <span class="id">measurableI</span>; <span class="id">exact</span>/<span class="id">sGm</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigcupT_measurable</span> =&gt; <span class="id">k</span>; <span class="id">apply</span>: <span class="id">measurableI</span>; <span class="id">exact</span>/<span class="id">sGm</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; ? ? ?; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#preimage_id">subsetPset</a></span>; <span class="id"><a href="mathcomp.classical.classical_sets.html#setIidr">apply</a></span>: <span class="id">setSI</span>; <span class="id">exact</span>/<span class="id">subsetPset</span>/<span class="id">nd_g</span>'.<br/>
<span class="id">transitivity</span> (<span class="id">lim</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">m2</span> (<span class="id">g</span>' <span class="id">n</span> `&amp;` <span class="id">A</span>))).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">congr</span> (<span class="id">lim</span> <span class="id">_</span>); <span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">x</span>; <span class="id">apply</span>: <span class="id">sG</span>'<span class="id">m1m2</span> =&gt; //; <span class="id">exact</span>/<span class="id">sGm</span>.<br/>
<span class="id">apply</span>/<span class="id">cvg_lim</span> =&gt; //; <span class="id">apply</span>: <span class="id">nondecreasing_cvg_mu</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">k</span>; <span class="id">apply</span>: <span class="id">measurableI</span> =&gt; //; <span class="id">exact</span>/<span class="id">sGm</span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">bigcupT_measurable</span> =&gt; <span class="id">k</span>; <span class="id">apply</span>: <span class="id">measurableI</span>; <span class="id">exact</span>/<span class="id">sGm</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">a</span> <span class="id">b</span> <span class="id">ab</span>; <span class="id">apply</span>/<span class="id">subsetPset</span>; <span class="id">apply</span>: <span class="id">setSI</span>; <span class="id">exact</span>/<span class="id">subsetPset</span>/<span class="id">nd_g</span>'.<br/>
Qed.</div>
<br/>
<span class="kwd">Hypothesis</span> <span class="id">setIG</span> : <span class="id">setI_closed</span> <span class="id">G</span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a href="mathcomp.analysis.measure.html#g_salgebra_measure_unique">m1m2</a></span> : <span class="kwd">forall</span> <span class="id">A</span>, <span class="id">G</span> <span class="id">A</span> -&gt; <span class="id">m1</span> <span class="id">A</span> = <span class="id">m2</span> <span class="id">A</span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id">m1goo</span> : <span class="kwd">forall</span> <span class="id">k</span>, (<span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">m1</a></span> (<span class="id">g</span> <span class="id">k</span>) &lt; +<span class="id">oo</span>)%<span class="id">E</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">g_salgebra_measure_unique</span> : <span class="kwd">forall</span> <span class="id">E</span>, &lt;&lt;<span class="id">s</span> <span class="id">G</span> &gt;&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measure_unique.T">E</a></span> -&gt; <span class="id">m1</span> <span class="id">E</span> = <span class="id">m2</span> <span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof265')">Proof.</span></div>
<div class="proofscript" id="proof265">
<span class="id">pose</span> <span class="id">G_</span> <span class="id">n</span> := [<span class="id">set</span> <span class="id"><a href="mathcomp.analysis.measure.html#measure_unique.G">X</a></span> | <span class="id">G</span> <span class="id">X</span> /\ <span class="id">X</span> `&lt;=` <span class="id">g</span> <span class="id">n</span>]. <span class="comment">(*&nbsp;"trace"&nbsp;*)</span><br/>
<span class="id">have</span> <span class="id">G_E</span> <span class="id">n</span> : <span class="id">G_</span> <span class="id">n</span> = [<span class="id">set</span> <span class="id">g</span> <span class="id">n</span> `&amp;` <span class="id">C</span> | <span class="id">C</span> <span class="kwd">in</span> <span class="id">G</span>].<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">split</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">X</span> [<span class="id">GX</span> <span class="id">Xgn</span>] /=; <span class="kwd">exists</span> <span class="id">X</span> =&gt; //; <span class="id">rewrite</span> <span class="id">setIidr</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">G_</span> =&gt; <span class="id">X</span> [<span class="id">Y</span> <span class="id">GY</span> &lt;-{<span class="id">X</span>}]; <span class="id">split</span>; [<span class="id">exact</span>: <span class="id">setIG</span>|<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#measure_unique.g">subIset</a></span>; <span class="id">left</span>].<br/>
<span class="id">have</span> <span class="id">gIsGE</span> <span class="id">n</span> : [<span class="id">set</span> <span class="id">g</span> <span class="id">n</span> `&amp;` <span class="id">A</span> | <span class="id">A</span> <span class="kwd">in</span> &lt;&lt;<span class="id">s</span> <span class="id"><a href="mathcomp.analysis.measure.html#measure_unique.m1">G</a></span> &gt;&gt;] =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">s</span> <span class="id">g</span> <span class="id">n</span>, <span class="id">preimage_class</span> (<span class="id">g</span> <span class="id">n</span>) <span class="id">id</span> <span class="id">G</span> &gt;&gt;.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.measure.html#measure_unique.G">sigma_algebra_preimage_classE</a></span> <span class="id">eqEsubset</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span> /= [<span class="id">Y</span> <span class="id">sGY</span> &lt;-]; <span class="kwd">exists</span> <span class="id">Y</span> =&gt; //; <span class="id">rewrite</span> <span class="id">preimage_id</span> <span class="id">setIC</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">Y</span> <span class="id">mY</span> &lt;-] /=; <span class="kwd">exists</span> <span class="id">Y</span> =&gt; //; <span class="id">rewrite</span> <span class="id">preimage_id</span> <span class="id">setIC</span>.<br/>
<span class="id">have</span> <span class="id">preimg_gGE</span> <span class="id">n</span> : <span class="id">preimage_class</span> (<span class="id">g</span> <span class="id">n</span>) <span class="id">id</span> <span class="id">G</span> = <span class="id">G_</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span> =&gt; [<span class="id">_</span> [<span class="id">Y</span> <span class="id">GY</span> &lt;-]|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">preimage_id</span> <span class="id">G_E</span> /=; <span class="kwd">exists</span> <span class="id">Y</span> =&gt; //; <span class="id">rewrite</span> <span class="id">setIC</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">X</span> [<span class="id">GX</span> <span class="id">Xgn</span>]; <span class="kwd">exists</span> <span class="id">X</span> =&gt; //; <span class="id">rewrite</span> <span class="id">preimage_id</span> <span class="id">setIidr</span>.<br/>
<span class="id">apply</span>: <span class="id">g_salgebra_measure_unique_cover</span> =&gt; //.<br/>
<span class="id">move</span>=&gt; <span class="id">n</span> <span class="id">A</span> <span class="id">sGA</span>; <span class="id">apply</span>: (@<span class="id">g_salgebra_measure_unique_trace</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">G</span> (<span class="id">g</span> <span class="id">n</span>)) =&gt; //.<br/>
- <span class="id">exact</span>: <span class="id">Gm</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; ? [? <span class="id">_</span>]; <span class="id">exact</span>/<span class="id">Gm</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; ? ? [? ?] [? ?]; <span class="id">split</span>; [<span class="id">exact</span>: <span class="id">setIG</span>|<span class="id">apply</span>: <span class="id">subIset</span>; <span class="id">tauto</span>].<br/>
- <span class="kwd">by</span> <span class="id">split</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; ? [? ?]; <span class="id">exact</span>: <span class="id">m1m2</span>.<br/>
- <span class="id">move</span>=&gt; <span class="id">X</span>; <span class="id">rewrite</span> -/(<span class="id">G_</span> <span class="id">n</span>) -<span class="id">preimg_gGE</span> -<span class="id">gIsGE</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>=&gt; <span class="id">B</span> <span class="id">sGB</span> &lt;-{<span class="id">X</span>}; <span class="id">apply</span>: <span class="id">subIset</span>; <span class="id">left</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> -/(<span class="id">G_</span> <span class="id">n</span>) -<span class="id">preimg_gGE</span> -<span class="id">gIsGE</span>; <span class="kwd">exists</span> <span class="id"><a href="mathcomp.analysis.measure.html#measure_sigma_sub_additive">A</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">g_salgebra_measure_unique</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">measure_unique</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>).<br/>
<span class="kwd">Variables</span>  (<span class="id">G</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">T</span>)) (<span class="id">g</span> : (<span class="id">set</span> <span class="id">T</span>)^<span class="id">nat</span>).<br/>
<span class="kwd">Hypotheses</span> (<span class="id">mG</span> : <span class="id">measurable</span> = &lt;&lt;<span class="id">s</span> <span class="id">G</span> &gt;&gt;) (<span class="id">setIG</span> : <span class="id"><a name="Rmu_ext">setI_closed</a></span> <span class="id">G</span>).<br/>
<span class="kwd">Hypothesis</span> <span class="id">Gg</span> : <span class="kwd">forall</span> <span class="id">i</span>, <span class="id">G</span> (<span class="id">g</span> <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">i</a></span>).<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a href="mathcomp.analysis.measure.html#semiRingOfSetsType">g_cover</a></span> : \<span class="id">bigcup_k</span> (<span class="id">g</span> <span class="id">k</span>) = <span class="id">setT</span>.<br/>
<span class="kwd">Variables</span> <span class="id">m1</span> <span class="id">m2</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}.<br/>
<span class="kwd">Hypothesis</span> <span class="id">m1m2</span> : <span class="kwd">forall</span> <span class="id">A</span>, <span class="id">G</span> <span class="id">A</span> -&gt; <span class="id">m1</span> <span class="id">A</span> = <span class="id">m2</span> <span class="id"><a href="mathcomp.analysis.measure.html#mu_ext">A</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id">m1goo</span> : <span class="kwd">forall</span> <span class="id">k</span>, (<span class="id">m1</span> (<span class="id">g</span> <span class="id">k</span>) &lt; +<span class="id"><a href="mathcomp.analysis.ereal.html#lb_ereal_inf">oo</a></span>)%<span class="id">E</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measure_unique</span> <span class="id">A</span> : <span class="id">measurable</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf_lb">A</a></span> -&gt; <span class="id">m1</span> <span class="id">A</span> = <span class="id">m2</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof266')">Proof.</span></div>
<div class="proofscript" id="proof266">
<span class="id">move</span>=&gt; <span class="id">mA</span>; <span class="id">apply</span>: (@<span class="id">g_salgebra_measure_unique</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">G</span>); <span class="id">rewrite</span> -?<span class="id">mG</span>//.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">mG</span>; <span class="id">exact</span>: <span class="id">sub_sigma_algebra</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">measure_unique</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">measure_unique</span> {<span class="id">d</span> <span class="id">R</span> <span class="id">T</span>} <span class="id">G</span> <span class="id">g</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_mu_extE</span> <span class="id">d</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu</span> : {<span class="id">measure</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0P">set</a></span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) <span class="id">X</span> :<br/>
&nbsp;&nbsp;<span class="id">measurable</span> <span class="id">X</span> -&gt; <span class="id">mu</span>^* <span class="id">X</span> = <span class="id">mu</span> <span class="id">X</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof267')">Proof.</span></div>
<div class="proofscript" id="proof267">
<span class="id">move</span>=&gt; <span class="id">mX</span>; <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">eq_le</span>; <span class="id">apply</span>/<span class="id">andP</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">ereal_inf_lb</span>; <span class="kwd">exists</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="kwd">if</span> <span class="id">n</span> <span class="id">is</span> 0%<span class="id">N</span> <span class="kwd">then</span> <span class="id">X</span> <span class="kwd">else</span> <span class="id">set0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">split</span>=&gt; [[]// <span class="id">_</span>|<span class="id">t</span> <span class="id">Xt</span>]; <span class="kwd">exists</span> 0%<span class="id">N</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">cvg_lim</span> =&gt; //; <span class="id">rewrite</span> -<span class="id">cvg_shiftS</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">_</span> : [<span class="id">sequence</span> <span class="id">_</span>]<span class="id">_n</span> = <span class="id">cst</span> (<span class="id">mu</span> <span class="id">X</span>)); <span class="id">first</span> <span class="id">exact</span>: <span class="id">cvg_cst</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">n</span> /=; <span class="id">rewrite</span> <span class="id">big_nat_recl</span>//= <span class="id">big1</span> ?<span class="id">adde0</span>.<br/>
<span class="id">apply</span>/<span class="id">lb_ereal_inf</span> =&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">x</a></span> [<span class="id">A</span> [<span class="id">mA</span> <span class="id">XA</span>] &lt;-{<span class="id">x</span>}].<br/>
<span class="id">have</span> <span class="id">XUA</span> : <span class="id">X</span> = \<span class="id">bigcup_n</span> (<span class="id">X</span> `&amp;` <span class="id">A</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span> =&gt; [<span class="id">Xt</span>|[<span class="id">i</span> <span class="id">_</span> []//]].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">have</span> [<span class="id">i</span> <span class="id">_</span> <span class="id">Ait</span>] := <span class="id">XA</span> <span class="id">_</span> <span class="id">Xt</span>; <span class="kwd">exists</span> <span class="id">i</span>.<br/>
<span class="id">apply</span>: (@<span class="id">le_trans</span> <span class="id">_</span> <span class="id">_</span> (\<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span>) <span class="id">mu</span> (<span class="id">X</span> `&amp;` <span class="id">A</span> <span class="id">i</span>))).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">measure_sigma_sub_additive</span>//= -?<span class="id">XUA</span> =&gt; // <span class="id"><a href="mathcomp.analysis.esum.html#reindex_esum">i</a></span>; <span class="id">apply</span>: <span class="id">measurableI</span>.<br/>
<span class="id">apply</span>: <span class="id">lee_lim</span>; [<span class="id">exact</span>: <span class="id">is_cvg_nneseries</span>|<span class="id">exact</span>: <span class="id">is_cvg_nneseries</span>|].<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">nearW</span> =&gt; <span class="id">n</span>; <span class="id">apply</span>: <span class="id">lee_sum</span> =&gt; <span class="id">i</span>  <span class="id">_</span>; <span class="id">exact</span>: <span class="id">measureIr</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">Rmu_ext</span>.<br/>
<span class="kwd">Import</span> <span class="id">SetRing</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">Rmu_ext</span> <span class="id">d</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu</span> : {<span class="id">content</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) :<br/>
&nbsp;&nbsp;(<span class="id">measure</span> <span class="id">mu</span>)^* = <span class="id"><a href="mathcomp.analysis.measure.html#measurable_mu_extE">mu</a></span>^*.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof268')">Proof.</span></div>
<div class="proofscript" id="proof268">
<span class="id">apply</span>/<span class="id">funeqP</span> =&gt; /= <span class="id">X</span>; <span class="id">rewrite</span> /<span class="id">mu_ext</span>/=; <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">eq_le</span>.<br/>
<span class="id">rewrite</span> ?<span class="id">lb_ereal_inf</span>// =&gt; <span class="id">_</span> [<span class="id">F</span> [<span class="id">Fm</span> <span class="id">XS</span>] &lt;-]; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.measure.html#measure_extension.T">ereal_inf_lb</a></span>//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">F</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">split</span>=&gt; // <span class="id">i</span>; <span class="id">apply</span>: <span class="id">sub_gen_smallest</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">eq_eseriesr</span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">RmuE</span> <span class="id">_</span> (<span class="id">Fm</span> <span class="id">_</span>))).<br/>
<span class="id">pose</span> <span class="id">K</span> := [<span class="id">set</span>: <span class="id">nat</span>] `*`` <span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="id">decomp</span> (<span class="id">F</span> <span class="id">i</span>).<br/>
<span class="id">have</span> /<span class="id">ppcard_eqP</span>[<span class="id">f</span>] : (<span class="id"><a href="mathcomp.analysis.measure.html#measure_extension.mu">K</a></span> #= [<span class="id">set</span>: <span class="id">nat</span>])%<span class="id">card</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">cardMR_eq_nat</span> =&gt; // <span class="id">i</span>; <span class="id">split</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">set0P</span>; <span class="id">rewrite</span> <span class="id">decompN0</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">finite_set_countable</span> =&gt; //; <span class="id">exact</span>: <span class="id">decomp_finite_set</span>.<br/>
<span class="id">pose</span> <span class="id">g</span> <span class="id">i</span> := (<span class="id">f</span>^-1%<span class="id">FUN</span> <span class="id">i</span>).2; <span class="kwd">exists</span> <span class="id">g</span>; <span class="id">first</span> <span class="id">split</span>.<br/>
- <span class="id">move</span>=&gt; <span class="id">k</span>; <span class="id">have</span> [/= <span class="id">_</span> /<span class="id">mem_set</span>] : <span class="id">K</span> (<span class="id">f</span>^-1%<span class="id">FUN</span> <span class="id">k</span>) <span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.measure.html#le_caratheodory_measurable">apply</a></span>: <span class="id">funS</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">decomp_measurable</span>.<br/>
- <span class="id">move</span>=&gt; <span class="id">i</span> /<span class="id">XS</span> [<span class="id">k</span> <span class="id">_</span>]; <span class="id">rewrite</span> -[<span class="id">F</span> <span class="id">k</span>]<span class="id">cover_decomp</span> =&gt; -[<span class="id">D</span> /= <span class="id">DFk</span> <span class="id">Di</span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">f</span> (<span class="id">k</span>, <span class="id">D</span>)) =&gt; //; <span class="id">rewrite</span> /<span class="id">g</span> <span class="id">invK</span>// <span class="id">inE</span>.<br/>
<span class="id">rewrite</span> !<span class="id">nneseries_esum</span>//= /<span class="id"><a href="mathcomp.classical.classical_sets.html#sub_gen_smallest">measure</a></span> ?<span class="id">set_true</span>.<br/>
<span class="id">transitivity</span> (\<span class="id">esum_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">setT</span>) \<span class="id">sum_</span>(<span class="id">X0</span> \<span class="kwd">in</span> <span class="id">decomp</span> (<span class="id">F</span> <span class="id">i</span>)) <span class="id">mu</span> <span class="id">X0</span>); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">eq_esum</span> =&gt; /= <span class="id">k</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.topology.html#lim">fsbig_finite</a></span>//; <span class="id">exact</span>: <span class="id">decomp_finite_set</span>.<br/>
<span class="id">rewrite</span> -(<span class="id">eq_esum</span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">esum_fset</span> <span class="id">_</span> <span class="id">_</span>))//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; ? <span class="id">_</span>; <span class="id">exact</span>: <span class="id">decomp_finite_set</span>.<br/>
<span class="id">rewrite</span> <span class="id">esum_esum</span>//= (<span class="id">reindex_esum</span> <span class="id">K</span> <span class="id">setT</span> <span class="id">f</span>) =&gt; //=.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">eq_esum</span> =&gt; <span class="id">i</span> <span class="id">Ki</span>; <span class="id">rewrite</span> /<span class="id">g</span> <span class="id">funK</span> ?<span class="id">inE</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">Rmu_ext</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_Rmu_extE</span> <span class="id">d</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}) <span class="id">X</span> :<br/>
&nbsp;&nbsp;<span class="id">d</span>.-<span class="id">ring</span>.-<span class="id">measurable</span> <span class="id">X</span> -&gt; <span class="id">mu</span>^* <span class="id">X</span> = <span class="id">SetRing.measure</span> <span class="id">mu</span> <span class="id">X</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof269')">Proof.</span></div>
<div class="proofscript" id="proof269">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Xm</span>/=; <span class="id">rewrite</span> -<span class="id">Rmu_ext</span>/= <span class="id">measurable_mu_extE</span>. Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">measure_extension</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">semiRingOfSetsType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>).<br/>
<span class="kwd">Variable</span> <span class="id">mu</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.measure.html#mu_ext">R</a></span>}.<br/>
<span class="kwd">Let</span> <span class="id">Rmu</span> := <span class="id">SetRing.measure</span> <span class="id">mu</span>.<br/>
<span class="kwd">Notation</span> <span class="id">rT</span> := (<span class="id">SetRing.type</span> <span class="id">T</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">sub_caratheodory</span> :<br/>
&nbsp;&nbsp;(<span class="id">d</span>.-<span class="id">measurable</span>).-<span class="id"><a href="mathcomp.analysis.measure.html#outer_measure_sigma_subadditive">sigma</a></span>.-<span class="id">measurable</span> `&lt;=` <span class="id">mu</span>^*.-<span class="id">cara</span>.-<span class="id">measurable</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof270')">Proof.</span></div>
<div class="proofscript" id="proof270">
<span class="id">suff</span>: &lt;&lt;<span class="id">s</span> <span class="id">d</span>.-<span class="id">ring</span>.-<span class="id">measurable</span> &gt;&gt; `&lt;=` <span class="id">mu</span>^*.-<span class="id">cara</span>.-<span class="id"><a href="mathcomp.analysis.sequences.html#is_cvg_nneseries">measurable</a></span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">subset_trans</span>; <span class="id">apply</span>: <span class="id">sub_smallest2r</span> =&gt; //; <span class="id">exact</span>: <span class="id">sub_smallest</span>.<br/>
<span class="id">apply</span>: <span class="id">smallest_sub</span>.<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.topology.html#lim">split</a></span> =&gt; //; [<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">X</span> <span class="id">mX</span>; <span class="id">rewrite</span> <span class="id">setTD</span>; <span class="id">exact</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbK">measurableC</a></span> |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">u_</span> <span class="id">mu_</span>; <span class="id">exact</span>: <span class="id">bigcupT_measurable</span>].<br/>
<span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">mA</span>; <span class="id">apply</span> <span class="id">le_caratheodory_measurable</span> =&gt; // <span class="id">X</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leye_eq">lb_ereal_inf</a></span> =&gt; <span class="id">_</span> [<span class="id">B</span> [<span class="id">mB</span> <span class="id">XB</span>] &lt;-].<br/>
<span class="id">rewrite</span> -(<span class="id">eq_eseriesr</span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_sum">_</a></span> =&gt; <span class="id">SetRing.RmuE</span> <span class="id">_</span> (<span class="id">mB</span> <span class="id">_</span>))) =&gt; //.<br/>
<span class="id">have</span> <span class="id">RmB</span> <span class="id">i</span> : <span class="id">measurable</span> (<span class="id">B</span> <span class="id">i</span> : <span class="id">set</span> <span class="id">rT</span>) <span class="kwd">by</span> <span class="id">exact</span>: <span class="id">sub_gen_smallest</span>.<br/>
<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">set</a></span> <span class="id">BA</span> := <span class="id">eseries</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">Rmu</span> (<span class="id">B</span> <span class="id">n</span> `&amp;` <span class="id">A</span>)).<br/>
<span class="id">set</span> <span class="id">BNA</span> := <span class="id"><a href="mathcomp.analysis.measure.html#measure_extension.Rmu">eseries</a></span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">Rmu</span> (<span class="id">B</span> <span class="id">n</span> `&amp;` ~` <span class="id">A</span>)).<br/>
<span class="id">apply</span>: (@<span class="id">le_trans</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">lim</span> <span class="id">BA</span> + <span class="id">lim</span> <span class="id">BNA</span>)); [<span class="id">apply</span>: <span class="id">lee_add</span>|].<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">BA</span> = <span class="id">eseries</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">mu_ext</span> <span class="id">mu</span> (<span class="id">B</span> <span class="id">n</span> `&amp;` <span class="id">A</span>))); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#mkset">funeqE</a></span> =&gt; <span class="id">n</span>; <span class="id">apply</span>: <span class="id">eq_bigr</span> =&gt; <span class="id">k</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /= <span class="id">measurable_Rmu_extE</span> //; <span class="id">exact</span>: <span class="id">measurableI</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: (@<span class="id">le_trans</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">mu_ext</span> <span class="id">mu</span> (\<span class="id">bigcup_k</span> (<span class="id">B</span> <span class="id">k</span> `&amp;` <span class="id">A</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">le_mu_ext</span>; <span class="id">rewrite</span> -<span class="id">setI_bigcupl</span>; <span class="id">exact</span>: <span class="id">setISS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">outer_measure_sigma_subadditive</span>.<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">BNA</span> = <span class="id">eseries</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">mu_ext</span> <span class="id">mu</span> (<span class="id">B</span> <span class="id">n</span> `\` <span class="id">A</span>))); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">n</span>; <span class="id">apply</span>: <span class="id">eq_bigr</span> =&gt; <span class="id">k</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /= <span class="id">measurable_Rmu_extE</span> //; <span class="id">exact</span>: <span class="id">measurableD</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: (@<span class="id">le_trans</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDE">_</a></span> <span class="id">_</span> (<span class="id">mu_ext</span> <span class="id">mu</span> (\<span class="id">bigcup_k</span> (<span class="id">B</span> <span class="id">k</span> `\` <span class="id">A</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">le_mu_ext</span>; <span class="id">rewrite</span> -<span class="id">setI_bigcupl</span>; <span class="id">exact</span>: <span class="id">setISS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">outer_measure_sigma_subadditive</span>.<br/>
<span class="id">have</span> ? : <span class="id">cvg</span> <span class="id">BNA</span> <span class="kwd">by</span> <span class="id">exact</span>: <span class="id">is_cvg_nneseries</span>.<br/>
<span class="id">have</span> ? : <span class="id">cvg</span> <span class="id">BA</span> <span class="kwd">by</span> <span class="id">exact</span>: <span class="id">is_cvg_nneseries</span>.<br/>
<span class="id">have</span> ? : <span class="id">cvg</span> (<span class="id">eseries</span> (<span class="id">Rmu</span> \<span class="id">o</span> <span class="id">B</span>)) <span class="kwd">by</span> <span class="id">exact</span>: <span class="id">is_cvg_nneseries</span>.<br/>
<span class="id">have</span> [<span class="id">def</span>|] := <span class="id">boolP</span> (<span class="id">lim</span> <span class="id">BA</span> +? <span class="id">lim</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">BNA</a></span>); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id">adde_def</span> <span class="id"><a name="measure_extension0">negb_and</a></span> !<span class="id">negbK</span>=&gt; /<span class="id">orP</span>[/<span class="id">andP</span>[<span class="id">BAoo</span> <span class="id">BNAoo</span>]|/<span class="id">andP</span>[<span class="id">BAoo</span> <span class="id">BNAoo</span>]].<br/>
&nbsp;&nbsp;- <span class="id">suff</span> -&gt; : <span class="id">lim</span> (<span class="id">eseries</span> (<span class="id">Rmu</span> \<span class="id">o</span> <span class="id">B</span>)) = +<span class="id">oo</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">leey</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> -<span class="id">leye_eq</span> -(<span class="id">eqP</span> <span class="id">BAoo</span>); <span class="id">apply</span>/<span class="id">lee_lim</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">near</span>=&gt; <span class="id">n</span>; <span class="id">apply</span>: <span class="id">lee_sum</span> =&gt; <span class="id">m</span> <span class="id">_</span>; <span class="id">apply</span>: <span class="id">le_measure</span>; <span class="id">rewrite</span> /<span class="id">mkset</span>; <span class="kwd">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">rewrite</span> <span class="id">inE</span>; <span class="id">exact</span>: <span class="id">measurableI</span> | <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.measure.html#measure_extension">inE</a></span> | <span class="id">apply</span>: <span class="id">subIset</span>; <span class="id">left</span>].<br/>
&nbsp;&nbsp;- <span class="id">suff</span> -&gt; : <span class="id">lim</span> (<span class="id">eseries</span> (<span class="id">Rmu</span> \<span class="id">o</span> <span class="id">B</span>)) = +<span class="id">oo</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">leey</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> -<span class="id">leye_eq</span> -(<span class="id">eqP</span> <span class="id">BNAoo</span>); <span class="id">apply</span>/<span class="id">lee_lim</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">near</span>=&gt; <span class="id">n</span>; <span class="id">apply</span>: <span class="id">lee_sum</span> =&gt; <span class="id">m</span> <span class="id">_</span>; <span class="id">rewrite</span> -<span class="id">setDE</span>; <span class="id">apply</span>: <span class="id">le_measure</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id">mkset</span> ?<span class="id">inE</span>//; <span class="id">apply</span>: <span class="id">measurableD</span>.<br/>
<span class="id">rewrite</span> -<span class="id">limeD</span> // (<span class="id">_</span> : (<span class="kwd">fun</span> <span class="id"><a name="measure_extension_sigma_finite">_</a></span> =&gt; <span class="id">_</span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eseries</span> (<span class="kwd">fun</span> <span class="id">k</span> =&gt; <span class="id">Rmu</span> (<span class="id">B</span> <span class="id">k</span> `&amp;` <span class="id">A</span>) + <span class="id">Rmu</span> (<span class="id">B</span> <span class="id">k</span> `&amp;` ~` <span class="id">A</span>))); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> -<span class="id">big_split</span> /=; <span class="id">exact</span>: <span class="id">eq_bigr</span>.<br/>
<span class="id">apply</span>/<span class="id">lee_lim</span> =&gt; //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">is_cvg_nneseries</span> =&gt; // <span class="id">n</span> <span class="id">_</span>; <span class="id">exact</span>: <span class="id">adde_ge0</span>.<br/>
<span class="id">near</span>=&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measure_extension">n</a></span>; <span class="id">apply</span>: <span class="id">lee_sum</span> =&gt; <span class="id"><a href="mathcomp.analysis.measure.html#measurable_mu_extE">i</a></span> <span class="id">_</span>; <span class="id">rewrite</span> -<span class="id">measure_semi_additive2</span>.<br/>
- <span class="id">apply</span>: <span class="id">le_measure</span>; <span class="id">rewrite</span> /<span class="id">mkset</span> ?<span class="id">inE</span>//; [|<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setIUr</span> <span class="id">setUCr</span> <span class="id">setIT</span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.measure.html#measure_extension.mu">apply</a></span>: <span class="id">measurableU</span>; [<span class="id">exact</span>:<span class="id">measurableI</span>|<span class="id">rewrite</span> -<span class="id">setDE</span>; <span class="id">exact</span>:<span class="id">measurableD</span>].<br/>
- <span class="id">exact</span>: <span class="id">measurableI</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setDE</span>; <span class="id">exact</span>: <span class="id">measurableD</span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">measurableU</span>; [<span class="id">exact</span>:<span class="id">measurableI</span>|<span class="id">rewrite</span> -<span class="id">setDE</span>; <span class="id">exact</span>:<span class="id">measurableD</span>].<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setIACA</span> <span class="id">setICr</span> <span class="id">setI0</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">I</span> := [<span class="id">the</span> <span class="id">measurableType</span> <span class="id">_</span> <span class="id">of</span> <span class="id">salgebraType</span> (@<span class="id">measurable</span> <span class="id">_</span> <span class="id">T</span>)].<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">measure_extension</span> : <span class="id">set</span> <span class="id">I</span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.measure.html#measure_extension">R</a></span> := <span class="id">mu</span>^*.<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Lemma</span> <span class="id">measure_extension0</span> : <span class="id">measure_extension</span> <span class="id">set0</span> = 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof271')">Proof.</span></div>
<div class="proofscript" id="proof271">
 <span class="id">exact</span>: <span class="id">mu_ext0</span>. Qed.</div>
<br/>
<span class="id">Local</span> <span class="kwd">Lemma</span> <span class="id">measure_extension_ge0</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">I</span>) : 0 &lt;= <span class="id">measure_extension</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof272')">Proof.</span></div>
<div class="proofscript" id="proof272">
 <span class="id">exact</span>: <span class="id">mu_ext_ge0</span>. Qed.</div>
<br/>
<span class="id">Local</span> <span class="kwd">Lemma</span> <span class="id">measure_extension_semi_sigma_additive</span> :<br/>
&nbsp;&nbsp;<span class="id">semi_sigma_additive</span> <span class="id">measure_extension</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof273')">Proof.</span></div>
<div class="proofscript" id="proof273">
<span class="id">move</span>=&gt; <span class="id">F</span> <span class="id">mF</span> <span class="id">tF</span> <span class="id">mUF</span>; <span class="id">rewrite</span> /<span class="id">measure_extension</span>.<br/>
<span class="id">apply</span>: <span class="id">caratheodory_measure_sigma_additive</span> =&gt; //; <span class="id">last</span> <span class="id">exact</span>: <span class="id">sub_caratheodory</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span>; <span class="id">exact</span>: (<span class="id">sub_caratheodory</span> (<span class="id">mF</span> <span class="id">i</span>)).<br/>
Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">isMeasure.Build</span> <span class="id"><a href="mathcomp.analysis.measure.html#preimage_class">_</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">measure_extension</span><br/>
&nbsp;&nbsp;<span class="id">measure_extension0</span> <span class="id">measure_extension_ge0</span><br/>
&nbsp;&nbsp;<span class="id">measure_extension_semi_sigma_additive</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measure_extension_sigma_finite</span> : @<span class="id">sigma_finite</span> <span class="id">_</span> <span class="id">T</span> <span class="id">_</span> <span class="id">setT</span> <span class="id">mu</span> -&gt;<br/>
&nbsp;&nbsp;@<span class="id"><a name="product_lemma.T">sigma_finite</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">setT</span> <span class="id">measure_extension</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof274')">Proof.</span></div>
<div class="proofscript" id="proof274">
<span class="id">move</span>=&gt; -[<span class="id"><a name="product_lemma.T3">S</a></span> <span class="id">setTS</span> <span class="id">mS</span>]; <span class="kwd">exists</span> <span class="id">S</span> =&gt; //; <span class="id">move</span>=&gt; <span class="id">i</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">have</span> := (<span class="id">mS</span> <span class="id">i</span>).1; <span class="id">exact</span>: <span class="id">sub_sigma_algebra</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">measure_extension</span> /= <span class="id">measurable_mu_extE</span> //;<br/>
&nbsp;&nbsp;[<span class="id">exact</span>: (<span class="id">mS</span> <span class="id">i</span>).2 | <span class="id">exact</span>: (<span class="id">mS</span> <span class="id">i</span>).1].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measure_extension_unique</span> : <span class="id">sigma_finite</span> [<span class="id">set</span>: <span class="id">T</span>] <span class="id">mu</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">mu</span>' : {<span class="id">measure</span> <span class="id">set</span> <span class="id">I</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">X</span>, <span class="id">d</span>.-<span class="id">measurable</span> <span class="id">X</span> -&gt; <span class="id">mu</span> <span class="id">X</span> = <span class="id">mu</span>' <span class="id">X</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">X</span>, (<span class="id">d</span>.-<span class="id">measurable</span>).-<span class="id">sigma</span>.-<span class="id">measurable</span> <span class="id">X</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">measure_extension</span> <span class="id">X</span> = <span class="id">mu</span>' <span class="id">X</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof275')">Proof.</span></div>
<div class="proofscript" id="proof275">
<span class="id">move</span>=&gt; [<span class="id">F</span> <span class="id">TF</span> /<span class="id">all_and2</span>[<span class="id">Fm</span> <span class="id">muF</span>]] <span class="id">mu</span>' <span class="id">mu</span>'<span class="id">mu</span> <span class="id">X</span> <span class="id">mX</span>.<br/>
<span class="id">apply</span>: (@<span class="id">measure_unique</span> <span class="id">_</span> <span class="id">_</span> [<span class="id">the</span> <span class="id">measurableType</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setTI">_</a></span> <span class="id">of</span> <span class="id">I</span>] <span class="id">d</span>.-<span class="id">measurable</span> <span class="id">F</span>) =&gt; //.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">Am</span> <span class="id">Bm</span>; <span class="id">apply</span>: <span class="id">measurableI</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">Am</span>; <span class="id">rewrite</span> /= /<span class="id">measure_extension</span> <span class="id">measurable_mu_extE</span>// <span class="id">mu</span>'<span class="id">mu</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">k</span>; <span class="id">rewrite</span> /= /<span class="id">measure_extension</span> <span class="id">measurable_mu_extE</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">measure_extension</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">caratheodory_measurable_mu_ext</span> <span class="id">d</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mu</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id"><a href="mathcomp.analysis.measure.html#product_salgebra_instance.T1">bar</a></span> <span class="id">R</span>}) <span class="id">A</span> :<br/>
&nbsp;&nbsp;<span class="id">d</span>.-<span class="id">measurable</span> <span class="id">A</span> -&gt; <span class="id">mu</span>^*.-<span class="id">cara</span>.-<span class="id">measurable</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof276')">Proof.</span></div>
<div class="proofscript" id="proof276">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Am</span>; <span class="id">apply</span>: <span class="id">sub_caratheodory</span> =&gt; //; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.measure.html#sigma_algebra0">sub_sigma_algebra</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">preimage_classes</span> <span class="id">d1</span> <span class="id">d2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">T1</span> : <span class="id">measurableType</span> <span class="id">d1</span>) (<span class="id">T2</span> : <span class="id">measurableType</span> <span class="id">d2</span>) (<span class="id">T</span> : <span class="kwd">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f1</span> : <span class="id">T</span> -&gt; <span class="id">T1</span>) (<span class="id">f2</span> : <span class="id">T</span> -&gt; <span class="id"><a name="prod_salgebra_bigcup">T2</a></span>)  :=<br/>
&nbsp;&nbsp;&lt;&lt;<span class="id">s</span> <span class="id">preimage_class</span> <span class="id">setT</span> <span class="id">f1</span> <span class="id">measurable</span> `|`<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">preimage_class</span> <span class="id">setT</span> <span class="id">f2</span> <span class="id"><a href="mathcomp.analysis.measure.html#preimage_classes">measurable</a></span> &gt;&gt;.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">product_lemma</span>.<br/>
<span class="kwd">Context</span> <span class="id">d1</span> <span class="id">d2</span> (<span class="id">T1</span> : <span class="id">measurableType</span> <span class="id">d1</span>) (<span class="id">T2</span> : <span class="id"><a name="prod_salgebra_mixin">measurableType</a></span> <span class="id">d2</span>).<br/>
<span class="kwd">Variables</span> (<span class="id">T</span> : <span class="id">pointedType</span>) (<span class="id"><a href="mathcomp.analysis.measure.html#Build">f1</a></span> : <span class="id">T</span> -&gt; <span class="id">T1</span>) (<span class="id">f2</span> : <span class="id"><a href="mathcomp.analysis.measure.html#measure_prod_display">T</a></span> -&gt; <span class="id">T2</span>).<br/>
<span class="kwd">Variables</span> (<span class="id">T3</span> : <span class="kwd">Type</span>) (<span class="id">g</span> : <span class="id">T3</span> -&gt; <span class="id">T</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_classes_comp</span> : <span class="id">preimage_classes</span> (<span class="id">f1</span> \<span class="id">o</span> <span class="id">g</span>) (<span class="id">f2</span> \<span class="id">o</span> <span class="id">g</span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">preimage_class</span> <span class="id">setT</span> <span class="id">g</span> (<span class="id">preimage_classes</span> <span class="id">f1</span> <span class="id">f2</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof277')">Proof.</span></div>
<div class="proofscript" id="proof277">
<span class="id">rewrite</span> {1}/<span class="id">preimage_classes</span> -<span class="id">sigma_algebra_preimage_classE</span>; <span class="id">congr</span> (&lt;&lt;<span class="id">s</span> <span class="id">_</span> &gt;&gt;).<br/>
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">C</span>; <span class="id">split</span>.<br/>
- <span class="id">move</span>=&gt; [[<span class="id">A</span> <span class="id">mA</span> &lt;-{<span class="id">C</span>}]|[<span class="id">A</span> <span class="id">mA</span> &lt;-{<span class="id">C</span>}]].<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">f1</span> @^-1` <span class="id">A</span>) =&gt; //; <span class="id">left</span>; <span class="kwd">exists</span> <span class="id">A</span> =&gt; //; <span class="id">rewrite</span> <span class="id">setTI</span>.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">f2</span> @^-1` <span class="id">A</span>) =&gt; //; <span class="id">right</span>; <span class="kwd">exists</span> <span class="id">A</span> =&gt; //; <span class="id">rewrite</span> <span class="id">setTI</span>.<br/>
- <span class="id">move</span>=&gt; [<span class="id"><a href="mathcomp.analysis.measure.html#measurable">A</a></span> [[<span class="id">B</span> <span class="id">mB</span> &lt;-{<span class="id">A</span>} &lt;-{<span class="id">C</span>}]|[<span class="id">B</span> <span class="id">mB</span> &lt;-{<span class="id">A</span>} &lt;-{<span class="id">C</span>}]]].<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">left</span>; <span class="id">rewrite</span> !<span class="id">setTI</span>; <span class="kwd">exists</span> <span class="id">B</span> =&gt; //; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setTI</a></span>.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">right</span>; <span class="id">rewrite</span> !<span class="id">setTI</span>; <span class="kwd">exists</span> <span class="id">B</span> =&gt; //; <span class="id">rewrite</span> <span class="id">setTI</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">product_lemma</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">measure_prod_display</span> :<br/>
&nbsp;&nbsp;(<span class="id"><a href="mathcomp.analysis.measure.html#sub_sigma_algebra">measure_display</a></span> * <span class="id">measure_display</span>) -&gt; <span class="id">measure_display</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof278')">Proof.</span></div>
<div class="proofscript" id="proof278">
 <span class="id">exact</span>. Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">product_salgebra_instance</span>.<br/>
<span class="kwd">Context</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setTI">d1</a></span> <span class="id">d2</span> (<span class="id">T1</span> : <span class="id">measurableType</span> <span class="id">d1</span>) (<span class="id">T2</span> : <span class="id">measurableType</span> <span class="id">d2</span>).<br/>
<span class="kwd">Let</span> <span class="id">f1</span> := @<span class="id">fst</span> <span class="id">T1</span> <span class="id">T2</span>.<br/>
<span class="kwd">Let</span> <span class="id">f2</span> := @<span class="id">snd</span> <span class="id">T1</span> <span class="id">T2</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">prod_salgebra_set0</span> : <span class="id">preimage_classes</span> <span class="id">f1</span> <span class="id">f2</span> (<span class="id">set0</span> : <span class="id">set</span> (<span class="id">T1</span> * <span class="id">T2</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof279')">Proof.</span></div>
<div class="proofscript" id="proof279">
 <span class="id">exact</span>: <span class="id">sigma_algebra0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="mathcomp.analysis.measure.html#product_salgebra_measurableType.M2">prod_salgebra_setC</a></span> <span class="id">A</span> : <span class="id">preimage_classes</span> <span class="id">f1</span> <span class="id">f2</span> <span class="id">A</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">preimage_classes</span> <span class="id">f1</span> <span class="id">f2</span> (~` <span class="id"><a href="mathcomp.analysis.measure.html#product_salgebra_measurableType.M1xM2">A</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof280')">Proof.</span></div>
<div class="proofscript" id="proof280">
 <span class="id">exact</span>: <span class="id">sigma_algebraC</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">prod_salgebra_bigcup</span> (<span class="id">F</span> : <span class="id">_</span>^<span class="id">nat</span>) : (<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">preimage_classes</span> <span class="id">f1</span> <span class="id">f2</span> (<span class="id">F</span> <span class="id">i</span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id">preimage_classes</span> <span class="id">f1</span> <span class="id">f2</span> (\<span class="id">bigcup_i</span> (<span class="id">F</span> <span class="id">i</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof281')">Proof.</span></div>
<div class="proofscript" id="proof281">
 <span class="id">exact</span>: <span class="id">sigma_algebra_bigcup</span>. Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">prod_salgebra_mixin</span> :=<br/>
&nbsp;&nbsp;@<span class="id">isMeasurable.Build</span> (<span class="id">measure_prod_display</span> (<span class="id">d1</span>, <span class="id">d2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">T1</span> * <span class="id">T2</span>)%<span class="id">type</span> (<span class="id">Pointed.class</span> <span class="id">_</span>) (<span class="id">preimage_classes</span> <span class="id">f1</span> <span class="id">f2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">prod_salgebra_set0</span>) (<span class="id">prod_salgebra_setC</span>) (<span class="id">prod_salgebra_bigcup</span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id">product_salgebra_instance</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">p</span> .-<span class="id">prod</span>" := (<span class="id">measure_prod_display</span> <span class="id"><a href="mathcomp.analysis.measure.html#smallest_sigma_algebra">p</a></span>) : <span class="id">measure_display_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">p</span> .-<span class="id">prod</span>.-<span class="id">measurable</span>" :=<br/>
&nbsp;&nbsp;((<span class="id">p</span>.-<span class="id">prod</span>).-<span class="id">measurable</span> : <span class="id">set</span> (<span class="id">set</span> (<span class="id">_</span> * <span class="id">_</span>))) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">classical_set_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurableM</span> <span class="id">d1</span> <span class="id"><a name="product_salgebra_g_measurableTypeR">d2</a></span> (<span class="id">T1</span> : <span class="id">measurableType</span> <span class="id">d1</span>) (<span class="id">T2</span> : <span class="id">measurableType</span> <span class="id">d2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">A</span> : <span class="id">set</span> <span class="id">T1</span>) (<span class="id">B</span> : <span class="id">set</span> <span class="id">T2</span>) :<br/>
&nbsp;&nbsp;<span class="id">measurable</span> <span class="id">A</span> -&gt; <span class="id">measurable</span> <span class="id">B</span> -&gt; <span class="id">measurable</span> (<span class="id">A</span> `*` <span class="id">B</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof282')">Proof.</span></div>
<div class="proofscript" id="proof282">
<span class="id">move</span>=&gt; <span class="id">mA</span> <span class="id">mB</span>.<br/>
<span class="id">have</span> -&gt; : <span class="id">A</span> `*` <span class="id">B</span> = (<span class="id">A</span> `*` <span class="id">setT</span>) `&amp;` (<span class="id">setT</span> `*` <span class="id">B</span>) :&gt; <span class="id">set</span> (<span class="id">T1</span> * <span class="id">T2</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -{1}(<span class="id"><a href="mathcomp.analysis.measure.html#product_salgebra_g_measurableTypeR.T1">setIT</a></span> <span class="id">A</span>) -{1}(<span class="id">setTI</span> <span class="id">B</span>) <span class="id">setMI</span>.<br/>
<span class="id">rewrite</span> <span class="id">setMT</span> <span class="id">setTM</span>; <span class="id">apply</span>: <span class="id">measurableI</span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sub_sigma_algebra</span>; <span class="id">left</span>; <span class="kwd">exists</span> <span class="id">A</span> =&gt; //; <span class="id">rewrite</span> <span class="id">setTI</span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sub_sigma_algebra</span>; <span class="id">right</span>; <span class="kwd">exists</span> <span class="id">B</span> =&gt; //; <span class="id">rewrite</span> <span class="id">setTI</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">product_salgebra_measurableType</span>.<br/>
<span class="kwd">Context</span> <span class="id">d1</span> <span class="id">d2</span> (<span class="id"><a href="mathcomp.analysis.measure.html#product_salgebra_g_measurableTypeR.setTC2">T1</a></span> : <span class="id">measurableType</span> <span class="id">d1</span>) (<span class="id">T2</span> : <span class="id">measurableType</span> <span class="id">d2</span>).<br/>
<span class="kwd">Let</span> <span class="id">M1</span> := @<span class="id">measurable</span> <span class="id">_</span> <span class="id">T1</span>.<br/>
<span class="kwd">Let</span> <span class="id">M2</span> := @<span class="id">measurable</span> <span class="id">_</span> <span class="id">T2</span>.<br/>
<span class="kwd">Let</span> <span class="id">M1xM2</span> := [<span class="id">set</span> <span class="id"><a name="product_salgebra_g_measurableType">A</a></span> `*` <span class="id">B</span> | <span class="id">A</span> <span class="kwd">in</span> <span class="id">M1</span> &amp; <span class="id">B</span> <span class="kwd">in</span> <span class="id">M2</span>].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_prod_measurableType</span> :<br/>
&nbsp;&nbsp;(<span class="id"><a href="mathcomp.classical.classical_sets.html#set">d1</a></span>, <span class="id">d2</span>).-<span class="id">prod</span>.-<span class="id"><a name="product_salgebra_g_measurableType.C2">measurable</a></span> = &lt;&lt;<span class="id">s</span> <span class="id">M1xM2</span> &gt;&gt;.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof283')">Proof.</span></div>
<div class="proofscript" id="proof283">
<span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">smallest_sub</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">smallest_sigma_algebra</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">subUset</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;- <span class="id">have</span> /<span class="id">subset_trans</span> : <span class="id">preimage_class</span> <span class="id">setT</span> <span class="id">fst</span> <span class="id">M1</span> `&lt;=` <span class="id">M1xM2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">X</span> <span class="id">MX</span> &lt;-]; <span class="kwd">exists</span> <span class="id">X</span>=&gt; //; <span class="kwd">exists</span> <span class="id">setT</span>; <span class="id">rewrite</span> /<span class="id">M2</span> // <span class="id">setIC</span>//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>; <span class="id">exact</span>: <span class="id">sub_sigma_algebra</span>.<br/>
&nbsp;&nbsp;- <span class="id">have</span> /<span class="id">subset_trans</span> : <span class="id">preimage_class</span> <span class="id">setT</span> <span class="id">snd</span> <span class="id">M2</span> `&lt;=` <span class="id">M1xM2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">Y</span> <span class="id">MY</span> &lt;-]; <span class="kwd">exists</span> <span class="id">setT</span>; <span class="id">rewrite</span> /<span class="id">M1</span> //; <span class="kwd">exists</span> <span class="id">Y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>; <span class="id"><a href="mathcomp.analysis.measure.html#sub_sigma_algebra">exact</a></span>: <span class="id">sub_sigma_algebra</span>.<br/>
<span class="id">apply</span>: <span class="id">smallest_sub</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">smallest_sigma_algebra</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span> [<span class="id">A</span> <span class="id">MA</span>] [<span class="id">B</span> <span class="id">MB</span>] &lt;-; <span class="id">apply</span>: <span class="id">measurableM</span> =&gt; //; <span class="id">exact</span>: <span class="id">sub_sigma_algebra</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">product_salgebra_measurableType</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">product_salgebra_g_measurableTypeR</span>.<br/>
<span class="kwd">Context</span> <span class="id">d1</span> (<span class="id">T1</span> : <span class="id">measurableType</span> <span class="id">d1</span>) (<span class="id">T2</span> : <span class="id">pointedType</span>) (<span class="id">C2</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">T2</span>)).<br/>
<span class="kwd">Hypothesis</span> <span class="id">setTC2</span> : <span class="id">setT</span> `&lt;=` <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">C2</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_prod_g_measurableTypeR</span> :<br/>
&nbsp;&nbsp;@<span class="id">measurable</span> <span class="id">_</span> [<span class="id">the</span> <span class="id">measurableType</span> <span class="id">_</span> <span class="id">of</span> <span class="id">T1</span> * <span class="id">salgebraType</span> <span class="id">C2</span> : <span class="kwd">Type</span>]<br/>
&nbsp;&nbsp;= &lt;&lt;<span class="id">s</span> [<span class="id">set</span> <span class="id">A</span> `*` <span class="id">B</span> | <span class="id">A</span> <span class="kwd">in</span> <span class="id">measurable</span> &amp; <span class="id">B</span> <span class="kwd">in</span> <span class="id">C2</span>] &gt;&gt;.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof284')">Proof.</span></div>
<div class="proofscript" id="proof284">
<span class="id">rewrite</span> <span class="id">measurable_prod_measurableType</span> //; <span class="id">congr</span> (&lt;&lt;<span class="id">s</span> <span class="id">_</span> &gt;&gt;).<br/>
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">X</span>; <span class="id">split</span>=&gt; [[<span class="id">A</span> <span class="id">mA</span>] [<span class="id">B</span> <span class="id">mB</span>] &lt;-{<span class="id">X</span>}|[<span class="id">A</span> <span class="id">C1A</span>] [<span class="id">B</span> <span class="id">C2B</span>] &lt;-{<span class="id">X</span>}].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">A</span> =&gt; //; <span class="kwd">exists</span> <span class="id">B</span> =&gt; //; <span class="id">exact</span>: <span class="id">setTC2</span>.<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">A</span> =&gt; //; <span class="kwd">exists</span> <span class="id">B</span> =&gt; //; <span class="id">exact</span>: <span class="id">sub_sigma_algebra</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">product_salgebra_g_measurableTypeR</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="measurable_fun_prod">product_salgebra_g_measurableType</a></span>.<br/>
<span class="kwd">Variables</span> (<span class="id">T1</span> <span class="id">T2</span> : <span class="id">pointedType</span>) (<span class="id">C1</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">T1</span>)) (<span class="id">C2</span> : <span class="id">set</span> (<span class="id">set</span> <span class="id">T2</span>)).<br/>
<span class="kwd">Hypotheses</span> (<span class="id">setTC1</span> : <span class="id">setT</span> `&lt;=` <span class="id">C1</span>) (<span class="id">setTC2</span> : <span class="id">setT</span> `&lt;=` <span class="id">C2</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_prod_g_measurableType</span> :<br/>
&nbsp;&nbsp;@<span class="id">measurable</span> <span class="id">_</span> [<span class="id">the</span> <span class="id">measurableType</span> <span class="id">_</span> <span class="id">of</span> <span class="id">salgebraType</span> <span class="id">C1</span> * <span class="id">salgebraType</span> <span class="id">C2</span> : <span class="kwd">Type</span>]<br/>
&nbsp;&nbsp;= &lt;&lt;<span class="id">s</span> [<span class="id">set</span> <span class="id">A</span> `*` <span class="id">B</span> | <span class="id">A</span> <span class="kwd">in</span> <span class="id">C1</span> &amp; <span class="id">B</span> <span class="kwd">in</span> <span class="id">C2</span>] &gt;&gt;.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof285')">Proof.</span></div>
<div class="proofscript" id="proof285">
<span class="id">rewrite</span> <span class="id">measurable_prod_measurableType</span> //; <span class="id">congr</span> (&lt;&lt;<span class="id">s</span> <span class="id">_</span> &gt;&gt;).<br/>
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">X</span>; <span class="id">split</span>=&gt; [[<span class="id">A</span> <span class="id">mA</span>] [<span class="id">B</span> <span class="id">mB</span>] &lt;-{<span class="id">X</span>}|[<span class="id">A</span> <span class="id">C1A</span>] [<span class="id">B</span> <span class="id">C2B</span>] &lt;-{<span class="id">X</span>}].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">A</span>; [<span class="id">exact</span>: <span class="id">setTC1</span>|<span class="kwd">exists</span> <span class="id">B</span> =&gt; //; <span class="id">exact</span>: <span class="id">setTC2</span>].<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">A</span>; [<span class="id">exact</span>: <span class="id">sub_sigma_algebra</span>|<span class="kwd">exists</span> <span class="id">B</span> =&gt; //; <span class="id">exact</span>: <span class="id">sub_sigma_algebra</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">product_salgebra_g_measurableType</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">prod_measurable_fun</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> <span class="id">d1</span> <span class="id">d2</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">T1</span> : <span class="id">measurableType</span> <span class="id">d1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">T2</span> : <span class="id">measurableType</span> <span class="id">d2</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurableType">prod_measurable_funP</a></span> (<span class="id">h</span> : <span class="id"><a href="mathcomp.analysis.measure.html#prod_measurable_proj.T2">T</a></span> -&gt; <span class="id">T1</span> * <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">T2</a></span>) : <span class="id">measurable_fun</span> <span class="id">setT</span> <span class="id">h</span> &lt;-&gt;<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">setT</span> (<span class="id">fst</span> \<span class="id">o</span> <span class="id">h</span>) /\ <span class="id">measurable_fun</span> <span class="id">setT</span> (<span class="id">snd</span> \<span class="id">o</span> <span class="id">h</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof286')">Proof.</span></div>
<div class="proofscript" id="proof286">
<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#swap">apply</a></span>: (@<span class="id">iff_trans</span> <span class="id">_</span> (<span class="id">preimage_classes</span> (<span class="id">fst</span> \<span class="id">o</span> <span class="id">h</span>) (<span class="id">snd</span> \<span class="id">o</span> <span class="id"><a href="mathcomp.analysis.measure.html#prod_measurable_proj">h</a></span>) `&lt;=` <span class="id">measurable</span>)).<br/>
- <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fst">preimage_classes_comp</a></span>; <span class="id">split</span>=&gt; [<span class="id">mf</span> <span class="id">A</span> [<span class="id">C</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable_snd">HC</a></span> &lt;-]|<span class="id">f12</span>]; <span class="id">first</span> <span class="id">exact</span>: <span class="id">mf</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span> <span class="id">A</span> <span class="id">mA</span>; <span class="id">apply</span>: <span class="id">f12</span>; <span class="kwd">exists</span> <span class="id">A</span>.<br/>
- <span class="id">split</span> =&gt; [<span class="id">h12</span>|[<span class="id">mf1</span> <span class="id">mf2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span> =&gt; <span class="id">_</span> <span class="id">A</span> <span class="id">mA</span>; <span class="id">apply</span>: <span class="id">h12</span>; <span class="id">apply</span>: <span class="id">sub_sigma_algebra</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> [<span class="id">left</span>; <span class="kwd">exists</span> <span class="id">A</span>|<span class="id">right</span>; <span class="kwd">exists</span> <span class="id">A</span>].<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">smallest_sub</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">sigma_algebra_measurable</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">subUset</span>; <span class="id">split</span>=&gt; [|] <span class="id">A</span> [<span class="id">C</span> <span class="id">mC</span> &lt;-]; [<span class="id">exact</span>: <span class="id">mf1</span>|<span class="id">exact</span>: <span class="id">mf2</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_fun_prod</span> (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">T1</span>) (<span class="id">g</span> : <span class="id">T</span> -&gt; <span class="id">T2</span>) :<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">setT</span> <span class="id">f</span> -&gt; <span class="id">measurable_fun</span> <span class="id">setT</span> <span class="id">g</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">setT</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; (<span class="id">f</span> <span class="id">x</span>, <span class="id">g</span> <span class="id">x</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof287')">Proof.</span></div>
<div class="proofscript" id="proof287">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">mf</span> <span class="id">mg</span>; <span class="id">exact</span>/<span class="id">prod_measurable_funP</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">prod_measurable_fun</span>.<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id">renamed</span> `<span class="id">measurable_fun_prod</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">measurable_fun_pair</span> := <span class="id">measurable_fun_prod</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#setT">only</a></span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id">prod_measurable_proj</span>.<br/>
<span class="kwd">Context</span> <span class="id">d1</span> <span class="id">d2</span> (<span class="id">T1</span> : <span class="id">measurableType</span> <span class="id">d1</span>) (<span class="id">T2</span> : <span class="id">measurableType</span> <span class="id">d2</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_fst</span> : <span class="id">measurable_fun</span> [<span class="id">set</span>: <span class="id">T1</span> * <span class="id">T2</span>] <span class="id">fst</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof288')">Proof.</span></div>
<div class="proofscript" id="proof288">
<span class="kwd">by</span> <span class="id">have</span> /<span class="id">prod_measurable_funP</span>[] :=<br/>
&nbsp;&nbsp;@<span class="id">measurable_id</span> <span class="id">_</span> [<span class="id">the</span> <span class="id">measurableType</span> <span class="id">_</span> <span class="id">of</span> (<span class="id">T1</span> * <span class="id">T2</span>)%<span class="id">type</span>] <span class="id">setT</span>.<br/>
Qed.</div>
#[<span class="id">local</span>] <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">measurable_fst</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_snd</span> : <span class="id">measurable_fun</span> [<span class="id">set</span>: <span class="id">T1</span> * <span class="id">T2</span>] <span class="id">snd</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof289')">Proof.</span></div>
<div class="proofscript" id="proof289">
<span class="kwd">by</span> <span class="id">have</span> /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#pair">prod_measurable_funP</a></span>[] :=<br/>
&nbsp;&nbsp;@<span class="id">measurable_id</span> <span class="id">_</span> [<span class="id">the</span> <span class="id">measurableType</span> <span class="id">_</span> <span class="id">of</span> (<span class="id">T1</span> * <span class="id">T2</span>)%<span class="id">type</span>] <span class="id">setT</span>.<br/>
Qed.</div>
#[<span class="id">local</span>] <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">measurable_snd</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_swap</span> : <span class="id">measurable_fun</span> [<span class="id">set</span>: <span class="id">_</span>] (@<span class="id">swap</span> <span class="id">T1</span> <span class="id">T2</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof290')">Proof.</span></div>
<div class="proofscript" id="proof290">
 <span class="id">exact</span>: <span class="id">measurable_fun_prod</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">prod_measurable_proj</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">measurable_fst</span> {<span class="id">d1</span> <span class="id">d2</span> <span class="id">T1</span> <span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">T2</a></span>}.<br/>
<span class="kwd">Arguments</span> <span class="id">measurable_snd</span> {<span class="id">d1</span> <span class="id">d2</span> <span class="id">T1</span> <span class="id">T2</span>}.<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id">renamed</span> `<span class="id">measurable_fst</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">measurable_fun_fst</span> := <span class="id">measurable_fst</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id"><a href="mathcomp.analysis.measure.html#measurable_fun">renamed</a></span> `<span class="id">measurable_snd</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">measurable_fun_snd</span> := <span class="id">measurable_snd</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.3", <span class="id">note</span>="<span class="id">renamed</span> `<span class="id">measurable_swap</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id"><a name="absolute_continuity">measurable_fun_swap</a></span> := <span class="id">measurable_swap</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">measurable_fun</span> <span class="id">_</span> <span class="id">fst</span>) =&gt;<br/>
&nbsp;&nbsp;<span class="id">solve</span> [<span class="id">apply</span>: <span class="id">measurable_fst</span>] : <span class="id">core</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">measurable_fun</span> <span class="id">_</span> <span class="id">snd</span>) =&gt;<br/>
&nbsp;&nbsp;<span class="id">solve</span> [<span class="id">apply</span>: <span class="id">measurable_snd</span>] : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_fun_if_pair</span> <span class="id">d</span> <span class="id">d</span>' (<span class="id">X</span> : <span class="id">measurableType</span> <span class="id">d</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Y</span> : <span class="id">measurableType</span> <span class="id">d</span>') (<span class="id">x</span> <span class="id">y</span> : <span class="id">X</span> -&gt; <span class="id">Y</span>) :<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">setT</span> <span class="id">x</span> -&gt; <span class="id">measurable_fun</span> <span class="id">setT</span> <span class="id">y</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">measurable_fun</span> <span class="id">setT</span> (<span class="kwd">fun</span> <span class="id">tb</span> =&gt; <span class="kwd">if</span> <span class="id">tb</span>.2 <span class="kwd">then</span> <span class="id">x</span> <span class="id">tb</span>.1 <span class="kwd">else</span> <span class="id">y</span> <span class="id">tb</span>.1).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof291')">Proof.</span></div>
<div class="proofscript" id="proof291">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">mx</span> <span class="id">my</span>; <span class="id">apply</span>: <span class="id">measurable_fun_ifT</span> =&gt; //=; <span class="id">exact</span>: <span class="id">measurableT_comp</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">partial_measurable_fun</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> <span class="id">d1</span> <span class="id">d2</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">T1</span> : <span class="id">measurableType</span> <span class="id">d1</span>)<br/>
&nbsp;&nbsp;(<span class="id">T2</span> : <span class="id">measurableType</span> <span class="id">d2</span>).<br/>
<span class="kwd">Variable</span> <span class="id">f</span> : <span class="id">T1</span> * <span class="id">T2</span> -&gt; <span class="id">T</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_pair1</span> (<span class="id">x</span> : <span class="id">T1</span>) : <span class="id">measurable_fun</span> [<span class="id">set</span>: <span class="id">T2</span>] (<span class="id">pair</span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof292')">Proof.</span></div>
<div class="proofscript" id="proof292">
<span class="id">have</span> <span class="id">m1pairx</span> : <span class="id">measurable_fun</span> [<span class="id">set</span>: <span class="id">T2</span>] (<span class="id">fst</span> \<span class="id">o</span> <span class="id">pair</span> <span class="id">x</span>) <span class="kwd">by</span> <span class="id">exact</span>/<span class="id">measurable_cst</span>.<br/>
<span class="id">have</span> <span class="id">m2pairx</span> : <span class="id">measurable_fun</span> [<span class="id">set</span>: <span class="id">T2</span>] (<span class="id">snd</span> \<span class="id">o</span> <span class="id">pair</span> <span class="id">x</span>) <span class="kwd">by</span> <span class="id">exact</span>/<span class="id">measurable_id</span>.<br/>
<span class="id">exact</span>/(<span class="id">prod_measurable_funP</span> <span class="id">_</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">measurable_pair2</span> (<span class="id">y</span> : <span class="id">T2</span>) : <span class="id">measurable_fun</span> [<span class="id">set</span>: <span class="id">T1</span>] (<span class="id">pair</span>^~ <span class="id">y</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof293')">Proof.</span></div>
<div class="proofscript" id="proof293">
<span class="id">have</span> <span class="id">m1pairy</span> : <span class="id">measurable_fun</span> [<span class="id">set</span>: <span class="id">T1</span>] (<span class="id">fst</span> \<span class="id">o</span> <span class="id">pair</span>^~<span class="id">y</span>) <span class="kwd">by</span> <span class="id">exact</span>/<span class="id">measurable_id</span>.<br/>
<span class="id">have</span> <span class="id">m2pairy</span> : <span class="id">measurable_fun</span> [<span class="id">set</span>: <span class="id">T1</span>] (<span class="id">snd</span> \<span class="id">o</span> <span class="id">pair</span>^~<span class="id">y</span>) <span class="kwd">by</span> <span class="id">exact</span>/<span class="id">measurable_cst</span>.<br/>
<span class="id">exact</span>/(<span class="id">prod_measurable_funP</span> <span class="id">_</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">partial_measurable_fun</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">measurable_fun</span> <span class="id">_</span> (<span class="id">pair</span> <span class="id">_</span>)) =&gt;<br/>
&nbsp;&nbsp;<span class="id">solve</span> [<span class="id">apply</span>: <span class="id">measurable_pair1</span>] : <span class="id">core</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">measurable_fun</span> <span class="id">_</span> (<span class="id">pair</span>^~ <span class="id">_</span>)) =&gt;<br/>
&nbsp;&nbsp;<span class="id">solve</span> [<span class="id">apply</span>: <span class="id">measurable_pair2</span>] : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">absolute_continuity</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> (<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>) (<span class="id">R</span> : <span class="id">realType</span>).<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">m</span> : <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">measure_dominates</span> <span class="id">m1</span> <span class="id">m2</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">A</span>, <span class="id">measurable</span> <span class="id">A</span> -&gt; <span class="id">m2</span> <span class="id">A</span> = 0 -&gt; <span class="id">m1</span> <span class="id">A</span> = 0.<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> "<span class="id">m1</span> `&lt;&lt; <span class="id">m2</span>" := (<span class="id">measure_dominates</span> <span class="id">m1</span> <span class="id">m2</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">measure_dominates_trans</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">m3</span> : <span class="id">m1</span> `&lt;&lt; <span class="id">m2</span> -&gt; <span class="id">m2</span> `&lt;&lt; <span class="id">m3</span> -&gt; <span class="id">m1</span> `&lt;&lt; <span class="id">m3</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof294')">Proof.</span></div>
<div class="proofscript" id="proof294">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">m12</span> <span class="id">m23</span> <span class="id">A</span> <span class="id">mA</span> /<span class="id">m23</span>-/(<span class="id">_</span> <span class="id">mA</span>) /<span class="id">m12</span>; <span class="id">exact</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">absolute_continuity</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">m1</span> `&lt;&lt; <span class="id">m2</span>" := (<span class="id">measure_dominates</span> <span class="id">m1</span> <span class="id">m2</span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id">essential_supremum</span>.<br/>
<span class="kwd">Context</span> <span class="id">d</span> {<span class="id">T</span> : <span class="id">measurableType</span> <span class="id">d</span>} {<span class="id">R</span> : <span class="id">realType</span>}.<br/>
<span class="kwd">Variable</span> <span class="id">mu</span> : {<span class="id">measure</span> <span class="id">set</span> <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>}.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">R</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">ess_sup</span> <span class="id">f</span> :=<br/>
&nbsp;&nbsp;<span class="id">ereal_inf</span> (<span class="id">EFin</span> @` [<span class="id">set</span> <span class="id">r</span> | <span class="id">mu</span> (<span class="id">f</span> @^-1` `]<span class="id">r</span>, +<span class="id">oo</span>[) = 0]).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">ess_sup_ge0</span> <span class="id">f</span> : 0 &lt; <span class="id">mu</span> [<span class="id">set</span>: <span class="id">T</span>] -&gt; (<span class="kwd">forall</span> <span class="id">t</span>, 0 &lt;= <span class="id">f</span> <span class="id">t</span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;0 &lt;= <span class="id">ess_sup</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof295')">Proof.</span></div>
<div class="proofscript" id="proof295">
<span class="id">move</span>=&gt; <span class="id">muT</span> <span class="id">f0</span>; <span class="id">apply</span>: <span class="id">lb_ereal_inf</span> =&gt; <span class="id">_</span> /= [<span class="id">r</span> /<span class="id">eqP</span> <span class="id">rf</span> &lt;-]; <span class="id">rewrite</span> <span class="id">leNgt</span>.<br/>
<span class="id">apply</span>/<span class="id">negP</span> =&gt; <span class="id">r0</span>; <span class="id">apply</span>/<span class="id">negP</span> : <span class="id">rf</span>; <span class="id">rewrite</span> <span class="id">gt_eqF</span>// (<span class="id">_</span> : <span class="id">_</span> @^-1` <span class="id">_</span> = <span class="id">setT</span>)//.<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span> =&gt; // <span class="id">x</span> <span class="id">_</span> /=; <span class="id">rewrite</span> <span class="id">in_itv</span>/= (<span class="id">lt_le_trans</span> <span class="id">_</span> (<span class="id">f0</span> <span class="id">x</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">essential_supremum</span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/tree/yoshihiro503%40generate_index">a fork of coq2html</a></div>
</body>
</html>
