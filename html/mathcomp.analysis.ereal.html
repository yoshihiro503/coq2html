
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module mathcomp.analysis.ereal</title>
<meta name="description" content="Documentation of Coq module mathcomp.analysis.ereal" />
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
  <link rel="stylesheet" href="../css/texmath.css">
  <script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
  <script src="../texmath.js"></script>

<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module mathcomp.analysis.ereal</h1>
<div class="coq">
<br/>
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">all_ssreflect</span> <span class="id">all_algebra</span> <span class="id">finmap</span>.<br/>
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="mathcomp.classical.mathcomp_extra.html">mathcomp_extra</a></span> <span class="id"><a href="mathcomp.classical.boolp.html">boolp</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html">classical_sets</a></span> <span class="id"><a href="mathcomp.classical.functions.html">functions</a></span>.<br/>
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="mathcomp.classical.fsbigop.html">fsbigop</a></span> <span class="id"><a href="mathcomp.classical.cardinality.html">cardinality</a></span> <span class="id"><a href="mathcomp.classical.set_interval.html">set_interval</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="mathcomp.analysis.reals.html">reals</a></span> <span class="id"><a href="mathcomp.analysis.signed.html">signed</a></span> <span class="id"><a href="mathcomp.analysis.topology.html">topology</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Export</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html">constructive_ereal</a></span>.<br/>
<br/>
<pre>
(******************************************************************************)
(*                   Extended real numbers, classical part                    *)
(*                                                                            *)
(* This is an addition to the file constructive_ereal.v with classical logic  *)
(* elements.                                                                  *)
(*                                                                            *)
(*  (\sum_(i \in A) f i)%E == finitely supported sum, see fsbigop.v           *)
(*                                                                            *)
(*             ereal_sup E == supremum of E                                   *)
(*             ereal_inf E == infimum of E                                    *)
(*  ereal_supremums_neq0 S == S has a supremum                                *)
(*                                                                            *)
(* Topology of extended real numbers:                                         *)
(*        ereal_topologicalType R == topology for extended real numbers over  *)
(*                                   R, a realFieldType                       *)
(*       ereal_pseudoMetricType R == pseudometric space for extended reals    *)
(*                                   over R where is a realFieldType; the     *)
(*                                   distance between x and y is defined by   *)
(*                                   `|contract x - contract y|               *)
(*                                                                            *)
(* Filters:                                                                   *)
(*                  ereal_dnbhs x == filter on extended real numbers that     *)
(*                                   corresponds to the deleted neighborhood  *)
(*                                   x^' if x is a real number and to         *)
(*                                   predicates that are eventually true if x *)
(*                                   is +oo/-oo.                              *)
(*                   ereal_nbhs x == same as ereal_dnbhs where dnbhs is       *)
(*                                   replaced with nbhs.                      *)
(*                ereal_loc_seq x == sequence that converges to x in the set  *)
(*                                   of extended real numbers.                *)
(*                                                                            *)
(******************************************************************************)</pre>
<br/>
<span class="kwd">Set</span> <span class="kwd">Implicit</span> <span class="kwd">Arguments</span>.<br/>
<span class="id">Unset</span> <span class="id">Strict</span> <span class="kwd">Implicit</span>.<br/>
<span class="id">Unset</span> <span class="id">Printing</span> <span class="kwd">Implicit</span> <span class="id">Defensive</span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id">Order.TTheory</span> <span class="id">GRing.Theory</span> <span class="id">Num.Theory</span>.<br/>
<span class="kwd">Import</span> <span class="id"><a href="mathcomp.analysis.topology.html#numFieldTopology.Exports">numFieldTopology.Exports</a></span>.<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ring_scope</span>.<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">classical_set_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="EFin_bigcup">EFin_bigcup</a></span> <span class="id">T</span> (<span class="id">F</span> : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> -&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFin">EFin</a></span> @` (\<span class="id">bigcup_i</span> <span class="id">F</span> <span class="id">i</span>) = \<span class="id">bigcup_i</span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFin">EFin</a></span> @` <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#eqEsubset">eqEsubset</a></span>; <span class="id">split</span> =&gt; [<span class="id">_</span> [<span class="id">r</span> [<span class="id">n</span> <span class="id">_</span> <span class="id">Fnr</span> &lt;-]]|]; <span class="id">first</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">n</span> =&gt; //; <span class="kwd">exists</span> <span class="id">r</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> [<span class="id">n</span> <span class="id">_</span> [<span class="id">r</span> <span class="id">Fnr</span> &lt;- /=]]; <span class="kwd">exists</span> <span class="id">r</span> =&gt; //; <span class="kwd">exists</span> <span class="id">n</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="EFin_setC">EFin_setC</a></span> <span class="id">T</span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFin">EFin</a></span> @` (~` <span class="id">A</span>) = (~` (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFin">EFin</a></span> @` <span class="id">A</span>)) `\` [<span class="id">set</span> -<span class="id">oo</span>; +<span class="id">oo</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#eqEsubset">eqEsubset</a></span>; <span class="id">split</span> =&gt; [<span class="id">_</span> [<span class="id">r</span> <span class="id">Ar</span> &lt;-]|[<span class="id">r</span> | |]].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">split</span> =&gt; [|[]//]; <span class="id">apply</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#contra_not">contra_not</a></span> <span class="id">Ar</span> =&gt; -[? ? [] &lt;-].<br/>
- <span class="id">move</span>=&gt; [<span class="id">Ar</span> <span class="id">_</span>]; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#not_exists2P">not_exists2P</a></span>; <span class="id">apply</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#contra_not">contra_not</a></span> <span class="id">Ar</span> =&gt; <span class="id">h</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">r</span> =&gt; //; <span class="id">have</span> [|//] := <span class="id">h</span> <span class="id">r</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.boolp.html#contrapT">contrapT</a></span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; -[<span class="id">_</span>] /<span class="id"><a href="mathcomp.classical.boolp.html#not_orP">not_orP</a></span>[<span class="id">_</span> /=].<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; -[<span class="id">_</span>] /<span class="id"><a href="mathcomp.classical.boolp.html#not_orP">not_orP</a></span>[/=].<br/>
Qed.</div>
<br/>
<span class="id">Local</span> <span class="kwd">Close</span> <span class="kwd">Scope</span> <span class="id">classical_set_scope</span>.<br/>
<br/>
<span class="kwd">Notation</span> "\<span class="id">sum_</span> ( <span class="id">i</span> '\<span class="kwd">in</span>' <span class="id">A</span> ) <span class="id">F</span>" := (\<span class="id">big</span>[+%<span class="id">dE</span>/0%<span class="id">E</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">A</span>) <span class="id">F</span>%<span class="id">dE</span>) :<br/>
&nbsp;&nbsp;<span class="id">ereal_dual_scope</span>.<br/>
<span class="kwd">Notation</span> "\<span class="id">sum_</span> ( <span class="id">i</span> '\<span class="kwd">in</span>' <span class="id">A</span> ) <span class="id">F</span>" := (\<span class="id">big</span>[+%<span class="id">E</span>/0%<span class="id">E</span>]<span class="id">_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">A</span>) <span class="id">F</span>%<span class="id">E</span>) :<br/>
&nbsp;&nbsp;<span class="id">ereal_scope</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="ERealArith">ERealArith</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">R</span> : <span class="id">numDomainType</span>}.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">x</span> <span class="id">y</span> <span class="id">z</span> : \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArith.R">R</a></span>.<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">classical_set_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="preimage_abse_pinfty">preimage_abse_pinfty</a></span> : @<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#abse">abse</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArith.R">R</a></span> @^-1` [<span class="id">set</span> +<span class="id">oo</span>] = [<span class="id">set</span> -<span class="id">oo</span>; +<span class="id">oo</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; <span class="id">y</span>; <span class="id">split</span> ; <span class="id">move</span>: <span class="id">y</span> =&gt; [<span class="id">y</span>//| |]//=; [<span class="id">right</span> | <span class="id">left</span> | <span class="id">case</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="preimage_abse_ninfty">preimage_abse_ninfty</a></span> : (@<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#abse">abse</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArith.R">R</a></span> @^-1` [<span class="id">set</span> -<span class="id">oo</span>])%<span class="id">classic</span> = <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; <span class="id">t</span>; <span class="id">split</span> =&gt; //=; <span class="id">apply</span>/<span class="id">eqP</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">gt_eqF</span>// (<span class="id">lt_le_trans</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#abse_ge0">abse_ge0</a></span> <span class="id">t</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="compreDr">compreDr</a></span> <span class="id">T</span> (<span class="id">h</span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArith.R">R</a></span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArith.R">R</a></span>) (<span class="id">f</span> <span class="id">g</span> : <span class="id">T</span> -&gt; <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArith.R">R</a></span>) :<br/>
&nbsp;&nbsp;{<span class="id">morph</span> <span class="id">h</span> : <span class="id">x</span> <span class="id">y</span> / (<span class="id">x</span> + <span class="id">y</span>)%<span class="id">R</span> &gt;-&gt; (<span class="id">x</span> + <span class="id">y</span>)%<span class="id">E</span>} -&gt;<br/>
&nbsp;&nbsp;<span class="id">h</span> \<span class="id">o</span> (<span class="id">f</span> \+ <span class="id">g</span>)%<span class="id">R</span> = ((<span class="id">h</span> \<span class="id">o</span> <span class="id">f</span>) \+ (<span class="id">h</span> \<span class="id">o</span> <span class="id">g</span>))%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">mh</span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">t</span> /=; <span class="id">rewrite</span> <span class="id">mh</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="compreN">compreN</a></span> <span class="id">T</span> (<span class="id">h</span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArith.R">R</a></span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArith.R">R</a></span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArith.R">R</a></span>) :<br/>
&nbsp;&nbsp;{<span class="id">morph</span> <span class="id">h</span> : <span class="id">x</span> / (- <span class="id">x</span>)%<span class="id">R</span> &gt;-&gt; (- <span class="id">x</span>)%<span class="id">E</span>} -&gt;<br/>
&nbsp;&nbsp;<span class="id">h</span> \<span class="id">o</span> (\- <span class="id">f</span>)%<span class="id">R</span> = \- (<span class="id">h</span> \<span class="id">o</span> <span class="id">f</span>)%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">mh</span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">t</span> /=; <span class="id">rewrite</span> <span class="id">mh</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="compreBr">compreBr</a></span> <span class="id">T</span> (<span class="id">h</span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArith.R">R</a></span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArith.R">R</a></span>) (<span class="id">f</span> <span class="id">g</span> : <span class="id">T</span> -&gt; <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArith.R">R</a></span>) :<br/>
&nbsp;&nbsp;{<span class="id">morph</span> <span class="id">h</span> : <span class="id">x</span> <span class="id">y</span> / (<span class="id">x</span> - <span class="id">y</span>)%<span class="id">R</span> &gt;-&gt; (<span class="id">x</span> - <span class="id">y</span>)%<span class="id">E</span>} -&gt;<br/>
&nbsp;&nbsp;<span class="id">h</span> \<span class="id">o</span> (<span class="id">f</span> \- <span class="id">g</span>)%<span class="id">R</span> = ((<span class="id">h</span> \<span class="id">o</span> <span class="id">f</span>) \- (<span class="id">h</span> \<span class="id">o</span> <span class="id">g</span>))%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">mh</span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">t</span> /=; <span class="id">rewrite</span> <span class="id">mh</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="compre_scale">compre_scale</a></span> <span class="id">T</span> (<span class="id">h</span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArith.R">R</a></span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArith.R">R</a></span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArith.R">R</a></span>) <span class="id">k</span> :<br/>
&nbsp;&nbsp;{<span class="id">morph</span> <span class="id">h</span> : <span class="id">x</span> <span class="id">y</span> / (<span class="id">x</span> * <span class="id">y</span>)%<span class="id">R</span> &gt;-&gt; (<span class="id">x</span> * <span class="id">y</span>)%<span class="id">E</span>} -&gt;<br/>
&nbsp;&nbsp;<span class="id">h</span> \<span class="id">o</span> (<span class="id">k</span> \<span class="id">o</span>* <span class="id">f</span>) = (<span class="kwd">fun</span> <span class="id">t</span> =&gt; <span class="id">h</span> <span class="id">k</span> * <span class="id">h</span> (<span class="id">f</span> <span class="id">t</span>))%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">mf</span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">t</span> /=; <span class="id">rewrite</span> <span class="id">mf</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#muleC">muleC</a></span>. Qed.</div>
<br/>
<span class="id">Local</span> <span class="kwd">Close</span> <span class="kwd">Scope</span> <span class="id">classical_set_scope</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArith">ERealArith</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="ERealArithTh_numDomainType">ERealArithTh_numDomainType</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">R</span> : <span class="id">numDomainType</span>}.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">x</span> <span class="id">y</span> <span class="id">z</span> : \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArithTh_numDomainType.R">R</a></span>) (<span class="id">r</span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArithTh_numDomainType.R">R</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="range_oppe">range_oppe</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#range">range</a></span> -%<span class="id">E</span> = [<span class="id">set</span>: \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArithTh_numDomainType.R">R</a></span>]%<span class="id">classic</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">seteqP</a></span>; <span class="id">split</span> =&gt; [//|<span class="id">x</span>] <span class="id">_</span>; <span class="kwd">exists</span> (- <span class="id">x</span>); <span class="id">rewrite</span> ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="oppe_subset">oppe_subset</a></span> (<span class="id">A</span> <span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (\<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArithTh_numDomainType.R">R</a></span>)) :<br/>
&nbsp;&nbsp;((<span class="id">A</span> `&lt;=` <span class="id">B</span>) &lt;-&gt; (-%<span class="id">E</span> @` <span class="id">A</span> `&lt;=` -%<span class="id">E</span> @` <span class="id">B</span>))%<span class="id">classic</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
<span class="id">split</span>=&gt; [<span class="id">AB</span> <span class="id">_</span> [] <span class="id">x</span> ? &lt;-|<span class="id">AB</span> <span class="id">x</span> <span class="id">Ax</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">x</span> =&gt; //; <span class="id">exact</span>: <span class="id">AB</span>.<br/>
<span class="id">have</span> /<span class="id">AB</span>[<span class="id">y</span> <span class="id">By</span>] : ((-%<span class="id">E</span> @` <span class="id">A</span>) (- <span class="id">x</span>))%<span class="id">classic</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">x</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#eqe_oppP">eqe_oppP</a></span> =&gt; &lt;-.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsume_ge0">fsume_ge0</a></span> (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArithTh_numDomainType.R">R</a></span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; 0 &lt;= <span class="id">F</span> <span class="id">i</span>) -&gt; 0 &lt;= \<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
<span class="id">move</span>=&gt; <span class="id">PF</span>; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP</a></span>; <span class="id">rewrite</span> ?<span class="id">big_nil</span>// =&gt; <span class="id">X</span> <span class="id">XP</span> <span class="id">F0</span> <span class="id">_</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big_seq_cond</span> <span class="id">big_mkcondr</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#sume_ge0">sume_ge0</a></span>// =&gt; <span class="id">i</span> /<span class="id">XP</span>/<span class="id">PF</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsume_le0">fsume_le0</a></span> (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArithTh_numDomainType.R">R</a></span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">t</span>, <span class="id">P</span> <span class="id">t</span> -&gt; <span class="id">F</span> <span class="id">t</span> &lt;= 0) -&gt; \<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> &lt;= 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
<span class="id">move</span>=&gt; <span class="id">PF</span>; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP</a></span>; <span class="id">rewrite</span> ?<span class="id">big_nil</span>// =&gt; <span class="id">X</span> <span class="id">XP</span> <span class="id">F0</span> <span class="id">_</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big_seq_cond</span> <span class="id">big_mkcondr</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#sume_le0">sume_le0</a></span>// =&gt; <span class="id">i</span> /<span class="id">XP</span>/<span class="id">PF</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsumEFin">fsumEFin</a></span> (<span class="id">I</span> : <span class="id">choiceType</span>) <span class="id">A</span> (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArithTh_numDomainType.R">R</a></span>) : <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">A</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">A</span>) (<span class="id">F</span> <span class="id">i</span>)%:<span class="id">E</span> = (\<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">A</span>) <span class="id">F</span> <span class="id">i</span>)%:<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">fs</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_finite">fsbig_finite</a></span>//= <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#sumEFin">sumEFin</a></span> -<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_finite">fsbig_finite</a></span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArithTh_numDomainType">ERealArithTh_numDomainType</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="ERealArithTh_realDomainType">ERealArithTh_realDomainType</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">R</span> : <span class="id">realDomainType</span>}.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">x</span> <span class="id">y</span> <span class="id">z</span> <span class="id">u</span> <span class="id">a</span> <span class="id">b</span> : \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArithTh_realDomainType.R">R</a></span>) (<span class="id">r</span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArithTh_realDomainType.R">R</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="le_er_map_in">le_er_map_in</a></span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArithTh_realDomainType.R">R</a></span>) (<span class="id">f</span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArithTh_realDomainType.R">R</a></span> -&gt; <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArithTh_realDomainType.R">R</a></span>) :<br/>
&nbsp;&nbsp;{<span class="kwd">in</span> <span class="id">A</span> &amp;, {<span class="id">homo</span> <span class="id">f</span> : <span class="id">x</span> <span class="id">y</span> / (<span class="id">x</span> &lt;= <span class="id">y</span>)%<span class="id">O</span>}} -&gt;<br/>
&nbsp;&nbsp;{<span class="kwd">in</span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFin">EFin</a></span> @` <span class="id">A</span>)%<span class="id">classic</span> &amp;, {<span class="id">homo</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#er_map">er_map</a></span> <span class="id">f</span> : <span class="id">x</span> <span class="id">y</span> / (<span class="id">x</span> &lt;= <span class="id">y</span>)%<span class="id">E</span>}}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
<span class="id">move</span>=&gt; <span class="id">h</span> <span class="id">x</span> <span class="id">y</span>; <span class="id">rewrite</span> !<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>/= =&gt; -[<span class="id">r</span> <span class="id">Ar</span> &lt;-{<span class="id">x</span>}] [<span class="id">s</span> <span class="id">As</span> &lt;-{<span class="id">y</span>}].<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span>/= =&gt; /<span class="id">h</span>; <span class="id">apply</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsume_gt0">fsume_gt0</a></span> (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArithTh_realDomainType.R">R</a></span>) :<br/>
&nbsp;&nbsp;0 &lt; \<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> -&gt; <span class="kwd">exists2</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> &amp; 0 &lt; <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
<span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.boolp.html#contraPP">contraPP</a></span> =&gt; /<span class="id"><a href="mathcomp.classical.boolp.html#forall2NP">forall2NP</a></span> <span class="id">xNPF</span>; <span class="id">rewrite</span> <span class="id">le_gtF</span>// <span class="id"><a href="mathcomp.analysis.ereal.html#fsume_le0">fsume_le0</a></span>// =&gt; <span class="id">i</span> <span class="id">Pi</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>: (<span class="id">xNPF</span> <span class="id">i</span>) =&gt; // /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">negP</a></span>; <span class="id">case</span>: <span class="id">ltP</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsume_lt0">fsume_lt0</a></span> (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArithTh_realDomainType.R">R</a></span>) :<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> &lt; 0 -&gt; <span class="kwd">exists2</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> &amp; <span class="id">F</span> <span class="id">i</span> &lt; 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
<span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.boolp.html#contraPP">contraPP</a></span> =&gt; /<span class="id"><a href="mathcomp.classical.boolp.html#forall2NP">forall2NP</a></span> <span class="id">xNPF</span>; <span class="id">rewrite</span> <span class="id">le_gtF</span>// <span class="id"><a href="mathcomp.analysis.ereal.html#fsume_ge0">fsume_ge0</a></span>// =&gt; <span class="id">i</span> <span class="id">Pi</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>: (<span class="id">xNPF</span> <span class="id">i</span>) =&gt; // /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">negP</a></span>; <span class="id">case</span>: <span class="id">ltP</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pfsume_eq0">pfsume_eq0</a></span> (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArithTh_realDomainType.R">R</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">P</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; 0 &lt;= <span class="id">F</span> <span class="id">i</span>) -&gt;<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> = 0 -&gt; <span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id">F</span> <span class="id">i</span> = 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
<span class="id">move</span>=&gt; <span class="id">Pfin</span> <span class="id">F0</span> /<span class="id">eqP</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.boolp.html#contraTP">contraTP</a></span> =&gt; /<span class="id"><a href="mathcomp.classical.boolp.html#existsPNP">existsPNP</a></span>[<span class="id">i</span> <span class="id">Pi</span> /<span class="id">eqP</span> <span class="id">Fi0</span>].<br/>
<span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigD1">fsbigD1</a></span> <span class="id">i</span>)//= <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#padde_eq0">padde_eq0</a></span> ?<span class="id">F0</span> ?<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negb_and">negb_and</a></span> ?<span class="id">Fi0</span>//.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.ereal.html#fsume_ge0">fsume_ge0</a></span>// =&gt; <span class="id">j</span> [/<span class="id">F0</span>-&gt;].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="lee_fsum_nneg_subset">lee_fsum_nneg_subset</a></span> [<span class="id">T</span> : <span class="id">choiceType</span>] [<span class="id">A</span> <span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>] [<span class="id">f</span> : <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArithTh_realDomainType.R">R</a></span>] :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">A</span> -&gt; <span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">B</span> -&gt;<br/>
&nbsp;&nbsp;{<span class="id">subset</span> <span class="id">A</span> &lt;= <span class="id">B</span>} -&gt; {<span class="kwd">in</span> [<span class="id">predD</span> <span class="id">B</span> &amp; <span class="id">A</span>], <span class="kwd">forall</span> <span class="id">t</span> : <span class="id">T</span>, 0 &lt;= <span class="id">f</span> <span class="id">t</span>}%<span class="id">E</span> -&gt;<br/>
&nbsp;&nbsp;(\<span class="id">sum_</span>(<span class="id">t</span> \<span class="kwd">in</span> <span class="id">A</span>) <span class="id">f</span> <span class="id">t</span> &lt;= \<span class="id">sum_</span>(<span class="id">t</span> \<span class="kwd">in</span> <span class="id">B</span>) <span class="id">f</span> <span class="id">t</span>)%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
<span class="id">move</span>=&gt; <span class="id">finA</span> <span class="id">finB</span> <span class="id">AB</span> <span class="id">f0</span>; <span class="id">rewrite</span> !<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_finite">fsbig_finite</a></span>//=; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_sum_nneg_subfset">lee_sum_nneg_subfset</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">fsubsetP</span>; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.cardinality.html#fset_set_sub">fset_set_sub</a></span>//; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#subsetP">subsetP</a></span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">t</span>; <span class="id">rewrite</span> !<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> !<span class="id"><a href="mathcomp.classical.cardinality.html#in_fset_set">in_fset_set</a></span>// =&gt; /<span class="id">f0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="lee_fsum">lee_fsum</a></span> [<span class="id">T</span> : <span class="id">choiceType</span>] (<span class="id">I</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) (<span class="id">a</span> <span class="id">b</span> : <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArithTh_realDomainType.R">R</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">I</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">I</span> <span class="id">i</span> -&gt; <span class="id">a</span> <span class="id">i</span> &lt;= <span class="id">b</span> <span class="id">i</span>)%<span class="id">E</span> -&gt; (\<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">I</span>) <span class="id">a</span> <span class="id">i</span> &lt;= \<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">I</span>) <span class="id">b</span> <span class="id">i</span>)%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
<span class="id">move</span>=&gt; <span class="id">finI</span> <span class="id">ab</span>.<br/>
<span class="id">rewrite</span> !<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbig_finite">fsbig_finite</a></span>// <span class="id">big_seq</span> [<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#leRHS">leRHS</a></span>]<span class="id">big_seq</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_sum">lee_sum</a></span> //.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.cardinality.html#in_fset_set">in_fset_set</a></span>// <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>; <span class="id">exact</span>: <span class="id">ab</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ge0_mule_fsumr">ge0_mule_fsumr</a></span> (<span class="id">T</span> : <span class="id">choiceType</span>) <span class="id">x</span> (<span class="id">F</span> : <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArithTh_realDomainType.R">R</a></span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span> : <span class="id">T</span>, 0 &lt;= <span class="id">F</span> <span class="id">i</span>) -&gt; <span class="id">x</span> * (\<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span>) = \<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">x</span> * <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
<span class="id">move</span>=&gt; <span class="id">F0</span>; <span class="id">have</span> [-&gt;{<span class="id">x</span>}|<span class="id">x0</span>] := <span class="id">eqVneq</span> <span class="id">x</span> 0%<span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#mul0e">mul0e</a></span> <span class="id">big1</span>// =&gt; ? <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#mul0e">mul0e</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ge0_sume_distrr">ge0_sume_distrr</a></span>//; <span class="id">apply</span>: <span class="id">eq_fbigl</span> =&gt; <span class="id">y</span>.<br/>
<span class="id">rewrite</span> !<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#unlock">unlock</a></span>; <span class="id">congr</span> (<span class="id">_</span> \<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.cardinality.html#fset_set">fset_set</a></span> <span class="id">_</span>).<br/>
<span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">seteqP</a></span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#preimage">preimage</a></span>; <span class="id">split</span>=&gt; [|] <span class="id">z</span>/= [<span class="id">Pz</span> <span class="id">Fz0</span>];<br/>
&nbsp;&nbsp;<span class="id">split</span>=&gt; //; <span class="id">apply</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#contra_not">contra_not</a></span> <span class="id">Fz0</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#mule_eq0">mule_eq0</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbTE">negbTE</a></span> <span class="id">x0</span>)/= =&gt; /<span class="id">eqP</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; -&gt;; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#mule0">mule0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ge0_mule_fsuml">ge0_mule_fsuml</a></span> (<span class="id">T</span> : <span class="id">choiceType</span>) <span class="id">x</span> (<span class="id">F</span> : <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArithTh_realDomainType.R">R</a></span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span> : <span class="id">T</span>, 0 &lt;= <span class="id">F</span> <span class="id">i</span>) -&gt; (\<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span>) * <span class="id">x</span> = \<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> * <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
<span class="id">move</span>=&gt; <span class="id">F0</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#muleC">muleC</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#ge0_mule_fsumr">ge0_mule_fsumr</a></span>//.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#eq_fsbigr">eq_fsbigr</a></span> =&gt; <span class="id">i</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#muleC">muleC</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ERealArithTh_realDomainType">ERealArithTh_realDomainType</a></span>.<br/>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.analysis.ereal.html#lee_fsum">lee_fsum</a></span> [<span class="id">R</span> <span class="id">T</span> <span class="id">I</span> <span class="id">a</span> <span class="id">b</span>].<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="DualAddTheoryNumDomain">DualAddTheoryNumDomain</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#DualAddTheory">DualAddTheory</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="DualAddTheoryNumDomain.DualERealArithTh_numDomainType">DualERealArithTh_numDomainType</a></span>.<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_dual_scope</span>.<br/>
<br/>
<span class="kwd">Context</span> {<span class="id">R</span> : <span class="id">numDomainType</span>}.<br/>
<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">x</span> <span class="id">y</span> <span class="id">z</span> : \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#DualAddTheoryNumDomain.DualERealArithTh_numDomainType.R">R</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="DualAddTheoryNumDomain.finite_supportNe">finite_supportNe</a></span> (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#DualAddTheoryNumDomain.DualERealArithTh_numDomainType.R">R</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support">finite_support</a></span> 0%<span class="id">E</span> <span class="id">P</span> (\- <span class="id">F</span>)%<span class="id">E</span> = <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support">finite_support</a></span> 0%<span class="id">E</span> <span class="id">P</span> <span class="id">F</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
<span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.fsbigop.html#finite_support">finite_support</a></span> !<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#unlock">unlock</a></span>; <span class="id">congr</span> <span class="id"><a href="mathcomp.classical.cardinality.html#fset_set">fset_set</a></span>; <span class="id">congr</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setI">setI</a></span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">seteqP</a></span>; <span class="id">split</span>=&gt; <span class="id">x</span> /= /<span class="id">eqP</span> + /<span class="id">ltac</span>:(<span class="id">apply</span>/<span class="id">eqP</span>); <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppe_eq0">oppe_eq0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="DualAddTheoryNumDomain.dual_fsumeE">dual_fsumeE</a></span> (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#DualAddTheoryNumDomain.DualERealArithTh_numDomainType.R">R</a></span>) :<br/>
&nbsp;&nbsp;(\<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span>)%<span class="id">dE</span> = (- (\<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) (- <span class="id">F</span> <span class="id">i</span>)))%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.ereal.html#DualAddTheoryNumDomain.finite_supportNe">finite_supportNe</a></span>.<br/>
<span class="id">apply</span>: (<span class="id">big_ind2</span> (<span class="kwd">fun</span> <span class="id">x</span> <span class="id">y</span> =&gt; <span class="id">x</span> = - <span class="id">y</span>)%<span class="id">E</span>) =&gt; [|<span class="id">_</span> <span class="id">x</span> <span class="id">_</span> <span class="id">y</span> -&gt; -&gt;|<span class="id">i</span> <span class="id">_</span>].<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppe0">oppe0</a></span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#DualAddTheoryNumDomain.dual_addeE">dual_addeE</a></span> !<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="DualAddTheoryNumDomain.dfsume_ge0">dfsume_ge0</a></span> (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#DualAddTheoryNumDomain.DualERealArithTh_numDomainType.R">R</a></span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; 0 &lt;= <span class="id">F</span> <span class="id">i</span>) -&gt; 0 &lt;= \<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
<span class="id">move</span>=&gt; <span class="id">PF</span>; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP</a></span>; <span class="id">rewrite</span> ?<span class="id">big_nil</span>// =&gt; <span class="id">X</span> <span class="id">XP</span> <span class="id">F0</span> <span class="id">_</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big_seq_cond</span> <span class="id">big_mkcondr</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#DualAddTheoryNumDomain.dsume_ge0">dsume_ge0</a></span>// =&gt; <span class="id">i</span> /<span class="id">XP</span>/<span class="id">PF</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="DualAddTheoryNumDomain.dfsume_le0">dfsume_le0</a></span> (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#DualAddTheoryNumDomain.DualERealArithTh_numDomainType.R">R</a></span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">t</span>, <span class="id">P</span> <span class="id">t</span> -&gt; <span class="id">F</span> <span class="id">t</span> &lt;= 0) -&gt; \<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> &lt;= 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
<span class="id">move</span>=&gt; <span class="id">PF</span>; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#finite_supportP">finite_supportP</a></span>; <span class="id">rewrite</span> ?<span class="id">big_nil</span>// =&gt; <span class="id">X</span> <span class="id">XP</span> <span class="id">F0</span> <span class="id">_</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big_seq_cond</span> <span class="id">big_mkcondr</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#DualAddTheoryNumDomain.dsume_le0">dsume_le0</a></span>// =&gt; <span class="id">i</span> /<span class="id">XP</span>/<span class="id">PF</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.ereal.html#DualAddTheoryNumDomain.DualERealArithTh_numDomainType">DualERealArithTh_numDomainType</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="DualAddTheoryNumDomain.DualERealArithTh_realDomainType">DualERealArithTh_realDomainType</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#DualAddTheory">DualAddTheory</a></span>.<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_dual_scope</span>.<br/>
<br/>
<span class="kwd">Context</span> {<span class="id">R</span> : <span class="id">realDomainType</span>}.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">x</span> <span class="id">y</span> <span class="id">z</span> <span class="id">a</span> <span class="id">b</span> : \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#DualAddTheoryNumDomain.DualERealArithTh_realDomainType.R">R</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="DualAddTheoryNumDomain.dfsume_gt0">dfsume_gt0</a></span> (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#DualAddTheoryNumDomain.DualERealArithTh_realDomainType.R">R</a></span>) :<br/>
&nbsp;&nbsp;0 &lt; \<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> -&gt; <span class="kwd">exists2</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> &amp; 0 &lt; <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.ereal.html#DualAddTheoryNumDomain.dual_fsumeE">dual_fsumeE</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppe_gt0">oppe_gt0</a></span> =&gt; /<span class="id"><a href="mathcomp.analysis.ereal.html#fsume_lt0">fsume_lt0</a></span>[<span class="id">i</span> <span class="id">Pi</span>].<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppe_lt0">oppe_lt0</a></span> =&gt; ?; <span class="kwd">exists</span> <span class="id">i</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="DualAddTheoryNumDomain.dfsume_lt0">dfsume_lt0</a></span> (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#DualAddTheoryNumDomain.DualERealArithTh_realDomainType.R">R</a></span>) :<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> &lt; 0 -&gt; <span class="kwd">exists2</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> &amp; <span class="id">F</span> <span class="id">i</span> &lt; 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.ereal.html#DualAddTheoryNumDomain.dual_fsumeE">dual_fsumeE</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppe_lt0">oppe_lt0</a></span> =&gt; /<span class="id"><a href="mathcomp.analysis.ereal.html#fsume_gt0">fsume_gt0</a></span>[<span class="id">i</span> <span class="id">Pi</span>].<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppe_gt0">oppe_gt0</a></span> =&gt; ?; <span class="kwd">exists</span> <span class="id">i</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="DualAddTheoryNumDomain.pdfsume_eq0">pdfsume_eq0</a></span> (<span class="id">I</span> : <span class="id">choiceType</span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#DualAddTheoryNumDomain.DualERealArithTh_realDomainType.R">R</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.cardinality.html#finite_set">finite_set</a></span> <span class="id">P</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; 0 &lt;= <span class="id">F</span> <span class="id">i</span>) -&gt;<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> = 0 -&gt; <span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id">F</span> <span class="id">i</span> = 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
<span class="id">move</span>=&gt; <span class="id">Pfin</span> <span class="id">F0</span> /<span class="id">eqP</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.boolp.html#contraTP">contraTP</a></span> =&gt; /<span class="id"><a href="mathcomp.classical.boolp.html#existsPNP">existsPNP</a></span>[<span class="id">i</span> <span class="id">Pi</span> /<span class="id">eqP</span> <span class="id">Fi0</span>].<br/>
<span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#fsbigD1">fsbigD1</a></span> <span class="id">i</span>)//= <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#DualAddTheoryNumDomain.pdadde_eq0">pdadde_eq0</a></span> ?<span class="id">F0</span> ?<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negb_and">negb_and</a></span> ?<span class="id">Fi0</span>//.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.ereal.html#DualAddTheoryNumDomain.dfsume_ge0">dfsume_ge0</a></span>// =&gt; <span class="id">j</span> [/<span class="id">F0</span>-&gt;].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="DualAddTheoryNumDomain.le0_mule_dfsumr">le0_mule_dfsumr</a></span> (<span class="id">T</span> : <span class="id">choiceType</span>) <span class="id">x</span> (<span class="id">F</span> : <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#DualAddTheoryNumDomain.DualERealArithTh_realDomainType.R">R</a></span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span> : <span class="id">T</span>, <span class="id">F</span> <span class="id">i</span> &lt;= 0) -&gt; <span class="id">x</span> * (\<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span>) = \<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">x</span> * <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
<span class="id">move</span>=&gt; <span class="id">Fge0</span>.<br/>
<span class="id">rewrite</span> !<span class="id"><a href="mathcomp.analysis.ereal.html#DualAddTheoryNumDomain.dual_fsumeE">dual_fsumeE</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#muleN">muleN</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#ge0_mule_fsumr">ge0_mule_fsumr</a></span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; ?; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppe_ge0">oppe_ge0</a></span>.<br/>
<span class="id">rewrite</span> (<span class="id">eq_bigr</span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#muleN">muleN</a></span> <span class="id">_</span> <span class="id">_</span>)).<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.classical.fsbigop.html#eq_finite_support">eq_finite_support</a></span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">i</span> <span class="id">_</span> =&gt; <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#muleN">muleN</a></span> <span class="id">_</span> <span class="id">_</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="DualAddTheoryNumDomain.le0_mule_dfsuml">le0_mule_dfsuml</a></span> (<span class="id">T</span> : <span class="id">choiceType</span>) <span class="id">x</span> (<span class="id">F</span> : <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#DualAddTheoryNumDomain.DualERealArithTh_realDomainType.R">R</a></span>) (<span class="id">P</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span> : <span class="id">T</span>, <span class="id">F</span> <span class="id">i</span> &lt;= 0) -&gt; (\<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span>) * <span class="id">x</span> = \<span class="id">sum_</span>(<span class="id">i</span> \<span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> <span class="id">i</span> * <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
<span class="id">move</span>=&gt; <span class="id">F0</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#muleC">muleC</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#DualAddTheoryNumDomain.le0_mule_dfsumr">le0_mule_dfsumr</a></span>//.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.fsbigop.html#eq_fsbigr">eq_fsbigr</a></span> =&gt; <span class="id">i</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#muleC">muleC</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.ereal.html#DualAddTheoryNumDomain.DualERealArithTh_realDomainType">DualERealArithTh_realDomainType</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.ereal.html#DualAddTheoryNumDomain">DualAddTheoryNumDomain</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="DualAddTheory">DualAddTheory</a></span>.<br/>
<span class="kwd">Export</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ConstructiveDualAddTheory">ConstructiveDualAddTheory</a></span>.<br/>
<span class="kwd">Export</span> <span class="id"><a href="mathcomp.analysis.ereal.html#DualAddTheoryNumDomain">DualAddTheoryNumDomain</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.ereal.html#DualAddTheory">DualAddTheory</a></span>.<br/>
<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="ereal_pointed">ereal_pointed</a></span> (<span class="id">R</span> : <span class="id">numDomainType</span>) := <span class="id"><a href="mathcomp.classical.classical_sets.html#Pointed.Exports.PointedType">PointedType</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#extended">extended</a></span> <span class="id">R</span>) 0%<span class="id">E</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="ereal_supremum">ereal_supremum</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="ereal_supremum.R">R</a></span> : <span class="id">realFieldType</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">S</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (\<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supremum.R">R</a></span>)) (<span class="id">x</span> <span class="id">y</span> : \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supremum.R">R</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="uboundT">uboundT</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#ubound">ubound</a></span> [<span class="id">set</span>: \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supremum.R">R</a></span>] = [<span class="id">set</span> +<span class="id">oo</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
<span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">seteqP</a></span>; <span class="id">split</span> =&gt; /= [<span class="id">x</span> <span class="id">Tx</span>|<span class="id">x</span> -&gt; ?]; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leey">leey</a></span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">eq_le</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leey">leey</a></span> /= <span class="id">Tx</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_ub_pinfty">ereal_ub_pinfty</a></span> <span class="id">S</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#ubound">ubound</a></span> <span class="id">S</span> +<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#ubP">ubP</a></span>=&gt; <span class="id">x</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leey">leey</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_ub_ninfty">ereal_ub_ninfty</a></span> <span class="id">S</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#ubound">ubound</a></span> <span class="id">S</span> -<span class="id">oo</span> -&gt; <span class="id">S</span> = <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span> \/ <span class="id">S</span> = [<span class="id">set</span> -<span class="id">oo</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
<span class="id">have</span> [-&gt;|/<span class="id"><a href="mathcomp.classical.classical_sets.html#set0P">set0P</a></span>[<span class="id">x</span> <span class="id">Sx</span>] <span class="id">Snoo</span>] := <span class="id">eqVneq</span> <span class="id">S</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">left</span>.<br/>
<span class="id">right</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; <span class="id">y</span>; <span class="id">split</span> =&gt; [/<span class="id">Snoo</span>|-&gt;{<span class="id">y</span>}].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leeNy_eq">leeNy_eq</a></span> =&gt; /<span class="id">eqP</span> -&gt;.<br/>
<span class="kwd">by</span> <span class="id">have</span> := <span class="id">Snoo</span> <span class="id">_</span> <span class="id">Sx</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leeNy_eq">leeNy_eq</a></span> =&gt; /<span class="id">eqP</span> &lt;-.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="supremumsT">supremumsT</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#supremums">supremums</a></span> [<span class="id">set</span>: \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supremum.R">R</a></span>] = [<span class="id">set</span> +<span class="id">oo</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
<span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#supremums">supremums</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#uboundT">uboundT</a></span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">seteqP</a></span>; <span class="id">split</span>=&gt; [<span class="id">x</span> []//|<span class="id">x</span> -&gt; /=]; <span class="id">split</span> =&gt; // <span class="id">y</span> -&gt;.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_supremums_set0_ninfty">ereal_supremums_set0_ninfty</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#supremums">supremums</a></span> (@<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span> (\<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supremum.R">R</a></span>)) -<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
 <span class="kwd">by</span> <span class="id">split</span>; [<span class="id">exact</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#ubP">ubP</a></span> | <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#lbP">lbP</a></span>=&gt; <span class="id">y</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leNye">leNye</a></span>]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="supremumT">supremumT</a></span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#supremum">supremum</a></span> -<span class="id">oo</span> [<span class="id">set</span>: \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supremum.R">R</a></span>] = +<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
<span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#supremum">supremum</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbTE">negbTE</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT0">setT0</a></span>) <span class="id"><a href="mathcomp.analysis.ereal.html#supremumsT">supremumsT</a></span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#xgetP">xgetP</a></span> =&gt; // /(<span class="id">_</span> +<span class="id">oo</span>)/= /<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">eqxx</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="supremum_pinfty">supremum_pinfty</a></span> <span class="id">S</span> <span class="id">x0</span> : <span class="id">S</span> +<span class="id">oo</span> -&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#supremum">supremum</a></span> <span class="id">x0</span> <span class="id">S</span> = +<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
<span class="id">move</span>=&gt; <span class="id">Spoo</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#supremum">supremum</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifF">ifF</a></span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">eqP</span> =&gt; <span class="id">S0</span>; <span class="id">rewrite</span> <span class="id">S0</span> <span class="kwd">in</span> <span class="id">Spoo</span>.<br/>
<span class="id">have</span> <span class="id">sSoo</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#supremums">supremums</a></span> <span class="id">S</span> +<span class="id">oo</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_ub_pinfty">ereal_ub_pinfty</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; /= <span class="id">y</span> /(<span class="id">_</span> <span class="id">_</span> <span class="id">Spoo</span>); <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leye_eq">leye_eq</a></span> =&gt; /<span class="id">eqP</span> -&gt;.<br/>
<span class="id">case</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#xgetP">xgetP</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span> -&gt; <span class="id">sSxget</span>; <span class="id">move</span>: (<span class="id"><a href="mathcomp.classical.classical_sets.html#is_subset1_supremums">is_subset1_supremums</a></span> <span class="id">sSoo</span> <span class="id">sSxget</span>).<br/>
<span class="kwd">by</span> <span class="id">move</span>/(<span class="id">_</span> +<span class="id">oo</span>) =&gt; <span class="id">gSoo</span>; <span class="id">exfalso</span>; <span class="id">apply</span> <span class="id">gSoo</span> =&gt; {<span class="id">gSoo</span>}.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ereal_sup">ereal_sup</a></span> <span class="id">S</span> := <span class="id"><a href="mathcomp.classical.classical_sets.html#supremum">supremum</a></span> -<span class="id">oo</span> <span class="id">S</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ereal_inf">ereal_inf</a></span> <span class="id">S</span> := - <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> (-%<span class="id">E</span> @` <span class="id">S</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_sup0">ereal_sup0</a></span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span> = -<span class="id">oo</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
 <span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#supremum0">supremum0</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_supT">ereal_supT</a></span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> [<span class="id">set</span>: \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supremum.R">R</a></span>] = +<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span>/= <span class="id"><a href="mathcomp.analysis.ereal.html#supremumT">supremumT</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_sup1">ereal_sup1</a></span> <span class="id">x</span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> [<span class="id">set</span> <span class="id">x</span>] = <span class="id">x</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
 <span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#supremum1">supremum1</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_inf0">ereal_inf0</a></span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf">ereal_inf</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span> = +<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf">ereal_inf</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#image_set0">image_set0</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup0">ereal_sup0</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_infT">ereal_infT</a></span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf">ereal_inf</a></span> [<span class="id">set</span>: \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supremum.R">R</a></span>] = -<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf">ereal_inf</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#range_oppe">range_oppe</a></span>/= <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supT">ereal_supT</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_inf1">ereal_inf1</a></span> <span class="id">x</span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf">ereal_inf</a></span> [<span class="id">set</span> <span class="id">x</span>] = <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf">ereal_inf</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#image_set1">image_set1</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup1">ereal_sup1</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ub_ereal_sup">ub_ereal_sup</a></span> <span class="id">S</span> <span class="id">M</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#ubound">ubound</a></span> <span class="id">S</span> <span class="id">M</span> -&gt; <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> <span class="id">S</span> &lt;= <span class="id">M</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
<span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#supremum">supremum</a></span>; <span class="id">case</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span> =&gt; [/<span class="id">eqP</span> -&gt;|]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leNye">leNye</a></span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span> <span class="id">SM</span>; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#xgetP">xgetP</a></span> =&gt; [<span class="id">_</span> -&gt; [<span class="id">_</span>]| <span class="id">_</span>] /=; [<span class="id">exact</span> |<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leNye">leNye</a></span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="lb_ereal_inf">lb_ereal_inf</a></span> <span class="id">S</span> <span class="id">M</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#lbound">lbound</a></span> <span class="id">S</span> <span class="id">M</span> -&gt; <span class="id">M</span> &lt;= <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf">ereal_inf</a></span> <span class="id">S</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
<span class="id">move</span>=&gt; <span class="id">SM</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf">ereal_inf</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_oppr">lee_oppr</a></span>; <span class="id">apply</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ub_ereal_sup">ub_ereal_sup</a></span> =&gt; <span class="id">x</span> [<span class="id">y</span> <span class="id">Sy</span> &lt;-{<span class="id">x</span>}].<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_oppl">lee_oppl</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>; <span class="id">apply</span> <span class="id">SM</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ub_ereal_sup_adherent">ub_ereal_sup_adherent</a></span> <span class="id">S</span> (<span class="id">e</span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supremum.R">R</a></span>) : (0 &lt; <span class="id">e</span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> <span class="id">S</span> \<span class="id">is</span> <span class="id">a</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fin_num">fin_num</a></span> -&gt; <span class="kwd">exists2</span> <span class="id">x</span>, <span class="id">S</span> <span class="id">x</span> &amp; (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> <span class="id">S</span> - <span class="id">e</span>%:<span class="id">E</span> &lt; <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
<span class="id">move</span>=&gt; <span class="id">e0</span> <span class="id">Sr</span>; <span class="id">have</span> : ~ <span class="id"><a href="mathcomp.classical.classical_sets.html#ubound">ubound</a></span> <span class="id">S</span> (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> <span class="id">S</span> - <span class="id">e</span>%:<span class="id">E</span>).<br/>
&nbsp;&nbsp;<span class="id">move</span>/<span class="id"><a href="mathcomp.analysis.ereal.html#ub_ereal_sup">ub_ereal_sup</a></span>; <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">negP</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">ltNge</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_subl_addr">lte_subl_addr</a></span> // <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_addl">lte_addl</a></span> // <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span>.<br/>
<span class="id">move</span>/<span class="id"><a href="mathcomp.classical.boolp.html#asboolP">asboolP</a></span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#asbool_neg">asbool_neg</a></span>; <span class="id">case</span>/<span class="id"><a href="mathcomp.classical.boolp.html#existsp_asboolPn">existsp_asboolPn</a></span> =&gt; /= <span class="id">x</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#not_implyE">not_implyE</a></span> =&gt; -[? ?]; <span class="kwd">exists</span> <span class="id">x</span> =&gt; //; <span class="id">rewrite</span> <span class="id">ltNge</span>; <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">negP</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="lb_ereal_inf_adherent">lb_ereal_inf_adherent</a></span> <span class="id">S</span> (<span class="id">e</span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supremum.R">R</a></span>) : (0 &lt; <span class="id">e</span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf">ereal_inf</a></span> <span class="id">S</span> \<span class="id">is</span> <span class="id">a</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fin_num">fin_num</a></span> -&gt; <span class="kwd">exists2</span> <span class="id">x</span>, <span class="id">S</span> <span class="id">x</span> &amp; (<span class="id">x</span> &lt; <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf">ereal_inf</a></span> <span class="id">S</span> + <span class="id">e</span>%:<span class="id">E</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
<span class="id">move</span>=&gt; <span class="id">e0</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fin_numN">fin_numN</a></span> =&gt; /(<span class="id"><a href="mathcomp.analysis.ereal.html#ub_ereal_sup_adherent">ub_ereal_sup_adherent</a></span> <span class="id">e0</span>)[<span class="id">x</span> []].<br/>
<span class="id">move</span>=&gt; <span class="id">y</span> <span class="id">Sy</span> &lt;-; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_oppr">lte_oppr</a></span> =&gt; /<span class="id">lt_le_trans</span> <span class="id">ex</span>; <span class="kwd">exists</span> <span class="id">y</span> =&gt; //.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">ex</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fin_num_oppeD">fin_num_oppeD</a></span>// <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_sup_gt">ereal_sup_gt</a></span> <span class="id">S</span> <span class="id">x</span> : <span class="id">x</span> &lt; <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> <span class="id">S</span> -&gt; <span class="kwd">exists2</span> <span class="id">y</span>, <span class="id">S</span> <span class="id">y</span> &amp; <span class="id">x</span> &lt; <span class="id">y</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#not_exists2P">not_exists2P</a></span> =&gt; + <span class="id">g</span>; <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">negP</a></span>; <span class="id">rewrite</span> -<span class="id">leNgt</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#ub_ereal_sup">ub_ereal_sup</a></span> =&gt; <span class="id">y</span> <span class="id">Sy</span>; <span class="id">move</span>: (<span class="id">g</span> <span class="id">y</span>) =&gt; [//|/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">negP</a></span>]; <span class="id">rewrite</span> <span class="id">leNgt</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_inf_lt">ereal_inf_lt</a></span> <span class="id">S</span> <span class="id">x</span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf">ereal_inf</a></span> <span class="id">S</span> &lt; <span class="id">x</span> -&gt; <span class="kwd">exists2</span> <span class="id">y</span>, <span class="id">S</span> <span class="id">y</span> &amp; <span class="id">y</span> &lt; <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_oppl">lte_oppl</a></span> =&gt; /<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup_gt">ereal_sup_gt</a></span>[<span class="id">_</span> [<span class="id">y</span> <span class="id">Sy</span> &lt;-]].<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_oppl">lte_oppl</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span> =&gt; <span class="id">xlty</span>; <span class="kwd">exists</span> <span class="id">y</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supremum">ereal_supremum</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="ereal_supremum_realType">ereal_supremum_realType</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="ereal_supremum_realType.R">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">classical_set_scope</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">S</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (\<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supremum_realType.R">R</a></span>).<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">x</span> : \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supremum_realType.R">R</a></span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="ereal_supremum_realType.fine_def">fine_def</a></span> <span class="id">r0</span> <span class="id">x</span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supremum_realType.R">R</a></span> := <span class="kwd">if</span> <span class="id">x</span> <span class="id">is</span> <span class="id">r</span>%:<span class="id">E</span> <span class="kwd">then</span> <span class="id">r</span> <span class="kwd">else</span> <span class="id">r0</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_supremums_neq0">ereal_supremums_neq0</a></span> <span class="id">S</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#supremums">supremums</a></span> <span class="id">S</span> !=<span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</span></div>
<div class="proofscript" id="proof50">
<span class="id">have</span> [-&gt;|<span class="id">Snoo</span>] := <span class="id">eqVneq</span> <span class="id">S</span> [<span class="id">set</span> -<span class="id">oo</span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> -<span class="id">oo</span>; <span class="id">split</span>; [<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#ub_set1">ub_set1</a></span> |<span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#lb_ub_refl">lb_ub_refl</a></span>].<br/>
<span class="id">have</span> [-&gt;|<span class="id">S0</span>] := <span class="id">eqVneq</span> <span class="id">S</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> -<span class="id">oo</span>; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supremums_set0_ninfty">ereal_supremums_set0_ninfty</a></span>.<br/>
<span class="id">have</span> [<span class="id">Spoo</span>|<span class="id">Spoo</span>] := <span class="id"><a href="mathcomp.classical.boolp.html#pselect">pselect</a></span> (<span class="id">S</span> +<span class="id">oo</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> +<span class="id">oo</span>; <span class="id">split</span>; [<span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_ub_pinfty">ereal_ub_pinfty</a></span> | <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#lbP">lbP</a></span> =&gt; /= <span class="id">y</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#ubP">ubP</a></span>; <span class="id">apply</span>].<br/>
<span class="id">have</span> [<span class="id">r</span> <span class="id">Sr</span>] : <span class="kwd">exists</span> <span class="id">r</span>, <span class="id">S</span> <span class="id">r</span>%:<span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>: <span class="id">S0</span> =&gt; /<span class="id"><a href="mathcomp.classical.classical_sets.html#set0P">set0P</a></span>[] [<span class="id">r</span> <span class="id">Sr</span>| // |<span class="id">Snoo1</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">r</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#not_existsP">not_existsP</a></span> =&gt; <span class="id">nS</span>; <span class="id">move</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">negP</a></span> : <span class="id">Snoo</span>; <span class="id">apply</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; -[] // <span class="id">r</span>; <span class="id">split</span> =&gt; // /<span class="id">nS</span>.<br/>
<span class="id">set</span> <span class="id">U</span> := <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supremum_realType.fine_def">fine_def</a></span> <span class="id">r</span> @` <span class="id">S</span>.<br/>
<span class="id">have</span> [|] := <span class="id">eqVneq</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#ubound">ubound</a></span> <span class="id">U</span>) <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#subset0">subset0</a></span> =&gt; <span class="id">U0</span>; <span class="kwd">exists</span> +<span class="id">oo</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>; [<span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_ub_pinfty">ereal_ub_pinfty</a></span> | <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#lbP">lbP</a></span> =&gt; /= -[<span class="id">r0</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#ubP">ubP</a></span> <span class="id">Sr0</span>|//|]].<br/>
&nbsp;&nbsp;- <span class="id">suff</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#ubound">ubound</a></span> <span class="id">U</span> <span class="id">r0</span> <span class="kwd">by</span> <span class="id">move</span>/<span class="id">U0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#ubP">ubP</a></span>=&gt; <span class="id">_</span> -[] [<span class="id">r1</span> <span class="id">Sr1</span> &lt;-|//| /= <span class="id">_</span> &lt;-]; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span>; <span class="id">apply</span> <span class="id">Sr0</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>/<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_ub_ninfty">ereal_ub_ninfty</a></span> =&gt; [|]; <span class="kwd">by</span> [<span class="id">move</span>/<span class="id">eqP</span> : <span class="id">S0</span>|<span class="id">move</span>/<span class="id">eqP</span> : <span class="id">Snoo</span>].<br/>
<span class="id">set</span> <span class="id">u</span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supremum_realType.R">R</a></span> := <span class="id"><a href="mathcomp.analysis.reals.html#sup">sup</a></span> <span class="id">U</span>.<br/>
<span class="kwd">exists</span> <span class="id">u</span>%:<span class="id">E</span>; <span class="id">split</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#lbP">lbP</a></span>=&gt; -[<span class="id">r0</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#ubP">ubP</a></span> <span class="id">Sr0</span>| |].<br/>
&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.reals.html#sup_le_ub">sup_le_ub</a></span>; <span class="id">first</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">r</span>, <span class="id">r</span>%:<span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#ubP">ubP</a></span> =&gt; <span class="id">_</span> -[[<span class="id">r2</span> ? &lt;-| // | /= <span class="id">_</span> &lt;-]]; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span>; <span class="id">exact</span>: <span class="id">Sr0</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leey">leey</a></span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>/<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_ub_ninfty">ereal_ub_ninfty</a></span>=&gt; [|/<span class="id">eqP</span> //]; [<span class="id">move</span>/<span class="id">eqP</span> : <span class="id">S0</span>|<span class="id">rewrite</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negbTE">negbTE</a></span> <span class="id">Snoo</span>)].<br/>
<span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#ubP">ubP</a></span> =&gt; -[<span class="id">r0</span> <span class="id">Sr0</span>|//|<span class="id">_</span>]; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leNye">leNye</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span>.<br/>
<span class="id">suff</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#has_sup">has_sup</a></span> <span class="id">U</span> <span class="kwd">by</span> <span class="id">move</span>/<span class="id"><a href="mathcomp.analysis.reals.html#sup_upper_bound">sup_upper_bound</a></span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#ubP">ubP</a></span>; <span class="id">apply</span>; <span class="kwd">exists</span> <span class="id">r0</span>%:<span class="id">E</span>.<br/>
<span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">r0</span>, <span class="id">r0</span>%:<span class="id">E</span>.<br/>
<span class="kwd">exists</span> <span class="id">u</span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#ubP">ubP</a></span> =&gt; <span class="id">y</span>; <span class="id">move</span>=&gt; [] <span class="id">y</span>' <span class="id">Sy</span>' &lt;-{<span class="id">y</span>}.<br/>
<span class="id">have</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#has_sup">has_sup</a></span> <span class="id">U</span> <span class="kwd">by</span> <span class="id">split</span>; [<span class="kwd">exists</span> <span class="id">r</span>, <span class="id">r</span>%:<span class="id">E</span> | <span class="id">exact</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#set0P">set0P</a></span>].<br/>
<span class="id">move</span>/<span class="id"><a href="mathcomp.analysis.reals.html#sup_upper_bound">sup_upper_bound</a></span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#ubP">ubP</a></span>; <span class="id">apply</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id">y</span>' <span class="id">Sy</span>' =&gt; [<span class="id">r1</span> /= <span class="id">Sr1</span> | // | /= <span class="id">_</span>]; [<span class="kwd">exists</span> <span class="id">r1</span>%:<span class="id">E</span> | <span class="kwd">exists</span> <span class="id">r</span>%:<span class="id">E</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_sup_ub">ereal_sup_ub</a></span> <span class="id">S</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#ubound">ubound</a></span> <span class="id">S</span> (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> <span class="id">S</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</span></div>
<div class="proofscript" id="proof51">
<span class="id">move</span>=&gt; <span class="id">y</span> <span class="id">Sy</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#supremum">supremum</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifF">ifF</a></span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; /(<span class="id">_</span> <span class="id">y</span>)[+ <span class="id">_</span>]; <span class="id">exact</span>.<br/>
<span class="id">case</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#xgetP">xgetP</a></span> =&gt; /=; <span class="id">first</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span> -&gt; -[] /<span class="id"><a href="mathcomp.classical.classical_sets.html#ubP">ubP</a></span> <span class="id">geS</span> <span class="id">_</span>; <span class="id">apply</span> <span class="id">geS</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>: (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supremums_neq0">ereal_supremums_neq0</a></span> <span class="id">S</span>) =&gt; /= <span class="id">x0</span> <span class="id">Sx0</span>; <span class="id">move</span>/(<span class="id">_</span> <span class="id">x0</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_sup_ninfty">ereal_sup_ninfty</a></span> <span class="id">S</span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> <span class="id">S</span> = -<span class="id">oo</span> &lt;-&gt; <span class="id">S</span> `&lt;=` [<span class="id">set</span> -<span class="id">oo</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</span></div>
<div class="proofscript" id="proof52">
<span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">supS</span> [<span class="id">r</span> /<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup_ub">ereal_sup_ub</a></span> | /<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup_ub">ereal_sup_ub</a></span> |//]; <span class="id">rewrite</span> <span class="id">supS</span>.<br/>
<span class="id">move</span>=&gt; /(@<span class="id"><a href="mathcomp.classical.classical_sets.html#subset_set1">subset_set1</a></span> <span class="id">_</span> <span class="id">S</span>) [] -&gt;; [<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup0">ereal_sup0</a></span>|<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup1">ereal_sup1</a></span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_inf_lb">ereal_inf_lb</a></span> <span class="id">S</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#lbound">lbound</a></span> <span class="id">S</span> (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf">ereal_inf</a></span> <span class="id">S</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</span></div>
<div class="proofscript" id="proof53">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> <span class="id">Sx</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf">ereal_inf</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_oppl">lee_oppl</a></span>; <span class="id">apply</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup_ub">ereal_sup_ub</a></span>; <span class="kwd">exists</span> <span class="id">x</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_inf_pinfty">ereal_inf_pinfty</a></span> <span class="id">S</span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf">ereal_inf</a></span> <span class="id">S</span> = +<span class="id">oo</span> &lt;-&gt; <span class="id">S</span> `&lt;=` [<span class="id">set</span> +<span class="id">oo</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof54')">Proof.</span></div>
<div class="proofscript" id="proof54">
 <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#eqe_oppLRP">eqe_oppLRP</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#oppe_subset">oppe_subset</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#image_set1">image_set1</a></span>; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup_ninfty">ereal_sup_ninfty</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="le_ereal_sup">le_ereal_sup</a></span> : {<span class="id">homo</span> @<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supremum_realType.R">R</a></span> : <span class="id">A</span> <span class="id">B</span> / <span class="id">A</span> `&lt;=` <span class="id">B</span> &gt;-&gt; <span class="id">A</span> &lt;= <span class="id">B</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</span></div>
<div class="proofscript" id="proof55">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">AB</span>; <span class="id">apply</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ub_ereal_sup">ub_ereal_sup</a></span> =&gt; <span class="id">x</span> <span class="id">Ax</span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup_ub">ereal_sup_ub</a></span>/<span class="id">AB</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="le_ereal_inf">le_ereal_inf</a></span> : {<span class="id">homo</span> @<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf">ereal_inf</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supremum_realType.R">R</a></span> : <span class="id">A</span> <span class="id">B</span> / <span class="id">A</span> `&lt;=` <span class="id">B</span> &gt;-&gt; <span class="id">B</span> &lt;= <span class="id">A</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof56')">Proof.</span></div>
<div class="proofscript" id="proof56">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">A</span> <span class="id">B</span> <span class="id">AB</span>; <span class="id">apply</span> <span class="id"><a href="mathcomp.analysis.ereal.html#lb_ereal_inf">lb_ereal_inf</a></span> =&gt; <span class="id">x</span> <span class="id">Bx</span>; <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf_lb">ereal_inf_lb</a></span>/<span class="id">AB</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="hasNub_ereal_sup">hasNub_ereal_sup</a></span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (\<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supremum_realType.R">R</a></span>)) : ~ <span class="id"><a href="mathcomp.classical.classical_sets.html#has_ubound">has_ubound</a></span> <span class="id">A</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">A</span> !=<span class="id">set0</span> -&gt; <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> <span class="id">A</span> = +<span class="id">oo</span>%<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof57')">Proof.</span></div>
<div class="proofscript" id="proof57">
<span class="id">move</span>=&gt; <span class="id">hasNubA</span> <span class="id">A0</span>.<br/>
<span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">eq_le</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leey">leey</a></span> /= <span class="id">leNgt</span>; <span class="id">apply</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#contra_notN">contra_notN</a></span> <span class="id">hasNubA</span> =&gt; <span class="id">Aoo</span>.<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> <span class="id">A</span>); <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup_ub">ereal_sup_ub</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_sup_EFin">ereal_sup_EFin</a></span>  (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supremum_realType.R">R</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.classical_sets.html#has_ubound">has_ubound</a></span> <span class="id">A</span> -&gt; <span class="id">A</span> !=<span class="id">set0</span> -&gt; <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFin">EFin</a></span> @` <span class="id">A</span>) = (<span class="id"><a href="mathcomp.analysis.reals.html#sup">sup</a></span> <span class="id">A</span>)%:<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof58')">Proof.</span></div>
<div class="proofscript" id="proof58">
<span class="id">move</span>=&gt; <span class="id">has_ubA</span> <span class="id">A0</span>; <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">eq_le</span>; <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#ub_ereal_sup">ub_ereal_sup</a></span> =&gt; /= <span class="id">y</span> [<span class="id">r</span> <span class="id">Ar</span> &lt;-{<span class="id">y</span>}]; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span> <span class="id"><a href="mathcomp.analysis.reals.html#sup_ub">sup_ub</a></span>.<br/>
<span class="id">set</span> <span class="id">esup</span> := <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> <span class="id">_</span>; <span class="id">have</span> := <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leey">leey</a></span> <span class="id">esup</span>.<br/>
<span class="id">rewrite</span> <span class="id">le_eqVlt</span> =&gt; /<span class="id">predU1P</span>[-&gt;|<span class="id">esupoo</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leey">leey</a></span>.<br/>
<span class="id">have</span> := <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leNye">leNye</a></span> <span class="id">esup</span>; <span class="id">rewrite</span> <span class="id">le_eqVlt</span> =&gt; /<span class="id">predU1P</span>[/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#esym">esym</a></span>|<span class="id">ooesup</span>].<br/>
&nbsp;&nbsp;<span class="id">case</span>: <span class="id">A0</span> =&gt; <span class="id">i</span> <span class="id">Ai</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup_ninfty">ereal_sup_ninfty</a></span> /(<span class="id">_</span> <span class="id">i</span>%:<span class="id">E</span>) /(<span class="id">_</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#ex_intro2">ex_intro2</a></span> <span class="id">A</span> <span class="id">_</span> <span class="id">i</span> <span class="id">Ai</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#erefl">erefl</a></span>)).<br/>
<span class="id">have</span> <span class="id">esup_fin_num</span> : <span class="id">esup</span> \<span class="id">is</span> <span class="id">a</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fin_num">fin_num</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fin_numE">fin_numE</a></span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leeNy_eq">leeNy_eq</a></span> -<span class="id">ltNge</span> <span class="id">ooesup</span> /= -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leye_eq">leye_eq</a></span> -<span class="id">ltNge</span> <span class="id">esupoo</span>.<br/>
<span class="id">rewrite</span> -(@<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fineK">fineK</a></span> <span class="id">_</span> <span class="id">esup</span>) // <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span> <span class="id">leNgt</span>.<br/>
<span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">negP</a></span> =&gt; /(<span class="id"><a href="mathcomp.analysis.reals.html#sup_gt">sup_gt</a></span> <span class="id">A0</span>)[<span class="id">r</span> <span class="id">Ar</span>]; <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">negP</a></span>; <span class="id">rewrite</span> -<span class="id">leNgt</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fineK">fineK</a></span>//; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup_ub">ereal_sup_ub</a></span>; <span class="kwd">exists</span> <span class="id">r</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_inf_EFin">ereal_inf_EFin</a></span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supremum_realType.R">R</a></span>) : <span class="id"><a href="mathcomp.classical.classical_sets.html#has_lbound">has_lbound</a></span> <span class="id">A</span> -&gt; <span class="id">A</span> !=<span class="id">set0</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf">ereal_inf</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFin">EFin</a></span> @` <span class="id">A</span>) = (<span class="id"><a href="mathcomp.analysis.reals.html#inf">inf</a></span> <span class="id">A</span>)%:<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof59')">Proof.</span></div>
<div class="proofscript" id="proof59">
<span class="id">move</span>=&gt; <span class="id">has_lbA</span> <span class="id">A0</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf">ereal_inf</a></span> /<span class="id"><a href="mathcomp.analysis.reals.html#inf">inf</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFinN">EFinN</a></span>; <span class="id">congr</span> (- <span class="id">_</span>)%<span class="id">E</span>.<br/>
<span class="id">rewrite</span> -<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup_EFin">ereal_sup_EFin</a></span>; [|<span class="id">exact</span>/<span class="id"><a href="mathcomp.classical.set_interval.html#has_lb_ubN">has_lb_ubN</a></span>|<span class="id">exact</span>/<span class="id"><a href="mathcomp.classical.set_interval.html#nonemptyN">nonemptyN</a></span>].<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id"><a href="mathcomp.classical.classical_sets.html#image_comp">image_comp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_supremum_realType">ereal_supremum_realType</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="restrict_abse">restrict_abse</a></span> <span class="id">T</span> (<span class="id">R</span> : <span class="id">numDomainType</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) (<span class="id">D</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;(<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#abse">abse</a></span> \<span class="id">o</span> <span class="id">f</span>) \<span class="id">_</span> <span class="id">D</span> = <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#abse">abse</a></span> \<span class="id">o</span> (<span class="id">f</span> \<span class="id">_</span> <span class="id">D</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof60')">Proof.</span></div>
<div class="proofscript" id="proof60">
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span>=&gt; <span class="id">t</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.functions.html#restrict">restrict</a></span>/=; <span class="id">case</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span> =&gt; // <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#abse0">abse0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="SignedRealFieldStability">SignedRealFieldStability</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">R</span> : <span class="id">realFieldType</span>}.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ereal_sup_reality_subdef">ereal_sup_reality_subdef</a></span> (<span class="id">xnz</span> : <span class="id"><a href="mathcomp.analysis.signed.html#KnownSign.nullity">KnownSign.nullity</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">xr</span> : <span class="id"><a href="mathcomp.analysis.signed.html#KnownSign.reality">KnownSign.reality</a></span>) :=<br/>
&nbsp;&nbsp;(<span class="kwd">if</span> <span class="id"><a href="mathcomp.analysis.signed.html#KnownSign.wider_reality">KnownSign.wider_reality</a></span> &lt;=0 <span class="id">xr</span> <span class="kwd">then</span> <span class="id"><a href="mathcomp.analysis.signed.html#KnownSign.Real">KnownSign.Real</a></span> &lt;=0<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> &gt;=&lt;0)%<span class="id">snum_sign</span>.<br/>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup_reality_subdef">ereal_sup_reality_subdef</a></span> /.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_sup_snum_subproof">ereal_sup_snum_subproof</a></span> (<span class="id">xnz</span> : <span class="id"><a href="mathcomp.analysis.signed.html#KnownSign.nullity">KnownSign.nullity</a></span>) (<span class="id">xr</span> : <span class="id"><a href="mathcomp.analysis.signed.html#KnownSign.reality">KnownSign.reality</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">S</span> : {<span class="id">compare</span> (0 : \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#SignedRealFieldStability.R">R</a></span>) &amp; <span class="id">xnz</span> &amp; <span class="id">xr</span>} -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">r</span> := <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup_reality_subdef">ereal_sup_reality_subdef</a></span> <span class="id">xnz</span> <span class="id">xr</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.signed.html#Signed.spec">Signed.spec</a></span> 0 ?=0 <span class="id">r</span> (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> [<span class="id">set</span> <span class="id">x</span>%:<span class="id">num</span> | <span class="id">x</span> <span class="kwd">in</span> <span class="id">S</span>]%<span class="id">classic</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof61')">Proof.</span></div>
<div class="proofscript" id="proof61">
<span class="id">rewrite</span> {}/<span class="id">r</span>; <span class="id">move</span>: <span class="id">xr</span> <span class="id">S</span> =&gt; [[[]|]|] <span class="id">S</span> /=;<br/>
&nbsp;&nbsp;<span class="id">do</span> ?[<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#ub_ereal_sup">ub_ereal_sup</a></span> =&gt; <span class="id">_</span> [? <span class="id">_</span> &lt;-]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> =&gt; [<span class="id">s</span>||];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leey">leey</a></span> ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leNye">leNye</a></span>// !<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span> -<span class="id">realE</span> <span class="id">num_real</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="ereal_sup_snum">ereal_sup_snum</a></span> (<span class="id">xnz</span> : <span class="id"><a href="mathcomp.analysis.signed.html#KnownSign.nullity">KnownSign.nullity</a></span>) (<span class="id">xr</span> : <span class="id"><a href="mathcomp.analysis.signed.html#KnownSign.reality">KnownSign.reality</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">S</span> : {<span class="id">compare</span> (0 : \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#SignedRealFieldStability.R">R</a></span>) &amp; <span class="id">xnz</span> &amp; <span class="id">xr</span>} -&gt; <span class="kwd">Prop</span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.signed.html#Signed.mk">Signed.mk</a></span> (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup_snum_subproof">ereal_sup_snum_subproof</a></span> <span class="id">S</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ereal_inf_reality_subdef">ereal_inf_reality_subdef</a></span> (<span class="id">xnz</span> : <span class="id"><a href="mathcomp.analysis.signed.html#KnownSign.nullity">KnownSign.nullity</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">xr</span> : <span class="id"><a href="mathcomp.analysis.signed.html#KnownSign.reality">KnownSign.reality</a></span>) :=<br/>
&nbsp;&nbsp;(<span class="kwd">if</span> <span class="id"><a href="mathcomp.analysis.signed.html#KnownSign.wider_reality">KnownSign.wider_reality</a></span> &gt;=0 <span class="id">xr</span> <span class="kwd">then</span> <span class="id"><a href="mathcomp.analysis.signed.html#KnownSign.Real">KnownSign.Real</a></span> &gt;=0<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> &gt;=&lt;0)%<span class="id">snum_sign</span>.<br/>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf_reality_subdef">ereal_inf_reality_subdef</a></span> /.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_inf_snum_subproof">ereal_inf_snum_subproof</a></span> (<span class="id">xnz</span> : <span class="id"><a href="mathcomp.analysis.signed.html#KnownSign.nullity">KnownSign.nullity</a></span>) (<span class="id">xr</span> : <span class="id"><a href="mathcomp.analysis.signed.html#KnownSign.reality">KnownSign.reality</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">S</span> : {<span class="id">compare</span> (0 : \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#SignedRealFieldStability.R">R</a></span>) &amp; <span class="id">xnz</span> &amp; <span class="id">xr</span>} -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">r</span> := <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf_reality_subdef">ereal_inf_reality_subdef</a></span> <span class="id">xnz</span> <span class="id">xr</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.signed.html#Signed.spec">Signed.spec</a></span> 0 ?=0 <span class="id">r</span> (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf">ereal_inf</a></span> [<span class="id">set</span> <span class="id">x</span>%:<span class="id">num</span> | <span class="id">x</span> <span class="kwd">in</span> <span class="id">S</span>]%<span class="id">classic</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof62')">Proof.</span></div>
<div class="proofscript" id="proof62">
<span class="id">rewrite</span> {}/<span class="id">r</span>; <span class="id">move</span>: <span class="id">xr</span> <span class="id">S</span> =&gt; [[[]|]|] <span class="id">S</span> /=;<br/>
&nbsp;&nbsp;<span class="id">do</span> ?[<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#lb_ereal_inf">lb_ereal_inf</a></span> =&gt; <span class="id">_</span> [? <span class="id">_</span> &lt;-]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf">ereal_inf</a></span> =&gt; [<span class="id">s</span>||];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leey">leey</a></span> ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#leNye">leNye</a></span>// !<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span> -<span class="id">realE</span> <span class="id">num_real</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="ereal_inf_snum">ereal_inf_snum</a></span> (<span class="id">xnz</span> : <span class="id"><a href="mathcomp.analysis.signed.html#KnownSign.nullity">KnownSign.nullity</a></span>) (<span class="id">xr</span> : <span class="id"><a href="mathcomp.analysis.signed.html#KnownSign.reality">KnownSign.reality</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">S</span> : {<span class="id">compare</span> (0 : \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#SignedRealFieldStability.R">R</a></span>) &amp; <span class="id">xnz</span> &amp; <span class="id">xr</span>} -&gt; <span class="kwd">Prop</span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.signed.html#Signed.mk">Signed.mk</a></span> (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf_snum_subproof">ereal_inf_snum_subproof</a></span> <span class="id">S</span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.ereal.html#SignedRealFieldStability">SignedRealFieldStability</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="ereal_nbhs">ereal_nbhs</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">R</span> : <span class="id">numFieldType</span>}.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">classical_set_scope</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ereal_dnbhs">ereal_dnbhs</a></span> (<span class="id">x</span> : \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs.R">R</a></span>) (<span class="id">P</span> : \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs.R">R</a></span> -&gt; <span class="kwd">Prop</span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">x</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">r</span>%:<span class="id">E</span> =&gt; <span class="id">r</span>^' (<span class="kwd">fun</span> <span class="id">r</span> =&gt; <span class="id">P</span> <span class="id">r</span>%:<span class="id">E</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| +<span class="id">oo</span> =&gt; <span class="kwd">exists</span> <span class="id">M</span>, <span class="id">M</span> \<span class="id">is</span> <span class="id">Num.real</span> /\ <span class="kwd">forall</span> <span class="id">y</span>, <span class="id">M</span>%:<span class="id">E</span> &lt; <span class="id">y</span> -&gt; <span class="id">P</span> <span class="id">y</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| -<span class="id">oo</span> =&gt; <span class="kwd">exists</span> <span class="id">M</span>, <span class="id">M</span> \<span class="id">is</span> <span class="id">Num.real</span> /\ <span class="kwd">forall</span> <span class="id">y</span>, <span class="id">y</span> &lt; <span class="id">M</span>%:<span class="id">E</span> -&gt; <span class="id">P</span> <span class="id">y</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ereal_nbhs">ereal_nbhs</a></span> (<span class="id">x</span> : \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs.R">R</a></span>) (<span class="id">P</span> : \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs.R">R</a></span> -&gt; <span class="kwd">Prop</span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">x</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">x</span>%:<span class="id">E</span> =&gt; <span class="id"><a href="mathcomp.analysis.topology.html#nbhs">nbhs</a></span> <span class="id">x</span> (<span class="kwd">fun</span> <span class="id">r</span> =&gt; <span class="id">P</span> <span class="id">r</span>%:<span class="id">E</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| +<span class="id">oo</span> =&gt; <span class="kwd">exists</span> <span class="id">M</span>, <span class="id">M</span> \<span class="id">is</span> <span class="id">Num.real</span> /\ <span class="kwd">forall</span> <span class="id">y</span>, <span class="id">M</span>%:<span class="id">E</span> &lt; <span class="id">y</span> -&gt; <span class="id">P</span> <span class="id">y</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| -<span class="id">oo</span> =&gt; <span class="kwd">exists</span> <span class="id">M</span>, <span class="id">M</span> \<span class="id">is</span> <span class="id">Num.real</span> /\ <span class="kwd">forall</span> <span class="id">y</span>, <span class="id">y</span> &lt; <span class="id">M</span>%:<span class="id">E</span> -&gt; <span class="id">P</span> <span class="id">y</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="ereal_ereal_filter">ereal_ereal_filter</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.topology.html#Filtered.Exports.FilteredType">FilteredType</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#extended">extended</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs.R">R</a></span>) (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#extended">extended</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs.R">R</a></span>) (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs">ereal_nbhs</a></span>).<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs">ereal_nbhs</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="ereal_nbhs_instances">ereal_nbhs_instances</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">R</span> : <span class="id">numFieldType</span>}.<br/>
<br/>
<span class="id">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="ereal_dnbhs_filter">ereal_dnbhs_filter</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> : \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs_instances.R">R</a></span>, <span class="id"><a href="mathcomp.analysis.topology.html#ProperFilter">ProperFilter</a></span> (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_dnbhs">ereal_dnbhs</a></span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof63')">Proof.</span></div>
<div class="proofscript" id="proof63">
<span class="id">case</span>=&gt; [<span class="id">x</span>||].<br/>
- <span class="id">case</span>: (<span class="id"><a href="mathcomp.analysis.topology.html#Proper_dnbhs_numFieldType">Proper_dnbhs_numFieldType</a></span> <span class="id">x</span>) =&gt; <span class="id">x0</span> [//= <span class="id">xT</span> <span class="id">xI</span> <span class="id">xS</span>].<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">Build_ProperFilter</span>' =&gt; //=; <span class="id">apply</span> <span class="id"><a href="mathcomp.analysis.topology.html#Build_Filter">Build_Filter</a></span> =&gt; //=.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">P</span> <span class="id">Q</span> <span class="id">lP</span> <span class="id">lQ</span>; <span class="id">exact</span>: <span class="id">xI</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">P</span> <span class="id">Q</span> <span class="id">PQ</span> /<span class="id">xS</span>; <span class="id">apply</span> =&gt; <span class="id">y</span> /<span class="id">PQ</span>.<br/>
- <span class="id">apply</span> <span class="id"><a href="mathcomp.analysis.topology.html#Build_ProperFilter">Build_ProperFilter</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">P</span> [<span class="id">x</span> [<span class="id">xr</span> <span class="id">xP</span>]] //; <span class="kwd">exists</span> (<span class="id">x</span> + 1)%:<span class="id">E</span>; <span class="id">apply</span> <span class="id">xP</span> =&gt; /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span> <span class="id">ltr_addl</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>=&gt; /= [|<span class="id">P</span> <span class="id">Q</span> [<span class="id">MP</span> [<span class="id">MPr</span> <span class="id">gtMP</span>]] [<span class="id">MQ</span> [<span class="id">MQr</span> <span class="id">gtMQ</span>]] |<span class="id">P</span> <span class="id">Q</span> <span class="id">sPQ</span> [<span class="id">M</span> [<span class="id">Mr</span> <span class="id">gtM</span>]]].<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="kwd">exists</span> 0%<span class="id">R</span>.<br/>
&nbsp;&nbsp;+ <span class="id">have</span> [<span class="id">MP0</span>|<span class="id">MP0</span>] := <span class="id">eqVneq</span> <span class="id">MP</span> 0%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> [<span class="id">MQ0</span>|<span class="id">MQ0</span>] := <span class="id">eqVneq</span> <span class="id">MQ</span> 0%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> 0%<span class="id">R</span>; <span class="id">split</span> =&gt; // <span class="id">x</span> <span class="id">x0</span>; <span class="id">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">apply</span>/<span class="id">gtMP</span>; <span class="id">rewrite</span> <span class="id">MP0</span> | <span class="id">apply</span>/<span class="id">gtMQ</span>; <span class="id">rewrite</span> <span class="id">MQ0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> `|<span class="id">MQ</span>|%<span class="id">R</span>; <span class="id">rewrite</span> <span class="id">realE</span> <span class="id">normr_ge0</span>; <span class="id">split</span> =&gt; // <span class="id">x</span> <span class="id">MQx</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">gtMP</span>; <span class="id">rewrite</span> (<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">MQx</span>) // <span class="id">MP0</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span> <span class="id">gtMQ</span>; <span class="id">rewrite</span> (<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">MQx</span>)// <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span> <span class="id">real_ler_normr</span> ?<span class="id">lexx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> [<span class="id">MQ0</span>|<span class="id">MQ0</span>] := <span class="id">eqVneq</span> <span class="id">MQ</span> 0%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> `|<span class="id">MP</span>|%<span class="id">R</span>; <span class="id">rewrite</span> <span class="id">realE</span> <span class="id">normr_ge0</span>; <span class="id">split</span> =&gt; // <span class="id">x</span> <span class="id">MPx</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span> <span class="id">gtMP</span>; <span class="id">rewrite</span> (<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">MPx</span>)// <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span> <span class="id">real_ler_normr</span> ?<span class="id">lexx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span> <span class="id">gtMQ</span>; <span class="id">rewrite</span> (<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">MPx</span>) // <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span> <span class="id">MQ0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> {}<span class="id">MP0</span> : (0 &lt; `|<span class="id">MP</span>|)%<span class="id">R</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">normr_gt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> {}<span class="id">MQ0</span> : (0 &lt; `|<span class="id">MQ</span>|)%<span class="id">R</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">normr_gt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">Num.max</span> (<span class="id"><a href="mathcomp.analysis.signed.html#PosNum">PosNum</a></span> <span class="id">MP0</span>) (<span class="id"><a href="mathcomp.analysis.signed.html#PosNum">PosNum</a></span> <span class="id">MQ0</span>))%:<span class="id">num</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">realE</span> /= <span class="id"><a href="mathcomp.analysis.signed.html#ge0">ge0</a></span> /=; <span class="id">split</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case</span>=&gt; [<span class="id">r</span>| |//].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span>/= <span class="id"><a href="mathcomp.analysis.signed.html#num_max">num_max</a></span> <span class="id"><a href="mathcomp.analysis.signed.html#num_lt_maxl">num_lt_maxl</a></span> /= =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[<span class="id">MPx</span> <span class="id">MQx</span>]; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">gtMP</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span> (<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">MPx</span>)// <span class="id">real_ler_normr</span> ?<span class="id">lexx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">gtMQ</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span> (<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">MQx</span>)// <span class="id">real_ler_normr</span> ?<span class="id">lexx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span>; <span class="id">split</span>; [<span class="id">apply</span>/<span class="id">gtMP</span> | <span class="id">apply</span>/<span class="id">gtMQ</span>].<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">M</span>; <span class="id">split</span> =&gt; // ? /<span class="id">gtM</span> /<span class="id">sPQ</span>.<br/>
- <span class="id">apply</span> <span class="id"><a href="mathcomp.analysis.topology.html#Build_ProperFilter">Build_ProperFilter</a></span>.<br/>
&nbsp;&nbsp;+ <span class="id">move</span>=&gt; <span class="id">P</span> [<span class="id">M</span> [<span class="id">Mr</span> <span class="id">ltMP</span>]]; <span class="kwd">exists</span> (<span class="id">M</span> - 1)%:<span class="id">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">ltMP</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span> <span class="id">gtr_addl</span> <span class="id">oppr_lt0</span>.<br/>
&nbsp;&nbsp;+ <span class="id">split</span>=&gt; /= [|<span class="id">P</span> <span class="id">Q</span> [<span class="id">MP</span> [<span class="id">MPr</span> <span class="id">ltMP</span>]] [<span class="id">MQ</span> [<span class="id">MQr</span> <span class="id">ltMQ</span>]] |<span class="id">P</span> <span class="id">Q</span> <span class="id">sPQ</span> [<span class="id">M</span> [<span class="id">Mr</span> <span class="id">ltM</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="kwd">by</span> <span class="kwd">exists</span> 0%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">have</span> [<span class="id">MP0</span>|<span class="id">MP0</span>] := <span class="id">eqVneq</span> <span class="id">MP</span> 0%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> [<span class="id">MQ0</span>|<span class="id">MQ0</span>] := <span class="id">eqVneq</span> <span class="id">MQ</span> 0%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> 0%<span class="id">R</span>; <span class="id">split</span> =&gt; // <span class="id">x</span> <span class="id">x0</span>; <span class="id">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">apply</span>/<span class="id">ltMP</span>; <span class="id">rewrite</span> <span class="id">MP0</span> | <span class="id">apply</span>/<span class="id">ltMQ</span>; <span class="id">rewrite</span> <span class="id">MQ0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (- `|<span class="id">MQ</span>|)%<span class="id">R</span>; <span class="id">rewrite</span> <span class="id">realN</span> <span class="id">realE</span> <span class="id">normr_ge0</span>; <span class="id">split</span> =&gt; // <span class="id">x</span> <span class="id">xMQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span> <span class="id">ltMP</span>; <span class="id">rewrite</span> (<span class="id">lt_le_trans</span> <span class="id">xMQ</span>)// <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span> <span class="id">MP0</span> <span class="id">ler_oppl</span> <span class="id">oppr0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">ltMQ</span>; <span class="id">rewrite</span> (<span class="id">lt_le_trans</span> <span class="id">xMQ</span>) // <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span> <span class="id">ler_oppl</span> -<span class="id">normrN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">real_ler_normr</span> ?<span class="id">realN</span> // <span class="id">lexx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">have</span> [<span class="id">MQ0</span>|<span class="id">MQ0</span>] := <span class="id">eqVneq</span> <span class="id">MQ</span> 0%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (- `|<span class="id">MP</span>|)%<span class="id">R</span>; <span class="id">rewrite</span> <span class="id">realN</span> <span class="id">realE</span> <span class="id">normr_ge0</span>; <span class="id">split</span> =&gt; // <span class="id">x</span> <span class="id">MPx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">ltMP</span>; <span class="id">rewrite</span> (<span class="id">lt_le_trans</span> <span class="id">MPx</span>) // <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span> <span class="id">ler_oppl</span> -<span class="id">normrN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">real_ler_normr</span> ?<span class="id">realN</span> // <span class="id">lexx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span> <span class="id">ltMQ</span>; <span class="id">rewrite</span> (<span class="id">lt_le_trans</span> <span class="id">MPx</span>) // <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span> <span class="id">MQ0</span> <span class="id">ler_oppl</span> <span class="id">oppr0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> {}<span class="id">MP0</span> : (0 &lt; `|<span class="id">MP</span>|)%<span class="id">R</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">normr_gt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> {}<span class="id">MQ0</span> : (0 &lt; `|<span class="id">MQ</span>|)%<span class="id">R</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">normr_gt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (- (<span class="id">Num.max</span> (<span class="id"><a href="mathcomp.analysis.signed.html#PosNum">PosNum</a></span> <span class="id">MP0</span>) (<span class="id"><a href="mathcomp.analysis.signed.html#PosNum">PosNum</a></span> <span class="id">MQ0</span>))%:<span class="id">num</span>)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">realN</span> <span class="id">realE</span> /= <span class="id"><a href="mathcomp.analysis.signed.html#ge0">ge0</a></span> /=; <span class="id">split</span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case</span>=&gt; [<span class="id">r</span>|//|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span> <span class="id">ltr_oppr</span> <span class="id"><a href="mathcomp.analysis.signed.html#num_max">num_max</a></span> <span class="id"><a href="mathcomp.analysis.signed.html#num_lt_maxl">num_lt_maxl</a></span> =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">ltr_oppr</span> =&gt; <span class="id">MPx</span>; <span class="id">rewrite</span> <span class="id">ltr_oppr</span> =&gt; <span class="id">MQx</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">ltMP</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span> (<span class="id">lt_le_trans</span> <span class="id">MPx</span>) //= <span class="id">ler_oppl</span> -<span class="id">normrN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">real_ler_normr</span> ?<span class="id">realN</span> // <span class="id">lexx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">ltMQ</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span> (<span class="id">lt_le_trans</span> <span class="id">MQx</span>) //= <span class="id">ler_oppl</span> -<span class="id">normrN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">real_ler_normr</span> ?<span class="id">realN</span> // <span class="id">lexx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span>; <span class="id">split</span>; [<span class="id">apply</span>/<span class="id">ltMP</span> | <span class="id">apply</span>/<span class="id">ltMQ</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">M</span>; <span class="id">split</span> =&gt; // <span class="id">x</span> /<span class="id">ltM</span> /<span class="id">sPQ</span>.<br/>
Qed.</div>
<span class="id">Typeclasses</span> <span class="kwd">Opaque</span> <span class="id">ereal_dnbhs</span>.<br/>
<br/>
<span class="id">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="ereal_nbhs_filter">ereal_nbhs_filter</a></span> : <span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="mathcomp.analysis.topology.html#ProperFilter">ProperFilter</a></span> (@<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs">ereal_nbhs</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs_instances.R">R</a></span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof64')">Proof.</span></div>
<div class="proofscript" id="proof64">
<span class="id">case</span>=&gt; [<span class="id">r</span>| |].<br/>
- <span class="id">case</span>: (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_dnbhs_filter">ereal_dnbhs_filter</a></span> <span class="id">r</span>%:<span class="id">E</span>) =&gt; <span class="id">r0</span> [//= <span class="id">nrT</span> <span class="id">rI</span> <span class="id">rS</span>].<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.topology.html#Build_ProperFilter">Build_ProperFilter</a></span> =&gt; <span class="id">P</span> /<span class="id"><a href="mathcomp.analysis.topology.html#nbhs_ballP">nbhs_ballP</a></span>[<span class="id">r2</span> <span class="id">r20</span> <span class="id">rr2</span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">r</span>%:<span class="id">E</span>; <span class="id">exact</span>/<span class="id">rr2</span>/<span class="id"><a href="mathcomp.analysis.topology.html#ballxx">ballxx</a></span>.<br/>
- <span class="id">exact</span>: (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_dnbhs_filter">ereal_dnbhs_filter</a></span> +<span class="id">oo</span>).<br/>
- <span class="id">exact</span>: (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_dnbhs_filter">ereal_dnbhs_filter</a></span> -<span class="id">oo</span>).<br/>
Qed.</div>
<span class="id">Typeclasses</span> <span class="kwd">Opaque</span> <span class="id">ereal_nbhs</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs_instances">ereal_nbhs_instances</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="ereal_nbhs_infty">ereal_nbhs_infty</a></span>.<br/>
<span class="kwd">Context</span> (<span class="id">R</span> : <span class="id">numFieldType</span>).<br/>
<span class="kwd">Implicit</span> <span class="kwd">Type</span> (<span class="id">r</span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs_infty.R">R</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_nbhs_pinfty_gt">ereal_nbhs_pinfty_gt</a></span> <span class="id">r</span> : <span class="id">r</span> \<span class="id">is</span> <span class="id">Num.real</span> -&gt; \<span class="kwd">forall</span> <span class="id">x</span> \<span class="id">near</span> +<span class="id">oo</span>, <span class="id">r</span>%:<span class="id">E</span> &lt; <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof65')">Proof.</span></div>
<div class="proofscript" id="proof65">
 <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">r</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_nbhs_pinfty_ge">ereal_nbhs_pinfty_ge</a></span> <span class="id">r</span> : <span class="id">r</span> \<span class="id">is</span> <span class="id">Num.real</span> -&gt; \<span class="kwd">forall</span> <span class="id">x</span> \<span class="id">near</span> +<span class="id">oo</span>, <span class="id">r</span>%:<span class="id">E</span> &lt;= <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof66')">Proof.</span></div>
<div class="proofscript" id="proof66">
 <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">r</span>; <span class="id">split</span> =&gt; //; <span class="id">apply</span>: <span class="id">ltW</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_nbhs_ninfty_lt">ereal_nbhs_ninfty_lt</a></span> <span class="id">r</span> : <span class="id">r</span> \<span class="id">is</span> <span class="id">Num.real</span> -&gt; \<span class="kwd">forall</span> <span class="id">x</span> \<span class="id">near</span> -<span class="id">oo</span>, <span class="id">r</span>%:<span class="id">E</span> &gt; <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof67')">Proof.</span></div>
<div class="proofscript" id="proof67">
 <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">r</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_nbhs_ninfty_le">ereal_nbhs_ninfty_le</a></span> <span class="id">r</span> : <span class="id">r</span> \<span class="id">is</span> <span class="id">Num.real</span> -&gt; \<span class="kwd">forall</span> <span class="id">x</span> \<span class="id">near</span> -<span class="id">oo</span>, <span class="id">r</span>%:<span class="id">E</span> &gt;= <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof68')">Proof.</span></div>
<div class="proofscript" id="proof68">
 <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">r</span>; <span class="id">split</span> =&gt; // ?; <span class="id">apply</span>: <span class="id">ltW</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_nbhs_pinfty_real">ereal_nbhs_pinfty_real</a></span> : \<span class="kwd">forall</span> <span class="id">x</span> \<span class="id">near</span> +<span class="id">oo</span>, <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine">fine</a></span> <span class="id">x</span> \<span class="id">is</span> @<span class="id">Num.real</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs_infty.R">R</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof69')">Proof.</span></div>
<div class="proofscript" id="proof69">
<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.topology.html#filterS">filterS</a></span> (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs_pinfty_gt">ereal_nbhs_pinfty_gt</a></span> (@<span class="id">real0</span> <span class="id">_</span>)) =&gt; <span class="id">x</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id">x</span> =&gt; //= <span class="id">x</span>; <span class="id">apply</span>: <span class="id">gtr0_real</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_nbhs_ninfty_real">ereal_nbhs_ninfty_real</a></span> : \<span class="kwd">forall</span> <span class="id">x</span> \<span class="id">near</span> -<span class="id">oo</span>, <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine">fine</a></span> <span class="id">x</span> \<span class="id">is</span> @<span class="id">Num.real</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs_infty.R">R</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof70')">Proof.</span></div>
<div class="proofscript" id="proof70">
<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.topology.html#filterS">filterS</a></span> (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs_ninfty_lt">ereal_nbhs_ninfty_lt</a></span> (@<span class="id">real0</span> <span class="id">_</span>)) =&gt; <span class="id">x</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id">x</span> =&gt; //= <span class="id">x</span>; <span class="id">apply</span>: <span class="id">ltr0_real</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs_infty">ereal_nbhs_infty</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="ereal_topologicalType">ereal_topologicalType</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="ereal_topologicalType.R">R</a></span> : <span class="id">realFieldType</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_nbhs_singleton">ereal_nbhs_singleton</a></span> (<span class="id">p</span> : \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_topologicalType.R">R</a></span>) (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (\<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_topologicalType.R">R</a></span>)) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs">ereal_nbhs</a></span> <span class="id">p</span> <span class="id">A</span> -&gt; <span class="id">A</span> <span class="id">p</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof71')">Proof.</span></div>
<div class="proofscript" id="proof71">
<span class="id">move</span>: <span class="id">p</span> =&gt; -[<span class="id">p</span> | [<span class="id">M</span> [<span class="id">Mreal</span> <span class="id">MA</span>]] | [<span class="id">M</span> [<span class="id">Mreal</span> <span class="id">MA</span>]]] /=; [|<span class="id">exact</span>: <span class="id">MA</span> | <span class="id">exact</span>: <span class="id">MA</span>].<br/>
<span class="id">move</span>=&gt; /<span class="id"><a href="mathcomp.analysis.topology.html#nbhs_ballP">nbhs_ballP</a></span>[<span class="id">_</span>/<span class="id"><a href="mathcomp.analysis.signed.html#posnumP">posnumP</a></span>[<span class="id">e</span>]]; <span class="id">apply</span>; <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.topology.html#ballxx">ballxx</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_nbhs_nbhs">ereal_nbhs_nbhs</a></span> (<span class="id">p</span> : \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_topologicalType.R">R</a></span>) (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (\<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_topologicalType.R">R</a></span>)) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs">ereal_nbhs</a></span> <span class="id">p</span> <span class="id">A</span> -&gt; <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs">ereal_nbhs</a></span> <span class="id">p</span> (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs">ereal_nbhs</a></span>^~ <span class="id">A</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof72')">Proof.</span></div>
<div class="proofscript" id="proof72">
<span class="id">move</span>: <span class="id">p</span> =&gt; -[<span class="id">p</span>| [<span class="id">M</span> [<span class="id">Mreal</span> <span class="id">MA</span>]] | [<span class="id">M</span> [<span class="id">Mreal</span> <span class="id">MA</span>]]] //=.<br/>
- <span class="id">move</span>=&gt; /<span class="id"><a href="mathcomp.analysis.topology.html#nbhs_ballP">nbhs_ballP</a></span>[<span class="id">_</span>/<span class="id"><a href="mathcomp.analysis.signed.html#posnumP">posnumP</a></span>[<span class="id">e</span>]] <span class="id">ballA</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.topology.html#nbhs_ballP">nbhs_ballP</a></span>; <span class="kwd">exists</span> (<span class="id">e</span>%:<span class="id">num</span> / 2) =&gt; //= <span class="id">r</span> <span class="id">per</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.topology.html#nbhs_ballP">nbhs_ballP</a></span>; <span class="kwd">exists</span> (<span class="id">e</span>%:<span class="id">num</span> / 2) =&gt; //= <span class="id">x</span> <span class="id">rex</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">ballA</span>/(@<span class="id"><a href="mathcomp.analysis.topology.html#ball_splitl">ball_splitl</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">r</span>) =&gt; //; <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.topology.html#ball_sym">ball_sym</a></span>.<br/>
- <span class="kwd">exists</span> (<span class="id">M</span> + 1)%<span class="id">R</span>; <span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">realD</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; -[<span class="id">x</span>| <span class="id">_</span> |<span class="id">_</span>] //=; <span class="id">last</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">M</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span> =&gt; <span class="id">M</span>'<span class="id">x</span> /=.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.topology.html#nbhs_ballP">nbhs_ballP</a></span>; <span class="kwd">exists</span> 1%<span class="id">R</span> =&gt; //= <span class="id">y</span> <span class="id">x1y</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">MA</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">addrC</span> -<span class="id">ltr_subr_addl</span> <span class="kwd">in</span> <span class="id">M</span>'<span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">lt_le_trans</span> <span class="id">M</span>'<span class="id">x</span>) // <span class="id">ler_subl_addl</span> <span class="id">addrC</span> -<span class="id">ler_subl_addl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">le_trans</span> <span class="id">_</span> (<span class="id">ltW</span> <span class="id">x1y</span>)) // <span class="id">real_ler_norm</span> // <span class="id">realB</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">ltr_subr_addr</span> <span class="kwd">in</span> <span class="id">M</span>'<span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">comparabler0</span> (@<span class="id">comparabler_trans</span> <span class="id">_</span> (<span class="id">M</span> + 1)%<span class="id">R</span>) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">Order.comparable</span> (<span class="id">ltW</span> <span class="id">M</span>'<span class="id">x</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#orbT">orbT</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">comparabler0</span> <span class="id">realD</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">num_real</span>. <span class="comment">(*&nbsp;where&nbsp;we&nbsp;really&nbsp;use&nbsp;realFieldType&nbsp;*)</span><br/>
- <span class="kwd">exists</span> (<span class="id">M</span> - 1)%<span class="id">R</span>; <span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">realB</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; -[<span class="id">x</span>| <span class="id">_</span> |<span class="id">_</span>] //=; <span class="id">last</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">M</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span> =&gt; <span class="id">M</span>'<span class="id">x</span> /=.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.topology.html#nbhs_ballP">nbhs_ballP</a></span>; <span class="kwd">exists</span> 1%<span class="id">R</span> =&gt; //= <span class="id">y</span> <span class="id">x1y</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id">MA</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">ltr_subr_addl</span> <span class="kwd">in</span> <span class="id">M</span>'<span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">M</span>'<span class="id">x</span>) // <span class="id">addrC</span> -<span class="id">ler_subl_addl</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">le_trans</span> <span class="id">_</span> (<span class="id">ltW</span> <span class="id">x1y</span>)) // <span class="id">distrC</span> <span class="id">real_ler_norm</span> // <span class="id">realB</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">num_real</span>. <span class="comment">(*&nbsp;where&nbsp;we&nbsp;really&nbsp;use&nbsp;realFieldType&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">addrC</span> -<span class="id">ltr_subr_addr</span> <span class="kwd">in</span> <span class="id">M</span>'<span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">comparabler0</span> (@<span class="id">comparabler_trans</span> <span class="id">_</span> (<span class="id">M</span> - 1)%<span class="id">R</span>) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">Order.comparable</span> (<span class="id">ltW</span> <span class="id">M</span>'<span class="id">x</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">comparabler0</span> <span class="id">realB</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ereal_topologicalMixin">ereal_topologicalMixin</a></span> : <span class="id"><a href="mathcomp.analysis.topology.html#Topological.mixin_of">Topological.mixin_of</a></span> (@<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs">ereal_nbhs</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_topologicalType.R">R</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.topology.html#topologyOfFilterMixin">topologyOfFilterMixin</a></span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs_singleton">ereal_nbhs_singleton</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs_nbhs">ereal_nbhs_nbhs</a></span>.<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="ereal_topologicalType">ereal_topologicalType</a></span> := <span class="id"><a href="mathcomp.analysis.topology.html#Topological.Exports.TopologicalType">TopologicalType</a></span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_topologicalMixin">ereal_topologicalMixin</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_topologicalType">ereal_topologicalType</a></span>.<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">classical_set_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nbhsNe">nbhsNe</a></span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">x</span> : \<span class="id">bar</span> <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.topology.html#nbhs">nbhs</a></span> (- <span class="id">x</span>) = [<span class="id">set</span> (-%<span class="id">E</span> @` <span class="id">A</span>) | <span class="id">A</span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.analysis.topology.html#nbhs">nbhs</a></span> <span class="id">x</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof73')">Proof.</span></div>
<div class="proofscript" id="proof73">
<span class="id">case</span>: <span class="id">x</span> =&gt; [<span class="id">r</span> /=| |].<br/>
- <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.topology.html#nbhs">nbhs</a></span> /= /<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs">ereal_nbhs</a></span> -<span class="id"><a href="mathcomp.analysis.topology.html#nbhs_ballE">nbhs_ballE</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; <span class="id">S</span>; <span class="id">split</span> =&gt; [[<span class="id">_</span>/<span class="id"><a href="mathcomp.analysis.signed.html#posnumP">posnumP</a></span>[<span class="id">e</span>] <span class="id">reS</span>]|[<span class="id">S</span>' [<span class="id">_</span> /<span class="id"><a href="mathcomp.analysis.signed.html#posnumP">posnumP</a></span>[<span class="id">e</span>] <span class="id">reS</span>' &lt;-]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (-%<span class="id">E</span> @` <span class="id">S</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">e</span>%:<span class="id">num</span> =&gt; //= <span class="id">r1</span> <span class="id">rer1</span>; <span class="kwd">exists</span> (- <span class="id">r1</span>%:<span class="id">E</span>); <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span> <span class="id">reS</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.topology.html#ball">ball</a></span> /= <span class="id">opprK</span> -<span class="id">normrN</span> <span class="id">opprD</span> <span class="id">opprK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; <span class="id">s</span>; <span class="id">split</span> =&gt; [[<span class="id">y</span> [<span class="id">z</span> <span class="id">Sz</span>] &lt;- &lt;-]|<span class="id">Ss</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> (- <span class="id">s</span>); [<span class="kwd">exists</span> <span class="id">s</span> | <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>].<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">e</span>%:<span class="id">num</span> =&gt; //= <span class="id">r1</span> <span class="id">rer1</span>; <span class="kwd">exists</span> (- <span class="id">r1</span>%:<span class="id">E</span>); <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span> <span class="id">reS</span>'; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.topology.html#ball">ball</a></span> /= <span class="id">opprK</span> -<span class="id">normrN</span> <span class="id">opprD</span>.<br/>
- <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; <span class="id">S</span>; <span class="id">split</span>=&gt; [[<span class="id">M</span> [<span class="id">Mreal</span> <span class="id">MS</span>]]|[<span class="id">x</span> [<span class="id">M</span> [<span class="id">Mreal</span> <span class="id">Mx</span>]] &lt;-]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (-%<span class="id">E</span> @` <span class="id">S</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (- <span class="id">M</span>)%<span class="id">R</span>; <span class="id">rewrite</span> <span class="id">realN</span> <span class="id">Mreal</span>; <span class="id">split</span> =&gt; // <span class="id">x</span> <span class="id">Mx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> (- <span class="id">x</span>); [<span class="id">apply</span> <span class="id">MS</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_oppl">lte_oppl</a></span> | <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; <span class="id">x</span>; <span class="id">split</span>=&gt; [[<span class="id">y</span> [<span class="id">z</span> <span class="id">Sz</span> &lt;- &lt;-]]|<span class="id">Sx</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> (- <span class="id">x</span>); [<span class="kwd">exists</span> <span class="id">x</span> | <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>].<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> (- <span class="id">M</span>)%<span class="id">R</span>; <span class="id">rewrite</span> <span class="id">realN</span>; <span class="id">split</span> =&gt; // <span class="id">y</span> <span class="id">yM</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> (- <span class="id">y</span>); <span class="kwd">by</span> [<span class="id">apply</span> <span class="id">Mx</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_oppr">lte_oppr</a></span>|<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>].<br/>
- <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; <span class="id">S</span>; <span class="id">split</span>=&gt; [[<span class="id">M</span> [<span class="id">Mreal</span> <span class="id">MS</span>]]|[<span class="id">x</span> [<span class="id">M</span> [<span class="id">Mreal</span> <span class="id">Mx</span>]] &lt;-]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (-%<span class="id">E</span> @` <span class="id">S</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (- <span class="id">M</span>)%<span class="id">R</span>; <span class="id">rewrite</span> <span class="id">realN</span> <span class="id">Mreal</span>; <span class="id">split</span> =&gt; // <span class="id">x</span> <span class="id">Mx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> (- <span class="id">x</span>); [<span class="id">apply</span> <span class="id">MS</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_oppr">lte_oppr</a></span> | <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; <span class="id">x</span>; <span class="id">split</span>=&gt; [[<span class="id">y</span> [<span class="id">z</span> <span class="id">Sz</span> &lt;- &lt;-]]|<span class="id">Sx</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> (- <span class="id">x</span>); [<span class="kwd">exists</span> <span class="id">x</span> | <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>].<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> (- <span class="id">M</span>)%<span class="id">R</span>; <span class="id">rewrite</span> <span class="id">realN</span>; <span class="id">split</span> =&gt; // <span class="id">y</span> <span class="id">yM</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> (- <span class="id">y</span>); <span class="kwd">by</span> [<span class="id">apply</span> <span class="id">Mx</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_oppl">lte_oppl</a></span>|<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nbhsNKe">nbhsNKe</a></span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">z</span> : \<span class="id">bar</span> <span class="id">R</span>) (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (\<span class="id">bar</span> <span class="id">R</span>)) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.topology.html#nbhs">nbhs</a></span> (- <span class="id">z</span>) (-%<span class="id">E</span> @` <span class="id">A</span>) -&gt; <span class="id"><a href="mathcomp.analysis.topology.html#nbhs">nbhs</a></span> <span class="id">z</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof74')">Proof.</span></div>
<div class="proofscript" id="proof74">
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.ereal.html#nbhsNe">nbhsNe</a></span> =&gt; -[<span class="id">S</span> <span class="id">zS</span>] <span class="id">SA</span>; <span class="id">rewrite</span> -(<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span> <span class="id">z</span>) <span class="id"><a href="mathcomp.analysis.ereal.html#nbhsNe">nbhsNe</a></span>.<br/>
<span class="kwd">exists</span> (-%<span class="id">E</span> @` <span class="id">S</span>); <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.ereal.html#nbhsNe">nbhsNe</a></span>; <span class="kwd">exists</span> <span class="id">S</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; <span class="id">x</span>; <span class="id">split</span> =&gt; [[<span class="id">y</span> [<span class="id">u</span> <span class="id">Su</span> &lt;-{<span class="id">y</span>} &lt;-]]|<span class="id">Ax</span>].<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>: <span class="id">SA</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; /(<span class="id">_</span> (- <span class="id">u</span>)) [<span class="id">h</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;<span class="id">have</span> : (<span class="kwd">exists2</span> <span class="id">y</span>, <span class="id">S</span> <span class="id">y</span> &amp; - <span class="id">y</span> = - <span class="id">u</span>) <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">u</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>/<span class="id">h</span> =&gt; -[<span class="id">y</span> <span class="id">Ay</span>] /<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#eqe_opp">eqe_opp</a></span> =&gt; /<span class="id">eqP</span> &lt;-.<br/>
<span class="kwd">exists</span> (- <span class="id">x</span>); <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>.<br/>
<span class="kwd">exists</span> <span class="id">x</span> =&gt; //.<br/>
<span class="id">move</span>: <span class="id">SA</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; /(<span class="id">_</span> (- <span class="id">x</span>)) [<span class="id">_</span> <span class="id">h</span>].<br/>
<span class="id">have</span> : (-%<span class="id">E</span> @` <span class="id">A</span>) (- <span class="id">x</span>) <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">x</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>/<span class="id">h</span> =&gt; [<span class="id">y</span> <span class="id">Sy</span>] /<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#eqe_opp">eqe_opp</a></span> =&gt; /<span class="id">eqP</span> &lt;-.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="oppe_continuous">oppe_continuous</a></span> (<span class="id">R</span> : <span class="id">realFieldType</span>) : <span class="id"><a href="mathcomp.analysis.topology.html#continuous">continuous</a></span> (@<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppe">oppe</a></span> <span class="id">R</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof75')">Proof.</span></div>
<div class="proofscript" id="proof75">
<span class="id">move</span>=&gt; <span class="id">x</span> <span class="id">S</span> /= <span class="id">xS</span>; <span class="id">apply</span> <span class="id"><a href="mathcomp.analysis.ereal.html#nbhsNKe">nbhsNKe</a></span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#image_preimage">image_preimage</a></span> //.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; <span class="id">y</span>; <span class="id">split</span> =&gt; // <span class="id">_</span>; <span class="kwd">exists</span> (- <span class="id">y</span>) =&gt; //; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="contract_expand">contract_expand</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="contract_expand.R">R</a></span> : <span class="id">realFieldType</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">x</span> : \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand.R">R</a></span>) (<span class="id">r</span> : <span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand.R">R</a></span>).<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="contract_imageN">contract_imageN</a></span> (<span class="id">S</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (\<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand.R">R</a></span>)) :<br/>
&nbsp;&nbsp;(@<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand.R">R</a></span>) @` (-%<span class="id">E</span> @` <span class="id">S</span>) = -%<span class="id">R</span> @` ((@<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand.R">R</a></span>) @` <span class="id">S</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof76')">Proof.</span></div>
<div class="proofscript" id="proof76">
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; <span class="id">r</span>; <span class="id">split</span> =&gt; [[<span class="id">y</span> [<span class="id">z</span> <span class="id">Sz</span> &lt;-{<span class="id">y</span>} &lt;-{<span class="id">r</span>}]]|[<span class="id">s</span> [<span class="id">y</span> <span class="id">Sy</span> &lt;-{<span class="id">s</span>} &lt;-{<span class="id">r</span>}]]].<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">z</span>); [<span class="kwd">exists</span> <span class="id">z</span> | <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contractN">contractN</a></span>].<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> (- <span class="id">y</span>); [<span class="kwd">exists</span> <span class="id">y</span> | <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contractN">contractN</a></span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="contractK">contractK</a></span> : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#cancel">cancel</a></span> (@<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand.R">R</a></span>) (@<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#expand">expand</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand.R">R</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof77')">Proof.</span></div>
<div class="proofscript" id="proof77">
<span class="id">apply</span>: (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#onS_can">onS_can</a></span> [<span class="id">pred</span> <span class="id">r</span> | `|<span class="id">r</span>| &lt;= 1]%<span class="id">R</span> (@<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand.R">R</a></span>)).<br/>
<span class="id">exact</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#inj_can_sym_on">inj_can_sym_on</a></span> (@<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#expandK">expandK</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand.R">R</a></span>) (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#on2W">on2W</a></span> (@<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_inj">contract_inj</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand.R">R</a></span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bijective_contract">bijective_contract</a></span> : {<span class="id">on</span> [<span class="id">pred</span> <span class="id">r</span> | `|<span class="id">r</span>| &lt;= 1]%<span class="id">R</span>, <span class="id">bijective</span> (@<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand.R">R</a></span>)}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof78')">Proof.</span></div>
<div class="proofscript" id="proof78">
 <span class="kwd">exists</span> (@<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#expand">expand</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand.R">R</a></span>); [<span class="id">exact</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in1W">in1W</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#contractK">contractK</a></span> | <span class="id">exact</span>: (@<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#expandK">expandK</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand.R">R</a></span>)]. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="le_expandLR">le_expandLR</a></span> := <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#monoLR_in">monoLR_in</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in_onW_can">in_onW_can</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#predT">predT</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#contractK">contractK</a></span>) (<span class="kwd">fun</span> <span class="id">x</span> <span class="id">_</span> =&gt; <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> <span class="id">x</span>) (@<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#le_expand_in">le_expand_in</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand.R">R</a></span>).<br/>
<span class="kwd">Definition</span> <span class="id"><a name="lt_expandLR">lt_expandLR</a></span> := <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#monoLR_in">monoLR_in</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in_onW_can">in_onW_can</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#predT">predT</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#contractK">contractK</a></span>) (<span class="kwd">fun</span> <span class="id">x</span> <span class="id">_</span> =&gt; <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> <span class="id">x</span>) (@<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lt_expand">lt_expand</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand.R">R</a></span>).<br/>
<span class="kwd">Definition</span> <span class="id"><a name="le_expandRL">le_expandRL</a></span> := <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#monoRL_in">monoRL_in</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in_onW_can">in_onW_can</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#predT">predT</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#contractK">contractK</a></span>) (<span class="kwd">fun</span> <span class="id">x</span> <span class="id">_</span> =&gt; <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> <span class="id">x</span>) (@<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#le_expand_in">le_expand_in</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand.R">R</a></span>).<br/>
<span class="kwd">Definition</span> <span class="id"><a name="lt_expandRL">lt_expandRL</a></span> := <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#monoRL_in">monoRL_in</a></span><br/>
&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in_onW_can">in_onW_can</a></span> <span class="id">_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#predT">predT</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#contractK">contractK</a></span>) (<span class="kwd">fun</span> <span class="id">x</span> <span class="id">_</span> =&gt; <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> <span class="id">x</span>) (@<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lt_expand">lt_expand</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand.R">R</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="contract_eq0">contract_eq0</a></span> <span class="id">x</span> : (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">x</span> == 0%<span class="id">R</span>) = (<span class="id">x</span> == 0).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof79')">Proof.</span></div>
<div class="proofscript" id="proof79">
 <span class="kwd">by</span> <span class="id">rewrite</span> -(<span class="id">can_eq</span> <span class="id"><a href="mathcomp.analysis.ereal.html#contractK">contractK</a></span>) <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract0">contract0</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="contract_eqN1">contract_eqN1</a></span> <span class="id">x</span> : (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">x</span> == -1) = (<span class="id">x</span> == -<span class="id">oo</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof80')">Proof.</span></div>
<div class="proofscript" id="proof80">
 <span class="kwd">by</span> <span class="id">rewrite</span> -(<span class="id">can_eq</span> <span class="id"><a href="mathcomp.analysis.ereal.html#contractK">contractK</a></span>). Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="contract_eq1">contract_eq1</a></span> <span class="id">x</span> : (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">x</span> == 1%<span class="id">R</span>) = (<span class="id">x</span> == +<span class="id">oo</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof81')">Proof.</span></div>
<div class="proofscript" id="proof81">
 <span class="kwd">by</span> <span class="id">rewrite</span> -(<span class="id">can_eq</span> <span class="id"><a href="mathcomp.analysis.ereal.html#contractK">contractK</a></span>). Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand">contract_expand</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="contract_expand_realType">contract_expand_realType</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="contract_expand_realType.R">R</a></span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="contract_expand_realType.contract">contract</a></span> := @<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand_realType.R">R</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sup_contract_le1">sup_contract_le1</a></span> <span class="id">S</span> : <span class="id">S</span> !=<span class="id">set0</span> -&gt; (`|<span class="id"><a href="mathcomp.analysis.reals.html#sup">sup</a></span> (<span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand_realType.contract">contract</a></span> @` <span class="id">S</span>)| &lt;= 1)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof82')">Proof.</span></div>
<div class="proofscript" id="proof82">
<span class="id">case</span>=&gt; <span class="id">x</span> <span class="id">Sx</span>; <span class="id">rewrite</span> <span class="id">ler_norml</span>; <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>; <span class="id">split</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="mathcomp.analysis.reals.html#sup_le_ub">sup_le_ub</a></span>; <span class="id">first</span> <span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand_realType.contract">contract</a></span> <span class="id">x</span>), <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">r</span> [<span class="id">y</span> <span class="id">Sy</span>] &lt;-; <span class="id">case</span>/<span class="id">ler_normlP</span> : (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> <span class="id">y</span>).<br/>
<span class="id">rewrite</span> (@<span class="id">le_trans</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand_realType.contract">contract</a></span> <span class="id">x</span>)) //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>/<span class="id">ler_normlP</span> : (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> <span class="id">x</span>); <span class="id">rewrite</span> <span class="id">ler_oppl</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="mathcomp.analysis.reals.html#sup_ub">sup_ub</a></span>; <span class="id">last</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">x</span>.<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> 1%<span class="id">R</span> =&gt; <span class="id">r</span> [<span class="id">y</span> <span class="id">Sy</span> &lt;-]; <span class="id">case</span>/<span class="id">ler_normlP</span> : (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> <span class="id">y</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="contract_sup">contract_sup</a></span> <span class="id">S</span> : <span class="id">S</span> !=<span class="id">set0</span> -&gt; <span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand_realType.contract">contract</a></span> (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> <span class="id">S</span>) = <span class="id"><a href="mathcomp.analysis.reals.html#sup">sup</a></span> (<span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand_realType.contract">contract</a></span> @` <span class="id">S</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof83')">Proof.</span></div>
<div class="proofscript" id="proof83">
<span class="id">move</span>=&gt; <span class="id">S0</span>; <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">eq_le</span>; <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>; <span class="id">split</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="mathcomp.analysis.reals.html#sup_le_ub">sup_le_ub</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>: <span class="id">S0</span> =&gt; <span class="id">x</span> <span class="id">Sx</span>; <span class="kwd">exists</span> (<span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand_realType.contract">contract</a></span> <span class="id">x</span>), <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">x</span> [<span class="id">y</span> <span class="id">Sy</span>] &lt;-{<span class="id">x</span>}; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#le_contract">le_contract</a></span>; <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup_ub">ereal_sup_ub</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">leNgt</span>; <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">negP</a></span>.<br/>
<span class="id">set</span> <span class="id">supc</span> := <span class="id"><a href="mathcomp.analysis.reals.html#sup">sup</a></span> <span class="id">_</span>; <span class="id">set</span> <span class="id">csup</span> := <span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand_realType.contract">contract</a></span> <span class="id">_</span>; <span class="id">move</span>=&gt; <span class="id">ltsup</span>.<br/>
<span class="id">suff</span> [<span class="id">y</span> [<span class="id">ysupS</span> ?]] : <span class="kwd">exists</span> <span class="id">y</span>, <span class="id">y</span> &lt; <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> <span class="id">S</span> /\ <span class="id"><a href="mathcomp.classical.classical_sets.html#ubound">ubound</a></span> <span class="id">S</span> <span class="id">y</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> <span class="id">S</span> &lt;= <span class="id">y</span> <span class="kwd">by</span> <span class="id">apply</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ub_ereal_sup">ub_ereal_sup</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>/(<span class="id">lt_le_trans</span> <span class="id">ysupS</span>); <span class="id">rewrite</span> <span class="id">ltxx</span>.<br/>
<span class="id">suff</span> [<span class="id">x</span> [? [<span class="id">ubSx</span> <span class="id">x1</span>]]] : <span class="kwd">exists</span> <span class="id">x</span>, (<span class="id">x</span> &lt; <span class="id">csup</span>)%<span class="id">R</span> /\ <span class="id"><a href="mathcomp.classical.classical_sets.html#ubound">ubound</a></span> (<span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand_realType.contract">contract</a></span> @` <span class="id">S</span>) <span class="id">x</span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(`|<span class="id">x</span>| &lt;= 1)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#expand">expand</a></span> <span class="id">x</span>); <span class="id">split</span> =&gt; [|<span class="id">y</span> <span class="id">Sy</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -(<span class="id"><a href="mathcomp.analysis.ereal.html#contractK">contractK</a></span> (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> <span class="id">S</span>)) <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lt_expand">lt_expand</a></span> // <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> // <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -(<span class="id"><a href="mathcomp.analysis.ereal.html#contractK">contractK</a></span> <span class="id">y</span>) <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#le_expand">le_expand</a></span> //; <span class="id">apply</span> <span class="id">ubSx</span>; <span class="kwd">exists</span> <span class="id">y</span>.<br/>
<span class="kwd">exists</span> ((<span class="id">supc</span> + <span class="id">csup</span>) / 2); <span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">midf_lt</span>.<br/>
<span class="id">split</span> =&gt; [<span class="id">r</span> [<span class="id">y</span> <span class="id">Sy</span> &lt;-{<span class="id">r</span>}]|].<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (@<span class="id">le_trans</span> <span class="id">_</span> <span class="id">_</span> <span class="id">supc</span>) ?<span class="id">midf_le</span> //; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ltW</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span> <span class="id"><a href="mathcomp.analysis.reals.html#sup_ub">sup_ub</a></span>; <span class="id">last</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">y</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> 1%<span class="id">R</span> =&gt; <span class="id">r</span> [<span class="id">z</span> <span class="id">Sz</span> &lt;-]; <span class="id">case</span>/<span class="id">ler_normlP</span> : (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> <span class="id">z</span>).<br/>
<span class="id">rewrite</span> <span class="id">ler_norml</span>; <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>; <span class="id">split</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">ler_pdivr_mulr</span> // <span class="id">mul1r</span> (<span class="id">_</span> : 2 = 1 + 1)%<span class="id">R</span> // <span class="id">ler_add</span> //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>/<span class="id">ler_normlP</span> : (<span class="id"><a href="mathcomp.analysis.ereal.html#sup_contract_le1">sup_contract_le1</a></span> <span class="id">S0</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>/<span class="id">ler_normlP</span> : (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> <span class="id">S</span>)).<br/>
<span class="id">rewrite</span> <span class="id">ler_pdivl_mulr</span> // (<span class="id">_</span> : 2 = 1 + 1)%<span class="id">R</span> // <span class="id">mulN1r</span> <span class="id">opprD</span> <span class="id">ler_add</span> //.<br/>
<span class="kwd">by</span> <span class="id">case</span>/<span class="id">ler_normlP</span> : (<span class="id"><a href="mathcomp.analysis.ereal.html#sup_contract_le1">sup_contract_le1</a></span> <span class="id">S0</span>); <span class="id">rewrite</span> <span class="id">ler_oppl</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>/<span class="id">ler_normlP</span> : (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> <span class="id">S</span>)); <span class="id">rewrite</span> <span class="id">ler_oppl</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="contract_inf">contract_inf</a></span> <span class="id">S</span> : <span class="id">S</span> !=<span class="id">set0</span> -&gt; <span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand_realType.contract">contract</a></span> (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf">ereal_inf</a></span> <span class="id">S</span>) = <span class="id"><a href="mathcomp.analysis.reals.html#inf">inf</a></span> (<span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand_realType.contract">contract</a></span> @` <span class="id">S</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof84')">Proof.</span></div>
<div class="proofscript" id="proof84">
<span class="id">move</span>=&gt; -[<span class="id">x</span> <span class="id">Sx</span>]; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_inf">ereal_inf</a></span> /<span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand_realType.contract">contract</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contractN">contractN</a></span> (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">ereal_sup</a></span> (-%<span class="id">E</span> @` <span class="id">S</span>))).<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -/<span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand_realType.contract">contract</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#contract_sup">contract_sup</a></span> /<span class="id"><a href="mathcomp.analysis.reals.html#inf">inf</a></span>; [<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.ereal.html#contract_imageN">contract_imageN</a></span> | <span class="kwd">exists</span> (- <span class="id">x</span>), <span class="id">x</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.ereal.html#contract_expand_realType">contract_expand_realType</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="ereal_PseudoMetric">ereal_PseudoMetric</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="ereal_PseudoMetric.R">R</a></span> : <span class="id">realFieldType</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">x</span> <span class="id">y</span> : \<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>) (<span class="id">r</span> : <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="le_ereal_ball">le_ereal_ball</a></span> <span class="id">x</span> : {<span class="id">homo</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> <span class="id">x</span> : <span class="id">e</span> <span class="id">e</span>' / (<span class="id">e</span> &lt;= <span class="id">e</span>')%<span class="id">R</span> &gt;-&gt; <span class="id">e</span> `&lt;=` <span class="id">e</span>'}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof85')">Proof.</span></div>
<div class="proofscript" id="proof85">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">e</span> <span class="id">e</span>' <span class="id">ee</span>' <span class="id">y</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> =&gt; /<span class="id">lt_le_trans</span>; <span class="id">exact</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="expand_ereal_ball_pinfty">expand_ereal_ball_pinfty</a></span> {<span class="id">e</span> : {<span class="id">posnum</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>}} <span class="id">r</span> : (<span class="id">e</span>%:<span class="id">num</span> &lt;= 1)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#expand">expand</a></span> (1 - <span class="id">e</span>%:<span class="id">num</span>)%<span class="id">R</span> &lt; <span class="id">r</span>%:<span class="id">E</span> -&gt; <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> +<span class="id">oo</span> <span class="id">e</span>%:<span class="id">num</span> <span class="id">r</span>%:<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof86')">Proof.</span></div>
<div class="proofscript" id="proof86">
<span class="id">move</span>=&gt; <span class="id">e1</span> <span class="id">er</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> <span class="id">gtr0_norm</span> ?<span class="id">subr_gt0</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>/<span class="id">ltr_normlP</span> : (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_lt1">contract_lt1</a></span> <span class="id">r</span>).<br/>
<span class="id">rewrite</span> <span class="id">ltr_subl_addl</span> <span class="id">addrC</span> -<span class="id">ltr_subl_addl</span> -[<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#ltLHS">ltLHS</a></span>]<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#expandK">expandK</a></span> ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lt_contract">lt_contract</a></span>//.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> <span class="id">ger0_norm</span> ?<span class="id">ler_subl_addl</span> ?<span class="id">ler_addr</span> // <span class="id">subr_ge0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="contract_ereal_ball_fin_le">contract_ereal_ball_fin_le</a></span> <span class="id">r</span> <span class="id">r</span>' (<span class="id">e</span> : {<span class="id">posnum</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>}) : (<span class="id">r</span> &lt;= <span class="id">r</span>')%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(1 &lt;= <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> + <span class="id">e</span>%:<span class="id">num</span>)%<span class="id">R</span> -&gt; <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> <span class="id">r</span>%:<span class="id">E</span> <span class="id">e</span>%:<span class="id">num</span> <span class="id">r</span>'%:<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof87')">Proof.</span></div>
<div class="proofscript" id="proof87">
<span class="id">rewrite</span> <span class="id">le_eqVlt</span> =&gt; /<span class="id">predU1P</span>[&lt;-{<span class="id">r</span>'} <span class="id">_</span>|<span class="id">rr</span>' <span class="id">re1</span>]; <span class="id">first</span> <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball_center">ereal_ball_center</a></span>.<br/>
<span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> <span class="id">ltr0_norm</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">subr_lt0</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lt_contract">lt_contract</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">opprB</span> <span class="id">ltr_subl_addl</span> (<span class="id">lt_le_trans</span> <span class="id">_</span> <span class="id">re1</span>) //.<br/>
<span class="kwd">by</span> <span class="id">case</span>/<span class="id">ltr_normlP</span> : (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_lt1">contract_lt1</a></span> <span class="id">r</span>').<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="contract_ereal_ball_fin_lt">contract_ereal_ball_fin_lt</a></span> <span class="id">r</span> <span class="id">r</span>' (<span class="id">e</span> : {<span class="id">posnum</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>}) : (<span class="id">r</span>' &lt; <span class="id">r</span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> - <span class="id">e</span>%:<span class="id">num</span> &lt;= -1)%<span class="id">R</span>  -&gt; <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> <span class="id">r</span>%:<span class="id">E</span> <span class="id">e</span>%:<span class="id">num</span> <span class="id">r</span>'%:<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof88')">Proof.</span></div>
<div class="proofscript" id="proof88">
<span class="id">move</span>=&gt; <span class="id">r</span>'<span class="id">r</span> <span class="id">reN1</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">gtr0_norm</span> ?<span class="id">subr_gt0</span> ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lt_contract">lt_contract</a></span> ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span>//.<br/>
<span class="id">rewrite</span> <span class="id">ltr_subl_addl</span> <span class="id">addrC</span> -<span class="id">ltr_subl_addl</span> (<span class="id">le_lt_trans</span> <span class="id">reN1</span>) //.<br/>
<span class="kwd">by</span> <span class="id">move</span>: (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_lt1">contract_lt1</a></span> <span class="id">r</span>'); <span class="id">rewrite</span> <span class="id">ltr_norml</span> =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="expand_ereal_ball_fin_lt">expand_ereal_ball_fin_lt</a></span> <span class="id">r</span>' <span class="id">r</span> (<span class="id">e</span> : {<span class="id">posnum</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>}) : (<span class="id">r</span>' &lt; <span class="id">r</span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#expand">expand</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> - <span class="id">e</span>%:<span class="id">num</span>)%<span class="id">R</span> &lt; <span class="id">r</span>'%:<span class="id">E</span> -&gt;<br/>
&nbsp;&nbsp;(`|<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> - <span class="id">e</span>%:<span class="id">num</span>| &lt; 1)%<span class="id">R</span> -&gt; <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> <span class="id">r</span>%:<span class="id">E</span> <span class="id">e</span>%:<span class="id">num</span> <span class="id">r</span>'%:<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof89')">Proof.</span></div>
<div class="proofscript" id="proof89">
<span class="id">move</span>=&gt; <span class="id">r</span>'<span class="id">r</span> ? <span class="id">r</span>'<span class="id">e</span>'<span class="id">r</span>.<br/>
<span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> <span class="id">gtr0_norm</span> ?<span class="id">subr_gt0</span> ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lt_contract">lt_contract</a></span> ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span>//.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ltr_subl_addl</span> <span class="id">addrC</span> -<span class="id">ltr_subl_addl</span> -<span class="id"><a href="mathcomp.analysis.ereal.html#lt_expandLR">lt_expandLR</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> ?<span class="id">ltW</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ball_ereal_ball_fin_lt">ball_ereal_ball_fin_lt</a></span> <span class="id">r</span> <span class="id">r</span>' (<span class="id">e</span> : {<span class="id">posnum</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>}) :<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">e</span>' := (<span class="id">r</span> - <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine">fine</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#expand">expand</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> - <span class="id">e</span>%:<span class="id">num</span>)))%<span class="id">R</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.topology.html#ball">ball</a></span> <span class="id">r</span> <span class="id">e</span>' <span class="id">r</span>' -&gt; (<span class="id">r</span>' &lt; <span class="id">r</span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(`|<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> - (<span class="id">e</span>)%:<span class="id">num</span>| &lt; 1)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> <span class="id">r</span>%:<span class="id">E</span> (<span class="id">e</span>)%:<span class="id">num</span> <span class="id">r</span>'%:<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof90')">Proof.</span></div>
<div class="proofscript" id="proof90">
<span class="id">move</span>=&gt; <span class="id">e</span>' <span class="id">re</span>'<span class="id">r</span>' <span class="id">rr</span>' <span class="id">X</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span>.<br/>
<span class="id">rewrite</span> <span class="id">gtr0_norm</span> ?<span class="id">subr_gt0</span>// ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lt_contract">lt_contract</a></span> ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span>//.<br/>
<span class="id">move</span>: <span class="id">re</span>'<span class="id">r</span>'.<br/>
<span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.topology.html#ball">ball</a></span> /= <span class="id">gtr0_norm</span> // ?<span class="id">subr_gt0</span>// /<span class="id">e</span>'.<br/>
<span class="id">rewrite</span> -<span class="id">ltr_subl_addl</span> <span class="id">addrAC</span> <span class="id">subrr</span> <span class="id">add0r</span> <span class="id">ltr_oppl</span> <span class="id">opprK</span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine_expand">fine_expand</a></span> // <span class="id"><a href="mathcomp.analysis.ereal.html#lt_expandLR">lt_expandLR</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> ?<span class="id">ltW</span>//.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ltr_subl_addl</span> <span class="id">addrC</span> -<span class="id">ltr_subl_addl</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ball_ereal_ball_fin_le">ball_ereal_ball_fin_le</a></span> <span class="id">r</span> <span class="id">r</span>' (<span class="id">e</span> : {<span class="id">posnum</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>}) :<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">e</span>' : <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span> := (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine">fine</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#expand">expand</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> + <span class="id">e</span>%:<span class="id">num</span>)) - <span class="id">r</span>)%<span class="id">R</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.topology.html#ball">ball</a></span> <span class="id">r</span> <span class="id">e</span>' <span class="id">r</span>' -&gt; (<span class="id">r</span> &lt;= <span class="id">r</span>')%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(`| <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> + <span class="id">e</span>%:<span class="id">num</span> | &lt; 1)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> <span class="id">r</span>%:<span class="id">E</span> <span class="id">e</span>%:<span class="id">num</span> <span class="id">r</span>'%:<span class="id">E</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof91')">Proof.</span></div>
<div class="proofscript" id="proof91">
<span class="id">move</span>=&gt; <span class="id">e</span>' <span class="id">r</span>'<span class="id">e</span>'<span class="id">r</span> <span class="id">rr</span>' <span class="id">re1</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span>.<br/>
<span class="id">move</span>: <span class="id">rr</span>'; <span class="id">rewrite</span> <span class="id">le_eqVlt</span> =&gt; /<span class="id">predU1P</span>[-&gt;|<span class="id">rr</span>']; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">subrr</span> <span class="id">normr0</span>.<br/>
<span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.topology.html#ball">ball</a></span> /= <span class="id">ltr0_norm</span> ?<span class="id">subr_lt0</span>// <span class="id">opprB</span> <span class="kwd">in</span> <span class="id">r</span>'<span class="id">e</span>'<span class="id">r</span>.<br/>
<span class="id">rewrite</span> <span class="id">ltr0_norm</span> ?<span class="id">subr_lt0</span> ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lt_contract">lt_contract</a></span> ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span>//.<br/>
<span class="id">rewrite</span> <span class="id">opprB</span>; <span class="id">move</span>: <span class="id">r</span>'<span class="id">e</span>'<span class="id">r</span>.<br/>
<span class="id">rewrite</span> /<span class="id">e</span>' -<span class="id">ltr_subl_addr</span> <span class="id">opprK</span> <span class="id">subrK</span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine_expand">fine_expand</a></span> //.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.ereal.html#lt_expandRL">lt_expandRL</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> ?<span class="id">ltW</span>// <span class="id">ltr_subl_addl</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nbhs_oo_up_e1">nbhs_oo_up_e1</a></span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (\<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>)) (<span class="id">e</span> : {<span class="id">posnum</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>}) : (<span class="id">e</span>%:<span class="id">num</span> &lt;= 1)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> +<span class="id">oo</span> <span class="id">e</span>%:<span class="id">num</span> `&lt;=` <span class="id">A</span> -&gt; <span class="id"><a href="mathcomp.analysis.topology.html#nbhs">nbhs</a></span> +<span class="id">oo</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof92')">Proof.</span></div>
<div class="proofscript" id="proof92">
<span class="id">move</span>=&gt; <span class="id">e1</span> <span class="id">ooeA</span>.<br/>
<span class="kwd">exists</span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine">fine</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#expand">expand</a></span> (1 - <span class="id">e</span>%:<span class="id">num</span>)%<span class="id">R</span>)); <span class="id">rewrite</span> <span class="id">num_real</span>; <span class="id">split</span> =&gt; //.<br/>
<span class="id">case</span> =&gt; [<span class="id">r</span> | | //].<br/>
- <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine_expand">fine_expand</a></span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ger0_norm</span> ?<span class="id">ltr_subl_addl</span> ?<span class="id">ltr_addr</span> // <span class="id">subr_ge0</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; ?; <span class="id">exact</span>/<span class="id">ooeA</span>/<span class="id"><a href="mathcomp.analysis.ereal.html#expand_ereal_ball_pinfty">expand_ereal_ball_pinfty</a></span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">_</span>; <span class="id">exact</span>/<span class="id">ooeA</span>/<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball_center">ereal_ball_center</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nbhs_oo_down_e1">nbhs_oo_down_e1</a></span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (\<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>)) (<span class="id">e</span> : {<span class="id">posnum</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>}) : (<span class="id">e</span>%:<span class="id">num</span> &lt;= 1)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> -<span class="id">oo</span> <span class="id">e</span>%:<span class="id">num</span> `&lt;=` <span class="id">A</span> -&gt; <span class="id"><a href="mathcomp.analysis.topology.html#nbhs">nbhs</a></span> -<span class="id">oo</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof93')">Proof.</span></div>
<div class="proofscript" id="proof93">
<span class="id">move</span>=&gt; <span class="id">e1</span> <span class="id">reA</span>; <span class="id">suff</span> <span class="id">h</span> : <span class="id"><a href="mathcomp.analysis.topology.html#nbhs">nbhs</a></span> +<span class="id">oo</span> (-%<span class="id">E</span> @` <span class="id">A</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">_</span> : -<span class="id">oo</span> = - +<span class="id">oo</span>) // <span class="id"><a href="mathcomp.analysis.ereal.html#nbhsNe">nbhsNe</a></span>; <span class="kwd">exists</span> (-%<span class="id">E</span> @` <span class="id">A</span>) =&gt; //.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; <span class="id">x</span>; <span class="id">split</span>=&gt; [[<span class="id">y</span> [<span class="id">z</span> <span class="id">Az</span> &lt;- &lt;-]]|<span class="id">Ax</span>]; <span class="id">rewrite</span> ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span> //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> (- <span class="id">x</span>); [<span class="kwd">exists</span> <span class="id">x</span> | <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>].<br/>
<span class="id">apply</span> (@<span class="id"><a href="mathcomp.analysis.ereal.html#nbhs_oo_up_e1">nbhs_oo_up_e1</a></span> <span class="id">_</span> <span class="id">e</span>) =&gt; // <span class="id">x</span> <span class="id">x1e</span>; <span class="kwd">exists</span> (- <span class="id">x</span>); <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">reA</span>/<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ballN">ereal_ballN</a></span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nbhs_oo_up_1e">nbhs_oo_up_1e</a></span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (\<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>)) (<span class="id">e</span> : {<span class="id">posnum</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>}) : (1 &lt; <span class="id">e</span>%:<span class="id">num</span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> +<span class="id">oo</span> <span class="id">e</span>%:<span class="id">num</span> `&lt;=` <span class="id">A</span> -&gt; <span class="id"><a href="mathcomp.analysis.topology.html#nbhs">nbhs</a></span> +<span class="id">oo</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof94')">Proof.</span></div>
<div class="proofscript" id="proof94">
<span class="id">move</span>=&gt; <span class="id">e1</span> <span class="id">reA</span>; <span class="id">have</span> [<span class="id">e2</span>{<span class="id">e1</span>}|<span class="id">e2</span>] := <span class="id">ltrP</span> 2 <span class="id">e</span>%:<span class="id">num</span>.<br/>
&nbsp;&nbsp;<span class="id">suff</span> -&gt; : <span class="id">A</span> = <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="kwd">by</span> <span class="kwd">exists</span> 0%<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; <span class="id">x</span>; <span class="id">split</span> =&gt; // <span class="id">_</span>; <span class="id">apply</span> <span class="id">reA</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ballN">ereal_ballN</a></span>/<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball_ninfty_oversize">ereal_ball_ninfty_oversize</a></span>.<br/>
<span class="id">have</span> /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[<span class="id">e10</span> <span class="id">e11</span>] : (0 &lt; <span class="id">e</span>%:<span class="id">num</span> - 1 &lt;= 1)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">subr_gt0</span> <span class="id">e1</span> /= <span class="id">ler_subl_addl</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="mathcomp.analysis.ereal.html#nbhsNKe">nbhsNKe</a></span>.<br/>
<span class="id">have</span> : ((<span class="id"><a href="mathcomp.analysis.signed.html#PosNum">PosNum</a></span> <span class="id">e10</span>)%:<span class="id">num</span> &lt;= 1)%<span class="id">R</span> <span class="kwd">by</span> [].<br/>
<span class="id">move</span>/(@<span class="id"><a href="mathcomp.analysis.ereal.html#nbhs_oo_down_e1">nbhs_oo_down_e1</a></span> (-%<span class="id">E</span> @` <span class="id">A</span>) (<span class="id"><a href="mathcomp.analysis.signed.html#PosNum">PosNum</a></span> <span class="id">e10</span>)); <span class="id">apply</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">y</span> <span class="id">ye</span>; <span class="kwd">exists</span> (- <span class="id">y</span>); <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>.<br/>
<span class="id">apply</span>/<span class="id">reA</span>/<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ballN">ereal_ballN</a></span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span> /=.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#le_ereal_ball">le_ereal_ball</a></span> <span class="id">ye</span> =&gt; /=; <span class="id">rewrite</span> <span class="id">ler_subl_addl</span> <span class="id">ler_addr</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nbhs_oo_down_1e">nbhs_oo_down_1e</a></span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (\<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>)) (<span class="id">e</span> : {<span class="id">posnum</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>}) : (1 &lt; <span class="id">e</span>%:<span class="id">num</span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> -<span class="id">oo</span> <span class="id">e</span>%:<span class="id">num</span> `&lt;=` <span class="id">A</span> -&gt; <span class="id"><a href="mathcomp.analysis.topology.html#nbhs">nbhs</a></span> -<span class="id">oo</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof95')">Proof.</span></div>
<div class="proofscript" id="proof95">
<span class="id">move</span>=&gt; <span class="id">e1</span> <span class="id">reA</span>; <span class="id">have</span> [<span class="id">e2</span>{<span class="id">e1</span>}|<span class="id">e2</span>] := <span class="id">ltrP</span> 2 <span class="id">e</span>%:<span class="id">num</span>.<br/>
&nbsp;&nbsp;<span class="id">suff</span> -&gt; : <span class="id">A</span> = <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="kwd">by</span> <span class="kwd">exists</span> 0%<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; <span class="id">x</span>; <span class="id">split</span> =&gt; // <span class="id">_</span>; <span class="id">exact</span>/<span class="id">reA</span>/<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball_ninfty_oversize">ereal_ball_ninfty_oversize</a></span>.<br/>
<span class="id">have</span> /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[<span class="id">e10</span> <span class="id">e11</span>] : (0 &lt; <span class="id">e</span>%:<span class="id">num</span> - 1 &lt;= 1)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">subr_gt0</span> <span class="id">e1</span> /= <span class="id">ler_subl_addl</span>.<br/>
<span class="id">apply</span> <span class="id"><a href="mathcomp.analysis.ereal.html#nbhsNKe">nbhsNKe</a></span>.<br/>
<span class="id">have</span> : ((<span class="id"><a href="mathcomp.analysis.signed.html#PosNum">PosNum</a></span> <span class="id">e10</span>)%:<span class="id">num</span> &lt;= 1)%<span class="id">R</span> <span class="kwd">by</span> [].<br/>
<span class="id">move</span>/(@<span class="id"><a href="mathcomp.analysis.ereal.html#nbhs_oo_up_e1">nbhs_oo_up_e1</a></span> (-%<span class="id">E</span> @` <span class="id">A</span>) (<span class="id"><a href="mathcomp.analysis.signed.html#PosNum">PosNum</a></span> <span class="id">e10</span>)); <span class="id">apply</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">y</span> <span class="id">ye</span>; <span class="kwd">exists</span> (- <span class="id">y</span>); <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>.<br/>
<span class="id">apply</span>/<span class="id">reA</span>/<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ballN">ereal_ballN</a></span>; <span class="id">rewrite</span> /= <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">oppeK</a></span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#le_ereal_ball">le_ereal_ball</a></span> <span class="id">ye</span> =&gt; /=; <span class="id">rewrite</span> <span class="id">ler_subl_addl</span> <span class="id">ler_addr</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nbhs_fin_out_above">nbhs_fin_out_above</a></span> <span class="id">r</span> (<span class="id">e</span> : {<span class="id">posnum</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>}) (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (\<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>)) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> <span class="id">r</span>%:<span class="id">E</span> <span class="id">e</span>%:<span class="id">num</span> `&lt;=` <span class="id">A</span> -&gt;<br/>
&nbsp;&nbsp;(- 1 &lt; <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> - <span class="id">e</span>%:<span class="id">num</span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(1 &lt;= <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> + <span class="id">e</span>%:<span class="id">num</span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.topology.html#nbhs">nbhs</a></span> <span class="id">r</span>%:<span class="id">E</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof96')">Proof.</span></div>
<div class="proofscript" id="proof96">
<span class="id">move</span>=&gt; <span class="id">reA</span> <span class="id">reN1</span> <span class="id">re1</span>.<br/>
<span class="id">have</span> <span class="id">er1</span> : (`|<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> - <span class="id">e</span>%:<span class="id">num</span>| &lt; 1)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">ltr_norml</span> <span class="id">reN1</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andTb">andTb</a></span> <span class="id">ltr_subl_addl</span> <span class="id">ltr_spaddl</span> //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>: (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> <span class="id">r</span>%:<span class="id">E</span>); <span class="id">rewrite</span> <span class="id">ler_norml</span> =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[].<br/>
<span class="id">pose</span> <span class="id">e</span>' := (<span class="id">r</span> - <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine">fine</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#expand">expand</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> - <span class="id">e</span>%:<span class="id">num</span>)))%<span class="id">R</span>.<br/>
<span class="id">have</span> <span class="id">e</span>'0 : (0 &lt; <span class="id">e</span>')%<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">subr_gt0</span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span> -[<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#ltRHS">ltRHS</a></span>](<span class="id"><a href="mathcomp.analysis.ereal.html#contractK">contractK</a></span> <span class="id">r</span>%:<span class="id">E</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine_expand">fine_expand</a></span> // <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lt_expand">lt_expand</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span>// ?<span class="id">ltW</span>//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ltr_subl_addl</span> <span class="id">ltr_addr</span>.<br/>
<span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.topology.html#nbhs_ballP">nbhs_ballP</a></span>; <span class="kwd">exists</span> <span class="id">e</span>' =&gt; // <span class="id">r</span>' <span class="id">re</span>'<span class="id">r</span>'; <span class="id">apply</span> <span class="id">reA</span>.<br/>
<span class="kwd">by</span> <span class="id">have</span> [?|?] := <span class="id">lerP</span> <span class="id">r</span> <span class="id">r</span>';<br/>
&nbsp;&nbsp;[<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#contract_ereal_ball_fin_le">contract_ereal_ball_fin_le</a></span> | <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#ball_ereal_ball_fin_lt">ball_ereal_ball_fin_lt</a></span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nbhs_fin_out_below">nbhs_fin_out_below</a></span> <span class="id">r</span> (<span class="id">e</span> : {<span class="id">posnum</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>}) (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (\<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>)) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> <span class="id">r</span>%:<span class="id">E</span> <span class="id">e</span>%:<span class="id">num</span> `&lt;=` <span class="id">A</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> - <span class="id">e</span>%:<span class="id">num</span> &lt;= - 1)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> + <span class="id">e</span>%:<span class="id">num</span> &lt; 1)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.topology.html#nbhs">nbhs</a></span> <span class="id">r</span>%:<span class="id">E</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof97')">Proof.</span></div>
<div class="proofscript" id="proof97">
<span class="id">move</span>=&gt; <span class="id">reA</span> <span class="id">reN1</span> <span class="id">re1</span>.<br/>
<span class="id">have</span> ? : (`|<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> + <span class="id">e</span>%:<span class="id">num</span>| &lt; 1)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">ltr_norml</span> <span class="id">re1</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbT">andbT</a></span> (@<span class="id">lt_le_trans</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span>)) // ?<span class="id">ler_addl</span> //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>: (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_lt1">contract_lt1</a></span> <span class="id">r</span>); <span class="id">rewrite</span> <span class="id">ltr_norml</span> =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[].<br/>
<span class="id">pose</span> <span class="id">e</span>' : <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span> := (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine">fine</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#expand">expand</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> + <span class="id">e</span>%:<span class="id">num</span>)) - <span class="id">r</span>)%<span class="id">R</span>.<br/>
<span class="id">have</span> <span class="id">e</span>'0 : (0 &lt; <span class="id">e</span>')%<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id">e</span>' <span class="id">subr_gt0</span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span> -[<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#ltLHS">ltLHS</a></span>](<span class="id"><a href="mathcomp.analysis.ereal.html#contractK">contractK</a></span> <span class="id">r</span>%:<span class="id">E</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine_expand">fine_expand</a></span> // <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lt_expand">lt_expand</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> ?<span class="id">ltr_addl</span> ?<span class="id">ltW</span>.<br/>
<span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.topology.html#nbhs_ballP">nbhs_ballP</a></span>; <span class="kwd">exists</span> <span class="id">e</span>' =&gt; // <span class="id">r</span>' <span class="id">r</span>'<span class="id">e</span>'<span class="id">r</span>; <span class="id">apply</span> <span class="id">reA</span>.<br/>
<span class="kwd">by</span> <span class="id">have</span> [?|?] := <span class="id">lerP</span> <span class="id">r</span> <span class="id">r</span>';<br/>
&nbsp;&nbsp;[<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#ball_ereal_ball_fin_le">ball_ereal_ball_fin_le</a></span> | <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#contract_ereal_ball_fin_lt">contract_ereal_ball_fin_lt</a></span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nbhs_fin_out_above_below">nbhs_fin_out_above_below</a></span> <span class="id">r</span> (<span class="id">e</span> : {<span class="id">posnum</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>}) (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (\<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>)) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> <span class="id">r</span>%:<span class="id">E</span> <span class="id">e</span>%:<span class="id">num</span> `&lt;=` <span class="id">A</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> - <span class="id">e</span>%:<span class="id">num</span> &lt; -1)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(1 &lt; <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> + <span class="id">e</span>%:<span class="id">num</span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.topology.html#nbhs">nbhs</a></span> <span class="id">r</span>%:<span class="id">E</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof98')">Proof.</span></div>
<div class="proofscript" id="proof98">
<span class="id">move</span>=&gt; <span class="id">reA</span> <span class="id">reN1</span> <span class="id">re1</span>; <span class="id">suff</span> : <span class="id">A</span> = <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="kwd">by</span> <span class="id">move</span>-&gt;; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.topology.html#filterT">filterT</a></span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; <span class="id">x</span>; <span class="id">split</span> =&gt; // <span class="id">_</span>; <span class="id">apply</span> <span class="id">reA</span>.<br/>
<span class="id">case</span>: <span class="id">x</span> =&gt; [<span class="id">r</span>'| |] //.<br/>
- <span class="id">have</span> [?|?] := <span class="id">lerP</span> <span class="id">r</span> <span class="id">r</span>'.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#contract_ereal_ball_fin_le">contract_ereal_ball_fin_le</a></span> =&gt; //; <span class="id">exact</span>/<span class="id">ltW</span>.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">apply</span> <span class="id"><a href="mathcomp.analysis.ereal.html#contract_ereal_ball_fin_lt">contract_ereal_ball_fin_lt</a></span> =&gt; //; <span class="id">exact</span>/<span class="id">ltW</span>.<br/>
- <span class="id">exact</span>/<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_ereal_ball_pinfty">contract_ereal_ball_pinfty</a></span>.<br/>
- <span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ballN">ereal_ballN</a></span>/<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_ereal_ball_pinfty">contract_ereal_ball_pinfty</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#EFinN">EFinN</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contractN">contractN</a></span> -(<span class="id">opprK</span> 1%<span class="id">R</span>) <span class="id">ltr_oppl</span> <span class="id">opprD</span> <span class="id">opprK</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nbhs_fin_inbound">nbhs_fin_inbound</a></span> <span class="id">r</span> (<span class="id">e</span> : {<span class="id">posnum</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>}) (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (\<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>)) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> <span class="id">r</span>%:<span class="id">E</span> <span class="id">e</span>%:<span class="id">num</span> `&lt;=` <span class="id">A</span> -&gt; <span class="id"><a href="mathcomp.analysis.topology.html#nbhs">nbhs</a></span> <span class="id">r</span>%:<span class="id">E</span> <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof99')">Proof.</span></div>
<div class="proofscript" id="proof99">
<span class="id">move</span>=&gt; <span class="id">reA</span>.<br/>
<span class="id">have</span> [|<span class="id">reN1</span>] := <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#boolP">boolP</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> - <span class="id">e</span>%:<span class="id">num</span> == -1)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">subr_eq</span> <span class="id">addrC</span> =&gt; /<span class="id">eqP</span> <span class="id">reN1</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">re1</span>|] := <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#boolP">boolP</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> + <span class="id">e</span>%:<span class="id">num</span> == 1)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>/<span class="id">eqP</span> : <span class="id">reN1</span>; <span class="id">rewrite</span> -(<span class="id">eqP</span> <span class="id">re1</span>) <span class="id">opprD</span> <span class="id">addrCA</span> <span class="id">subrr</span> <span class="id">addr0</span> -<span class="id">subr_eq0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">opprK</span> -<span class="id">mulr2n</span> <span class="id">mulrn_eq0</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#orFb">orFb</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#contract_eq0">contract_eq0</a></span> =&gt; /<span class="id">eqP</span>[<span class="id">r0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>: <span class="id">re1</span>; <span class="id">rewrite</span> <span class="id">r0</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract0">contract0</a></span> <span class="id">add0r</span> =&gt; /<span class="id">eqP</span> <span class="id">e1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.topology.html#nbhs_ballP">nbhs_ballP</a></span>; <span class="kwd">exists</span> 1%<span class="id">R</span> =&gt; //= <span class="id">r</span>'; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.topology.html#ball">ball</a></span> /= <span class="id">sub0r</span> <span class="id">normrN</span> =&gt; <span class="id">r</span>'1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">reA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> <span class="id">r0</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract0">contract0</a></span> <span class="id">sub0r</span> <span class="id">normrN</span> <span class="id">e1</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_lt1">contract_lt1</a></span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">neq_lt</span> =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#orP">orP</a></span>[<span class="id">re1</span>|<span class="id">re1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span> (@<span class="id"><a href="mathcomp.analysis.ereal.html#nbhs_fin_out_below">nbhs_fin_out_below</a></span> <span class="id">_</span> <span class="id">e</span>) =&gt; //; <span class="id">rewrite</span> <span class="id">reN1</span> <span class="id">addrAC</span> <span class="id">subrr</span> <span class="id">sub0r</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">e1</span> : (1 &lt; <span class="id">e</span>%:<span class="id">num</span>)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>: <span class="id">re1</span>; <span class="id">rewrite</span> <span class="id">reN1</span> <span class="id">addrAC</span> <span class="id">ltr_subr_addl</span> -!<span class="id">mulr2n</span> -(<span class="id">mulr_natl</span> <span class="id">e</span>%:<span class="id">num</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -{1}(<span class="id">mulr1</span> 2%:<span class="id">R</span>) =&gt; ?; <span class="id">rewrite</span> -(@<span class="id">ltr_pmul2l</span> <span class="id">_</span> 2).<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">Aoo</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> `\ -<span class="id">oo</span> `&lt;=` <span class="id">A</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">x</span> [<span class="id">_</span>]; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#set1">set1</a></span> /= =&gt; <span class="id">xnoo</span>; <span class="id">apply</span> <span class="id">reA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case</span>: <span class="id">x</span> <span class="id">xnoo</span> =&gt; [<span class="id">r</span>' <span class="id">_</span> | <span class="id">_</span> |//].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> [<span class="id">rr</span>'|<span class="id">r</span>'<span class="id">r</span>] := <span class="id">lerP</span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span>) (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>'%:<span class="id">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#contract_ereal_ball_fin_le">contract_ereal_ball_fin_le</a></span>; <span class="id">last</span> <span class="id">exact</span>/<span class="id">ltW</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span> -(<span class="id"><a href="mathcomp.analysis.ereal.html#contractK">contractK</a></span> <span class="id">r</span>%:<span class="id">E</span>) -(<span class="id"><a href="mathcomp.analysis.ereal.html#contractK">contractK</a></span> <span class="id">r</span>'%:<span class="id">E</span>) <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#le_expand">le_expand</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#contract_ereal_ball_fin_lt">contract_ereal_ball_fin_lt</a></span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">reN1</span> <span class="id">addrAC</span> <span class="id">subrr</span> <span class="id">add0r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span> -(<span class="id"><a href="mathcomp.analysis.ereal.html#contractK">contractK</a></span> <span class="id">r</span>%:<span class="id">E</span>) -(<span class="id"><a href="mathcomp.analysis.ereal.html#contractK">contractK</a></span> <span class="id">r</span>'%:<span class="id">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lt_expand">lt_expand</a></span> // <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_ereal_ball_pinfty">contract_ereal_ball_pinfty</a></span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> : <span class="id"><a href="mathcomp.analysis.topology.html#nbhs">nbhs</a></span> <span class="id">r</span>%:<span class="id">E</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> `\ -<span class="id">oo</span>) <span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.topology.html#nbhs_ballP">nbhs_ballP</a></span>; <span class="kwd">exists</span> 1%<span class="id">R</span> =&gt; /=.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; /<span class="id"><a href="mathcomp.analysis.topology.html#nbhs_ballP">nbhs_ballP</a></span>[<span class="id">_</span>/<span class="id"><a href="mathcomp.analysis.signed.html#posnumP">posnumP</a></span>[<span class="id">e</span>']] /=; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.topology.html#ball">ball</a></span> /= =&gt; <span class="id">h</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.topology.html#nbhs_ballP">nbhs_ballP</a></span>; <span class="kwd">exists</span> <span class="id">e</span>'%:<span class="id">num</span> =&gt; //= <span class="id">y</span> /<span class="id">h</span>; <span class="id">apply</span>: <span class="id">Aoo</span>.<br/>
<span class="id">move</span>: <span class="id">reN1</span>; <span class="id">rewrite</span> <span class="id">eq_sym</span> <span class="id">neq_lt</span> =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#orP">orP</a></span>[<span class="id">reN1</span>|<span class="id">reN1</span>].<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">re1</span>|<span class="id">re1</span>] := <span class="id">eqVneq</span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> + <span class="id">e</span>%:<span class="id">num</span>)%<span class="id">R</span> 1%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span> (@<span class="id"><a href="mathcomp.analysis.ereal.html#nbhs_fin_out_above">nbhs_fin_out_above</a></span> <span class="id">_</span> <span class="id">e</span>) =&gt; //; <span class="id">rewrite</span> <span class="id">re1</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>: <span class="id">re1</span>; <span class="id">rewrite</span> <span class="id">neq_lt</span> =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#orP">orP</a></span>[<span class="id">re1</span>|<span class="id">re1</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> ? : (`|<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> - <span class="id">e</span>%:<span class="id">num</span>| &lt; 1)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">ltr_norml</span> <span class="id">reN1</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andTb">andTb</a></span> <span class="id">ltr_subl_addl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (@<span class="id">lt_le_trans</span> <span class="id">_</span> <span class="id">_</span> 1%<span class="id">R</span>) // ?<span class="id">ler_addr</span>//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>/<span class="id">ltr_normlP</span> : (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_lt1">contract_lt1</a></span> <span class="id">r</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> ? : (`|<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> + <span class="id">e</span>%:<span class="id">num</span>| &lt; 1)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">ltr_norml</span> <span class="id">re1</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbT">andbT</a></span> -(<span class="id">addr0</span> (-1)) <span class="id">ler_lt_add</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>: (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> <span class="id">r</span>%:<span class="id">E</span>); <span class="id">rewrite</span> <span class="id">ler_norml</span> =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">pose</span> <span class="id">e</span>' : <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span> := <span class="id">Num.min</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">r</span> - <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine">fine</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#expand">expand</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> - <span class="id">e</span>%:<span class="id">num</span>)))%<span class="id">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine">fine</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#expand">expand</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> + <span class="id">e</span>%:<span class="id">num</span>)) - <span class="id">r</span>)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> <span class="id">e</span>'0 : (0 &lt; <span class="id">e</span>')%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id">e</span>' <span class="id">lt_minr</span>; <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">subr_gt0</span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span> -[<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#ltRHS">ltRHS</a></span>](<span class="id"><a href="mathcomp.analysis.ereal.html#contractK">contractK</a></span> <span class="id">r</span>%:<span class="id">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine_expand">fine_expand</a></span> // <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lt_expand">lt_expand</a></span>// ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> ?<span class="id">ltW</span>//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ltr_subl_addl</span> <span class="id">ltr_addr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">subr_gt0</span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span> -[<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#ltLHS">ltLHS</a></span>](<span class="id"><a href="mathcomp.analysis.ereal.html#contractK">contractK</a></span> <span class="id">r</span>%:<span class="id">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine_expand">fine_expand</a></span>// <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lt_expand">lt_expand</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> ?<span class="id">ltr_addl</span> ?<span class="id">ltW</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>/<span class="id"><a href="mathcomp.analysis.topology.html#nbhs_ballP">nbhs_ballP</a></span>; <span class="kwd">exists</span> <span class="id">e</span>' =&gt; // <span class="id">r</span>' <span class="id">re</span>'<span class="id">r</span>'; <span class="id">apply</span> <span class="id">reA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> [|<span class="id">r</span>'<span class="id">r</span>] := <span class="id">lerP</span> <span class="id">r</span> <span class="id">r</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">rr</span>'; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#ball_ereal_ball_fin_le">ball_ereal_ball_fin_le</a></span> =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.topology.html#le_ball">le_ball</a></span> <span class="id">re</span>'<span class="id">r</span>'; <span class="id">rewrite</span> <span class="id">le_minl</span> <span class="id">lexx</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#orbT">orbT</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>: <span class="id">re</span>'<span class="id">r</span>'; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.topology.html#ball">ball</a></span> /= <span class="id">lt_minr</span> =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">gtr0_norm</span> ?<span class="id">subr_gt0</span> // -<span class="id">ltr_subl_addl</span> <span class="id">addrAC</span> <span class="id">subrr</span> <span class="id">add0r</span> <span class="id">ltr_oppl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">opprK</span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine_expand">fine_expand</a></span> // =&gt; <span class="id">r</span>'<span class="id">e</span>'<span class="id">r</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.ereal.html#expand_ereal_ball_fin_lt">expand_ereal_ball_fin_lt</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span> (@<span class="id"><a href="mathcomp.analysis.ereal.html#nbhs_fin_out_above">nbhs_fin_out_above</a></span> <span class="id">_</span> <span class="id">e</span>) =&gt; //; <span class="id">rewrite</span> <span class="id">ltW</span>.<br/>
<span class="id">have</span> [<span class="id">re1</span>|<span class="id">re1</span>] := <span class="id">ltrP</span> 1 (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> + <span class="id">e</span>%:<span class="id">num</span>).<br/>
&nbsp;&nbsp;<span class="id">exact</span>: (@<span class="id"><a href="mathcomp.analysis.ereal.html#nbhs_fin_out_above_below">nbhs_fin_out_above_below</a></span> <span class="id">_</span> <span class="id">e</span>).<br/>
<span class="id">move</span>: <span class="id">re1</span>; <span class="id">rewrite</span> <span class="id">le_eqVlt</span> =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#orP">orP</a></span>[<span class="id">re1</span>|<span class="id">re1</span>].<br/>
&nbsp;&nbsp;<span class="id">have</span> {}<span class="id">re1</span> : <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> = (1 - <span class="id">e</span>%:<span class="id">num</span>)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>: <span class="id">re1</span>; <span class="id">rewrite</span> <span class="id">eq_sym</span> -<span class="id">subr_eq</span> =&gt; /<span class="id">eqP</span> &lt;-.<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">e1</span> : (1 &lt; <span class="id">e</span>%:<span class="id">num</span>)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>: <span class="id">reN1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">re1</span> -<span class="id">addrA</span> -<span class="id">opprD</span> <span class="id">ltr_subl_addl</span> <span class="id">ltr_subr_addl</span> -!<span class="id">mulr2n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> -(<span class="id">mulr_natl</span> <span class="id">e</span>%:<span class="id">num</span>) -{1}(<span class="id">mulr1</span> 2%:<span class="id">R</span>) =&gt; ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -(@<span class="id">ltr_pmul2l</span> <span class="id">_</span> 2).<br/>
&nbsp;&nbsp;<span class="id">have</span> <span class="id">Aoo</span> : (<span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> `\ +<span class="id">oo</span> `&lt;=` <span class="id">A</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">x</span> [<span class="id">_</span>]; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#set1">set1</a></span> /= =&gt; <span class="id">xpoo</span>; <span class="id">apply</span> <span class="id">reA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case</span>: <span class="id">x</span> <span class="id">xpoo</span> =&gt; [<span class="id">r</span>' <span class="id">_</span> | // |<span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> [<span class="id">rr</span>'|<span class="id">r</span>'<span class="id">r</span>] := <span class="id">lerP</span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span>) (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>'%:<span class="id">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">re1</span> <span class="id">opprB</span> <span class="id">addrCA</span> -[<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#ltRHS">ltRHS</a></span>]<span class="id">addr0</span> <span class="id">ltr_add2</span> <span class="id">subr_lt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>/<span class="id">ltr_normlP</span> : (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_lt1">contract_lt1</a></span> <span class="id">r</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">re1</span> <span class="id">addrAC</span> <span class="id">ltr_subl_addl</span> <span class="id">ltr_add</span> // (<span class="id">lt_trans</span> <span class="id">_</span> <span class="id">e1</span>) // <span class="id">ltr_oppl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>: (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_lt1">contract_lt1</a></span> <span class="id">r</span>'); <span class="id">rewrite</span> <span class="id">ltr_norml</span> =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> -<span class="id">oo</span>]/= <span class="id">opprK</span> <span class="id">gtr0_norm</span> ?<span class="id">subr_gt0</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">ltr_subl_addl</span> <span class="id">add0r</span> <span class="id">ltr_oppl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>: (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_lt1">contract_lt1</a></span> <span class="id">r</span>); <span class="id">rewrite</span> <span class="id">ltr_norml</span> =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">re1</span> <span class="id">addrAC</span> <span class="id">ltr_subl_addl</span> <span class="id">ltr_add</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">have</span> : <span class="id"><a href="mathcomp.analysis.topology.html#nbhs">nbhs</a></span> <span class="id">r</span>%:<span class="id">E</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> `\ +<span class="id">oo</span>) <span class="kwd">by</span> <span class="kwd">exists</span> 1%<span class="id">R</span> =&gt; /=.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">case</span> =&gt; <span class="id">_</span>/<span class="id"><a href="mathcomp.analysis.signed.html#posnumP">posnumP</a></span>[<span class="id">x</span>] /=; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.topology.html#ball_">ball_</a></span> =&gt; <span class="id">h</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">x</span>%:<span class="id">num</span> =&gt; //= <span class="id">y</span> /<span class="id">h</span>; <span class="id">exact</span>: <span class="id">Aoo</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span> (@<span class="id"><a href="mathcomp.analysis.ereal.html#nbhs_fin_out_below">nbhs_fin_out_below</a></span> <span class="id">_</span> <span class="id">e</span>) =&gt; //; <span class="id">rewrite</span> <span class="id">ltW</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_nbhsE">ereal_nbhsE</a></span> : <span class="id"><a href="mathcomp.analysis.topology.html#nbhs">nbhs</a></span> = <span class="id"><a href="mathcomp.analysis.topology.html#nbhs_">nbhs_</a></span> (<span class="id"><a href="mathcomp.analysis.topology.html#entourage_">entourage_</a></span> (@<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof100')">Proof.</span></div>
<div class="proofscript" id="proof100">
<span class="id">set</span> <span class="id">diag</span> := <span class="kwd">fun</span> <span class="id">r</span> =&gt; [<span class="id">set</span> <span class="id">xy</span> | <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> <span class="id">xy</span>.1 <span class="id">r</span> <span class="id">xy</span>.2].<br/>
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeq2E">predeq2E</a></span> =&gt; <span class="id">x</span> <span class="id">A</span>; <span class="id">split</span>.<br/>
- <span class="id">rewrite</span> {1}/<span class="id"><a href="mathcomp.analysis.topology.html#nbhs">nbhs</a></span> /= /<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs">ereal_nbhs</a></span>.<br/>
&nbsp;&nbsp;<span class="id">case</span>: <span class="id">x</span> =&gt; [/= <span class="id">r</span> [<span class="id">_</span>/<span class="id"><a href="mathcomp.analysis.signed.html#posnumP">posnumP</a></span>[<span class="id">e</span>] <span class="id">reA</span>]| [<span class="id">M</span> [/= <span class="id">Mreal</span> <span class="id">MA</span>]]| [<span class="id">M</span> [/= <span class="id">Mreal</span> <span class="id">MA</span>]]].<br/>
&nbsp;&nbsp;+ <span class="id">pose</span> <span class="id">e</span>' : <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span> := <span class="id">Num.min</span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span> - <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> (<span class="id">r</span>%:<span class="id">E</span> - <span class="id">e</span>%:<span class="id">num</span>%:<span class="id">E</span>))%<span class="id">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> (<span class="id">r</span>%:<span class="id">E</span> + <span class="id">e</span>%:<span class="id">num</span>%:<span class="id">E</span>) - <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span>)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">diag</span> <span class="id">e</span>'); <span class="id">rewrite</span> /<span class="id">diag</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">e</span>' =&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> /= /<span class="id">e</span>' <span class="id">lt_minr</span>; <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">subr_gt0</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lt_contract">lt_contract</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span> <span class="id">ltr_subl_addr</span> <span class="id">ltr_addl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">subr_gt0</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lt_contract">lt_contract</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span> <span class="id">ltr_addl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case</span>=&gt; [<span class="id">r</span>' /= <span class="id">re</span>'<span class="id">r</span>'| |]/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> <span class="kwd">in</span> <span class="id">re</span>'<span class="id">r</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> [<span class="id">r</span>'<span class="id">r</span>|<span class="id">rr</span>'] := <span class="id">lerP</span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>'%:<span class="id">E</span>) (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">reA</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.topology.html#ball">ball</a></span> /= <span class="id">real_ltr_norml</span> // ?<span class="id">num_real</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">ger0_norm</span> ?<span class="id">subr_ge0</span>// <span class="kwd">in</span> <span class="id">re</span>'<span class="id">r</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> : (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> (<span class="id">r</span>%:<span class="id">E</span> - <span class="id">e</span>%:<span class="id">num</span>%:<span class="id">E</span>) &lt; <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>'%:<span class="id">E</span>)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>: <span class="id">re</span>'<span class="id">r</span>'; <span class="id">rewrite</span> /<span class="id">e</span>' <span class="id">lt_minr</span> =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[+ <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id">e</span>' <span class="id">ltr_subr_addl</span> <span class="id">addrC</span> -<span class="id">ltr_subr_addl</span> =&gt; /<span class="id">lt_le_trans</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>; <span class="id">rewrite</span> <span class="id">opprB</span> <span class="id">addrCA</span> <span class="id">subrr</span> <span class="id">addr0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id"><a href="mathcomp.analysis.ereal.html#lt_expandRL">lt_expandRL</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> // !<span class="id"><a href="mathcomp.analysis.ereal.html#contractK">contractK</a></span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">ltr_subl_addr</span> <span class="id">addrC</span> -<span class="id">ltr_subl_addr</span> =&gt; -&gt;; <span class="id">rewrite</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbT">andbT</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (@<span class="id">lt_le_trans</span> <span class="id">_</span> <span class="id">_</span> 0%<span class="id">R</span>)// 1?<span class="id">ltr_oppl</span> 1?<span class="id">oppr0</span>// <span class="id">subr_ge0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_fin">lee_fin</a></span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#le_contract">le_contract</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">reA</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.topology.html#ball">ball</a></span> /= <span class="id">real_ltr_norml</span> // ?<span class="id">num_real</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">ltr0_norm</span> ?<span class="id">subr_lt0</span>// <span class="id">opprB</span> <span class="kwd">in</span> <span class="id">re</span>'<span class="id">r</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>; <span class="id">split</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (@<span class="id">lt_trans</span> <span class="id">_</span> <span class="id">_</span> 0%<span class="id">R</span>) // <span class="id">subr_lt0</span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lt_contract">lt_contract</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">ltr_oppl</span> <span class="id">opprB</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id">e</span>' <span class="kwd">in</span> <span class="id">re</span>'<span class="id">r</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> <span class="id">r</span>'<span class="id">re</span> : (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>'%:<span class="id">E</span> &lt; <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> (<span class="id">r</span>%:<span class="id">E</span> + <span class="id">e</span>%:<span class="id">num</span>%:<span class="id">E</span>))%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>: <span class="id">re</span>'<span class="id">r</span>'; <span class="id">rewrite</span> <span class="id">lt_minr</span> =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[<span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ltr_subl_addr</span> <span class="id">subrK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">ltr_subl_addr</span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span> -(<span class="id"><a href="mathcomp.analysis.ereal.html#contractK">contractK</a></span> (<span class="id">_</span> + <span class="id">r</span>)%:<span class="id">E</span>)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">addrC</span> -(<span class="id"><a href="mathcomp.analysis.ereal.html#contractK">contractK</a></span> <span class="id">r</span>'%:<span class="id">E</span>) // <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lt_expand">lt_expand</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> ?<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> [<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> +<span class="id">oo</span>]/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">lt_minr</span> =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[<span class="id">re</span>'1 <span class="id">re</span>'2].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> [<span class="id">cr0</span>|<span class="id">cr0</span>] := <span class="id">lerP</span> 0 (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">r</span>%:<span class="id">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>: <span class="id">re</span>'2; <span class="id">rewrite</span> <span class="id">ler0_norm</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">subr_le0</span>; <span class="id">case</span>/<span class="id">ler_normlP</span> : (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> <span class="id">r</span>%:<span class="id">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">opprB</span> <span class="id">ltr_subr_addl</span> <span class="id">addrCA</span> <span class="id">subrr</span> <span class="id">addr0</span> =&gt; <span class="id">h</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>: <span class="id">h</span>; <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">negP</a></span>; <span class="id">rewrite</span> -<span class="id">leNgt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>/<span class="id">ler_normlP</span> : (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> (<span class="id">r</span>%:<span class="id">E</span> + <span class="id">e</span>%:<span class="id">num</span>%:<span class="id">E</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>: <span class="id">re</span>'2; <span class="id">rewrite</span> <span class="id">ler0_norm</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">subr_le0</span>; <span class="id">case</span>/<span class="id">ler_normlP</span> : (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> <span class="id">r</span>%:<span class="id">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">opprB</span> <span class="id">ltr_subr_addl</span> <span class="id">addrCA</span> <span class="id">subrr</span> <span class="id">addr0</span> =&gt; <span class="id">h</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>: <span class="id">h</span>; <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">negP</a></span>; <span class="id">rewrite</span> -<span class="id">leNgt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>/<span class="id">ler_normlP</span> : (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> (<span class="id">r</span>%:<span class="id">E</span> + <span class="id">e</span>%:<span class="id">num</span>%:<span class="id">E</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> [<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> -<span class="id">oo</span>]/=; <span class="id">rewrite</span> <span class="id">opprK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">lt_minr</span> =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[<span class="id">re</span>'1 <span class="id">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>: <span class="id">re</span>'1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">ger0_norm</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">addrC</span> -<span class="id">ler_subl_addl</span> <span class="id">add0r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>: (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> <span class="id">r</span>%:<span class="id">E</span>); <span class="id">rewrite</span> <span class="id">ler_norml</span> =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">ltr_add2l</span> =&gt; <span class="id">h</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>: <span class="id">h</span>; <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">negP</a></span>; <span class="id">rewrite</span> -<span class="id">leNgt</span> -<span class="id">ler_oppl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>: (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> (<span class="id">r</span>%:<span class="id">E</span> - <span class="id">e</span>%:<span class="id">num</span>%:<span class="id">E</span>)); <span class="id">rewrite</span> <span class="id">ler_norml</span> =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[].<br/>
&nbsp;&nbsp;+ <span class="kwd">exists</span> (<span class="id">diag</span> (1 - <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">M</span>%:<span class="id">E</span>))%<span class="id">R</span>; <span class="id">rewrite</span> /<span class="id">diag</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (1 - <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">M</span>%:<span class="id">E</span>)%<span class="id">R</span> =&gt; //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">subr_gt0</span> (<span class="id">le_lt_trans</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_lt1">contract_lt1</a></span> <span class="id">M</span>)) // <span class="id">ler_norm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case</span>=&gt; [<span class="id">r</span>| |]/=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> [<span class="id">_</span> +<span class="id">oo</span>]/= =&gt; <span class="id">rM1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">MA</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">ger0_norm</span> <span class="kwd">in</span> <span class="id">rM1</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">subr_ge0</span> // (<span class="id">le_trans</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> <span class="id">r</span>%:<span class="id">E</span>)) // <span class="id">ler_norm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">ltr_subl_addr</span> <span class="id">addrC</span> <span class="id">addrCA</span> <span class="id">addrC</span> -<span class="id">ltr_subl_addr</span> <span class="id">subrr</span> <span class="kwd">in</span> <span class="id">rM1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">subr_gt0</span> <span class="kwd">in</span> <span class="id">rM1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lt_contract">lt_contract</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> /= <span class="id">subrr</span> <span class="id">normr0</span> =&gt; <span class="id">h</span>; <span class="id">exact</span>: <span class="id">MA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> /= <span class="id">opprK</span> =&gt; <span class="id">h</span> {<span class="id">MA</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>: <span class="id">h</span>; <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">negP</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">leNgt</span> [<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#leRHS">leRHS</a></span>]<span class="id">ger0_norm</span> // <span class="id">ler_subl_addr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> -/(<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">M</span>%:<span class="id">E</span>) <span class="id">addrC</span> -<span class="id">ler_subl_addr</span> <span class="id">opprD</span> <span class="id">addrA</span> <span class="id">subrr</span> <span class="id">sub0r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>: (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_le1">contract_le1</a></span> <span class="id">M</span>%:<span class="id">E</span>); <span class="id">rewrite</span> <span class="id">ler_norml</span> =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[].<br/>
&nbsp;&nbsp;+ <span class="kwd">exists</span> (<span class="id">diag</span> (1 + <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">M</span>%:<span class="id">E</span>)%<span class="id">R</span>); <span class="id">rewrite</span> /<span class="id">diag</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> (1 + <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">M</span>%:<span class="id">E</span>)%<span class="id">R</span> =&gt; //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">ltr_subl_addl</span> <span class="id">sub0r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>: (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_lt1">contract_lt1</a></span> <span class="id">M</span>); <span class="id">rewrite</span> <span class="id">ltr_norml</span> =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case</span>=&gt; [<span class="id">r</span>| |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> =&gt; /= <span class="id">rM1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span> <span class="id">MA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">ler0_norm</span> <span class="kwd">in</span> <span class="id">rM1</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">ler_subl_addl</span> <span class="id">addr0</span> <span class="id">ltW</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>: (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_lt1">contract_lt1</a></span> <span class="id">r</span>); <span class="id">rewrite</span> <span class="id">ltr_norml</span> =&gt; /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">opprB</span> <span class="id">opprK</span> -<span class="id">ltr_subl_addl</span> <span class="id">addrK</span> <span class="kwd">in</span> <span class="id">rM1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span> -<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lt_contract">lt_contract</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> /= -<span class="id">opprD</span> <span class="id">normrN</span> =&gt; <span class="id">h</span> {<span class="id">MA</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">move</span>: <span class="id">h</span>; <span class="id">apply</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">negP</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">leNgt</span> [<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#leRHS">leRHS</a></span>]<span class="id">ger0_norm</span>// -<span class="id">ler_subl_addr</span> <span class="id">addrAC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">subrr</span> <span class="id">add0r</span> -/(<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract">contract</a></span> <span class="id">M</span>%:<span class="id">E</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">le_trans</span> <span class="id">_</span> (<span class="id">ltW</span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#contract_lt1">contract_lt1</a></span> <span class="id">M</span>))) // <span class="id">ler_norm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball">ereal_ball</a></span> /= =&gt; <span class="id">_</span>; <span class="id">exact</span>: <span class="id">MA</span>.<br/>
- <span class="id">case</span>: <span class="id">x</span> =&gt; [<span class="id">r</span> [<span class="id">E</span> [<span class="id">_</span>/<span class="id"><a href="mathcomp.analysis.signed.html#posnumP">posnumP</a></span>[<span class="id">e</span>] <span class="id">reA</span>] <span class="id">sEA</span>] | [<span class="id">E</span> [<span class="id">_</span>/<span class="id"><a href="mathcomp.analysis.signed.html#posnumP">posnumP</a></span>[<span class="id">e</span>] <span class="id">reA</span>] <span class="id">sEA</span>] |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">E</span> [<span class="id">_</span>/<span class="id"><a href="mathcomp.analysis.signed.html#posnumP">posnumP</a></span>[<span class="id">e</span>] <span class="id">reA</span>] <span class="id">sEA</span>]] //=.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">apply</span> <span class="id"><a href="mathcomp.analysis.ereal.html#nbhs_fin_inbound">nbhs_fin_inbound</a></span> <span class="kwd">with</span> <span class="id">e</span> =&gt; ? ?; <span class="id">exact</span>/<span class="id">sEA</span>/<span class="id">reA</span>.<br/>
&nbsp;&nbsp;+ <span class="id">have</span> [|] := <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#boolP">boolP</a></span> (<span class="id">e</span>%:<span class="id">num</span> &lt;= 1)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>/<span class="id"><a href="mathcomp.analysis.ereal.html#nbhs_oo_up_e1">nbhs_oo_up_e1</a></span>; <span class="id">apply</span> =&gt; ? ?; <span class="id">exact</span>/<span class="id">sEA</span>/<span class="id">reA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">ltNge</span> =&gt; /<span class="id"><a href="mathcomp.analysis.ereal.html#nbhs_oo_up_1e">nbhs_oo_up_1e</a></span>; <span class="id">apply</span> =&gt; ? ?; <span class="id">exact</span>/<span class="id">sEA</span>/<span class="id">reA</span>.<br/>
&nbsp;&nbsp;+ <span class="id">have</span> [|] := <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#boolP">boolP</a></span> (<span class="id">e</span>%:<span class="id">num</span> &lt;= 1)%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>/<span class="id"><a href="mathcomp.analysis.ereal.html#nbhs_oo_down_e1">nbhs_oo_down_e1</a></span>; <span class="id">apply</span> =&gt; ? ?; <span class="id">exact</span>/<span class="id">sEA</span>/<span class="id">reA</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">ltNge</span> =&gt; /<span class="id"><a href="mathcomp.analysis.ereal.html#nbhs_oo_down_1e">nbhs_oo_down_1e</a></span>; <span class="id">apply</span> =&gt; ? ?; <span class="id">exact</span>/<span class="id">sEA</span>/<span class="id">reA</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ereal_pseudoMetricType_mixin">ereal_pseudoMetricType_mixin</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.topology.html#PseudoMetric.Mixin">PseudoMetric.Mixin</a></span> (@<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball_center">ereal_ball_center</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>) (@<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball_sym">ereal_ball_sym</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#ereal_ball_triangle">ereal_ball_triangle</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#erefl">erefl</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ereal_uniformType_mixin">ereal_uniformType_mixin</a></span> : @<span class="id"><a href="mathcomp.analysis.topology.html#Uniform.mixin_of">Uniform.mixin_of</a></span> (\<span class="id">bar</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>) <span class="id"><a href="mathcomp.analysis.topology.html#nbhs">nbhs</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.topology.html#uniformityOfBallMixin">uniformityOfBallMixin</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhsE">ereal_nbhsE</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_pseudoMetricType_mixin">ereal_pseudoMetricType_mixin</a></span>.<br/>
<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="ereal_uniformType">ereal_uniformType</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.topology.html#Uniform.Exports.UniformType">UniformType</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#extended">extended</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>) <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_uniformType_mixin">ereal_uniformType_mixin</a></span>.<br/>
<br/>
<span class="kwd">Canonical</span> <span class="id"><a name="ereal_pseudoMetricType">ereal_pseudoMetricType</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.topology.html#PseudoMetric.Exports.PseudoMetricType">PseudoMetricType</a></span> (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#extended">extended</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric.R">R</a></span>) <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_pseudoMetricType_mixin">ereal_pseudoMetricType_mixin</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_PseudoMetric">ereal_PseudoMetric</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nbhs_interval">nbhs_interval</a></span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">P</span> : <span class="id">R</span> -&gt; <span class="kwd">Prop</span>) (<span class="id">r</span> : <span class="id">R</span>) (<span class="id">a</span> <span class="id">b</span> : \<span class="id">bar</span> <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">a</span> &lt; <span class="id">r</span>%:<span class="id">E</span> -&gt; <span class="id">r</span>%:<span class="id">E</span> &lt; <span class="id">b</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">y</span>, <span class="id">a</span> &lt; <span class="id">y</span>%:<span class="id">E</span> -&gt; <span class="id">y</span>%:<span class="id">E</span> &lt; <span class="id">b</span> -&gt; <span class="id">P</span> <span class="id">y</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.topology.html#nbhs">nbhs</a></span> <span class="id">r</span> <span class="id">P</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof101')">Proof.</span></div>
<div class="proofscript" id="proof101">
<span class="id">move</span> =&gt; <span class="id">ar</span> <span class="id">rb</span> <span class="id">abP</span>; <span class="id">case</span>: (<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lt_ereal_nbhs">lt_ereal_nbhs</a></span> <span class="id">ar</span> <span class="id">rb</span>) =&gt; <span class="id">d</span> <span class="id">rd</span>.<br/>
<span class="kwd">exists</span> <span class="id">d</span>%:<span class="id">num</span> =&gt; //= <span class="id">y</span>; <span class="id">rewrite</span> /= <span class="id">distrC</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">rd</span> /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">andP</a></span>[? ?]; <span class="id">apply</span>: <span class="id">abP</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_dnbhs_le">ereal_dnbhs_le</a></span> (<span class="id">R</span> : <span class="id">numFieldType</span>) (<span class="id">x</span> : \<span class="id">bar</span> <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_dnbhs">ereal_dnbhs</a></span> <span class="id">x</span> --&gt; <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_nbhs">ereal_nbhs</a></span> <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof102')">Proof.</span></div>
<div class="proofscript" id="proof102">
<span class="id">move</span>: <span class="id">x</span> =&gt; [<span class="id">r</span> <span class="id">P</span> [<span class="id">_</span>/<span class="id"><a href="mathcomp.analysis.signed.html#posnumP">posnumP</a></span>[<span class="id">e</span>] <span class="id">reP</span>] |<span class="id">r</span> <span class="id">P</span>|<span class="id">r</span> <span class="id">P</span>] //=.<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">e</span>%:<span class="id">num</span> =&gt; //= ? ? ?; <span class="id">apply</span>: <span class="id">reP</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ereal_dnbhs_le_finite">ereal_dnbhs_le_finite</a></span> (<span class="id">R</span> : <span class="id">numFieldType</span>) (<span class="id">r</span> : <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_dnbhs">ereal_dnbhs</a></span> <span class="id">r</span>%:<span class="id">E</span> --&gt; <span class="id"><a href="mathcomp.analysis.topology.html#nbhs">nbhs</a></span> <span class="id">r</span>%:<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof103')">Proof.</span></div>
<div class="proofscript" id="proof103">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">P</span> [<span class="id">_</span>/<span class="id"><a href="mathcomp.analysis.signed.html#posnumP">posnumP</a></span>[<span class="id">e</span>] <span class="id">reP</span>] //=; <span class="kwd">exists</span> <span class="id">e</span>%:<span class="id">num</span> =&gt; //= ? ? ?; <span class="id">exact</span>: <span class="id">reP</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ereal_loc_seq">ereal_loc_seq</a></span> (<span class="id">R</span> : <span class="id">numDomainType</span>) (<span class="id">x</span> : \<span class="id">bar</span> <span class="id">R</span>) (<span class="id">n</span> : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">x</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">x</span>%:<span class="id">E</span> =&gt; (<span class="id">x</span> + (<span class="id">n</span>%:<span class="id">R</span> + 1)^-1)%:<span class="id">E</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| +<span class="id">oo</span> =&gt; <span class="id">n</span>%:<span class="id">R</span>%:<span class="id">E</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| -<span class="id">oo</span> =&gt; - <span class="id">n</span>%:<span class="id">R</span>%:<span class="id">E</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="cvg_ereal_loc_seq">cvg_ereal_loc_seq</a></span> (<span class="id">R</span> : <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">realType</a></span>) (<span class="id">x</span> : \<span class="id">bar</span> <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_loc_seq">ereal_loc_seq</a></span> <span class="id">x</span> --&gt; <span class="id"><a href="mathcomp.analysis.ereal.html#ereal_dnbhs">ereal_dnbhs</a></span> <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof104')">Proof.</span></div>
<div class="proofscript" id="proof104">
<span class="id">move</span>=&gt; <span class="id">P</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_loc_seq">ereal_loc_seq</a></span>.<br/>
<span class="id">case</span>: <span class="id">x</span> =&gt; /= [<span class="id">x</span> [<span class="id">_</span>/<span class="id"><a href="mathcomp.analysis.signed.html#posnumP">posnumP</a></span>[<span class="id">d</span>] <span class="id">dP</span>] |[<span class="id">d</span> [<span class="id">dreal</span> <span class="id">dP</span>]] |[<span class="id">d</span> [<span class="id">dreal</span> <span class="id">dP</span>]]]; <span class="id">last</span> 2 <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> /<span class="id">ZnatP</span> [<span class="id">N</span> <span class="id">Nfloor</span>] : <span class="id"><a href="mathcomp.analysis.reals.html#floor">floor</a></span> (<span class="id">Num.max</span> <span class="id">d</span> 0%<span class="id">R</span>) \<span class="id">is</span> <span class="id">a</span> <span class="id">Znat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">Znat_def</span> <span class="id"><a href="mathcomp.analysis.reals.html#floor_ge0">floor_ge0</a></span> <span class="id">le_maxr</span> <span class="id">lexx</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#orbC">orbC</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">N</span>.+1 =&gt; // <span class="id">n</span> <span class="id">ltNn</span>; <span class="id">apply</span>: <span class="id">dP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> /<span class="id">le_lt_trans</span> : (<span class="id">d</span> &lt;= <span class="id">Num.max</span> <span class="id">d</span> 0)%<span class="id">R</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">le_maxr</span> <span class="id">lexx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>; <span class="id">rewrite</span> (<span class="id">lt_le_trans</span> (<span class="id"><a href="mathcomp.analysis.reals.html#lt_succ_floor">lt_succ_floor</a></span> <span class="id">_</span>))// <span class="id">Nfloor</span> <span class="id">natr1</span> <span class="id">ler_nat</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> /<span class="id">ZnatP</span> [<span class="id">N</span> <span class="id">Nfloor</span>] : <span class="id"><a href="mathcomp.analysis.reals.html#floor">floor</a></span> (<span class="id">Num.max</span> (- <span class="id">d</span>)%<span class="id">R</span> 0%<span class="id">R</span>) \<span class="id">is</span> <span class="id">a</span> <span class="id">Znat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">Znat_def</span> <span class="id"><a href="mathcomp.analysis.reals.html#floor_ge0">floor_ge0</a></span> <span class="id">le_maxr</span> <span class="id">lexx</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#orbC">orbC</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">N</span>.+1 =&gt; // <span class="id">n</span> <span class="id">ltNn</span>; <span class="id">apply</span>: <span class="id">dP</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lte_fin">lte_fin</a></span> <span class="id">ltr_oppl</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> /<span class="id">le_lt_trans</span> : (- <span class="id">d</span> &lt;= <span class="id">Num.max</span> (- <span class="id">d</span>) 0)%<span class="id">R</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">le_maxr</span> <span class="id">lexx</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>; <span class="id">rewrite</span> (<span class="id">lt_le_trans</span> (<span class="id"><a href="mathcomp.analysis.reals.html#lt_succ_floor">lt_succ_floor</a></span> <span class="id">_</span>))// <span class="id">Nfloor</span> <span class="id">natr1</span> <span class="id">ler_nat</span>.<br/>
<span class="id">have</span> /<span class="id">ZnatP</span> [<span class="id">N</span> <span class="id">Nfloor</span>] : <span class="id"><a href="mathcomp.analysis.reals.html#floor">floor</a></span> (<span class="id">d</span>%:<span class="id">num</span>^-1) \<span class="id">is</span> <span class="id">a</span> <span class="id">Znat</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">Znat_def</span> <span class="id"><a href="mathcomp.analysis.reals.html#floor_ge0">floor_ge0</a></span>.<br/>
<span class="kwd">exists</span> <span class="id">N</span> =&gt; // <span class="id">n</span> <span class="id">leNn</span>; <span class="id">apply</span>: <span class="id">dP</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eq_sym</span> <span class="id">addrC</span> -<span class="id">subr_eq</span> <span class="id">subrr</span> <span class="id">eq_sym</span>; <span class="id">exact</span>/<span class="id">invr_neq0</span>/<span class="id">lt0r_neq0</span>.<br/>
<span class="id">rewrite</span> /= <span class="id">opprD</span> <span class="id">addrA</span> <span class="id">subrr</span> <span class="id">distrC</span> <span class="id">subr0</span> <span class="id">gtr0_norm</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">invr_gt0</span>.<br/>
<span class="id">rewrite</span> -[<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#ltLHS">ltLHS</a></span>]<span class="id">mulr1</span> <span class="id">ltr_pdivr_mull</span> // -<span class="id">ltr_pdivr_mulr</span> // <span class="id">div1r</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">lt_le_trans</span> (<span class="id"><a href="mathcomp.analysis.reals.html#lt_succ_floor">lt_succ_floor</a></span> <span class="id">_</span>))// <span class="id">Nfloor</span> <span class="id">ler_add</span>// <span class="id">ler_nat</span>.<br/>
Qed.</div>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/tree/yoshihiro503%40generate_index">a fork of coq2html</a></div>
</body>
</html>
