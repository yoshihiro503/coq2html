
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module mathcomp.analysis.sequences</title>
<meta name="description" content="Documentation of Coq module mathcomp.analysis.sequences" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
  <script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>

<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">
<h1 class="title">Module mathcomp.analysis.sequences</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">all_ssreflect</span> <span class="id">ssralg</span> <span class="id">ssrint</span> <span class="id">ssrnum</span> <span class="id">matrix</span>.<br/>
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">interval</span> <span class="id">rat</span>.<br/>
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="mathcomp.classical.mathcomp_extra.html">mathcomp_extra</a></span> <span class="id"><a href="mathcomp.classical.boolp.html">boolp</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html">classical_sets</a></span> <span class="id"><a href="mathcomp.classical.functions.html">functions</a></span>.<br/>
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="mathcomp.classical.set_interval.html">set_interval</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="mathcomp.analysis.reals.html">reals</a></span> <span class="id"><a href="mathcomp.analysis.ereal.html">ereal</a></span> <span class="id"><a href="mathcomp.analysis.signed.html">signed</a></span> <span class="id"><a href="mathcomp.analysis.topology.html">topology</a></span> <span class="id"><a href="mathcomp.analysis.normedtype.html">normedtype</a></span> <span class="id"><a href="mathcomp.analysis.landau.html">landau</a></span>.<br/>
<br/>
<pre class="ssrdoc">
               Definitions and lemmas about sequences                      
                                                                           
The purpose of this file is to gather generic definitions and lemmas about 
sequences.                                                                 
                                                                           
* About sequences of real numbers:                                         
       [sequence u_n]_n == the sequence of general element u_n             
                 R ^nat == notation for the type of sequences, i.e.,       
                           functions of type nat -&gt; R                      
                seqDU F == sequence F_0, F_1 \ F_0, F_2 \ (F_0 U F_1),...  
                 seqD F == the sequence F_0, F_1 \ F_0, F_2 \ F_1,...      
              series u_ == the sequence of partial sums of u_              
           telescope u_ := [sequence u_ n.+1 - u_ n]_n                     
               harmonic == harmonic sequence                               
             arithmetic == arithmetic sequence                             
              geometric == geometric sequence                              
                           also arithmetic_mean, harmonic_mean,            
                           root_mean_square                                
         [series u_n]_n == the series of general element u_n               
             [normed S] == transforms a series S = [series u_n]_n in its   
                           normed series [series `|u_n|]_n] (useful to     
                           represent absolute and normed convergence:      
                           cvg [norm S_n])                                 
            exp_coeff n == the sequence of coefficients of the real        
                           exponential                                     
                 expR x == the exponential function defined on a realType  
is_cvg_series_exp_coeff == convergence of \sum_n^+oo x^n / n!              
                                                                           
       \sum_&lt;range&gt; F i == lim (fun n =&gt; (\sum_&lt;range&gt;) F i)) where        
                           &lt;range&gt; can be (i &lt;oo), (i &lt;oo | P i),          
                           (m &lt;= i &lt;oo), or (m &lt;= i &lt;oo | P i)             
                                                                           
Sections sequences_R_* contain properties of sequences of real numbers.    
For example:                                                               
nonincreasing_cvgn_ge u_ == if u_ is nonincreasing and convergent then     
                            forall n, lim u_ &lt;= u_ n                       
nondecreasing_cvgn_le u_ == if u_ is nondecreasing and convergent then     
                            forall n, lim u_ &gt;= u_ n                       
   nondecreasing_cvgn u_ == if u_ is nondecreasing and bounded then u_     
                            is convergent and its limit is sup u_n         
   nonincreasing_cvgn u_ == if u_ is nonincreasing u_ and bound by below   
                            then u_ is convergent                          
                adjacent == adjacent sequences lemma                       
                  cesaro == Cesaro's lemma                                 
                                                                           
* About sequences of natural numbers:                                      
  nseries                                                                  
                                                                           
* About sequences of extended real numbers:                                
  eseries, etelescope, etc.                                                
                                                                           
Section sequences_ereal contain properties of sequences of extended real   
numbers.                                                                   
                                                                           
  Naming convention: lemmas about series of non-negative (resp. non-       
  positive) extended numbers use the string "nneseries" (resp. "npeseries")
  as part of their identifier                                              
                                                                           
* Limit superior and inferior:                                             
            sdrop u n := {u_k | k &gt;= n}                                    
               sups u := [sequence sup (sdrop u n)]_n                      
               infs u := [sequence inf (sdrop u n)]_n                      
        limn_{inf,sup} == limit inferior/superior for realType             
              esups u := [sequence ereal_sup (sdrop u n)]_n                
              einfs u := [sequence ereal_inf (sdrop u n)]_n                
       limn_e{inf,sup} == limit inferior/superior for \bar R               
                                                                           
</pre>
<br/>
<span class="kwd">Set</span> <span class="kwd">Implicit</span> <span class="kwd">Arguments</span>.<br/>
<span class="id">Unset</span> <span class="id">Strict</span> <span class="kwd">Implicit</span>.<br/>
<span class="id">Unset</span> <span class="id">Printing</span> <span class="kwd">Implicit</span> <span class="id">Defensive</span>.<br/>
<span class="kwd">Import</span> <span class="id">Order.TTheory</span> <span class="id">GRing.Theory</span> <span class="id">Num.Def</span> <span class="id">Num.Theory</span>.<br/>
<span class="kwd">Import</span> <span class="id"><a href="mathcomp.analysis.normedtype.html#numFieldNormedType.Exports">numFieldNormedType.Exports</a></span>.<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">classical_set_scope</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ring_scope</span>.<br/>
<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">R</span> ^<span class="id">nat</span>" (<span class="kwd">at</span> <span class="id">level</span> 0).<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">a</span> `^ <span class="id">x</span>" (<span class="kwd">at</span> <span class="id">level</span> 11).<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">sequence</span>' <span class="id">E</span> ]<span class="id">_</span> <span class="id">n</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">E</span> <span class="kwd">at</span> <span class="id">level</span> 200, <span class="id">n</span> <span class="id">name</span>, <span class="id">format</span> "[ '<span class="id">sequence</span>'  <span class="id">E</span> ]<span class="id">_</span> <span class="id">n</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">series</span>' <span class="id">E</span> ]<span class="id">_</span> <span class="id">n</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">E</span> <span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">n</span> <span class="id">name</span>, <span class="id">format</span> "[ '<span class="id">series</span>'  <span class="id">E</span> ]<span class="id">_</span> <span class="id">n</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">normed</span>' <span class="id">E</span> ]"  (<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">format</span> "[ '<span class="id">normed</span>'  <span class="id">E</span> ]").<br/>
<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "\<span class="id">big</span> [ <span class="id">op</span> / <span class="id">idx</span> ]<span class="id">_</span> ( <span class="id">m</span> &lt;= <span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> ) <span class="id">F</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 36, <span class="id">F</span> <span class="kwd">at</span> <span class="id">level</span> 36, <span class="id">op</span>, <span class="id">idx</span> <span class="kwd">at</span> <span class="id">level</span> 10, <span class="id">m</span>, <span class="id">i</span> <span class="kwd">at</span> <span class="id">level</span> 50,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "'[' \<span class="id">big</span> [ <span class="id">op</span> / <span class="id">idx</span> ]<span class="id">_</span> ( <span class="id">m</span>  &lt;=  <span class="id">i</span>  &lt;<span class="id">oo</span>  |  <span class="id">P</span> )  <span class="id">F</span> ']'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "\<span class="id">big</span> [ <span class="id">op</span> / <span class="id">idx</span> ]<span class="id">_</span> ( <span class="id">m</span> &lt;= <span class="id">i</span> &lt;<span class="id">oo</span> ) <span class="id">F</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 36, <span class="id">F</span> <span class="kwd">at</span> <span class="id">level</span> 36, <span class="id">op</span>, <span class="id">idx</span> <span class="kwd">at</span> <span class="id">level</span> 10, <span class="id">i</span>, <span class="id">m</span> <span class="kwd">at</span> <span class="id">level</span> 50,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "'[' \<span class="id">big</span> [ <span class="id">op</span> / <span class="id">idx</span> ]<span class="id">_</span> ( <span class="id">m</span>  &lt;=  <span class="id">i</span>  &lt;<span class="id">oo</span> ) '/  '  <span class="id">F</span> ']'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "\<span class="id">big</span> [ <span class="id">op</span> / <span class="id">idx</span> ]<span class="id">_</span> ( <span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> ) <span class="id">F</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 36, <span class="id">F</span> <span class="kwd">at</span> <span class="id">level</span> 36, <span class="id">op</span>, <span class="id">idx</span> <span class="kwd">at</span> <span class="id">level</span> 10, <span class="id">i</span> <span class="kwd">at</span> <span class="id">level</span> 50,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "'[' \<span class="id">big</span> [ <span class="id">op</span> / <span class="id">idx</span> ]<span class="id">_</span> ( <span class="id">i</span>  &lt;<span class="id">oo</span> |  <span class="id">P</span> ) '/  '  <span class="id">F</span> ']'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "\<span class="id">big</span> [ <span class="id">op</span> / <span class="id">idx</span> ]<span class="id">_</span> ( <span class="id">i</span> &lt;<span class="id">oo</span> ) <span class="id">F</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 36, <span class="id">F</span> <span class="kwd">at</span> <span class="id">level</span> 36, <span class="id">op</span>, <span class="id">idx</span> <span class="kwd">at</span> <span class="id">level</span> 10, <span class="id">i</span> <span class="kwd">at</span> <span class="id">level</span> 50,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "'[' \<span class="id">big</span> [ <span class="id">op</span> / <span class="id">idx</span> ]<span class="id">_</span> ( <span class="id">i</span>  &lt;<span class="id">oo</span> )  <span class="id">F</span> ']'").<br/>
<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "\<span class="id">sum_</span> ( <span class="id">m</span> &lt;= <span class="id">i</span> '&lt;<span class="id">oo</span>' | <span class="id">P</span> ) <span class="id">F</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">F</span> <span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">i</span>, <span class="id">m</span> <span class="kwd">at</span> <span class="id">level</span> 50,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "'[' \<span class="id">sum_</span> ( <span class="id">m</span>  &lt;=  <span class="id">i</span>  &lt;<span class="id">oo</span>  |  <span class="id">P</span> ) '/  '  <span class="id">F</span> ']'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "\<span class="id">sum_</span> ( <span class="id">m</span> &lt;= <span class="id">i</span> '&lt;<span class="id">oo</span>' ) <span class="id">F</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">F</span> <span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">i</span>, <span class="id">m</span> <span class="kwd">at</span> <span class="id">level</span> 50,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "'[' \<span class="id">sum_</span> ( <span class="id">m</span>  &lt;=  <span class="id">i</span>  &lt;<span class="id">oo</span> ) '/  '  <span class="id">F</span> ']'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "\<span class="id">sum_</span> ( <span class="id">i</span> '&lt;<span class="id">oo</span>' | <span class="id">P</span> ) <span class="id">F</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">F</span> <span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">i</span> <span class="kwd">at</span> <span class="id">level</span> 50,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "'[' \<span class="id">sum_</span> ( <span class="id">i</span>  &lt;<span class="id">oo</span>  |  <span class="id">P</span> ) '/  '  <span class="id">F</span> ']'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "\<span class="id">sum_</span> ( <span class="id">i</span> '&lt;<span class="id">oo</span>' ) <span class="id">F</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">F</span> <span class="kwd">at</span> <span class="id">level</span> 41, <span class="id">i</span> <span class="kwd">at</span> <span class="id">level</span> 50,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">format</span> "'[' \<span class="id">sum_</span> ( <span class="id">i</span>  &lt;<span class="id">oo</span> ) '/  '  <span class="id">F</span> ']'").<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sequence">sequence</a></span> <span class="id">R</span> := <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> -&gt; <span class="id">R</span>.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="mk_sequence">mk_sequence</a></span> <span class="id">R</span> <span class="id">f</span> : <span class="id"><a href="mathcomp.analysis.sequences.html#sequence">sequence</a></span> <span class="id">R</span> := <span class="id">f</span>.<br/>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.analysis.sequences.html#mk_sequence">mk_sequence</a></span> <span class="id">R</span> <span class="id">f</span> /.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">sequence</span>' <span class="id">E</span> ]<span class="id">_</span> <span class="id">n</span>" := (<span class="id"><a href="mathcomp.analysis.sequences.html#mk_sequence">mk_sequence</a></span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">E</span>%<span class="id">E</span>)) : <span class="id">ereal_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">sequence</span>' <span class="id">E</span> ]<span class="id">_</span> <span class="id">n</span>" := (<span class="id"><a href="mathcomp.analysis.sequences.html#mk_sequence">mk_sequence</a></span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">E</span>)) : <span class="id">ring_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">R</span> ^<span class="id">nat</span>" := (<span class="id"><a href="mathcomp.analysis.sequences.html#sequence">sequence</a></span> <span class="id">R</span>) : <span class="id">type_scope</span>.<br/>
<br/>
<span class="kwd">Notation</span> "'<span class="id">nondecreasing_seq</span>' <span class="id">f</span>" := ({<span class="id">homo</span> <span class="id">f</span> : <span class="id">n</span> <span class="id">m</span> / (<span class="id">n</span> &lt;= <span class="id">m</span>)%<span class="id">nat</span> &gt;-&gt; (<span class="id">n</span> &lt;= <span class="id">m</span>)%<span class="id">O</span>})<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 10).<br/>
<span class="kwd">Notation</span> "'<span class="id">nonincreasing_seq</span>' <span class="id">f</span>" := ({<span class="id">homo</span> <span class="id">f</span> : <span class="id">n</span> <span class="id">m</span> / (<span class="id">n</span> &lt;= <span class="id">m</span>)%<span class="id">nat</span> &gt;-&gt; (<span class="id">n</span> &gt;= <span class="id">m</span>)%<span class="id">O</span>})<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 10).<br/>
<span class="kwd">Notation</span> "'<span class="id">increasing_seq</span>' <span class="id">f</span>" := ({<span class="id">mono</span> <span class="id">f</span> : <span class="id">n</span> <span class="id">m</span> / (<span class="id">n</span> &lt;= <span class="id">m</span>)%<span class="id">nat</span> &gt;-&gt; (<span class="id">n</span> &lt;= <span class="id">m</span>)%<span class="id">O</span>})<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 10).<br/>
<span class="kwd">Notation</span> "'<span class="id">decreasing_seq</span>' <span class="id">f</span>" := ({<span class="id">mono</span> <span class="id">f</span> : <span class="id">n</span> <span class="id">m</span> / (<span class="id">n</span> &lt;= <span class="id">m</span>)%<span class="id">nat</span> &gt;-&gt; (<span class="id">n</span> &gt;= <span class="id">m</span>)%<span class="id">O</span>})<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 10).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nondecreasing_opp">nondecreasing_opp</a></span> (<span class="id">T</span> : <span class="id">numDomainType</span>) (<span class="id">u_</span> : <span class="id">T</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span> (- <span class="id">u_</span>) = <span class="id">nonincreasing_seq</span> <span class="id">u_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#propeqE">propeqE</a></span>; <span class="id">split</span> =&gt; <span class="id">du</span> <span class="id">x</span> <span class="id">y</span> /<span class="id">du</span>; <span class="id">rewrite</span> <span class="id">ler_opp2</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nonincreasing_opp">nonincreasing_opp</a></span> (<span class="id">T</span> : <span class="id">numDomainType</span>) (<span class="id">u_</span> : <span class="id">T</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">nonincreasing_seq</span> (- <span class="id">u_</span>) = <span class="id">nondecreasing_seq</span> <span class="id">u_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#propeqE">propeqE</a></span>; <span class="id">split</span> =&gt; <span class="id">du</span> <span class="id">x</span> <span class="id">y</span> /<span class="id">du</span>; <span class="id">rewrite</span> <span class="id">ler_opp2</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="decreasing_opp">decreasing_opp</a></span> (<span class="id">T</span> : <span class="id">numDomainType</span>) (<span class="id">u_</span> : <span class="id">T</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">decreasing_seq</span> (- <span class="id">u_</span>) = <span class="id">increasing_seq</span> <span class="id">u_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#propeqE">propeqE</a></span>; <span class="id">split</span> =&gt; <span class="id">du</span> <span class="id">x</span> <span class="id">y</span>; <span class="id">rewrite</span> -<span class="id">du</span> <span class="id">ler_opp2</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="increasing_opp">increasing_opp</a></span> (<span class="id">T</span> : <span class="id">numDomainType</span>) (<span class="id">u_</span> : <span class="id">T</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">increasing_seq</span> (- <span class="id">u_</span>) = <span class="id">decreasing_seq</span> <span class="id">u_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#propeqE">propeqE</a></span>; <span class="id">split</span> =&gt; <span class="id">du</span> <span class="id">x</span> <span class="id">y</span>; <span class="id">rewrite</span> -<span class="id">du</span> <span class="id">ler_opp2</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nondecreasing_seqP">nondecreasing_seqP</a></span> (<span class="id">d</span> : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span>) (<span class="id">T</span> : <span class="id">porderType</span> <span class="id">d</span>) (<span class="id">u_</span> : <span class="id">T</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">u_</span> <span class="id">n</span> &lt;= <span class="id">u_</span> <span class="id">n</span>.+1)%<span class="id">O</span> &lt;-&gt; <span class="id">nondecreasing_seq</span> <span class="id">u_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; [|<span class="id">h</span> <span class="id">n</span>]; [<span class="id">exact</span>: <span class="id">homo_leq</span> <span class="id">le_trans</span> | <span class="id">exact</span>: <span class="id">h</span>]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nonincreasing_seqP">nonincreasing_seqP</a></span> (<span class="id">d</span> : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span>) (<span class="id">T</span> : <span class="id">porderType</span> <span class="id">d</span>) (<span class="id">u_</span> : <span class="id">T</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">u_</span> <span class="id">n</span> &gt;= <span class="id">u_</span> <span class="id">n</span>.+1)%<span class="id">O</span> &lt;-&gt; <span class="id">nonincreasing_seq</span> <span class="id">u_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
<span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">homo_leq</span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">u</span> <span class="id">v</span> =&gt; <span class="id">le_trans</span> <span class="id">v</span> <span class="id">u</span>).<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">u_nincr</span> <span class="id">n</span>; <span class="id">exact</span>: <span class="id">u_nincr</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="increasing_seqP">increasing_seqP</a></span> (<span class="id">d</span> : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span>) (<span class="id">T</span> : <span class="id">porderType</span> <span class="id">d</span>) (<span class="id">u_</span> : <span class="id">T</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">u_</span> <span class="id">n</span> &lt; <span class="id">u_</span> <span class="id">n</span>.+1)%<span class="id">O</span> &lt;-&gt; <span class="id">increasing_seq</span> <span class="id">u_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
<span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">u_nondec</span>; <span class="id">apply</span>: <span class="id">le_mono</span>; <span class="id">apply</span>: <span class="id">homo_ltn</span> <span class="id">lt_trans</span> <span class="id">_</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">u_incr</span> <span class="id">n</span>; <span class="id">rewrite</span> <span class="id">lt_neqAle</span> <span class="id">eq_le</span> !<span class="id">u_incr</span> <span class="id">leqnSn</span> <span class="id">ltnn</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="decreasing_seqP">decreasing_seqP</a></span> (<span class="id">d</span> : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span>) (<span class="id">T</span> : <span class="id">porderType</span> <span class="id">d</span>) (<span class="id">u_</span> : <span class="id">T</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">u_</span> <span class="id">n</span> &gt; <span class="id">u_</span> <span class="id">n</span>.+1)%<span class="id">O</span> &lt;-&gt; <span class="id">decreasing_seq</span> <span class="id">u_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
<span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">u_noninc</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;FIXME:&nbsp;add&nbsp;shortcut&nbsp;to&nbsp;order.v&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">apply</span>: (@<span class="id">total_homo_mono</span> <span class="id">_</span> <span class="id">T</span> <span class="id">u_</span> <span class="id">leq</span> <span class="id">ltn</span> <span class="id">_</span> <span class="id">_</span> <span class="id">leqnn</span> <span class="id">_</span> <span class="id">ltn_neqAle</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">_</span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#esym">esym</a></span> (<span class="id">le_anti</span> <span class="id">_</span>)) <span class="id">leq_total</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">homo_ltn</span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">u</span> <span class="id">v</span> =&gt; <span class="id">lt_trans</span> <span class="id">v</span> <span class="id">u</span>) <span class="id">u_noninc</span>)) =&gt; //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> <span class="id">y</span>; <span class="id">rewrite</span> <span class="id">eq_sym</span> -<span class="id">lt_neqAle</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">u_decr</span> <span class="id">n</span>; <span class="id">rewrite</span> <span class="id">lt_neqAle</span> <span class="id">eq_le</span> !<span class="id">u_decr</span> !<span class="id">leqnSn</span> <span class="id">ltnn</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="lef_at">lef_at</a></span> (<span class="id">aT</span> : <span class="kwd">Type</span>) <span class="id">d</span> (<span class="id">T</span> : <span class="id">porderType</span> <span class="id">d</span>) (<span class="id">f</span> : (<span class="id">aT</span> -&gt; <span class="id">T</span>)^<span class="id">nat</span>) <span class="id">x</span> :<br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span> <span class="id">f</span> -&gt; {<span class="id">homo</span> (<span class="id">f</span>^~ <span class="id">x</span>) : <span class="id">n</span> <span class="id">m</span> / (<span class="id">n</span> &lt;= <span class="id">m</span>)%<span class="id">N</span> &gt;-&gt; (<span class="id">n</span> &lt;= <span class="id">m</span>)%<span class="id">O</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">nf</span> <span class="id">m</span> <span class="id">n</span> <span class="id">mn</span>; <span class="id">have</span> /<span class="id"><a href="mathcomp.classical.boolp.html#asboolP">asboolP</a></span> := <span class="id">nf</span> <span class="id">_</span> <span class="id">_</span> <span class="id">mn</span>; <span class="id">exact</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nondecreasing_seqD">nondecreasing_seqD</a></span> <span class="id">T</span> (<span class="id">d</span> : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#unit">unit</a></span>) (<span class="id">R</span> : <span class="id">numDomainType</span>) (<span class="id">f</span> <span class="id">g</span> : (<span class="id">T</span> -&gt; <span class="id">R</span>)^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id">nondecreasing_seq</span> (<span class="id">f</span> ^~ <span class="id">x</span>)) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id">nondecreasing_seq</span> (<span class="id">g</span> ^~ <span class="id">x</span>)) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>, <span class="id">nondecreasing_seq</span> ((<span class="id">f</span> \+ <span class="id">g</span>) ^~ <span class="id">x</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">ndf</span> <span class="id">ndg</span> <span class="id">t</span> <span class="id">m</span> <span class="id">n</span> <span class="id">mn</span>; <span class="id">apply</span>: <span class="id">ler_add</span>; [<span class="id">exact</span>/<span class="id">ndf</span>|<span class="id">exact</span>/<span class="id">ndg</span>]. Qed.</div>
<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="eqolimn">eqolimn</a></span> := (@<span class="id"><a href="mathcomp.analysis.landau.html#eqolim">eqolim</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.topology.html#eventually_filter">eventually_filter</a></span>).<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="eqolimPn">eqolimPn</a></span> := (@<span class="id"><a href="mathcomp.analysis.landau.html#eqolimP">eqolimP</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.topology.html#eventually_filter">eventually_filter</a></span>).<br/>
<br/>
<pre class="ssrdoc">
Sequences of sets 
</pre>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="seqDU">seqDU</a></span>.<br/>
<span class="kwd">Variables</span> (<span class="id"><a name="seqDU.T">T</a></span> : <span class="kwd">Type</span>).<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">F</span> : (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.sequences.html#seqDU.T">T</a></span>)^<span class="id">nat</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="seqDU">seqDU</a></span> <span class="id">F</span> <span class="id">n</span> := <span class="id">F</span> <span class="id">n</span> `\` \<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.classical_sets.html#setU">setU</a></span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>]<span class="id">_</span>(<span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">k</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="trivIset_seqDU">trivIset_seqDU</a></span> <span class="id">F</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset">trivIset</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> (<span class="id"><a href="mathcomp.analysis.sequences.html#seqDU">seqDU</a></span> <span class="id">F</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
<span class="id">move</span>=&gt; <span class="id">i</span> <span class="id">j</span> <span class="id">_</span> <span class="id">_</span>; <span class="id">wlog</span> <span class="id">ij</span> : <span class="id">i</span> <span class="id">j</span> / (<span class="id">i</span> &lt; <span class="id">j</span>)%<span class="id">N</span> =&gt; [/(<span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">tB</span>|].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">have</span> [<span class="id">ij</span> /<span class="id">tB</span>-&gt;|<span class="id">ij</span>|] := <span class="id">ltngtP</span> <span class="id">i</span> <span class="id">j</span>; <span class="id">rewrite</span> //<span class="id"><a href="mathcomp.classical.classical_sets.html#setIC">setIC</a></span> =&gt; /<span class="id">tB</span> -&gt;.<br/>
<span class="id">move</span>=&gt; /<span class="id"><a href="mathcomp.classical.classical_sets.html#set0P">set0P</a></span>; <span class="id">apply</span>: <span class="id">contraNeq</span> =&gt; <span class="id">_</span>; <span class="id">apply</span>/<span class="id">eqP</span>.<br/>
<span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.sequences.html#seqDU">seqDU</a></span> 2!<span class="id"><a href="mathcomp.classical.classical_sets.html#setDE">setDE</a></span> !<span class="id"><a href="mathcomp.classical.classical_sets.html#setIA">setIA</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIC">setIC</a></span> (<span class="id">bigD1</span> (<span class="id">Ordinal</span> <span class="id">ij</span>)) //=.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setCU">setCU</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIAC">setIAC</a></span> !<span class="id"><a href="mathcomp.classical.classical_sets.html#setIA">setIA</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setICl">setICl</a></span> !<span class="id"><a href="mathcomp.classical.classical_sets.html#set0I">set0I</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bigsetU_seqDU">bigsetU_seqDU</a></span> <span class="id">F</span> <span class="id">n</span> :<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.classical_sets.html#setU">setU</a></span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>]<span class="id">_</span>(<span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">k</span> = \<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.classical_sets.html#setU">setU</a></span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>]<span class="id">_</span>(<span class="id">k</span> &lt; <span class="id">n</span>) <span class="id"><a href="mathcomp.analysis.sequences.html#seqDU">seqDU</a></span> <span class="id">F</span> <span class="id">k</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
<span class="id">elim</span>: <span class="id">n</span> =&gt; [|<span class="id">n</span> <span class="id">ih</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> 2!<span class="id">big_ord0</span>.<br/>
<span class="id">rewrite</span> !<span class="id">big_ord_recr</span> /= <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; <span class="id">t</span>; <span class="id">split</span>=&gt; [[<span class="id">Ft</span>|<span class="id">Fnt</span>]|[<span class="id">Ft</span>|[<span class="id">Fnt</span> <span class="id">Ft</span>]]].<br/>
- <span class="kwd">by</span> <span class="id">left</span>; <span class="id">rewrite</span> -<span class="id">ih</span>.<br/>
- <span class="id">have</span> [?|?] := <span class="id"><a href="mathcomp.classical.boolp.html#pselect">pselect</a></span> ((\<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.classical_sets.html#setU">setU</a></span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id"><a href="mathcomp.analysis.sequences.html#seqDU">seqDU</a></span> <span class="id">F</span> <span class="id">i</span>) <span class="id">t</span>); <span class="id">first</span> <span class="kwd">by</span> <span class="id">left</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">right</span>; <span class="id">split</span> =&gt; //; <span class="id">rewrite</span> <span class="id">ih</span>.<br/>
- <span class="kwd">by</span> <span class="id">left</span>; <span class="id">rewrite</span> <span class="id">ih</span>.<br/>
- <span class="kwd">by</span> <span class="id">right</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="seqDU_bigcup_eq">seqDU_bigcup_eq</a></span> <span class="id">F</span> : \<span class="id">bigcup_k</span> <span class="id">F</span> <span class="id">k</span> = \<span class="id">bigcup_k</span> <span class="id"><a href="mathcomp.analysis.sequences.html#seqDU">seqDU</a></span> <span class="id">F</span> <span class="id">k</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
<span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.sequences.html#seqDU">seqDU</a></span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; <span class="id">t</span>; <span class="id">split</span>=&gt; [[<span class="id">n</span> <span class="id">_</span> <span class="id">Fnt</span>]|[<span class="id">n</span> <span class="id">_</span>]]; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDE">setDE</a></span> =&gt; -[? <span class="id">_</span>]; <span class="kwd">exists</span> <span class="id">n</span>.<br/>
<span class="id">have</span> [<span class="id">UFnt</span>|<span class="id">UFnt</span>] := <span class="id"><a href="mathcomp.classical.boolp.html#pselect">pselect</a></span> ((\<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.classical_sets.html#setU">setU</a></span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>]<span class="id">_</span>(<span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">k</span>) <span class="id">t</span>); <span class="id">last</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">n</span>.<br/>
<span class="id">suff</span> [<span class="id">m</span> [<span class="id">Fmt</span> <span class="id">FNmt</span>]] : <span class="kwd">exists</span> <span class="id">m</span>, <span class="id">F</span> <span class="id">m</span> <span class="id">t</span> /\ <span class="kwd">forall</span> <span class="id">k</span>, (<span class="id">k</span> &lt; <span class="id">m</span>)%<span class="id">N</span> -&gt; ~ <span class="id">F</span> <span class="id">k</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">m</span> =&gt; //; <span class="id">split</span> =&gt; //; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_mkord">bigcup_mkord</a></span> =&gt; -[<span class="id">k</span> <span class="id">kj</span>]; <span class="id">exact</span>: <span class="id">FNmt</span>.<br/>
<span class="id">move</span>: <span class="id">UFnt</span>; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_mkord">bigcup_mkord</a></span> =&gt; -[/= <span class="id">k</span> <span class="id">_</span> <span class="id">Fkt</span>] {<span class="id">Fnt</span> <span class="id">n</span>}.<br/>
<span class="id">have</span> [<span class="id">n</span> <span class="id">kn</span>] := <span class="id">ubnP</span> <span class="id">k</span>; <span class="id">elim</span>: <span class="id">n</span> =&gt; // <span class="id">n</span> <span class="id">ih</span> <span class="kwd">in</span> <span class="id">t</span> <span class="id">k</span> <span class="id">Fkt</span> <span class="id">kn</span> *.<br/>
<span class="id">case</span>: <span class="id">k</span> =&gt; [|<span class="id">k</span>] <span class="kwd">in</span> <span class="id">Fkt</span> <span class="id">kn</span> *; <span class="id">first</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#O">O</a></span>.<br/>
<span class="id">have</span> [?|] := <span class="id"><a href="mathcomp.classical.boolp.html#pselect">pselect</a></span> (<span class="kwd">forall</span> <span class="id">m</span>, (<span class="id">m</span> &lt;= <span class="id">k</span>)%<span class="id">N</span> -&gt; ~ <span class="id">F</span> <span class="id">m</span> <span class="id">t</span>); <span class="id">first</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">k</span>.+1.<br/>
<span class="id">move</span>=&gt; /<span class="id"><a href="mathcomp.classical.boolp.html#existsNP">existsNP</a></span>[<span class="id">i</span>] /<span class="id"><a href="mathcomp.classical.boolp.html#not_implyP">not_implyP</a></span>[<span class="id">ik</span>] /<span class="id"><a href="mathcomp.classical.boolp.html#contrapT">contrapT</a></span> <span class="id">Fit</span>; <span class="id">apply</span>: (<span class="id">ih</span> <span class="id">t</span> <span class="id">i</span>) =&gt; //.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">leq_ltn_trans</span> <span class="id">ik</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="seqDUIE">seqDUIE</a></span> (<span class="id">S</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.sequences.html#seqDU.T">T</a></span>) (<span class="id">F</span> : (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.sequences.html#seqDU.T">T</a></span>)^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.sequences.html#seqDU">seqDU</a></span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">S</span> `&amp;` <span class="id">F</span> <span class="id">n</span>) = (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">S</span> `&amp;` <span class="id">F</span> <span class="id">n</span> `\` \<span class="id">bigcup_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
<span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setIDA">setIDA</a></span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">seteqP</a></span>; <span class="id">split</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">x</span> [<span class="id">Sx</span> [<span class="id">Fnx</span> <span class="id">UFx</span>]]; <span class="id">split</span>=&gt; //; <span class="id">apply</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#contra_not">contra_not</a></span> <span class="id">UFx</span> =&gt; /=.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_mkord">bigcup_mkord</a></span> -<span class="id">big_distrr</span>/= =&gt; -[].<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.sequences.html#seqDU">seqDU</a></span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#setIDA">setIDA</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_mkord">bigcup_mkord</a></span> -<span class="id">big_distrr</span>/= <span class="id"><a href="mathcomp.classical.classical_sets.html#setDIr">setDIr</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setIUr">setIUr</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setDIK">setDIK</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0U">set0U</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.sequences.html#seqDU">seqDU</a></span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">trivIset_seqDU</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="seqD">seqD</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="seqD.T">T</a></span> : <span class="kwd">Type</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">F</span> : (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.analysis.sequences.html#seqD.T">T</a></span>) ^<span class="id">nat</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="seqD">seqD</a></span> <span class="id">F</span> := <span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="kwd">if</span> <span class="id">n</span> <span class="id">isn</span>'<span class="id">t</span> <span class="id">n</span>'.+1 <span class="kwd">then</span> <span class="id">F</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#O">O</a></span> <span class="kwd">else</span> <span class="id">F</span> <span class="id">n</span> `\` <span class="id">F</span> <span class="id">n</span>'.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="seqDU_seqD">seqDU_seqD</a></span> <span class="id">F</span> : <span class="id">nondecreasing_seq</span> <span class="id">F</span> -&gt; <span class="id"><a href="mathcomp.analysis.sequences.html#seqDU">seqDU</a></span> <span class="id">F</span> = <span class="id"><a href="mathcomp.analysis.sequences.html#seqD">seqD</a></span> <span class="id">F</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
<span class="id">move</span>=&gt; <span class="id">ndF</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#funeqE">funeqE</a></span> =&gt; -[|<span class="id">n</span>] /=; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.sequences.html#seqDU">seqDU</a></span> <span class="id">big_ord0</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setD0">setD0</a></span>.<br/>
<span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.sequences.html#seqDU">seqDU</a></span> <span class="id">big_ord_recr</span> /= <span class="id"><a href="mathcomp.classical.classical_sets.html#setUC">setUC</a></span>; <span class="id">congr</span> (<span class="id">_</span> `\` <span class="id">_</span>); <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#setUidPl">setUidPl</a></span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_mkord">bigcup_mkord</a></span> =&gt; + [<span class="id">k</span> /= <span class="id">kn</span>]; <span class="id">exact</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#SetOrder.Exports.subsetPset">subsetPset</a></span>/<span class="id">ndF</span>/<span class="id">ltnW</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="trivIset_seqD">trivIset_seqD</a></span> <span class="id">F</span> : <span class="id">nondecreasing_seq</span> <span class="id">F</span> -&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset">trivIset</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> (<span class="id"><a href="mathcomp.analysis.sequences.html#seqD">seqD</a></span> <span class="id">F</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">ndF</span>; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.analysis.sequences.html#seqDU_seqD">seqDU_seqD</a></span> //; <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.sequences.html#trivIset_seqDU">trivIset_seqDU</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bigsetU_seqD">bigsetU_seqD</a></span> <span class="id">F</span> <span class="id">n</span> :<br/>
&nbsp;&nbsp;\<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.classical_sets.html#setU">setU</a></span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">F</span> <span class="id">i</span> = \<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.classical_sets.html#setU">setU</a></span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id"><a href="mathcomp.analysis.sequences.html#seqD">seqD</a></span> <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
<span class="id">case</span>: <span class="id">n</span> =&gt; [|<span class="id">n</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> 2!<span class="id">big_ord0</span>.<br/>
<span class="id">elim</span>: <span class="id">n</span> =&gt; [|<span class="id">n</span> <span class="id">ih</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id">big_ord_recl</span> !<span class="id">big_ord0</span>.<br/>
<span class="id">rewrite</span> <span class="id">big_ord_recr</span> [<span class="kwd">in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS</a></span>]<span class="id">big_ord_recr</span> /= -{}<span class="id">ih</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">predeqE</a></span> =&gt; <span class="id">x</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; [?|?]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">left</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> [?|?] := <span class="id"><a href="mathcomp.classical.boolp.html#pselect">pselect</a></span> (<span class="id">F</span> <span class="id">n</span> <span class="id">x</span>); <span class="id">last</span> <span class="kwd">by</span> <span class="id">right</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">left</span>; <span class="id">rewrite</span> <span class="id">big_ord_recr</span> /=; <span class="id">right</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; [?|[? ?]]; [<span class="id">left</span> | <span class="id">right</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="setU_seqD">setU_seqD</a></span> <span class="id">F</span> : <span class="id">nondecreasing_seq</span> <span class="id">F</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">F</span> <span class="id">n</span>.+1 = <span class="id">F</span> <span class="id">n</span> `|` <span class="id"><a href="mathcomp.analysis.sequences.html#seqD">seqD</a></span> <span class="id">F</span> <span class="id">n</span>.+1.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
<span class="id">move</span>=&gt; <span class="id">ndF</span> <span class="id">n</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.analysis.sequences.html#seqD">seqD</a></span> <span class="id"><a href="mathcomp.classical.boolp.html#funeqE">funeqE</a></span> =&gt; <span class="id">x</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#propeqE">propeqE</a></span>; <span class="id">split</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; ?; <span class="id">have</span> [?|?] := <span class="id"><a href="mathcomp.classical.boolp.html#pselect">pselect</a></span> (<span class="id">F</span> <span class="id">n</span> <span class="id">x</span>); [<span class="id">left</span> | <span class="id">right</span>].<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; -[|[]//]; <span class="id">move</span>: <span class="id">x</span>; <span class="id">exact</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#SetOrder.Exports.subsetPset">subsetPset</a></span>/<span class="id">ndF</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eq_bigsetU_seqD">eq_bigsetU_seqD</a></span> <span class="id">F</span> <span class="id">n</span> : <span class="id">nondecreasing_seq</span> <span class="id">F</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">F</span> <span class="id">n</span> = \<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.classical_sets.html#setU">setU</a></span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span>.+1) <span class="id"><a href="mathcomp.analysis.sequences.html#seqD">seqD</a></span> <span class="id">F</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
<span class="id">move</span>=&gt; <span class="id">ndF</span>; <span class="id">elim</span>: <span class="id">n</span> =&gt; [|<span class="id">n</span> <span class="id">ih</span>]; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#funeqE">funeqE</a></span> =&gt; <span class="id">x</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#propeqE">propeqE</a></span>; <span class="id">split</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; ?; <span class="id">rewrite</span> <span class="id">big_ord_recl</span> <span class="id">big_ord0</span>; <span class="id">left</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big_ord_recl</span> <span class="id">big_ord0</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setU0">setU0</a></span>.<br/>
- <span class="id">rewrite</span> (<span class="id"><a href="mathcomp.analysis.sequences.html#setU_seqD">setU_seqD</a></span> <span class="id">ndF</span>) =&gt; -[|/=].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big_ord_recr</span> /= -<span class="id">ih</span> =&gt; <span class="id">Fnx</span>; <span class="id">left</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; -[<span class="id">Fn1x</span> <span class="id">Fnx</span>]; <span class="id">rewrite</span> <span class="id">big_ord_recr</span> /=; <span class="id">right</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big_ord_recr</span> /= -<span class="id">ih</span> =&gt; -[|[]//]; <span class="id">move</span>: <span class="id">x</span>; <span class="id">exact</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#SetOrder.Exports.subsetPset">subsetPset</a></span>/<span class="id">ndF</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eq_bigcup_seqD">eq_bigcup_seqD</a></span> <span class="id">F</span> : \<span class="id">bigcup_n</span> <span class="id">F</span> <span class="id">n</span> = \<span class="id">bigcup_n</span> <span class="id"><a href="mathcomp.analysis.sequences.html#seqD">seqD</a></span> <span class="id">F</span> <span class="id">n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#funeqE">funeqE</a></span> =&gt; <span class="id">x</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#propeqE">propeqE</a></span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">case</span>; <span class="id">elim</span>=&gt; [<span class="id">_</span> <span class="id">F0x</span>|<span class="id">n</span> <span class="id">ih</span> <span class="id">_</span> <span class="id">Fn1x</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#O">O</a></span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> [|<span class="id">Fnx</span>] := <span class="id"><a href="mathcomp.classical.boolp.html#pselect">pselect</a></span> (<span class="id">F</span> <span class="id">n</span> <span class="id">x</span>); <span class="id">last</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">n</span>.+1.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; /(<span class="id">ih</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">I</a></span>)[<span class="id">m</span> <span class="id">_</span> <span class="id">Fmx</span>]; <span class="kwd">exists</span> <span class="id">m</span>.<br/>
<span class="id">case</span>; <span class="id">elim</span>=&gt; [<span class="id">_</span> /= <span class="id">F0x</span>|<span class="id">n</span> <span class="id">ih</span> <span class="id">_</span> /= [<span class="id">Fn1x</span> <span class="id">Fnx</span>]]; <span class="kwd">by</span> [<span class="kwd">exists</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#O">O</a></span> | <span class="kwd">exists</span> <span class="id">n</span>.+1].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eq_bigcup_seqD_bigsetU">eq_bigcup_seqD_bigsetU</a></span> <span class="id">F</span> :<br/>
&nbsp;&nbsp;\<span class="id">bigcup_n</span> (<span class="id"><a href="mathcomp.analysis.sequences.html#seqD">seqD</a></span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.classical_sets.html#setU">setU</a></span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span>.+1) <span class="id">F</span> <span class="id">i</span>) <span class="id">n</span>) = \<span class="id">bigcup_n</span> <span class="id">F</span> <span class="id">n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
<span class="id">rewrite</span> -(@<span class="id"><a href="mathcomp.analysis.sequences.html#eq_bigcup_seqD">eq_bigcup_seqD</a></span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">big</span>[<span class="id"><a href="mathcomp.classical.classical_sets.html#setU">setU</a></span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span>]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span>.+1) <span class="id">F</span> <span class="id">i</span>)).<br/>
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#eqEsubset">eqEsubset</a></span>; <span class="id">split</span> =&gt; [<span class="id">t</span> [<span class="id">i</span> <span class="id">_</span>]|<span class="id">t</span> [<span class="id">i</span> <span class="id">_</span> <span class="id">Fit</span>]].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.classical_sets.html#bigcup_seq_cond">bigcup_seq_cond</a></span> =&gt; -[/= <span class="id">j</span> <span class="id">_</span> <span class="id">Fjt</span>]; <span class="kwd">exists</span> <span class="id">j</span>.<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">i</span> =&gt; //; <span class="id">rewrite</span> <span class="id">big_ord_recr</span> /=; <span class="id">right</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.sequences.html#seqD">seqD</a></span>.<br/>
<br/>
<pre class="ssrdoc">
Convergence of patched sequences 
</pre>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="sequences_patched">sequences_patched</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="sequences_patched.NatShift">NatShift</a></span>.<br/>
<br/>
<span class="kwd">Variables</span> (<span class="id"><a name="sequences_patched.NatShift.N">N</a></span> : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id"><a name="sequences_patched.NatShift.V">V</a></span> : <span class="id"><a href="mathcomp.analysis.topology.html#Topological.Exports.topologicalType">topologicalType</a></span>).<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">f</span> : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">nat</a></span> -&gt; <span class="id"><a href="mathcomp.analysis.sequences.html#sequences_patched.NatShift.V">V</a></span>) (<span class="id">u</span> : <span class="id"><a href="mathcomp.analysis.sequences.html#sequences_patched.NatShift.V">V</a></span> ^<span class="id">nat</span>)  (<span class="id">l</span> : <span class="id"><a href="mathcomp.analysis.sequences.html#sequences_patched.NatShift.V">V</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="cvg_restrict">cvg_restrict</a></span> <span class="id">f</span> <span class="id">u_</span> <span class="id">l</span> :<br/>
&nbsp;&nbsp;([<span class="id">sequence</span> <span class="kwd">if</span> (<span class="id">n</span> &lt;= <span class="id"><a href="mathcomp.analysis.sequences.html#sequences_patched.NatShift.N">N</a></span>)%<span class="id">N</span> <span class="kwd">then</span> <span class="id">f</span> <span class="id">n</span> <span class="kwd">else</span> <span class="id">u_</span> <span class="id">n</span>]<span class="id">_n</span> @ \<span class="id">oo</span> --&gt; <span class="id">l</span>) =<br/>
&nbsp;&nbsp;(<span class="id">u_</span> @ \<span class="id">oo</span> --&gt; <span class="id">l</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#propeqE">propeqE</a></span>; <span class="id">split</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.topology.html#cvg_trans">cvg_trans</a></span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.topology.html#near_eq_cvg">near_eq_cvg</a></span>;<br/>
<span class="kwd">by</span> <span class="id">near</span> <span class="id">do</span> [<span class="id">move</span>=&gt; /=; <span class="id">case</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifP">ifP</a></span> =&gt; //; <span class="id">rewrite</span> <span class="id">ltn_geF</span>//].<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_cvg_restrict">is_cvg_restrict</a></span> <span class="id">f</span> <span class="id">u_</span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.topology.html#cvg">cvg</a></span> ([<span class="id">sequence</span> <span class="kwd">if</span> (<span class="id">n</span> &lt;= <span class="id"><a href="mathcomp.analysis.sequences.html#sequences_patched.NatShift.N">N</a></span>)%<span class="id">nat</span> <span class="kwd">then</span> <span class="id">f</span> <span class="id">n</span> <span class="kwd">else</span> <span class="id">u_</span> <span class="id">n</span>]<span class="id">_n</span> @ \<span class="id">oo</span>) =<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.topology.html#cvg">cvg</a></span> (<span class="id">u_</span> @ \<span class="id">oo</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#propeqE">propeqE</a></span>; <span class="id">split</span>;<br/>
&nbsp;&nbsp;[<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.sequences.html#cvg_restrict">cvg_restrict</a></span>|<span class="id">rewrite</span> -(<span class="id"><a href="mathcomp.analysis.sequences.html#cvg_restrict">cvg_restrict</a></span> <span class="id">f</span>)] =&gt; /<span class="id"><a href="mathcomp.analysis.topology.html#cvgP">cvgP</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="cvg_centern">cvg_centern</a></span> <span class="id">u_</span> <span class="id">l</span> : ([<span class="id">sequence</span> <span class="id">u_</span> (<span class="id">n</span> - <span class="id"><a href="mathcomp.analysis.sequences.html#sequences_patched.NatShift.N">N</a></span>)%<span class="id">N</span>]<span class="id">_n</span> --&gt; <span class="id">l</span>) = (<span class="id">u_</span> --&gt; <span class="id">l</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#propeqE">propeqE</a></span>; <span class="id">split</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.topology.html#cvg_comp">cvg_comp</a></span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.topology.html#cvg_subnr">cvg_subnr</a></span>.<br/>
<span class="id">gen</span> <span class="id">have</span> <span class="id">cD</span> : <span class="id">u_</span> <span class="id">l</span> / <span class="id">u_</span> --&gt; <span class="id">l</span> -&gt; (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">u_</span> (<span class="id">n</span> + <span class="id"><a href="mathcomp.analysis.sequences.html#sequences_patched.NatShift.N">N</a></span>)%<span class="id">N</span>) --&gt; <span class="id">l</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.topology.html#cvg_comp">cvg_comp</a></span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.topology.html#cvg_addnr">cvg_addnr</a></span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">cD</span> /=; <span class="id">under</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">X</span> --&gt; <span class="id">l</span>]<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">n</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">addnK</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="cvg_shiftn">cvg_shiftn</a></span> <span class="id">u_</span> <span class="id">l</span> : ([<span class="id">sequence</span> <span class="id">u_</span> (<span class="id">n</span> + <span class="id"><a href="mathcomp.analysis.sequences.html#sequences_patched.NatShift.N">N</a></span>)%<span class="id">N</span>]<span class="id">_n</span> --&gt; <span class="id">l</span>) = (<span class="id">u_</span> --&gt; <span class="id">l</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#propeqE">propeqE</a></span>; <span class="id">split</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.topology.html#cvg_comp">cvg_comp</a></span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.topology.html#cvg_addnr">cvg_addnr</a></span>.<br/>
<span class="id">rewrite</span> -[<span class="id">X</span> <span class="kwd">in</span> <span class="id">X</span> -&gt; <span class="id">_</span>]<span class="id"><a href="mathcomp.analysis.sequences.html#cvg_centern">cvg_centern</a></span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.topology.html#cvg_trans">cvg_trans</a></span> =&gt; /=.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.topology.html#near_eq_cvg">near_eq_cvg</a></span>; <span class="id">near</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">subnK</span>; <span class="kwd">exists</span> <span class="id"><a href="mathcomp.analysis.sequences.html#sequences_patched.NatShift.N">N</a></span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.sequences.html#sequences_patched.NatShift">NatShift</a></span>.<br/>
<br/>
<span class="kwd">Variables</span> (<span class="id"><a name="sequences_patched.V">V</a></span> : <span class="id"><a href="mathcomp.analysis.topology.html#Topological.Exports.topologicalType">topologicalType</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="cvg_shiftS">cvg_shiftS</a></span> <span class="id">u_</span> (<span class="id">l</span> : <span class="id"><a href="mathcomp.analysis.sequences.html#sequences_patched.V">V</a></span>) : ([<span class="id">sequence</span> <span class="id">u_</span> <span class="id">n</span>.+1]<span class="id">_n</span> --&gt; <span class="id">l</span>) = (<span class="id">u_</span> --&gt; <span class="id">l</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
<span class="id">suff</span> -&gt; : [<span class="id">sequence</span> <span class="id">u_</span> <span class="id">n</span>.+1]<span class="id">_n</span> = [<span class="id">sequence</span> <span class="id">u_</span>(<span class="id">n</span> + 1)%<span class="id">N</span>]<span class="id">_n</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.sequences.html#cvg_shiftn">cvg_shiftn</a></span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#funeqE">funeqE</a></span> =&gt; <span class="id">n</span>/=; <span class="id">rewrite</span> <span class="id">addn1</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.sequences.html#sequences_patched">sequences_patched</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="sequences_R_lemmas_realFieldType">sequences_R_lemmas_realFieldType</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="sequences_R_lemmas_realFieldType.R">R</a></span> : <span class="id">realFieldType</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">u</span> <span class="id">v</span> : <span class="id"><a href="mathcomp.analysis.sequences.html#sequences_R_lemmas_realFieldType.R">R</a></span> ^<span class="id">nat</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="__deprecated__squeeze">__deprecated__squeeze</a></span> <span class="id">T</span> (<span class="id">f</span> <span class="id">g</span> <span class="id">h</span> : <span class="id">T</span> -&gt; <span class="id"><a href="mathcomp.analysis.sequences.html#sequences_R_lemmas_realFieldType.R">R</a></span>) (<span class="id">a</span> : <span class="id"><a href="mathcomp.analysis.topology.html#filter_on">filter_on</a></span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;(\<span class="kwd">forall</span> <span class="id">x</span> \<span class="id">near</span> <span class="id">a</span>, <span class="id">f</span> <span class="id">x</span> &lt;= <span class="id">g</span> <span class="id">x</span> &lt;= <span class="id">h</span> <span class="id">x</span>) -&gt; <span class="kwd">forall</span> (<span class="id">l</span> : <span class="id"><a href="mathcomp.analysis.sequences.html#sequences_R_lemmas_realFieldType.R">R</a></span>),<br/>
&nbsp;&nbsp;<span class="id">f</span> @ <span class="id">a</span> --&gt; <span class="id">l</span> -&gt; <span class="id">h</span> @ <span class="id">a</span> --&gt; <span class="id">l</span> -&gt; <span class="id">g</span> @ <span class="id">a</span> --&gt; <span class="id">l</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
 <span class="id">exact</span>: <span class="id"><a href="mathcomp.analysis.normedtype.html#squeeze_cvgr">squeeze_cvgr</a></span>. Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">squeeze_cvgr</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id"><a name="squeeze">squeeze</a></span> := <span class="id"><a href="mathcomp.analysis.sequences.html#__deprecated__squeeze">__deprecated__squeeze</a></span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__cvgPpinfty</span> (<span class="id">u_</span> : <span class="id">R</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">u_</span> --&gt; +<span class="id">oo</span> &lt;-&gt; <span class="kwd">forall</span> <span class="id">A</span>, \<span class="kwd">forall</span> <span class="id">n</span> \<span class="id">near</span> \<span class="id">oo</span>, <span class="id">A</span> &lt;= <span class="id">u_</span> <span class="id">n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
 <span class="id">exact</span>: <span class="id">cvgryPge</span>. Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">cvgryPge</span>`, <span class="id">and</span> <span class="id">generalized</span> <span class="id">to</span> <span class="id">any</span> <span class="id">filter</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">cvgPpinfty</span> := <span class="id">__deprecated__cvgPpinfty</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__cvgNpinfty</span> <span class="id">u_</span> : (- <span class="id">u_</span> --&gt; +<span class="id">oo</span>) = (<span class="id">u_</span> --&gt; -<span class="id">oo</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
 <span class="id">exact</span>/<span class="id">propeqP</span>/<span class="id">cvgNry</span>. Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">use</span> `<span class="id">cvgNry</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">cvgNpinfty</span> := <span class="id">__deprecated__cvgNpinfty</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__cvgNninfty</span> <span class="id">u_</span> : (- <span class="id">u_</span> --&gt; -<span class="id">oo</span>) = (<span class="id">u_</span> --&gt; +<span class="id">oo</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
 <span class="id">exact</span>/<span class="id">propeqP</span>/<span class="id">cvgNrNy</span>. Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">use</span> `<span class="id">cvgNrNy</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">cvgNninfty</span> := <span class="id">__deprecated__cvgNninfty</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__cvgPninfty</span> (<span class="id">u_</span> : <span class="id">R</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">u_</span> --&gt; -<span class="id">oo</span> &lt;-&gt; <span class="kwd">forall</span> <span class="id">A</span>, \<span class="kwd">forall</span> <span class="id">n</span> \<span class="id">near</span> \<span class="id">oo</span>, <span class="id">A</span> &gt;= <span class="id">u_</span> <span class="id">n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
 <span class="id">exact</span>: <span class="id">cvgrNyPle</span>. Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">cvgrNyPle</span>`, <span class="id">and</span> <span class="id">generalized</span> <span class="id">to</span> <span class="id">any</span> <span class="id">filter</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">cvgPninfty</span> := <span class="id">__deprecated__cvgPninfty</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__ger_cvg_pinfty</span> <span class="id">u_</span> <span class="id">v_</span> : (\<span class="kwd">forall</span> <span class="id">n</span> \<span class="id">near</span> \<span class="id">oo</span>, <span class="id">u_</span> <span class="id">n</span> &lt;= <span class="id">v_</span> <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">u_</span> --&gt; +<span class="id">oo</span> -&gt; <span class="id">v_</span> --&gt; +<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
 <span class="id">exact</span>: <span class="id">ger_cvgy</span>. Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id"><a href="mathcomp.analysis.sequences.html#__deprecated__ger_cvg_pinfty">to</a></span> `<span class="id">ger_cvgy</span>`, <span class="id">and</span> <span class="id">generalized</span> <span class="id">to</span> <span class="id">any</span> <span class="id">filter</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">ger_cvg_pinfty</span> := <span class="id">__deprecated__ger_cvg_pinfty</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__ler_cvg_ninfty</span> <span class="id">v_</span> <span class="id">u_</span> : (\<span class="kwd">forall</span> <span class="id">n</span> \<span class="id">near</span> \<span class="id">oo</span>, <span class="id">u_</span> <span class="id">n</span> &lt;= <span class="id">v_</span> <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">v_</span> --&gt; -<span class="id">oo</span> -&gt; <span class="id">u_</span> --&gt; -<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
 <span class="id">exact</span>: <span class="id">ler_cvgNy</span>. Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.sequences.html#__deprecated__ler_cvg_ninfty">note</a></span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">ler_cvgNy</span>`, <span class="id">and</span> <span class="id">generalized</span> <span class="id">to</span> <span class="id">any</span> <span class="id">filter</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">ler_cvg_ninfty</span> := <span class="id">__deprecated__ler_cvg_ninfty</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__lim_ge</span> <span class="id">x</span> <span class="id">u</span> : <span class="id">cvg</span> <span class="id">u</span> -&gt; (\<span class="kwd">forall</span> <span class="id">n</span> \<span class="id">near</span> \<span class="id">oo</span>, <span class="id">x</span> &lt;= <span class="id">u</span> <span class="id">n</span>) -&gt; <span class="id">x</span> &lt;= <span class="id">lim</span> <span class="id">u</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
 <span class="id">exact</span>: <span class="id">limr_ge</span>. Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id"><a name="lim_ge">mathcomp</a></span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">limr_ge</span>`, <span class="id">and</span> <span class="id">generalized</span> <span class="id">to</span> <span class="id">any</span> <span class="id">proper</span> <span class="id">filter</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">lim_ge</span> := <span class="id"><a href="mathcomp.analysis.topology.html#lim">__deprecated__lim_ge</a></span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__lim_le</span> <span class="id">x</span> <span class="id">u</span> : <span class="id">cvg</span> <span class="id">u</span> -&gt; (\<span class="kwd">forall</span> <span class="id">n</span> \<span class="id">near</span> \<span class="id">oo</span>, <span class="id">x</span> &gt;= <span class="id">u</span> <span class="id">n</span>) -&gt; <span class="id">x</span> &gt;= <span class="id">lim</span> <span class="id">u</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
 <span class="id">exact</span>: <span class="id">limr_le</span>. Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">limr_le</span>`, <span class="id">and</span> <span class="id">generalized</span> <span class="id">to</span> <span class="id">any</span> <span class="id"><a href="mathcomp.analysis.topology.html#lim">proper</a></span> <span class="id">filter</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">lim_le</span> := <span class="id">__deprecated__lim_le</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">lt_lim</span> <span class="id">u</span> (<span class="id">M</span> : <span class="id">R</span>) : <span class="id">nondecreasing_seq</span> <span class="id">u</span> -&gt; <span class="id">cvg</span> <span class="id">u</span> -&gt; <span class="id">M</span> &lt; <span class="id">lim</span> <span class="id">u</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="kwd">forall</span> <span class="id">n</span> \<span class="id">near</span> \<span class="id">oo</span>, <span class="id">M</span> &lt;= <span class="id">u</span> <span class="id">n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
<span class="id">move</span>=&gt; <span class="id">ndu</span> <span class="id">cu</span> <span class="id">Ml</span>; <span class="id">have</span> [[<span class="id">n</span> <span class="id">Mun</span>]|/<span class="id">forallNP</span> <span class="id">Mu</span>] := <span class="id">pselect</span> (<span class="kwd">exists</span> <span class="id">n</span>, <span class="id">M</span> &lt;= <span class="id">u</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="id">near</span>=&gt; <span class="id">m</span>; <span class="id">suff</span> : <span class="id">u</span> <span class="id">n</span> &lt;= <span class="id">u</span> <span class="id">m</span> <span class="kwd">by</span> <span class="id">exact</span>: <span class="id">le_trans</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">near</span>: <span class="id">m</span>; <span class="kwd">exists</span> <span class="id">n</span>.+1 =&gt; // <span class="id">p</span> <span class="id">q</span>; <span class="id">apply</span>/<span class="id">ndu</span>/<span class="id">ltnW</span>.<br/>
<span class="id">have</span> {}<span class="id">Mu</span> : <span class="kwd">forall</span> <span class="id">x</span>, <span class="id">M</span> &gt; <span class="id">u</span> <span class="id">x</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span>; <span class="id">rewrite</span> <span class="id">ltNge</span>; <span class="id">apply</span>/<span class="id">negP</span>.<br/>
<span class="id">have</span> : <span class="id">lim</span> <span class="id">u</span> &lt;= <span class="id">M</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">limr_le</span> =&gt; //; <span class="id">near</span>=&gt; <span class="id">m</span>; <span class="id">apply</span>/<span class="id">ltW</span>/<span class="id">Mu</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>/(<span class="id">lt_le_trans</span> <span class="id">Ml</span>); <span class="id">rewrite</span> <span class="id">ltxx</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">nonincreasing_cvgn_ge</span> <span class="id">u_</span> : <span class="id">nonincreasing_seq</span> <span class="id">u_</span> -&gt; <span class="id">cvg</span> <span class="id">u_</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">lim</span> <span class="id">u_</span> &lt;= <span class="id">u_</span> <span class="id">n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
<span class="id">move</span>=&gt; <span class="id">du</span> <span class="id">ul</span> <span class="id">p</span>; <span class="id">rewrite</span> <span class="id">leNgt</span>; <span class="id">apply</span>/<span class="id">negP</span> =&gt; <span class="id">up0</span>.<br/>
<span class="id">move</span>/<span class="id">cvgrPdist_lt</span> : <span class="id">ul</span> =&gt; /(<span class="id">_</span> `|<span class="id">u_</span> <span class="id">p</span> - <span class="id">lim</span> <span class="id"><a href="mathcomp.analysis.topology.html#nearE">u_</a></span>|%<span class="id">R</span>).<br/>
<span class="id">rewrite</span> {1}<span class="id">ltr0_norm</span> ?<span class="id">subr_lt0</span> // <span class="id">opprB</span> <span class="id">subr_gt0</span> =&gt; /(<span class="id">_</span> <span class="id">up0</span>) <span class="id">ul</span>.<br/>
<span class="id">near</span> \<span class="id">oo</span> =&gt; <span class="id">N</span>.<br/>
<span class="id">have</span> /<span class="id">du</span> <span class="id">uNp</span> : (<span class="id">p</span> &lt;= <span class="id">N</span>)%<span class="id">nat</span> <span class="kwd">by</span> <span class="id">near</span>: <span class="id">N</span>; <span class="id">rewrite</span> <span class="id">nearE</span>; <span class="kwd">exists</span> <span class="id">p</span>.<br/>
<span class="id">have</span> : `|<span class="id">lim</span> <span class="id">u_</span> - <span class="id">u_</span> <span class="id">N</span>| &gt;= `|<span class="id">u_</span> <span class="id">p</span> - <span class="id">lim</span> <span class="id">u_</span>|%<span class="id">R</span>.<br/>
&nbsp;<span class="id">rewrite</span> <span class="id">ltr0_norm</span> // ?<span class="id">subr_lt0</span> // <span class="id">opprB</span> <span class="id">distrC</span>.<br/>
&nbsp;<span class="id">rewrite</span> (@<span class="id">le_trans</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">lim</span> <span class="id">u_</span> - <span class="id">u_</span> <span class="id">N</span>)) // ?<span class="id">ler_sub</span> //.<br/>
&nbsp;<span class="id">rewrite</span> (<span class="id">_</span> : `| <span class="id">_</span> | = `|<span class="id">u_</span> <span class="id">N</span> - <span class="id">lim</span> <span class="id">u_</span>|%<span class="id">R</span>) // <span class="id">ler0_norm</span> // ?<span class="id">opprB</span> //.<br/>
&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">subr_le0</span> (<span class="id">le_trans</span> <span class="id">_</span> (<span class="id">ltW</span> <span class="id">up0</span>)).<br/>
<span class="id">rewrite</span> <span class="id">leNgt</span> =&gt; /<span class="id">negP</span>; <span class="id">apply</span>; <span class="kwd">by</span> <span class="id">near</span>: <span class="id">N</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">nondecreasing_cvgn_le</span> <span class="id"><a href="mathcomp.analysis.sequences.html#nondecreasing_opp">u_</a></span> : <span class="id">nondecreasing_seq</span> <span class="id">u_</span> -&gt; <span class="id">cvg</span> <span class="id">u_</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">u_</span> <span class="id">n</span> &lt;= <span class="id">lim</span> <span class="id">u_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
<span class="id">move</span>=&gt; <span class="id">iu</span> <span class="id">cu</span> <span class="id">n</span>; <span class="id">move</span>: (@<span class="id">nonincreasing_cvgn_ge</span> (- <span class="id">u_</span>)).<br/>
<span class="id">rewrite</span> -<span class="id">nondecreasing_opp</span> <span class="id">opprK</span> =&gt; /(<span class="id">_</span> <span class="id">iu</span>); <span class="id">rewrite</span> <span class="id">is_cvgNE</span> =&gt; /(<span class="id">_</span> <span class="id">cu</span> <span class="id">n</span>).<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">limN</span> // <span class="id">ler_oppl</span> <span class="id">opprK</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_has_ub</span> <span class="id">u_</span> : <span class="id">cvg</span> <span class="id">u_</span> -&gt; <span class="id">has_ubound</span> [<span class="id">set</span> `|<span class="id">u_</span> <span class="id">n</span>| | <span class="id"><a name="cvg_has_sup">n</a></span> <span class="kwd">in</span> <span class="id">setT</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
<span class="id">move</span>=&gt; /<span class="id"><a href="mathcomp.classical.classical_sets.html#has_sup">cvg_seq_bounded</a></span>/<span class="id">pinfty_ex_gt0</span>[<span class="id">M</span> <span class="id">M_gt0</span> /= <span class="id">uM</span>].<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">M</span>; <span class="id">apply</span>/<span class="id">ubP</span> =&gt; <span class="id">x</span> -[<span class="id">n</span> <span class="id">_</span> &lt;-{<span class="id">x</span>}]; <span class="id">exact</span>: <span class="id">uM</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_has_sup</span> <span class="id">u_</span> : <span class="id">cvg</span> <span class="id">u_</span> -&gt; <span class="id">has_sup</span> (<span class="id">u_</span> @` <span class="id">setT</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
<span class="id">move</span>/<span class="id">cvg_has_ub</span>; <span class="id">rewrite</span> -/(<span class="id">_</span> @` <span class="id">_</span>) -(<span class="id">image_comp</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">u_</a></span> <span class="id">normr</span> <span class="id">setT</span>).<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">has_ub_image_norm</span> <span class="id">uM</span>; <span class="id">split</span> =&gt; //; <span class="kwd">exists</span> (<span class="id">u_</span> 0%<span class="id">N</span>), 0%<span class="id">N</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_has_inf</span> <span class="id">u_</span> : <span class="id">cvg</span> <span class="id">u_</span> -&gt; <span class="id"><a href="mathcomp.analysis.sequences.html#sequences_R_lemmas_realFieldType.R">has_inf</a></span> (<span class="id">u_</span> @` <span class="id">setT</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
 <span class="kwd">by</span> <span class="id">move</span>/<span class="id">is_cvgN</span>/<span class="id">cvg_has_sup</span>; <span class="id">rewrite</span> -<span class="id">has_inf_supN</span> <span class="id">image_comp</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__cvgPpinfty_lt</span> (<span class="id">u_</span> : <span class="id">R</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">u_</span> --&gt; +<span class="id">oo</span>%<span class="id">R</span> &lt;-&gt; <span class="kwd">forall</span> <span class="id">A</span>, \<span class="kwd">forall</span> <span class="id">n</span> \<span class="id">near</span> \<span class="id">oo</span>, (<span class="id">A</span> &lt; <span class="id">u_</span> <span class="id">n</span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
 <span class="id">exact</span>: <span class="id">cvgryPgt</span>. Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">cvgryPgt</span>`, <span class="id">and</span> <span class="id">generalized</span> <span class="id">to</span> <span class="id">any</span> <span class="id">proper</span> <span class="id">filter</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">cvgPpinfty_lt</span> := <span class="id">__deprecated__cvgPpinfty_lt</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__cvgPninfty_lt</span> (<span class="id">u_</span> : <span class="id">R</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">u_</span> --&gt; -<span class="id">oo</span>%<span class="id">R</span> &lt;-&gt; <span class="kwd">forall</span> <span class="id">A</span>, \<span class="kwd">forall</span> <span class="id">n</span> \<span class="id">near</span> \<span class="id">oo</span>, (<span class="id">A</span> &gt; <span class="id">u_</span> <span class="id">n</span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
 <span class="id">exact</span>: <span class="id">cvgrNyPlt</span>. Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">cvgrNyPlt</span>`, <span class="id">and</span> <span class="id">generalized</span> <span class="id">to</span> <span class="id">any</span> <span class="id">proper</span> <span class="id">filter</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">cvgPninfty_lt</span> := <span class="id">__deprecated__cvgPninfty_lt</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__cvgPpinfty_near</span> (<span class="id">u_</span> : <span class="id">R</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">u_</span> --&gt; +<span class="id">oo</span>%<span class="id">R</span> &lt;-&gt; \<span class="kwd">forall</span> <span class="id">A</span> \<span class="id">near</span> +<span class="id">oo</span>, \<span class="kwd">forall</span> <span class="id">n</span> \<span class="id">near</span> \<span class="id">oo</span>, (<span class="id">A</span> &lt;= <span class="id">u_</span> <span class="id">n</span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
 <span class="id">exact</span>: <span class="id">cvgryPgey</span>. Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">cvgryPgey</span>`, <span class="id">and</span> <span class="id">generalized</span> <span class="id">to</span> <span class="id">any</span> <span class="id">proper</span> <span class="id">filter</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">cvgPpinfty_near</span> := <span class="id">__deprecated__cvgPpinfty_near</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__cvgPninfty_near</span> (<span class="id">u_</span> : <span class="id">R</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">u_</span> --&gt; -<span class="id">oo</span>%<span class="id">R</span> &lt;-&gt; \<span class="kwd">forall</span> <span class="id">A</span> \<span class="id">near</span> -<span class="id">oo</span>, \<span class="kwd">forall</span> <span class="id">n</span> \<span class="id">near</span> \<span class="id">oo</span>, (<span class="id">A</span> &gt;= <span class="id">u_</span> <span class="id">n</span>)%<span class="id"><a href="mathcomp.analysis.sequences.html#__deprecated__cvgPninfty_near">R</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
 <span class="id">exact</span>: <span class="id">cvgrNyPleNy</span>. Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">cvgrNyPleNy</span>`, <span class="id">and</span> <span class="id">generalized</span> <span class="id">to</span> <span class="id">any</span> <span class="id">proper</span> <span class="id">filter</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">cvgPninfty_near</span> := <span class="id">__deprecated__cvgPninfty_near</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__cvgPpinfty_lt_near</span> (<span class="id">u_</span> : <span class="id">R</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">u_</span> --&gt; +<span class="id">oo</span>%<span class="id">R</span> &lt;-&gt; \<span class="kwd">forall</span> <span class="id">A</span> \<span class="id">near</span> +<span class="id">oo</span>, \<span class="kwd">forall</span> <span class="id"><a href="mathcomp.analysis.signed.html#gt0">n</a></span> \<span class="id">near</span> \<span class="id">oo</span>, (<span class="id">A</span> &lt; <span class="id">u_</span> <span class="id">n</span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
 <span class="id">exact</span>: <span class="id">cvgryPgty</span>. Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">cvgryPgty</span>`, <span class="id">and</span> <span class="id">generalized</span> <span class="id">to</span> <span class="id">any</span> <span class="id">proper</span> <span class="id">filter</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">cvgPpinfty_lt_near</span> := <span class="id">__deprecated__cvgPpinfty_lt_near</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__cvgPninfty_lt_near</span> (<span class="id">u_</span> : <span class="id">R</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">u_</span> --&gt; -<span class="id">oo</span>%<span class="id">R</span> &lt;-&gt; \<span class="kwd">forall</span> <span class="id">A</span> \<span class="id">near</span> -<span class="id">oo</span>, \<span class="kwd">forall</span> <span class="id">n</span> \<span class="id">near</span> \<span class="id">oo</span>, (<span class="id">A</span> &gt; <span class="id">u_</span> <span class="id">n</span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
 <span class="id">exact</span>: <span class="id">cvgrNyPltNy</span>. Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">cvgrNyPltNy</span>`, <span class="id">and</span> <span class="id">generalized</span> <span class="id">to</span> <span class="id">any</span> <span class="id">proper</span> <span class="id">filter</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">cvgPninfty_lt_near</span> := <span class="id">__deprecated__cvgPninfty_lt_near</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id">sequences_R_lemmas_realFieldType</span>.<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">nonincreasing_cvgn_ge</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">nonincreasing_cvg_ge</span> := <span class="id">nonincreasing_cvgn_ge</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">nondecreasing_cvgn_le</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">nondecreasing_cvg_le</span> := <span class="id">nondecreasing_cvgn_le</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__invr_cvg0</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">u</span> : <span class="id">R</span>^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, 0 &lt; <span class="id">u</span> <span class="id">i</span>) -&gt; ((<span class="id">u</span> <span class="id">i</span>)^-1 @[<span class="id">i</span> --&gt; \<span class="id"><a href="mathcomp.analysis.sequences.html#__deprecated__invr_cvg_pinfty">oo</a></span>] --&gt; 0) &lt;-&gt; (<span class="id">u</span> --&gt; +<span class="id">oo</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; ?; <span class="id">rewrite</span> <span class="id">gtr0_cvgV0</span>//; <span class="id">apply</span>: <span class="id">nearW</span>. Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">gtr0_cvgV0</span>` <span class="id">and</span> <span class="id">generalized</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">invr_cvg0</span> := <span class="id">__deprecated__invr_cvg0</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__invr_cvg_pinfty</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">u</span> : <span class="id">R</span>^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, 0 &lt; <span class="id">u</span> <span class="id">i</span>) -&gt; ((<span class="id">u</span> <span class="id">i</span>)^-1 @[<span class="id">i</span> --&gt; \<span class="id">oo</span>] --&gt; +<span class="id">oo</span>) &lt;-&gt; (<span class="id">u</span> --&gt; 0).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; ?; <span class="id">rewrite</span> <span class="id">cvgrVy</span>//; <span class="id">apply</span>: <span class="id">nearW</span>. Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id"><a href="mathcomp.analysis.sequences.html#series">mathcomp</a></span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">cvgrVy</span>` <span class="id">and</span> <span class="id">generalized</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">invr_cvg_pinfty</span> := <span class="id"><a href="mathcomp.analysis.sequences.html#partial_sum.u_">__deprecated__invr_cvg_pinfty</a></span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id">partial_sum</span>.<br/>
<span class="kwd">Variables</span> (<span class="id">V</span> : <span class="id">zmodType</span>) (<span class="id">u_</span> : <span class="id">V</span> ^<span class="id">nat</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">series</span> : <span class="id">V</span> ^<span class="id">nat</span> := [<span class="id">sequence</span> \<span class="id">sum_</span>(0 &lt;= <span class="id"><a name="series_addn">k</a></span> &lt; <span class="id">n</span>) <span class="id">u_</span> <span class="id">k</span>]<span class="id">_n</span>.<br/>
<span class="kwd">Definition</span> <span class="id">telescope</span> : <span class="id">V</span> ^<span class="id">nat</span> := [<span class="id">sequence</span> <span class="id">u_</span> <span class="id">n</span>.+1 - <span class="id">u_</span> <span class="id">n</span>]<span class="id">_n</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">seriesEnat</span> : <span class="id">series</span> = [<span class="id">sequence</span> \<span class="id">sum_</span>(0 &lt;= <span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">u_</span> <span class="id">k</span>]<span class="id">_n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</span></div>
<div class="proofscript" id="proof50">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">seriesEord</span> : <span class="id">series</span> = [<span class="id">sequence</span> \<span class="id">sum_</span>(<span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">u_</span> <span class="id">k</span>]<span class="id">_n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</span></div>
<div class="proofscript" id="proof51">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> /<span class="id">series</span>/= <span class="id">big_mkord</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">seriesSr</span> <span class="id">n</span> : <span class="id">series</span> <span class="id">n</span>.+1 = <span class="id">series</span> <span class="id">n</span> + <span class="id">u_</span> <span class="id">n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</span></div>
<div class="proofscript" id="proof52">
 <span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id">seriesEord</span>/= <span class="id">big_ord_recr</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">seriesS</span> <span class="id">n</span> : <span class="id">series</span> <span class="id">n</span>.+1 = <span class="id">u_</span> <span class="id">n</span> + <span class="id">series</span> <span class="id"><a href="mathcomp.analysis.sequences.html#partial_sum.u_">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</span></div>
<div class="proofscript" id="proof53">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">addrC</span> <span class="id">seriesSr</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">seriesSB</span> (<span class="id">n</span> : <span class="id">nat</span>) : <span class="id">series</span> <span class="id">n</span>.+1 - <span class="id">series</span> <span class="id">n</span> = <span class="id">u_</span> <span class="id">n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof54')">Proof.</span></div>
<div class="proofscript" id="proof54">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">seriesS</span> <span class="id">addrK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">series_addn</span> <span class="id">m</span> <span class="id">n</span> : <span class="id">series</span> (<span class="id">n</span> + <span class="id">m</span>)%<span class="id">N</span> = <span class="id">series</span> <span class="id">m</span> + \<span class="id">sum_</span>(<span class="id">m</span> &lt;= <span class="id">k</span> &lt; <span class="id">n</span> + <span class="id">m</span>) <span class="id">u_</span> <span class="id">k</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</span></div>
<div class="proofscript" id="proof55">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">seriesEnat</span>/= -<span class="id">big_cat_nat</span>// <span class="id">leq_addl</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sub_series_geq</span> <span class="id">m</span> <span class="id">n</span> : (<span class="id">m</span> &lt;= <span class="id">n</span>)%<span class="id">N</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">series</span> <span class="id">n</span> - <span class="id">series</span> <span class="id">m</span> = \<span class="id">sum_</span>(<span class="id">m</span> &lt;= <span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">u_</span> <span class="id">k</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof56')">Proof.</span></div>
<div class="proofscript" id="proof56">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">subnK</span>&lt;-; <span class="id">rewrite</span> <span class="id">series_addn</span> <span class="id">addrAC</span> <span class="id">subrr</span> <span class="id">add0r</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sub_series</span> <span class="id">m</span> <span class="id">n</span> :<br/>
&nbsp;&nbsp;<span class="id">series</span> <span class="id">n</span> - <span class="id">series</span> <span class="id">m</span> = <span class="kwd">if</span> (<span class="id">m</span> &lt;= <span class="id">n</span>)%<span class="id">N</span> <span class="kwd">then</span> \<span class="id">sum_</span>(<span class="id">m</span> &lt;= <span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">u_</span> <span class="id">k</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> - \<span class="id">sum_</span>(<span class="id">n</span> &lt;= <span class="id">k</span> &lt; <span class="id">m</span>) <span class="id">u_</span> <span class="id">k</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof57')">Proof.</span></div>
<div class="proofscript" id="proof57">
 <span class="kwd">by</span> <span class="id">have</span> [<span class="id">mn</span>|/<span class="id">ltnW</span> <span class="id">mn</span>] := <span class="id">leqP</span> <span class="id">m</span> <span class="id">n</span>; <span class="id">rewrite</span> -<span class="id">sub_series_geq</span>// <span class="id">opprB</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sub_double_series</span> <span class="id">n</span> : <span class="id">series</span> <span class="id">n</span>.*2 - <span class="id">series</span> <span class="id">n</span> = \<span class="id">sum_</span>(<span class="id">n</span> &lt;= <span class="id">k</span> &lt; <span class="id">n</span>.*2) <span class="id">u_</span> <span class="id">k</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof58')">Proof.</span></div>
<div class="proofscript" id="proof58">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">sub_series_geq</span>// -<span class="id">addnn</span> <span class="id">leq_addl</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">partial_sum</span>.<br/>
<br/>
<span class="kwd">Arguments</span> <span class="id">series</span> {<span class="id">V</span>} <span class="id">u_</span> <span class="id">n</span> : <span class="id">simpl</span> <span class="id">never</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">telescope</span> {<span class="id">V</span>} <span class="id">u_</span> <span class="id">n</span> : <span class="id">simpl</span> <span class="id">never</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">series</span>' <span class="id">E</span> ]<span class="id">_</span> <span class="id">n</span>" := (<span class="id">series</span> [<span class="id">sequence</span> <span class="id">E</span>]<span class="id">_n</span>) : <span class="id">ring_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">seriesN</span> (<span class="id">V</span> : <span class="id">zmodType</span>) (<span class="id">f</span> : <span class="id">V</span> ^<span class="id">nat</span>) : <span class="id">series</span> (- <span class="id">f</span>) = - <span class="id">series</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof59')">Proof.</span></div>
<div class="proofscript" id="proof59">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> /<span class="id">series</span> /= <span class="id">sumrN</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">seriesD</span> (<span class="id">V</span> : <span class="id">zmodType</span>) (<span class="id">f</span> <span class="id">g</span> : <span class="id">V</span> ^<span class="id"><a href="mathcomp.analysis.sequences.html#seriesN">nat</a></span>) : <span class="id">series</span> (<span class="id">f</span> + <span class="id">g</span>) = <span class="id">series</span> <span class="id">f</span> + <span class="id">series</span> <span class="id">g</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof60')">Proof.</span></div>
<div class="proofscript" id="proof60">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">series</span> /= <span class="id">funeqE</span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> <span class="id">big_split</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">seriesZ</span> (<span class="id">R</span> : <span class="id">ringType</span>) (<span class="id">V</span> : <span class="id">lmodType</span> <span class="id"><a name="lim_seriesZ">R</a></span>) (<span class="id">f</span> : <span class="id">V</span> ^<span class="id">nat</span>) <span class="id">k</span> :<br/>
&nbsp;&nbsp;<span class="id">series</span> (<span class="id">k</span> *: <span class="id">f</span>) = <span class="id">k</span> *: <span class="id">series</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof61')">Proof.</span></div>
<div class="proofscript" id="proof61">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> /<span class="id">series</span> /= -<span class="id">scaler_sumr</span>. Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">partial_sum_numFieldType</span>.<br/>
<span class="kwd">Variables</span> <span class="id">V</span> : <span class="id">numFieldType</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">f</span> <span class="id">g</span> : <span class="id">V</span> ^<span class="id">nat</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_cvg_seriesN</span> <span class="id">f</span> : <span class="id">cvg</span> (<span class="id">series</span> (- <span class="id">f</span>)) = <span class="id">cvg</span> (<span class="id"><a href="mathcomp.analysis.normedtype.html#is_cvgD">series</a></span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof62')">Proof.</span></div>
<div class="proofscript" id="proof62">
 <span class="kwd">by</span> <span class="id"><a name="lim_seriesD">rewrite</a></span> <span class="id">seriesN</span> <span class="id">is_cvgNE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">lim_seriesN</span> <span class="id">f</span> : <span class="id">cvg</span> (<span class="id">series</span> <span class="id">f</span>) -&gt; <span class="id">lim</span> (<span class="id">series</span> (- <span class="id">f</span>)) = - <span class="id">lim</span> (<span class="id">series</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof63')">Proof.</span></div>
<div class="proofscript" id="proof63">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">cf</span>; <span class="id">rewrite</span> <span class="id">seriesN</span> <span class="id">limN</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_cvg_seriesZ</span> <span class="id">f</span> <span class="id">k</span> : <span class="id">cvg</span> (<span class="id">series</span> <span class="id">f</span>) -&gt; <span class="id">cvg</span> (<span class="id">series</span> (<span class="id">k</span> *: <span class="id">f</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof64')">Proof.</span></div>
<div class="proofscript" id="proof64">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">cf</span>; <span class="id">rewrite</span> <span class="id">seriesZ</span>; <span class="id">exact</span>: <span class="id">is_cvgZr</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">lim_seriesZ</span> <span class="id"><a href="mathcomp.analysis.sequences.html#is_cvg_seriesN">f</a></span> <span class="id">k</span> : <span class="id">cvg</span> (<span class="id">series</span> <span class="id">f</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">lim</span> (<span class="id">series</span> (<span class="id">k</span> *: <span class="id">f</span>)) = <span class="id">k</span> *: <span class="id">lim</span> (<span class="id">series</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof65')">Proof.</span></div>
<div class="proofscript" id="proof65">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">cf</span>; <span class="id">rewrite</span> <span class="id">seriesZ</span> <span class="id">limZr</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_cvg_seriesD</span> <span class="id">f</span> <span class="id">g</span> :<br/>
&nbsp;&nbsp;<span class="id">cvg</span> (<span class="id">series</span> <span class="id">f</span>) -&gt; <span class="id">cvg</span> (<span class="id">series</span> <span class="id">g</span>) -&gt; <span class="id">cvg</span> (<span class="id">series</span> (<span class="id">f</span> + <span class="id">g</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof66')">Proof.</span></div>
<div class="proofscript" id="proof66">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id"><a href="mathcomp.analysis.sequences.html#partial_sum_numFieldType">cf</a></span> <span class="id">cg</span>; <span class="id">rewrite</span> <span class="id">seriesD</span>; <span class="id">exact</span>: <span class="id">is_cvgD</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">lim_seriesD</span> <span class="id">f</span> <span class="id">g</span> : <span class="id">cvg</span> (<span class="id">series</span> <span class="id">f</span>) -&gt; <span class="id">cvg</span> (<span class="id">series</span> <span class="id">g</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">lim</span> (<span class="id">series</span> (<span class="id">f</span> + <span class="id">g</span>)) = <span class="id">lim</span> (<span class="id">series</span> <span class="id">f</span>) + <span class="id">lim</span> (<span class="id">series</span> <span class="id">g</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof67')">Proof.</span></div>
<div class="proofscript" id="proof67">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">cf</span> <span class="id">cg</span>; <span class="id">rewrite</span> <span class="id">seriesD</span> <span class="id">limD</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_cvg_seriesB</span> <span class="id">f</span> <span class="id">g</span> :<br/>
&nbsp;&nbsp;<span class="id">cvg</span> (<span class="id">series</span> <span class="id">f</span>) -&gt; <span class="id">cvg</span> (<span class="id">series</span> <span class="id">g</span>) -&gt; <span class="id">cvg</span> (<span class="id">series</span> (<span class="id">f</span> - <span class="id">g</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof68')">Proof.</span></div>
<div class="proofscript" id="proof68">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">cf</span> <span class="id">cg</span>; <span class="id">apply</span>: <span class="id">is_cvg_seriesD</span>; <span class="id">rewrite</span> ?<span class="id">is_cvg_seriesN</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">lim_seriesB</span> <span class="id">f</span> <span class="id">g</span> : <span class="id">cvg</span> (<span class="id">series</span> <span class="id">f</span>) -&gt; <span class="id">cvg</span> (<span class="id">series</span> <span class="id">g</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">lim</span> (<span class="id">series</span> (<span class="id">f</span> - <span class="id">g</span>)) = <span class="id">lim</span> (<span class="id">series</span> <span class="id"><a name="seriesK">f</a></span>) - <span class="id">lim</span> (<span class="id">series</span> <span class="id">g</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof69')">Proof.</span></div>
<div class="proofscript" id="proof69">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Cf</span> <span class="id">Cg</span>; <span class="id">rewrite</span> <span class="id">lim_seriesD</span> ?<span class="id">is_cvg_seriesN</span>// <span class="id">lim_seriesN</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">partial_sum_numFieldType</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">lim_series_le</span> (<span class="id">V</span> : <span class="id">realFieldType</span>) (<span class="id">f</span> <span class="id">g</span> : <span class="id">V</span> ^<span class="id"><a href="mathcomp.analysis.sequences.html#telescope">nat</a></span>) :<br/>
&nbsp;&nbsp;<span class="id">cvg</span> (<span class="id">series</span> <span class="id">f</span>) -&gt; <span class="id">cvg</span> (<span class="id">series</span> <span class="id">g</span>) -&gt; (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">f</span> <span class="id">n</span> &lt;= <span class="id">g</span> <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">lim</span> (<span class="id">series</span> <span class="id">f</span>) &lt;= <span class="id">lim</span> (<span class="id">series</span> <span class="id"><a name="series_patched.N">g</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof70')">Proof.</span></div>
<div class="proofscript" id="proof70">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">cf</span> <span class="id">cg</span> <span class="id">fg</span>; <span class="id">apply</span>: (<span class="id">ler_lim</span> <span class="id">cf</span> <span class="id">cg</span>); <span class="id">near</span>=&gt; <span class="id">x</span>; <span class="id">rewrite</span> <span class="id">ler_sum</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.sequences.html#series_patched.V">end_near</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">telescopeK</span> (<span class="id">V</span> : <span class="id">zmodType</span>) (<span class="id">u_</span> : <span class="id">V</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">series</span> (<span class="id">telescope</span> <span class="id">u_</span>) = [<span class="id">sequence</span> <span class="id">u_</span> <span class="id">n</span> - <span class="id">u_</span> 0%<span class="id">N</span>]<span class="id">_n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof71')">Proof.</span></div>
<div class="proofscript" id="proof71">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> <span class="id">seriesEnat</span>/= <span class="id">telescope_sumr</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">seriesK</span> (<span class="id">V</span> : <span class="id">zmodType</span>) : <span class="id">cancel</span> (@<span class="id">series</span> <span class="id">V</span>) <span class="id">telescope</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof72')">Proof.</span></div>
<div class="proofscript" id="proof72">
 <span class="id">move</span>=&gt; ?; <span class="id">exact</span>/<span class="id">funext</span>/<span class="id">seriesSB</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eq_sum_telescope</span> (<span class="id">V</span> : <span class="id"><a href="mathcomp.analysis.topology.html#is_cvg_cst">zmodType</a></span>) (<span class="id">u_</span> : <span class="id">V</span> ^<span class="id">nat</span>) <span class="id">n</span> :<br/>
&nbsp;&nbsp;<span class="id">u_</span> <span class="id">n</span> = <span class="id">u_</span> 0%<span class="id">N</span> + <span class="id">series</span> (<span class="id">telescope</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#canRL">u_</a></span>) <span class="id">n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof73')">Proof.</span></div>
<div class="proofscript" id="proof73">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">telescopeK</span>/= <span class="id">addrC</span> <span class="id">addrNK</span>. Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">series_patched</span>.<br/>
<span class="kwd">Variables</span> (<span class="id">N</span> : <span class="id">nat</span>) (<span class="id">K</span> : <span class="id">numFieldType</span>) (<span class="id">V</span> : <span class="id">normedModType</span> <span class="id">K</span>).<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">f</span> : <span class="id">nat</span> -&gt; <span class="id">V</span>) (<span class="id">u</span> : <span class="id">V</span> ^<span class="id">nat</span>)  (<span class="id">l</span> : <span class="id">V</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_cvg_series_restrict</span> <span class="id">u_</span> :<br/>
&nbsp;&nbsp;<span class="id">cvg</span> [<span class="id">sequence</span> \<span class="id">sum_</span>(<span class="id">N</span> &lt;= <span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">u_</span> <span class="id">k</span>]<span class="id">_n</span> = <span class="id">cvg</span> (<span class="id">series</span> <span class="id">u_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof74')">Proof.</span></div>
<div class="proofscript" id="proof74">
<span class="id">suff</span> -&gt; : (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(<span class="id">N</span> &lt;= <span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">u_</span> <span class="id">k</span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="kwd">if</span> (<span class="id">n</span> &lt;= <span class="id">N</span>)%<span class="id">N</span> <span class="kwd">then</span> \<span class="id">sum_</span>(<span class="id">N</span> &lt;= <span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">u_</span> <span class="id"><a href="mathcomp.analysis.signed.html#posnumP">k</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id">series</span> <span class="id">u_</span> <span class="id">n</span> - \<span class="id">sum_</span>(0 &lt;= <span class="id">k</span> &lt; <span class="id">N</span>) <span class="id">u_</span> <span class="id">k</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">is_cvg_restrict</span>/= <span class="id">is_cvgDlE</span>//; <span class="id">apply</span>: <span class="id">is_cvg_cst</span>.<br/>
<span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">n</span>; <span class="id">case</span>: <span class="id">leqP</span> =&gt; // <span class="id">ltNn</span>; <span class="id">apply</span>: (<span class="id">canRL</span> (<span class="id">addrK</span> <span class="id">_</span>)).<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">seriesEnat</span> <span class="id">addrC</span> -<span class="id">big_cat_nat</span>// <span class="id">ltnW</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">series_patched</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">sequences_R_lemmas</span>.<br/>
<span class="kwd">Variable</span> <span class="id">R</span> : <span class="id">realType</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">nondecreasing_cvgn</span> (<span class="id">u_</span> : <span class="id">R</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.classical_sets.html#ubP">nondecreasing_seq</a></span> <span class="id">u_</span> -&gt; <span class="id">has_ubound</span> (<span class="id">range</span> <span class="id">u_</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">u_</span> --&gt; <span class="id">sup</span> (<span class="id">range</span> <span class="id">u_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof75')">Proof.</span></div>
<div class="proofscript" id="proof75">
<span class="id">move</span>=&gt; <span class="id">leu</span> <span class="id">u_ub</span>; <span class="id">set</span> <span class="id">M</span> := <span class="id">sup</span> (<span class="id"><a href="mathcomp.analysis.sequences.html#sequences_R_lemmas.R">range</a></span> <span class="id">u_</span>).<br/>
<span class="id">have</span> <span class="id">su_</span> : <span class="id">has_sup</span> (<span class="id">range</span> <span class="id">u_</span>) <span class="kwd">by</span> <span class="id">split</span> =&gt; //; <span class="kwd">exists</span> (<span class="id">u_</span> 0%<span class="id">N</span>), 0%<span class="id">N</span>.<br/>
<span class="id">apply</span>/<span class="id">cvgrPdist_le</span> =&gt; <span class="id">_</span>/<span class="id">posnumP</span>[<span class="id">e</span>].<br/>
<span class="id">have</span> [<span class="id">p</span> /<span class="id">andP</span>[<span class="id">Mu_p</span> <span class="id">u_pM</span>]] : <span class="kwd">exists</span> <span class="id">p</span>, <span class="id">M</span> - <span class="id">e</span>%:<span class="id">num</span> &lt;= <span class="id">u_</span> <span class="id">p</span> &lt;= <span class="id"><a href="mathcomp.analysis.sequences.html#sequences_R_lemmas.R">M</a></span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">_</span> -[<span class="id">p</span> <span class="id">_</span>] &lt;- /<span class="id">ltW</span> <span class="id">Mu_p</span>] := <span class="id">sup_adherent</span> (<span class="id">gt0</span> <span class="id">e</span>) <span class="id">su_</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">p</span>; <span class="id">rewrite</span> <span class="id">Mu_p</span>; <span class="id">have</span> /<span class="id">ubP</span> := <span class="id">sup_upper_bound</span> <span class="id">su_</span>; <span class="id">apply</span>; <span class="kwd">exists</span> <span class="id">p</span>.<br/>
<span class="id">near</span>=&gt; <span class="id">n</span>; <span class="id">have</span> <span class="id">pn</span> : (<span class="id">p</span> &lt;= <span class="id">n</span>)%<span class="id">N</span> <span class="kwd">by</span> <span class="id">near</span>: <span class="id">n</span>; <span class="id">exact</span>: <span class="id">nbhs_infty_ge</span>.<br/>
<span class="id">rewrite</span> <span class="id">ler_distlC</span> (<span class="id">le_trans</span> <span class="id">Mu_p</span> (<span class="id">leu</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>))//= (@<span class="id">le_trans</span> <span class="id">_</span> <span class="id">_</span> <span class="id">M</span>) ?<span class="id">ler_addl</span>//.<br/>
<span class="kwd">by</span> <span class="id">have</span> /<span class="id">ubP</span> := <span class="id">sup_upper_bound</span> <span class="id">su_</span>; <span class="id">apply</span>; <span class="kwd">exists</span> <span class="id">n</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">nondecreasing_is_cvgn</span> (<span class="id">u_</span> : <span class="id">R</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span> <span class="id">u_</span> -&gt; <span class="id">has_ubound</span> (<span class="id">range</span> <span class="id">u_</span>) -&gt; <span class="id">cvg</span> <span class="id">u_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof76')">Proof.</span></div>
<div class="proofscript" id="proof76">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">u_nd</span> <span class="id">u_ub</span>; <span class="id">apply</span>: <span class="id">cvgP</span>; <span class="id">exact</span>: <span class="id">nondecreasing_cvgn</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">nondecreasing_dvgn_lt</span> (<span class="id">u_</span> : <span class="id">R</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span> <span class="id">u_</span> -&gt; ~ <span class="id">cvg</span> <span class="id">u_</span> -&gt; <span class="id">u_</span> --&gt; +<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof77')">Proof.</span></div>
<div class="proofscript" id="proof77">
<span class="id">move</span>=&gt; <span class="id">nu</span> <span class="id">du</span>; <span class="id">apply</span>: <span class="id">contrapT</span> =&gt; /<span class="id">cvgryPge</span>/<span class="id">existsNP</span>[<span class="id">l</span> <span class="id">lu</span>]; <span class="id">apply</span>: <span class="id">du</span>.<br/>
<span class="id">apply</span>: <span class="id">nondecreasing_is_cvgn</span> =&gt; //; <span class="kwd">exists</span> <span class="id">l</span> =&gt; <span class="id">_</span> [<span class="id">n</span> <span class="id">_</span> &lt;-].<br/>
<span class="id">rewrite</span> <span class="id">leNgt</span>; <span class="id">apply</span>/<span class="id">negP</span> =&gt; <span class="id">lun</span>; <span class="id">apply</span>: <span class="id">lu</span>; <span class="id">near</span>=&gt; <span class="id">m</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">le_trans</span> (<span class="id">ltW</span> <span class="id">lun</span>)) //; <span class="id">apply</span>: <span class="id">nu</span>; <span class="id">near</span>: <span class="id">m</span>; <span class="kwd">exists</span> <span class="id">n</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">near_nondecreasing_is_cvgn</span> (<span class="id">u_</span> : <span class="id">R</span> ^<span class="id">nat</span>) (<span class="id">M</span> : <span class="id">R</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">near</span> \<span class="id">oo</span>, <span class="id">nondecreasing_seq</span> <span class="id">u_</span>} -&gt; (\<span class="kwd">forall</span> <span class="id">n</span> \<span class="id">near</span> \<span class="id">oo</span>, <span class="id">u_</span> <span class="id">n</span> &lt;= <span class="id">M</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">cvg</span> <span class="id">u_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof78')">Proof.</span></div>
<div class="proofscript" id="proof78">
<span class="id">move</span>=&gt; [<span class="id">k</span> <span class="id">_</span> <span class="id">u_nd</span>] [<span class="id">k</span>' <span class="id">_</span> <span class="id">u_M</span>]; <span class="id">suff</span> : <span class="id">cvg</span> [<span class="id">sequence</span> <span class="id">u_</span> (<span class="id">n</span> + <span class="id">maxn</span> <span class="id">k</span> <span class="id">k</span>')%<span class="id">N</span>]<span class="id">_n</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>/<span class="id">cvg_ex</span> =&gt; /= <span class="id">l</span>; <span class="id">rewrite</span> <span class="id">cvg_shiftn</span> =&gt; <span class="id">ul</span>; <span class="id">apply</span>/<span class="id">cvg_ex</span>; <span class="kwd">exists</span> <span class="id">l</span>.<br/>
<span class="id">apply</span>: <span class="id">nondecreasing_is_cvgn</span>; [<span class="id">move</span>=&gt; /= <span class="id">m</span> <span class="id">n</span> <span class="id">mn</span>|<span class="kwd">exists</span> <span class="id">M</span> =&gt; <span class="id">_</span> [<span class="id">n</span> <span class="id">_</span> &lt;-]].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.topology.html#cvgP">u_nd</a></span> ?<span class="id">leq_add2r</span>//= (<span class="id">leq_trans</span> (<span class="id">leq_maxl</span> <span class="id">_</span> <span class="id">_</span>) (<span class="id">leq_addl</span> <span class="id">_</span> <span class="id">_</span>)).<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">u_M</span> //= (<span class="id">leq_trans</span> (<span class="id">leq_maxr</span> <span class="id">_</span> <span class="id">_</span>) (<span class="id">leq_addl</span> <span class="id">_</span> <span class="id">_</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">nonincreasing_cvgn</span> (<span class="id">u_</span> : <span class="id">R</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">nonincreasing_seq</span> <span class="id">u_</span> -&gt; <span class="id">has_lbound</span> (<span class="id">range</span> <span class="id">u_</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">u_</span> --&gt; <span class="id">inf</span> (<span class="id">u_</span> @` <span class="id">setT</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof79')">Proof.</span></div>
<div class="proofscript" id="proof79">
<span class="id">rewrite</span> -<span class="id">nondecreasing_opp</span> =&gt; <span class="id">u_nd</span> <span class="id">u_lb</span>; <span class="id">rewrite</span> -[<span class="id">X</span> <span class="kwd">in</span> <span class="id">X</span> --&gt; <span class="id">_</span>](<span class="id">opprK</span> <span class="id">u_</span>).<br/>
<span class="id">apply</span>: <span class="id">cvgN</span>; <span class="id">rewrite</span> <span class="id">image_comp</span>; <span class="id">apply</span>: <span class="id">nondecreasing_cvgn</span> =&gt; //.<br/>
<span class="kwd">by</span> <span class="id">move</span>/<span class="id">has_lb_ubN</span> : <span class="id">u_lb</span>; <span class="id">rewrite</span> <span class="id">image_comp</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">nonincreasing_is_cvgn</span> (<span class="id">u_</span> : <span class="id">R</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">nonincreasing_seq</span> <span class="id">u_</span> -&gt; <span class="id">has_lbound</span> (<span class="id">range</span> <span class="id">u_</span>) -&gt; <span class="id">cvg</span> <span class="id">u_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof80')">Proof.</span></div>
<div class="proofscript" id="proof80">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">u_decr</span> <span class="id">u_bnd</span>; <span class="id">apply</span>: <span class="id">cvgP</span>; <span class="id">exact</span>: <span class="id">nonincreasing_cvgn</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">near_nonincreasing_is_cvgn</span> (<span class="id">u_</span> : <span class="id">R</span> ^<span class="id">nat</span>) (<span class="id">m</span> : <span class="id">R</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">near</span> \<span class="id"><a href="mathcomp.analysis.sequences.html#nonincreasing_cvg_ge">oo</a></span>, <span class="id">nonincreasing_seq</span> <span class="id">u_</span>} -&gt; (\<span class="kwd">forall</span> <span class="id">n</span> \<span class="id">near</span> \<span class="id">oo</span>, <span class="id">m</span> &lt;= <span class="id">u_</span> <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">cvg</span> <span class="id">u_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof81')">Proof.</span></div>
<div class="proofscript" id="proof81">
<span class="id">move</span>=&gt; <span class="id">u_ni</span> <span class="id">u_m</span>.<br/>
<span class="id">rewrite</span> -(<span class="id">opprK</span> <span class="id">u_</span>); <span class="id">apply</span>: <span class="id">is_cvgN</span>; <span class="id">apply</span>/(@<span class="id">near_nondecreasing_is_cvgn</span> <span class="id">_</span> (- <span class="id">m</span>)).<br/>
- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">filterS</span> <span class="id">u_ni</span> =&gt; <span class="id">x</span> <span class="id">u_x</span> <span class="id">y</span> <span class="id">xy</span>; <span class="id">rewrite</span> <span class="id">ler_oppl</span> <span class="id">opprK</span> <span class="id">u_x</span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">filterS</span> <span class="id">u_m</span> =&gt; <span class="id">x</span> <span class="id">u_x</span>; <span class="id">rewrite</span> <span class="id">ler_oppl</span> <span class="id">opprK</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">adjacent</span> (<span class="id">u_</span> <span class="id">v_</span> : <span class="id">R</span> ^<span class="id">nat</span>) : <span class="id">nondecreasing_seq</span> <span class="id">u_</span> -&gt; <span class="id">nonincreasing_seq</span> <span class="id">v_</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id">v_</span> - <span class="id">u_</span>) --&gt; (0 : <span class="id">R</span>) -&gt; [/\ <span class="id">lim</span> <span class="id">v_</span> = <span class="id">lim</span> <span class="id">u_</span>, <span class="id">cvg</span> <span class="id">u_</span> &amp; <span class="id">cvg</span> <span class="id">v_</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof82')">Proof.</span></div>
<div class="proofscript" id="proof82">
<span class="id">set</span> <span class="id">w_</span> := <span class="id">v_</span> - <span class="id">u_</span> =&gt; <span class="id">iu</span> <span class="id">dv</span> <span class="id">w0</span>; <span class="id">have</span> <span class="id">vu</span> <span class="id">n</span> : <span class="id">v_</span> <span class="id">n</span> &gt;= <span class="id">u_</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">suff</span> : <span class="id">lim</span> <span class="id">w_</span> &lt;= <span class="id">w_</span> <span class="id">n</span> <span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">cvg_lim</span> <span class="id">_</span> <span class="id">w0</span>)// <span class="id">subr_ge0</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: (<span class="id">nonincreasing_cvgn_ge</span> <span class="id">_</span> (<span class="id">cvgP</span> <span class="id">_</span> <span class="id">w0</span>)) =&gt; <span class="id">m</span> <span class="id"><a name="harmonic_ge0">p</a></span> <span class="id">mp</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ler_sub</span>; <span class="id">rewrite</span> ?<span class="id">iu</span> ?<span class="id"><a href="mathcomp.analysis.sequences.html#harmonic">dv</a></span>.<br/>
<span class="id">have</span> <span class="id">cu</span> : <span class="id">cvg</span> <span class="id">u_</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">nondecreasing_is_cvgn</span> =&gt; //; <span class="kwd">exists</span> (<span class="id">v_</span> 0%<span class="id">N</span>) =&gt; <span class="id">_</span> [<span class="id">n</span> <span class="id">_</span> &lt;-].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.sequences.html#harmonic">rewrite</a></span> (<span class="id">le_trans</span> (<span class="id">vu</span> <span class="id">_</span>)) // <span class="id">dv</span>.<br/>
<span class="id">have</span> <span class="id">cv</span> : <span class="id">cvg</span> <span class="id">v_</span>.<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.signed.html#posnumP">apply</a></span>: <span class="id">nonincreasing_is_cvgn</span> =&gt; //; <span class="kwd">exists</span> (<span class="id">u_</span> 0%<span class="id">N</span>) =&gt; <span class="id">_</span> [<span class="id">n</span> <span class="id">_</span> &lt;-].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">le_trans</span> <span class="id">_</span> (<span class="id">vu</span> <span class="id">_</span>)) // <span class="id">iu</span>.<br/>
<span class="kwd">by</span> <span class="id">split</span>=&gt; //; <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> -<span class="id">subr_eq0</span> -<span class="id">limB</span> //; <span class="id">exact</span>/<span class="id">eqP</span>/<span class="id">cvg_lim</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">sequences_R_lemmas</span>.<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id"><a href="mathcomp.analysis.sequences.html#harmonic">nonincreasing_cvgn</a></span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">nonincreasing_cvg</span> := <span class="id">nonincreasing_cvgn</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id"><a href="mathcomp.analysis.sequences.html#harmonic">nondecreasing_cvgn</a></span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">nondecreasing_cvg</span> := <span class="id">nondecreasing_cvgn</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">nonincreasing_is_cvgn</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">nonincreasing_is_cvg</span> := <span class="id">nonincreasing_is_cvgn</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">nondecreasing_is_cvgn</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">nondecreasing_is_cvg</span> := <span class="id">nondecreasing_is_cvgn</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id"><a href="mathcomp.analysis.topology.html#nearP_dep">to</a></span> `<span class="id">nondecreasing_dvgn_lt</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">nondecreasing_dvg_lt</span> := <span class="id">nondecreasing_dvgn_lt</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">near_nondecreasing_is_cvgn</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">near_nondecreasing_is_cvg</span> := <span class="id">near_nondecreasing_is_cvgn</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">near_nonincreasing_is_cvgn</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">near_nonincreasing_is_cvg</span> := <span class="id">near_nonincreasing_is_cvgn</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">harmonic</span> {<span class="id">R</span> : <span class="id">fieldType</span>} : <span class="id">R</span> ^<span class="id">nat</span> := [<span class="id">sequence</span> <span class="id">n</span>.+1%:<span class="id">R</span>^-1]<span class="id">_n</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">harmonic</span> {<span class="id">R</span>} <span class="id">n</span> /.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">harmonic_gt0</span> {<span class="id">R</span> : <span class="id">numFieldType</span>} <span class="id">i</span> : 0 &lt; <span class="id">harmonic</span> <span class="id">i</span> :&gt; <span class="id"><a href="mathcomp.analysis.sequences.html#series">R</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof83')">Proof.</span></div>
<div class="proofscript" id="proof83">
 <span class="kwd">by</span> <span class="id">rewrite</span> /=. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">harmonic_ge0</span> {<span class="id">R</span> : <span class="id">numFieldType</span>} <span class="id">i</span> : 0 &lt;= <span class="id">harmonic</span> <span class="id">i</span> :&gt; <span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof84')">Proof.</span></div>
<div class="proofscript" id="proof84">
 <span class="id">exact</span>/<span class="id">ltW</span>/<span class="id">harmonic_gt0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_harmonic</span> {<span class="id"><a href="mathcomp.analysis.sequences.html#series">R</a></span> : <span class="id">archiFieldType</span>} : <span class="id">harmonic</span> --&gt; (0 : <span class="id">R</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof85')">Proof.</span></div>
<div class="proofscript" id="proof85">
<span class="id">apply</span>/<span class="id">cvgrPdist_le</span> =&gt; <span class="id">_</span>/<span class="id">posnumP</span>[<span class="id">e</span>]; <span class="id">near</span>=&gt; <span class="id">i</span>.<br/>
<span class="id">rewrite</span> <span class="id">distrC</span> <span class="id">subr0</span> <span class="id">ger0_norm</span>//= -<span class="id">lef_pinv</span> ?<span class="id">qualifE</span>// <span class="id">invrK</span>.<br/>
<span class="id">rewrite</span> (<span class="id">le_trans</span> (<span class="id">ltW</span> (<span class="id">archi_boundP</span> <span class="id">_</span>)))// <span class="id">ler_nat</span> -<span class="id">add1n</span> -<span class="id">leq_subLR</span>.<br/>
<span class="kwd">by</span> <span class="id">near</span>: <span class="id">i</span>; <span class="id">apply</span>: <span class="id">nbhs_infty_ge</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvge_harmonic</span> {<span class="id">R</span> : <span class="id">archiFieldType</span>} : (<span class="id">EFin</span> \<span class="id">o</span> @<span class="id">harmonic</span> <span class="id">R</span>) @ \<span class="id">oo</span> --&gt; 0%<span class="id"><a href="mathcomp.analysis.sequences.html#series">E</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof86')">Proof.</span></div>
<div class="proofscript" id="proof86">
 <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">cvg_EFin</span>; [<span class="id">exact</span>: <span class="id">nearW</span> | <span class="id">exact</span>: <span class="id">cvg_harmonic</span>]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">dvg_harmonic</span> (<span class="id">R</span> : <span class="id">numFieldType</span>) : ~ <span class="id">cvg</span> (<span class="id">series</span> (@<span class="id">harmonic</span> <span class="id">R</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof87')">Proof.</span></div>
<div class="proofscript" id="proof87">
<span class="id">have</span> <span class="id">ge_half</span> <span class="id">n</span> : (0 &lt; <span class="id">n</span>)%<span class="id">N</span> -&gt; 2^-1 &lt;= \<span class="id">sum_</span>(<span class="id">n</span> &lt;= <span class="id">i</span> &lt; <span class="id">n</span>.*2) <span class="id">harmonic</span> <span class="id">i</span>.<br/>
&nbsp;&nbsp;<span class="id">case</span>: <span class="id">n</span> =&gt; // <span class="id">n</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (@<span class="id">le_trans</span> <span class="id">_</span> <span class="id">_</span> (\<span class="id">sum_</span>(<span class="id">n</span>.+1 &lt;= <span class="id">i</span> &lt; <span class="id">n</span>.+1.*2) <span class="id">n</span>.+1.*2%:<span class="id">R</span>^-1)) //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">sumr_const_nat</span> -<span class="id">addnn</span> <span class="id">addnK</span> <span class="id">addnn</span> -<span class="id">mul2n</span> <span class="id">natrM</span> <span class="id">invfM</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -[<span class="id">_</span> *+ <span class="id">n</span>.+1]<span class="id">mulr_natr</span> <span class="id">divfK</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">ler_sum_nat</span> =&gt; <span class="id">i</span> /<span class="id">andP</span>[? ?]; <span class="id">rewrite</span> <span class="id">lef_pinv</span> ?<span class="id">qualifE</span> ?<span class="id">ler_nat</span>.<br/>
<span class="id">move</span>/<span class="id">cvg_cauchy</span>/<span class="id">cauchy_ballP</span> =&gt; /(<span class="id">_</span> <span class="id">_</span> [<span class="id">gt0</span> <span class="id">of</span> 2^-1 : <span class="id">R</span>]); <span class="id">rewrite</span> !<span class="id">near_map2</span>.<br/>
<span class="id">rewrite</span> -<span class="id">ball_normE</span> =&gt; /<span class="id">nearP_dep</span> <span class="id">hcvg</span>; <span class="id">near</span> \<span class="id">oo</span> =&gt; <span class="id">n</span>; <span class="id">near</span> \<span class="id">oo</span> =&gt; <span class="id">m</span>.<br/>
<span class="id">have</span>: `|<span class="id">series</span> <span class="id">harmonic</span> <span class="id">n</span> - <span class="id">series</span> <span class="id">harmonic</span> <span class="id">m</span>| &lt; 2^-1 :&gt; <span class="id">R</span> <span class="kwd">by</span> <span class="id">near</span>: <span class="id">m</span>; <span class="id">near</span>: <span class="id">n</span>.<br/>
<span class="id">rewrite</span> <span class="id">le_gtF</span>// <span class="id">distrC</span> -[<span class="id">X</span> <span class="kwd">in</span> <span class="id">X</span> - <span class="id">_</span>](<span class="id">addrNK</span> (<span class="id">series</span> <span class="id"><a href="mathcomp.analysis.topology.html#nbhs_infty_ge">harmonic</a></span> <span class="id">n</span>.*2)).<br/>
<span class="id">rewrite</span> <span class="id">sub_series_geq</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">near</span>: <span class="id">m</span>; <span class="id">apply</span>: <span class="id">nbhs_infty_ge</span>.<br/>
<span class="id">rewrite</span> -<span class="id">addrA</span> <span class="id">sub_series_geq</span> -<span class="id">addnn</span> ?<span class="id">leq_addr</span>// <span class="id">addnn</span>.<br/>
<span class="id">have</span> <span class="id">sh_ge0</span> <span class="id">i</span> <span class="id">j</span> : 0 &lt;= \<span class="id">sum_</span>(<span class="id">i</span> &lt;= <span class="id">k</span> &lt; <span class="id">j</span>) <span class="id">harmonic</span> <span class="id">k</span> :&gt; <span class="id">R</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> ?<span class="id">sumr_ge0</span>//; <span class="id">move</span>=&gt; <span class="id">k</span> <span class="id">_</span>; <span class="id">apply</span>: <span class="id">harmonic_ge0</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ger0_norm</span>// <span class="id">ler_paddl</span>// <span class="id">ge_half</span>//; <span class="id">near</span>: <span class="id">n</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">arithmetic_mean</span> (<span class="id">R</span> : <span class="id">numDomainType</span>) (<span class="id">u_</span> : <span class="id">R</span> ^<span class="id">nat</span>) : <span class="id">R</span> ^<span class="id">nat</span> :=<br/>
&nbsp;&nbsp;[<span class="id">sequence</span> <span class="id">n</span>.+1%:<span class="id">R</span>^-1 * (<span class="id">series</span> <span class="id">u_</span> <span class="id">n</span>.+1)]<span class="id">_n</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">harmonic_mean</span> (<span class="id">R</span> : <span class="id">numDomainType</span>) (<span class="id">u_</span> : <span class="id">R</span> ^<span class="id"><a name="cesaro_converse">nat</a></span>) : <span class="id">R</span> ^<span class="id">nat</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">v</span> := [<span class="id">sequence</span> (<span class="id">u_</span> <span class="id">n</span>)^-1]<span class="id">_n</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;[<span class="id">sequence</span> (<span class="id">n</span>.+1%:<span class="id">R</span> / <span class="id">series</span> <span class="id"><a href="mathcomp.analysis.sequences.html#cesaro_converse.R">v</a></span> <span class="id">n</span>.+1)]<span class="id">_n</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">root_mean_square</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">u_</span> : <span class="id">R</span> ^<span class="id">nat</span>) : <span class="id">R</span> ^<span class="id">nat</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">v_</span> := [<span class="id">sequence</span> (<span class="id">u_</span> <span class="id">k</span>)^+2]<span class="id">_k</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;[<span class="id">sequence</span> <span class="id">Num.sqrt</span> (<span class="id">n</span>.+1%:<span class="id">R</span>^-1 * <span class="id">series</span> <span class="id">v_</span> <span class="id">n</span>.+1)]<span class="id">_n</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">cesaro</span>.<br/>
<span class="kwd">Variable</span> <span class="id">R</span> : <span class="id">archiFieldType</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id">cesaro</span> (<span class="id">u_</span> : <span class="id">R</span> ^<span class="id">nat</span>) (<span class="id">l</span> : <span class="id">R</span>) : <span class="id">u_</span> --&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andP">l</a></span> -&gt; <span class="id">arithmetic_mean</span> <span class="id">u_</span> --&gt; <span class="id">l</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof88')">Proof.</span></div>
<div class="proofscript" id="proof88">
<span class="id">move</span>=&gt; <span class="id">u0_cvg</span>; <span class="id">have</span> <span class="id">ssplit</span> <span class="id">v_</span> <span class="id">m</span> <span class="id">n</span> : (<span class="id">m</span> &lt;= <span class="id">n</span>)%<span class="id">N</span> -&gt; `|<span class="id">n</span>%:<span class="id">R</span>^-1 * <span class="id">series</span> <span class="id">v_</span> <span class="id">n</span>| &lt;=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">n</span>%:<span class="id">R</span>^-1 * `|<span class="id">series</span> <span class="id">v_</span> <span class="id">m</span>| + <span class="id">n</span>%:<span class="id">R</span>^-1 * `|\<span class="id">sum_</span>(<span class="id">m</span> &lt;= <span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">v_</span> <span class="id">i</span>|.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; /<span class="id">subnK</span>&lt;-; <span class="id">rewrite</span> <span class="id">series_addn</span> <span class="id">mulrDr</span> (<span class="id">le_trans</span> (<span class="id">ler_norm_add</span> <span class="id">_</span> <span class="id">_</span>))//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id">normrM</span> <span class="id">ger0_norm</span>.<br/>
<span class="id">apply</span>/<span class="id">cvgrPdist_lt</span>=&gt; <span class="id">_</span>/<span class="id">posnumP</span>[<span class="id">e</span>]; <span class="id">near</span> \<span class="id">oo</span> =&gt; <span class="id">m</span>; <span class="id">near</span>=&gt; <span class="id">n</span>.<br/>
<span class="id">have</span> {}/<span class="id">ssplit</span> -/(<span class="id">_</span> <span class="id">_</span> [<span class="id">sequence</span> <span class="id">l</span> - <span class="id">u_</span> <span class="id">n</span>]<span class="id">_n</span>) : (<span class="id">m</span>.+1 &lt;= <span class="id">n</span>.+1)%<span class="id">nat</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">near</span>: <span class="id">n</span>; <span class="kwd">exists</span> <span class="id">m</span>.<br/>
<span class="id">rewrite</span> !<span class="id">seriesEnat</span> /= <span class="id">big_split</span>/=.<br/>
<span class="id">rewrite</span> <span class="id">sumrN</span> <span class="id">mulrBr</span> <span class="id">sumr_const_nat</span> -(<span class="id"><a href="mathcomp.analysis.sequences.html#telescope">mulr_natl</a></span> <span class="id">l</span>) <span class="id">mulKf</span>//.<br/>
<span class="id">move</span>=&gt; /<span class="id">le_lt_trans</span>-&gt;//; <span class="id">rewrite</span> [<span class="id">e</span>%:<span class="id">num</span>]<span class="id">splitr</span> <span class="id">ltr_add</span>//.<br/>
&nbsp;&nbsp;<span class="id">have</span> [-&gt;|<span class="id">neq0</span>] := <span class="id">eqVneq</span> (\<span class="id">sum_</span>(0 &lt;= <span class="id">k</span> &lt; <span class="id">m</span>.+1) (<span class="id">l</span> - <span class="id">u_</span> <span class="id">k</span>)) 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">normr0</span> <span class="id">mulr0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">ltr_pdivl_mulr</span> ?<span class="id">normr_gt0</span>//.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -<span class="id">ltf_pinv</span> ?<span class="id">qualifE</span>// ?<span class="id">mulr_gt0</span> ?<span class="id">invr_gt0</span> ?<span class="id">normr_gt0</span>// <span class="id">invrK</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">lt_le_trans</span> (<span class="id">archi_boundP</span> <span class="id">_</span>))// <span class="id">ler_nat</span> <span class="id">leqW</span>//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">near</span>: <span class="id">n</span>; <span class="id">apply</span>: <span class="id">nbhs_infty_ge</span>.<br/>
<span class="id">rewrite</span> <span class="id">ltr_pdivr_mull</span> ?<span class="id">ltr0n</span> // (<span class="id">le_lt_trans</span> (<span class="id">ler_norm_sum</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>)) //.<br/>
<span class="id">rewrite</span> (<span class="id">le_lt_trans</span> (@<span class="id"><a href="mathcomp.classical.boolp.html#funeqE">ler_sum_nat</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="id">e</span>%:<span class="id">num</span> / 2) <span class="id">_</span>))//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">sumr_const_nat</span> <span class="id">mulr_natl</span> <span class="id">ltr_pmuln2l</span>// <span class="id">ltn_subrL</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">i</span> /<span class="id">andP</span>[<span class="id">mi</span> <span class="id">_</span>]; <span class="id">move</span>: <span class="id">i</span> <span class="id">mi</span>; <span class="id">near</span>: <span class="id">m</span>.<br/>
<span class="id">have</span> : \<span class="kwd">forall</span> <span class="id">x</span> \<span class="id">near</span> \<span class="id">oo</span>, `|<span class="id">l</span> - <span class="id">u_</span> <span class="id">x</span>| &lt; <span class="id">e</span>%:<span class="id">num</span> / 2.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>/<span class="id">cvgrPdist_lt</span> : <span class="id">u0_cvg</span>; <span class="id">apply</span>.<br/>
<span class="id">move</span>=&gt; -[<span class="id">N</span> <span class="id">_</span> <span class="id">Nu</span>]; <span class="kwd">exists</span> <span class="id">N</span> =&gt; // <span class="id">k</span> <span class="id">Nk</span> <span class="id">i</span> <span class="id">ki</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ltW</span>// <span class="id">Nu</span>//= (<span class="id">leq_trans</span> <span class="id">Nk</span>)// <span class="id">ltnW</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">cesaro</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">cesaro_converse</span>.<br/>
<span class="kwd">Variable</span> <span class="id">R</span> : <span class="id">archiFieldType</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">cesaro_converse_off_by_one</span> (<span class="id">u_</span> : <span class="id">R</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;[<span class="id">sequence</span> <span class="id">n</span>.+1%:<span class="id">R</span>^-1 * <span class="id">series</span> <span class="id">u_</span> <span class="id">n</span>.+1]<span class="id">_</span> <span class="id">n</span> --&gt; (0 : <span class="id">R</span>) -&gt;<br/>
&nbsp;&nbsp;[<span class="id">sequence</span> <span class="id">n</span>.+1%:<span class="id">R</span>^-1 * <span class="id">series</span> <span class="id">u_</span> <span class="id">n</span>]<span class="id">_</span> <span class="id">n</span> --&gt; (0 : <span class="id">R</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof89')">Proof.</span></div>
<div class="proofscript" id="proof89">
<span class="id">move</span>=&gt; <span class="id">H</span>; <span class="id">apply</span>/<span class="id">cvgrPdist_lt</span> =&gt; <span class="id">_</span>/<span class="id">posnumP</span>[<span class="id">e</span>].<br/>
<span class="id">move</span>/<span class="id">cvgrPdist_lt</span> : <span class="id">H</span> =&gt; /(<span class="id">_</span> <span class="id">_</span> (<span class="id">gt0</span> <span class="id">e</span>)) -[<span class="id">m</span> <span class="id">_</span> <span class="id">mu</span>].<br/>
<span class="id"><a href="mathcomp.analysis.sequences.html#cesaro_converse.cesaro_converse_off_by_one">near</a></span>=&gt; <span class="id">n</span>; <span class="id">rewrite</span> <span class="id">sub0r</span> <span class="id">normrN</span> /=.<br/>
<span class="id">have</span> /<span class="id">andP</span>[<span class="id">n0</span>] : ((0 &lt; <span class="id">n</span>) &amp;&amp; (<span class="id">m</span> &lt;= <span class="id">n</span>.-1))%<span class="id">N</span>.<br/>
&nbsp;&nbsp;<span class="id">near</span>: <span class="id">n</span>; <span class="kwd">exists</span> <span class="id">m</span>.+1 =&gt; // <span class="id">k</span> <span class="id"><a href="mathcomp.analysis.sequences.html#seriesEnat">mk</a></span>; <span class="id">rewrite</span> (<span class="id">leq_trans</span> <span class="id">_</span> <span class="id">mk</span>) //=.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> -(<span class="id">leq_add2r</span> 1%<span class="id">N</span>) !<span class="id">addn1</span> <span class="id">prednK</span> // (<span class="id">leq_trans</span> <span class="id">_</span> <span class="id">mk</span>).<br/>
<span class="id">move</span>/<span class="id">mu</span> =&gt; {<span class="id">mu</span>}; <span class="id">rewrite</span> <span class="id">sub0r</span> <span class="id">normrN</span> /= <span class="id">prednK</span> //; <span class="id">apply</span>: <span class="id">le_lt_trans</span>.<br/>
<span class="id">rewrite</span> !<span class="id">normrM</span> <span class="id">ler_wpmul2r</span> // <span class="id">ger0_norm</span> // <span class="id">ger0_norm</span> //.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lef_pinv</span> // ?<span class="id">ler_nat</span> // <span class="id">posrE</span> // <span class="id">ltr0n</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cesaro_converse</span> (<span class="id">u_</span> : <span class="id">R</span> ^<span class="id">nat</span>) (<span class="id">l</span> : <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">telescope</span> <span class="id">u_</span> =<span class="id">o_</span>\<span class="id">oo</span> <span class="id">harmonic</span> -&gt; <span class="id">arithmetic_mean</span> <span class="id">u_</span> --&gt; <span class="id">l</span> -&gt; <span class="id">u_</span> --&gt; <span class="id">l</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof90')">Proof.</span></div>
<div class="proofscript" id="proof90">
<span class="id">pose</span> <span class="id">a_</span> := <span class="id">telescope</span> <span class="id">u_</span> =&gt; <span class="id">a_o</span> <span class="id">u_l</span>.<br/>
<span class="id">suff</span> <span class="id">abel</span> : <span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">u_</span> <span class="id">n</span> - <span class="id">arithmetic_mean</span> <span class="id">u_</span> <span class="id">n</span> = \<span class="id">sum_</span>(1 &lt;= <span class="id">k</span> &lt; <span class="id">n</span>.+1) <span class="id">k</span>%:<span class="id">R</span> / <span class="id">n</span>.+1%:<span class="id">R</span> * <span class="id">a_</span> <span class="id">k</span>.-1.<br/>
&nbsp;&nbsp;<span class="id">suff</span> <span class="id">K</span> : <span class="id">u_</span> - <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#xpredT">arithmetic_mean</a></span> <span class="id">u_</span> --&gt; (0 : <span class="id">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> -(<span class="id">add0r</span> <span class="id">l</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">u_</span> = <span class="id">u_</span> - <span class="id">arithmetic_mean</span> <span class="id">u_</span> + <span class="id">arithmetic_mean</span> <span class="id">u_</span>); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> <span class="id">subrK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">cvgD</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">_</span> - <span class="id">arithmetic_mean</span> <span class="id">u_</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(1 &lt;= <span class="id">k</span> &lt; <span class="id">n</span>.+1) <span class="id">k</span>%:<span class="id">R</span> / <span class="id">n</span>.+1%:<span class="id">R</span> * <span class="id">a_</span> <span class="id">k</span>.-1)); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">funeqE</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> {<span class="id">abel</span>} /= (<span class="id">_</span> : (<span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id">_</span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">n</span>.+1%:<span class="id">R</span>^-1 * \<span class="id">sum_</span>(0 &lt;= <span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">k</span>.+1%:<span class="id">R</span> * <span class="id">a_</span> <span class="id">k</span>); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> <span class="id">big_add1</span> /= /= <span class="id">big_distrr</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">eq_bigr</span> =&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">mulrCA</span> <span class="id">mulrA</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> {}<span class="id">a_o</span> : [<span class="id">sequence</span> <span class="id">n</span>.+1%:<span class="id">R</span> * <span class="id">telescope</span> <span class="id">u_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">n</a></span>]<span class="id">_n</span> --&gt; (0 : <span class="id">R</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: (@<span class="id">eqolim0</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">eventually_filterType</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">a_o</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">set</span> <span class="id">h</span> := '<span class="id">o_</span>[<span class="id">filter</span> <span class="id">of</span> \<span class="id">oo</span>] <span class="id">harmonic</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">eqoP</span> =&gt; <span class="id">_</span>/<span class="id">posnumP</span>[<span class="id">e</span>] /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">near</span>=&gt; <span class="id">n</span>; <span class="id">rewrite</span> <span class="id">normr1</span> <span class="id">mulr1</span> <span class="id">normrM</span> -<span class="id">ler_pdivl_mull</span>// ?<span class="id">normr_gt0</span>//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">mulrC</span> -<span class="id">normrV</span> ?<span class="id">unitfE</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">near</span>: <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>: (<span class="id">eqoP</span> <span class="id">eventually_filterType</span> <span class="id">harmonic</span> <span class="id">h</span>) =&gt; + <span class="id">_</span>; <span class="id">apply</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>: (<span class="id">cesaro</span> <span class="id">a_o</span>); <span class="id">rewrite</span> /<span class="id">arithmetic_mean</span> /<span class="id">series</span> /= -/<span class="id">a_</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>: (@<span class="id">cesaro_converse_off_by_one</span> (<span class="kwd">fun</span> <span class="id">k</span> =&gt; <span class="id">k</span>.+1%:<span class="id">R</span> * <span class="id">a_</span> <span class="id">k</span>)).<br/>
<span class="id">case</span> =&gt; [|<span class="id">n</span>].<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id">arithmetic_mean</span>/= <span class="id">invr1</span> <span class="id">mul1r</span> !<span class="id">seriesEnat</span>/=.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big_nat1</span> <span class="id">subrr</span> <span class="id">big_geq</span>.<br/>
<span class="id">rewrite</span> /<span class="id">arithmetic_mean</span> /= <span class="id">seriesEnat</span> /= <span class="id">big_nat_recl</span> //=.<br/>
<span class="id">under</span> <span class="id">eq_bigr</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">eq_sum_telescope</span>.<br/>
<span class="id">rewrite</span> <span class="id">big_split</span> /= <span class="id">big_const_nat</span> <span class="id">iter_addr</span> <span class="id">addr0</span> <span class="id">addrA</span> -<span class="id">mulrS</span> <span class="id">mulrDr</span>.<br/>
<span class="id">rewrite</span> -(<span class="id">mulr_natl</span> (<span class="id">u_</span> <span class="id">O</span>)) <span class="id">mulrA</span> <span class="id">mulVr</span> ?<span class="id">unitfE</span> ?<span class="id">pnatr_eq0</span> // <span class="id">mul1r</span> <span class="id">opprD</span> <span class="id">addrA</span>.<br/>
<span class="id">rewrite</span> <span class="id">eq_sum_telescope</span> (<span class="id">addrC</span> (<span class="id">u_</span> <span class="id">O</span>)) <span class="id">addrK</span>.<br/>
<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span> - <span class="id">_</span> * <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;\<span class="id">sum_</span>(0 &lt;= <span class="id">i</span> &lt; <span class="id"><a href="mathcomp.analysis.normedtype.html#NormedModule.Exports.normedModType">n</a></span>.+1) \<span class="id">sum_</span>(0 &lt;= <span class="id">k</span> &lt; <span class="id">n</span>.+1 | (<span class="id">k</span> &lt; <span class="id">i</span>.+1)%<span class="id">N</span>) <span class="id">a_</span> <span class="id">k</span>); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> !<span class="id">big_mkord</span>; <span class="id">apply</span>: <span class="id">eq_bigr</span> =&gt; <span class="id">i</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">seriesEord</span>/= <span class="id">big_mkord</span> -<span class="id">big_ord_widen</span>.<br/>
<span class="id">rewrite</span> (<span class="id">exchange_big_dep_nat</span> <span class="id">xpredT</span>) //=.<br/>
<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span> - <span class="id">_</span> * <span class="id">X</span>](<span class="id">_</span> : <span class="id"><a href="mathcomp.analysis.topology.html#lim">_</a></span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;\<span class="id">sum_</span>(0 &lt;= <span class="id">i</span> &lt; <span class="id">n</span>.+1) \<span class="id">sum_</span>(<span class="id">i</span> &lt;= <span class="id">j</span> &lt; <span class="id">n</span>.+1) <span class="id">a_</span> <span class="id">i</span> ); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">congr_big_nat</span> =&gt; //= <span class="id">i</span> <span class="id">ni</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">big_const_nat</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">iter_addr</a></span> <span class="id">addr0</span> -<span class="id">big_filter</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">big_const_seq</span> <span class="id">iter_addr</span> <span class="id">addr0</span>; <span class="id">congr</span> (<span class="id">_</span> *+ <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id">index_iota</span> <span class="id">subn0</span> -[<span class="kwd">in</span> <span class="id">LHS</span>](<span class="id">subnKC</span> (<span class="id">ltnW</span> <span class="id"><a href="mathcomp.analysis.sequences.html#nondecreasing_seqP">ni</a></span>)) <span class="id">iotaD</span> <span class="id">filter_cat</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">count_cat</span> (<span class="id">_</span> : [<span class="id">seq</span> <span class="id">_</span> &lt;- <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#leRHS">_</a></span> | <span class="id">_</span>] = [::]); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> -(<span class="id">filter_pred0</span> (<span class="id">iota</span> 0 <span class="id">i</span>)); <span class="id">apply</span>: <span class="id">eq_in_filter</span> =&gt; <span class="id">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">mem_iota</span> <span class="id">leq0n</span> <span class="id">andTb</span> <span class="id">add0n</span> =&gt; <span class="id">ji</span>; <span class="id">rewrite</span> <span class="id">ltnNge</span> <span class="id">ji</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> 2!<span class="id">add0n</span> (<span class="id">_</span> : [<span class="id">seq</span> <span class="id">_</span> &lt;- <span class="id">_</span> | <span class="id">_</span>] = <span class="id">iota</span> <span class="id">i</span> (<span class="id">n</span>.+1 - <span class="id">i</span>)); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> -[<span class="id">RHS</span>]<span class="id">filter_predT</span>; <span class="id">apply</span>: <span class="id">eq_in_filter</span> =&gt; <span class="id">j</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">mem_iota</span> =&gt; /<span class="id">andP</span>[<span class="id">ij</span>]; <span class="id">rewrite</span> <span class="id">subnKC</span>; <span class="id">last</span> <span class="id">exact</span>/<span class="id">ltnW</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">jn</span>; <span class="id">rewrite</span> <span class="id">ltnS</span> <span class="id">ij</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">count_predT</span> <span class="id">size_iota</span>.<br/>
<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span> - <span class="id">_</span> * <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;\<span class="id">sum_</span>(0 &lt;= <span class="id">i</span> &lt; <span class="id">n</span>.+1) <span class="id">a_</span> <span class="id">i</span> * (<span class="id">n</span>.+1 - <span class="id">i</span>)%:<span class="id">R</span>); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">eq_bigr</span> =&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">big_const_nat</span> <span class="id">iter_addr</span> <span class="id">addr0</span> <span class="id">mulr_natr</span>.<br/>
<span class="id">rewrite</span> <span class="id">big_distrr</span> /= <span class="id">big_mkord</span> (<span class="id">big_morph</span> <span class="id">_</span> (@<span class="id">opprD</span> <span class="id">_</span>) (@<span class="id">oppr0</span> <span class="id">_</span>)).<br/>
<span class="id">rewrite</span> <span class="id">seriesEord</span> -<span class="id">big_split</span> /= <span class="id">big_add1</span> /= <span class="id">big_mkord</span>; <span class="id">apply</span>: <span class="id">eq_bigr</span> =&gt; <span class="id">i</span> <span class="id">_</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.sequences.html#geometric">mulrCA</a></span> -[<span class="id">X</span> <span class="kwd">in</span> <span class="id">X</span> - <span class="id">_</span>]<span class="id">mulr1</span> -<span class="id">mulrBr</span> [<span class="id">RHS</span>]<span class="id">mulrC</span>; <span class="id">congr</span> (<span class="id">_</span> * <span class="id">_</span>).<br/>
<span class="id">rewrite</span> -[<span class="id">X</span> <span class="kwd">in</span> <span class="id">X</span> - <span class="id">_</span>](@<span class="id">divrr</span> <span class="id">_</span> (<span class="id">n</span>.+2)%:<span class="id">R</span>) ?<span class="id">unitfE</span> ?<span class="id">pnatr_eq0</span> //.<br/>
<span class="id">rewrite</span> [<span class="kwd">in</span> <span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span> - <span class="id">X</span>]<span class="id">mulrC</span> -<span class="id">mulrBl</span>; <span class="id">congr</span> (<span class="id">_</span> / <span class="id">_</span>).<br/>
<span class="id">rewrite</span> -<span class="id">natrB</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> (@<span class="id">leq_trans</span> <span class="id">n</span>.+1) // <span class="id">leq_subr</span>.<br/>
<span class="id">rewrite</span> <span class="id">subnBA</span>; <span class="kwd">by</span> [<span class="id">rewrite</span> <span class="id">addSnnS</span> <span class="id">addnC</span> <span class="id">addnK</span> | <span class="id">rewrite</span> <span class="id">ltnW</span>].<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">cesaro_converse</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">series_convergence</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_series_cvg_0</span> (<span class="id">K</span> : <span class="id">numFieldType</span>) (<span class="id">V</span> : <span class="id">normedModType</span> <span class="id">K</span>) (<span class="id">u_</span> : <span class="id">V</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">cvg</span> (<span class="id">series</span> <span class="id">u_</span>) -&gt; <span class="id">u_</span> --&gt; (0 : <span class="id">V</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof91')">Proof.</span></div>
<div class="proofscript" id="proof91">
<span class="id">move</span>=&gt; <span class="id">cvg_series</span>.<br/>
<span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">u_</span> = <span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">series</span> <span class="id">u_</span> <span class="id">n</span>.+1 - <span class="id">series</span> <span class="id">u_</span> <span class="id">n</span>); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">i</span>; <span class="id">rewrite</span> <span class="id">seriesSB</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -(<span class="id">subrr</span> (<span class="id">lim</span> (<span class="id">series</span> <span class="id">u_</span>))); <span class="id">apply</span>: <span class="id">cvgB</span> =&gt; //; <span class="id">rewrite</span> ?<span class="id">cvg_shiftS</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">nondecreasing_series</span> (<span class="id">R</span> : <span class="id">numFieldType</span>) (<span class="id">u_</span> : <span class="id">R</span> ^<span class="id">nat</span>) (<span class="id">P</span> : <span class="id">pred</span> <span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">P</span> <span class="id">n</span> -&gt; 0 &lt;= <span class="id">u_</span> <span class="id">n</span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span> (<span class="kwd">fun</span> <span class="id">n</span>=&gt; \<span class="id">sum_</span>(0 &lt;= <span class="id">k</span> &lt; <span class="id">n</span> | <span class="id">P</span> <span class="id">k</span>) <span class="id">u_</span> <span class="id">k</span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof92')">Proof.</span></div>
<div class="proofscript" id="proof92">
<span class="id">move</span>=&gt; <span class="id">u_ge0</span>; <span class="id">apply</span>/<span class="id">nondecreasing_seqP</span> =&gt; <span class="id">n</span>.<br/>
<span class="id">rewrite</span> [<span class="kwd">in</span> <span class="id">leRHS</span>]<span class="id">big_mkcond</span> [<span class="kwd">in</span> <span class="id">leRHS</span>]<span class="id">big_nat_recr</span>//=.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -[<span class="kwd">in</span> <span class="id">leRHS</span>]<span class="id">big_mkcond</span>/= <span class="id">ler_addl</span>; <span class="id">case</span>: <span class="id">ifPn</span> =&gt; //; <span class="id">exact</span>: <span class="id">u_ge0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">increasing_series</span> (<span class="id">R</span> : <span class="id">numFieldType</span>) (<span class="id">u_</span> : <span class="id">R</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, 0 &lt; <span class="id">u_</span> <span class="id">n</span>) -&gt; <span class="id">increasing_seq</span> (<span class="id">series</span> <span class="id">u_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof93')">Proof.</span></div>
<div class="proofscript" id="proof93">
<span class="id">move</span>=&gt; <span class="id">u_ge0</span>; <span class="id">apply</span>/<span class="id">increasing_seqP</span> =&gt; <span class="id">n</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id">seriesEord</span>/= <span class="id">big_ord_recr</span> <span class="id">ltr_addl</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">series_convergence</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">arithmetic</span> (<span class="id">R</span> : <span class="id">zmodType</span>) <span class="id">a</span> <span class="id">z</span> : <span class="id">R</span> ^<span class="id">nat</span> := [<span class="id">sequence</span> <span class="id">a</span> + <span class="id">z</span> *+ <span class="id">n</span>]<span class="id">_n</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">arithmetic</span> {<span class="id">R</span>} <span class="id">a</span> <span class="id">z</span> <span class="id">n</span> /.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">mulrn_arithmetic</span> (<span class="id">R</span> : <span class="id">zmodType</span>) : @<span class="id"><a name="cvg_geometric_series">GRing.natmul</a></span> <span class="id">R</span> = <span class="id">arithmetic</span> 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof94')">Proof.</span></div>
<div class="proofscript" id="proof94">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">funeq2E</span> =&gt; <span class="id">z</span> <span class="id">n</span> /=; <span class="id"><a href="mathcomp.analysis.sequences.html#series">rewrite</a></span> <span class="id"><a href="mathcomp.analysis.sequences.html#geometric">add0r</a></span>. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">geometric</span> (<span class="id">R</span> : <span class="id">fieldType</span>) <span class="id">a</span> <span class="id">z</span> : <span class="id">R</span> ^<span class="id">nat</span> := [<span class="id"><a href="mathcomp.analysis.sequences.html#geometric_seriesE">sequence</a></span> <span class="id">a</span> * <span class="id">z</span> ^+ <span class="id">n</span>]<span class="id">_n</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">geometric</span> {<span class="id">R</span>} <span class="id">a</span> <span class="id">z</span> <span class="id">n</span> /.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">exprn_geometric</span> (<span class="id">R</span> : <span class="id">fieldType</span>) : (@<span class="id">GRing.exp</span> <span class="id">R</span>) = <span class="id">geometric</span> 1.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof95')">Proof.</span></div>
<div class="proofscript" id="proof95">
 <span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.normedtype.html#cvgMr">rewrite</a></span> <span class="id">funeq2E</span> =&gt; <span class="id">z</span> <span class="id">n</span> /=; <span class="id">rewrite</span> <span class="id">mul1r</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_arithmetic</span> (<span class="id">R</span> : <span class="id">archiFieldType</span>) <span class="id">a</span> (<span class="id">z</span> : <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">z</span> &gt; 0 -&gt; <span class="id">arithmetic</span> <span class="id">a</span> <span class="id">z</span> --&gt; +<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof96')">Proof.</span></div>
<div class="proofscript" id="proof96">
<span class="id">move</span>=&gt; <span class="id">z_gt0</span>; <span class="id">apply</span>/<span class="id">cvgryPge</span> =&gt; <span class="id">A</span>; <span class="id">near</span>=&gt; <span class="id">n</span> =&gt; /=.<br/>
<span class="id">rewrite</span> -<span class="id">ler_subl_addl</span> -<span class="id"><a href="mathcomp.analysis.sequences.html#series">mulr_natl</a></span> -<span class="id"><a href="mathcomp.analysis.sequences.html#series">ler_pdivr_mulr</a></span>//.<br/>
<span class="id">rewrite</span> <span class="id">ler_normlW</span>// <span class="id">ltW</span>// (<span class="id">lt_le_trans</span> (<span class="id">archi_boundP</span> <span class="id">_</span>))// <span class="id">ler_nat</span>.<br/>
<span class="kwd">by</span> <span class="id">near</span>: <span class="id">n</span>; <span class="id">apply</span>: <span class="id">nbhs_infty_ge</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_expr</span> (<span class="id">R</span> : <span class="id">archiFieldType</span>) (<span class="id">z</span> : <span class="id">R</span>) :<br/>
&nbsp;&nbsp;`|<span class="id">z</span>| &lt; 1 -&gt; (<span class="id">GRing.exp</span> <span class="id">z</span> : <span class="id">R</span> ^<span class="id">nat</span>) --&gt; (0 : <span class="id">R</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof97')">Proof.</span></div>
<div class="proofscript" id="proof97">
<span class="id">move</span>=&gt; <span class="id">Nz_lt1</span>; <span class="id">apply</span>/<span class="id">norm_cvg0P</span>; <span class="id">pose</span> <span class="id">t</span> := (1 - `|<span class="id">z</span>|).<br/>
<span class="id">apply</span>: (@<span class="id">squeeze_cvgr</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">cst</span> 0) (<span class="id">t</span>^-1 *: @<span class="id">harmonic</span> <span class="id">R</span>)); <span class="id">last</span> 2 <span class="id">first</span>.<br/>
- <span class="id">exact</span>: <span class="id">cvg_cst</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> -(<span class="id">scaler0</span> <span class="id">_</span> <span class="id">t</span>^-1); <span class="id">exact</span>: (<span class="id">cvgZr</span> <span class="id">cvg_harmonic</span>).<br/>
<span class="id">near</span>=&gt; <span class="id">n</span>; <span class="id">rewrite</span> <span class="id">normr_ge0</span> <span class="id">normrX</span>/= <span class="id">ler_pdivl_mull</span> ?<span class="id">subr_gt0</span>//.<br/>
<span class="id">rewrite</span> -(@<span class="id">ler_pmul2l</span> <span class="id">_</span> <span class="id">n</span>.+1%:<span class="id">R</span>)// <span class="id">mulfV</span>// [<span class="id">t</span> * <span class="id">_</span>]<span class="id">mulrC</span> <span class="id">mulr_natl</span>.<br/>
<span class="id">have</span> -&gt; : 1 = (`|<span class="id">z</span>| + <span class="id">t</span>) ^+ <span class="id">n</span>.+1 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">addrC</span> <span class="id">addrNK</span> <span class="id">expr1n</span>.<br/>
<span class="id">rewrite</span> <span class="id">exprDn</span> (<span class="id">bigD1</span> (<span class="id">inord</span> 1)) ?<span class="id">inordK</span>// <span class="id">subn1</span> <span class="id">expr1</span> <span class="id">bin1</span> <span class="id">ler_addl</span> <span class="id">sumr_ge0</span>//.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span>; <span class="id">rewrite</span> ?(<span class="id">mulrn_wge0</span>, <span class="id">mulr_ge0</span>, <span class="id">exprn_ge0</span>, <span class="id">subr_ge0</span>)// <span class="id">ltW</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.sequences.html#cvg_series_cvg_0">end_near</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">geometric_seriesE</span> (<span class="id">R</span> : <span class="id">numFieldType</span>) (<span class="id">a</span> <span class="id">z</span> : <span class="id">R</span>) : <span class="id">z</span> != 1 -&gt;<br/>
&nbsp;&nbsp;<span class="id">series</span> (<span class="id">geometric</span> <span class="id">a</span> <span class="id">z</span>) = [<span class="id">sequence</span> <span class="id">a</span> * (1 - <span class="id">z</span> ^+ <span class="id">n</span>) / (1 - <span class="id">z</span>)]<span class="id">_n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof98')">Proof.</span></div>
<div class="proofscript" id="proof98">
<span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">z_neq1</span> <span class="id">n</span>.<br/>
<span class="id">apply</span>: (@<span class="id">mulIf</span> <span class="id"><a name="normed_series_of">_</a></span> (1 - <span class="id">z</span>)); <span class="id">rewrite</span> ?<span class="id">mulfVK</span> ?<span class="id">subr_eq0</span> 1?<span class="id">eq_sym</span>//.<br/>
<span class="id">rewrite</span> <span class="id">seriesEnat</span> !<span class="id">mulrBr</span> [<span class="kwd">in</span> <span class="id">LHS</span>]<span class="id">mulr1</span> <span class="id">mulr_suml</span> -<span class="id">opprB</span> -<span class="id">sumrB</span>.<br/>
<span class="kwd">by</span> <span class="id">under</span> <span class="id">eq_bigr</span> <span class="id">do</span> <span class="id">rewrite</span> -<span class="id">mulrA</span> -<span class="id">exprSr</span>; <span class="id">rewrite</span> <span class="id">telescope_sumr</span>// <span class="id">opprB</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_geometric_series</span> (<span class="id">R</span> : <span class="id">archiFieldType</span>) (<span class="id">a</span> <span class="id">z</span> : <span class="id">R</span>) : `|<span class="id">z</span>| &lt; 1 -&gt;<br/>
&nbsp;&nbsp;<span class="id">series</span> (<span class="id">geometric</span> <span class="id">a</span> <span class="id">z</span>) --&gt; (<span class="id">a</span> * (1 - <span class="id">z</span>)^-1).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof99')">Proof.</span></div>
<div class="proofscript" id="proof99">
<span class="id">move</span>=&gt; <span class="id">Nz_lt1</span>; <span class="id">rewrite</span> <span class="id">geometric_seriesE</span> ?<span class="id">lt_eqF</span> 1?<span class="id">ltr_normlW</span>//.<br/>
<span class="id">have</span> -&gt; : <span class="id">a</span> / (1 - <span class="id">z</span>) = (<span class="id">a</span> * (1 - 0)) / (1 - <span class="id">z</span>) <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">subr0</span> <span class="id">mulr1</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">cvgMl</span>; <span class="id">apply</span>: <span class="id">cvgMr</span>; <span class="id">apply</span>: <span class="id">cvgB</span>; [<span class="id">apply</span>: <span class="id">cvg_cst</span>|<span class="id">apply</span>: <span class="id">cvg_expr</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_geometric_series_half</span> (<span class="id">R</span> : <span class="id">archiFieldType</span>) (<span class="id">r</span> : <span class="id">R</span>) <span class="id">n</span> :<br/>
&nbsp;&nbsp;<span class="id">series</span> (<span class="kwd">fun</span> <span class="id">k</span> =&gt; <span class="id">r</span> / (2 ^ (<span class="id">k</span> + <span class="id">n</span>.+1))%:<span class="id">R</span> : <span class="id">R</span>^<span class="id">o</span>) --&gt; (<span class="id">r</span> / 2 ^+ <span class="id">n</span> : <span class="id">R</span>^<span class="id">o</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof100')">Proof.</span></div>
<div class="proofscript" id="proof100">
<span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">series</span> <span class="id">_</span> = <span class="id">series</span> (<span class="id">geometric</span> (<span class="id">r</span> / (2 ^ <span class="id">n</span>.+1)%:<span class="id">R</span>) 2^-1%<span class="id">R</span>)); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">m</span>; <span class="id">rewrite</span> /<span class="id">series</span> /=; <span class="id">apply</span>: <span class="id">eq_bigr</span> =&gt; <span class="id">k</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">expnD</span> <span class="id">natrM</span> (<span class="id">mulrC</span> (2 ^ <span class="id">k</span>)%:<span class="id">R</span>) <span class="id">invfM</span> <span class="id">exprVn</span> (<span class="id">natrX</span> <span class="id">_</span> 2 <span class="id">k</span>) <span class="id">mulrA</span>.<br/>
<span class="id">apply</span>: <span class="id">cvg_trans</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">cvg_geometric_series</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ger0_norm</span> // <span class="id">invr_lt1</span> // ?<span class="id">ltr1n</span> // <span class="id">unitfE</span>.<br/>
<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> (<span class="id">X</span> - <span class="id">_</span>)%<span class="id">R</span>](<span class="id">splitr</span> 1) <span class="id">div1r</span> <span class="id">addrK</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">mulrA</span> -<span class="id">invfM</span> <span class="id">expnSr</span> <span class="id">natrM</span> -<span class="id">mulrA</span> <span class="id">divff</span>// <span class="id">mulr1</span> <span class="id">natrX</span>.<br/>
Qed.</div>
<span class="kwd">Arguments</span> <span class="id">cvg_geometric_series_half</span> {<span class="id">R</span>} <span class="id">_</span> <span class="id">_</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">geometric_partial_tail</span> {<span class="id">R</span> : <span class="id">fieldType</span>} (<span class="id">n</span> <span class="id">m</span> : <span class="id">nat</span>) (<span class="id">x</span> : <span class="id">R</span>) :<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">m</span> &lt;= <span class="id">i</span> &lt; <span class="id">m</span> + <span class="id">n</span>) <span class="id">x</span> ^+ <span class="id">i</span> = <span class="id">series</span> (<span class="id">geometric</span> (<span class="id">x</span> ^+ <span class="id">m</span>) <span class="id">x</span>) <span class="id">n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof101')">Proof.</span></div>
<div class="proofscript" id="proof101">
<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">big_addn</span> 0 <span class="id">_</span> <span class="id">m</span>) <span class="id">addnC</span> <span class="id">addnK</span>; <span class="id">under</span> <span class="id">eq_bigr</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">exprD</span> <span class="id">mulrC</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_geometric</span> (<span class="id">R</span> : <span class="id">archiFieldType</span>) (<span class="id">a</span> <span class="id">z</span> : <span class="id">R</span>) : `|<span class="id">z</span>| &lt; 1 -&gt;<br/>
&nbsp;&nbsp;<span class="id">geometric</span> <span class="id">a</span> <span class="id">z</span> --&gt; (0 : <span class="id">R</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof102')">Proof.</span></div>
<div class="proofscript" id="proof102">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">cvg_geometric_series</span>/<span class="id">cvgP</span>/<span class="id">cvg_series_cvg_0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">is_cvg_geometric_series</a></span> (<span class="id">R</span> : <span class="id">archiFieldType</span>) (<span class="id">a</span> <span class="id">z</span> : <span class="id">R</span>) : `|<span class="id">z</span>| &lt; 1 -&gt;<br/>
&nbsp;<span class="id"><a href="mathcomp.analysis.sequences.html#series">cvg</a></span> (<span class="id">series</span> (<span class="id">geometric</span> <span class="id">a</span> <span class="id">z</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof103')">Proof.</span></div>
<div class="proofscript" id="proof103">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">cvg_geometric_series</span>/<span class="id">cvgP</span>; <span class="id">apply</span>. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a href="mathcomp.analysis.sequences.html#cauchy_seriesP">normed_series_of</a></span> (<span class="id">K</span> : <span class="id">numDomainType</span>) (<span class="id">V</span> : <span class="id">normedModType</span> <span class="id">K</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">u_</span> : <span class="id">V</span> ^<span class="id">nat</span>) <span class="id">of</span> <span class="id">phantom</span> <span class="id">V</span>^<span class="id">nat</span> (<span class="id">series</span> <span class="id">u_</span>) : <span class="id">K</span> ^<span class="id">nat</span> :=<br/>
&nbsp;&nbsp;[<span class="id">series</span> `|<span class="id">u_</span> <span class="id">n</span>|]<span class="id">_n</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">normed</span>' <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">s_</a></span> ]" := (@<span class="id">normed_series_of</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">Phantom</span> <span class="id">_</span> <span class="id">s_</span>)) : <span class="id">ring_scope</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">normed_series_of</span> {<span class="id">K</span> <span class="id">V</span>} <span class="id">u_</span> <span class="id">_</span> <span class="id">n</span> /.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">ger0_normed</span> {<span class="id">K</span> : <span class="id">numFieldType</span>} (<span class="id">u_</span> : <span class="id">K</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, 0 &lt;= <span class="id">u_</span> <span class="id">n</span>) -&gt; [<span class="id">normed</span> <span class="id">series</span> <span class="id"><a href="mathcomp.analysis.normedtype.html#is_cvg_norm">u_</a></span>] = <span class="id">series</span> <span class="id">u_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof104')">Proof.</span></div>
<div class="proofscript" id="proof104">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">u_gt0</span>; <span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">n</span> /=; <span class="id">apply</span>: <span class="id">eq_bigr</span> =&gt; <span class="id">k</span>; <span class="id">rewrite</span> <span class="id">ger0_norm</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cauchy_seriesP</span> {<span class="id">R</span> : <span class="id">numFieldType</span>} (<span class="id">V</span> : <span class="id">normedModType</span> <span class="id">R</span>) (<span class="id">u_</span> : <span class="id">V</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">cauchy</span> (<span class="id">series</span> <span class="id">u_</span> @ \<span class="id">oo</span>) &lt;-&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> : <span class="id">R</span>, <span class="id">e</span> &gt; 0 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;\<span class="kwd">forall</span> <span class="id">n</span> \<span class="id">near</span> (\<span class="id">oo</span>, \<span class="id">oo</span>), `|\<span class="id">sum_</span>(<span class="id">n</span>.1 &lt;= <span class="id">k</span> &lt; <span class="id">n</span>.2) <span class="id">u_</span> <span class="id"><a name="cvg_to_0_linear">k</a></span>| &lt; <span class="id">e</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof105')">Proof.</span></div>
<div class="proofscript" id="proof105">
<span class="id">rewrite</span> -<span class="id">cauchy_ballP</span>; <span class="id">split</span>=&gt; <span class="id">su_cv</span> <span class="id">_</span>/<span class="id">posnumP</span>[<span class="id">e</span>];<br/>
<span class="id">have</span> {}<span class="id">su_cv</span> := !! <span class="id">su_cv</span> <span class="id">_</span> (<span class="id">gt0</span> <span class="id">e</span>);<br/>
<span class="id">rewrite</span> -<span class="id">near2_pair</span> -<span class="id">ball_normE</span> !<span class="id">near_simpl</span>/= <span class="kwd">in</span> <span class="id">su_cv</span> *.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">filterS</span> <span class="id">su_cv</span> =&gt; -[/= <span class="id">m</span> <span class="id">n</span>]; <span class="id">rewrite</span> <span class="id">distrC</span> <span class="id">sub_series</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">have</span> [|/<span class="id">ltnW</span>]:= <span class="id">leqP</span> <span class="id">m</span> <span class="id">n</span> =&gt; <span class="id">mn</span>//; <span class="id">rewrite</span> (<span class="id">big_geq</span> <span class="id">mn</span>) ?<span class="id">normr0</span>.<br/>
<span class="id">have</span> := <span class="id">su_cv</span>; <span class="id">rewrite</span> <span class="id">near_swap</span> =&gt; <span class="id">su_cvC</span>; <span class="id">near</span>=&gt; <span class="id">m</span> =&gt; /=; <span class="id">rewrite</span> <span class="id">sub_series</span>.<br/>
<span class="kwd">by</span> <span class="id">have</span> [|/<span class="id">ltnW</span>]:= <span class="id">leqP</span> <span class="id">m</span>.2 <span class="id">m</span>.1 =&gt; <span class="id">m12</span>; <span class="id">rewrite</span> ?<span class="id">normrN</span>; <span class="id">near</span>: <span class="id">m</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">series_le_cvg</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">u_</span> <span class="id">v_</span> : <span class="id">R</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, 0 &lt;= <span class="id">u_</span> <span class="id">n</span>) -&gt; (<span class="kwd">forall</span> <span class="id">n</span>, 0 &lt;= <span class="id">v_</span> <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">u_</span> <span class="id">n</span> &lt;= <span class="id">v_</span> <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">cvg</span> (<span class="id">series</span> <span class="id">v_</span>) -&gt; <span class="id">cvg</span> (<span class="id">series</span> <span class="id">u_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof106')">Proof.</span></div>
<div class="proofscript" id="proof106">
<span class="id">move</span>=&gt; <span class="id">u_ge0</span> <span class="id">v_ge0</span> <span class="id">le_uv</span> /<span class="id">cvg_seq_bounded</span>/<span class="id">bounded_fun_has_ubound</span>[<span class="id">M</span> <span class="id">v_M</span>].<br/>
<span class="id">apply</span>: <span class="id">nondecreasing_is_cvgn</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">nondecreasing_series</span>.<br/>
<span class="kwd">exists</span> <span class="id">M</span> =&gt; <span class="id">_</span> [<span class="id">n</span> <span class="id">_</span> &lt;-].<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">le_trans</span> (<span class="id">v_M</span> (<span class="id">series</span> <span class="id">v_</span> <span class="id">n</span>) <span class="id">_</span>); [<span class="id">apply</span>: <span class="id">ler_sum</span> | <span class="kwd">exists</span> <span class="id">n</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">normed_cvg</span> {<span class="id">R</span> : <span class="id">realType</span>} (<span class="id">V</span> : <span class="id">completeNormedModType</span> <span class="id">R</span>) (<span class="id">u_</span> : <span class="id">V</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">cvg</span> [<span class="id">normed</span> <span class="id">series</span> <span class="id">u_</span>] -&gt; <span class="id">cvg</span> (<span class="id">series</span> <span class="id">u_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof107')">Proof.</span></div>
<div class="proofscript" id="proof107">
<span class="id">move</span>=&gt; /<span class="id">cauchy_cvgP</span>/<span class="id">cauchy_seriesP</span> <span class="id">u_ncvg</span>.<br/>
<span class="id">apply</span>/<span class="id">cauchy_cvgP</span>/<span class="id">cauchy_seriesP</span> =&gt; <span class="id">e</span> /<span class="id">u_ncvg</span>.<br/>
<span class="id">apply</span>: <span class="id">filterS</span> =&gt; <span class="id">n</span> /=; <span class="id">rewrite</span> <span class="id">ger0_norm</span> ?<span class="id">sumr_ge0</span>//.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">le_lt_trans</span>; <span class="id">apply</span>: <span class="id">ler_norm_sum</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">lim_series_norm</span> {<span class="id">R</span> : <span class="id">realType</span>} (<span class="id">V</span> : <span class="id">completeNormedModType</span> <span class="id">R</span>) (<span class="id">f</span> : <span class="id">V</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">cvg</span> [<span class="id">normed</span> <span class="id">series</span> <span class="id">f</span>] -&gt; `|<span class="id">lim</span> (<span class="id">series</span> <span class="id">f</span>)| &lt;= <span class="id">lim</span> [<span class="id">normed</span> <span class="id">series</span> <span class="id">f</span>].<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof108')">Proof.</span></div>
<div class="proofscript" id="proof108">
<span class="id">move</span>=&gt; <span class="id">cnf</span>; <span class="id"><a href="mathcomp.analysis.topology.html#cvg">have</a></span> <span class="id">cf</span> := <span class="id">normed_cvg</span> <span class="id">cnf</span>.<br/>
<span class="id">rewrite</span> -<span class="id"><a href="mathcomp.analysis.sequences.html#series_le_cvg">lim_norm</a></span> // (<span class="id">ler_lim</span> (<span class="id">is_cvg_norm</span> <span class="id">cf</span>) <span class="id">cnf</span>) //.<br/>
<span class="kwd">by</span> <span class="id">near</span>=&gt; <span class="id">x</span>; <span class="id">rewrite</span> <span class="id">ler_norm_sum</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">series_linear</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_series_bounded</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id"><a href="mathcomp.analysis.sequences.html#lim_series_le">f</a></span> : <span class="id">R</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">cvg</span> (<span class="id">series</span> <span class="id">f</span>) -&gt; <span class="id">bounded_fun</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof109')">Proof.</span></div>
<div class="proofscript" id="proof109">
<span class="kwd">by</span> <span class="id">move</span>/<span class="id">cvg_series_cvg_0</span> =&gt; <span class="id">f0</span>; <span class="id">apply</span>/<span class="id">cvg_seq_bounded</span>/<span class="id">cvg_ex</span>; <span class="kwd">exists</span> 0.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_to_0_linear</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">f</span> : <span class="id">R</span> -&gt; <span class="id">R</span>) <span class="id">K</span> <span class="id">k</span> :<br/>
&nbsp;&nbsp;0 &lt; <span class="id">k</span> -&gt; (<span class="kwd">forall</span> <span class="id">r</span>, 0 &lt; `| <span class="id">r</span> | &lt; <span class="id">k</span> -&gt; `|<span class="id">f</span> <span class="id">r</span>| &lt;= <span class="id">K</span> * `| <span class="id">r</span> |) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f</span> <span class="id"><a name="exp_coeff_ge0">x</a></span> @[<span class="id">x</span> --&gt; 0^'] --&gt; 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof110')">Proof.</span></div>
<div class="proofscript" id="proof110">
<span class="id">move</span>=&gt; <span class="id">k0</span> <span class="id">kfK</span>; <span class="id">have</span> [<span class="id">K0</span>|<span class="id">K0</span>] := <span class="id">lerP</span> <span class="id">K</span> 0.<br/>
- <span class="id">apply</span>/<span class="id">cvgrPdist_lt</span> =&gt; <span class="id">_</span>/<span class="id">posnumP</span>[<span class="id">e</span>]; <span class="id">near</span>=&gt; <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">distrC</span> <span class="id"><a href="mathcomp.analysis.sequences.html#series">subr0</a></span> (<span class="id">le_lt_trans</span> (<span class="id">kfK</span> <span class="id">_</span> <span class="id">_</span>)) //; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (@<span class="id">le_lt_trans</span> <span class="id">_</span> <span class="id">_</span> 0)// <span class="id">mulr_le0_ge0</span>.<br/>
&nbsp;&nbsp;<span class="id">near</span>: <span class="id">x</span>; <span class="kwd">exists</span> (<span class="id">k</span> / 2); <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">mkset</span> <span class="id">divr_gt0</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">t</span> /=; <span class="id">rewrite</span> <span class="id">distrC</span> <span class="id">subr0</span> =&gt; <span class="id">tk2</span> <span class="id">t0</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">normr_gt0</span> <span class="id">t0</span> (<span class="id">lt_trans</span> <span class="id">tk2</span>) // -[<span class="kwd">in</span> <span class="id">ltLHS</span>](<span class="id">add0r</span> <span class="id">k</span>) <span class="id">midf_lt</span>.<br/>
- <span class="id">apply</span>/<span class="id">eqolim0</span>/<span class="id">eqoP</span> =&gt; <span class="id"><a name="exponential_series.exponential_series_cvg.is_cvg_S0">_</a></span>/<span class="id">posnumP</span>[<span class="id">e</span>]; <span class="id"><a href="mathcomp.analysis.sequences.html#exponential_series.exponential_series_cvg.x">near</a></span>=&gt; <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.topology.html#cvg">rewrite</a></span> (<span class="id">le_trans</span> (<span class="id">kfK</span> <span class="id">_</span> <span class="id">_</span>)) //=.<br/>
&nbsp;&nbsp;+ <span class="id">near</span>: <span class="id">x</span>; <span class="kwd">exists</span> (<span class="id"><a href="mathcomp.analysis.sequences.html#is_cvg_series_restrict">k</a></span> / 2); <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">mkset</span> <span class="id">divr_gt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.sequences.html#is_cvg_geometric_series">move</a></span>=&gt; <span class="id">t</span> /=; <span class="id">rewrite</span> <span class="id">distrC</span> <span class="id">subr0</span> =&gt; <span class="id">tk2</span> <span class="id">t0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">normr_gt0</span> <span class="id">t0</span> (<span class="id">lt_trans</span> <span class="id">tk2</span>) // -[<span class="kwd">in</span> <span class="id">ltLHS</span>](<span class="id">add0r</span> <span class="id">k</span>) <span class="id">midf_lt</span>.<br/>
&nbsp;&nbsp;+ <span class="id">rewrite</span> <span class="id">normr1</span> <span class="id">mulr1</span> <span class="id">mulrC</span> -<span class="id">ler_pdivl_mulr</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">near</span>: <span class="id">x</span>; <span class="kwd">exists</span> (<span class="id">e</span>%:<span class="id">num</span> / <span class="id">K</span>); <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">mkset</span> <span class="id">divr_gt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">t</span> /=; <span class="id">rewrite</span> <span class="id"><a name="exponential_series.exponential_series_cvg.S0_sup">distrC</a></span> <span class="id">subr0</span> =&gt; /<span class="id">ltW</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#range">end_near</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">lim_cvg_to_0_linear</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">f</span> : <span class="id">nat</span> -&gt; <span class="id">R</span>) (<span class="id">g</span> : <span class="id">R</span> -&gt; <span class="id">nat</span> -&gt; <span class="id">R</span>) <span class="id">k</span> :<br/>
&nbsp;&nbsp;0 &lt; <span class="id">k</span> -&gt; <span class="id">cvg</span> (<span class="id">series</span> <span class="id">f</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id"><a href="mathcomp.analysis.sequences.html#exponential_series.exponential_series_cvg.S0">r</a></span>, 0 &lt; `|<span class="id">r</span>| &lt; <span class="id">k</span> -&gt; <span class="kwd">forall</span> <span class="id">n</span>, `|<span class="id">g</span> <span class="id">r</span> <span class="id">n</span>| &lt;= <span class="id">f</span> <span class="id">n</span> * `| <span class="id">r</span> |) -&gt;<br/>
&nbsp;&nbsp;<span class="id">lim</span> (<span class="id">series</span> (<span class="id">g</span> <span class="id"><a href="mathcomp.classical.boolp.html#predeqE">x</a></span>)) @[<span class="id">x</span> --&gt; 0^'] --&gt; 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof111')">Proof.</span></div>
<div class="proofscript" id="proof111">
<span class="id">move</span>=&gt; <span class="id">k_gt0</span> <span class="id">Cf</span> <span class="id">Hg</span>.<br/>
<span class="id">apply</span>: (@<span class="id">cvg_to_0_linear</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">lim</span> (<span class="id">series</span> <span class="id">f</span>)) <span class="id">k</span>) =&gt; // <span class="id">h</span> <span class="id">hLk</span>; <span class="id">rewrite</span> <span class="id">mulrC</span>.<br/>
<span class="id">have</span> <span class="id">Ckf</span> := @<span class="id">is_cvg_seriesZ</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.sequences.html#exponential_series.exponential_series_cvg.S1">_</a></span> `|<span class="id">h</span>| <span class="id">Cf</span>.<br/>
<span class="id">have</span> <span class="id">Cng</span> : <span class="id">cvg</span> [<span class="id">normed</span> <span class="id">series</span> (<span class="id">g</span> <span class="id">h</span>)].<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">series_le_cvg</span> (<span class="id">Hg</span> <span class="id">_</span> <span class="id">hLk</span>) <span class="id">_</span> =&gt; [//|?|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">le_trans</span> (<span class="id">Hg</span> <span class="id">_</span> <span class="id">hLk</span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">under</span> <span class="id">eq_fun</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">mulrC</span>.<br/>
<span class="id">apply</span>: (<span class="id">le_trans</span> (<span class="id">lim_series_norm</span> <span class="id">Cng</span>)).<br/>
<span class="id"><a href="mathcomp.analysis.sequences.html#exponential_series.exponential_series_cvg.x">rewrite</a></span> -[<span class="id">_</span> * <span class="id">_</span>](<span class="id">lim_seriesZ</span> <span class="id">_</span> <span class="id">Cf</span>) (<span class="id">lim_series_le</span> <span class="id">Cng</span> <span class="id">Ckf</span>) // =&gt; <span class="id">n</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> [<span class="id">leRHS</span>]<span class="id">mulrC</span>; <span class="id">apply</span>: <span class="id">Hg</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">series_linear</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">exponential_series</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id">R</span> : <span class="id">realType</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">x</span> : <span class="id">R</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">exp_coeff</span> <span class="id">x</span> := [<span class="id">sequence</span> <span class="id">x</span> ^+ <span class="id">n</span> / <span class="id">n</span>`!%:<span class="id">R</span>]<span class="id">_n</span>.<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id">exp</span> := <span class="id">exp_coeff</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">exp_coeff_ge0</span> <span class="id">x</span> <span class="id">n</span> : 0 &lt;= <span class="id">x</span> -&gt; 0 &lt;= <span class="id">exp</span> <span class="id">x</span> <span class="id">n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof112')">Proof.</span></div>
<div class="proofscript" id="proof112">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x0</span>; <span class="id">rewrite</span> /<span class="id">exp</span> <span class="id">divr_ge0</span> // <span class="id">exprn_ge0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">series_exp_coeff0</span> <span class="id">n</span> : <span class="id">series</span> (<span class="id">exp</span> 0) <span class="id">n</span>.+1 = 1.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof113')">Proof.</span></div>
<div class="proofscript" id="proof113">
<span class="id">rewrite</span> /<span class="id">series</span> /= <span class="id">big_mkord</span> <span class="id">big_ord_recl</span> /= /<span class="id">exp</span> /= <span class="id">expr0n</span> <span class="id">divr1</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big1</span> ?<span class="id">addr0</span> // =&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">expr0n</span> <span class="id">mul0r</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">exponential_series_cvg</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id">x</span> : <span class="id">R</span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id">x0</span> : 0 &lt; <span class="id">x</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">S0</span> <span class="id">N</span> <span class="id">n</span> := (<span class="id">N</span> ^ <span class="id">N</span>)%:<span class="id">R</span> * \<span class="id">sum_</span>(<span class="id">N</span>.+1 &lt;= <span class="id">i</span> &lt; <span class="id">n</span>) (<span class="id">x</span> / <span class="id">N</span>%:<span class="id">R</span>) ^+ <span class="id">i</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">is_cvg_S0</span> <span class="id">N</span> : <span class="id">x</span> &lt; <span class="id">N</span>%:<span class="id">R</span> -&gt; <span class="id">cvg</span> (<span class="id">S0</span> <span class="id">N</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof114')">Proof.</span></div>
<div class="proofscript" id="proof114">
<span class="id">move</span>=&gt; <span class="id">xN</span>; <span class="id">apply</span>: <span class="id">is_cvgZr</span>; <span class="id">rewrite</span> <span class="id">is_cvg_series_restrict</span> <span class="id">exprn_geometric</span>.<br/>
<span class="id">apply</span>/<span class="id">is_cvg_geometric_series</span>; <span class="id">rewrite</span> <span class="id">normrM</span> <span class="id">normfV</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ltr_pdivr_mulr</span> ?<span class="id">mul1r</span> !<span class="id">ger0_norm</span> // 1?<span class="id">ltW</span> // (<span class="id">lt_trans</span> <span class="id">x0</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">S0_ge0</span> <span class="id">N</span> <span class="id">n</span> : 0 &lt;= <span class="id">S0</span> <span class="id">N</span> <span class="id">n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof115')">Proof.</span></div>
<div class="proofscript" id="proof115">
<span class="id">rewrite</span> <span class="id">mulr_ge0</span> // ?<span class="id">ler0n</span> //; <span class="id">apply</span>: <span class="id">sumr_ge0</span> =&gt; <span class="id">i</span> <span class="id">_</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">exprn_ge0</span> // <span class="id">divr_ge0</span> // <span class="id">ltW</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">S0_sup</span> <span class="id">N</span> <span class="id">n</span> : <span class="id">x</span> &lt; <span class="id">N</span>%:<span class="id">R</span> -&gt; <span class="id">S0</span> <span class="id">N</span> <span class="id">n</span> &lt;= <span class="id">sup</span> (<span class="id">range</span> (<span class="id">S0</span> <span class="id">N</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof116')">Proof.</span></div>
<div class="proofscript" id="proof116">
<span class="id">move</span>=&gt; <span class="id">xN</span>; <span class="id">apply</span>/<span class="id">sup_upper_bound</span>; [<span class="id">split</span>; [<span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">S0</span> <span class="id">N</span> <span class="id">n</span>), <span class="id">n</span>|]|<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">n</span>].<br/>
<span class="id">rewrite</span> (<span class="id">_</span> : (<span class="id">range</span> <span class="id">_</span>) = [<span class="id">set</span> `|<span class="id">S0</span> <span class="id">N</span> <span class="id">n0</span>| | <span class="id">n0</span> <span class="kwd">in</span> <span class="id">setT</span>]).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">cvg_has_ub</span> (<span class="id">is_cvg_S0</span> <span class="id">xN</span>).<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span>=&gt; <span class="id">y</span>; <span class="id">split</span>=&gt; -[<span class="id">z</span> <span class="id">_</span> &lt;-]; <span class="kwd">exists</span> <span class="id">z</span>; <span class="id">rewrite</span> ?<span class="id">ger0_norm</span> ?<span class="id">S0_ge0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">S1</span> <span class="id">N</span> <span class="id">n</span> := \<span class="id">sum_</span>(<span class="id">N</span>.+1 &lt;= <span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">exp</span> <span class="id">x</span> <span class="id">i</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">incr_S1</span> <span class="id">N</span> : <span class="id">nondecreasing_seq</span> (<span class="id">S1</span> <span class="id">N</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof117')">Proof.</span></div>
<div class="proofscript" id="proof117">
<span class="id">apply</span>/<span class="id">nondecreasing_seqP</span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> /<span class="id">S1</span>.<br/>
<span class="id">have</span> [<span class="id">nN</span>|<span class="id">Nn</span>] := <span class="id">leqP</span> <span class="id">n</span> <span class="id">N</span>; <span class="id"><a href="mathcomp.analysis.reals.html#floor">first</a></span> <span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id">big_geq</span> // (<span class="id">leq_trans</span> <span class="id">nN</span>).<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big_nat_recr</span>//= <span class="id">ler_addl</span> <span class="id">exp_coeff_ge0</span> // <span class="id">ltW</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">S1_sup</span> <span class="id">N</span> : <span class="id">x</span> &lt; <span class="id">N</span>%:<span class="id">R</span> -&gt; <span class="id">ubound</span> (<span class="id">range</span> (<span class="id"><a href="mathcomp.analysis.sequences.html#series">S1</a></span> <span class="id">N</span>)) (<span class="id"><a href="mathcomp.analysis.sequences.html#exp">sup</a></span> (<span class="id">range</span> (<span class="id">S0</span> <span class="id">N</span>))).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof118')">Proof.</span></div>
<div class="proofscript" id="proof118">
<span class="id">move</span>=&gt; <span class="id">xN</span> <span class="id">_</span> [<span class="id">n</span> <span class="id">_</span> &lt;-]; <span class="id">rewrite</span> (<span class="id">le_trans</span> <span class="id">_</span> (<span class="id">S0_sup</span> <span class="id">n</span> <span class="id">xN</span>)) // /<span class="id">S0</span> <span class="id">big_distrr</span> /=.<br/>
<span class="id">have</span> <span class="id">N_gt0</span> := <span class="id">lt_trans</span> <span class="id">x0</span> <span class="id">xN</span>; <span class="id">apply</span>: <span class="id">ler_sum</span> =&gt; <span class="id">i</span> <span class="id">_</span>.<br/>
<span class="id">have</span> [<span class="id">Ni</span>|<span class="id">iN</span>] := <span class="id"><a href="mathcomp.analysis.sequences.html#exp">ltnP</a></span> <span class="id">N</span> <span class="id">i</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">expr_div_n</span> <span class="id">mulrCA</span> <span class="id">ler_pmul2l</span> ?<span class="id">exprn_gt0</span>// (@<span class="id"><a href="mathcomp.analysis.normedtype.html#cvgrPdist_lt">le_trans</a></span> <span class="id">_</span> <span class="id">_</span> 1) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">invf_le1</span>// ?<span class="id">ler1n</span> ?<span class="id">ltr0n</span> // <span class="id">fact_gt0</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">natrX</span> -<span class="id">expfB_cond</span> ?(<span class="id">negPf</span> (<span class="id">lt0r_neq0</span> <span class="id">N_gt0</span>))//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">exprn_ege1</span> // <span class="id">ler1n</span>; <span class="id">case</span>: (<span class="id">N</span>) <span class="id">xN</span> <span class="id">x0</span>; <span class="id">case</span>: <span class="id">ltrgt0P</span>.<br/>
<span class="id">rewrite</span> /<span class="id">exp</span> <span class="id">expr_div_n</span> /= (<span class="id">fact_split</span> <span class="id">Ni</span>) <span class="id">mulrCA</span> <span class="id">ler_pmul2l</span> ?<span class="id">exprn_gt0</span>// <span class="id">natrX</span>.<br/>
<span class="id">rewrite</span> -<span class="id">invf_div</span> -<span class="id">expfB</span> // <span class="id">lef_pinv</span> ?<span class="id">qualifE</span> ?<span class="id">exprn_gt0</span>//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">ltr0n</span> <span class="id">muln_gt0</span> <span class="id">fact_gt0</span>/= <span class="id">big_seq</span> <span class="id">big_mkcond</span>/= <span class="id">prodn_gt0</span>// =&gt; <span class="id">j</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>: <span class="id">ifPn</span>=&gt;//; <span class="id">rewrite</span> <span class="id">mem_index_iota</span> =&gt; /<span class="id">andP</span>[+ <span class="id">_</span>]; <span class="id">exact</span>: <span class="id">leq_ltn_trans</span>.<br/>
<span class="id">rewrite</span> <span class="id">big_nat_rev</span>/= -<span class="id">natrX</span> <span class="id">ler_nat</span> -<span class="id">prod_nat_const_nat</span> <span class="id">big_add1</span> /= <span class="id">big_ltn</span> //.<br/>
<span class="id">rewrite</span> <span class="id">leq_mul</span>//; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">leq_trans</span> (<span class="id">fact_geq</span> <span class="id">_</span>))// <span class="id">leq_pmull</span>.<br/>
<span class="id">under</span> [<span class="kwd">in</span> <span class="id">X</span> <span class="kwd">in</span> (<span class="id">_</span> &lt;= <span class="id">X</span>)%<span class="id">N</span>]<span class="id">eq_bigr</span> <span class="id">do</span> <span class="id">rewrite</span> 2!<span class="id">addSn</span> 2!<span class="id">subSS</span>.<br/>
<span class="id">rewrite</span> !<span class="id">big_seq</span>/=; <span class="id">elim</span>/<span class="id">big_ind2</span> : <span class="id">_</span> =&gt; //; <span class="id">first</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; *; <span class="id">exact</span>: <span class="id">leq_mul</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">j</span>; <span class="id">rewrite</span> <span class="id">mem_index_iota</span> =&gt; /<span class="id">andP</span>[<span class="id">_</span> <span class="id">ji</span>].<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">addnBA</span>// ?<span class="id">leq_addr</span>// <span class="id">ltnW</span>// <span class="id">ltnW</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_cvg_series_exp_coeff_pos</span> : <span class="id">cvg</span> (<span class="id">series</span> (<span class="id">exp</span> <span class="id">x</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof119')">Proof.</span></div>
<div class="proofscript" id="proof119">
<span class="id">rewrite</span> /<span class="id">series</span>; <span class="id">near</span> \<span class="id">oo</span> =&gt; <span class="id">N</span>; <span class="id">have</span> <span class="id">xN</span> : <span class="id">x</span> &lt; <span class="id">N</span>%:<span class="id">R</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -(@<span class="id">is_cvg_series_restrict</span> <span class="id">N</span>.+1).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: (<span class="id">nondecreasing_is_cvgn</span> (<span class="id">incr_S1</span> <span class="id">N</span>)); <span class="id">eexists</span>; <span class="id">apply</span>: <span class="id">S1_sup</span>.<br/>
<span class="id">near</span>: <span class="id">N</span>; <span class="kwd">exists</span> (<span class="id">absz</span> (<span class="id">floor</span> <span class="id">x</span>)).+1 =&gt; // <span class="id">m</span>; <span class="id">rewrite</span> /<span class="id">mkset</span> -(@<span class="id">ler_nat</span> <span class="id">R</span>).<br/>
<span class="id">move</span>/<span class="id">lt_le_trans</span> =&gt; -&gt; //; <span class="id">rewrite</span> (<span class="id">lt_le_trans</span> (<span class="id">lt_succ_floor</span> <span class="id"><a name="nat_nondecreasing_is_cvg">x</a></span>)) // -<span class="id">addn1</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">natrD</span> <span class="id">ler_add2r</span> -(@<span class="id">gez0_abs</span> (<span class="id">floor</span> <span class="id">x</span>)) ?<span class="id">floor_ge0</span>// <span class="id">ltW</span>.<br/>
<span class="id">Unshelve</span>. <span class="id"><a href="mathcomp.analysis.topology.html#cvg">all</a></span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">exponential_series_cvg</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">normed_series_exp_coeff</span> <span class="id">x</span> : [<span class="id">normed</span> <span class="id">series</span> (<span class="id">exp</span> <span class="id">x</span>)] = <span class="id">series</span> (<span class="id">exp</span> `|<span class="id">x</span>|).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof120')">Proof.</span></div>
<div class="proofscript" id="proof120">
<span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">n</span> /=; <span class="id">apply</span>: <span class="id">eq_bigr</span> =&gt; <span class="id">k</span> <span class="id">_</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">exp</span> <span class="id">normrM</span> <span class="id">normfV</span> <span class="id">normrX</span> [`|<span class="id">_</span>%:<span class="id">R</span>|]@<span class="id"><a href="mathcomp.classical.boolp.html#funext">ger0_norm</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_cvg_series_exp_coeff</span> <span class="id">x</span> : <span class="id">cvg</span> (<span class="id">series</span> (<span class="id">exp</span> <span class="id">x</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof121')">Proof.</span></div>
<div class="proofscript" id="proof121">
<span class="id">have</span> [-&gt;|<span class="id">x0</span>] := <span class="id">eqVneq</span> <span class="id">x</span> 0.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">cvg_ex</span>; <span class="kwd">exists</span> 1; <span class="id">apply</span>/<span class="id">cvgrPdist_lt</span> =&gt; // =&gt; <span class="id">_</span>/<span class="id">posnumP</span>[<span class="id">e</span>].<br/>
&nbsp;&nbsp;<span class="id">near</span>=&gt; <span class="id">n</span>; <span class="id">have</span> [<span class="id">m</span> -&gt;] : <span class="kwd">exists</span> <span class="id">m</span>, <span class="id">n</span> = <span class="id">m</span>.+1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">n</span>.-1; <span class="id">rewrite</span> <span class="id">prednK</span> //; <span class="id">near</span>: <span class="id">n</span>; <span class="kwd">exists</span> 1%<span class="id">N</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">series_exp_coeff0</span> <span class="id">subrr</span> <span class="id">normr0</span>.<br/>
<span class="id">apply</span>: <span class="id">normed_cvg</span>; <span class="id">rewrite</span> <span class="id">normed_series_exp_coeff</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">is_cvg_series_exp_coeff_pos</span>; <span class="id">rewrite</span> <span class="id">normr_gt0</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_exp_coeff</span> <span class="id">x</span> : <span class="id">exp</span> <span class="id">x</span> --&gt; (0 : <span class="id"><a href="mathcomp.classical.classical_sets.html#range">R</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof122')">Proof.</span></div>
<div class="proofscript" id="proof122">
 <span class="id">exact</span>: (<span class="id">cvg_series_cvg_0</span> (@<span class="id">is_cvg_series_exp_coeff</span> <span class="id">x</span>)). Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">exponential_series</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">expR</span> {<span class="id">R</span> : <span class="id">realType</span>} (<span class="id">x</span> : <span class="id">R</span>) : <span class="id">R</span> := <span class="id">lim</span> (<span class="id">series</span> (<span class="id">exp_coeff</span> <span class="id">x</span>)).<br/>
<br/>
<pre class="ssrdoc">
Sequences of natural numbers 
</pre>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__nat_dvg_real</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">u_</span> : <span class="id">nat</span> ^<span class="id">nat</span>) : <span class="id">u_</span> --&gt; \<span class="id">oo</span> -&gt;<br/>
&nbsp;&nbsp;([<span class="id">sequence</span> (<span class="id">u_</span> <span class="id">n</span>)%:<span class="id">R</span> : <span class="id">R</span>^<span class="id">o</span>]<span class="id">_n</span> --&gt; +<span class="id">oo</span>)%<span class="id">R</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof123')">Proof.</span></div>
<div class="proofscript" id="proof123">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; ?; <span class="id">apply</span>/<span class="id">cvgrnyP</span>. Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id"><a href="mathcomp.analysis.topology.html#cvg">analysis</a></span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">cvgrnyP</span>` <span class="id">and</span> <span class="id">generalized</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">nat_dvg_real</span> := <span class="id">__deprecated__nat_dvg_real</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__nat_cvgPpinfty</span> (<span class="id">u</span> : <span class="id">nat</span>^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">u</span> --&gt; \<span class="id">oo</span> &lt;-&gt; <span class="kwd">forall</span> <span class="id">A</span>, \<span class="kwd">forall</span> <span class="id">n</span> \<span class="id">near</span> \<span class="id">oo</span>, (<span class="id">A</span> &lt;= <span class="id">u</span> <span class="id">n</span>)%<span class="id">N</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof124')">Proof.</span></div>
<div class="proofscript" id="proof124">
 <span class="id">exact</span>: <span class="id">cvgnyPge</span>. Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">cvgnyPge</span>` <span class="id">and</span> <span class="id">generalized</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">nat_cvgPpinfty</span>:= <span class="id">__deprecated__nat_cvgPpinfty</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">nat_nondecreasing_is_cvg</span> (<span class="id">u_</span> : <span class="id">nat</span>^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span> <span class="id">u_</span> -&gt; <span class="id">has_ubound</span> (<span class="id">range</span> <span class="id">u_</span>) -&gt; <span class="id">cvg</span> <span class="id">u_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof125')">Proof.</span></div>
<div class="proofscript" id="proof125">
<span class="id">move</span>=&gt; <span class="id">u_nd</span> [<span class="id">l</span> <span class="id">ul</span>].<br/>
<span class="id">suff</span> [<span class="id">N</span> <span class="id">Nu</span>] : <span class="kwd">exists</span> <span class="id">N</span>, <span class="kwd">forall</span> <span class="id">n</span>, (<span class="id">n</span> &gt;= <span class="id">N</span>)%<span class="id">N</span> -&gt; <span class="id">u_</span> <span class="id">n</span> = <span class="id">u_</span> <span class="id">N</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">cvg_ex</span>; <span class="kwd">exists</span> (<span class="id">u_</span> <span class="id">N</span>); <span class="id">rewrite</span> -(<span class="id">cvg_shiftn</span> <span class="id">N</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">X</span> --&gt; <span class="id">_</span>](<span class="id">_</span> : <span class="id">_</span> = <span class="id">cst</span> (<span class="id">u_</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">N</a></span>))//; <span class="id">first</span> <span class="id"><a href="mathcomp.analysis.topology.html#cvg">exact</a></span>: <span class="id">cvg_cst</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">n</span> /=; <span class="id">rewrite</span> <span class="id">Nu</span>// <span class="id">leq_addl</span>.<br/>
<span class="id">apply</span>/<span class="id">not_existsP</span> =&gt; <span class="id">hu</span>.<br/>
<span class="id">have</span> {<span class="id">hu</span>}/<span class="id">choice</span>[<span class="id">f</span> <span class="id">Hf</span>] : <span class="kwd">forall</span> <span class="id">x</span>, (<span class="kwd">exists</span> <span class="id">n</span>, <span class="id">x</span> &lt;= <span class="id">n</span> /\ <span class="id">u_</span> <span class="id">n</span> &gt; <span class="id">u_</span> <span class="id">x</span>)%<span class="id">N</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">x</span>; <span class="id">have</span> /<span class="id">existsNP</span>[<span class="id">N</span> /<span class="id">not_implyP</span>[<span class="id">xN</span> <span class="id">Nx</span>]] := <span class="id">hu</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">N</span>; <span class="id">split</span> =&gt; //; <span class="id">move</span>/<span class="id">eqP</span> : <span class="id">Nx</span>; <span class="id">rewrite</span> <span class="id">neq_lt</span> =&gt; /<span class="id">orP</span>[|//].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>/<span class="id">u_nd</span> : <span class="id">xN</span>; <span class="id">rewrite</span> <span class="id">le_eqVlt</span> =&gt; /<span class="id">predU1P</span>[-&gt;|//].<br/>
<span class="id">have</span> <span class="id">uf</span> : <span class="kwd">forall</span> <span class="id">x</span>, (<span class="id">x</span> &lt; <span class="id">u_</span> (<span class="id">iter</span> <span class="id">x</span>.+1 <span class="id">f</span> <span class="id">O</span>))%<span class="id">N</span>.<br/>
&nbsp;&nbsp;<span class="id">elim</span>=&gt; /= [|<span class="id">i</span> <span class="id">ih</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">have</span> := <span class="id">Hf</span> <span class="id">O</span> =&gt; -[<span class="id">_</span>]; <span class="id">exact</span>: <span class="id">leq_trans</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">have</span> := <span class="id">Hf</span> (<span class="id">f</span> (<span class="id">iter</span> <span class="id">i</span> <span class="id">f</span> <span class="id">O</span>)) =&gt; -[<span class="id">_</span>]; <span class="id">exact</span>: <span class="id">leq_trans</span>.<br/>
<span class="id">have</span> /<span class="id"><a href="mathcomp.analysis.topology.html#lim">ul</a></span> : <span class="id">range</span> <span class="id">u_</span> (<span class="id">u_</span> (<span class="id">iter</span> <span class="id">l</span>.+1 <span class="id">f</span> <span class="id">O</span>)) <span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">iter</span> <span class="id">l</span>.+1 <span class="id">f</span> <span class="id">O</span>).<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">leNgt</span> =&gt; /<span class="id">negP</span>; <span class="id">apply</span>; <span class="id">rewrite</span> <span class="id">ltEnat</span> //=; <span class="id">exact</span>: <span class="id">uf</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">nseries</span> (<span class="id">u</span> : <span class="id">nat</span>^<span class="id">nat</span>) := (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(0 &lt;= <span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">u</span> <span class="id">k</span>)%<span class="id">N</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">le_nseries</span> (<span class="id">u</span> : <span class="id">nat</span>^<span class="id">nat</span>) : {<span class="id">homo</span> <span class="id">nseries</span> <span class="id">u</span> : <span class="id">a</span> <span class="id">b</span> / <span class="id">a</span> &lt;= <span class="id">b</span>}%<span class="id">N</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof126')">Proof.</span></div>
<div class="proofscript" id="proof126">
<span class="id">move</span>=&gt; <span class="id">a</span> <span class="id">b</span> <span class="id">ab</span>; <span class="id">rewrite</span> /<span class="id">nseries</span> [<span class="kwd">in</span> <span class="id">X</span> <span class="kwd">in</span> (<span class="id">_</span> &lt;= <span class="id">X</span>)%<span class="id">N</span>]/<span class="id">index_iota</span> <span class="id"><a href="mathcomp.analysis.topology.html#lim">subn0</a></span>.<br/>
<span class="id">rewrite</span> -[<span class="kwd">in</span> <span class="id">X</span> <span class="kwd">in</span> (<span class="id">_</span> &lt;= <span class="id">X</span>)%<span class="id">N</span>](<span class="id">subnKC</span> <span class="id">ab</span>) <span class="id">iotaD</span> <span class="id">big_cat</span>/= <span class="id">add0n</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">index_iota</span> <span class="id">subn0</span> <span class="id">leq_addr</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_nseries_near</span> (<span class="id">u</span> : <span class="id">nat</span>^<span class="id">nat</span>) : <span class="id">cvg</span> (<span class="id">nseries</span> <span class="id">u</span>) -&gt;<br/>
&nbsp;&nbsp;\<span class="kwd">forall</span> <span class="id">n</span> \<span class="id">near</span> \<span class="id">oo</span>, <span class="id">u</span> <span class="id">n</span> = 0%<span class="id">N</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof127')">Proof.</span></div>
<div class="proofscript" id="proof127">
<span class="id">move</span>=&gt; /<span class="id">cvg_ex</span>[<span class="id">l</span> <span class="id">ul</span>]; <span class="id">have</span> /<span class="id">ul</span>[<span class="id">a</span> <span class="id">_</span> <span class="id">aul</span>] : <span class="id">nbhs</span> <span class="id">l</span> [<span class="id">set</span> <span class="id">l</span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> [<span class="id">set</span> <span class="id">l</span>]; <span class="id">split</span>=&gt; //; <span class="kwd">exists</span> [<span class="id">set</span> <span class="id">l</span>] =&gt; //; <span class="id">rewrite</span> <span class="id">bigcup_set1</span>.<br/>
<span class="id">have</span> /<span class="id">ul</span>[<span class="id">b</span> <span class="id">_</span> <span class="id">bul</span>] : <span class="id">nbhs</span> <span class="id">l</span> [<span class="id">set</span> <span class="id">l</span>.-1; <span class="id">l</span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> [<span class="id">set</span> <span class="id">l</span>]; <span class="id">split</span> =&gt; //; <span class="kwd">exists</span> [<span class="id">set</span> <span class="id">l</span>] =&gt; //; <span class="id">rewrite</span> <span class="id">bigcup_set1</span>.<br/>
<span class="kwd">exists</span> (<span class="id">maxn</span> <span class="id">a</span> <span class="id">b</span>) =&gt; // <span class="id">n</span> /= <span class="id">abn</span>.<br/>
<span class="id"><a name="partial_esum.u_">rewrite</a></span> (<span class="id">_</span> : <span class="id">u</span> = <span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">nseries</span> <span class="id">u</span> <span class="id">n</span>.+1 - <span class="id">nseries</span> <span class="id">u</span> <span class="id">n</span>)%<span class="id">N</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">i</span>; <span class="id">rewrite</span> /<span class="id"><a name="etelescope">nseries</a></span> <span class="id">big_nat_recr</span>//= <span class="id">addnC</span> <span class="id">addnK</span>.<br/>
<span class="id">have</span> /<span class="id">aul</span> -&gt; : (<span class="id">a</span> &lt;= <span class="id">n</span>)%<span class="id">N</span> <span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">leq_trans</span> <span class="id">_</span> <span class="id">abn</span>) // <span class="id">leq_max</span> <span class="id">leqnn</span>.<br/>
<span class="id">have</span> /<span class="id">bul</span>[-&gt;|-&gt;] : (<span class="id">b</span> &lt;= <span class="id">n</span>.+1)%<span class="id">N</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">leqW</span>// (<span class="id">leq_trans</span> <span class="id">_</span> <span class="id">abn</span>)// <span class="id">leq_maxr</span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">subn_eq0</span>// <span class="id"><a href="mathcomp.classical.boolp.html#funeqE">leq_pred</a></span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">subnn</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">dvg_nseries</span> (<span class="id"><a name="eseriesSr">u</a></span> : <span class="id">nat</span>^<span class="id">nat</span>) : ~ <span class="id">cvg</span> (<span class="id">nseries</span> <span class="id">u</span>) -&gt; <span class="id">nseries</span> <span class="id">u</span> --&gt; \<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof128')">Proof.</span></div>
<div class="proofscript" id="proof128">
<span class="id">move</span>=&gt; <span class="id">du</span>; <span class="id">apply</span>: <span class="id">contrapT</span> =&gt; /<span class="id">cvgnyPgt</span>/<span class="id">existsNP</span>[<span class="id">l</span> <span class="id">lu</span>]; <span class="id">apply</span>: <span class="id">du</span>.<br/>
<span class="id">apply</span>: <span class="id">nat_nondecreasing_is_cvg</span> =&gt; //; <span class="id">first</span> <span class="id">exact</span>: <span class="id">le_nseries</span>.<br/>
<span class="kwd">exists</span> <span class="id">l</span> =&gt; <span class="id">_</span> [<span class="id">n</span> <span class="id">_</span> &lt;-]; <span class="id">rewrite</span> <span class="id">leNgt</span>; <span class="id">apply</span>/<span class="id">negP</span> =&gt; <span class="id">lun</span>; <span class="id">apply</span>: <span class="id">lu</span>.<br/>
<span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.sequences.html#eseries">near</a></span> <span class="id">do</span> <span class="id">rewrite</span> (<span class="id">leq_trans</span> <span class="id">lun</span>) ?<span class="id">le_nseries</span>//; <span class="id">apply</span>: <span class="id">nbhs_infty_ge</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<pre class="ssrdoc">
Sequences of extended real numbers 
</pre>
<br/>
<span class="kwd">Notation</span> "\<span class="id">big</span> [ <span class="id">op</span> / <span class="id">idx</span> ]<span class="id">_</span> ( <span class="id">m</span> &lt;= <span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> ) <span class="id">F</span>" :=<br/>
&nbsp;&nbsp;(<span class="id">lim</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; (\<span class="id">big</span>[ <span class="id">op</span> / <span class="id">idx</span> ]<span class="id">_</span>(<span class="id">m</span> &lt;= <span class="id">i</span> &lt; <span class="id">n</span> | <span class="id">P</span>) <span class="id">F</span>))) : <span class="id">big_scope</span>.<br/>
<span class="kwd">Notation</span> "\<span class="id">big</span> [ <span class="id">op</span> / <span class="id">idx</span> ]<span class="id">_</span> ( <span class="id">m</span> &lt;= <span class="id">i</span> &lt;<span class="id">oo</span> ) <span class="id">F</span>" :=<br/>
&nbsp;&nbsp;(<span class="id">lim</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; (\<span class="id">big</span>[ <span class="id">op</span> / <span class="id"><a name="sub_eseries">idx</a></span> ]<span class="id">_</span>(<span class="id">m</span> &lt;= <span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">F</span>))) : <span class="id">big_scope</span>.<br/>
<span class="kwd">Notation</span> "\<span class="id">big</span> [ <span class="id">op</span> / <span class="id">idx</span> ]<span class="id">_</span> ( <span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> ) <span class="id">F</span>" :=<br/>
&nbsp;&nbsp;(<span class="id">lim</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; (\<span class="id">big</span>[ <span class="id">op</span> / <span class="id">idx</span> ]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span> | <span class="id">P</span>) <span class="id">F</span>))) : <span class="id">big_scope</span>.<br/>
<span class="kwd">Notation</span> "\<span class="id">big</span> [ <span class="id">op</span> / <span class="id">idx</span> ]<span class="id">_</span> ( <span class="id">i</span> &lt;<span class="id">oo</span> ) <span class="id">F</span>" :=<br/>
&nbsp;&nbsp;(<span class="id">lim</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; (\<span class="id">big</span>[ <span class="id">op</span> / <span class="id">idx</span> ]<span class="id">_</span>(<span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">F</span>))) : <span class="id">big_scope</span>.<br/>
<br/>
<span class="kwd">Notation</span> "\<span class="id">sum_</span> ( <span class="id">m</span> &lt;= <span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> ) <span class="id">F</span>" :=<br/>
&nbsp;&nbsp;(\<span class="id">big</span>[+%<span class="id">E</span>/0%<span class="id">E</span>]<span class="id">_</span>(<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#addeC">m</a></span> &lt;= <span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span>%<span class="id">B</span>) <span class="id">F</span>%<span class="id">E</span>) : <span class="id">ereal_scope</span>.<br/>
<span class="kwd">Notation</span> "\<span class="id">sum_</span> ( <span class="id">m</span> &lt;= <span class="id">i</span> &lt;<span class="id">oo</span> ) <span class="id">F</span>" :=<br/>
&nbsp;&nbsp;(\<span class="id">big</span>[+%<span class="id">E</span>/0%<span class="id">E</span>]<span class="id">_</span>(<span class="id">m</span> &lt;= <span class="id">i</span> &lt;<span class="id">oo</span>) <span class="id">F</span>%<span class="id">E</span>) : <span class="id">ereal_scope</span>.<br/>
<span class="kwd">Notation</span> "\<span class="id">sum_</span> ( <span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> ) <span class="id">F</span>" :=<br/>
&nbsp;&nbsp;(\<span class="id">big</span>[+%<span class="id">E</span>/0%<span class="id">E</span>]<span class="id">_</span>(0 &lt;= <span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span>%<span class="id">B</span>) <span class="id">F</span>%<span class="id">E</span>) : <span class="id">ereal_scope</span>.<br/>
<span class="kwd">Notation</span> "\<span class="id">sum_</span> ( <span class="id">i</span> &lt;<span class="id">oo</span> ) <span class="id">F</span>" :=<br/>
&nbsp;&nbsp;(\<span class="id">big</span>[+%<span class="id">E</span>/0%<span class="id">E</span>]<span class="id">_</span>(0 &lt;= <span class="id">i</span> &lt;<span class="id">oo</span>) <span class="id">F</span>%<span class="id">E</span>) : <span class="id">ereal_scope</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">partial_esum</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<br/>
<span class="kwd">Variables</span> (<span class="id">R</span> : <span class="id">numDomainType</span>) (<span class="id">u_</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">eseries</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span> := [<span class="id">sequence</span> \<span class="id">sum_</span>(0 &lt;= <span class="id">k</span> &lt; <span class="id"><a name="eseriesD">n</a></span>) <span class="id">u_</span> <span class="id">k</span>]<span class="id">_n</span>.<br/>
<span class="kwd">Definition</span> <span class="id">etelescope</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span> := [<span class="id">sequence</span> <span class="id">u_</span> <span class="id">n</span>.+1 - <span class="id">u_</span> <span class="id">n</span>]<span class="id">_n</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">eseriesEnat</span> : <span class="id">eseries</span> = [<span class="id">sequence</span> \<span class="id">sum_</span>(0 &lt;= <span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">u_</span> <span class="id">k</span>]<span class="id">_n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof129')">Proof.</span></div>
<div class="proofscript" id="proof129">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eseriesEord</span> : <span class="id">eseries</span> = [<span class="id">sequence</span> \<span class="id">sum_</span>(<span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">u_</span> <span class="id">k</span>]<span class="id">_n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof130')">Proof.</span></div>
<div class="proofscript" id="proof130">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> /<span class="id">eseries</span>/= <span class="id">big_mkord</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eseriesSr</span> <span class="id">n</span> : <span class="id">eseries</span> <span class="id">n</span>.+1 = <span class="id">eseries</span> <span class="id">n</span> + <span class="id">u_</span> <span class="id">n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof131')">Proof.</span></div>
<div class="proofscript" id="proof131">
 <span class="kwd">by</span> <span class="id">rewrite</span> !<span class="id">eseriesEord</span>/= <span class="id">big_ord_recr</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eseriesS</span> <span class="id">n</span> : <span class="id">eseries</span> <span class="id">n</span>.+1 = <span class="id">u_</span> <span class="id">n</span> + <span class="id">eseries</span> <span class="id">n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof132')">Proof.</span></div>
<div class="proofscript" id="proof132">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">addeC</span> <span class="id">eseriesSr</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eseriesSB</span> (<span class="id">n</span> : <span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">eseries</span> <span class="id">n</span> \<span class="id">is</span> <span class="id">a</span> <span class="id">fin_num</span> -&gt; <span class="id">eseries</span> <span class="id"><a name="sequences_ereal">n</a></span>.+1 - <span class="id">eseries</span> <span class="id">n</span> = <span class="id">u_</span> <span class="id">n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof133')">Proof.</span></div>
<div class="proofscript" id="proof133">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">enfin</span>; <span class="id">rewrite</span> <span class="id">eseriesS</span> <span class="id">addeK</span>//=. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eseries_addn</span> <span class="id">m</span> <span class="id">n</span> : <span class="id">eseries</span> (<span class="id">n</span> + <span class="id">m</span>)%<span class="id">N</span> = <span class="id">eseries</span> <span class="id">m</span> + \<span class="id"><a href="mathcomp.analysis.topology.html#nbhs">sum_</a></span>(<span class="id">m</span> &lt;= <span class="id">k</span> &lt; <span class="id">n</span> + <span class="id">m</span>) <span class="id">u_</span> <span class="id">k</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof134')">Proof.</span></div>
<div class="proofscript" id="proof134">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eseriesEnat</span>/= -<span class="id">big_cat_nat</span>// <span class="id">leq_addl</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sub_eseries_geq</span> <span class="id">m</span> <span class="id">n</span> : (<span class="id">m</span> &lt;= <span class="id">n</span>)%<span class="id">N</span> -&gt; <span class="id">eseries</span> <span class="id">m</span> \<span class="id">is</span> <span class="id">a</span> <span class="id">fin_num</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">eseries</span> <span class="id">n</span> - <span class="id">eseries</span> <span class="id">m</span> = \<span class="id">sum_</span>(<span class="id">m</span> &lt;= <span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">u_</span> <span class="id">k</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof135')">Proof.</span></div>
<div class="proofscript" id="proof135">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">subnK</span>&lt;- <span class="id">emfin</span>; <span class="id">rewrite</span> <span class="id">eseries_addn</span> <span class="id">addeAC</span> <span class="id">subee</span>// <span class="id">add0e</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sub_eseries</span> <span class="id">m</span> <span class="id">n</span> : <span class="id">eseries</span> <span class="id">m</span> \<span class="id">is</span> <span class="id">a</span> <span class="id">fin_num</span> -&gt; <span class="id">eseries</span> <span class="id">n</span> \<span class="id">is</span> <span class="id">a</span> <span class="id">fin_num</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">eseries</span> <span class="id">n</span> - <span class="id">eseries</span> <span class="id">m</span> = <span class="kwd">if</span> (<span class="id">m</span> &lt;= <span class="id">n</span>)%<span class="id">N</span> <span class="kwd">then</span> \<span class="id">sum_</span>(<span class="id">m</span> &lt;= <span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">u_</span> <span class="id">k</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> - \<span class="id">sum_</span>(<span class="id">n</span> &lt;= <span class="id">k</span> &lt; <span class="id">m</span>) <span class="id">u_</span> <span class="id">k</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof136')">Proof.</span></div>
<div class="proofscript" id="proof136">
<span class="id">move</span>=&gt; ? ?; <span class="id">have</span> [<span class="id">mn</span>|/<span class="id">ltnW</span> <span class="id">mn</span>] := <span class="id">leqP</span> <span class="id">m</span> <span class="id">n</span>; <span class="id">rewrite</span> -<span class="id">sub_eseries_geq</span>//.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">fin_num_oppeD</span> ?<span class="id">fin_numN</span>// <span class="id"><a href="mathcomp.analysis.topology.html#cvg">oppeK</a></span> <span class="id">addeC</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sub_double_eseries</span> <span class="id">n</span> : <span class="id">eseries</span> <span class="id">n</span> \<span class="id">is</span> <span class="id">a</span> <span class="id">fin_num</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">eseries</span> <span class="id">n</span>.*2 - <span class="id">eseries</span> <span class="id">n</span> = \<span class="id">sum_</span>(<span class="id">n</span> &lt;= <span class="id">k</span> &lt; <span class="id">n</span>.*2) <span class="id">u_</span> <span class="id">k</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof137')">Proof.</span></div>
<div class="proofscript" id="proof137">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">enfin</span>; <span class="id">rewrite</span> <span class="id">sub_eseries_geq</span>// -<span class="id">addnn</span> <span class="id">leq_addl</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.analysis.sequences.html#__deprecated__ereal_lim_ge">partial_esum</a></span>.<br/>
<br/>
<span class="kwd">Arguments</span> <span class="id">eseries</span> {<span class="id">R</span>} <span class="id">u_</span> <span class="id">n</span> : <span class="id">simpl</span> <span class="id">never</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">etelescope</span> {<span class="id">R</span>} <span class="id">u_</span> <span class="id">n</span> : <span class="id">simpl</span> <span class="id">never</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">series</span>' <span class="id">E</span> ]<span class="id">_</span> <span class="id">n</span>" := (<span class="id">eseries</span> [<span class="id">sequence</span> <span class="id">E</span>%<span class="id">E</span>]<span class="id">_n</span>) : <span class="id">ereal_scope</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">eseries_ops</span>.<br/>
<span class="kwd">Variable</span> (<span class="id">R</span> : <span class="id">numDomainType</span>).<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">eseriesD</span> (<span class="id">f</span> <span class="id">g</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) : <span class="id">eseries</span> (<span class="id">f</span> \+ <span class="id">g</span>) = <span class="id">eseries</span> <span class="id">f</span> \+ <span class="id">eseries</span> <span class="id">g</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof138')">Proof.</span></div>
<div class="proofscript" id="proof138">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">eseries</span> /= <span class="id">funeqE</span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> <span class="id">big_split</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">eseries_ops</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">sequences_ereal_realDomainType</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<span class="kwd">Variable</span> <span class="id">T</span> : <span class="id">realDomainType</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">u</span> : (\<span class="id">bar</span> <span class="id">T</span>)^<span class="id">nat</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">ereal_nondecreasing_oppn</span> <span class="id">u_</span> :<br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span> (-%<span class="id">E</span> \<span class="id">o</span> <span class="id">u_</span>) = <span class="id">nonincreasing_seq</span> <span class="id">u_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof139')">Proof.</span></div>
<div class="proofscript" id="proof139">
<span class="id">rewrite</span> <span class="id">propeqE</span>; <span class="id">split</span> =&gt; <span class="id">ni_u</span> <span class="id">m</span> <span class="id">n</span> <span class="id">mn</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lee_oppr</span> <span class="id">oppeK</span> <span class="id">ni_u</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -(<span class="id">oppeK</span> (<span class="id">u_</span> <span class="id">m</span>)) -<span class="id">lee_oppr</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine">ni_u</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">sequences_ereal_realDomainType</span>.<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">ereal_nondecreasing_oppn</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_nondecreasing_opp</span> := <span class="id">ereal_nondecreasing_oppn</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id">sequences_ereal</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__ereal_cvg_abs0</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">f</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">abse</span> \<span class="id">o</span> <span class="id">f</span> --&gt; <span class="id">nbhs</span> 0 -&gt; <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">f</a></span> --&gt; 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof140')">Proof.</span></div>
<div class="proofscript" id="proof140">
 <span class="kwd">by</span> <span class="id">move</span>/<span class="id">cvg_abse0P</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="mathcomp.classical.boolp.html#pselect">__deprecated__ereal_cvg_ge0</a></span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">f</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) (<span class="id">a</span> : \<span class="id">bar</span> <span class="id">R</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, 0 &lt;= <span class="id">f</span> <span class="id">n</span>) -&gt; <span class="id">f</span> --&gt; <span class="id">a</span> -&gt; 0 &lt;= <span class="id">a</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof141')">Proof.</span></div>
<div class="proofscript" id="proof141">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">f_ge0</span>; <span class="id">apply</span>: <span class="id">cvge_ge</span>; <span class="id">apply</span>: <span class="id">nearW</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__ereal_lim_ge</span> (<span class="id"><a href="mathcomp.analysis.ereal.html#ereal_sup">R</a></span> : <span class="id">realFieldType</span>) <span class="id">x</span> (<span class="id">u_</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) : <span class="id">cvg</span> <span class="id"><a href="mathcomp.analysis.sequences.html#cvg_shiftn">u_</a></span> -&gt;<br/>
&nbsp;&nbsp;(\<span class="kwd">forall</span> <span class="id">n</span> \<span class="id">near</span> \<span class="id">oo</span>, <span class="id">x</span> &lt;= <span class="id">u_</span> <span class="id">n</span>) -&gt; <span class="id">x</span> &lt;= <span class="id">lim</span> <span class="id">u_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof142')">Proof.</span></div>
<div class="proofscript" id="proof142">
 <span class="id">exact</span>: <span class="id">lime_ge</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__ereal_lim_le</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) <span class="id">x</span> (<span class="id">u_</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) : <span class="id">cvg</span> <span class="id">u_</span> -&gt;<br/>
&nbsp;&nbsp;(\<span class="kwd">forall</span> <span class="id">n</span> \<span class="id">near</span> \<span class="id">oo</span>, <span class="id">u_</span> <span class="id">n</span> &lt;= <span class="id">x</span>) -&gt; <span class="id">lim</span> <span class="id">u_</span> &lt;= <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof143')">Proof.</span></div>
<div class="proofscript" id="proof143">
 <span class="id">exact</span>: <span class="id">lime_le</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__dvg_ereal_cvg</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">u_</span> : <span class="id">R</span> ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">u_</span> --&gt; +<span class="id">oo</span>%<span class="id">R</span> -&gt; [<span class="id">sequence</span> (<span class="id">u_</span> <span class="id">n</span>)%:<span class="id">E</span>]<span class="id">_n</span> --&gt; +<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof144')">Proof.</span></div>
<div class="proofscript" id="proof144">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">cvgeryP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__ereal_cvg_real</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">f</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) <span class="id">a</span> :<br/>
&nbsp;&nbsp;{<span class="id">near</span> \<span class="id">oo</span>, <span class="kwd">forall</span> <span class="id">x</span>, <span class="id">f</span> <span class="id">x</span> \<span class="id">is</span> <span class="id">a</span> <span class="id">fin_num</span>} /\<br/>
&nbsp;&nbsp;(<span class="id">fine</span> \<span class="id">o</span> <span class="id">f</span> --&gt; <span class="id">a</span>) &lt;-&gt; <span class="id">f</span> --&gt; <span class="id">a</span>%:<span class="id">E</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof145')">Proof.</span></div>
<div class="proofscript" id="proof145">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">fine_cvgP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">ereal_nondecreasing_cvgn</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">u_</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span> <span class="id">u_</span> -&gt; <span class="id">u_</span> --&gt; <span class="id">ereal_sup</span> (<span class="id">range</span> <span class="id">u_</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof146')">Proof.</span></div>
<div class="proofscript" id="proof146">
<span class="id">move</span>=&gt; <span class="id">nd_u_</span>; <span class="id">set</span> <span class="id">S</span> := <span class="id">u_</span> @` <span class="id">setT</span>; <span class="id">set</span> <span class="id">l</span> := <span class="id">ereal_sup</span> <span class="id">S</span>.<br/>
<span class="id">have</span> [<span class="id">Spoo</span>|<span class="id">Spoo</span>] := <span class="id">pselect</span> (<span class="id">S</span> +<span class="id">oo</span>).<br/>
&nbsp;&nbsp;<span class="id">have</span> [<span class="id">N</span> <span class="id">Nu</span>] : <span class="kwd">exists</span> <span class="id">N</span>, <span class="kwd">forall</span> <span class="id">n</span>, (<span class="id">n</span> &gt;= <span class="id">N</span>)%<span class="id">nat</span> -&gt; <span class="id">u_</span> <span class="id">n</span> = +<span class="id">oo</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case</span>: <span class="id">Spoo</span> =&gt; <span class="id">N</span> <span class="id">_</span> <span class="id">uNoo</span>; <span class="kwd">exists</span> <span class="id">N</span> =&gt; <span class="id">n</span> <span class="id">Nn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>: (<span class="id">nd_u_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Nn</span>); <span class="id">rewrite</span> <span class="id">uNoo</span> <span class="id">leye_eq</span> =&gt; /<span class="id">eqP</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> -&gt; : <span class="id">l</span> = +<span class="id">oo</span> <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">l</span> /<span class="id">ereal_sup</span>; <span class="id">exact</span>: <span class="id">supremum_pinfty</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -(<span class="id">cvg_shiftn</span> <span class="id">N</span>); <span class="id">set</span> <span class="id">f</span> := (<span class="id">X</span> <span class="kwd">in</span> <span class="id">X</span> --&gt; <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">_</span> : <span class="id">f</span> = <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fin_numE">cst</a></span> +<span class="id">oo</span>); <span class="id">first</span> <span class="id">exact</span>: <span class="id">cvg_cst</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> /<span class="id">f</span> /= <span class="id">Nu</span> // <span class="id">leq_addl</span>.<br/>
<span class="id">have</span> [/<span class="id">funext</span> <span class="id">Snoo</span>|<span class="id">Snoo</span>] := <span class="id">pselect</span> (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">u_</span> <span class="id">n</span> = -<span class="id">oo</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> /<span class="id">l</span> (<span class="id">_</span> : <span class="id">S</span> = [<span class="id">set</span> -<span class="id">oo</span>]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.sequences.html#cvg_shiftn">ereal_sup1</a></span> <span class="id">Snoo</span>; <span class="id">exact</span>: <span class="id">cvg_cst</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span> =&gt; [<span class="id">_</span> [<span class="id">n</span> <span class="id">_</span>] &lt;- /[!<span class="id">Snoo</span>]//|<span class="id">_</span> -&gt;].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">S</span> <span class="id">Snoo</span>; <span class="kwd">exists</span> 0%<span class="id">N</span>.<br/>
<span class="id">have</span> [/<span class="id">ereal_sup_ninfty</span> <span class="id">loo</span>|<span class="id">lnoo</span>] := <span class="id">eqVneq</span> <span class="id">l</span> -<span class="id">oo</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">exfalso</span>; <span class="id">apply</span>: <span class="id">Snoo</span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> (<span class="id">loo</span> (<span class="id">u_</span> <span class="id">n</span>))//; <span class="kwd">exists</span> <span class="id">n</span>.<br/>
<span class="id">have</span> {<span class="id">Snoo</span>}[<span class="id">N</span> <span class="id">Snoo</span>] : <span class="kwd">exists</span> <span class="id">N</span>, <span class="kwd">forall</span> <span class="id">n</span>, (<span class="id">n</span> &gt;= <span class="id">N</span>)%<span class="id">N</span> -&gt; <span class="id">u_</span> <span class="id">n</span> != -<span class="id">oo</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>/<span class="id">existsNP</span> : <span class="id">Snoo</span> =&gt; [<span class="id">m</span> /<span class="id">eqP</span>].<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">neq_lt</span> =&gt; /<span class="id">orP</span>[|<span class="id">umoo</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ltNge</span> <span class="id">leNye</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">m</span> =&gt; <span class="id">k</span> <span class="id">mk</span>; <span class="id">rewrite</span> <span class="id">gt_eqF</span>// (<span class="id">lt_le_trans</span> <span class="id">umoo</span>)// <span class="id">nd_u_</span>.<br/>
<span class="id">have</span> <span class="id">u_fin_num</span> <span class="id">n</span> : (<span class="id">n</span> &gt;= <span class="id">N</span>)%<span class="id">N</span> -&gt; <span class="id">u_</span> <span class="id">n</span> \<span class="id">is</span> <span class="id">a</span> <span class="id">fin_num</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">Nn</span>; <span class="id">rewrite</span> <span class="id">fin_numE</span> <span class="id">Snoo</span>//=; <span class="id">apply</span>: <span class="id">contra_notN</span> <span class="id">Spoo</span> =&gt; /<span class="id">eqP</span> <span class="id">unpoo</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">n</span>.<br/>
<span class="id">have</span> [{<span class="id">lnoo</span>}<span class="id">loo</span>|<span class="id">lpoo</span>] := <span class="id">eqVneq</span> <span class="id">l</span> +<span class="id">oo</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">loo</span>; <span class="id">apply</span>/<span class="id">cvgeyPge</span> =&gt; <span class="id">M</span>.<br/>
&nbsp;&nbsp;<span class="id">have</span> /<span class="id">ereal_sup_gt</span>[<span class="id">_</span> [<span class="id">n</span> <span class="id">_</span>] &lt;- <span class="id">Mun</span>] : <span class="id">M</span>%:<span class="id">E</span> &lt; <span class="id">l</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">loo</span>// <span class="id">ltry</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">n</span> =&gt; // <span class="id">m</span> /= <span class="id">nm</span>; <span class="id">rewrite</span> (<span class="id">le_trans</span> (<span class="id">ltW</span> <span class="id">Mun</span>))// <span class="id">nd_u_</span>.<br/>
<span class="id">have</span> <span class="id">l_fin_num</span> : <span class="id">l</span> \<span class="id">is</span> <span class="id">a</span> <span class="id">fin_num</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">fin_numE</span> <span class="id">lpoo</span> <span class="id">lnoo</span>.<br/>
<span class="id">rewrite</span> -(@<span class="id">fineK</span> <span class="id">_</span> <span class="id">l</span>)//; <span class="id">apply</span>/<span class="id">fine_cvgP</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">near</span>=&gt; <span class="id">n</span>; <span class="id">rewrite</span> <span class="id">fin_numE</span> <span class="id">Snoo</span>/=; <span class="id">last</span> <span class="kwd">by</span> <span class="id">near</span>: <span class="id">n</span>; <span class="kwd">exists</span> <span class="id">N</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">contra_notN</span> <span class="id">Spoo</span> =&gt; /<span class="id">eqP</span> <span class="id">unpoo</span>; <span class="kwd">exists</span> <span class="id">n</span>.<br/>
<span class="id">rewrite</span> -(<span class="id">cvg_shiftn</span> <span class="id">N</span>); <span class="id">set</span> <span class="id">v_</span> := [<span class="id">sequence</span> <span class="id">_</span>]<span class="id">_</span> <span class="id">_</span>.<br/>
<span class="id">have</span> &lt;- : <span class="id">sup</span> (<span class="id">range</span> <span class="id">v_</span>) = <span class="id">fine</span> <span class="id">l</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">EFin_inj</span>; <span class="id">rewrite</span> -<span class="id">ereal_sup_EFin</span>//; <span class="id">last</span> 2 <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">exists</span> (<span class="id">fine</span> <span class="id">l</span>) =&gt; /= <span class="id">_</span> [<span class="id">m</span> <span class="id"><a name="ereal_nonincreasing_cvg">_</a></span> &lt;-]; <span class="id">rewrite</span> /<span class="id">v_</span> /= <span class="id">fine_le</span>//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">u_fin_num</span>// <span class="id">leq_addl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">ereal_sup_ub</span>; <span class="kwd">exists</span> (<span class="id">m</span> + <span class="id">N</span>)%<span class="id">N</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">v_</span> 0%<span class="id">N</span>), 0%<span class="id">N</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">fineK</span>//; <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">eq_le</span>; <span class="id">apply</span>/<span class="id">andP</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">le_ereal_sup</span> =&gt; <span class="id">_</span> /= [<span class="id">_</span> [<span class="id">m</span> <span class="id">_</span>] &lt;-] &lt;-.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">m</span> + <span class="id">N</span>)%<span class="id">N</span> =&gt; //; <span class="id">rewrite</span> /<span class="id">v_</span>/= <span class="id">fineK</span>// <span class="id">u_fin_num</span>// <span class="id">leq_addl</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">ub_ereal_sup</span> =&gt; /= <span class="id">_</span> [<span class="id">m</span> <span class="id">_</span>] &lt;-.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (@<span class="id">le_trans</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">u_</span> (<span class="id">m</span> + <span class="id">N</span>)%<span class="id">N</span>))//; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">nd_u_</span>// <span class="id">leq_addr</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">ereal_sup_ub</span> =&gt; /=; <span class="kwd">exists</span> (<span class="id">fine</span> (<span class="id">u_</span> (<span class="id">m</span> + <span class="id">N</span>)%<span class="id">N</span>)); <span class="id">first</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">m</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">fineK</span>// <span class="id">u_fin_num</span>// <span class="id">leq_addl</span>.<br/>
<span class="id">apply</span>: <span class="id">nondecreasing_cvgn</span>.<br/>
- <span class="id">move</span>=&gt; <span class="id">m</span> <span class="id">n</span> <span class="id">mn</span> /=; <span class="id">rewrite</span> /<span class="id">v_</span> /= <span class="id">fine_le</span> ?<span class="id">u_fin_num</span> ?<span class="id">leq_addl</span>//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">nd_u_</span>// <span class="id">leq_add2r</span>.<br/>
- <span class="kwd">exists</span> (<span class="id">fine</span> <span class="id">l</span>) =&gt; /= <span class="id">_</span> [<span class="id">m</span> <span class="id">_</span> &lt;-]; <span class="id">rewrite</span> /<span class="id">v_</span> /= <span class="id">fine_le</span>//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">u_fin_num</span>// <span class="id">leq_addl</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">ereal_sup_ub</span>; <span class="kwd">exists</span> (<span class="id">m</span> + <span class="id">N</span>)%<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">N</a></span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">ereal_nondecreasing_is_cvgn</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">u_</span> : (\<span class="id">bar</span> <span class="id">R</span>) ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span> <span class="id">u_</span> -&gt; <span class="id">cvg</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lee_sum_nneg_natr">u_</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof147')">Proof.</span></div>
<div class="proofscript" id="proof147">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; ?; <span class="id">apply</span>/<span class="id">cvg_ex</span>; <span class="id">eexists</span>; <span class="id"><a name="eseries_cond">exact</a></span>: <span class="id">ereal_nondecreasing_cvgn</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">ereal_nonincreasing_cvgn</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">u_</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">nonincreasing_seq</span> <span class="id">u_</span> -&gt; <span class="id">u_</span> --&gt; <span class="id">ereal_inf</span> (<span class="id">u_</span> @` <span class="id">setT</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof148')">Proof.</span></div>
<div class="proofscript" id="proof148">
<span class="id">move</span>=&gt; <span class="id">ni_u</span>; <span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">X</span> --&gt; <span class="id">_</span>](<span class="id">_</span> : <span class="id"><a name="eseries_mkcondl">_</a></span> = -%<span class="id">E</span> \<span class="id">o</span> -%<span class="id">E</span> \<span class="id">o</span> <span class="id">u_</span>); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">rewrite</a></span> <span class="id">funeqE</span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> /= <span class="id">oppeK</span>.<br/>
<span class="id">apply</span>: <span class="id">cvgeN</span>.<br/>
<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span> --&gt; <span class="id">X</span>](<span class="id">_</span> : <span class="id">_</span> = <span class="id">ereal_sup</span> (<span class="id">range</span> (-%<span class="id">E</span> \<span class="id">o</span> <span class="id">u_</span>))); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">congr</span> <span class="id">ereal_sup</span>; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">x</span>; <span class="id">split</span>=&gt; [[<span class="id">_</span> [<span class="id">n</span> <span class="id">_</span> &lt;-]] &lt;-|[<span class="id">n</span> <span class="id">_</span>] &lt;-];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> [<span class="kwd">exists</span> <span class="id">n</span> | <span class="kwd">exists</span> (<span class="id">u_</span> <span class="id">n</span>) =&gt; //; <span class="kwd">exists</span> <span class="id">n</span>].<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">ereal_nondecreasing_cvgn</span>; <span class="id">rewrite</span> <span class="id">ereal_nondecreasing_oppn</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">ereal_nonincreasing_is_cvgn</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">u_</span> : (\<span class="id">bar</span> <span class="id">R</span>) ^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">nonincreasing_seq</span> <span class="id">u_</span> -&gt; <span class="id">cvg</span> <span class="id">u_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof149')">Proof.</span></div>
<div class="proofscript" id="proof149">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; ?; <span class="id">apply</span>/<span class="id">cvg_ex</span>; <span class="id">eexists</span>; <span class="id">apply</span>: <span class="id">ereal_nonincreasing_cvgn</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">ereal_nondecreasing_series</span> (<span class="id">R</span> : <span class="id">realDomainType</span>) (<span class="id">u_</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>)<br/>
&nbsp;&nbsp;(<span class="id">P</span> : <span class="id">pred</span> <span class="id">nat</span>) : (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">P</span> <span class="id">n</span> -&gt; 0 &lt;= <span class="id">u_</span> <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(0 &lt;= <span class="id">i</span> &lt; <span class="id">n</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">u_</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof150')">Proof.</span></div>
<div class="proofscript" id="proof150">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">u_ge0</span> <span class="id">n</span> <span class="id">m</span> <span class="id">nm</span>; <span class="id">rewrite</span> <span class="id">lee_sum_nneg_natr</span>// =&gt; <span class="id">k</span> <span class="id">_</span> /<span class="id">u_ge0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eseries_cond</span> {<span class="id">R</span> : <span class="id">numFieldType</span>} (<span class="id">f</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) <span class="id">P</span> <span class="id">N</span> :<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">N</span> &lt;= <span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id"><a name="sequences_ereal.ereal_series.R">f</a></span> <span class="id">i</span> = \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id"><a name="sequences_ereal.ereal_series.f">P</a></span> <span class="id">i</span> &amp;&amp; (<span class="id">N</span> &lt;= <span class="id">i</span>)%<span class="id">N</span>) <span class="id">f</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof151')">Proof.</span></div>
<div class="proofscript" id="proof151">
 <span class="kwd">by</span> <span class="id">congr</span> (<span class="id">lim</span> <span class="id">_</span>); <span class="id">apply</span>: <span class="id">eq_fun</span> =&gt; <span class="id">n</span> /=; <span class="id">apply</span>: <span class="id">big_nat_widenl</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eseries_mkcondl</span> {<span class="id">R</span> : <span class="id">numFieldType</span>} (<span class="id">f</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) <span class="id">P</span> <span class="id"><a href="mathcomp.analysis.topology.html#lim">Q</a></span> :<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span> &amp;&amp; <span class="id">Q</span> <span class="id">i</span>) <span class="id">f</span> <span class="id">i</span> = \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">Q</span> <span class="id">i</span>) <span class="kwd">if</span> <span class="id">P</span> <span class="id">i</span> <span class="kwd">then</span> <span class="id">f</span> <span class="id">i</span> <span class="kwd">else</span> 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof152')">Proof.</span></div>
<div class="proofscript" id="proof152">
 <span class="kwd">by</span> <span class="id">congr</span> (<span class="id">lim</span> <span class="id">_</span>); <span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbAC">n</a></span>; <span class="id">rewrite</span> <span class="id">big_mkcondl</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eseries_mkcondr</span> {<span class="id">R</span> : <span class="id">numFieldType</span>} (<span class="id">f</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) <span class="id">P</span> <span class="id">Q</span> :<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id"><a href="mathcomp.analysis.sequences.html#sequences_ereal.ereal_series.f">oo</a></span> | <span class="id">P</span> <span class="id">i</span> &amp;&amp; <span class="id">Q</span> <span class="id">i</span>) <span class="id">f</span> <span class="id">i</span> = \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) <span class="kwd">if</span> <span class="id">Q</span> <span class="id">i</span> <span class="kwd">then</span> <span class="id">f</span> <span class="id">i</span> <span class="kwd">else</span> 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof153')">Proof.</span></div>
<div class="proofscript" id="proof153">
 <span class="kwd">by</span> <span class="id">congr</span> (<span class="id">lim</span> <span class="id">_</span>); <span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbT">n</a></span>; <span class="id">rewrite</span> <span class="id">big_mkcondr</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eq_eseriesr</span> (<span class="id">R</span> : <span class="id">numFieldType</span>) (<span class="id">f</span> <span class="id">g</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) (<span class="id">P</span> : <span class="id">pred</span> <span class="id">nat</span>) {<span class="id">N</span>} :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id">f</span> <span class="id">i</span> = <span class="id">g</span> <span class="id">i</span>) -&gt;<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id"><a href="mathcomp.analysis.topology.html#lim_cst">N</a></span> &lt;= <span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">f</span> <span class="id">i</span> = \<span class="id">sum_</span>(<span class="id">N</span> &lt;= <span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">g</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof154')">Proof.</span></div>
<div class="proofscript" id="proof154">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">efg</span>; <span class="id">congr</span> (<span class="id">lim</span> <span class="id">_</span>); <span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">n</span>; <span class="id">exact</span>: <span class="id">eq_bigr</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eq_eseriesl</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">P</span> <span class="id">Q</span> : <span class="id">pred</span> <span class="id">nat</span>) (<span class="id">f</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">P</span> =1 <span class="id">Q</span> -&gt; \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">f</span> <span class="id">i</span> = \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">Q</span> <span class="id">i</span>) <span class="id">f</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof155')">Proof.</span></div>
<div class="proofscript" id="proof155">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">efg</span>; <span class="id">congr</span> (<span class="id">lim</span> <span class="id">_</span>); <span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">n</span>; <span class="id">exact</span>: <span class="id">eq_bigl</span>. Qed.</div>
<span class="kwd">Arguments</span> <span class="id">eq_eseriesl</span> {<span class="id">R</span> <span class="id">P</span>} <span class="id">Q</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">ereal_series</span>.<br/>
<span class="kwd">Variables</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">f</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>).<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> <span class="id">P</span> : <span class="id">pred</span> <span class="id">nat</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">ereal_series_cond</span> <span class="id">k</span> <span class="id">P</span> :<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">k</span> &lt;= <span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">f</span> <span class="id">i</span> = \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | (<span class="id">k</span> &lt;= <span class="id">i</span>)%<span class="id">N</span> &amp;&amp; <span class="id">P</span> <span class="id">i</span>) <span class="id">f</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof156')">Proof.</span></div>
<div class="proofscript" id="proof156">
<span class="id">congr</span> (<span class="id">lim</span> <span class="id">_</span>); <span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">n</span>.<br/>
<span class="id">rewrite</span> <span class="id">big_nat_cond</span> (<span class="id">big_nat_widenl</span> <span class="id">k</span> 0%<span class="id">N</span>)//= 2!<span class="id">big_mkord</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">eq_big</span> =&gt; //= <span class="id">i</span>; <span class="id">rewrite</span> <span class="id">andbAC</span> <span class="id">ltn_ord</span> <span class="id">andbT</span> <span class="id">andbb</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">ereal_series</span> <span class="id">k</span> : \<span class="id">sum_</span>(<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#esum_eqy">k</a></span> &lt;= <span class="id">i</span> &lt;<span class="id">oo</span>) <span class="id">f</span> <span class="id">i</span> = \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | (<span class="id">k</span> &lt;= <span class="id">i</span>)%<span class="id">N</span>) <span class="id">f</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof157')">Proof.</span></div>
<div class="proofscript" id="proof157">
<span class="id">rewrite</span> <span class="id">ereal_series_cond</span>; <span class="id">congr</span> (<span class="id">lim</span> <span class="id">_</span>); <span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">n</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">eq_big</span> =&gt; // <span class="id">i</span>; <span class="id">rewrite</span> <span class="id">andbT</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eseries0</span> <span class="id">P</span> : (<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id">f</span> <span class="id">i</span> = 0) -&gt; \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">f</span> <span class="id">i</span> = 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof158')">Proof.</span></div>
<div class="proofscript" id="proof158">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">f0</span>; <span class="id">under</span> <span class="id">eq_fun</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id">big1</span>//; <span class="id">rewrite</span> <span class="id">lim_cst</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eseries_pred0</span> <span class="id">P</span> : <span class="id">P</span> =1 <span class="id">xpred0</span> -&gt; \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">f</span> <span class="id">i</span> = 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof159')">Proof.</span></div>
<div class="proofscript" id="proof159">
<span class="id">move</span>=&gt; <span class="id">P0</span>; <span class="id">rewrite</span> (<span class="id">_</span> : (<span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id">_</span>) = <span class="kwd">fun</span>=&gt; 0) ?<span class="id">lim_cst</span>// <span class="id">funeqE</span> =&gt; <span class="id">n</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big1</span> // =&gt; <span class="id">i</span>; <span class="id">rewrite</span> <span class="id">P0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">ereal_series</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">nneseries_lim_ge</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">u_</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) (<span class="id">P</span> : <span class="id">pred</span> <span class="id">nat</span>) <span class="id">k</span> :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">P</span> <span class="id">n</span> -&gt; 0 &lt;= <span class="id">u_</span> <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(0 &lt;= <span class="id">i</span> &lt; <span class="id">k</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">u_</span> <span class="id">i</span> &lt;= \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">u_</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof160')">Proof.</span></div>
<div class="proofscript" id="proof160">
<span class="id">move</span>/<span class="id">ereal_nondecreasing_series</span>/<span class="id">ereal_nondecreasing_cvgn</span>/<span class="id">cvg_lim</span> =&gt; -&gt; //.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">ereal_sup_ub</span>; <span class="kwd">exists</span> <span class="id">k</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eseries_pinfty</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">u_</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P</span> : <span class="id">pred</span> <span class="id">nat</span>) <span class="id">k</span> : (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">P</span> <span class="id">n</span> -&gt; <span class="id">u_</span> <span class="id">n</span> != -<span class="id">oo</span>) -&gt; <span class="id">P</span> <span class="id">k</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">u_</span> <span class="id">k</span> = +<span class="id">oo</span> -&gt; \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">u_</span> <span class="id">i</span> = +<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof161')">Proof.</span></div>
<div class="proofscript" id="proof161">
<span class="id">move</span>=&gt; <span class="id">uNy</span> <span class="id">Pk</span> <span class="id">uky</span>; <span class="id">apply</span>: <span class="id">lim_near_cst</span> =&gt; //; <span class="id">near</span>=&gt; <span class="id">n</span>.<br/>
<span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">big_mkord</span> <span class="id">esum_eqy</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; /= <span class="id">i</span> <span class="id">Pi</span>; <span class="id">rewrite</span> <span class="id">uNy</span>.<br/>
<span class="id">apply</span>/<span class="id">existsP</span>.<br/>
<span class="id">have</span> <span class="id">kn</span> : (<span class="id">k</span> &lt; <span class="id">n</span>)%<span class="id">N</span> <span class="kwd">by</span> <span class="id">near</span>: <span class="id">n</span>; <span class="kwd">exists</span> <span class="id">k</span>.+1.<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">Ordinal</span> <span class="id">kn</span>) =&gt; /=; <span class="id">rewrite</span> <span class="id">uky</span> <span class="id">eqxx</span> <span class="id">andbT</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a href="mathcomp.analysis.sequences.html#is_cvg_ereal_nneg_natsum_cond">cvg_eseries</a></span>.<br/>
<span class="kwd">Variable</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">u_</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>).<br/>
<span class="kwd">Implicit</span> <span class="kwd">Type</span> <span class="id">P</span> : <span class="id">pred</span> <span class="id">nat</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_cvg_ereal_nneg_natsum_cond</span> <span class="id">m</span> <span class="id">P</span> :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, (<span class="id">m</span> &lt;= <span class="id">n</span>)%<span class="id">N</span> -&gt; <span class="id">P</span> <span class="id">n</span> -&gt; 0 &lt;= <span class="id">u_</span> <span class="id">n</span>) -&gt;<br/>
<span class="id">cvg</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(<span class="id">m</span> &lt;= <span class="id"><a href="mathcomp.analysis.sequences.html#is_cvg_ereal_npos_natsum_cond">i</a></span> &lt; <span class="id">n</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">u_</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof162')">Proof.</span></div>
<div class="proofscript" id="proof162">
<span class="kwd">by</span> <span class="id">move</span>/<span class="id">lee_sum_nneg_natr</span>/<span class="id">ereal_nondecreasing_cvgn</span> =&gt; <span class="id">cu</span>; <span class="id">apply</span>: <span class="id">cvgP</span>; <span class="id">exact</span>: <span class="id">cu</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_cvg_ereal_npos_natsum_cond</span> <span class="id">m</span> <span class="id">P</span> :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, (<span class="id">m</span> &lt;= <span class="id">n</span>)%<span class="id">N</span> -&gt; <span class="id">P</span> <span class="id"><a href="mathcomp.analysis.sequences.html#is_cvg_nneseries_cond">n</a></span> -&gt; <span class="id">u_</span> <span class="id">n</span> &lt;= 0) -&gt;<br/>
&nbsp;&nbsp;<span class="id">cvg</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(<span class="id">m</span> &lt;= <span class="id">i</span> &lt; <span class="id">n</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">u_</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof163')">Proof.</span></div>
<div class="proofscript" id="proof163">
<span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.sequences.html#sequences_ereal.cvg_eseries.u_">move</a></span>/<span class="id">lee_sum_npos_natr</span>/<span class="id">ereal_nonincreasing_cvgn</span> =&gt; <span class="id">cu</span>; <span class="id">apply</span>: <span class="id">cvgP</span>; <span class="id">exact</span>: <span class="id">cu</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_cvg_ereal_nneg_natsum</span> <span class="id">m</span> : (<span class="kwd">forall</span> <span class="id">n</span>, (<span class="id">m</span> &lt;= <span class="id">n</span>)%<span class="id">N</span> -&gt; 0 &lt;= <span class="id">u_</span> <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">cvg</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(<span class="id">m</span> &lt;= <span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">u_</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof164')">Proof.</span></div>
<div class="proofscript" id="proof164">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">u_ge0</span>; <span class="id">apply</span>: <span class="id">is_cvg_ereal_nneg_natsum_cond</span> =&gt; <span class="id">n</span> /<span class="id">u_ge0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_cvg_ereal_npos_natsum</span> <span class="id">m</span> : (<span class="kwd">forall</span> <span class="id">n</span>, (<span class="id">m</span> &lt;= <span class="id">n</span>)%<span class="id">N</span> -&gt; <span class="id">u_</span> <span class="id">n</span> &lt;= 0) -&gt;<br/>
&nbsp;&nbsp;<span class="id">cvg</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(<span class="id">m</span> &lt;= <span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">u_</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof165')">Proof.</span></div>
<div class="proofscript" id="proof165">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">u_le0</span>; <span class="id">apply</span>: <span class="id">is_cvg_ereal_npos_natsum_cond</span> =&gt; <span class="id">n</span> /<span class="id">u_le0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_cvg_nneseries_cond</span> <span class="id">P</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#sume_le0">N</a></span> : (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">P</span> <span class="id">n</span> -&gt; 0 &lt;= <span class="id">u_</span> <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">cvg</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(<span class="id">N</span> &lt;= <span class="id">i</span> &lt; <span class="id">n</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">u_</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof166')">Proof.</span></div>
<div class="proofscript" id="proof166">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">u_ge0</span>; <span class="id">apply</span>: <span class="id">is_cvg_ereal_nneg_natsum_cond</span> =&gt; <span class="id">n</span> <span class="id">_</span>; <span class="id">exact</span>: <span class="id">u_ge0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_cvg_npeseries_cond</span> <span class="id">P</span> <span class="id">N</span> : (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">P</span> <span class="id">n</span> -&gt; <span class="id">u_</span> <span class="id">n</span> &lt;= 0) -&gt;<br/>
&nbsp;&nbsp;<span class="id">cvg</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(<span class="id">N</span> &lt;= <span class="id">i</span> &lt; <span class="id">n</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">u_</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof167')">Proof.</span></div>
<div class="proofscript" id="proof167">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">u_le0</span>; <span class="id">apply</span>: <span class="id">is_cvg_ereal_npos_natsum_cond</span> =&gt; <span class="id">n</span> <span class="id">_</span> /<span class="id">u_le0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_cvg_nneseries</span> <span class="id">P</span> <span class="id">N</span> : (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">P</span> <span class="id">n</span> -&gt; 0 &lt;= <span class="id">u_</span> <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">cvg</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(<span class="id">N</span> &lt;= <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fine">i</a></span> &lt; <span class="id">n</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">u_</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof168')">Proof.</span></div>
<div class="proofscript" id="proof168">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; ?; <span class="id"><a href="mathcomp.classical.classical_sets.html#ubound">exact</a></span>: <span class="id">is_cvg_nneseries_cond</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_cvg_npeseries</span> <span class="id">P</span> <span class="id">N</span> : (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">P</span> <span class="id">n</span> -&gt; <span class="id">u_</span> <span class="id">n</span> &lt;= 0) -&gt;<br/>
&nbsp;&nbsp;<span class="id">cvg</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(<span class="id">N</span> &lt;= <span class="id">i</span> &lt; <span class="id">n</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">u_</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof169')">Proof.</span></div>
<div class="proofscript" id="proof169">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; ?; <span class="id">exact</span>: <span class="id">is_cvg_npeseries_cond</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">nneseries_ge0</span> <span class="id">P</span> <span class="id">N</span> : (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">P</span> <span class="id">n</span> -&gt; 0 &lt;= <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">u_</a></span> <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;0 &lt;= \<span class="id">sum_</span>(<span class="id">N</span> &lt;= <span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">P</a></span> <span class="id">i</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">u_</a></span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof170')">Proof.</span></div>
<div class="proofscript" id="proof170">
<span class="id">move</span>=&gt; <span class="id">u0</span>; <span class="id">apply</span>: (<span class="id">lime_ge</span> (<span class="id">is_cvg_nneseries</span> <span class="id">u0</span>)).<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">nearW</span> =&gt; <span class="id">k</span>; <span class="id">rewrite</span> <span class="id">sume_ge0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">npeseries_le0</span> <span class="id">P</span> <span class="id">N</span> : (<span class="kwd">forall</span> <span class="id">n</span> : <span class="id">nat</span>, <span class="id">P</span> <span class="id">n</span> -&gt; <span class="id">u_</span> <span class="id">n</span> &lt;= 0) -&gt;<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">N</span> &lt;= <span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id"><a href="mathcomp.analysis.topology.html#lim">u_</a></span> <span class="id">i</span> &lt;= 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof171')">Proof.</span></div>
<div class="proofscript" id="proof171">
<span class="id">move</span>=&gt; <span class="id">u0</span>; <span class="id">apply</span>: (<span class="id">lime_le</span> (<span class="id">is_cvg_npeseries</span> <span class="id">u0</span>)).<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">nearW</span> =&gt; <span class="id">k</span>; <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">rewrite</a></span> <span class="id">sume_le0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">cvg_eseries</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">is_cvg_nneseries</span> {<span class="id">R</span>}.<br/>
<span class="kwd">Arguments</span> <span class="id">nneseries_ge0</span> {<span class="id">R</span> <span class="id">u_</span> <span class="id">P</span>} <span class="id">N</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">nnseries_is_cvg</span> {<span class="id">R</span> : <span class="id">realType</span>} (<span class="id">u</span> : <span class="id">nat</span> -&gt; <span class="id">R</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, 0 &lt;= <span class="id">u</span> <span class="id">i</span>)%<span class="id">R</span> -&gt; \<span class="id">sum_</span>(<span class="id">k</span> &lt;<span class="id">oo</span>) (<span class="id">u</span> <span class="id">k</span>)%:<span class="id">E</span> &lt; +<span class="id">oo</span> -&gt; <span class="id">cvg</span> (<span class="id">series</span> <span class="id">u</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof172')">Proof.</span></div>
<div class="proofscript" id="proof172">
<span class="id">move</span>=&gt; ? ?; <span class="id">apply</span>: <span class="id">nondecreasing_is_cvgn</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">m</span> <span class="id">n</span> <span class="id">mn</span>; <span class="id">rewrite</span> /<span class="id">series</span>/=.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -(<span class="id">subnKC</span> <span class="id">mn</span>) {2}/<span class="id">index_iota</span> <span class="id">subn0</span> <span class="id">iotaD</span> <span class="id">big_cat</span>/=.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">add0n</span> -{2}(<span class="id">subn0</span> <span class="id">m</span>) -/(<span class="id">index_iota</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">ler_addl</span> <span class="id">sumr_ge0</span>.<br/>
<span class="kwd">exists</span> (<span class="id">fine</span> (\<span class="id">sum_</span>(<span class="id">k</span> &lt;<span class="id">oo</span>) (<span class="id">u</span> <span class="id">k</span>)%:<span class="id">E</span>)).<br/>
<span class="id">rewrite</span> /<span class="id">ubound</span>/= =&gt; <span class="id">_</span> [<span class="id">n</span> <span class="id">_</span> &lt;-]; <span class="id">rewrite</span> -<span class="id">lee_fin</span> <span class="id">fineK</span>//; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">fin_num_abs</span> <span class="id">gee0_abs</span>//; <span class="id">apply</span>: <span class="id">nneseries_ge0</span> =&gt; // <span class="id">i</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lee_fin</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">sumEFin</span>; <span class="id">apply</span>: <span class="id">nneseries_lim_ge</span> =&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">lee_fin</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">nneseriesZl</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">f</span> : <span class="id">nat</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) (<span class="id">P</span> : <span class="id">pred</span> <span class="id">nat</span>) <span class="id">x</span> <span class="id">N</span> :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; 0 &lt;= <span class="id">f</span> <span class="id">i</span>) -&gt;<br/>
&nbsp;&nbsp;(\<span class="id">sum_</span>(<span class="id">N</span> &lt;= <span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) (<span class="id">x</span>%:<span class="id">E</span> * <span class="id">f</span> <span class="id">i</span>) = <span class="id">x</span>%:<span class="id">E</span> * \<span class="id">sum_</span>(<span class="id">N</span> &lt;= <span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">f</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof173')">Proof.</span></div>
<div class="proofscript" id="proof173">
<span class="id">move</span>=&gt; <span class="id">f0</span>; <span class="id">rewrite</span> -<span class="id">limeMl</span>//; <span class="id">last</span> <span class="id">exact</span>: <span class="id">is_cvg_nneseries</span>.<br/>
<span class="kwd">by</span> <span class="id">congr</span> (<span class="id">lim</span> <span class="id">_</span>); <span class="id">apply</span>/<span class="id">funext</span> =&gt; /= <span class="id"><a href="mathcomp.analysis.normedtype.html#cvgeNyPleNy">n</a></span>; <span class="id">rewrite</span> <span class="id">ge0_sume_distrr</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">adde_def_nneseries</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">f</span> <span class="id">g</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P</span> <span class="id">Q</span> : <span class="id">pred</span> <span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">P</span> <span class="id">n</span> -&gt; 0 &lt;= <span class="id">f</span> <span class="id">n</span>) -&gt; (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">Q</span> <span class="id">n</span> -&gt; 0 &lt;= <span class="id">g</span> <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;(\<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">f</span> <span class="id">i</span>) +? (\<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">Q</span> <span class="id">i</span>) <span class="id">g</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof174')">Proof.</span></div>
<div class="proofscript" id="proof174">
<span class="id">move</span>=&gt; <span class="id">f0</span> <span class="id">g0</span>; <span class="id">rewrite</span> /<span class="id">adde_def</span> !<span class="id">negb_and</span>; <span class="id">apply</span>/<span class="id">andP</span>; <span class="id">split</span>; <span class="id">apply</span>/<span class="id">orP</span>.<br/>
- <span class="kwd">by</span> <span class="id">right</span>; <span class="id">apply</span>/<span class="id">eqP</span> =&gt; <span class="id">Qg</span>; <span class="id">have</span> := <span class="id">nneseries_ge0</span> 0 <span class="id">g0</span>; <span class="id">rewrite</span> <span class="id">Qg</span>.<br/>
- <span class="kwd">by</span> <span class="id">left</span>; <span class="id">apply</span>/<span class="id">eqP</span> =&gt; <span class="id">Pf</span>; <span class="id">have</span> := <span class="id">nneseries_ge0</span> 0 <span class="id">f0</span>; <span class="id">rewrite</span> <span class="id">Pf</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__ereal_cvgPpinfty</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">u_</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">u_</span> --&gt; +<span class="id">oo</span> &lt;-&gt; (<span class="kwd">forall</span> <span class="id">A</span>, (0 &lt; <span class="id">A</span>)%<span class="id">R</span> -&gt; \<span class="kwd">forall</span> <span class="id">n</span> \<span class="id">near</span> \<span class="id">oo</span>, <span class="id">A</span>%:<span class="id">E</span> &lt;= <span class="id">u_</span> <span class="id">n</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof175')">Proof.</span></div>
<div class="proofscript" id="proof175">
<span class="kwd">by</span> <span class="id">split</span>=&gt; [/<span class="id">cvgeyPge</span>//|<span class="id">u_ge</span>]; <span class="id">apply</span>/<span class="id">cvgeyPgey</span>; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">near</a></span>=&gt; <span class="id">x</span>; <span class="id">apply</span>: <span class="id">u_ge</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__ereal_cvgPninfty</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">u_</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">u_</span> --&gt; -<span class="id">oo</span> &lt;-&gt; (<span class="kwd">forall</span> <span class="id">A</span>, (<span class="id">A</span> &lt; 0)%<span class="id">R</span> -&gt; \<span class="kwd">forall</span> <span class="id">n</span> \<span class="id">near</span> \<span class="id">oo</span>, <span class="id">u_</span> <span class="id">n</span> &lt;= <span class="id">A</span>%:<span class="id">E</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof176')">Proof.</span></div>
<div class="proofscript" id="proof176">
<span class="kwd">by</span> <span class="id">split</span>=&gt; [/<span class="id">cvgeNyPle</span>//|<span class="id">u_ge</span>]; <span class="id">apply</span>/<span class="id">cvgeNyPleNy</span>; <span class="id">near</span>=&gt; <span class="id">x</span>; <span class="id">apply</span>: <span class="id">u_ge</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__ereal_squeeze</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">f</span> <span class="id">g</span> <span class="id">h</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(\<span class="kwd">forall</span> <span class="id">x</span> \<span class="id">near</span> \<span class="id">oo</span>, <span class="id">f</span> <span class="id">x</span> &lt;= <span class="id">g</span> <span class="id">x</span> &lt;= <span class="id">h</span> <span class="id">x</span>) -&gt; <span class="kwd">forall</span> (<span class="id">l</span> : \<span class="id">bar</span> <span class="id">R</span>),<br/>
&nbsp;&nbsp;<span class="id">f</span> --&gt; <span class="id">l</span> -&gt; <span class="id">h</span> --&gt; <span class="id">l</span> -&gt; <span class="id">g</span> --&gt; <span class="id">l</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof177')">Proof.</span></div>
<div class="proofscript" id="proof177">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; ? ?; <span class="id">apply</span>: <span class="id">squeeze_cvge</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">nneseries_pinfty</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">u_</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>)<br/>
&nbsp;&nbsp;(<span class="id">P</span> : <span class="id">pred</span> <span class="id">nat</span>) <span class="id">k</span> : (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">P</span> <span class="id">n</span> -&gt; 0 &lt;= <span class="id">u_</span> <span class="id">n</span>) -&gt; <span class="id">P</span> <span class="id">k</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">u_</span> <span class="id">k</span> = +<span class="id">oo</span> -&gt; \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">u_</span> <span class="id">i</span> = +<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof178')">Proof.</span></div>
<div class="proofscript" id="proof178">
<span class="id">move</span>=&gt; <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">u_ge0</a></span> <span class="id">Pk</span> <span class="id">ukoo</span>; <span class="id">apply</span>: (<span class="id">eseries_pinfty</span> <span class="id">_</span> <span class="id">Pk</span> <span class="id">ukoo</span>) =&gt; // <span class="id">n</span> <span class="id">Pn</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">gt_eqF</span>// (<span class="id">lt_le_trans</span> <span class="id">_</span> (<span class="id">u_ge0</span> <span class="id">_</span> <span class="id">Pn</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">lee_nneseries</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">u</span> <span class="id">v</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) (<span class="id">P</span> : <span class="id">pred</span> <span class="id">nat</span>) <span class="id">N</span> :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; 0 &lt;= <span class="id">u</span> <span class="id">i</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">P</span> <span class="id">n</span> -&gt; <span class="id">u</span> <span class="id">n</span> &lt;= <span class="id">v</span> <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">N</span> &lt;= <span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">u</span> <span class="id">i</span> &lt;= \<span class="id">sum_</span>(<span class="id">N</span> &lt;= <span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">v</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof179')">Proof.</span></div>
<div class="proofscript" id="proof179">
<span class="id">move</span>=&gt; <span class="id">u0</span> <span class="id">Puv</span>; <span class="id">apply</span>: <span class="id">lee_lim</span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">is_cvg_ereal_nneg_natsum_cond</span> =&gt; <span class="id">n</span> ? /<span class="id">u0</span>; <span class="id">exact</span>.<br/>
- <span class="id">apply</span>: <span class="id">is_cvg_ereal_nneg_natsum_cond</span> =&gt; <span class="id">n</span> <span class="id">_</span> <span class="id">Pn</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">le_trans</span> <span class="id">_</span> (<span class="id">Puv</span> <span class="id">_</span> <span class="id">Pn</span>))// <span class="id">u0</span>.<br/>
- <span class="kwd">by</span> <span class="id">near</span>=&gt; <span class="id">n</span>; <span class="id">apply</span>: <span class="id">lee_sum</span> =&gt; <span class="id">k</span>; <span class="id">exact</span>: <span class="id">Puv</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">lee_npeseries</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">u</span> <span class="id">v</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) (<span class="id">P</span> : <span class="id">pred</span> <span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; <span class="id"><a href="mathcomp.analysis.sequences.html#__deprecated__ereal_cvgD_pinfty_fin">u</a></span> <span class="id">i</span> &lt;= 0) -&gt; (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">P</span> <span class="id">n</span> -&gt; <span class="id">v</span> <span class="id">n</span> &lt;= <span class="id">u</span> <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">v</span> <span class="id">i</span> &lt;= \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">u</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof180')">Proof.</span></div>
<div class="proofscript" id="proof180">
<span class="id">move</span>=&gt; <span class="id">u0</span> <span class="id">Puv</span>; <span class="id">apply</span>: <span class="id">lee_lim</span>.<br/>
- <span class="id">apply</span>: <span class="id">is_cvg_ereal_npos_natsum_cond</span> =&gt; <span class="id">n</span> <span class="id">_</span> /[<span class="id"><a href="mathcomp.analysis.normedtype.html#cvgeD">dup</a></span>] <span class="id">Pn</span> /<span class="id">Puv</span>/<span class="id">le_trans</span>; <span class="id">apply</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">u0</span>.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">is_cvg_ereal_npos_natsum_cond</span> =&gt; <span class="id">n</span> <span class="id">_</span> <span class="id">Pn</span>; <span class="id">exact</span>/<span class="id">u0</span>.<br/>
- <span class="kwd">by</span> <span class="id">near</span>=&gt; <span class="id">n</span>; <span class="id">exact</span>: <span class="id">lee_sum</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__ereal_cvgD_pinfty_fin</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">f</span> <span class="id">g</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) <span class="id">b</span> :<br/>
&nbsp;&nbsp;<span class="id">f</span> --&gt; +<span class="id">oo</span> -&gt; <span class="id">g</span> --&gt; <span class="id">b</span>%:<span class="id">E</span> -&gt; <span class="id">f</span> \+ <span class="id">g</span> --&gt; +<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof181')">Proof.</span></div>
<div class="proofscript" id="proof181">
 <span class="id">exact</span>: <span class="id">cvgeD</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__ereal_cvgD_ninfty_fin</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">f</span> <span class="id">g</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) <span class="id">b</span> :<br/>
&nbsp;&nbsp;<span class="id">f</span> --&gt; -<span class="id">oo</span> -&gt; <span class="id">g</span> --&gt; <span class="id">b</span>%:<span class="id">E</span> -&gt; <span class="id">f</span> \+ <span class="id">g</span> --&gt; -<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof182')">Proof.</span></div>
<div class="proofscript" id="proof182">
 <span class="id">exact</span>: <span class="id">cvgeD</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__ereal_cvgD_pinfty_pinfty</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">f</span> <span class="id">g</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">f</span> --&gt; +<span class="id">oo</span> -&gt; <span class="id">g</span> --&gt; +<span class="id">oo</span> -&gt; <span class="id">f</span> \+ <span class="id">g</span> --&gt; +<span class="id"><a href="mathcomp.analysis.normedtype.html#cvgeD">oo</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof183')">Proof.</span></div>
<div class="proofscript" id="proof183">
 <span class="id">exact</span>: <span class="id">cvgeD</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__ereal_cvgD_ninfty_ninfty</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">f</span> <span class="id">g</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">f</span> --&gt; -<span class="id">oo</span> -&gt; <span class="id">g</span> --&gt; -<span class="id">oo</span> -&gt; <span class="id">f</span> \+ <span class="id">g</span> --&gt; -<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof184')">Proof.</span></div>
<div class="proofscript" id="proof184">
 <span class="id">exact</span>: <span class="id">cvgeD</span>. Qed.</div>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0", <span class="id">note</span>="<span class="id">use</span> `<span class="id">cvgeD</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_cvgD_ninfty_ninfty</span> := <span class="id">__deprecated__ereal_cvgD_ninfty_ninfty</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__ereal_cvgD</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">f</span> <span class="id">g</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) <span class="id">a</span> <span class="id">b</span> :<br/>
&nbsp;&nbsp;<span class="id">a</span> +? <span class="id">b</span> -&gt; <span class="id">f</span> --&gt; <span class="id">a</span> -&gt; <span class="id">g</span> --&gt; <span class="id">b</span> -&gt; <span class="id">f</span> \+ <span class="id">g</span> --&gt; <span class="id">a</span> + <span class="id">b</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof185')">Proof.</span></div>
<div class="proofscript" id="proof185">
 <span class="id">exact</span>: <span class="id">cvgeD</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__ereal_cvgB</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">f</span> <span class="id">g</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) <span class="id">a</span> <span class="id">b</span> :<br/>
&nbsp;&nbsp;<span class="id">a</span> +? - <span class="id">b</span> -&gt; <span class="id">f</span> --&gt; <span class="id">a</span> -&gt; <span class="id">g</span> --&gt; <span class="id">b</span> -&gt; <span class="id">f</span> \- <span class="id">g</span> --&gt; <span class="id">a</span> - <span class="id">b</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof186')">Proof.</span></div>
<div class="proofscript" id="proof186">
 <span class="id">exact</span>: <span class="id">cvgeB</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__ereal_is_cvgD</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">u</span> <span class="id">v</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">lim</span> <span class="id">u</span> +? <span class="id">lim</span> <span class="id">v</span> -&gt; <span class="id">cvg</span> <span class="id">u</span> -&gt; <span class="id">cvg</span> <span class="id">v</span> -&gt; <span class="id">cvg</span> (<span class="id">u</span> \+ <span class="id">v</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof187')">Proof.</span></div>
<div class="proofscript" id="proof187">
 <span class="id">exact</span>: <span class="id">is_cvgeD</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__ereal_cvg_sub0</span> (<span class="id"><a href="mathcomp.analysis.topology.html#lim">R</a></span> : <span class="id">realFieldType</span>) (<span class="id">f</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) (<span class="id">k</span> : \<span class="id">bar</span> <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">k</span> \<span class="id">is</span> <span class="id">a</span> <span class="id">fin_num</span> -&gt; (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">f</span> <span class="id">x</span> - <span class="id">k</span>) --&gt; 0 &lt;-&gt; <span class="id">f</span> --&gt; <span class="id">k</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof188')">Proof.</span></div>
<div class="proofscript" id="proof188">
 <span class="id">exact</span>: <span class="id">cvge_sub0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__ereal_limD</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">f</span> <span class="id">g</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">cvg</span> <span class="id">f</span> -&gt; <span class="id">cvg</span> <span class="id">g</span> -&gt; <span class="id">lim</span> <span class="id">f</span> +? <span class="id">lim</span> <span class="id">g</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">lim</span> (<span class="id">f</span> \+ <span class="id">g</span>) = <span class="id">lim</span> <span class="id">f</span> + <span class="id">lim</span> <span class="id">g</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof189')">Proof.</span></div>
<div class="proofscript" id="proof189">
 <span class="id">exact</span>: <span class="id">limeD</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__ereal_cvgM_gt0_pinfty</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">f</span> <span class="id">g</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id"><a href="mathcomp.analysis.normedtype.html#cvge_sub0">nat</a></span>) <span class="id">b</span> :<br/>
&nbsp;&nbsp;(0 &lt; <span class="id">b</span>)%<span class="id">R</span> -&gt; <span class="id">f</span> --&gt; +<span class="id">oo</span> -&gt; <span class="id">g</span> --&gt; <span class="id">b</span>%:<span class="id">E</span> -&gt; <span class="id">f</span> \* <span class="id">g</span> --&gt; +<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof190')">Proof.</span></div>
<div class="proofscript" id="proof190">
<span class="id">move</span>=&gt; <span class="id">b_lt0</span> <span class="id">fl</span> <span class="id">gl</span>; <span class="id">have</span> /= := <span class="id">cvgeM</span> <span class="id">_</span> <span class="id">fl</span> <span class="id">gl</span>; <span class="id">rewrite</span> <span class="id">gt0_mulye</span>//; <span class="id">apply</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">mule_def_infty_neq0</span>// <span class="id">gt_eqF</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__ereal_cvgM_lt0_pinfty</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">f</span> <span class="id">g</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id"><a href="mathcomp.analysis.topology.html#lim">nat</a></span>) <span class="id">b</span> :<br/>
&nbsp;&nbsp;(<span class="id">b</span> &lt; 0)%<span class="id">R</span> -&gt; <span class="id">f</span> --&gt; +<span class="id">oo</span> -&gt; <span class="id">g</span> --&gt; <span class="id">b</span>%:<span class="id">E</span> -&gt; <span class="id">f</span> \* <span class="id">g</span> --&gt; -<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof191')">Proof.</span></div>
<div class="proofscript" id="proof191">
<span class="id">move</span>=&gt; <span class="id">b_lt0</span> <span class="id">fl</span> <span class="id">gl</span>; <span class="id">have</span> /= := <span class="id">cvgeM</span> <span class="id">_</span> <span class="id">fl</span> <span class="id">gl</span>; <span class="id">rewrite</span> <span class="id">lt0_mulye</span>//; <span class="id">apply</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">mule_def_infty_neq0</span>// <span class="id">lt_eqF</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__ereal_cvgM_gt0_ninfty</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">f</span> <span class="id">g</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) <span class="id">b</span> :<br/>
&nbsp;&nbsp;(0 &lt; <span class="id">b</span>)%<span class="id">R</span> -&gt; <span class="id">f</span> --&gt; -<span class="id">oo</span> -&gt; <span class="id">g</span> --&gt; <span class="id">b</span>%:<span class="id">E</span> -&gt; <span class="id">f</span> \* <span class="id">g</span> --&gt; -<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof192')">Proof.</span></div>
<div class="proofscript" id="proof192">
<span class="id">move</span>=&gt; <span class="id">b_lt0</span> <span class="id">fl</span> <span class="id">gl</span>; <span class="id">have</span> /= := <span class="id">cvgeM</span> <span class="id">_</span> <span class="id">fl</span> <span class="id">gl</span>; <span class="id">rewrite</span> <span class="id">gt0_mulNye</span>//; <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#gt0_mulye">apply</a></span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">mule_def_infty_neq0</span>// <span class="id">gt_eqF</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__ereal_cvgM_lt0_ninfty</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">f</span> <span class="id">g</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) <span class="id">b</span> :<br/>
&nbsp;&nbsp;(<span class="id">b</span> &lt; 0)%<span class="id">R</span> -&gt; <span class="id">f</span> --&gt; -<span class="id">oo</span> -&gt; <span class="id">g</span> --&gt; <span class="id"><a href="mathcomp.analysis.sequences.html#__deprecated__ereal_cvgM_gt0_pinfty">b</a></span>%:<span class="id">E</span> -&gt; <span class="id">f</span> \* <span class="id">g</span> --&gt; +<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof193')">Proof.</span></div>
<div class="proofscript" id="proof193">
<span class="id">move</span>=&gt; <span class="id">b_lt0</span> <span class="id"><a name="__deprecated__ereal_cvgM_lt0_pinfty">fl</a></span> <span class="id">gl</span>; <span class="id">have</span> /= := <span class="id">cvgeM</span> <span class="id">_</span> <span class="id">fl</span> <span class="id">gl</span>; <span class="id">rewrite</span> <span class="id">lt0_mulNye</span>//; <span class="id">apply</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">mule_def_infty_neq0</span>// <span class="id">lt_eqF</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__ereal_cvgM</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">f</span> <span class="id">g</span> : (\<span class="id">bar</span> <span class="id">R</span>) ^<span class="id">nat</span>) (<span class="id">a</span> <span class="id">b</span> : \<span class="id">bar</span> <span class="id">R</span>) :<br/>
&nbsp;<span class="id">a</span> *? <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#lt0_mulye">b</a></span> -&gt; <span class="id">f</span> --&gt; <span class="id">a</span> -&gt; <span class="id">g</span> --&gt; <span class="id">b</span> -&gt; <span class="id">f</span> \* <span class="id">g</span> --&gt; <span class="id">a</span> * <span class="id">b</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof194')">Proof.</span></div>
<div class="proofscript" id="proof194">
 <span class="id">exact</span>: <span class="id">cvgeM</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">__deprecated__ereal_lim_sum</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">I</span> : <span class="kwd">Type</span>) (<span class="id">r</span> : <span class="id">seq</span> <span class="id">I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> : <span class="id">I</span> -&gt; (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) (<span class="id">l</span> : <span class="id">I</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) (<span class="id">P</span> : <span class="id">pred</span> <span class="id">I</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span> <span class="id">n</span>, <span class="id">P</span> <span class="id">k</span> -&gt; 0 &lt;= <span class="id">f</span> <span class="id">k</span> <span class="id">n</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, <span class="id">P</span> <span class="id">k</span> -&gt; <span class="id">f</span> <span class="id">k</span> --&gt; <span class="id">l</span> <span class="id">k</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(<span class="id">k</span> &lt;- <span class="id">r</span> | <span class="id">P</span> <span class="id">k</span>) <span class="id">f</span> <span class="id">k</span> <span class="id">n</span>) --&gt; \<span class="id">sum_</span>(<span class="id">k</span> &lt;- <span class="id">r</span> | <span class="id">P</span> <span class="id">k</span>) <span class="id">l</span> <span class="id">k</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof195')">Proof.</span></div>
<div class="proofscript" id="proof195">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">f0</span> ?; <span class="id">apply</span>: <span class="id">cvg_nnesum</span> =&gt; // ? ?; <span class="id">apply</span>: <span class="id">nearW</span> =&gt; ?; <span class="id">apply</span>: <span class="id">f0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id">lim_shift_cst</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">u</span> : (\<span class="id">bar</span> <span class="id">R</span>) ^<span class="id">nat</span>) (<span class="id">l</span> : \<span class="id">bar</span> <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">cvg</span> <span class="id">u</span> -&gt; (<span class="kwd">forall</span> <span class="id">n</span>, 0 &lt;= <span class="id">u</span> <span class="id">n</span>) -&gt; -<span class="id">oo</span> &lt; <span class="id">l</span> -&gt; <span class="id">lim</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">l</span> + <span class="id">u</span> <span class="id">x</span>) = <span class="id">l</span> + <span class="id">lim</span> <span class="id">u</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof196')">Proof.</span></div>
<div class="proofscript" id="proof196">
<span class="id">move</span>=&gt; <span class="id">cu</span> <span class="id">u0</span> <span class="id">hl</span>; <span class="id">apply</span>/<span class="id">cvg_lim</span> =&gt; //; <span class="id"><a name="__deprecated__ereal_cvgM_lt0_ninfty">apply</a></span>: <span class="id">cvgeD</span> (<span class="id">cu</span>); <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>: <span class="id">cvg_cst</span>.<br/>
<span class="id">rewrite</span> <span class="id">ltninfty_adde_def</span>// <span class="id">inE</span> (@<span class="id">lt_le_trans</span> <span class="id">_</span> <span class="id">_</span> 0)//.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">lime_ge</span> =&gt; //; <span class="id">exact</span>: <span class="id">nearW</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">nneseries_split</span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id">near_eq_lim</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">f</span> <span class="id">g</span> : <span class="id">nat</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">cvg</span> <span class="id">g</span> -&gt; {<span class="id">near</span> \<span class="id">oo</span>, <span class="id">f</span> =1 <span class="id">g</span>} -&gt; <span class="id">lim</span> <span class="id">f</span> = <span class="id">lim</span> <span class="id">g</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof197')">Proof.</span></div>
<div class="proofscript" id="proof197">
<span class="id">move</span>=&gt; <span class="id">cg</span> <span class="id">fg</span>; <span class="id">suff</span>: <span class="id">f</span> --&gt; <span class="id">lim</span> <span class="id">g</span> <span class="kwd">by</span> <span class="id">exact</span>/<span class="id">cvg_lim</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a name="ereal_cvgM_lt0_ninfty">cvg_trans</a></span> <span class="id">cg</span>; <span class="id">apply</span>: <span class="id">near_eq_cvg</span>; <span class="id">near</span> <span class="id">do</span> <span class="id">apply</span>/<span class="id">esym</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">nneseries_split</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">f</span> : <span class="id">nat</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) <span class="id">n</span> :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, 0 &lt;= <span class="id">f</span> <span class="id">k</span>) -&gt;<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">k</span> &lt;<span class="id">oo</span>) <span class="id">f</span> <span class="id">k</span> = \<span class="id">sum_</span>(<span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">f</span> <span class="id">k</span> + \<span class="id">sum_</span>(<span class="id">n</span> &lt;= <span class="id">k</span> &lt;<span class="id">oo</span>) <span class="id">f</span> <span class="id">k</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof198')">Proof.</span></div>
<div class="proofscript" id="proof198">
<span class="id">move</span>=&gt; <span class="id">f0</span>; <span class="id">elim</span>: <span class="id">n</span> =&gt; [|<span class="id">n</span> <span class="id">ih</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big_ord0</span> <span class="id">add0e</span>.<br/>
<span class="id">rewrite</span> <span class="id">big_ord_recr</span>/= -<span class="id">addeA</span> [<span class="id"><a href="mathcomp.analysis.sequences.html#__deprecated__ereal_cvgM">f</a></span> <span class="id">n</span> + <span class="id">_</span>](<span class="id">_</span> : <span class="id">_</span> = \<span class="id">sum_</span>(<span class="id">n</span> &lt;= <span class="id">k</span> &lt;<span class="id">oo</span>) <span class="id">f</span> <span class="id">k</span>)//.<br/>
<span class="id">rewrite</span> -<span class="id">lim_shift_cst</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> (@<span class="id">lt_le_trans</span> <span class="id">_</span> <span class="id">_</span> 0).<br/>
- <span class="id">apply</span>: (@<span class="id">near_eq_lim</span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">f</span> <span class="id">n</span> + <span class="id">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">exact</a></span>: <span class="id">is_cvg_ereal_nneg_natsum</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">near</span> <span class="id">do</span> <span class="id">rewrite</span> -<span class="id">big_ltn</span>//; <span class="id">exact</span>: <span class="id">nbhs_infty_gt</span>.<br/>
- <span class="id">exact</span>: <span class="id">is_cvg_ereal_nneg_natsum</span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">m</span>; <span class="id">exact</span>: <span class="id">sume_ge0</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">nneseries_split</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">nneseries_tail_cvg</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">f</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">k</span> &lt;<span class="id">oo</span>) <span class="id">f</span> <span class="id">k</span> &lt; +<span class="id">oo</span> -&gt; (<span class="kwd">forall</span> <span class="id">k</span>, 0 &lt;= <span class="id">f</span> <span class="id">k</span>) -&gt;<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">N</span> &lt;= <span class="id">k</span> &lt;<span class="id">oo</span>) <span class="id"><a name="ereal_lim_sum">f</a></span> <span class="id">k</span> @[<span class="id">N</span> --&gt; \<span class="id">oo</span>] --&gt; 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof199')">Proof.</span></div>
<div class="proofscript" id="proof199">
<span class="id">move</span>=&gt; <span class="id">foo</span> <span class="id">f0</span>.<br/>
<span class="id">have</span> : <span class="id">cvg</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(0 &lt;= <span class="id">k</span> &lt; <span class="id">n</span>) <span class="id">f</span> <span class="id">k</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">ereal_nondecreasing_is_cvgn</span>; <span class="id">exact</span>: <span class="id">lee_sum_nneg_natr</span>.<br/>
<span class="id">move</span>/<span class="id">cvg_ex</span> =&gt; [[<span class="id">l</span> <span class="id">fl</span>||/<span class="id">cvg_lim</span> <span class="id">fnoo</span>]] /=; <span class="id">last</span> 2 <span class="id">first</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>/<span class="id">cvg_lim</span> =&gt; <span class="id">fpoo</span>; <span class="id">rewrite</span> <span class="id">fpoo</span>// <span class="kwd">in</span> <span class="id">foo</span>.<br/>
&nbsp;&nbsp;- <span class="id">have</span> : 0 &lt;= \<span class="id">sum_</span>(<span class="id">k</span> &lt;<span class="id">oo</span>) <span class="id">f</span> <span class="id">k</span> <span class="kwd">by</span> <span class="id">exact</span>: <span class="id">nneseries_ge0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">fnoo</span>.<br/>
<span class="id">rewrite</span> [<span class="id">X</span> <span class="kwd">in</span> <span class="id">X</span> @ <span class="id">_</span> --&gt; <span class="id">_</span>](<span class="id">_</span> : <span class="id">_</span> = <span class="kwd">fun</span> <span class="id">N</span> =&gt; <span class="id">l</span>%:<span class="id">E</span> - \<span class="id">sum_</span>(0 &lt;= <span class="id">k</span> &lt; <span class="id">N</span>) <span class="id">f</span> <span class="id">k</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span>/<span class="id">cvgeNP</span>; <span class="id">rewrite</span> <span class="id">oppe0</span>.<br/>
&nbsp;&nbsp;<span class="id">under</span> <span class="id">eq_fun</span> =&gt; ? <span class="id">do</span> <span class="id">rewrite</span> <span class="id">oppeD</span>// <span class="id">oppeK</span> <span class="id">addeC</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">cvge_sub0</span>.<br/>
<span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">N</span>; <span class="id">apply</span>/<span class="id">esym</span>/<span class="id"><a href="mathcomp.analysis.topology.html#cvg_lim">eqP</a></span>; <span class="id">rewrite</span> <span class="id">sube_eq</span>//.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">addeC</span> <span class="id">big_mkord</span> -(<span class="id">nneseries_split</span> <span class="id">N</span>)//; <span class="id">exact</span>/<span class="id">eqP</span>/<span class="id">esym</span>/<span class="id">cvg_lim</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ge0_adde_def</span>//= ?<span class="id">inE</span>; [<span class="id">exact</span>: <span class="id">nneseries_ge0</span>|<span class="id">exact</span>: <span class="id">sume_ge0</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">nneseriesD</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">f</span> <span class="id">g</span> : <span class="id">nat</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) (<span class="id">P</span> : <span class="id">pred</span> <span class="id">nat</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; 0 &lt;= <span class="id">f</span> <span class="id">i</span>) -&gt; (<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">P</span> <span class="id">i</span> -&gt; 0 &lt;= <span class="id">g</span> <span class="id">i</span>) -&gt;<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) (<span class="id">f</span> <span class="id">i</span> + <span class="id">g</span> <span class="id">i</span>) =<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">f</span> <span class="id">i</span> + \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">g</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof200')">Proof.</span></div>
<div class="proofscript" id="proof200">
<span class="id">move</span>=&gt; <span class="id">f_eq0</span> <span class="id">g_eq0</span>.<br/>
<span class="id">transitivity</span> (<span class="id">lim</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(0 &lt;= <span class="id">i</span> &lt; <span class="id">n</span> | <span class="id"><a href="mathcomp.analysis.sequences.html#sequences_ereal.nneseries_split.near_eq_lim">P</a></span> <span class="id">i</span>) <span class="id">f</span> <span class="id">i</span> +<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\<span class="id">sum_</span>(0 &lt;= <span class="id">i</span> &lt; <span class="id">n</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">g</span> <span class="id">i</span>)).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">congr</span> (<span class="id">lim</span> <span class="id">_</span>); <span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> <span class="id">big_split</span>.<br/>
<span class="id">rewrite</span> <span class="id">limeD</span> /<span class="id">adde_def</span> //=; <span class="id">do</span> ? <span class="id">exact</span>: <span class="id">is_cvg_nneseries</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> ![<span class="id">_</span> == -<span class="id">oo</span>]<span class="id">gt_eqF</span> ?<span class="id">andbF</span>// (@<span class="id">lt_le_trans</span> <span class="id">_</span> <span class="id">_</span> 0)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;?[<span class="id"><a name="nneseriesD">_</a></span> &lt; <span class="id">_</span>]<span class="id">real0</span>// <span class="id">nneseries_ge0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">nneseries_sum_nat</span> (<span class="id">R</span> : <span class="id">realType</span>) <span class="id">n</span> (<span class="id">f</span> : <span class="id">nat</span> -&gt; <span class="id">nat</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span> <span class="id">j</span>, 0 &lt;= <span class="id">f</span> <span class="id">i</span> <span class="id">j</span>) -&gt;<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">j</span> &lt;<span class="id">oo</span>) (\<span class="id">sum_</span>(0 &lt;= <span class="id">i</span> &lt; <span class="id">n</span>) <span class="id">f</span> <span class="id">i</span> <span class="id">j</span>) =<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(0 &lt;= <span class="id">i</span> &lt; <span class="id">n</span>) (\<span class="id">sum_</span>(<span class="id">j</span> &lt;<span class="id">oo</span>) (<span class="id">f</span> <span class="id">i</span> <span class="id">j</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof201')">Proof.</span></div>
<div class="proofscript" id="proof201">
<span class="id">move</span>=&gt; <span class="id">f0</span>; <span class="id">elim</span>: <span class="id">n</span> =&gt; [|<span class="id">n</span> <span class="id">IHn</span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big_geq</span>// <span class="id">eseries0</span>// =&gt; <span class="id">i</span>; <span class="id">rewrite</span> <span class="id">big_geq</span>.<br/>
<span class="id">rewrite</span> <span class="id">big_nat_recr</span>// -<span class="id">IHn</span>/= -<span class="id">nneseriesD</span>//; <span class="id">last</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">i</span>; <span class="id">rewrite</span> <span class="id">sume_ge0</span>.<br/>
<span class="kwd">by</span> <span class="id">congr</span> (<span class="id">lim</span> <span class="id">_</span>); <span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">m</span>; <span class="id">apply</span>: <span class="id">eq_bigr</span> =&gt; <span class="id">i</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">big_nat_recr</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">nneseries_sum</span> <span class="id">I</span> (<span class="id">r</span> : <span class="id">seq</span> <span class="id">I</span>) (<span class="id">P</span> : {<span class="id">pred</span> <span class="id">I</span>}) [<span class="id">R</span> : <span class="id">realType</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">f</span> : <span class="id">I</span> -&gt; <span class="id">nat</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>] : (<span class="kwd">forall</span> <span class="id">i</span> <span class="id">j</span>, <span class="id">P</span> <span class="id">i</span> -&gt; 0 &lt;= <span class="id">f</span> <span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">i</a></span> <span class="id">j</span>) -&gt;<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">j</span> &lt;<span class="id">oo</span>) \<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#nat">sum_</a></span>(<span class="id">i</span> &lt;- <span class="id">r</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">f</span> <span class="id">i</span> <span class="id">j</span> =<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">i</span> &lt;- <span class="id">r</span> | <span class="id">P</span> <span class="id">i</span>) \<span class="id">sum_</span>(<span class="id">j</span> &lt;<span class="id">oo</span>) <span class="id">f</span> <span class="id">i</span> <span class="id">j</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof202')">Proof.</span></div>
<div class="proofscript" id="proof202">
<span class="id">move</span>=&gt; <span class="id">f_ge0</span>; <span class="id">case</span> <span class="id">Dr</span> : <span class="id">r</span> =&gt; [|<span class="id">i</span> <span class="id">r</span>']; <span class="id">rewrite</span> -?{}[<span class="id">_</span> :: <span class="id">_</span>]<span class="id">Dr</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">big_nil</span> <span class="id">eseries0</span>// =&gt; <span class="id">i</span>; <span class="id">rewrite</span> <span class="id">big_nil</span>.<br/>
<span class="id">rewrite</span> {<span class="id">r</span>'}(<span class="id">big_nth</span> <span class="id">i</span>) <span class="id">big_mkcond</span>.<br/>
<span class="id">rewrite</span> (<span class="id">eq_eseriesr</span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">big_nth</span> <span class="id">i</span> <span class="id">_</span> <span class="id">_</span>)).<br/>
<span class="id">rewrite</span> (<span class="id">eq_eseriesr</span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">big_mkcond</span> <span class="id">_</span> <span class="id">_</span>))/=.<br/>
<span class="id">rewrite</span> <span class="id">nneseries_sum_nat</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; ? ?; <span class="id">case</span>: <span class="id">ifP</span> =&gt; // /<span class="id">f_ge0</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">eq_bigr</span> =&gt; <span class="id">j</span> <span class="id">_</span>; <span class="id">case</span>: <span class="id">ifP</span> =&gt; //; <span class="id">rewrite</span> <span class="id">eseries0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">lte_lim</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">u</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) (<span class="id">M</span> : <span class="id">R</span>) :<br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span> <span class="id">u</span> -&gt; <span class="id">cvg</span> <span class="id">u</span> -&gt; <span class="id">M</span>%:<span class="id">E</span> &lt; <span class="id">lim</span> <span class="id">u</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="kwd">forall</span> <span class="id">n</span> \<span class="id">near</span> \<span class="id">oo</span>, <span class="id">M</span>%:<span class="id">E</span> &lt;= <span class="id">u</span> <span class="id">n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof203')">Proof.</span></div>
<div class="proofscript" id="proof203">
<span class="id">move</span>=&gt; <span class="id">ndu</span> <span class="id">cu</span> <span class="id">Ml</span>; <span class="id">have</span> [[<span class="id">n</span> <span class="id">Mun</span>]|] := <span class="id">pselect</span> (<span class="kwd">exists</span> <span class="id">n</span>, <span class="id">M</span>%:<span class="id">E</span> &lt;= <span class="id">u</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="id">near</span>=&gt; <span class="id">m</span>; <span class="id">suff</span> : <span class="id">u</span> <span class="id">n</span> &lt;= <span class="id">u</span> <span class="id">m</span> <span class="kwd">by</span> <span class="id">exact</span>: <span class="id">le_trans</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">near</span>: <span class="id">m</span>; <span class="kwd">exists</span> <span class="id">n</span>.+1 =&gt; // <span class="id">p</span> <span class="id">q</span>; <span class="id"><a href="mathcomp.analysis.sequences.html#eq_eseriesr">apply</a></span>/<span class="id">ndu</span>/<span class="id">ltnW</span>.<br/>
<span class="id">move</span>/<span class="id">forallNP</span> =&gt; <span class="id">Mu</span>.<br/>
<span class="id">have</span> {}<span class="id">Mu</span> : <span class="kwd">forall</span> <span class="id">x</span>, <span class="id">M</span>%:<span class="id">E</span> &gt; <span class="id">u</span> <span class="id">x</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span>; <span class="id">rewrite</span> <span class="id">ltNge</span>; <span class="id">apply</span>/<span class="id">negP</span>.<br/>
<span class="id">have</span> : <span class="id">lim</span> <span class="id">u</span> &lt;= <span class="id">M</span>%:<span class="id">E</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">lime_le</span> =&gt; //; <span class="id">near</span>=&gt; <span class="id">m</span>; <span class="id">apply</span>/<span class="id">ltW</span>/<span class="id">Mu</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>/(<span class="id">lt_le_trans</span> <span class="id">Ml</span>); <span class="id">rewrite</span> <span class="id">ltxx</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id"><a name="lte_lim">end_near</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">lim_mkord</span> (<span class="id">R</span> : <span class="id">realFieldType</span>) (<span class="id">P</span> : {<span class="id">pred</span> <span class="id">nat</span>}) (<span class="id">f</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) :<br/>
&nbsp;&nbsp;<span class="id">lim</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(<span class="id">k</span> &lt; <span class="id">n</span> | <span class="id">P</span> <span class="id">k</span>) <span class="id">f</span> <span class="id">k</span>)%<span class="id">E</span> = \<span class="id">sum_</span>(<span class="id">k</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">k</span>) <span class="id">f</span> <span class="id">k</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof204')">Proof.</span></div>
<div class="proofscript" id="proof204">
<span class="id">rewrite</span> (<span class="id">_</span> : (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">_</span>) = (<span class="kwd">fun</span> <span class="id">n</span> =&gt; \<span class="id">sum_</span>(0 &lt;= <span class="id">k</span> &lt; <span class="id">n</span> | <span class="id">P</span> <span class="id">k</span>) <span class="id">f</span> <span class="id">k</span>)%<span class="id">E</span>) //.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">k</span>; <span class="id">rewrite</span> <span class="id">big_mkord</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eseries_mkcond</span> [<span class="id">R</span> : <span class="id">realFieldType</span>] [<span class="id">P</span> : <span class="id">pred</span> <span class="id">nat</span>] (<span class="id">f</span> : <span class="id">nat</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>) :<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">f</span> <span class="id">i</span> = \<span class="id">sum_</span>(<span class="id">i</span> &lt;<span class="id">oo</span>) <span class="kwd">if</span> <span class="id">P</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">i</a></span> <span class="kwd">then</span> <span class="id">f</span> <span class="id">i</span> <span class="kwd">else</span> 0.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof205')">Proof.</span></div>
<div class="proofscript" id="proof205">
 <span class="kwd">by</span> <span class="id">congr</span> (<span class="id">lim</span> <span class="id">_</span>); <span class="id">apply</span>: <span class="id">eq_fun</span> =&gt; <span class="id">n</span> /=; <span class="id">apply</span>: <span class="id">big_mkcond</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">sequences_ereal</span>.<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">use</span> `<span class="id">cvgeyPge</span>` <span class="id">or</span> <span class="id">a</span> <span class="id">variant</span> <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_cvgPpinfty</span> := <span class="id">__deprecated__ereal_cvgPpinfty</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">use</span> `<span class="id">cvgeNyPle</span>` <span class="id">or</span> <span class="id">a</span> <span class="id">variant</span> <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_cvgPninfty</span> := <span class="id">__deprecated__ereal_cvgPninfty</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">squeeze_cvge</span>` <span class="id">and</span> <span class="id">generalized</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_squeeze</span> := <span class="id">__deprecated__ereal_squeeze</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id"><a href="mathcomp.analysis.sequences.html#sequences_ereal">mathcomp</a></span>-<span class="id">analysis</span> 0.6.0", <span class="id">note</span>="<span class="id">use</span> `<span class="id">cvgeD</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_cvgD_pinfty_fin</span> := <span class="id">__deprecated__ereal_cvgD_pinfty_fin</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0", <span class="id">note</span>="<span class="id">use</span> `<span class="id"><a name="eq_nneseries">cvgeD</a></span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_cvgD_ninfty_fin</span> := <span class="id">__deprecated__ereal_cvgD_ninfty_fin</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0", <span class="id">note</span>="<span class="id">use</span> `<span class="id">cvgeD</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_cvgD_pinfty_pinfty</span> := <span class="id">__deprecated__ereal_cvgD_pinfty_pinfty</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">cvgeD</span>` <span class="id">and</span> <span class="id">generalized</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_cvgD</span> := <span class="id">__deprecated__ereal_cvgD</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#has_lbound">to</a></span> `<span class="id">cvgeB</span>` <span class="id">and</span> <span class="id">generalized</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_cvgB</span> := <span class="id">__deprecated__ereal_cvgB</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">is_cvgeD</span>` <span class="id">and</span> <span class="id">generalized</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_is_cvgD</span> := <span class="id">__deprecated__ereal_is_cvgD</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">cvge_sub0</span>` <span class="id">and</span> <span class="id">generalized</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_cvg_sub0</span> := <span class="id">__deprecated__ereal_cvg_sub0</span> (<span class="id"><a href="mathcomp.analysis.sequences.html#sdrop">only</a></span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">limeD</span>` <span class="id">and</span> <span class="id">generalized</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_limD</span> := <span class="id">__deprecated__ereal_limD</span> (<span class="id">only</span> <span class="id"><a href="mathcomp.analysis.reals.html#inf">parsing</a></span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0", <span class="id">note</span>="<span class="id">use</span> `<span class="id">cvgeM</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_cvgM_gt0_pinfty</span> := <span class="id">__deprecated__ereal_cvgM_gt0_pinfty</span> (<span class="id"><a name="infsN">only</a></span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0", <span class="id">note</span>="<span class="id">use</span> `<span class="id">cvgeM</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_cvgM_lt0_pinfty</span> := <span class="id">__deprecated__ereal_cvgM_lt0_pinfty</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0", <span class="id">note</span>="<span class="id">use</span> `<span class="id">cvgeM</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_cvgM_gt0_ninfty</span> := <span class="id">__deprecated__ereal_cvgM_gt0_ninfty</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0", <span class="id">note</span>="<span class="id">use</span> `<span class="id">cvgeM</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_cvgM_lt0_ninfty</span> := <span class="id">__deprecated__ereal_cvgM_lt0_ninfty</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">cvgeM</span>` <span class="id"><a href="mathcomp.analysis.sequences.html#infs">and</a></span> <span class="id">generalized</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_cvgM</span> := <span class="id">__deprecated__ereal_cvgM</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id"><a href="mathcomp.classical.classical_sets.html#image_comp">renamed</a></span> <span class="id">to</span> `<span class="id">cvg_nnesum</span>` <span class="id"><a name="is_cvg_sups">and</a></span> <span class="id">generalized</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_lim_sum</span> := <span class="id">__deprecated__ereal_lim_sum</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.sequences.html#nonincreasing_sups">note</a></span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">cvg_abse0P</span>` <span class="id">and</span> <span class="id">generalized</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_cvg_abs0</span> := <span class="id">__deprecated__ereal_cvg_abs0</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0", <span class="id">note</span>="<span class="id">use</span> `<span class="id">cvge_ge</span>` <span class="id">instead</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_cvg_ge0</span> := <span class="id">__deprecated__ereal_cvg_ge0</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.analysis.topology.html#cvg">note</a></span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">lime_ge</span>` <span class="id">and</span> <span class="id">generalized</span>")]<br/>
<span class="kwd">Notation</span> <span class="id"><a href="mathcomp.analysis.sequences.html#supsN">ereal_lim_ge</a></span> := <span class="id">__deprecated__ereal_lim_ge</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id"><a href="mathcomp.analysis.sequences.html#sups">to</a></span> `<span class="id">lime_le</span>` <span class="id">and</span> <span class="id">generalized</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_lim_le</span> := <span class="id">__deprecated__ereal_lim_le</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">cvgeryP</span>` <span class="id">and</span> <span class="id">generalized</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">dvg_ereal_cvg</span> := <span class="id">__deprecated__dvg_ereal_cvg</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.0",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">fine_cvgP</span>` <span class="id">and</span> <span class="id">generalized</span>")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_cvg_real</span> := <span class="id">__deprecated__ereal_cvg_real</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id"><a href="mathcomp.classical.classical_sets.html#range">deprecated</a></span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">ereal_nondecreasing_cvgn</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_nondecreasing_cvg</span> := <span class="id">ereal_nondecreasing_cvgn</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">ereal_nondecreasing_is_cvgn</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_nondecreasing_is_cvg</span> := <span class="id">ereal_nondecreasing_is_cvgn</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">ereal_nonincreasing_cvgn</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_nonincreasing_cvg</span> := <span class="id">ereal_nonincreasing_cvgn</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id"><a href="mathcomp.analysis.reals.html#has_ub_lbN">analysis</a></span> 0.6.6",<br/>
&nbsp;&nbsp;<span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">ereal_nonincreasing_is_cvgn</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">ereal_nonincreasing_is_cvg</span> := <span class="id">ereal_nonincreasing_is_cvgn</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">analysis</span> 0.6.0", <span class="id">note</span>="<span class="id">Use</span> <span class="id">eseries0</span> <span class="id">instead</span>.")]<br/>
<span class="kwd">Notation</span> <span class="id">nneseries0</span> := <span class="id">eseries0</span> (<span class="id"><a href="mathcomp.analysis.sequences.html#sups_infs.R">only</a></span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">analysis</span> 0.6.0", <span class="id">note</span>="<span class="id">Use</span> <span class="id">eq_eseriesr</span> <span class="id">instead</span>.")]<br/>
<span class="kwd">Notation</span> <span class="id">eq_nneseries</span> := <span class="id">eq_eseriesr</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">analysis</span> 0.6.0", <span class="id">note</span>="<span class="id">Use</span> <span class="id">eseries_pred0</span> <span class="id">instead</span>.")]<br/>
<span class="kwd">Notation</span> <span class="id">nneseries_pred0</span> := <span class="id">eseries_pred0</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">analysis</span> 0.6.0", <span class="id">note</span>="<span class="id">Use</span> <span class="id">eseries_mkcond</span> <span class="id">instead</span>.")]<br/>
<span class="kwd">Notation</span> <span class="id">nneseries_mkcond</span> := <span class="id">eseries_mkcond</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">sdrop</span> <span class="id">T</span> (<span class="id">u</span> : <span class="id">T</span>^<span class="id"><a href="mathcomp.classical.boolp.html#predeqE">nat</a></span>) <span class="id">n</span> := [<span class="id">set</span> <span class="id">u</span> <span class="id">k</span> | <span class="id">k</span> <span class="kwd">in</span> [<span class="id">set</span> <span class="id">k</span> | <span class="id">k</span> &gt;= <span class="id">n</span>]]%<span class="id">N</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">sdrop</span>.<br/>
<span class="kwd">Variables</span> (<span class="id">d</span> : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#andbT">unit</a></span>) (<span class="id">R</span> : <span class="id">porderType</span> <span class="id">d</span>).<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">u</span> : <span class="id">R</span>^<span class="id">o</span>^<span class="id">nat</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">has_lbound_sdrop</span> <span class="id">u</span> : <span class="id">has_lbound</span> (<span class="id">range</span> <span class="id">u</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>, <span class="id">has_lbound</span> (<span class="id">sdrop</span> <span class="id">u</span> <span class="id">m</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof206')">Proof.</span></div>
<div class="proofscript" id="proof206">
<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">M</span> <span class="id">uM</span>] <span class="id">n</span>; <span class="kwd">exists</span> <span class="id">M</span> =&gt; <span class="id">_</span> [<span class="id">m</span> /= <span class="id">nm</span>] &lt;-; <span class="id">rewrite</span> <span class="id">uM</span> //; <span class="kwd">exists</span> <span class="id">m</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">has_ubound_sdrop</span> <span class="id">u</span> : <span class="id">has_ubound</span> (<span class="id">range</span> <span class="id">u</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>, <span class="id">has_ubound</span> (<span class="id">sdrop</span> <span class="id">u</span> <span class="id">m</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof207')">Proof.</span></div>
<div class="proofscript" id="proof207">
<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">M</span> <span class="id">uM</span>] <span class="id">n</span>; <span class="kwd">exists</span> <span class="id">M</span> =&gt; <span class="id">_</span> [<span class="id">m</span> /= <span class="id">nm</span>] &lt;-; <span class="id">rewrite</span> <span class="id">uM</span> //; <span class="kwd">exists</span> <span class="id">m</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#range">sdrop</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">sups_infs</span>.<br/>
<span class="kwd">Variable</span> <span class="id">R</span> : <span class="id">realType</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">r</span> : <span class="id">R</span>) (<span class="id">u</span> : <span class="id">R</span>^<span class="id">o</span>^<span class="id">nat</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">sups</span> <span class="id">u</span> := [<span class="id">sequence</span> <span class="id">sup</span> (<span class="id">sdrop</span> <span class="id">u</span> <span class="id">n</span>)]<span class="id">_n</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">infs</span> <span class="id">u</span> := [<span class="id">sequence</span> <span class="id">inf</span> (<span class="id">sdrop</span> <span class="id">u</span> <span class="id">n</span>)]<span class="id">_n</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">supsN</span> <span class="id">u</span> : <span class="id">sups</span> (-%<span class="id">R</span> \<span class="id">o</span> <span class="id">u</span>) = - <span class="id">infs</span> <span class="id">u</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof208')">Proof.</span></div>
<div class="proofscript" id="proof208">
<span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> /<span class="id">sups</span> /<span class="id">infs</span> /<span class="id">inf</span> /= <span class="id">opprK</span>; <span class="id">congr</span> (<span class="id">sup</span> <span class="id">_</span>).<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">x</span>; <span class="id">split</span> =&gt; [[<span class="id">m</span> /= <span class="id">nm</span> &lt;-]|[<span class="id">_</span> [<span class="id">m</span> /= <span class="id">nm</span>] &lt;-] &lt;-];<br/>
&nbsp;&nbsp;[<span class="kwd">exists</span> (<span class="id">u</span> <span class="id">m</span>) =&gt; //; <span class="kwd">exists</span> <span class="id">m</span> | <span class="kwd">exists</span> <span class="id">m</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">infsN</span> <span class="id">u</span> : <span class="id">infs</span> (-%<span class="id">R</span> \<span class="id">o</span> <span class="id">u</span>) = - <span class="id">sups</span> <span class="id">u</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof209')">Proof.</span></div>
<div class="proofscript" id="proof209">
<span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> -<span class="id">eqr_oppLR</span> -<span class="id">supsN</span>; <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">congr</span> (<span class="id">sups</span> <span class="id">_</span>).<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; ? /=; <span class="id">rewrite</span> <span class="id">opprK</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bounded_fun_has_lbound_sups">nonincreasing_sups</a></span> <span class="id">u</span> : <span class="id">has_ubound</span> (<span class="id">range</span> <span class="id">u</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">nonincreasing_seq</span> (<span class="id">sups</span> <span class="id">u</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof210')">Proof.</span></div>
<div class="proofscript" id="proof210">
<span class="id">move</span>=&gt; <span class="id">u_ub</span> <span class="id">m</span> <span class="id">n</span> <span class="id">mn</span>; <span class="id">apply</span>: <span class="id">le_sup</span> =&gt; [<span class="id">_</span> /= [<span class="id"><a href="mathcomp.analysis.sequences.html#has_lbound_sdrop">p</a></span> <span class="id">np</span>] &lt;-| |].<br/>
- <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">downP</span>; <span class="kwd">exists</span> (<span class="id">u</span> <span class="id">p</span>) =&gt; //=; <span class="kwd">exists</span> <span class="id">p</span> =&gt; //; <span class="id">exact</span>: <span class="id">leq_trans</span> <span class="id">np</span>.<br/>
- <span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">u</span> <span class="id">n</span>) =&gt; /=; <span class="kwd">exists</span> <span class="id">n</span> =&gt; /=.<br/>
- <span class="kwd">by</span> <span class="id">split</span>; [<span class="kwd">exists</span> (<span class="id">u</span> <span class="id">m</span>); <span class="kwd">exists</span> <span class="id">m</span> =&gt; //=|<span class="id">exact</span>/<span class="id">has_ubound_sdrop</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">nondecreasing_infs</span> <span class="id">u</span> : <span class="id">has_lbound</span> (<span class="id">range</span> <span class="id">u</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">nondecreasing_seq</span> (<span class="id">infs</span> <span class="id">u</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof211')">Proof.</span></div>
<div class="proofscript" id="proof211">
<span class="id">move</span>=&gt; <span class="id">u_lb</span>; <span class="id">rewrite</span> -<span class="id">nonincreasing_opp</span> -<span class="id">supsN</span>; <span class="id">apply</span>/<span class="id">nonincreasing_sups</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>: <span class="id">u_lb</span> =&gt; /<span class="id">has_lb_ubN</span>; <span class="id">rewrite</span> /<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#O">comp</a></span> /= <span class="id">image_comp</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_cvg_sups</span> <span class="id">u</span> : <span class="id">cvg</span> <span class="id">u</span> -&gt; <span class="id">cvg</span> (<span class="id">sups</span> <span class="id">u</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof212')">Proof.</span></div>
<div class="proofscript" id="proof212">
<span class="id">move</span>=&gt; <span class="id">cf</span>; <span class="id">have</span> [<span class="id">M</span> [<span class="id">Mreal</span> <span class="id">Mu</span>]] := <span class="id">cvg_seq_bounded</span> <span class="id">cf</span>.<br/>
<span class="id">apply</span>: <span class="id">nonincreasing_is_cvgn</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">nonincreasing_sups</span>/<span class="id">bounded_fun_has_ubound</span>/<span class="id">cvg_seq_bounded</span>.<br/>
<span class="kwd">exists</span> (- (<span class="id">M</span> + 1)) =&gt; <span class="id">_</span> [<span class="id">n</span> <span class="id">_</span> &lt;-]; <span class="id">rewrite</span> (@<span class="id">le_trans</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">u</span> <span class="id">n</span>)) //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">lerNnormlW</span>/<span class="id">Mu</span> =&gt; //; <span class="id">rewrite</span> <span class="id">ltr_addl</span>.<br/>
<span class="id">apply</span>: <span class="id"><a name="lim_inf">sup_ub</a></span>; <span class="id">last</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">n</span> =&gt; /=.<br/>
<span class="id">exact</span>/<span class="id">has_ubound_sdrop</span>/<span class="id">bounded_fun_has_ubound</span>/<span class="id">cvg_seq_bounded</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_cvg_infs</span> <span class="id">u</span> : <span class="id">cvg</span> <span class="id">u</span> -&gt; <span class="id">cvg</span> (<span class="id">infs</span> <span class="id">u</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof213')">Proof.</span></div>
<div class="proofscript" id="proof213">
<span class="id">move</span>/<span class="id">is_cvgN</span>/<span class="id">is_cvg_sups</span>; <span class="id">rewrite</span> <span class="id">supsN</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>/(@<span class="id">is_cvgN</span> <span class="id">_</span> [<span class="id">normedModType</span> <span class="id">R</span> <span class="id">of</span> <span class="id">R</span>^<span class="id">o</span>]); <span class="id">rewrite</span> <span class="id">opprK</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">infs_le_sups</span> <span class="id"><a href="mathcomp.analysis.sequences.html#sups">u</a></span> <span class="id">n</span> : <span class="id">cvg</span> <span class="id">u</span> -&gt; <span class="id">infs</span> <span class="id">u</span> <span class="id">n</span> &lt;= <span class="id">sups</span> <span class="id">u</span> <span class="id"><a href="mathcomp.analysis.topology.html#cvg_lim">n</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof214')">Proof.</span></div>
<div class="proofscript" id="proof214">
<span class="id">move</span>=&gt; <span class="id">cu</span>; <span class="id">rewrite</span> /<span class="id">infs</span> /<span class="id">sups</span> /=; <span class="id">set</span> <span class="id">A</span> := <span class="id">sdrop</span> <span class="id">_</span> <span class="id">_</span>.<br/>
<span class="id">have</span> [<span class="id">a</span> <span class="id">Aa</span>] : <span class="id">A</span> !=<span class="id">set0</span> <span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">u</span> <span class="id">n</span>); <span class="id">rewrite</span> /<span class="id">A</span> /=; <span class="kwd">exists</span> <span class="id">n</span> =&gt; //=.<br/>
<span class="id">rewrite</span> (@<span class="id">le_trans</span> <span class="id">_</span> <span class="id">_</span> <span class="id">a</span>) //; [<span class="id"><a href="mathcomp.analysis.normedtype.html#bounded_fun">apply</a></span>/<span class="id">inf_lb</span>|<span class="id">apply</span>/<span class="id">sup_ub</span>] =&gt; //.<br/>
- <span class="id">exact</span>/<span class="id">has_lbound_sdrop</span>/<span class="id">bounded_fun_has_lbound</span>/<span class="id">cvg_seq_bounded</span>.<br/>
- <span class="id">exact</span>/<span class="id">has_ubound_sdrop</span>/<span class="id">bounded_fun_has_ubound</span>/<span class="id">cvg_seq_bounded</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_sups_inf</span> <span class="id">u</span> : <span class="id">has_ubound</span> (<span class="id">range</span> <span class="id">u</span>) -&gt; <span class="id">has_lbound</span> (<span class="id">range</span> <span class="id">u</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">sups</span> <span class="id">u</span> --&gt; <span class="id">inf</span> (<span class="id">range</span> (<span class="id">sups</span> <span class="id">u</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof215')">Proof.</span></div>
<div class="proofscript" id="proof215">
<span class="id">move</span>=&gt; <span class="id">u_ub</span> <span class="id">u_lb</span>; <span class="id">apply</span>: <span class="id">nonincreasing_cvgn</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">nonincreasing_sups</span>.<br/>
<span class="id">case</span>: <span class="id"><a href="mathcomp.analysis.topology.html#nearW">u_lb</a></span> =&gt; <span class="id">M</span> <span class="id">uM</span>; <span class="kwd">exists</span> <span class="id">M</span> =&gt; <span class="id">_</span> [<span class="id">n</span> <span class="id">_</span> &lt;-].<br/>
<span class="id">rewrite</span> (@<span class="id">le_trans</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">u</span> <span class="id">n</span>)) //; <span class="id">first</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">uM</span>; <span class="kwd">exists</span> <span class="id">n</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sup_ub</span>; [<span class="id">exact</span>/<span class="id">has_ubound_sdrop</span>|<span class="kwd">exists</span> <span class="id">n</span> =&gt; /=].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_infs_sup</span> <span class="id">u</span> : <span class="id">has_ubound</span> (<span class="id">range</span> <span class="id">u</span>) -&gt; <span class="id">has_lbound</span> (<span class="id">range</span> <span class="id">u</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">infs</span> <span class="id">u</span> --&gt; <span class="id">sup</span> (<span class="id">range</span> (<span class="id">infs</span> <span class="id">u</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof216')">Proof.</span></div>
<div class="proofscript" id="proof216">
<span class="id">move</span>=&gt; <span class="id">u_ub</span> <span class="id">u_lb</span>; <span class="id">have</span> : <span class="id">sups</span> (- <span class="id">u</span>) --&gt; <span class="id">inf</span> (<span class="id">range</span> (<span class="id">sups</span> (- <span class="id">u</span>))).<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">cvg_sups_inf</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>: <span class="id">u_lb</span> =&gt; /<span class="id">has_lb_ubN</span>; <span class="id">rewrite</span> <span class="id">image_comp</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">move</span>: <span class="id">u_ub</span> =&gt; /<span class="id">has_ub_lbN</span>; <span class="id">rewrite</span> <span class="id">image_comp</span>.<br/>
<span class="id">rewrite</span> /<span class="id">inf</span> =&gt; /(@<span class="id">cvg_comp</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; - <span class="id">x</span>)).<br/>
<span class="id">rewrite</span> <span class="id">supsN</span> /<span class="id">comp</span> /= -[<span class="kwd">in</span> <span class="id">X</span> <span class="kwd">in</span> <span class="id">_</span> -&gt; <span class="id">X</span> --&gt; <span class="id">_</span>](<span class="id">opprK</span> (<span class="id">infs</span> <span class="id">u</span>)); <span class="id">apply</span>.<br/>
<span class="id">rewrite</span> <span class="id">image_comp</span> /<span class="id">comp</span> /= -(<span class="id">opprK</span> (<span class="id">sup</span> (<span class="id">range</span> (<span class="id">infs</span> <span class="id">u</span>)))).<br/>
<span class="id">apply</span>: (@<span class="id">cvgN</span> <span class="id">_</span> [<span class="id">normedModType</span> <span class="id">R</span> <span class="id">of</span> <span class="id">R</span>^<span class="id">o</span>]).<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">_</span> : [<span class="id">set</span> <span class="id">_</span> | <span class="id">_</span> <span class="kwd">in</span> <span class="id">setT</span>] = (<span class="id">range</span> (<span class="id">infs</span> <span class="id">u</span>))) // <span class="id">opprK</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sups_preimage</span> <span class="id">T</span> (<span class="id">D</span> : <span class="id">set</span> <span class="id">T</span>) <span class="id">r</span> (<span class="id">f</span> : (<span class="id">T</span> -&gt; <span class="id">R</span>)^<span class="id">nat</span>) <span class="id">n</span> :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">t</span>, <span class="id">D</span> <span class="id">t</span> -&gt; <span class="id">has_ubound</span> (<span class="id">range</span> (<span class="id">f</span> ^~ <span class="id">t</span>))) -&gt;<br/>
&nbsp;&nbsp;<span class="id">D</span> `&amp;` (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">sups</span> (<span class="id">f</span> ^~<span class="id">x</span>) <span class="id">n</span>) @^-1` `]<span class="id">r</span>, +<span class="id">oo</span>[%<span class="id">classic</span> =<br/>
&nbsp;&nbsp;<span class="id">D</span> `&amp;` \<span class="id">bigcup_</span>(<span class="id">k</span> <span class="kwd">in</span> [<span class="id">set</span> <span class="id">k</span> | <span class="id">n</span> &lt;= <span class="id">k</span>]%<span class="id">N</span>) <span class="id">f</span> <span class="id">k</span> @^-1` `]<span class="id">r</span>, +<span class="id">oo</span>[.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof217')">Proof.</span></div>
<div class="proofscript" id="proof217">
<span class="id">move</span>=&gt; <span class="id">f_ub</span>; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span>.<br/>
- <span class="id">have</span> [|/<span class="id">set0P</span> <span class="id">h</span>] := <span class="id">eqVneq</span> (<span class="id">sdrop</span> (<span class="id">f</span> ^~ <span class="id">t</span>) <span class="id">n</span>) <span class="id">set0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; /(<span class="id">_</span> (<span class="id">f</span> <span class="id">n</span> <span class="id">t</span>))[+ <span class="id">_</span>] =&gt; /<span class="id">forall2NP</span>/(<span class="id">_</span> <span class="id">n</span>)/= [].<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> /= <span class="id">in_itv</span> /= <span class="id">andbT</span> =&gt; -[<span class="id">Dt</span>].<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; /(<span class="id">sup_gt</span> <span class="id">h</span>)[<span class="id">_</span> [<span class="id">m</span> /= <span class="id">nm</span> &lt;-]] <span class="id">rfmt</span>. <span class="id">split</span> =&gt; //; <span class="kwd">exists</span> <span class="id">m</span> =&gt; //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /= <span class="id">in_itv</span> /= <span class="id">rfmt</span>.<br/>
- <span class="id">move</span>=&gt; [<span class="id">Dt</span> [<span class="id">k</span> /= <span class="id">nk</span>]]; <span class="id">rewrite</span> <span class="id">in_itv</span> /= <span class="id">andbT</span> =&gt; <span class="id">rfkt</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>=&gt; //; <span class="id">rewrite</span> /= <span class="id">in_itv</span> /= <span class="id">andbT</span>; <span class="id">apply</span>: (<span class="id">lt_le_trans</span> <span class="id">rfkt</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">sup_ub</span>; [<span class="id">exact</span>/<span class="id">has_ubound_sdrop</span>/<span class="id"><a href="mathcomp.analysis.sequences.html#lim_sup">f_ub</a></span>|<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">k</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">infs_preimage</span> <span class="id">T</span> (<span class="id">D</span> : <span class="id">set</span> <span class="id">T</span>) <span class="id">r</span> (<span class="id">f</span> : (<span class="id">T</span> -&gt; <span class="id">R</span>)^<span class="id">nat</span>) <span class="id">n</span> :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">t</span>, <span class="id">D</span> <span class="id">t</span> -&gt; <span class="id">has_lbound</span> (<span class="id">range</span> (<span class="id"><a name="cvg_sups">f</a></span> ^~ <span class="id">t</span>))) -&gt;<br/>
&nbsp;&nbsp;<span class="id">D</span> `&amp;` (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">infs</span> (<span class="id">f</span> ^~ <span class="id">x</span>) <span class="id">n</span>) @^-1` `]-<span class="id">oo</span>, <span class="id">r</span>[ =<br/>
&nbsp;&nbsp;<span class="id">D</span> `&amp;` \<span class="id">bigcup_</span>(<span class="id">k</span> <span class="kwd">in</span> [<span class="id">set</span> <span class="id">k</span> | <span class="id">n</span> &lt;= <span class="id">k</span>]%<span class="id">N</span>) <span class="id">f</span> <span class="id">k</span> @^-1` `]-<span class="id">oo</span>, <span class="id">r</span>[.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof218')">Proof.</span></div>
<div class="proofscript" id="proof218">
<span class="id">move</span>=&gt; <span class="id"><a href="mathcomp.analysis.sequences.html#is_cvg_sups">lb_f</a></span>; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span>.<br/>
- <span class="id">have</span> [|/<span class="id">set0P</span> <span class="id">h</span>] := <span class="id">eqVneq</span> (<span class="id">sdrop</span> (<span class="id">f</span> ^~ <span class="id">t</span>) <span class="id">n</span>) <span class="id">set0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; /(<span class="id">_</span> (<span class="id">f</span> <span class="id">n</span> <span class="id">t</span>))[+ <span class="id">_</span>] =&gt; /<span class="id">forall2NP</span>/(<span class="id">_</span> <span class="id">n</span>)/= [].<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> /= <span class="id">in_itv</span> /= =&gt; -[<span class="id">Dt</span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt;  /(<span class="id">inf_lt</span> <span class="id">h</span>)[<span class="id">_</span> [<span class="id">m</span> /= <span class="id">nm</span> &lt;-]] <span class="id">fmtr</span>; <span class="id">split</span> =&gt; //; <span class="kwd">exists</span> <span class="id">m</span>.<br/>
- <span class="id">move</span>=&gt; [<span class="id">Dt</span> [<span class="id">k</span> /= <span class="id">nk</span>]]; <span class="id"><a href="mathcomp.analysis.normedtype.html#bounded_fun">rewrite</a></span> /= <span class="id">in_itv</span> /= =&gt; <span class="id">fktr</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">in_itv</span> /=; <span class="id">split</span> =&gt; //; <span class="id">apply</span>: <span class="id">le_lt_trans</span> <span class="id">fktr</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">inf_lb</span> =&gt; //; [<span class="id">exact</span>/<span class="id">has_lbound_sdrop</span>/<span class="id">lb_f</span>|<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">k</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bounded_fun_has_lbound_sups</span> <span class="id">u</span> :<br/>
&nbsp;&nbsp;<span class="id">bounded_fun</span> <span class="id">u</span> -&gt; <span class="id">has_lbound</span> (<span class="id">range</span> (<span class="id">sups</span> <span class="id">u</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof219')">Proof.</span></div>
<div class="proofscript" id="proof219">
<span class="id">move</span>=&gt; /[<span class="id">dup</span>] <span class="id">ba</span> /<span class="id">bounded_fun_has_lbound</span>/<span class="id">has_lbound_sdrop</span> <span class="id">h</span>.<br/>
<span class="id">have</span> [<span class="id">M</span> <span class="id">hM</span>] := <span class="id">h</span> <span class="id">O</span>; <span class="kwd">exists</span> <span class="id">M</span> =&gt; <span class="id">y</span> [<span class="id">n</span> <span class="id">_</span> &lt;-].<br/>
<span class="id">rewrite</span> (@<span class="id">le_trans</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">u</span> <span class="id">n</span>)) //; <span class="id">first</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">hM</span>; <span class="kwd">exists</span> <span class="id">n</span>.<br/>
<span class="id">apply</span>: <span class="id">sup_ub</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">n</span> =&gt; /=.<br/>
<span class="kwd">by</span> <span class="id">move</span>: <span class="id">ba</span> =&gt; /<span class="id">bounded_fun_has_ubound</span>/<span class="id">has_ubound_sdrop</span>; <span class="id">exact</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bounded_fun_has_ubound_infs</span> <span class="id">u</span> :<br/>
&nbsp;&nbsp;<span class="id">bounded_fun</span> <span class="id">u</span> -&gt; <span class="id">has_ubound</span> (<span class="id">range</span> (<span class="id">infs</span> <span class="id">u</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof220')">Proof.</span></div>
<div class="proofscript" id="proof220">
<span class="id">move</span>=&gt; /[<span class="id">dup</span>] <span class="id">ba</span> /<span class="id">bounded_fun_has_ubound</span>/<span class="id">has_ubound_sdrop</span> <span class="id">h</span>.<br/>
<span class="id"><a href="mathcomp.analysis.normedtype.html#bounded_fun_has_ubound">have</a></span> [<span class="id">M</span> <span class="id">hM</span>] := <span class="id">h</span> <span class="id">O</span>; <span class="kwd">exists</span> <span class="id">M</span> =&gt; <span class="id">y</span> [<span class="id"><a href="mathcomp.analysis.normedtype.html#limD">n</a></span> <span class="id">_</span> &lt;-].<br/>
<span class="id">rewrite</span> (@<span class="id">le_trans</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">u</span> <span class="id">n</span>)) //; <span class="id">last</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">hM</span>; <span class="kwd">exists</span> <span class="id">n</span>.<br/>
<span class="id">apply</span>: <span class="id">inf_lb</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">n</span> =&gt; /=.<br/>
<span class="kwd">by</span> <span class="id">move</span>: <span class="id">ba</span> =&gt; /<span class="id">bounded_fun_has_lbound</span>/<span class="id">has_lbound_sdrop</span>; <span class="id">exact</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">sups_infs</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">limn_sup_limn_inf</span>.<br/>
<span class="kwd">Variable</span> <span class="id">R</span> : <span class="id">realType</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">r</span> : <span class="id">R</span>) (<span class="id">u</span> <span class="id">v</span> : <span class="id">R</span>^<span class="id">o</span>^<span class="id">nat</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">limn_sup</span> <span class="id">u</span> := <span class="id">lim</span> (<span class="id">sups</span> <span class="id">u</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">limn_inf</span> <span class="id">u</span> := <span class="id">lim</span> (<span class="id">infs</span> <span class="id">u</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">limn_infN</span> <span class="id">u</span> : <span class="id">cvg</span> <span class="id">u</span> -&gt; <span class="id">limn_inf</span> (-%<span class="id">R</span> \<span class="id">o</span> <span class="id">u</span>) = - <span class="id">limn_sup</span> <span class="id">u</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof221')">Proof.</span></div>
<div class="proofscript" id="proof221">
<span class="id">move</span>=&gt; <span class="id"><a href="mathcomp.analysis.sequences.html#infs">cu_</a></span>; <span class="id">rewrite</span> /<span class="id">limn_inf</span> <span class="id"><a href="mathcomp.analysis.sequences.html#infs">infsN</a></span>.<br/>
<span class="id">rewrite</span> (@<span class="id">limN</span> <span class="id">_</span> [<span class="id">normedModType</span> <span class="id">R</span> <span class="id">of</span> <span class="id">R</span>^<span class="id">o</span>] <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">sups</span> <span class="id">u</span>)) //.<br/>
<span class="id">exact</span>: <span class="id">is_cvg_sups</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">limn_supE</span> <span class="id">u</span> : <span class="id">bounded_fun</span> <span class="id">u</span> -&gt; <span class="id">limn_sup</span> <span class="id">u</span> = <span class="id">inf</span> (<span class="id">range</span> (<span class="id">sups</span> <span class="id">u</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof222')">Proof.</span></div>
<div class="proofscript" id="proof222">
<span class="id">move</span>=&gt; <span class="id">ba</span>; <span class="id">apply</span>/<span class="id">cvg_lim</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">Rhausdorff</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">cvg_sups_inf</span>; [<span class="id">exact</span>/<span class="id">bounded_fun_has_ubound</span>|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">bounded_fun_has_lbound</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">limn_infE</span> <span class="id">u</span> : <span class="id">bounded_fun</span> <span class="id">u</span> -&gt; <span class="id">limn_inf</span> <span class="id">u</span> = <span class="id">sup</span> (<span class="id">range</span> (<span class="id">infs</span> <span class="id">u</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof223')">Proof.</span></div>
<div class="proofscript" id="proof223">
<span class="id">move</span>=&gt; <span class="id">ba</span>; <span class="id">apply</span>/<span class="id">cvg_lim</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">Rhausdorff</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">cvg_infs_sup</span>; [<span class="id">exact</span>/<span class="id">bounded_fun_has_ubound</span>|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">bounded_fun_has_lbound</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">limn_inf_sup</span> <span class="id">u</span> : <span class="id">cvg</span> <span class="id"><a href="mathcomp.analysis.sequences.html#lim_sup_lim_inf.R">u</a></span> -&gt; <span class="id"><a href="mathcomp.analysis.sequences.html#lim_sup_lim_inf.R">limn_inf</a></span> <span class="id">u</span> &lt;= <span class="id">limn_sup</span> <span class="id">u</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof224')">Proof.</span></div>
<div class="proofscript" id="proof224">
<span class="id">move</span>=&gt; <span class="id">cf_</span>; <span class="id">apply</span>: <span class="id">ler_lim</span>; [<span class="id">exact</span>: <span class="id">is_cvg_infs</span>|<span class="id">exact</span>: <span class="id">is_cvg_sups</span>|].<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">nearW</span> =&gt; <span class="id">n</span>; <span class="id">apply</span>: <span class="id">infs_le_sups</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_limn_inf_sup</span> <span class="id">u</span> <span class="id">l</span> : <span class="id">u</span> --&gt; <span class="id">l</span> -&gt; (<span class="id">limn_inf</span> <span class="id">u</span> = <span class="id"><a href="mathcomp.analysis.sequences.html#nondecreasing_infs">l</a></span>) * (<span class="id">limn_sup</span> <span class="id">u</span> = <span class="id"><a href="mathcomp.analysis.normedtype.html#bounded_fun_has_lbound">l</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof225')">Proof.</span></div>
<div class="proofscript" id="proof225">
<span class="id">move</span>=&gt; <span class="id">ul</span>.<br/>
<span class="id">have</span> /<span class="id">cvg_seq_bounded</span> [<span class="id">M</span> [<span class="id">Mr</span> <span class="id">Mu</span>]] : <span class="id">cvg</span> <span class="id">u</span> <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">cvg_ex</span>; <span class="id">eexists</span>; <span class="id">exact</span>: <span class="id">ul</span>.<br/>
<span class="id">suff</span>: <span class="id">limn_sup</span> <span class="id">u</span> &lt;= <span class="id">l</span> &lt;= <span class="id">limn_inf</span> <span class="id">u</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; /<span class="id">andP</span>[<span class="id">sul</span> <span class="id">liu</span>].<br/>
&nbsp;&nbsp;<span class="id">have</span> /<span class="id">limn_inf_sup</span> <span class="id">iusu</span> : <span class="id">cvg</span> <span class="id">u</span> <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">cvg_ex</span>; <span class="id">eexists</span>; <span class="id">exact</span>: <span class="id">ul</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">eq_le</span> <span class="id">liu</span> <span class="id">andbT</span> (<span class="id">le_trans</span> <span class="id">iusu</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">eq_le</span> <span class="id">sul</span> /= (<span class="id">le_trans</span> <span class="id">_</span> <span class="id">iusu</span>).<br/>
<span class="id">apply</span>/<span class="id">andP</span>; <span class="id">split</span>.<br/>
- <span class="id">apply</span>/<span class="id">ler_addgt0Pr</span> =&gt; <span class="id">e</span> <span class="id">e0</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">limr_le</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">is_cvg_sups</span>; <span class="id">apply</span>/<span class="id">cvg_ex</span>; <span class="kwd">exists</span> <span class="id">l</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>/<span class="id">cvgrPdist_lt</span> : (<span class="id">ul</span>) =&gt; /(<span class="id">_</span> <span class="id">_</span> <span class="id">e0</span>) -[<span class="id">k</span> <span class="id">_</span> <span class="id">klu</span>].<br/>
&nbsp;&nbsp;<span class="id">near</span>=&gt; <span class="id">n</span>; <span class="id">have</span> <span class="id">kn</span> : (<span class="id">k</span> &lt;= <span class="id">n</span>)%<span class="id">N</span> <span class="kwd">by</span> <span class="id">near</span>: <span class="id">n</span>; <span class="kwd">exists</span> <span class="id">k</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">sup_le_ub</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">u</span> <span class="id">n</span>) =&gt; /=; <span class="kwd">exists</span> <span class="id">n</span> =&gt; //=.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">_</span> /= [<span class="id">m</span> <span class="id"><a href="mathcomp.analysis.sequences.html#cvg_lim_supE">nm</a></span>] &lt;-; <span class="id">apply</span>/<span class="id">ltW</span>/<span class="id">ltr_distl_addr</span>; <span class="id">rewrite</span> <span class="id">distrC</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: (<span class="id">klu</span> <span class="id">m</span>) =&gt; /=; <span class="id">rewrite</span> (<span class="id">leq_trans</span> <span class="id">kn</span>).<br/>
- <span class="id">apply</span>/<span class="id">ler_addgt0Pr</span> =&gt; <span class="id">e</span> <span class="id">e0</span>; <span class="id">rewrite</span> -<span class="id">ler_subl_addr</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">limr_ge</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">is_cvg_infs</span>; <span class="id">apply</span>/<span class="id">cvg_ex</span>; <span class="kwd">exists</span> <span class="id">l</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>/<span class="id">cvgrPdist_lt</span> : (<span class="id">ul</span>) =&gt; /(<span class="id">_</span> <span class="id">_</span> <span class="id">e0</span>) -[<span class="id">k</span> <span class="id">_</span> <span class="id">klu</span>].<br/>
&nbsp;&nbsp;<span class="id">near</span>=&gt; <span class="id">n</span>; <span class="id">have</span> <span class="id">kn</span>: (<span class="id">k</span> &lt;= <span class="id">n</span>)%<span class="id">N</span> <span class="kwd">by</span> <span class="id">near</span>: <span class="id">n</span>; <span class="kwd">exists</span> <span class="id">k</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">lb_le_inf</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">u</span> <span class="id">n</span>) =&gt; /=; <span class="kwd">exists</span> <span class="id">n</span> =&gt; //=.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">_</span> /= [<span class="id">m</span> <span class="id">nm</span>] &lt;-; <span class="id">apply</span>/<span class="id">ltW</span>/<span class="id">ltr_distl_subl</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: (<span class="id">klu</span> <span class="id">m</span>) =&gt; /=; <span class="id">rewrite</span> (<span class="id">leq_trans</span> <span class="id">kn</span>).<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_limn_infE</span> <span class="id"><a href="mathcomp.analysis.sequences.html#esups">u</a></span> : <span class="id">cvg</span> <span class="id">u</span> -&gt; <span class="id">limn_inf</span> <span class="id">u</span> = <span class="id">lim</span> <span class="id">u</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof226')">Proof.</span></div>
<div class="proofscript" id="proof226">
<span class="id">move</span>=&gt; /<span class="id"><a href="mathcomp.classical.boolp.html#predeqE">cvg_ex</a></span>[<span class="id">l</span> <span class="id">ul</span>]; <span class="id">have</span> [-&gt; <span class="id">_</span>] := <span class="id">cvg_limn_inf_sup</span> <span class="id">ul</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>/<span class="id">cvg_lim</span> : <span class="id">ul</span> =&gt; -&gt;.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_limn_supE</span> <span class="id">u</span> : <span class="id">cvg</span> <span class="id">u</span> -&gt; <span class="id">limn_sup</span> <span class="id">u</span> = <span class="id">lim</span> <span class="id">u</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof227')">Proof.</span></div>
<div class="proofscript" id="proof227">
<span class="id">move</span>=&gt; /<span class="id">cvg_ex</span>[<span class="id">l</span> <span class="id">ul</span>]; <span class="id">have</span> [<span class="id">_</span> -&gt;] := <span class="id">cvg_limn_inf_sup</span> <span class="id">ul</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>/<span class="id">cvg_lim</span> : <span class="id">ul</span> =&gt; -&gt;.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_sups</span> <span class="id">u</span> <span class="id">l</span> : <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">u</a></span> --&gt; <span class="id">l</span> -&gt; <span class="id">sups</span> <span class="id">u</span> --&gt; (<span class="id">l</span> : <span class="id">R</span>^<span class="id">o</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof228')">Proof.</span></div>
<div class="proofscript" id="proof228">
<span class="id">move</span>=&gt; <span class="id">ul</span>; <span class="id">have</span> [<span class="id">iul</span> &lt;-] := <span class="id">cvg_limn_inf_sup</span> <span class="id">ul</span>.<br/>
<span class="id">apply</span>/<span class="id">cvg_closeP</span>; <span class="id">split</span> =&gt; //; <span class="id">apply</span>: <span class="id">is_cvg_sups</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">cvg_ex</span>; <span class="id">eexists</span>; <span class="id">apply</span>: <span class="id">ul</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nondecreasing_einfs">cvg_infs</a></span> <span class="id">u</span> <span class="id">l</span> : <span class="id">u</span> --&gt; <span class="id">l</span> -&gt; <span class="id">infs</span> <span class="id">u</span> --&gt; (<span class="id">l</span> : <span class="id">R</span>^<span class="id">o</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof229')">Proof.</span></div>
<div class="proofscript" id="proof229">
<span class="id">move</span>=&gt; <span class="id">ul</span>; <span class="id">have</span> [&lt;- <span class="id">iul</span>] := <span class="id">cvg_limn_inf_sup</span> <span class="id">ul</span>.<br/>
<span class="id">apply</span>/<span class="id">cvg_closeP</span>; <span class="id">split</span> =&gt; //; <span class="id">apply</span>: <span class="id">is_cvg_infs</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">cvg_ex</span>; <span class="id">eexists</span>; <span class="id">apply</span>: <span class="id">ul</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="mathcomp.analysis.sequences.html#esups">le_limn_supD</a></span> <span class="id">u</span> <span class="id">v</span> : <span class="id">bounded_fun</span> <span class="id">u</span> -&gt; <span class="id">bounded_fun</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">limn_sup</span> (<span class="id">u</span> \+ <span class="id">v</span>) &lt;= <span class="id">limn_sup</span> <span class="id">u</span> + <span class="id">limn_sup</span> <span class="id">v</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof230')">Proof.</span></div>
<div class="proofscript" id="proof230">
<span class="id">move</span>=&gt; <span class="id">ba</span> <span class="id">bb</span>; <span class="id">have</span> <span class="id">ab</span> <span class="id">k</span> : <span class="id">sups</span> (<span class="id">u</span> \+ <span class="id">v</span>) <span class="id">k</span> &lt;= <span class="id">sups</span> <span class="id">u</span> <span class="id">k</span> + <span class="id">sups</span> <span class="id">v</span> <span class="id">k</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">sup_le_ub</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="kwd">exists</span> ((<span class="id">u</span> \+ <span class="id">v</span>) <span class="id">k</span>); <span class="kwd">exists</span> <span class="id">k</span> =&gt; /=.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">M</span> [<span class="id">n</span> /= <span class="id">kn</span> &lt;-]; <span class="id">apply</span>: <span class="id">ler_add</span>; <span class="id">apply</span>: <span class="id">sup_ub</span>; [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">has_ubound_sdrop</span>/<span class="id">bounded_fun_has_ubound</span>; <span class="id">exact</span> | <span class="kwd">exists</span> <span class="id">n</span> |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">has_ubound_sdrop</span>/<span class="id">bounded_fun_has_ubound</span>; <span class="id">exact</span> | <span class="kwd">exists</span> <span class="id">n</span> ].<br/>
<span class="id">have</span> <span class="id">cu</span> : <span class="id">cvg</span> (<span class="id">sups</span> <span class="id">u</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">nonincreasing_is_cvgn</span>; <span class="id">last</span> <span class="id">exact</span>: <span class="id">bounded_fun_has_lbound_sups</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">nonincreasing_sups</span>/<span class="id">bounded_fun_has_ubound</span>.<br/>
<span class="id">have</span> <span class="id">cv</span> : <span class="id">cvg</span> (<span class="id"><a href="mathcomp.analysis.sequences.html#nondecreasing_einfs">sups</a></span> <span class="id">v</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">nonincreasing_is_cvgn</span>; <span class="id">last</span> <span class="id">exact</span>: <span class="id">bounded_fun_has_lbound_sups</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">nonincreasing_sups</span>/<span class="id">bounded_fun_has_ubound</span>.<br/>
<span class="id">rewrite</span> -(@<span class="id">limD</span> <span class="id">_</span> [<span class="id">normedModType</span> <span class="id">R</span> <span class="id">of</span> <span class="id">R</span>^<span class="id">o</span>] <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">cu</span> <span class="id">cv</span>); <span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.sequences.html#esups">ler_lim</a></span>.<br/>
- <span class="id">apply</span>: <span class="id">nonincreasing_is_cvgn</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">bounded_fun_has_lbound_sups</span>/<span class="id">bounded_funD</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">nonincreasing_sups</span>/<span class="id">bounded_fun_has_ubound</span>/<span class="id">bounded_funD</span>.<br/>
- <span class="id">exact</span>: (@<span class="id">is_cvgD</span> <span class="id">_</span> [<span class="id">normedModType</span> <span class="id">R</span> <span class="id">of</span> <span class="id">R</span>^<span class="id">o</span>] <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">cu</span> <span class="id">cv</span>).<br/>
- <span class="id">exact</span>: <span class="id">nearW</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">le_limn_infD</span> <span class="id">u</span> <span class="id">v</span> : <span class="id">bounded_fun</span> <span class="id">u</span> -&gt; <span class="id">bounded_fun</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">limn_inf</span> <span class="id">u</span> + <span class="id">limn_inf</span> <span class="id">v</span> &lt;= <span class="id">limn_inf</span> (<span class="id">u</span> \+ <span class="id">v</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof231')">Proof.</span></div>
<div class="proofscript" id="proof231">
<span class="id">move</span>=&gt; <span class="id">ba</span> <span class="id">bb</span>; <span class="id">have</span> <span class="id"><a name="einfs_preimage">ab</a></span> <span class="id">k</span> : <span class="id">infs</span> <span class="id">u</span> <span class="id">k</span> + <span class="id">infs</span> <span class="id">v</span> <span class="id">k</span> &lt;= <span class="id">infs</span> (<span class="id">u</span> \+ <span class="id">v</span>) <span class="id">k</span>.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">lb_le_inf</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="kwd">exists</span> ((<span class="id">u</span> \+ <span class="id">v</span>) <span class="id">k</span>); <span class="kwd">exists</span> <span class="id">k</span> =&gt; /=.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">M</span> [<span class="id">n</span> /= <span class="id">kn</span> &lt;-]; <span class="id">apply</span>: <span class="id">ler_add</span>; <span class="id">apply</span>: <span class="id">inf_lb</span>; [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">has_lbound_sdrop</span>/<span class="id">bounded_fun_has_lbound</span>; <span class="id">exact</span> | <span class="kwd">exists</span> <span class="id">n</span> |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">has_lbound_sdrop</span>/<span class="id">bounded_fun_has_lbound</span>; <span class="id">exact</span> | <span class="kwd">exists</span> <span class="id">n</span> ].<br/>
<span class="id">have</span> <span class="id">cu</span> : <span class="id">cvg</span> (<span class="id">infs</span> <span class="id">u</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">nondecreasing_is_cvgn</span>; <span class="id">last</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#negP">exact</a></span>: <span class="id">bounded_fun_has_ubound_infs</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">nondecreasing_infs</span>/<span class="id">bounded_fun_has_lbound</span>.<br/>
<span class="id">have</span> <span class="id">cv</span> : <span class="id">cvg</span> (<span class="id">infs</span> <span class="id">v</span>).<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id"><a href="mathcomp.analysis.sequences.html#esups_einfs">nondecreasing_is_cvgn</a></span>; <span class="id">last</span> <span class="id">exact</span>: <span class="id">bounded_fun_has_ubound_infs</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">nondecreasing_infs</span>/<span class="id"><a href="mathcomp.analysis.sequences.html#esups">bounded_fun_has_lbound</a></span>.<br/>
<span class="id">rewrite</span> -(@<span class="id"><a href="mathcomp.analysis.reals.html#Real.Exports.realType">limD</a></span> <span class="id">_</span> [<span class="id">normedModType</span> <span class="id">R</span> <span class="id">of</span> <span class="id">R</span>^<span class="id">o</span>] <span class="id"><a href="mathcomp.analysis.topology.html#lim">_</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">cu</span> <span class="id">cv</span>); <span class="id">apply</span>: <span class="id">ler_lim</span>.<br/>
- <span class="id">exact</span>: (@<span class="id">is_cvgD</span> <span class="id">_</span> [<span class="id">normedModType</span> <span class="id">R</span> <span class="id">of</span> <span class="id">R</span>^<span class="id">o</span>] <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">cu</span> <span class="id">cv</span>).<br/>
- <span class="id">apply</span>: <span class="id">nondecreasing_is_cvgn</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">bounded_fun_has_ubound_infs</span>/<span class="id">bounded_funD</span>.<br/>
&nbsp;&nbsp;<span class="id">exact</span>/<span class="id">nondecreasing_infs</span>/<span class="id">bounded_fun_has_lbound</span>/<span class="id">bounded_funD</span>.<br/>
- <span class="id">exact</span>: <span class="id">nearW</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">limn_supD</span> <span class="id">u</span> <span class="id">v</span> : <span class="id">cvg</span> <span class="id"><a name="lim_einf">u</a></span> -&gt; <span class="id">cvg</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">limn_sup</span> (<span class="id">u</span> \+ <span class="id">v</span>) = <span class="id">limn_sup</span> <span class="id">u</span> + <span class="id">limn_sup</span> <span class="id">v</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof232')">Proof.</span></div>
<div class="proofscript" id="proof232">
<span class="id">move</span>=&gt; <span class="id">cu</span> <span class="id">cv</span>; <span class="id">have</span> [<span class="id">ba</span> <span class="id"><a name="lim_esup_inf.R">bb</a></span>] := (<span class="id">cvg_seq_bounded</span> <span class="id">cu</span>, <span class="id">cvg_seq_bounded</span> <span class="id">cv</span>).<br/>
<span class="id">apply</span>/<span class="id">eqP</span>; <span class="id"><a href="mathcomp.analysis.sequences.html#lim_esup_inf.R">rewrite</a></span> <span class="id">eq_le</span> <span class="id">le_limn_supD</span> //=.<br/>
<span class="id">have</span> := @<span class="id">le_limn_supD</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">bounded_funD</span> <span class="id">ba</span> <span class="id">bb</span>) (<span class="id">bounded_funN</span> <span class="id">bb</span>).<br/>
<span class="id">rewrite</span> -<span class="id">ler_subl_addr</span>; <span class="id">apply</span>: <span class="id">le_trans</span>.<br/>
<span class="id">rewrite</span> -[<span class="id">_</span> \+ <span class="id">_</span>]/(<span class="id">u</span> + <span class="id">v</span> - <span class="id">v</span>) <span class="id">addrK</span> -<span class="id">limn_infN</span>; <span class="id">last</span> <span class="id">exact</span>: <span class="id">is_cvgN</span>.<br/>
<span class="id">rewrite</span> /<span class="id">comp</span> /=; <span class="id"><a href="mathcomp.analysis.sequences.html#einfs">under</a></span> <span class="id">eq_fun</span> <span class="id">do</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#fin_num_adde_defr">opprK</a></span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ler_add</span>// <span class="id">cvg_limn_infE</span>// <span class="id">cvg_limn_supE</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">limn_infD</span> <span class="id">u</span> <span class="id">v</span> : <span class="id">cvg</span> <span class="id">u</span> -&gt; <span class="id">cvg</span> <span class="id">v</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">limn_inf</span> (<span class="id">u</span> \+ <span class="id">v</span>) = <span class="id">limn_inf</span> <span class="id"><a href="mathcomp.classical.boolp.html#funeqE">u</a></span> + <span class="id">limn_inf</span> <span class="id">v</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof233')">Proof.</span></div>
<div class="proofscript" id="proof233">
<span class="id">move</span>=&gt; <span class="id">cu</span> <span class="id">cv</span>; <span class="id">rewrite</span> (<span class="id">cvg_limn_infE</span> <span class="id">cu</span>) -(<span class="id">cvg_limn_supE</span> <span class="id">cu</span>).<br/>
<span class="id">rewrite</span> (<span class="id">cvg_limn_infE</span> <span class="id">cv</span>) -(<span class="id">cvg_limn_supE</span> <span class="id">cv</span>) -<span class="id">limn_supD</span>//.<br/>
<span class="id">rewrite</span> <span class="id">cvg_limn_supE</span>; <span class="id">last</span> <span class="id">exact</span>: (@<span class="id">is_cvgD</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">cu</span> <span class="id">cv</span>).<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">cvg_limn_infE</span> //; <span class="id">exact</span>: (@<span class="id">is_cvgD</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">cu</span> <span class="id">cv</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">limn_sup_limn_inf</span>.<br/>
<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6", <span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">limn_sup</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">lim_sup</span> := <span class="id">limn_sup</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id"><a href="mathcomp.analysis.sequences.html#esups">analysis</a></span> 0.6.6", <span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">limn_inf</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">lim_inf</span> := <span class="id">limn_sup</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6", <span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">limn_infN</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">lim_infN</span> := <span class="id">limn_infN</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id"><a href="mathcomp.analysis.topology.html#closeE">since</a></span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6", <span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">limn_supE</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">lim_supE</span> := <span class="id">limn_supE</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id"><a href="mathcomp.analysis.ereal.html#lb_ereal_inf">analysis</a></span> 0.6.6", <span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">limn_infE</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">lim_infE</span> := <span class="id">limn_infE</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6", <span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">limn_inf_sup</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">lim_inf_le_lim_sup</span> := <span class="id">limn_inf_sup</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6", <span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">cvg_limn_infE</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">cvg_lim_infE</span> := <span class="id">cvg_limn_infE</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6", <span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">cvg_limn_supE</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">cvg_lim_supE</span> := <span class="id">cvg_limn_supE</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6", <span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">le_limn_supD</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">le_lim_supD</span> := <span class="id">le_limn_supD</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6", <span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">le_limn_infD</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">le_lim_infD</span> := <span class="id">le_limn_infD</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id"><a href="mathcomp.analysis.normedtype.html#cvgeNyPle">deprecated</a></span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6", <span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">limn_supD</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">lim_supD</span> := <span class="id">limn_supD</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6", <span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">limn_infD</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id"><a name="cvgNy_einfs">lim_infD</a></span> := <span class="id">limn_infD</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id">esups_einfs</span>.<br/>
<span class="kwd">Variable</span> <span class="id">R</span> : <span class="id">realType</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">u</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>).<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">esups</span> <span class="id"><a name="cvgNy_esups">u</a></span> := [<span class="id">sequence</span> <span class="id">ereal_sup</span> (<span class="id">sdrop</span> <span class="id">u</span> <span class="id">n</span>)]<span class="id">_n</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">einfs</span> <span class="id">u</span> := [<span class="id">sequence</span> <span class="id">ereal_inf</span> (<span class="id">sdrop</span> <span class="id">u</span> <span class="id">n</span>)]<span class="id">_n</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">esupsN</span> <span class="id">u</span> : <span class="id">esups</span> (-%<span class="id">E</span> \<span class="id">o</span> <span class="id">u</span>) = -%<span class="id">E</span> \<span class="id">o</span> <span class="id">einfs</span> <span class="id">u</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof234')">Proof.</span></div>
<div class="proofscript" id="proof234">
<span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">n</span>; <span class="id">rewrite</span> /<span class="id">esups</span> /= <span class="id">oppeK</span>; <span class="id">congr</span> (<span class="id">ereal_sup</span> <span class="id">_</span>).<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">x</span>; <span class="id">split</span> =&gt; [[<span class="id">m</span> /= <span class="id">nm</span> &lt;-]|[<span class="id"><a href="mathcomp.analysis.normedtype.html#eq_cvg">_</a></span> [<span class="id">m</span> /= <span class="id">nm</span>] &lt;-] &lt;-];<br/>
&nbsp;&nbsp;[<span class="kwd">exists</span> (<span class="id">u</span> <span class="id">m</span>) =&gt; //; <span class="kwd">exists</span> <span class="id">m</span> | <span class="kwd">exists</span> <span class="id">m</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">einfsN</span> <span class="id">u</span> : <span class="id">einfs</span> (-%<span class="id">E</span> \<span class="id">o</span> <span class="id">u</span>) = -%<span class="id">E</span> \<span class="id">o</span> <span class="id">esups</span> <span class="id">u</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof235')">Proof.</span></div>
<div class="proofscript" id="proof235">
<span class="kwd">by</span> <span class="id">rewrite</span> [<span class="kwd">in</span> <span class="id">RHS</span>](<span class="id">_</span> : <span class="id">u</span> = -%<span class="id">E</span> \<span class="id">o</span> -%<span class="id">E</span> \<span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">o</a></span> <span class="id">u</span>);<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> ?<span class="id">esupsN</span> <span class="id">funeqE</span> =&gt; <span class="id">n</span> /=; <span class="id">rewrite</span> <span class="id">oppeK</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">nonincreasing_esups</span> <span class="id">u</span> : <span class="id">nonincreasing_seq</span> (<span class="id">esups</span> <span class="id">u</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof236')">Proof.</span></div>
<div class="proofscript" id="proof236">
<span class="id">move</span>=&gt; <span class="id">m</span> <span class="id">n</span> <span class="id">mn</span>; <span class="id">apply</span>: <span class="id">le_ereal_sup</span> =&gt; <span class="id">_</span> /= [<span class="id">k</span> <span class="id">nk</span> &lt;-]; <span class="kwd">exists</span> <span class="id">k</span> =&gt; //=.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">leq_trans</span> <span class="id">mn</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">nondecreasing_einfs</span> <span class="id">u</span> : <span class="id">nondecreasing_seq</span> (<span class="id">einfs</span> <span class="id">u</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof237')">Proof.</span></div>
<div class="proofscript" id="proof237">
<span class="id">move</span>=&gt; <span class="id">m</span> <span class="id">n</span> <span class="id">mn</span>; <span class="id">apply</span>: <span class="id">le_ereal_inf</span> =&gt; <span class="id"><a href="mathcomp.analysis.topology.html#cvg_ballP">_</a></span> /= [<span class="id">k</span> <span class="id">nk</span> &lt;-]; <span class="kwd">exists</span> <span class="id">k</span> =&gt; //=.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">leq_trans</span> <span class="id">mn</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">einfs_le_esups</span> <span class="id">u</span> <span class="id">n</span> : <span class="id">einfs</span> <span class="id">u</span> <span class="id">n</span> &lt;= <span class="id">esups</span> <span class="id">u</span> <span class="id">n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof238')">Proof.</span></div>
<div class="proofscript" id="proof238">
<span class="id">rewrite</span> /<span class="id">einfs</span> /=; <span class="id">set</span> <span class="id">A</span> := <span class="id">sdrop</span> <span class="id">_</span> <span class="id">_</span>; <span class="id">have</span> [<span class="id">a</span> <span class="id">Aa</span>] : <span class="id">A</span> !=<span class="id">set0</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">u</span> <span class="id">n</span>); <span class="id">rewrite</span> /<span class="id">A</span> /=; <span class="kwd">exists</span> <span class="id">n</span> =&gt; //=.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> (@<span class="id">le_trans</span> <span class="id">_</span> <span class="id">_</span> <span class="id">a</span>) //; [<span class="id">exact</span>/<span class="id">ereal_inf_lb</span>|<span class="id">exact</span>/<span class="id">ereal_sup_ub</span>].<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_esups_inf</span> <span class="id">u</span> : <span class="id">esups</span> <span class="id">u</span> --&gt; <span class="id">ereal_inf</span> (<span class="id">range</span> (<span class="id">esups</span> <span class="id">u</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof239')">Proof.</span></div>
<div class="proofscript" id="proof239">
 <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">ereal_nonincreasing_cvgn</span> =&gt; //; <span class="id">exact</span>: <span class="id">nonincreasing_esups</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_cvg_esups</span> <span class="id">u</span> : <span class="id">cvg</span> (<span class="id">esups</span> <span class="id">u</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof240')">Proof.</span></div>
<div class="proofscript" id="proof240">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">cvg_ex</span>; <span class="id">eexists</span>; <span class="id">exact</span>/<span class="id">cvg_esups_inf</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_einfs_sup</span> <span class="id">u</span> : <span class="id">einfs</span> <span class="id">u</span> --&gt; <span class="id">ereal_sup</span> (<span class="id">range</span> (<span class="id">einfs</span> <span class="id">u</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof241')">Proof.</span></div>
<div class="proofscript" id="proof241">
 <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">ereal_nondecreasing_cvgn</span> =&gt; //; <span class="id">exact</span>: <span class="id">nondecreasing_einfs</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_cvg_einfs</span> <span class="id">u</span> : <span class="id">cvg</span> (<span class="id">einfs</span> <span class="id">u</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof242')">Proof.</span></div>
<div class="proofscript" id="proof242">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">cvg_ex</span>; <span class="id">eexists</span>; <span class="id">exact</span>/<span class="id">cvg_einfs_sup</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">esups_preimage</span> <span class="id">T</span> (<span class="id">a</span> : \<span class="id">bar</span> <span class="id">R</span>) (<span class="id">f</span> : (<span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) <span class="id"><a href="mathcomp.analysis.constructive_ereal.html#oppeK">n</a></span> :<br/>
&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">esups</span> (<span class="id">f</span>^~<span class="id">x</span>) <span class="id">n</span>) @^-1` `]<span class="id">a</span>, +<span class="id">oo</span>[ =<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">k</span> <span class="kwd">in</span> [<span class="id">set</span> <span class="id">k</span> | <span class="id">n</span> &lt;= <span class="id">k</span>]%<span class="id">N</span>) <span class="id">f</span> <span class="id">k</span> @^-1` `]<span class="id">a</span>, +<span class="id">oo</span>[.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof243')">Proof.</span></div>
<div class="proofscript" id="proof243">
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span> =&gt; /=.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> /= <span class="id"><a href="mathcomp.analysis.sequences.html#cvg_esups">in_itv</a></span> /= <span class="id">andbT</span>=&gt; /<span class="id">ereal_sup_gt</span>[<span class="id">_</span> [/= <span class="id">k</span> <span class="id">nk</span> &lt;-]] <span class="id">afnt</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">k</span> =&gt; //=; <span class="id">rewrite</span> <span class="id">in_itv</span> /= <span class="id">afnt</span>.<br/>
<span class="id">move</span>=&gt; -[<span class="id">k</span> /= <span class="id">nk</span>] /=; <span class="id">rewrite</span> <span class="id">in_itv</span> /= <span class="id">andbT</span> =&gt; /<span class="id">lt_le_trans</span> <span class="id">afkt</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a name="is_cvg_lim_esupE">in_itv</a></span> <span class="id">andbT</span>/=; <span class="id">apply</span>/<span class="id">afkt</span>/<span class="id">ereal_sup_ub</span>; <span class="kwd">exists</span> <span class="id">k</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">einfs_preimage</span> <span class="id">T</span> (<span class="id">a</span> : \<span class="id">bar</span> <span class="id">R</span>) (<span class="id"><a href="mathcomp.analysis.sequences.html#cvg_lim_einf_sup">f</a></span> : (<span class="id">T</span> -&gt; \<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) <span class="id">n</span> :<br/>
&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">einfs</span> (<span class="id">f</span>^~<span class="id">x</span>) <span class="id">n</span>) @^-1` `[<span class="id">a</span>, +<span class="id">oo</span>[%<span class="id">classic</span> =<br/>
&nbsp;&nbsp;\<span class="id">bigcap_</span>(<span class="id">k</span> <span class="kwd">in</span> [<span class="id">set</span> <span class="id">k</span> | <span class="id">n</span> &lt;= <span class="id">k</span>]%<span class="id">N</span>) <span class="id">f</span> <span class="id">k</span> @^-1` `[<span class="id">a</span>, +<span class="id">oo</span>[%<span class="id">classic</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof244')">Proof.</span></div>
<div class="proofscript" id="proof244">
<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">t</span>; <span class="id">split</span> =&gt; /= [|<span class="id">h</span>].<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">in_itv</span> <span class="id">andbT</span> /= =&gt; <span class="id">h</span> <span class="id">k</span> <span class="id">nk</span> /=.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /= <span class="id">in_itv</span>/= (<span class="id">le_trans</span> <span class="id">h</span>)//; <span class="id">apply</span>: <span class="id">ereal_inf_lb</span>; <span class="kwd">exists</span> <span class="id">k</span>.<br/>
<span class="id">rewrite</span> /= <span class="id">in_itv</span> /= <span class="id">andbT</span> <span class="id">leNgt</span>; <span class="id">apply</span>/<span class="id">negP</span>.<br/>
<span class="id">move</span>=&gt; /<span class="id">ereal_inf_lt</span>[<span class="id">_</span> /= [<span class="id">k</span> <span class="id">nk</span> &lt;-]]; <span class="id">apply</span>/<span class="id">negP</span>.<br/>
<span class="kwd">by</span> <span class="id">have</span> := <span class="id">h</span> <span class="id">_</span> <span class="id"><a name="elim_infN">nk</a></span>; <span class="id">rewrite</span> /= <span class="id">in_itv</span> /= <span class="id">andbT</span> -<span class="id">leNgt</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">esups_einfs</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">limn_esup</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">u</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) := <span class="id">lim</span> (<span class="id">esups</span> <span class="id">u</span>).<br/>
<span class="kwd">Definition</span> <span class="id">limn_einf</span> (<span class="id">R</span> : <span class="id">realType</span>) (<span class="id">u</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) := <span class="id">lim</span> (<span class="id">einfs</span> <span class="id">u</span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id">lim_esup_inf</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ereal_scope</span>.<br/>
<span class="kwd">Variable</span> <span class="id">R</span> : <span class="id">realType</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">u</span> <span class="id">v</span> : (\<span class="id">bar</span> <span class="id">R</span>)^<span class="id">nat</span>) (<span class="id">l</span> : \<span class="id">bar</span> <span class="id">R</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">limn_einf_shift</span> <span class="id">u</span> <span class="id">l</span> : <span class="id">l</span> \<span class="id">is</span> <span class="id">a</span> <span class="id">fin_num</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">limn_einf</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">l</span> + <span class="id">u</span> <span class="id">x</span>) = <span class="id">l</span> + <span class="id">limn_einf</span> <span class="id">u</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof245')">Proof.</span></div>
<div class="proofscript" id="proof245">
<span class="id">move</span>=&gt; <span class="id">lfin</span>; <span class="id">apply</span>/<span class="id">cvg_lim</span> =&gt; //; <span class="id">apply</span>: <span class="id">cvg_trans</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: (@<span class="id">cvgeD</span> <span class="id">_</span> \<span class="id">oo</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">cst</span> <span class="id">l</span>) (<span class="id">einfs</span> <span class="id">u</span>) <span class="id">_</span> (<span class="id">lim</span> (<span class="id">einfs</span> <span class="id">u</span>)));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">exact</span>: <span class="id">fin_num_adde_defr</span>|<span class="id">exact</span>: <span class="id"><a name="cvg_ninfty_esups">cvg_cst</a></span>|<span class="id">exact</span>: <span class="id">is_cvg_einfs</span>].<br/>
<span class="id">suff</span> : <span class="id">einfs</span> (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">l</span> + <span class="id">u</span> <span class="id">n</span>) = (<span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">l</span> + <span class="id">einfs</span> <span class="id">u</span> <span class="id">n</span>) <span class="kwd">by</span> <span class="id">move</span>=&gt; -&gt;.<br/>
<span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id"><a name="cvg_pinfty_einfs">n</a></span>.<br/>
<span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">eq_le</span>; <span class="id">apply</span>/<span class="id">andP</span>; <span class="id">split</span>.<br/>
- <span class="id">rewrite</span> <span class="id">addeC</span> -<span class="id">lee_subl_addr</span>//; <span class="id">apply</span>: <span class="id">lb_ereal_inf</span> =&gt; /= <span class="id">_</span> [<span class="id">m</span> /= <span class="id">mn</span>] &lt;-.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">lee_subl_addr</span>//; <span class="id">apply</span>: <span class="id">ereal_inf_lb</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">m</span> =&gt; //; <span class="id">rewrite</span> <span class="id">addeC</span>.<br/>
- <span class="id">apply</span>: <span class="id">lb_ereal_inf</span> =&gt; /= <span class="id">_</span> [<span class="id">m</span> /= <span class="id">mn</span>] &lt;-.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">lee_add2l</span>//; <span class="id">apply</span>: <span class="id">ereal_inf_lb</span>; <span class="kwd">exists</span> <span class="id">m</span> =&gt; /=.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">limn_esup_le_cvg</span> <span class="id">u</span> <span class="id">l</span> :<br/>
&nbsp;&nbsp;<span class="id">limn_esup</span> <span class="id">u</span> &lt;= <span class="id">l</span> -&gt; (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id">l</span> &lt;= <span class="id">u</span> <span class="id">n</span>) -&gt; <span class="id">u</span> --&gt; <span class="id">l</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof246')">Proof.</span></div>
<div class="proofscript" id="proof246">
<span class="id">move</span>=&gt; <span class="id">supul</span> <span class="id">ul</span>; <span class="id">have</span> <span class="id">usupu</span> <span class="id">n</span> : <span class="id">l</span> &lt;= <span class="id">u</span> <span class="id">n</span> &lt;= <span class="id">esups</span> <span class="id">u</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ul</span> /=; <span class="id">apply</span>/<span class="id">ereal_sup_ub</span>; <span class="kwd">exists</span> <span class="id">n</span> =&gt; /=.<br/>
<span class="id">suff</span> : <span class="id"><a href="mathcomp.analysis.sequences.html#is_cvg_lim_esupE">esups</a></span> <span class="id">u</span> --&gt; <span class="id">l</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: (@<span class="id">squeeze_cvge</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">cst</span> <span class="id">l</span>)) =&gt; //; [<span class="id">exact</span>: <span class="id">nearW</span>|<span class="id">exact</span>: <span class="id">cvg_cst</span>].<br/>
<span class="id">apply</span>/<span class="id">cvg_closeP</span>; <span class="id">split</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id">is_cvg_esups</span>.<br/>
<span class="id">rewrite</span> <span class="id">closeE</span>//; <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">eq_le</span> <span class="id">supul</span>.<br/>
<span class="id">apply</span>: (<span class="id">lime_ge</span> (@<span class="id">is_cvg_esups</span> <span class="id">_</span> <span class="id">_</span>)); <span class="id">apply</span>: <span class="id">nearW</span> =&gt; <span class="id">m</span>.<br/>
<span class="id">have</span> /<span class="id">le_trans</span> : <span class="id">l</span> &lt;= <span class="id">einfs</span> <span class="id">u</span> <span class="id">m</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">lb_ereal_inf</span> =&gt; <span class="id"><a href="mathcomp.analysis.sequences.html#nondecreasing_cvg_le">_</a></span> [<span class="id">p</span> /= <span class="id">pm</span>] &lt;-.<br/>
<span class="kwd">by</span> <span class="id">apply</span>; <span class="id">exact</span>: <span class="id">einfs_le_esups</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">limn_einfN</span> <span class="id">u</span> : <span class="id">limn_einf</span> (-%<span class="id">E</span> \<span class="id">o</span> <span class="id">u</span>) = - <span class="id">limn_esup</span> <span class="id">u</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof247')">Proof.</span></div>
<div class="proofscript" id="proof247">
<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">limn_einf</span> <span class="id">einfsN</span> /<span class="id">limn_esup</span> <span class="id">limeN</span> //; <span class="id">exact</span>/<span class="id">is_cvg_esups</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">limn_esupN</span> <span class="id">u</span> : <span class="id">limn_esup</span> (-%<span class="id">E</span> \<span class="id">o</span> <span class="id">u</span>) = - <span class="id">limn_einf</span> <span class="id">u</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof248')">Proof.</span></div>
<div class="proofscript" id="proof248">
<span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> -<span class="id">eqe_oppLR</span> -<span class="id">limn_einfN</span> /=.<br/>
<span class="kwd">by</span> <span class="id"><a href="mathcomp.analysis.sequences.html#banach_contraction.R">rewrite</a></span> (<span class="id">_</span> : <span class="id">_</span> \<span class="id">o</span> <span class="id">_</span> = <span class="id">u</span>) // <span class="id">funeqE</span> =&gt; <span class="id">n</span> /=; <span class="id">rewrite</span> <span class="id">oppeK</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="mathcomp.analysis.sequences.html#banach_contraction.contractions.base">limn_einf_sup</a></span> <span class="id">u</span> : <span class="id">limn_einf</span> <span class="id">u</span> &lt;= <span class="id"><a name="banach_contraction.contractions.y">limn_esup</a></span> <span class="id">u</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof249')">Proof.</span></div>
<div class="proofscript" id="proof249">
<span class="id">apply</span>: <span class="id">lee_lim</span>; [<span class="id">exact</span>/<span class="id">is_cvg_einfs</span>|<span class="id">exact</span>/<span class="id">is_cvg_esups</span>|].<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">nearW</span>; <span class="id">exact</span>: <span class="id">einfs_le_esups</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvgNy_limn_einf_sup</span> <span class="id">u</span> : <span class="id">u</span> --&gt; -<span class="id">oo</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id">limn_einf</span> <span class="id">u</span> = -<span class="id">oo</span>) * (<span class="id">limn_esup</span> <span class="id">u</span> = -<span class="id">oo</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof250')">Proof.</span></div>
<div class="proofscript" id="proof250">
<span class="id">move</span>=&gt; <span class="id">uoo</span>; <span class="id">suff</span>: <span class="id">limn_esup</span> <span class="id">u</span> = -<span class="id">oo</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; {}<span class="id">uoo</span>; <span class="id"><a href="mathcomp.analysis.sequences.html#banach_contraction.f">split</a></span> =&gt; //; <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> -<span class="id">leeNy_eq</span> -<span class="id">uoo</span> <span class="id">limn_einf_sup</span>.<br/>
<span class="id">apply</span>: <span class="id">cvg_lim</span> =&gt; //=. <span class="id">apply</span>/<span class="id">cvgeNyPle</span> =&gt; <span class="id">M</span>.<br/>
<span class="id">have</span> /<span class="id">cvgeNyPle</span>/(<span class="id">_</span> <span class="id">M</span>)[<span class="id">m</span> <span class="id">_</span> <span class="id">uM</span>] := <span class="id">uoo</span>.<br/>
<span class="id">near</span>=&gt; <span class="id">n</span>; <span class="id">apply</span>: <span class="id">ub_ereal_sup</span> =&gt; <span class="id">_</span> [<span class="id">k</span> /= <span class="id">nk</span> &lt;-].<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">uM</span> =&gt; /=; <span class="id">rewrite</span> (<span class="id">leq_trans</span> <span class="id">_</span> <span class="id">nk</span>)//; <span class="id">near</span>: <span class="id">n</span>; <span class="kwd">exists</span> <span class="id">m</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvgNy_einfs</span> <span class="id">u</span> : <span class="id">u</span> --&gt; -<span class="id">oo</span> -&gt; <span class="id">einfs</span> <span class="id">u</span> --&gt; -<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof251')">Proof.</span></div>
<div class="proofscript" id="proof251">
<span class="id">move</span>=&gt; /<span class="id">cvgNy_limn_einf_sup</span>[<span class="id">uoo</span> <span class="id">_</span>].<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">cvg_closeP</span>; <span class="id">split</span>; [<span class="id">exact</span>: <span class="id">is_cvg_einfs</span>|<span class="id">rewrite</span> <span class="id">closeE</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvgNy_esups</span> <span class="id">u</span> : <span class="id">u</span> --&gt; -<span class="id">oo</span> -&gt; <span class="id">esups</span> <span class="id">u</span> --&gt; -<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof252')">Proof.</span></div>
<div class="proofscript" id="proof252">
<span class="id">move</span>=&gt; /<span class="id">cvgNy_limn_einf_sup</span>[<span class="id">_</span> <span class="id">uoo</span>].<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">cvg_closeP</span>; <span class="id">split</span>; [<span class="id">exact</span>: <span class="id">is_cvg_esups</span>|<span class="id">rewrite</span> <span class="id">closeE</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvgy_einfs</span> <span class="id">u</span> : <span class="id">u</span> --&gt; +<span class="id">oo</span> -&gt; <span class="id">einfs</span> <span class="id">u</span> --&gt; +<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof253')">Proof.</span></div>
<div class="proofscript" id="proof253">
<span class="id">move</span>=&gt; /<span class="id">cvgeN</span>/<span class="id">cvgNy_esups</span>/<span class="id">cvgeN</span>; <span class="id">rewrite</span> <span class="id">esupsN</span>.<br/>
<span class="kwd">by</span> <span class="id">under</span> <span class="id">eq_cvg</span> <span class="id">do</span> <span class="id">rewrite</span> /= <span class="id">oppeK</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#onemMr">cvgy_esups</a></span> <span class="id">u</span> : <span class="id">u</span> --&gt; +<span class="id">oo</span> -&gt; <span class="id">esups</span> <span class="id">u</span> --&gt; +<span class="id">oo</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof254')">Proof.</span></div>
<div class="proofscript" id="proof254">
<span class="id">move</span>=&gt; /<span class="id">cvgeN</span>/<span class="id">cvgNy_einfs</span>/<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#onem_gt0">cvgeN</a></span>; <span class="id">rewrite</span> <span class="id">einfsN</span>.<br/>
<span class="kwd">by</span> <span class="id">under</span> <span class="id">eq_cvg</span> <span class="id">do</span> <span class="id">rewrite</span> /= <span class="id">oppeK</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_esups</span> <span class="id">u</span> <span class="id">l</span> : <span class="id">u</span> --&gt; <span class="id">l</span> -&gt; <span class="id">esups</span> <span class="id">u</span> --&gt; <span class="id">l</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof255')">Proof.</span></div>
<div class="proofscript" id="proof255">
<span class="id">case</span>: <span class="id">l</span> =&gt; [<span class="id">l</span> /<span class="id">fine_cvgP</span>[<span class="id">u_fin_num</span>] <span class="id">ul</span>| |]; <span class="id">last</span> 2 <span class="id">first</span>.<br/>
&nbsp;&nbsp;- <span class="id">exact</span>: <span class="id">cvgy_esups</span>.<br/>
&nbsp;&nbsp;- <span class="id">exact</span>: <span class="id">cvgNy_esups</span>.<br/>
<span class="id">have</span> [<span class="id">p</span> <span class="id">_</span> <span class="id">pu</span>] := <span class="id">u_fin_num</span>; <span class="id">apply</span>/<span class="id">cvg_ballP</span> =&gt; <span class="id">_</span>/<span class="id">posnumP</span>[<span class="id"><a href="mathcomp.analysis.sequences.html#banach_contraction.contractions.y">e</a></span>].<br/>
<span class="id">have</span> : <span class="id">EFin</span> \<span class="id">o</span> <span class="id">sups</span> (<span class="id">fine</span> \<span class="id">o</span> <span class="id">u</span>) --&gt; <span class="id">l</span>%:<span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">continuous_cvg</span> =&gt; //; <span class="id">apply</span>: <span class="id">cvg_sups</span>.<br/>
<span class="id">move</span>=&gt; /<span class="id">cvg_ballP</span> /(<span class="id">_</span> <span class="id">e</span>%:<span class="id">num</span> (<span class="id">gt0</span> <span class="id">_</span>))[<span class="id">q</span> <span class="id">_</span> <span class="id">qsupsu</span>]; <span class="id">near</span>=&gt; <span class="id">n</span>.<br/>
<span class="id">have</span> -&gt; : <span class="id">esups</span> <span class="id">u</span> <span class="id">n</span> = (<span class="id">EFin</span> \<span class="id">o</span> <span class="id">sups</span> (<span class="id">fine</span> \<span class="id">o</span> <span class="id">u</span>)) <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> /= -<span class="id"><a href="mathcomp.analysis.sequences.html#banach_contraction.contractions.C_ge0">ereal_sup_EFin</a></span>; <span class="id">last</span> 2 <span class="id">first</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">apply</span>/<span class="id">has_ubound_sdrop</span>/<span class="id">bounded_fun_has_ubound</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">cvg_seq_bounded</span>/<span class="id">cvg_ex</span>; <span class="id">eexists</span>; <span class="id">exact</span> <span class="id">ul</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="kwd">by</span> <span class="id">eexists</span>; <span class="id">rewrite</span> /<span class="id">sdrop</span> /=; <span class="kwd">exists</span> <span class="id">n</span>; [|<span class="id">reflexivity</span>].<br/>
&nbsp;&nbsp;<span class="id">congr</span> (<span class="id">ereal_sup</span> <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">y</span>; <span class="id">split</span>=&gt; [[<span class="id">m</span> /= <span class="id"><a href="mathcomp.analysis.sequences.html#banach_contraction.contractions.q">nm</a></span> &lt;-{<span class="id">y</span>}]|[<span class="id">r</span> [<span class="id">m</span> /= <span class="id">nm</span> &lt;-{<span class="id">r</span>} &lt;-{<span class="id">y</span>}]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">have</span> /<span class="id">pu</span> : (<span class="id">p</span> &lt;= <span class="id">m</span>)%<span class="id">N</span> <span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">leq_trans</span> <span class="id">_</span> <span class="id"><a href="mathcomp.analysis.normedtype.html#NbhsNorm.nbhs_simpl">nm</a></span>) //; <span class="id">near</span>: <span class="id">n</span>; <span class="kwd">exists</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">fineK</span> <span class="id">umE</span>; <span class="id">eexists</span>; [<span class="kwd">exists</span> <span class="id">m</span>|<span class="id">exact</span>/<span class="id">umE</span>].<br/>
&nbsp;&nbsp;<span class="id">have</span> /<span class="id">pu</span> : (<span class="id">p</span> &lt;= <span class="id">m</span>)%<span class="id">N</span> <span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">leq_trans</span> <span class="id">_</span> <span class="id">nm</span>) //; <span class="id">near</span>: <span class="id">n</span>; <span class="kwd">exists</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">fineK</span> <span class="id">umE</span>; <span class="kwd">exists</span> <span class="id">m</span> =&gt; //; <span class="id">exact</span>/<span class="id">umE</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">qsupsu</span> =&gt; /=; <span class="id">near</span>: <span class="id">n</span>; <span class="kwd">exists</span> <span class="id">q</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="kwd">by</span> <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_einfs</span> <span class="id">u</span> <span class="id">l</span> : <span class="id">u</span> --&gt; <span class="id">l</span> -&gt; <span class="id">einfs</span> <span class="id">u</span> --&gt; <span class="id">l</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof256')">Proof.</span></div>
<div class="proofscript" id="proof256">
<span class="id">move</span>=&gt; /<span class="id">cvgeN</span>/<span class="id">cvg_esups</span>/<span class="id">cvgeN</span>; <span class="id">rewrite</span> <span class="id">oppeK</span> <span class="id">esupsN</span>.<br/>
<span class="kwd">by</span> <span class="id">under</span> <span class="id">eq_cvg</span> <span class="id">do</span> <span class="id">rewrite</span> /= <span class="id">oppeK</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cvg_limn_einf_sup</span> <span class="id">u</span> <span class="id">l</span> : <span class="id">u</span> --&gt; <span class="id">l</span> -&gt; (<span class="id">limn_einf</span> <span class="id">u</span> = <span class="id">l</span>) * (<span class="id">limn_esup</span> <span class="id">u</span> = <span class="id">l</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof257')">Proof.</span></div>
<div class="proofscript" id="proof257">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">ul</span>; <span class="id">split</span>; <span class="id">apply</span>/<span class="id">cvg_lim</span> =&gt; //; [<span class="id">apply</span>/<span class="id">cvg_einfs</span>|<span class="id">apply</span>/<span class="id">cvg_esups</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_cvg_limn_einfE</span> <span class="id">u</span> : <span class="id">cvg</span> <span class="id">u</span> -&gt; <span class="id">limn_einf</span> <span class="id">u</span> = <span class="id">lim</span> <span class="id">u</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof258')">Proof.</span></div>
<div class="proofscript" id="proof258">
<span class="id">move</span>=&gt; /<span class="id">cvg_ex</span>[<span class="id">l</span> <span class="id">ul</span>]; <span class="id">have</span> [-&gt; <span class="id">_</span>] := <span class="id">cvg_limn_einf_sup</span> <span class="id">ul</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>/<span class="id">cvg_lim</span> : <span class="id">ul</span> =&gt; -&gt;.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">is_cvg_limn_esupE</span> <span class="id"><a href="mathcomp.analysis.sequences.html#banach_contraction.U">u</a></span> : <span class="id">cvg</span> <span class="id">u</span> -&gt; <span class="id"><a href="mathcomp.analysis.sequences.html#banach_contraction.f">limn_esup</a></span> <span class="id">u</span> = <span class="id">lim</span> <span class="id">u</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof259')">Proof.</span></div>
<div class="proofscript" id="proof259">
<span class="id">move</span>=&gt; /<span class="id">cvg_ex</span>[<span class="id">l</span> <span class="id">ul</span>]; <span class="id">have</span> [<span class="id">_</span> -&gt;] := <span class="id">cvg_limn_einf_sup</span> <span class="id">ul</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>/<span class="id">cvg_lim</span> : <span class="id">ul</span> =&gt; -&gt;.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">lim_esup_inf</span>.<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6", <span class="id">note</span>="<span class="id">renamed</span> <span class="id"><a href="mathcomp.analysis.sequences.html#banach_contraction.contractions.ctrfq">to</a></span> `<span class="id">limn_einf_shift</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">lim_einf_shift</span> := <span class="id">limn_einf_shift</span> (<span class="id"><a href="mathcomp.analysis.topology.html#closed_cvg">only</a></span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6", <span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">limn_esup_le_cvg</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">lim_esup_le_cvg</span> := <span class="id">limn_esup_le_cvg</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6", <span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">limn_einfN</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">lim_einfN</span> := <span class="id">limn_einfN</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6", <span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">limn_esupN</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">lim_esupN</span> := <span class="id">limn_esupN</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6", <span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">limn_einf_sup</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">lim_einf_sup</span> := <span class="id">limn_einf_sup</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id"><a href="mathcomp.analysis.sequences.html#banach_contraction.f">analysis</a></span> 0.6.6", <span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">cvgNy_limn_einf_sup</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">cvgNy_lim_einf_sup</span> := <span class="id">cvgNy_limn_einf_sup</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6", <span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">cvg_limn_einf_sup</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">cvg_lim_einf_sup</span> := <span class="id">cvg_limn_einf_sup</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6", <span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">is_cvg_limn_einfE</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">is_cvg_lim_einfE</span> := <span class="id">is_cvg_limn_einfE</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
#[<span class="id">deprecated</span>(<span class="id">since</span>="<span class="id">mathcomp</span>-<span class="id">analysis</span> 0.6.6", <span class="id">note</span>="<span class="id">renamed</span> <span class="id">to</span> `<span class="id">is_cvg_limn_esupE</span>`")]<br/>
<span class="kwd">Notation</span> <span class="id">is_cvg_lim_esupE</span> := <span class="id">is_cvg_limn_esupE</span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">geometric_le_lim</span> {<span class="id">R</span> : <span class="id">realType</span>} (<span class="id">n</span> : <span class="id">nat</span>) (<span class="id">a</span> <span class="id">x</span> : <span class="id">R</span>) :<br/>
&nbsp;&nbsp;0 &lt;= <span class="id">a</span> -&gt; 0 &lt; <span class="id">x</span> -&gt; `|<span class="id">x</span>| &lt; 1 -&gt; <span class="id">series</span> (<span class="id">geometric</span> <span class="id">a</span> <span class="id">x</span>) <span class="id">n</span> &lt;= <span class="id">a</span> * (1 - <span class="id">x</span>)^-1.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof260')">Proof.</span></div>
<div class="proofscript" id="proof260">
<span class="id">move</span>=&gt; <span class="id">a0</span> <span class="id">x0</span> <span class="id">x1</span>.<br/>
<span class="id">have</span> /(@<span class="id">cvg_unique</span> <span class="id">_</span> (@<span class="id">Rhausdorff</span> <span class="id">R</span>)) := @<span class="id">cvg_geometric_series</span> <span class="id">_</span> <span class="id">a</span> <span class="id">_</span> <span class="id">x1</span>.<br/>
<span class="id">move</span>/(<span class="id">_</span> <span class="id">_</span> (@<span class="id">is_cvg_geometric_series</span> <span class="id">_</span> <span class="id">a</span> <span class="id">_</span> <span class="id">x1</span>)) =&gt; -&gt;.<br/>
<span class="id">apply</span>: <span class="id">nondecreasing_cvgn_le</span>; <span class="id">last</span> <span class="id">exact</span>: <span class="id">is_cvg_geometric_series</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">nondecreasing_series</span> =&gt; ? <span class="id">_</span> /=; <span class="id">rewrite</span> <span class="id">pmulr_lge0</span> // <span class="id">exprn_gt0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">banach_contraction</span>.<br/>
<br/>
<span class="kwd">Context</span> {<span class="id">R</span> : <span class="id">realType</span>} {<span class="id">X</span> : <span class="id">completeNormedModType</span> <span class="id">R</span>} (<span class="id">U</span> : <span class="id">set</span> <span class="id">X</span>).<br/>
<span class="kwd">Variables</span> (<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id">U</span> &gt;-&gt; <span class="id">U</span>}).<br/>
<br/>
<span class="kwd">Section</span> <span class="id">contractions</span>.<br/>
<span class="kwd">Variables</span> (<span class="id">q</span> : {<span class="id">nonneg</span> <span class="id">R</span>}) (<span class="id">ctrf</span> : <span class="id">contraction</span> <span class="id">q</span> <span class="id">f</span>) (<span class="id">base</span> : <span class="id">X</span>) (<span class="id">Ubase</span> : <span class="id">U</span> <span class="id">base</span>).<br/>
<span class="kwd">Let</span> <span class="id">C</span> := `|<span class="id">f</span> <span class="id">base</span> - <span class="id">base</span>| / (1 - <span class="id">q</span>%:<span class="id">num</span>).<br/>
<span class="kwd">Let</span> <span class="id">y</span> := <span class="kwd">fun</span> <span class="id">n</span> =&gt; <span class="id">iter</span> <span class="id">n</span> <span class="id">f</span> <span class="id">base</span>.<br/>
<span class="kwd">Let</span> <span class="id">q1</span> := <span class="id">ctrf</span>.1.<br/>
<span class="kwd">Let</span> <span class="id">ctrfq</span> := <span class="id">ctrf</span>.2.<br/>
<span class="kwd">Let</span> <span class="id">C_ge0</span> : 0 &lt;= <span class="id">C</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof261')">Proof.</span></div>
<div class="proofscript" id="proof261">
 <span class="kwd">by</span> <span class="id">rewrite</span> ?(<span class="id">invr_ge0</span>, <span class="id">mulr_ge0</span>, <span class="id">subr_ge0</span>, <span class="id">ltW</span> <span class="id">q1</span>). Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">contraction_dist</span> <span class="id">n</span> <span class="id">m</span> : `|<span class="id">y</span> <span class="id">n</span> - <span class="id">y</span> (<span class="id">n</span> + <span class="id">m</span>)| &lt;= <span class="id">C</span> * <span class="id">q</span>%:<span class="id">num</span> ^+ <span class="id">n</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof262')">Proof.</span></div>
<div class="proofscript" id="proof262">
<span class="id">have</span> <span class="id">f1</span> <span class="id">k</span> : `|<span class="id">y</span> <span class="id">k</span>.+1 - <span class="id">y</span> <span class="id">k</span>| &lt;= <span class="id">q</span>%:<span class="id">num</span> ^+ <span class="id">k</span> * `|<span class="id">f</span> <span class="id">base</span> - <span class="id">base</span>|.<br/>
&nbsp;&nbsp;<span class="id">elim</span>: <span class="id">k</span> =&gt; [|<span class="id">k</span> /(<span class="id">ler_wpmul2l</span> (<span class="id">ge0</span> <span class="id">q</span>))]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">expr0</span> <span class="id">mul1r</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> <span class="id">mulrA</span> -<span class="id">exprS</span>; <span class="id">apply</span>: <span class="id">le_trans</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (@<span class="id">ctrfq</span> (<span class="id">y</span> <span class="id">k</span>.+1, <span class="id">y</span> <span class="id">k</span>)); <span class="id">split</span>; <span class="id">exact</span>: <span class="id">funS</span>.<br/>
<span class="id">have</span> /<span class="id">le_trans</span> -&gt; // : `| <span class="id">y</span> <span class="id">n</span> - <span class="id">y</span> (<span class="id">n</span> + <span class="id">m</span>)| &lt;=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">series</span> (<span class="id">geometric</span> (`|<span class="id">f</span> <span class="id">base</span> - <span class="id">base</span>| * <span class="id">q</span>%:<span class="id">num</span> ^+ <span class="id">n</span>) <span class="id">q</span>%:<span class="id">num</span>) <span class="id">m</span>.<br/>
&nbsp;&nbsp;<span class="id">elim</span>: <span class="id">m</span> =&gt; [|<span class="id">m</span> <span class="id">ih</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">geometric_seriesE</span> ?<span class="id">lt_eqF</span>//= <span class="id">addn0</span> <span class="id">subrr</span> <span class="id">normr0</span> <span class="id">subrr</span> <span class="id">mulr0</span> <span class="id">mul0r</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> (<span class="id">le_trans</span> (<span class="id">ler_dist_add</span> (<span class="id">y</span> (<span class="id">n</span> + <span class="id">m</span>)%<span class="id">N</span>) <span class="id">_</span> <span class="id">_</span>))//.<br/>
&nbsp;&nbsp;<span class="id">apply</span>: (<span class="id">le_trans</span> (<span class="id">ler_add</span> <span class="id">ih</span> <span class="id">_</span>)); <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">distrC</span> <span class="id">addnS</span>; <span class="id">exact</span>: <span class="id">f1</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> [<span class="id">_</span> * `|<span class="id">_</span>|]<span class="id">mulrC</span> <span class="id">exprD</span> <span class="id">mulrA</span> <span class="id">geometric_seriesE</span> ?<span class="id">lt_eqF</span>//=.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -!/(`1-<span class="id">_</span>) (<span class="id">onem_PosNum</span> <span class="id">ctrf</span>.1) (<span class="id">onemX_NngNum</span> (<span class="id">ltW</span> <span class="id">ctrf</span>.1)).<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -!<span class="id">mulrA</span> -<span class="id">mulrDr</span> <span class="id">ler_pmul</span>// -<span class="id">mulrDr</span> <span class="id">exprSr</span> <span class="id">onemM</span> -<span class="id">addrA</span>.<br/>
&nbsp;&nbsp;<span class="id">rewrite</span> -[<span class="kwd">in</span> <span class="id">leRHS</span>](<span class="id">mulrC</span> <span class="id">_</span> `1-(<span class="id">_</span> ^+ <span class="id">m</span>)) -<span class="id">onemMr</span> <span class="id">onemK</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> [<span class="kwd">in</span> <span class="id">leRHS</span>]<span class="id">mulrDl</span> <span class="id">mulrAC</span> <span class="id">mulrV</span> ?<span class="id">mul1r</span>// <span class="id">unitf_gt0</span>// <span class="id">onem_gt0</span>.<br/>
<span class="id">rewrite</span> <span class="id">geometric_seriesE</span> ?<span class="id">lt_eqF</span>//= -[<span class="id">leRHS</span>]<span class="id">mulr1</span> (<span class="id">ACl</span> (1*4*2*3))/= -/<span class="id">C</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ler_wpmul2l</span>// 1?<span class="id">mulr_ge0</span>// <span class="id">ler_subl_addr</span> <span class="id">ler_addl</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">contraction_cvg</span> : <span class="id">cvg</span> <span class="id">y</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof263')">Proof.</span></div>
<div class="proofscript" id="proof263">
<span class="id">apply</span>/<span class="id">cauchy_cvgP</span>; <span class="id">apply</span>/<span class="id">cauchy_ballP</span> =&gt; <span class="id">_</span>/<span class="id">posnumP</span>[<span class="id">e</span>]; <span class="id">near_simpl</span>.<br/>
<span class="id">have</span> <span class="id">lt_min</span> <span class="id">n</span> <span class="id">m</span> : `|<span class="id">y</span> <span class="id">n</span> - <span class="id">y</span> <span class="id">m</span>| &lt;= <span class="id">C</span> * <span class="id">q</span>%:<span class="id">num</span> ^+ <span class="id">minn</span> <span class="id">n</span> <span class="id">m</span>.<br/>
&nbsp;&nbsp;<span class="id">wlog</span> : <span class="id">n</span> <span class="id">m</span> / (<span class="id">n</span> &lt;= <span class="id">m</span>)%<span class="id">N</span> =&gt; <span class="id">W</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>/<span class="id">orP</span>: (<span class="id">leq_total</span> <span class="id">n</span> <span class="id">m</span>) =&gt; /<span class="id">W</span> //; <span class="id">rewrite</span> <span class="id">distrC</span> <span class="id">minnC</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">minn_idPl</span> <span class="id">_</span>)// (<span class="id">le_trans</span> <span class="id">_</span> (<span class="id">contraction_dist</span> <span class="id">_</span> (<span class="id">m</span> - <span class="id">n</span>)))// <span class="id">subnKC</span>.<br/>
<span class="id">case</span>: <span class="id">ltrgt0P</span> <span class="id">C_ge0</span> =&gt; // [<span class="id">Cpos</span>|<span class="id">C0</span>] <span class="id">_</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">near</span>=&gt; <span class="id">n</span> <span class="id">m</span> =&gt; /=; <span class="id">rewrite</span> -<span class="id">ball_normE</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: (<span class="id">le_lt_trans</span> (<span class="id">lt_min</span> <span class="id">_</span> <span class="id">_</span>)); <span class="id">rewrite</span> <span class="id">C0</span> <span class="id">mul0r</span>.<br/>
<span class="id">near</span>=&gt; <span class="id">n</span>; <span class="id">rewrite</span> -<span class="id">ball_normE</span> /= (<span class="id">le_lt_trans</span> (<span class="id">lt_min</span> <span class="id">n</span>.1 <span class="id">n</span>.2)) //.<br/>
<span class="id">rewrite</span> // -<span class="id">ltr_pdivl_mull</span> //.<br/>
<span class="id">suff</span> : <span class="id">ball</span> 0 (<span class="id">C</span>^-1 * <span class="id">e</span>%:<span class="id">num</span>) (<span class="id">q</span>%:<span class="id">num</span> ^+ <span class="id">minn</span> <span class="id">n</span>.1 <span class="id">n</span>.2).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">ball</span> /= <span class="id">sub0r</span> <span class="id">normrN</span> <span class="id">ger0_norm</span>.<br/>
<span class="id">near</span>: <span class="id">n</span>; <span class="id">rewrite</span> <span class="id">nbhs_simpl</span>.<br/>
<span class="id">pose</span> <span class="id">g</span> := <span class="kwd">fun</span> <span class="id">w</span> : <span class="id">nat</span> * <span class="id">nat</span> =&gt; <span class="id">q</span>%:<span class="id">num</span> ^+ <span class="id">minn</span> <span class="id">w</span>.1 <span class="id">w</span>.2.<br/>
<span class="id">have</span> := @<span class="id">fcvg_ball</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">g</span> @ <span class="id">filter_prod</span> \<span class="id">oo</span> \<span class="id">oo</span>) <span class="id">_</span> 0 <span class="id">_</span> (<span class="id">C</span>^-1 * <span class="id">e</span>%:<span class="id">num</span>).<br/>
<span class="id">move</span>: (@<span class="id">cvg_geometric</span> <span class="id">_</span> 1 <span class="id">q</span>%:<span class="id">num</span>); <span class="id">rewrite</span> <span class="id">ger0_norm</span> // =&gt; /(<span class="id">_</span> <span class="id">q1</span>) <span class="id">geo</span>.<br/>
<span class="id">near_simpl</span>; <span class="id">apply</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">mulr_gt0</span> // <span class="id">invr_gt0</span>.<br/>
<span class="id">apply</span>/<span class="id">cvg_ballP</span> =&gt; <span class="id">_</span>/<span class="id">posnumP</span>[<span class="id">delta</span>]; <span class="id">near_simpl</span>.<br/>
<span class="id">have</span> [<span class="id">N</span> <span class="id">_</span> <span class="id">Q</span>] : \<span class="kwd">forall</span> <span class="id">N</span> \<span class="id">near</span> \<span class="id">oo</span>, <span class="id">ball</span> 0 <span class="id">delta</span>%:<span class="id">num</span> (<span class="id">geometric</span> 1 <span class="id">q</span>%:<span class="id">num</span> <span class="id">N</span>).<br/>
&nbsp;&nbsp;<span class="id">exact</span>: (@<span class="id">fcvg_ball</span> <span class="id">R</span> <span class="id">R</span> <span class="id">_</span> <span class="id">_</span> 0 <span class="id">geo</span>).<br/>
<span class="kwd">exists</span> ([<span class="id">set</span> <span class="id">n</span> | <span class="id">N</span> &lt;= <span class="id">n</span>], [<span class="id">set</span> <span class="id">n</span> | <span class="id">N</span> &lt;= <span class="id">n</span>])%<span class="id">N</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">split</span>; <span class="kwd">exists</span> <span class="id">N</span>.<br/>
<span class="id">move</span>=&gt; [<span class="id">n</span> <span class="id">m</span>] [<span class="id">Nn</span> <span class="id">Nm</span>]; <span class="id">rewrite</span> /<span class="id">ball</span> /= <span class="id">sub0r</span> <span class="id">normrN</span> <span class="id">ger0_norm</span> /<span class="id">g</span> //.<br/>
<span class="id">apply</span>: <span class="id">le_lt_trans</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id">apply</span>: (<span class="id">Q</span> <span class="id">N</span>) =&gt; /=.<br/>
<span class="id">rewrite</span> <span class="id">sub0r</span> <span class="id">normrN</span> <span class="id">ger0_norm</span> /<span class="id">geometric</span> //= <span class="id">mul1r</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ler_wiexpn2l</span> // ?<span class="id">ltW</span> // <span class="id">leq_min</span> <span class="id">Nn</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">contraction_cvg_fixed</span> : <span class="id">closed</span> <span class="id">U</span> -&gt; <span class="id">lim</span> <span class="id">y</span> = <span class="id">f</span> (<span class="id">lim</span> <span class="id">y</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof264')">Proof.</span></div>
<div class="proofscript" id="proof264">
<span class="id">move</span>=&gt; <span class="id">clU</span>; <span class="id">apply</span>: <span class="id">cvg_lim</span> =&gt; //.<br/>
<span class="id">apply</span>/<span class="id">cvgrPdist_lt</span> =&gt; <span class="id">_</span>/<span class="id">posnumP</span>[<span class="id">e</span>]; <span class="id">near_simpl</span>; <span class="id">apply</span>: <span class="id">near_inftyS</span>.<br/>
<span class="id">have</span> [<span class="id">q_gt0</span> | | <span class="id">q0</span>] := <span class="id">ltrgt0P</span> <span class="id">q</span>%:<span class="id">num</span>.<br/>
- <span class="id">near</span>=&gt; <span class="id">n</span> =&gt; /=; <span class="id">apply</span>: (<span class="id">le_lt_trans</span> (@<span class="id">ctrfq</span> (<span class="id">_</span>, <span class="id">_</span>) <span class="id">_</span>)) =&gt; //=.<br/>
&nbsp;&nbsp;+ <span class="id">split</span>; <span class="id">last</span> <span class="id">exact</span>: <span class="id">funS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">closed_cvg</span> <span class="id">contraction_cvg</span> =&gt; //; <span class="id">apply</span>: <span class="id">nearW</span> =&gt; ?; <span class="id">exact</span>: <span class="id">funS</span>.<br/>
&nbsp;&nbsp;+ <span class="id">rewrite</span> -<span class="id">ltr_pdivl_mull</span> //; <span class="id">near</span>: <span class="id">n</span>; <span class="id">move</span>/<span class="id">cvgrPdist_lt</span>: <span class="id">contraction_cvg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>; <span class="id">rewrite</span> <span class="id">mulr_gt0</span> // <span class="id">invr_gt0</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ltNge</span>//; <span class="id">exact</span>: <span class="id">contraNP</span>.<br/>
- <span class="id">apply</span>: <span class="id">nearW</span> =&gt; /= <span class="id">n</span>; <span class="id">apply</span>: (<span class="id">le_lt_trans</span> (@<span class="id">ctrfq</span> (<span class="id">_</span>, <span class="id">_</span>) <span class="id">_</span>)).<br/>
&nbsp;&nbsp;+ <span class="id">split</span>; <span class="id">last</span> <span class="id">exact</span>: <span class="id">funS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">closed_cvg</span> <span class="id">contraction_cvg</span> =&gt; //; <span class="id">apply</span>: <span class="id">nearW</span> =&gt; ?; <span class="id">exact</span>: <span class="id">funS</span>.<br/>
&nbsp;&nbsp;+ <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">q0</span> <span class="id">mul0r</span>.<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">contractions</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id">ctrf</span> : <span class="id">is_contraction</span> <span class="id">f</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id">banach_fixed_point</span> : <span class="id">closed</span> <span class="id">U</span> -&gt; <span class="id">U</span> !=<span class="id">set0</span> -&gt; <span class="kwd">exists2</span> <span class="id">p</span>, <span class="id">U</span> <span class="id">p</span> &amp; <span class="id">p</span> = <span class="id">f</span> <span class="id">p</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof265')">Proof.</span></div>
<div class="proofscript" id="proof265">
<span class="id">case</span>: <span class="id">ctrf</span> =&gt; [<span class="id">q</span> <span class="id">ctrq</span>] ? [<span class="id">base</span> <span class="id">Ubase</span>]; <span class="kwd">exists</span> (<span class="id">lim</span> (<span class="id">iter</span> <span class="id">n</span> <span class="id">f</span> <span class="id">base</span> @[<span class="id">n</span> --&gt;\<span class="id">oo</span>])).<br/>
&nbsp;&nbsp;<span class="id">apply</span>: <span class="id">closed_cvg</span> (<span class="id">contraction_cvg</span> <span class="id">ctrq</span> <span class="id">Ubase</span>) =&gt; //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">nearW</span> =&gt; ?; <span class="id">exact</span>: <span class="id">funS</span>.<br/>
<span class="id">exact</span>: (<span class="id">contraction_cvg_fixed</span> <span class="id">ctrq</span>).<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="id">end_near</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">banach_contraction</span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/tree/yoshihiro503%40generate_index">a fork of coq2html</a></div>
</body>
</html>
