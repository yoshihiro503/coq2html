
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module mathcomp.classical.functions</title>
<meta name="description" content="Documentation of Coq module mathcomp.classical.functions" />
<link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/markdown-it-texmath/texmath.min.js"></script>

<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="init('proofscript')">
<h1 class="title">Module mathcomp.classical.functions</h1>
<div class="coq">
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">all_ssreflect</span> <span class="id">finmap</span> <span class="id">ssralg</span> <span class="id">ssrnum</span> <span class="id">ssrint</span> <span class="id">rat</span>.<br/>
<span class="kwd">From</span> <span class="id">HB</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id">structures</span>.<br/>
<span class="kwd">From</span> <span class="id">mathcomp</span> <span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="mathcomp.classical.mathcomp_extra.html">mathcomp_extra</a></span> <span class="id"><a href="mathcomp.classical.boolp.html">boolp</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html">classical_sets</a></span>.<br/>
<span class="id">Add</span> <span class="id">Search</span> <span class="id">Blacklist</span> "<span class="id">__canonical__</span>".<br/>
<span class="id">Add</span> <span class="id">Search</span> <span class="id">Blacklist</span> "<span class="id">__functions_</span>".<br/>
<span class="id">Add</span> <span class="id">Search</span> <span class="id">Blacklist</span> "<span class="id">_factory_</span>".<br/>
<span class="id">Add</span> <span class="id">Search</span> <span class="id">Blacklist</span> "<span class="id">_mixin_</span>".<br/>
<br/>
<pre class="ssrdoc">
                           Theory of functions                             
                                                                           
This file provides a theory of functions whose domain and codomain are     
represented by sets.                                                       
                                                                           
         set_fun A B f == f : aT -&gt; rT is a function with domain           
                          A : set aT and codomain B : set rT               
        set_surj A B f == f is surjective                                  
         set inj A B f == f is injective                                   
         set_bij A B f == f is bijective                                   
                                                                           
         {fun A &gt;-&gt; B} == type of functions f : aT -&gt; rT from A : set aT   
                          to B : set rT.                                   
                          funS f  is a proof of  set_fun A B f             
      {oinv aT &gt;-&gt; rT} == type of functions with a partial inverse         
     {oinvfun A &gt;-&gt; B} == combination of {fun A &gt;-&gt; B} and                 
                          {oinv aT &gt;-&gt; rT}                                 
       {inv aT &gt;-&gt; rT} == type of functions with an inverse                
                 f ^-1 == inverse of f : {inv aT &gt;-&gt; rT}                   
      {invfun A &gt;-&gt; B} == combination of {fun A &gt;-&gt; B} and {inv aT &gt;-&gt; rT} 
        {surj A &gt;-&gt; B} == type of surjective functions                     
     {surjfun A &gt;-&gt; B} == combination of {fun A &gt;-&gt; B} and {surj A &gt;-&gt; B}  
   {splitsurj A &gt;-&gt; B} == type of surjective functions with an inverse     
{splitsurjfun A &gt;-&gt; B} == combination of {fun A &gt;-&gt; B} and                 
                          {splitsurj A &gt;-&gt; B}                              
        {inj A &gt;-&gt; rT} == type of injective functions                      
      {injfun A &gt;-&gt; B} == combination of {fun A &gt;-&gt; B} and {inj A &gt;-&gt; rT}  
    {splitinj A &gt;-&gt; B} == type of injective functions with an inverse      
 {splitinjfun A &gt;-&gt; B} == combination of {fun A &gt;-&gt; B} and                 
                          {splitinj A &gt;-&gt; B}                               
         {bij A &gt;-&gt; B} == combination of {injfun A &gt;-&gt; B} and              
                          {surjfun A &gt;-&gt; B}                                
    {splitbij A &gt;-&gt; B} == combination of {splitinj A &gt;-&gt; B} and            
                          {splitsurj A &gt;-&gt; B}                              
               'inj_ f == proof of {in A &amp;, injective f} where f has type  
                          {splitinj A &gt;-&gt; _}                               
                                                                           
             funin A f == alias for f : aT -&gt; rT, with A : set aT          
            [fun f in A] == the function f from the set A to the set f @` A
           'split_ d f == partial injection from aT : Type to rt : Type;   
                          f : aT -&gt; rT, d : rT -&gt; aT                       
                 split := 'split_point                                     
            @to_setT T == function that associates to x : T a dependent    
                          pair of x with a proof that x belongs to setT    
                          (i.e., the type set_type [set: T])               
               incl AB == identity function from T to T, where AB is a     
                          proof of A `&lt;=` B, with A, B : set T             
               inclT A := incl (@subsetT _ _)                              
             eqincl AB == identity function from T to T, where AB is a     
                          proof of A = B, with A, B : set T                
             mkfun fAB == builds a function {fun A &gt;-&gt; B} given a function 
                          f : aT -&gt; rT and a proof fAB that                
                          {homo f : x / A x &gt;-&gt; B x}                       
          @set_val T A == injection from set_type A to T, where A has      
                          type set T                                       
            @ssquash T == function of type                                 
                          {splitsurj [set: T] &gt;-&gt; [set: $| T |]}           
       @finset_val T X == function that turns an element x : X             
                          (with X : {fset T}) into a dependent pair of x   
                          with a proof that x belongs to X                 
                          (i.e., the type set_type [set` X])               
       @val_finset T X == function of type [set` X] -&gt; X with X : {fset T} 
                          that cancels finset_val                          
        glue XY AB f g == function that behaves as f over X, as g over Y   
                          XY is a proof that sets X and Y are disjoint,    
                          AB is a proof that sets A and B are disjoint,    
                          A and B are intended to be the ranges of f and g 
          'pinv_ d A f == inverse of the function [fun f in A] over        
                          f @` A, function d outside of f @` A             
                 pinv := notation for 'pinv_point                          
                                                                           
* Function restriction:                                                    
           patch d A f == "partial function" that behaves as the function  
                          f over the set A and as the function d otherwise 
          restrict D f := patch (fun=&gt; point) D f                          
                f \_ D := restrict D f                                     
              sigL A f == "left restriction"; given a set A : set U and a  
                          function f : U -&gt; V, returns the corresponding   
                          function of type set_type A -&gt; V                 
              sigR A f == "right restriction"; given a set B : set V and a 
                          function f : {fun [set: U] &gt;-&gt; B}, returns the   
                          corresponding function of type U -&gt; set_type B   
           sigLR A B f == the function of type set_type A -&gt; set_type B    
                          corresponding to f : {fun A &gt;-&gt; B}               
               valL_ v == function cancelled by sigL A, with A : set U and 
                          v : V                                            
                valR f == the function of type U -&gt; V corresponding to     
                          f : U -&gt; set_type B, with B : set V              
              valR_fun == the function of type {fun [set: U] &gt;-&gt; B}        
                          corresponding to f : U -&gt; set_type B, with       
                          B : set V                                        
             valLR v f == the function of type U -&gt; V corresponding to     
                          f : set_type A -&gt; set_type B (where v : V),      
                          i.e., 'valL_ v \o valR_fun                       
      valLfun_ v A B f := [fun of valL_ f] with f : {fun [set: A] &gt;-&gt; B}   
                  valL := 'valL_ point                                     
            valLRfun v := 'valLfun_ v \o valR_fun                          
                                                                           
Section function_space == canonical ringType and lmodType                  
                          structures for functions whose range is          
                          a ringType, comRingType, or lmodType.            
                  fctE == multi-rule for fct                               
                                                                           
</pre>
<br/>
<span class="kwd">Set</span> <span class="kwd">Implicit</span> <span class="kwd">Arguments</span>.<br/>
<span class="id">Unset</span> <span class="id">Strict</span> <span class="kwd">Implicit</span>.<br/>
<span class="id">Unset</span> <span class="id">Printing</span> <span class="kwd">Implicit</span> <span class="id">Defensive</span>.<br/>
<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "<span class="id">f</span> \<span class="id">_</span> <span class="id">D</span>" (<span class="kwd">at</span> <span class="id">level</span> 10).<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'{' '<span class="kwd">fun</span>' <span class="id">A</span> '&gt;-&gt;' <span class="id">B</span> '}'"<br/>
&nbsp;&nbsp;(<span class="id">format</span> "'{' '<span class="kwd">fun</span>'  <span class="id">A</span>  '&gt;-&gt;'  <span class="id">B</span> '}'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'{' '<span class="id">oinv</span>' <span class="id">T</span> '&gt;-&gt;' <span class="id">U</span> '}'"<br/>
&nbsp;&nbsp;(<span class="id">format</span> "'{' '<span class="id">oinv</span>'  <span class="id">T</span>  '&gt;-&gt;'  <span class="id">U</span> '}'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'{' '<span class="id">inv</span>' <span class="id">T</span> '&gt;-&gt;' <span class="id">U</span> '}'"<br/>
&nbsp;&nbsp;(<span class="id">format</span> "'{' '<span class="id">inv</span>'  <span class="id">T</span>  '&gt;-&gt;'  <span class="id">U</span> '}'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'{' '<span class="id">oinvfun</span>' <span class="id">T</span> '&gt;-&gt;' <span class="id">U</span> '}'"<br/>
&nbsp;&nbsp;(<span class="id">format</span> "'{' '<span class="id">oinvfun</span>'  <span class="id">T</span>  '&gt;-&gt;'  <span class="id">U</span> '}'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'{' '<span class="id">invfun</span>' <span class="id">T</span> '&gt;-&gt;' <span class="id">U</span> '}'"<br/>
&nbsp;&nbsp;(<span class="id">format</span> "'{' '<span class="id">invfun</span>'  <span class="id">T</span>  '&gt;-&gt;'  <span class="id">U</span> '}'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'{' '<span class="id">inj</span>' <span class="id">A</span> '&gt;-&gt;' <span class="id">T</span> '}'"<br/>
&nbsp;&nbsp;(<span class="id">format</span> "'{' '<span class="id">inj</span>'  <span class="id">A</span>  '&gt;-&gt;'  <span class="id">T</span> '}'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'{' '<span class="id">splitinj</span>' <span class="id">A</span> '&gt;-&gt;' <span class="id">T</span> '}'"<br/>
&nbsp;&nbsp;(<span class="id">format</span> "'{' '<span class="id">splitinj</span>'  <span class="id">A</span>  '&gt;-&gt;'  <span class="id">T</span> '}'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'{' '<span class="id">surj</span>' <span class="id">A</span> '&gt;-&gt;' <span class="id">B</span> '}'"<br/>
&nbsp;&nbsp;(<span class="id">format</span> "'{' '<span class="id">surj</span>'  <span class="id">A</span>  '&gt;-&gt;'  <span class="id">B</span> '}'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'{' '<span class="id">splitsurj</span>' <span class="id">A</span> '&gt;-&gt;' <span class="id">B</span> '}'"<br/>
&nbsp;&nbsp;(<span class="id">format</span> "'{' '<span class="id">splitsurj</span>'  <span class="id">A</span>  '&gt;-&gt;'  <span class="id">B</span> '}'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'{' '<span class="id">injfun</span>' <span class="id">A</span> '&gt;-&gt;' <span class="id">B</span> '}'"<br/>
&nbsp;&nbsp;(<span class="id">format</span> "'{' '<span class="id">injfun</span>'  <span class="id">A</span>  '&gt;-&gt;'  <span class="id">B</span> '}'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'{' '<span class="id">surjfun</span>' <span class="id">A</span> '&gt;-&gt;' <span class="id">B</span> '}'"<br/>
&nbsp;&nbsp;(<span class="id">format</span> "'{' '<span class="id">surjfun</span>'  <span class="id">A</span>  '&gt;-&gt;'  <span class="id">B</span> '}'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'{' '<span class="id">splitinjfun</span>' <span class="id">A</span> '&gt;-&gt;' <span class="id">B</span> '}'"<br/>
&nbsp;&nbsp;(<span class="id">format</span> "'{' '<span class="id">splitinjfun</span>'  <span class="id">A</span>  '&gt;-&gt;'  <span class="id">B</span> '}'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'{' '<span class="id">splitsurjfun</span>' <span class="id">A</span> '&gt;-&gt;' <span class="id">B</span> '}'"<br/>
&nbsp;&nbsp;(<span class="id">format</span> "'{' '<span class="id">splitsurjfun</span>'  <span class="id">A</span>  '&gt;-&gt;'  <span class="id">B</span> '}'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'{' '<span class="id">bij</span>' <span class="id">A</span> '&gt;-&gt;' <span class="id">B</span> '}'"<br/>
&nbsp;&nbsp;(<span class="id">format</span> "'{' '<span class="id">bij</span>'  <span class="id">A</span>  '&gt;-&gt;'  <span class="id">B</span> '}'").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "'{' '<span class="id">splitbij</span>' <span class="id">A</span> '&gt;-&gt;' <span class="id">B</span> '}'"<br/>
&nbsp;&nbsp;(<span class="id">format</span> "'{' '<span class="id">splitbij</span>'  <span class="id">A</span>  '&gt;-&gt;'  <span class="id">B</span> '}'").<br/>
<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="kwd">fun</span>' '<span class="id">of</span>' <span class="id">f</span> ]" (<span class="id">format</span> "[ '<span class="kwd">fun</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">oinv</span>' '<span class="id">of</span>' <span class="id">f</span> ]" (<span class="id">format</span> "[ '<span class="id">oinv</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">inv</span>' '<span class="id">of</span>' <span class="id">f</span> ]" (<span class="id">format</span> "[ '<span class="id">inv</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">oinv</span>' '<span class="id">of</span>' <span class="id">f</span> ]" (<span class="id">format</span> "[ '<span class="id">oinv</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">inv</span>' '<span class="id">of</span>' <span class="id">f</span> ]" (<span class="id">format</span> "[ '<span class="id">inv</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">inj</span>' '<span class="id">of</span>' <span class="id">f</span> ]" (<span class="id">format</span> "[ '<span class="id">inj</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">splitinj</span>' '<span class="id">of</span>' <span class="id">f</span> ]" (<span class="id">format</span> "[ '<span class="id">splitinj</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">surj</span>' '<span class="id">of</span>' <span class="id">f</span> ]" (<span class="id">format</span> "[ '<span class="id">surj</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">splitsurj</span>' '<span class="id">of</span>' <span class="id">f</span> ]" (<span class="id">format</span> "[ '<span class="id">splitsurj</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">injfun</span>' '<span class="id">of</span>' <span class="id">f</span> ]" (<span class="id">format</span> "[ '<span class="id">injfun</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">surjfun</span>' '<span class="id">of</span>' <span class="id">f</span> ]" (<span class="id">format</span> "[ '<span class="id">surjfun</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">splitinjfun</span>' '<span class="id">of</span>' <span class="id">f</span> ]"<br/>
&nbsp;&nbsp;(<span class="id">format</span> "[ '<span class="id">splitinjfun</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">splitsurjfun</span>' '<span class="id">of</span>' <span class="id">f</span> ]"<br/>
&nbsp;&nbsp;(<span class="id">format</span> "[ '<span class="id">splitsurjfun</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">bij</span>' '<span class="id">of</span>' <span class="id">f</span> ]" (<span class="id">format</span> "[ '<span class="id">bij</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "[ '<span class="id">splitbij</span>' '<span class="id">of</span>' <span class="id">f</span> ]" (<span class="id">format</span> "[ '<span class="id">splitbij</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]").<br/>
<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "''<span class="id">oinv_</span>' <span class="id">f</span>" (<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">f</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "''<span class="id">oinv_</span>' <span class="id">f</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "''<span class="id">funS_</span>' <span class="id">f</span>" (<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">f</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "''<span class="id">funS_</span>' <span class="id">f</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "''<span class="id">mem_fun_</span>' <span class="id">f</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">f</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span>  "''<span class="id">mem_fun_</span>' <span class="id">f</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "''<span class="id">oinvK_</span>' <span class="id">f</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">f</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "''<span class="id">oinvK_</span>' <span class="id">f</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "''<span class="id">oinvS_</span>' <span class="id">f</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">f</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "''<span class="id">oinvS_</span>' <span class="id">f</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "''<span class="id">oinvP_</span>' <span class="id">f</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">f</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "''<span class="id">oinvP_</span>' <span class="id">f</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "''<span class="id">oinvT_</span>' <span class="id">f</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">f</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "''<span class="id">oinvT_</span>' <span class="id">f</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "''<span class="id">invK_</span>' <span class="id">f</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">f</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "''<span class="id">invK_</span>' <span class="id">f</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "''<span class="id">invS_</span>' <span class="id">f</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">f</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "''<span class="id">invS_</span>' <span class="id">f</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "''<span class="id">funoK_</span>' <span class="id">f</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">f</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "''<span class="id">funoK_</span>' <span class="id">f</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "''<span class="id">inj_</span>' <span class="id">f</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">f</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "''<span class="id">inj_</span>' <span class="id">f</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "''<span class="id">funK_</span>' <span class="id">f</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">f</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "''<span class="id">funK_</span>' <span class="id">f</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "''<span class="id">totalfun_</span>' <span class="id">A</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">A</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "''<span class="id">totalfun_</span>' <span class="id">A</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "''<span class="id">surj_</span>' <span class="id">f</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">f</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "''<span class="id">surj_</span>' <span class="id">f</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "''<span class="id">split_</span>' <span class="id">a</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">a</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "''<span class="id">split_</span>' <span class="id">a</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "''<span class="id">bijTT_</span>'  <span class="id">f</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">f</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "''<span class="id">bijTT_</span>' <span class="id">f</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "''<span class="id">bij_</span>' <span class="id">f</span>" (<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">f</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "''<span class="id">bij_</span>' <span class="id">f</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "''<span class="id">valL_</span>' <span class="id">v</span>" (<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">v</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "''<span class="id">valL_</span>' <span class="id">v</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "''<span class="id">valLfun_</span>' <span class="id">v</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">v</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "''<span class="id">valLfun_</span>' <span class="id">v</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "''<span class="id">pinv_</span>' <span class="id">dflt</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">dflt</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "''<span class="id">pinv_</span>' <span class="id">dflt</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "''<span class="id">pPbij_</span>' <span class="id">dflt</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">dflt</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "''<span class="id">pPbij_</span>' <span class="id">dflt</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "''<span class="id">pPinj_</span>' <span class="id">dflt</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">dflt</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "''<span class="id">pPinj_</span>' <span class="id">dflt</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "''<span class="id">injpPfun_</span>' <span class="id">dflt</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">dflt</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "''<span class="id">injpPfun_</span>' <span class="id">dflt</span>").<br/>
<span class="kwd">Reserved</span> <span class="kwd">Notation</span> "''<span class="id">funpPinj_</span>' <span class="id">dflt</span>"<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">dflt</span> <span class="kwd">at</span> <span class="id">level</span> 2, <span class="id">format</span> "''<span class="id">funpPinj_</span>' <span class="id">dflt</span>").<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">classical_set_scope</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="MainProperties">MainProperties</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>}  (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>) (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>).<br/>
<span class="kwd">Definition</span> <span class="id"><a name="set_fun">set_fun</a></span> := {<span class="id">homo</span> <span class="id"><a href="mathcomp.classical.functions.html#MainProperties.f">f</a></span> : <span class="id">x</span> / <span class="id"><a href="mathcomp.classical.functions.html#MainProperties.A">A</a></span> <span class="id">x</span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#MainProperties.B">B</a></span> <span class="id">x</span>}.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="set_surj">set_surj</a></span> := <span class="id"><a href="mathcomp.classical.functions.html#MainProperties.B">B</a></span> `&lt;=` <span class="id"><a href="mathcomp.classical.functions.html#MainProperties.f">f</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#MainProperties.A">A</a></span>.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="set_inj">set_inj</a></span> := {<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.functions.html#MainProperties.A">A</a></span> &amp;, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#injective">injective</a></span> <span class="id"><a href="mathcomp.classical.functions.html#MainProperties.f">f</a></span>}.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="set_bij">set_bij</a></span> := [/\ <span class="id"><a href="mathcomp.classical.functions.html#set_fun">set_fun</a></span>, <span class="id"><a href="mathcomp.classical.functions.html#set_inj">set_inj</a></span> &amp; <span class="id"><a href="mathcomp.classical.functions.html#set_surj">set_surj</a></span>].<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#MainProperties">MainProperties</a></span>.<br/>
<br/>
<span class="id"><a name="isFun">HB.mixin</a></span> <span class="kwd">Record</span> <span class="id">isFun</span> {<span class="id">aT</span> <span class="id">rT</span>} (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>) (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) :=<br/>
&nbsp;&nbsp;{ <span class="id">funS</span> : <span class="id"><a href="mathcomp.classical.functions.html#set_fun">set_fun</a></span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> }.<br/>
<span class="id"><a name="Fun">HB.structure</a></span> <span class="kwd">Definition</span> <span class="id">Fun</span> {<span class="id">aT</span> <span class="id">rT</span>} (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>) :=<br/>
&nbsp;&nbsp;{ <span class="id">f</span> <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#isFun">isFun</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> }.<br/>
<span class="kwd">Notation</span> "{ '<span class="kwd">fun</span>' <span class="id">A</span> &gt;-&gt; <span class="id">B</span> }" := (@<span class="id"><a href="mathcomp.classical.functions.html#type">Fun.type</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span>) : <span class="id">form_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="kwd">fun</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]" := [<span class="id">the</span> {<span class="kwd">fun</span> <span class="id">_</span> &gt;-&gt; <span class="id">_</span>} <span class="id">of</span> <span class="id">f</span> : <span class="id">_</span> -&gt; <span class="id">_</span>] : <span class="id">form_scope</span>.<br/>
<br/>
<span class="id"><a name="OInv">HB.mixin</a></span> <span class="kwd">Record</span> <span class="id">OInv</span> {<span class="id">aT</span> <span class="id">rT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) := { <span class="id">oinv</span> : <span class="id">rT</span> -&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#option">option</a></span> <span class="id">aT</span> }.<br/>
<span class="id"><a name="OInversible">HB.structure</a></span> <span class="kwd">Definition</span> <span class="id">OInversible</span> <span class="id">aT</span> <span class="id">rT</span> := {<span class="id">f</span> <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#OInv">OInv</a></span> <span class="id">aT</span> <span class="id">rT</span> <span class="id">f</span>}.<br/>
<span class="kwd">Notation</span> "{ '<span class="id">oinv</span>' <span class="id">aT</span> &gt;-&gt; <span class="id">rT</span> }" := (@<span class="id"><a href="mathcomp.classical.functions.html#type">OInversible.type</a></span> <span class="id">aT</span> <span class="id">rT</span>) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">oinv</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]" := [<span class="id">the</span> {<span class="id">oinv</span> <span class="id">_</span> &gt;-&gt; <span class="id">_</span>} <span class="id">of</span> <span class="id">f</span> : <span class="id">_</span> -&gt; <span class="id">_</span>] :<br/>
&nbsp;&nbsp;<span class="id">form_scope</span>.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="phant_oinv">phant_oinv</a></span> <span class="id">aT</span> <span class="id">rT</span> (<span class="id">f</span> : {<span class="id">oinv</span> <span class="id">aT</span> &gt;-&gt; <span class="id">rT</span>})<br/>
&nbsp;&nbsp;<span class="id">of</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#phantom">phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span> := @<span class="id"><a href="mathcomp.classical.functions.html#oinv">oinv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>.<br/>
<span class="kwd">Notation</span> "''<span class="id">oinv_</span>' <span class="id">f</span>" := (@<span class="id"><a href="mathcomp.classical.functions.html#phant_oinv">phant_oinv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#Phantom">Phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span>%<span class="id">FUN</span>)).<br/>
<br/>
<span class="id"><a name="OInvFun">HB.structure</a></span> <span class="kwd">Definition</span> <span class="id">OInvFun</span> <span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span> <span class="id">B</span> :=<br/>
&nbsp;&nbsp;{<span class="id">f</span> <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#OInv">OInv</a></span> <span class="id">aT</span> <span class="id">rT</span> <span class="id">f</span> &amp; <span class="id"><a href="mathcomp.classical.functions.html#isFun">isFun</a></span> <span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>}.<br/>
<span class="kwd">Notation</span> "{ '<span class="id">oinvfun</span>' <span class="id">A</span> &gt;-&gt; <span class="id">B</span> }" := (@<span class="id"><a href="mathcomp.classical.functions.html#type">OInvFun.type</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span>) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">oinvfun</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]" :=<br/>
&nbsp;&nbsp;[<span class="id">the</span> {<span class="id">oinvfun</span> <span class="id">_</span> &gt;-&gt; <span class="id">_</span>} <span class="id">of</span> <span class="id">f</span> : <span class="id">_</span> -&gt; <span class="id">_</span>] : <span class="id">form_scope</span>.<br/>
<br/>
<span class="id"><a name="OInv_Inv">HB.mixin</a></span> <span class="kwd">Record</span> <span class="id">OInv_Inv</span> {<span class="id">aT</span> <span class="id">rT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#OInv">OInv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span> := {<br/>
&nbsp;&nbsp;<span class="id">inv</span> : <span class="id">rT</span> -&gt; <span class="id">aT</span>;<br/>
&nbsp;&nbsp;<span class="id">oliftV</span> : <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#olift">olift</a></span> <span class="id">inv</span> = '<span class="id">oinv_f</span><br/>
}.<br/>
<br/>
<span class="id"><a name="Inv">HB.factory</a></span> <span class="kwd">Record</span> <span class="id">Inv</span> {<span class="id">aT</span> <span class="id">rT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) := { <span class="id">inv</span> : <span class="id">rT</span> -&gt; <span class="id">aT</span>  }.<br/>
<span class="id"><a name="Builders_16">HB.builders</a></span> <span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#Inv">Inv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;<span class="id"><a name="Builders_16.HB_unnamed_factory_18">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#OInv.Build">OInv.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_16.Builders_16.f">f</a></span> (<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#olift">olift</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_16.inv">inv</a></span>).<br/>
&nbsp;&nbsp;<span class="id"><a name="Builders_16.HB_unnamed_factory_20">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#OInv_Inv.Build">OInv_Inv.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_16.Builders_16.f">f</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#erefl">erefl</a></span>.<br/>
<span class="id"><a href="mathcomp.classical.functions.html#Builders_16.Builders_16">HB.end</a></span>.<br/>
<br/>
<span class="id"><a name="Inversible">HB.structure</a></span> <span class="kwd">Definition</span> <span class="id">Inversible</span> <span class="id">aT</span> <span class="id">rT</span> := {<span class="id">f</span> <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#Inv">Inv</a></span> <span class="id">aT</span> <span class="id">rT</span> <span class="id">f</span>}.<br/>
<span class="kwd">Notation</span> "{ '<span class="id">inv</span>' <span class="id">aT</span> &gt;-&gt;  <span class="id">rT</span> }" := (@<span class="id"><a href="mathcomp.classical.functions.html#type">Inversible.type</a></span> <span class="id">aT</span> <span class="id">rT</span>) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">inv</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]" := [<span class="id">the</span> {<span class="id">inv</span> <span class="id">_</span> &gt;-&gt; <span class="id">_</span>} <span class="id">of</span> <span class="id">f</span> : <span class="id">_</span> -&gt; <span class="id">_</span>] : <span class="id">form_scope</span>.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="phant_inv">phant_inv</a></span> <span class="id">aT</span> <span class="id">rT</span> (<span class="id">f</span> : {<span class="id">inv</span> <span class="id">aT</span> &gt;-&gt; <span class="id">rT</span>}) <span class="id">of</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#phantom">phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span> :=<br/>
&nbsp;&nbsp;@<span class="id"><a href="mathcomp.classical.functions.html#inv">inv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">f</span> ^-1" := (@<span class="id"><a href="mathcomp.classical.functions.html#inv">inv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>%<span class="id">FUN</span>) (<span class="id">only</span> <span class="id">printing</span>) : <span class="id">fun_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">f</span> ^-1" := (@<span class="id"><a href="mathcomp.classical.functions.html#inv">inv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>%<span class="id">function</span>) (<span class="id">only</span> <span class="id">printing</span>) : <span class="id">function_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">f</span> ^-1" := (@<span class="id"><a href="mathcomp.classical.functions.html#phant_inv">phant_inv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#Phantom">Phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span>%<span class="id">FUN</span>)) : <span class="id">fun_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">f</span> ^-1" :=<br/>
&nbsp;&nbsp;(@<span class="id"><a href="mathcomp.classical.functions.html#phant_inv">phant_inv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#Phantom">Phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span>%<span class="id">function</span>)) : <span class="id">function_scope</span>.<br/>
<br/>
<span class="id"><a name="InvFun">HB.structure</a></span> <span class="kwd">Definition</span> <span class="id">InvFun</span> <span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span> <span class="id">B</span> :=<br/>
&nbsp;&nbsp;{<span class="id">f</span> <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#Inv">Inv</a></span> <span class="id">aT</span> <span class="id">rT</span> <span class="id">f</span> &amp; <span class="id"><a href="mathcomp.classical.functions.html#isFun">isFun</a></span> <span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>}.<br/>
<span class="kwd">Notation</span> "{ '<span class="id">invfun</span>' <span class="id">A</span> &gt;-&gt; <span class="id">B</span> }" := (@<span class="id"><a href="mathcomp.classical.functions.html#type">InvFun.type</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span>) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">invfun</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]" :=<br/>
&nbsp;&nbsp;[<span class="id">the</span> {<span class="id">invfun</span> <span class="id">_</span> &gt;-&gt; <span class="id">_</span>} <span class="id">of</span> <span class="id">f</span> : <span class="id">_</span> -&gt; <span class="id">_</span>] : <span class="id">form_scope</span>.<br/>
<br/>
<span class="id"><a name="OInv_CanV">HB.mixin</a></span> <span class="kwd">Record</span> <span class="id">OInv_CanV</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>}<br/>
&nbsp;&nbsp;(<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#OInv">OInv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">oinvS</span> : {<span class="id">homo</span> '<span class="id">oinv_f</span> : <span class="id">x</span> / <span class="id">B</span> <span class="id">x</span> &gt;-&gt; (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id">A</span>) <span class="id">x</span>};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">oinvK</span> : {<span class="kwd">in</span> <span class="id">B</span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#ocancel">ocancel</a></span> '<span class="id">oinv_f</span> <span class="id">f</span>};<br/>
&nbsp;&nbsp;}.<br/>
<br/>
<span class="id"><a name="OCanV">HB.factory</a></span> <span class="kwd">Record</span> <span class="id">OCanV</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">oinv</span>; <span class="id">oinvS</span> : {<span class="id">homo</span> <span class="id">oinv</span> : <span class="id">x</span> / <span class="id">B</span> <span class="id">x</span> &gt;-&gt; (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id">A</span>) <span class="id">x</span>};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">oinvK</span> : {<span class="kwd">in</span> <span class="id">B</span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#ocancel">ocancel</a></span> <span class="id">oinv</span> <span class="id">f</span>};<br/>
&nbsp;&nbsp;}.<br/>
<span class="id"><a name="Builders_34">HB.builders</a></span> <span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>)<br/>
&nbsp;&nbsp;&nbsp;<span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#OCanV">OCanV</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>.<br/>
&nbsp;<span class="id"><a name="Builders_34.HB_unnamed_factory_36">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#OInv.Build">OInv.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_34.Builders_34.f">f</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_34.oinv">oinv</a></span>.<br/>
&nbsp;<span class="id"><a name="Builders_34.HB_unnamed_factory_38">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#OInv_CanV.Build">OInv_CanV.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_34.Builders_34.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_34.Builders_34.B">B</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_34.Builders_34.f">f</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_34.oinvS">oinvS</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_34.oinvK">oinvK</a></span>.<br/>
<span class="id"><a href="mathcomp.classical.functions.html#Builders_34.Builders_34">HB.end</a></span>.<br/>
<br/>
<span class="id"><a name="Surject">HB.structure</a></span> <span class="kwd">Definition</span> <span class="id">Surject</span> {<span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span> <span class="id">B</span>} := {<span class="id">f</span> <span class="id">of</span> @<span class="id"><a href="mathcomp.classical.functions.html#OCanV">OCanV</a></span> <span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>}.<br/>
<span class="kwd">Notation</span> "{ '<span class="id">surj</span>' <span class="id">A</span> &gt;-&gt; <span class="id">B</span> }" := (@<span class="id"><a href="mathcomp.classical.functions.html#type">Surject.type</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span>) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">surj</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]" :=<br/>
&nbsp;&nbsp;[<span class="id">the</span> {<span class="id">surj</span> <span class="id">_</span> &gt;-&gt; <span class="id">_</span>} <span class="id">of</span> <span class="id">f</span> : <span class="id">_</span> -&gt; <span class="id">_</span>] : <span class="id">form_scope</span>.<br/>
<br/>
<span class="id"><a name="SurjFun">HB.structure</a></span> <span class="kwd">Definition</span> <span class="id">SurjFun</span> <span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span> <span class="id">B</span> :=<br/>
&nbsp;&nbsp;{<span class="id">f</span> <span class="id">of</span> @<span class="id"><a href="mathcomp.classical.functions.html#Surject">Surject</a></span> <span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> &amp; @<span class="id"><a href="mathcomp.classical.functions.html#Fun">Fun</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>}.<br/>
<span class="kwd">Notation</span> "{ '<span class="id">surjfun</span>' <span class="id">A</span> &gt;-&gt; <span class="id">B</span> }" := (@<span class="id"><a href="mathcomp.classical.functions.html#type">SurjFun.type</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span>) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">surjfun</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]" :=<br/>
&nbsp;&nbsp;[<span class="id">the</span> {<span class="id">surjfun</span> <span class="id">_</span> &gt;-&gt; <span class="id">_</span>} <span class="id">of</span> <span class="id">f</span> : <span class="id">_</span> -&gt; <span class="id">_</span>] : <span class="id">form_scope</span>.<br/>
<br/>
<span class="id"><a name="SplitSurj">HB.structure</a></span> <span class="kwd">Definition</span> <span class="id">SplitSurj</span> <span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span> <span class="id">B</span> :=<br/>
&nbsp;&nbsp;{<span class="id">f</span> <span class="id">of</span> @<span class="id"><a href="mathcomp.classical.functions.html#Surject">Surject</a></span> <span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> &amp; @<span class="id"><a href="mathcomp.classical.functions.html#Inv">Inv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>}.<br/>
<span class="kwd">Notation</span> "{ '<span class="id">splitsurj</span>' <span class="id">A</span> &gt;-&gt; <span class="id">B</span> }" := (@<span class="id"><a href="mathcomp.classical.functions.html#type">SplitSurj.type</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span>) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">splitsurj</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]" :=<br/>
&nbsp;&nbsp;[<span class="id">the</span> {<span class="id">splitsurj</span> <span class="id">_</span> &gt;-&gt; <span class="id">_</span>} <span class="id">of</span> <span class="id">f</span> : <span class="id">_</span> -&gt; <span class="id">_</span>] : <span class="id">form_scope</span>.<br/>
<br/>
<span class="id"><a name="SplitSurjFun">HB.structure</a></span> <span class="kwd">Definition</span> <span class="id">SplitSurjFun</span> <span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span> <span class="id">B</span> :=<br/>
&nbsp;&nbsp;&nbsp;{<span class="id">f</span> <span class="id">of</span> @<span class="id"><a href="mathcomp.classical.functions.html#SplitSurj">SplitSurj</a></span> <span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> &amp; @<span class="id"><a href="mathcomp.classical.functions.html#Fun">Fun</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>}.<br/>
<span class="kwd">Notation</span> "{ '<span class="id">splitsurjfun</span>' <span class="id">A</span> &gt;-&gt; <span class="id">B</span> }" :=<br/>
&nbsp;&nbsp;(@<span class="id"><a href="mathcomp.classical.functions.html#type">SplitSurjFun.type</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span>) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">splitsurjfun</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]" :=<br/>
&nbsp;&nbsp;[<span class="id">the</span> {<span class="id">splitsurjfun</span> <span class="id">_</span> &gt;-&gt; <span class="id">_</span>} <span class="id">of</span> <span class="id">f</span> : <span class="id">_</span> -&gt; <span class="id">_</span>] : <span class="id">form_scope</span>.<br/>
<br/>
<span class="id"><a name="OInv_Can">HB.mixin</a></span> <span class="kwd">Record</span> <span class="id">OInv_Can</span> <span class="id">aT</span> <span class="id">rT</span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#OInv">OInv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span> :=<br/>
&nbsp;&nbsp;{ <span class="id">funoK</span> : {<span class="kwd">in</span> <span class="id">A</span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#pcancel">pcancel</a></span> <span class="id">f</span> '<span class="id">oinv_f</span>} }.<br/>
<br/>
<span class="id"><a name="Inject">HB.structure</a></span> <span class="kwd">Definition</span> <span class="id">Inject</span> <span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span> :=<br/>
&nbsp;&nbsp;{<span class="id">f</span> <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#OInv">OInv</a></span> <span class="id">aT</span> <span class="id">rT</span> <span class="id">f</span> &amp; <span class="id"><a href="mathcomp.classical.functions.html#OInv_Can">OInv_Can</a></span> <span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span> <span class="id">f</span>}.<br/>
<span class="kwd">Notation</span> "{ '<span class="id">inj</span>' <span class="id">A</span> &gt;-&gt; <span class="id">rT</span> }" := (@<span class="id"><a href="mathcomp.classical.functions.html#type">Inject.type</a></span> <span class="id">_</span> <span class="id">rT</span> <span class="id">A</span>) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">inj</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]" := [<span class="id">the</span> {<span class="id">inj</span> <span class="id">_</span> &gt;-&gt; <span class="id">_</span>} <span class="id">of</span> <span class="id">f</span> : <span class="id">_</span> -&gt; <span class="id">_</span>] : <span class="id">form_scope</span>.<br/>
<br/>
<span class="id"><a name="InjFun">HB.structure</a></span> <span class="kwd">Definition</span> <span class="id">InjFun</span> {<span class="id">aT</span> <span class="id">rT</span>} (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>) :=<br/>
&nbsp;&nbsp;&nbsp;{ <span class="id">f</span> <span class="id">of</span> @<span class="id"><a href="mathcomp.classical.functions.html#Fun">Fun</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> &amp; @<span class="id"><a href="mathcomp.classical.functions.html#Inject">Inject</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">f</span> }.<br/>
<span class="kwd">Notation</span> "{ '<span class="id">injfun</span>' <span class="id">A</span> &gt;-&gt; <span class="id">B</span> }" := (@<span class="id"><a href="mathcomp.classical.functions.html#type">InjFun.type</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span>) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">injfun</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]" :=<br/>
&nbsp;&nbsp;[<span class="id">the</span> {<span class="id">injfun</span> <span class="id">_</span> &gt;-&gt; <span class="id">_</span>} <span class="id">of</span> <span class="id">f</span> : <span class="id">_</span> -&gt; <span class="id">_</span>] : <span class="id">form_scope</span>.<br/>
<br/>
<span class="id"><a name="SplitInj">HB.structure</a></span> <span class="kwd">Definition</span> <span class="id">SplitInj</span> <span class="id">aT</span> <span class="id">rT</span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) :=<br/>
&nbsp;&nbsp;{<span class="id">f</span> <span class="id">of</span> @<span class="id"><a href="mathcomp.classical.functions.html#Inv">Inv</a></span> <span class="id">aT</span> <span class="id">rT</span> <span class="id">f</span> &amp; @<span class="id"><a href="mathcomp.classical.functions.html#Inject">Inject</a></span> <span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span> <span class="id">f</span>}.<br/>
<span class="kwd">Notation</span> "{ '<span class="id">splitinj</span>' <span class="id">A</span> &gt;-&gt; <span class="id">rT</span> }" := (@<span class="id"><a href="mathcomp.classical.functions.html#type">SplitInj.type</a></span> <span class="id">_</span> <span class="id">rT</span> <span class="id">A</span>) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">splitinj</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]" :=<br/>
&nbsp;&nbsp;[<span class="id">the</span> {<span class="id">splitinj</span> <span class="id">_</span> &gt;-&gt; <span class="id">_</span>} <span class="id">of</span> <span class="id">f</span> : <span class="id">_</span> -&gt; <span class="id">_</span>] : <span class="id">form_scope</span>.<br/>
<br/>
<span class="id"><a name="SplitInjFun">HB.structure</a></span> <span class="kwd">Definition</span> <span class="id">SplitInjFun</span> <span class="id">aT</span> <span class="id">rT</span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>) :=<br/>
&nbsp;&nbsp;{<span class="id">f</span> <span class="id">of</span> @<span class="id"><a href="mathcomp.classical.functions.html#SplitInj">SplitInj</a></span> <span class="id">_</span> <span class="id">rT</span> <span class="id">A</span> <span class="id">f</span> &amp; @<span class="id"><a href="mathcomp.classical.functions.html#isFun">isFun</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>}.<br/>
<span class="kwd">Notation</span> "{ '<span class="id">splitinjfun</span>' <span class="id">A</span> &gt;-&gt; <span class="id">B</span> }" := (@<span class="id"><a href="mathcomp.classical.functions.html#type">SplitInjFun.type</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span>) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">splitinjfun</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]" :=<br/>
&nbsp;&nbsp;[<span class="id">the</span> {<span class="id">splitinjfun</span> <span class="id">_</span> &gt;-&gt; <span class="id">_</span>} <span class="id">of</span> <span class="id">f</span> : <span class="id">_</span> -&gt; <span class="id">_</span>] : <span class="id">form_scope</span>.<br/>
<br/>
<span class="id"><a name="Bij">HB.structure</a></span> <span class="kwd">Definition</span> <span class="id">Bij</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} :=<br/>
&nbsp;&nbsp;&nbsp;{<span class="id">f</span> <span class="id">of</span> @<span class="id"><a href="mathcomp.classical.functions.html#InjFun">InjFun</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> &amp; @<span class="id"><a href="mathcomp.classical.functions.html#SurjFun">SurjFun</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>}.<br/>
<span class="kwd">Notation</span> "{ '<span class="id">bij</span>' <span class="id">A</span> &gt;-&gt; <span class="id">B</span> }" := (@<span class="id"><a href="mathcomp.classical.functions.html#type">Bij.type</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span>) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">bij</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]" := [<span class="id">the</span> {<span class="id">bij</span> <span class="id">_</span> &gt;-&gt; <span class="id">_</span>} <span class="id">of</span> <span class="id">f</span>] : <span class="id">form_scope</span>.<br/>
<br/>
<span class="id"><a name="SplitBij">HB.structure</a></span> <span class="kwd">Definition</span> <span class="id">SplitBij</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} :=<br/>
&nbsp;&nbsp;&nbsp;{<span class="id">f</span> <span class="id">of</span> @<span class="id"><a href="mathcomp.classical.functions.html#SplitInjFun">SplitInjFun</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> &amp; @<span class="id"><a href="mathcomp.classical.functions.html#SplitSurjFun">SplitSurjFun</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>}.<br/>
<span class="kwd">Notation</span> "{ '<span class="id">splitbij</span>' <span class="id">A</span> &gt;-&gt; <span class="id">B</span> }" := (@<span class="id"><a href="mathcomp.classical.functions.html#type">SplitBij.type</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span>) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="id">splitbij</span>'  '<span class="id">of</span>'  <span class="id">f</span> ]" := [<span class="id">the</span> {<span class="id">splitbij</span> <span class="id">_</span> &gt;-&gt; <span class="id">_</span>} <span class="id">of</span> <span class="id">f</span>] : <span class="id">form_scope</span>.<br/>
<br/>
<div class="doc">begin hide </div>
<div class="doc">end hide </div>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="ShortFunSyntax">ShortFunSyntax</a></span>.<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> ~&gt; <span class="id">B</span>" := {<span class="kwd">fun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>} (<span class="kwd">at</span> <span class="id">level</span> 70) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">aT</span> &lt;=&gt; <span class="id">rT</span>" := {<span class="id">oinv</span> <span class="id">aT</span> &gt;-&gt; <span class="id">rT</span>} (<span class="kwd">at</span> <span class="id">level</span> 70) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> &lt;~ <span class="id">B</span>" := {<span class="id">oinvfun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>} (<span class="kwd">at</span> <span class="id">level</span> 70) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">aT</span> &lt;&lt;=&gt; <span class="id">rT</span>" := {<span class="id">inv</span> <span class="id">aT</span> &gt;-&gt; <span class="id">rT</span>} (<span class="kwd">at</span> <span class="id">level</span> 70) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> &lt;&lt;~ <span class="id">B</span>" := {<span class="id">invfun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>} (<span class="kwd">at</span> <span class="id">level</span> 70) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> =&gt;&gt; <span class="id">B</span>" := {<span class="id">surj</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>} (<span class="kwd">at</span> <span class="id">level</span> 70) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> ~&gt;&gt; <span class="id">B</span>" := {<span class="id">surjfun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>} (<span class="kwd">at</span> <span class="id">level</span> 70) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> ==&gt;&gt; <span class="id">B</span>" := {<span class="id">splitsurj</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>} (<span class="kwd">at</span> <span class="id">level</span> 70) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> ~~&gt;&gt; <span class="id">B</span>" := {<span class="id">splitsurjfun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>} (<span class="kwd">at</span> <span class="id">level</span> 70) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> &gt;=&gt; <span class="id">rT</span>" := {<span class="id">inj</span> <span class="id">A</span> &gt;-&gt; <span class="id">rT</span>} (<span class="kwd">at</span> <span class="id">level</span> 70) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> &gt;~&gt; <span class="id">B</span>" := {<span class="id">injfun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>} (<span class="kwd">at</span> <span class="id">level</span> 70) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> &gt;&gt;=&gt; <span class="id">rT</span>" := {<span class="id">splitinj</span> <span class="id">A</span> &gt;-&gt; <span class="id">rT</span>} (<span class="kwd">at</span> <span class="id">level</span> 70) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> &gt;&gt;~&gt; <span class="id">B</span>" := {<span class="id">splitinjfun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>} (<span class="kwd">at</span> <span class="id">level</span> 70) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> &lt;~&gt; <span class="id">B</span>" := {<span class="id">bij</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>} (<span class="kwd">at</span> <span class="id">level</span> 70) : <span class="id">type_scope</span>.<br/>
<span class="kwd">Notation</span> "<span class="id">A</span> &lt;&lt;~&gt; <span class="id">B</span>" := {<span class="id">splitbij</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>} (<span class="kwd">at</span> <span class="id">level</span> 70) : <span class="id">type_scope</span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#ShortFunSyntax">ShortFunSyntax</a></span>.<br/>
<br/>
<pre class="ssrdoc">
Theory 
</pre>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="phant_funS">phant_funS</a></span> <span class="id">aT</span> <span class="id">rT</span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>)<br/>
&nbsp;&nbsp;(<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) <span class="id">of</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#phantom">phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span> := @<span class="id"><a href="mathcomp.classical.functions.html#funS">funS</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>.<br/>
<span class="kwd">Notation</span> "'<span class="id">funS_</span>  <span class="id">f</span>" := (<span class="id"><a href="mathcomp.classical.functions.html#phant_funS">phant_funS</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#Phantom">Phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span>))<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">f</span> <span class="kwd">at</span> <span class="id">level</span> 2) : <span class="id">form_scope</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id"><a href="mathcomp.classical.functions.html#set_fun">set_fun</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) =&gt; <span class="id">solve</span> [<span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#funS">funS</a></span>] : <span class="id">core</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#prop_in1">prop_in1</a></span> <span class="id">_</span> <span class="id">_</span>) =&gt; <span class="id">solve</span> [<span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#funS">funS</a></span>] : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="fun_image_sub">fun_image_sub</a></span> <span class="id">aT</span> <span class="id">rT</span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>) (<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.classical_sets.html#image_subP">image_subP</a></span>.2 (@<span class="id"><a href="mathcomp.classical.functions.html#funS">funS</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>).<br/>
<span class="kwd">Arguments</span> <span class="id"><a href="mathcomp.classical.functions.html#fun_image_sub">fun_image_sub</a></span> {<span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span> <span class="id">B</span>}.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">_</span> @` <span class="id">_</span> `&lt;=` <span class="id">_</span>) =&gt; <span class="id">solve</span> [<span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#fun_image_sub">fun_image_sub</a></span>] : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="mem_fun">mem_fun</a></span> <span class="id">aT</span> <span class="id">rT</span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>) (<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.classical_sets.html#homo_setP">homo_setP</a></span>.2 (@<span class="id"><a href="mathcomp.classical.functions.html#funS">funS</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>).<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#prop_in1">prop_in1</a></span> <span class="id">_</span> <span class="id">_</span>) =&gt; <span class="id">solve</span> [<span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#mem_fun">mem_fun</a></span>] : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="phant_mem_fun">phant_mem_fun</a></span> <span class="id">aT</span> <span class="id">rT</span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>)<br/>
&nbsp;&nbsp;(<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) <span class="id">of</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#phantom">phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span> := <span class="id"><a href="mathcomp.classical.classical_sets.html#homo_setP">homo_setP</a></span>.2 (@<span class="id"><a href="mathcomp.classical.functions.html#funS">funS</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>).<br/>
<span class="kwd">Notation</span> "'<span class="id">mem_fun_</span>  <span class="id">f</span>" := (<span class="id"><a href="mathcomp.classical.functions.html#phant_mem_fun">phant_mem_fun</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#Phantom">Phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span>))<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 8, <span class="id">f</span> <span class="kwd">at</span> <span class="id">level</span> 2) : <span class="id">form_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="some_inv">some_inv</a></span> {<span class="id">aT</span> <span class="id">rT</span>} (<span class="id">f</span> : {<span class="id">inv</span> <span class="id">aT</span> &gt;-&gt; <span class="id">rT</span>}) <span class="id">x</span> : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">f</span>^-1 <span class="id">x</span>) = '<span class="id">oinv_f</span> <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof1')">Proof.</span></div>
<div class="proofscript" id="proof1">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.functions.html#oliftV">oliftV</a></span>. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="phant_oinvK">phant_oinvK</a></span> <span class="id">aT</span> <span class="id">rT</span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>)<br/>
&nbsp;&nbsp;&nbsp;(<span class="id">f</span> : {<span class="id">surj</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) <span class="id">of</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#phantom">phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span> := @<span class="id"><a href="mathcomp.classical.functions.html#oinvK">oinvK</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>.<br/>
<span class="kwd">Notation</span> "'<span class="id">oinvK_</span> <span class="id">f</span>" := (<span class="id"><a href="mathcomp.classical.functions.html#phant_oinvK">phant_oinvK</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#Phantom">Phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span>)) : <span class="id">form_scope</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">oinvK</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="phant_oinvS">phant_oinvS</a></span> <span class="id">aT</span> <span class="id">rT</span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>)<br/>
&nbsp;&nbsp;&nbsp;(<span class="id">f</span> : {<span class="id">surj</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) <span class="id">of</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#phantom">phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span> := @<span class="id"><a href="mathcomp.classical.functions.html#oinvS">oinvS</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>.<br/>
<span class="kwd">Notation</span> "'<span class="id">oinvS_</span> <span class="id">f</span>" := (<span class="id"><a href="mathcomp.classical.functions.html#phant_oinvS">phant_oinvS</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#Phantom">Phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span>)) : <span class="id">form_scope</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">oinvS</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Variant</span> <span class="id"><a name="oinv_spec">oinv_spec</a></span> {<span class="id">aT</span>} {<span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} (<span class="id">f</span> : {<span class="id">surj</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) <span class="id">y</span> :<br/>
&nbsp;&nbsp;&nbsp;<span class="id">rT</span> -&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#option">option</a></span> <span class="id">aT</span> -&gt; <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="OInvSpec">OInvSpec</a></span> (<span class="id">x</span> : <span class="id">aT</span>) <span class="id">of</span> <span class="id">A</span> <span class="id">x</span> &amp; <span class="id">f</span> <span class="id">x</span> = <span class="id">y</span> : <span class="id">oinv_spec</span> <span class="id">f</span> <span class="id">y</span> (<span class="id">f</span> <span class="id">x</span>) (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">x</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="oinvP">oinvP</a></span> <span class="id">aT</span> <span class="id">rT</span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>) (<span class="id">f</span> : {<span class="id">surj</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) <span class="id">y</span> :<br/>
&nbsp;&nbsp;<span class="id">B</span> <span class="id">y</span> -&gt; <span class="id"><a href="mathcomp.classical.functions.html#oinv_spec">oinv_spec</a></span> <span class="id">f</span> <span class="id">y</span> <span class="id">y</span> ('<span class="id">oinv_f</span> <span class="id">y</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof2')">Proof.</span></div>
<div class="proofscript" id="proof2">
<span class="id">move</span>=&gt; <span class="id">By</span>; <span class="id">have</span> :='<span class="id">oinvK_f</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#mem_set">mem_set</a></span> <span class="id">By</span>).<br/>
<span class="kwd">by</span> <span class="id">have</span> /<span class="id"><a href="mathcomp.classical.boolp.html#cid2">cid2</a></span> [<span class="id">x</span> <span class="id">Ax</span> &lt;-] := '<span class="id">oinvS_f</span> <span class="id">By</span> =&gt; &lt;-; <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="phant_oinvP">phant_oinvP</a></span> <span class="id">aT</span> <span class="id">rT</span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>)<br/>
&nbsp;&nbsp;&nbsp;(<span class="id">f</span> : {<span class="id">surj</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) <span class="id">of</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#phantom">phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span> := @<span class="id"><a href="mathcomp.classical.functions.html#oinvP">oinvP</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>.<br/>
<span class="kwd">Notation</span> "'<span class="id">oinvP_</span> <span class="id">f</span>" := (<span class="id"><a href="mathcomp.classical.functions.html#phant_oinvP">phant_oinvP</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#Phantom">Phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span>)) : <span class="id">form_scope</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">oinvP</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="oinvT">oinvT</a></span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} {<span class="id">f</span> : {<span class="id">surj</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}} <span class="id">x</span> :<br/>
&nbsp;&nbsp;<span class="id">B</span> <span class="id">x</span> -&gt; '<span class="id">oinv_f</span> <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof3')">Proof.</span></div>
<div class="proofscript" id="proof3">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /'<span class="id">oinvS_f</span> [<span class="id">a</span> <span class="id">Aa</span> &lt;-]. Qed.</div>
<span class="kwd">Definition</span> <span class="id"><a name="phant_oinvT">phant_oinvT</a></span> <span class="id">aT</span> <span class="id">rT</span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>)<br/>
&nbsp;&nbsp;&nbsp;(<span class="id">f</span> : {<span class="id">surj</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) <span class="id">of</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#phantom">phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span> := @<span class="id"><a href="mathcomp.classical.functions.html#oinvT">oinvT</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>.<br/>
<span class="kwd">Notation</span> "'<span class="id">oinvT_</span> <span class="id">f</span>" := (<span class="id"><a href="mathcomp.classical.functions.html#phant_oinvT">phant_oinvT</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#Phantom">Phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span>)) : <span class="id">form_scope</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">oinvT</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="invK">invK</a></span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} {<span class="id">f</span> : {<span class="id">splitsurj</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}} :<br/>
&nbsp;&nbsp;&nbsp;{<span class="kwd">in</span> <span class="id">B</span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#cancel">cancel</a></span> <span class="id">f</span>^-1 <span class="id">f</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof4')">Proof.</span></div>
<div class="proofscript" id="proof4">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> <span class="id">Bx</span>; <span class="id">rewrite</span> -[<span class="id">x</span> <span class="kwd">in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS</a></span>]'<span class="id">oinvK_f</span>// -<span class="id"><a href="mathcomp.classical.functions.html#some_inv">some_inv</a></span>/=. Qed.</div>
<span class="kwd">Definition</span> <span class="id"><a name="phant_invK">phant_invK</a></span> <span class="id">aT</span> <span class="id">rT</span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>)<br/>
&nbsp;&nbsp;&nbsp;(<span class="id">f</span> : {<span class="id">splitsurj</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) <span class="id">of</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#phantom">phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span> := @<span class="id"><a href="mathcomp.classical.functions.html#invK">invK</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>.<br/>
<span class="kwd">Notation</span> "'<span class="id">invK_</span> <span class="id">f</span>" := (<span class="id"><a href="mathcomp.classical.functions.html#phant_invK">phant_invK</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#Phantom">Phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span>)) : <span class="id">form_scope</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">invK</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="invS">invS</a></span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} {<span class="id">f</span> : {<span class="id">splitsurj</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}} :<br/>
&nbsp;&nbsp;{<span class="id">homo</span> <span class="id">f</span>^-1 : <span class="id">x</span> / <span class="id">B</span> <span class="id">x</span> &gt;-&gt; <span class="id">A</span> <span class="id">x</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof5')">Proof.</span></div>
<div class="proofscript" id="proof5">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> /'<span class="id">oinvS_f</span>/= [<span class="id">a</span> <span class="id">Aa</span>]; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.functions.html#some_inv">some_inv</a></span> =&gt; -[&lt;-]. Qed.</div>
<span class="kwd">Definition</span> <span class="id"><a name="phant_invS">phant_invS</a></span> <span class="id">aT</span> <span class="id">rT</span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>)<br/>
&nbsp;&nbsp;&nbsp;{<span class="id">f</span> : {<span class="id">splitsurjfun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}} <span class="id">of</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#phantom">phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span> := @<span class="id"><a href="mathcomp.classical.functions.html#invS">invS</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>.<br/>
<span class="kwd">Notation</span> "'<span class="id">invS_</span> <span class="id">f</span>" := (<span class="id"><a href="mathcomp.classical.functions.html#phant_invS">phant_invS</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#Phantom">Phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span>)) : <span class="id">form_scope</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">invS</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="phant_funoK">phant_funoK</a></span> <span class="id">aT</span> <span class="id">rT</span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) (<span class="id">f</span> : {<span class="id">inj</span> <span class="id">A</span> &gt;-&gt; <span class="id">rT</span>})<br/>
&nbsp;&nbsp;<span class="id">of</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#phantom">phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span> := @<span class="id"><a href="mathcomp.classical.functions.html#funoK">funoK</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>.<br/>
<span class="kwd">Notation</span> "'<span class="id">funoK_</span> <span class="id">f</span>" := (<span class="id"><a href="mathcomp.classical.functions.html#phant_funoK">phant_funoK</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#Phantom">Phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span>)) : <span class="id">form_scope</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">funoK</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="inj">inj</a></span> {<span class="id">aT</span> <span class="id">rT</span> : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#NonPropType.Exports.nonPropType">nonPropType</a></span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">f</span> : {<span class="id">inj</span> <span class="id">A</span> &gt;-&gt; <span class="id">rT</span>}} :<br/>
&nbsp;&nbsp;&nbsp;{<span class="kwd">in</span> <span class="id">A</span> &amp;, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#injective">injective</a></span> <span class="id">f</span>} := <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#pcan_in_inj">pcan_in_inj</a></span> <span class="id"><a href="mathcomp.classical.functions.html#funoK">funoK</a></span>.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="phant_inj">phant_inj</a></span> <span class="id">aT</span> <span class="id">rT</span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) (<span class="id">f</span> : {<span class="id">inj</span> <span class="id">A</span> &gt;-&gt; <span class="id">rT</span>}) <span class="id">of</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#phantom">phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span> := @<span class="id"><a href="mathcomp.classical.functions.html#inj">inj</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>.<br/>
<span class="kwd">Notation</span> "'<span class="id">inj_</span> <span class="id">f</span>" := (<span class="id"><a href="mathcomp.classical.functions.html#phant_inj">phant_inj</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#Phantom">Phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span>)) : <span class="id">form_scope</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="inj_hint">inj_hint</a></span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">f</span> : {<span class="id">inj</span> <span class="id">A</span> &gt;-&gt; <span class="id">rT</span>}} :<br/>
&nbsp;&nbsp;&nbsp;{<span class="kwd">in</span> <span class="id">A</span> &amp;, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#injective">injective</a></span> <span class="id">f</span>} := <span class="id"><a href="mathcomp.classical.functions.html#inj">inj</a></span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 {<span class="kwd">in</span> <span class="id">_</span> &amp;, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#injective">injective</a></span> <span class="id">_</span>} =&gt; <span class="id">solve</span> [<span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#inj_hint">inj_hint</a></span>] : <span class="id">core</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id"><a href="mathcomp.classical.functions.html#set_inj">set_inj</a></span> <span class="id">_</span> <span class="id">_</span>) =&gt; <span class="id">solve</span> [<span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#inj_hint">inj_hint</a></span>] : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="injT">injT</a></span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">f</span> : {<span class="id">inj</span> [<span class="id">set</span>: <span class="id">aT</span>] &gt;-&gt; <span class="id">rT</span>}} : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#injective">injective</a></span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof6')">Proof.</span></div>
<div class="proofscript" id="proof6">
 <span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.classical_sets.html#in2TT">in2TT</a></span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#inj">inj</a></span>. Qed.</div>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#injective">injective</a></span> <span class="id">_</span>) =&gt; <span class="id">solve</span> [<span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#injT">injT</a></span>] : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="funK">funK</a></span> {<span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">s</span> : {<span class="id">splitinj</span> <span class="id">A</span> &gt;-&gt; <span class="id">rT</span>}} :<br/>
&nbsp;&nbsp;{<span class="kwd">in</span> <span class="id">A</span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#cancel">cancel</a></span> <span class="id">s</span> <span class="id">s</span>^-1}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof7')">Proof.</span></div>
<div class="proofscript" id="proof7">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> <span class="id">Ax</span>; <span class="id">apply</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#Some_inj">Some_inj</a></span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#some_inv">some_inv</a></span> <span class="id"><a href="mathcomp.classical.functions.html#funoK">funoK</a></span>. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="phant_funK">phant_funK</a></span> <span class="id">aT</span> <span class="id">rT</span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) (<span class="id">f</span> : {<span class="id">splitinj</span> <span class="id">A</span> &gt;-&gt; <span class="id">rT</span>})<br/>
&nbsp;&nbsp;<span class="id">of</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#phantom">phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span> := @<span class="id"><a href="mathcomp.classical.functions.html#funK">funK</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>.<br/>
<span class="kwd">Notation</span> "'<span class="id">funK_</span>  <span class="id">f</span>" := (<span class="id"><a href="mathcomp.classical.functions.html#phant_funK">phant_funK</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#Phantom">Phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span>)) : <span class="id">form_scope</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">funK</span> : <span class="id">core</span>.<br/>
<br/>
<pre class="ssrdoc">
Structure Equality 
</pre>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="funP">funP</a></span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} (<span class="id">f</span> <span class="id">g</span> : {<span class="kwd">fun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) :<br/>
&nbsp;&nbsp;<span class="id">f</span> = <span class="id">g</span> &lt;-&gt; <span class="id">f</span> =1 <span class="id">g</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof8')">Proof.</span></div>
<div class="proofscript" id="proof8">
<span class="id">case</span>: <span class="id">f</span> <span class="id">g</span> =&gt; [<span class="id">f</span> [[<span class="id">ffun</span>]]] [<span class="id">g</span> [[<span class="id">gfun</span>]]]/=; <span class="id">split</span>=&gt; [[-&gt;//]|/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> <span class="id">eqfg</span>].<br/>
<span class="id">rewrite</span> <span class="id">eqfg</span> <span class="kwd">in</span> <span class="id">ffun</span> *; <span class="id">congr</span> {| <span class="id"><a href="mathcomp.classical.functions.html#sort">Fun.sort</a></span> := <span class="id">_</span>; <span class="id"><a href="mathcomp.classical.functions.html#class">Fun.class</a></span> := {|<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#functions_isFun_mixin">Fun.functions_isFun_mixin</a></span> := {|<span class="id"><a href="mathcomp.classical.functions.html#funS">isFun.funS</a></span> := <span class="id">_</span>|}|}|}.<br/>
<span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.boolp.html#Prop_irrelevance">Prop_irrelevance</a></span>.<br/>
Qed.</div>
<br/>
<pre class="ssrdoc">
Preliminary Builders 
</pre>
<br/>
<span class="id"><a name="Inv_Can">HB.factory</a></span> <span class="kwd">Record</span> <span class="id">Inv_Can</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#Inv">Inv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span> :=<br/>
&nbsp;&nbsp;{ <span class="id">funK</span> : {<span class="kwd">in</span> <span class="id">A</span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#cancel">cancel</a></span> <span class="id">f</span> <span class="id">f</span>^-1} }.<br/>
<span class="id"><a name="Builders_105">HB.builders</a></span> <span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} <span class="id">A</span> (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">of</span> @<span class="id"><a href="mathcomp.classical.functions.html#Inv_Can">Inv_Can</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;<span class="id">Local</span> <span class="kwd">Lemma</span> <span class="id"><a name="Builders_105.funoK">funoK</a></span>: {<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_105.Builders_105.A">A</a></span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#pcancel">pcancel</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_105.Builders_105.f">f</a></span> '<span class="id">oinv_f</span>}.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof9')">Proof.</span></div>
<div class="proofscript" id="proof9">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.functions.html#oliftV">oliftV</a></span>/=; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#can_in_pcan">can_in_pcan</a></span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#Builders_105.funK">funK</a></span>. Qed.</div>
&nbsp;&nbsp;<span class="id"><a name="Builders_105.HB_unnamed_factory_107">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#OInv_Can.Build">OInv_Can.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_105.Builders_105.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_105.Builders_105.f">f</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_105.funoK">funoK</a></span>.<br/>
<span class="id"><a href="mathcomp.classical.functions.html#Builders_105.Builders_105">HB.end</a></span>.<br/>
<br/>
<span class="id"><a name="Inv_CanV">HB.factory</a></span> <span class="kwd">Record</span> <span class="id">Inv_CanV</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#Inv">Inv</a></span> <span class="id">aT</span> <span class="id">rT</span> <span class="id">f</span> := {<br/>
&nbsp;&nbsp;<span class="id">invS</span> : {<span class="id">homo</span> <span class="id">f</span>^-1 : <span class="id">x</span> / <span class="id">B</span> <span class="id">x</span> &gt;-&gt; <span class="id">A</span> <span class="id">x</span>};<br/>
&nbsp;&nbsp;<span class="id">invK</span> : {<span class="kwd">in</span> <span class="id">B</span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#cancel">cancel</a></span> <span class="id">f</span>^-1 <span class="id">f</span>};<br/>
}.<br/>
<span class="id"><a name="Builders_109">HB.builders</a></span> <span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#Inv_CanV">Inv_CanV</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;#[<span class="id">local</span>] <span class="kwd">Lemma</span> <span class="id"><a name="Builders_109.oinvK">oinvK</a></span> : {<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_109.Builders_109.B">B</a></span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#ocancel">ocancel</a></span> '<span class="id">oinv_f</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_109.Builders_109.f">f</a></span>}.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof10')">Proof.</span></div>
<div class="proofscript" id="proof10">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> <span class="id">Bx</span>; <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.functions.html#some_inv">some_inv</a></span>/= <span class="id"><a href="mathcomp.classical.functions.html#Builders_109.invK">invK</a></span>. Qed.</div>
&nbsp;&nbsp;#[<span class="id">local</span>] <span class="kwd">Lemma</span> <span class="id"><a name="Builders_109.oinvS">oinvS</a></span> : {<span class="id">homo</span> '<span class="id">oinv_f</span> : <span class="id">x</span> / <span class="id"><a href="mathcomp.classical.functions.html#Builders_109.Builders_109.B">B</a></span> <span class="id">x</span> &gt;-&gt; (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#Builders_109.Builders_109.A">A</a></span>) <span class="id">x</span>}.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof11')">Proof.</span></div>
<div class="proofscript" id="proof11">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> /<span class="id"><a href="mathcomp.classical.functions.html#Builders_109.invS">invS</a></span> <span class="id">Af</span>'<span class="id">x</span>; <span class="kwd">exists</span> (<span class="id"><a href="mathcomp.classical.functions.html#Builders_109.Builders_109.f">f</a></span>^-1 <span class="id">x</span>); <span class="id">rewrite</span> // -<span class="id"><a href="mathcomp.classical.functions.html#some_inv">some_inv</a></span>. Qed.</div>
&nbsp;&nbsp;<span class="id"><a name="Builders_109.HB_unnamed_factory_111">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#OInv_CanV.Build">OInv_CanV.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_109.Builders_109.f">f</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_109.oinvS">oinvS</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_109.oinvK">oinvK</a></span>.<br/>
<span class="id"><a href="mathcomp.classical.functions.html#Builders_109.Builders_109">HB.end</a></span>.<br/>
<br/>
<pre class="ssrdoc">
Trivial instances 
</pre>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="OInverse">OInverse</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>}.<br/>
<br/>
<span class="id"><a name="OInverse.hb_instance_113">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> {<span class="id">f</span> : {<span class="id">oinv</span> <span class="id"><a href="mathcomp.classical.functions.html#OInverse.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OInverse.rT">rT</a></span>}} :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">OInv.Build</a></span> <span class="id">_</span> <span class="id">_</span> '<span class="id">oinv_f</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#omap">omap</a></span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="oinvV">oinvV</a></span> {<span class="id">f</span> : {<span class="id">oinv</span> <span class="id"><a href="mathcomp.classical.functions.html#OInverse.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OInverse.rT">rT</a></span>}} : '<span class="id">oinv_</span>('<span class="id">oinv_f</span>) = <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#omap">omap</a></span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof12')">Proof.</span></div>
<div class="proofscript" id="proof12">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="id"><a name="OInverse.hb_instance_116">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">surj</span> <span class="id"><a href="mathcomp.classical.functions.html#OInverse.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OInverse.B">B</a></span>}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">isFun.Build</a></span> <span class="id"><a href="mathcomp.classical.functions.html#OInverse.rT">rT</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="mathcomp.classical.functions.html#OInverse.aT">aT</a></span>) <span class="id"><a href="mathcomp.classical.functions.html#OInverse.B">B</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#OInverse.A">A</a></span>) '<span class="id">oinv_f</span> <span class="id"><a href="mathcomp.classical.functions.html#oinvS">oinvS</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="surjoinv_inj_subproof">surjoinv_inj_subproof</a></span> (<span class="id">f</span> : {<span class="id">surj</span> <span class="id"><a href="mathcomp.classical.functions.html#OInverse.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OInverse.B">B</a></span>}) : <span class="id"><a href="mathcomp.classical.functions.html#OInv_Can">OInv_Can</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#OInverse.B">B</a></span> '<span class="id">oinv_f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof13')">Proof.</span></div>
<div class="proofscript" id="proof13">
<span class="id">split</span>=&gt; <span class="id">x</span> <span class="id">Bx</span>/=; <span class="id">rewrite</span> -[<span class="id">x</span> <span class="kwd">in</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.RHS">RHS</a></span>]('<span class="id">oinvK_f</span> <span class="id">Bx</span>).<br/>
<span class="kwd">by</span> <span class="id">have</span> := '<span class="id">oinvT_f</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set_mem">set_mem</a></span> <span class="id">Bx</span>); <span class="id">case</span>: '<span class="id">oinv_f</span>.<br/>
Qed.</div>
<span class="id"><a name="OInverse.hb_instance_119">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">f</span> := <span class="id"><a href="mathcomp.classical.functions.html#surjoinv_inj_subproof">surjoinv_inj_subproof</a></span> <span class="id">f</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="injoinv_surj_subproof">injoinv_surj_subproof</a></span> (<span class="id">f</span> : {<span class="id">injfun</span> <span class="id"><a href="mathcomp.classical.functions.html#OInverse.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OInverse.B">B</a></span>}) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#OInv_CanV">OInv_CanV</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#OInverse.B">B</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#OInverse.A">A</a></span>) '<span class="id">oinv_f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof14')">Proof.</span></div>
<div class="proofscript" id="proof14">
<span class="id">split</span>=&gt; [<span class="id">_</span>|<span class="id">_</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#set_mem">set_mem</a></span>] [<span class="id">a</span> <span class="id">Aa</span> &lt;-]/=; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#funoK">funoK</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>.<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">f</span> <span class="id">a</span>) =&gt; //; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#funS">funS</a></span>.<br/>
Qed.</div>
<span class="id"><a name="OInverse.hb_instance_122">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">injfun</span> <span class="id"><a href="mathcomp.classical.functions.html#OInverse.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OInverse.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#injoinv_surj_subproof">injoinv_surj_subproof</a></span> <span class="id">f</span>.<br/>
<br/>
<span class="id"><a name="OInverse.hb_instance_125">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> {<span class="id">f</span> : {<span class="id">bij</span> <span class="id"><a href="mathcomp.classical.functions.html#OInverse.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OInverse.B">B</a></span>}} := <span class="id"><a href="mathcomp.classical.functions.html#on">InjFun.on</a></span> '<span class="id">oinv_f</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#OInverse">OInverse</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Inverse">Inverse</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>}.<br/>
<br/>
<span class="id"><a name="Inverse.hb_instance_130">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">inv</span> <span class="id"><a href="mathcomp.classical.functions.html#Inverse.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Inverse.rT">rT</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#Build">Inv.Build</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Inverse.rT">rT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Inverse.aT">aT</a></span> <span class="id">f</span>^-1 <span class="id">f</span>.<br/>
<span class="id"><a name="Inverse.hb_instance_136">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">inv</span> <span class="id"><a href="mathcomp.classical.functions.html#Inverse.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Inverse.rT">rT</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#copy">Inversible.copy</a></span> <span class="id"><a href="mathcomp.classical.functions.html#inv">inv</a></span> <span class="id">f</span>^-1.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="invV">invV</a></span> (<span class="id">f</span> : {<span class="id">inv</span> <span class="id"><a href="mathcomp.classical.functions.html#Inverse.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Inverse.rT">rT</a></span>}) : <span class="id">f</span>^-1^-1 = <span class="id">f</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof15')">Proof.</span></div>
<div class="proofscript" id="proof15">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="id"><a name="Inverse.hb_instance_142">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitsurj</span> <span class="id"><a href="mathcomp.classical.functions.html#Inverse.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Inverse.B">B</a></span>}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">isFun.Build</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Inverse.rT">rT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Inverse.aT">aT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Inverse.B">B</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Inverse.A">A</a></span> <span class="id">f</span>^-1 <span class="id"><a href="mathcomp.classical.functions.html#invS">invS</a></span>.<br/>
<span class="id"><a name="Inverse.hb_instance_145">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitsurj</span> <span class="id"><a href="mathcomp.classical.functions.html#Inverse.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Inverse.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#copy">Fun.copy</a></span> <span class="id"><a href="mathcomp.classical.functions.html#inv">inv</a></span> <span class="id">f</span>^-1.<br/>
<span class="id"><a name="Inverse.hb_instance_149">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> {<span class="id">f</span> : {<span class="id">splitsurj</span> <span class="id"><a href="mathcomp.classical.functions.html#Inverse.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Inverse.B">B</a></span>}} :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">Inv_Can.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>^-1 '<span class="id">invK_f</span>.<br/>
<span class="id"><a name="Inverse.hb_instance_153">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitinjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Inverse.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Inverse.B">B</a></span>}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">Inv_CanV.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>^-1 <span class="id"><a href="mathcomp.classical.functions.html#funS">funS</a></span> <span class="id"><a href="mathcomp.classical.functions.html#funK">funK</a></span>.<br/>
<span class="id"><a name="Inverse.hb_instance_157">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> {<span class="id">f</span> : {<span class="id">splitbij</span> <span class="id"><a href="mathcomp.classical.functions.html#Inverse.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Inverse.B">B</a></span>}} := <span class="id"><a href="mathcomp.classical.functions.html#on">InjFun.on</a></span> <span class="id">f</span>^-1.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#Inverse">Inverse</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Some">Some</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">T</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>}.<br/>
<br/>
<span class="id"><a name="HB_unnamed_factory_165">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Build">OInv.Build</a></span> <span class="id">_</span> <span class="id">_</span> (@<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Some.T">T</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#id">id</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="oinv_some">oinv_some</a></span> : '<span class="id">oinv_</span>(@<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Some.T">T</a></span>) = <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#id">id</a></span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof16')">Proof.</span></div>
<div class="proofscript" id="proof16">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="some_can_subproof">some_can_subproof</a></span> : @<span class="id"><a href="mathcomp.classical.functions.html#OInv_Can">OInv_Can</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Some.A">A</a></span> (@<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Some.T">T</a></span>)<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof17')">Proof.</span></div>
<div class="proofscript" id="proof17">
 <span class="kwd">by</span> <span class="id">split</span>. Qed.</div>
<span class="id"><a name="HB_unnamed_factory_167">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#some_can_subproof">some_can_subproof</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="some_canV_subproof">some_canV_subproof</a></span> : <span class="id"><a href="mathcomp.classical.functions.html#OInv_CanV">OInv_CanV</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Some.A">A</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#Some.A">A</a></span>) (@<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Some.T">T</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof18')">Proof.</span></div>
<div class="proofscript" id="proof18">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; [<span class="id">x</span>|<span class="id">x</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#set_mem">set_mem</a></span>] [<span class="id">a</span> <span class="id">Aa</span> &lt;-]//=; <span class="kwd">exists</span> <span class="id">a</span>. Qed.</div>
<span class="id"><a name="HB_unnamed_factory_169">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span>  := <span class="id"><a href="mathcomp.classical.functions.html#some_canV_subproof">some_canV_subproof</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="some_fun_subproof">some_fun_subproof</a></span> : <span class="id"><a href="mathcomp.classical.functions.html#isFun">isFun</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Some.A">A</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#Some.A">A</a></span>) (@<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Some.T">T</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof19')">Proof.</span></div>
<div class="proofscript" id="proof19">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; <span class="id">x</span>; <span class="kwd">exists</span> <span class="id">x</span>. Qed.</div>
<span class="id"><a name="HB_unnamed_factory_171">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#some_fun_subproof">some_fun_subproof</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#Some">Some</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="OApply">OApply</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} {<span class="id">b0</span> : <span class="id">rT</span>}.<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="oapp">oapp</a></span> <span class="id">f</span> := (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#oapp">oapp</a></span> <span class="id">f</span> <span class="id"><a href="mathcomp.classical.functions.html#OApply.b0">b0</a></span>).<br/>
<br/>
<span class="id"><a name="OApply.hb_instance_173">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> {<span class="id">f</span> : {<span class="id">oinv</span> <span class="id"><a href="mathcomp.classical.functions.html#OApply.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OApply.rT">rT</a></span>}} :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">Inv.Build</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.classical.functions.html#oapp">oapp</a></span> <span class="id">f</span>) '<span class="id">oinv_f</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inv_oapp">inv_oapp</a></span> {<span class="id">f</span> : {<span class="id">oinv</span> <span class="id"><a href="mathcomp.classical.functions.html#OApply.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OApply.rT">rT</a></span>}} : (<span class="id"><a href="mathcomp.classical.functions.html#oapp">oapp</a></span> <span class="id">f</span>)^-1 = '<span class="id">oinv_f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof20')">Proof.</span></div>
<div class="proofscript" id="proof20">
 <span class="kwd">by</span> []. Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="oinv_oapp">oinv_oapp</a></span>  {<span class="id">f</span> : {<span class="id">oinv</span> <span class="id"><a href="mathcomp.classical.functions.html#OApply.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OApply.rT">rT</a></span>}} : '<span class="id">oinv_</span>(<span class="id"><a href="mathcomp.classical.functions.html#oapp">oapp</a></span> <span class="id">f</span>) = <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#olift">olift</a></span> '<span class="id">oinv_f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof21')">Proof.</span></div>
<div class="proofscript" id="proof21">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id"><a href="mathcomp.classical.functions.html#inv_oapp">inv_oapp</a></span>. Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="inv_oappV">inv_oappV</a></span> {<span class="id">f</span> : {<span class="id">inv</span> <span class="id"><a href="mathcomp.classical.functions.html#OApply.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OApply.rT">rT</a></span>}} : <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#olift">olift</a></span> <span class="id">f</span>^-1 = (<span class="id"><a href="mathcomp.classical.functions.html#oapp">oapp</a></span> <span class="id">f</span>)^-1.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof22')">Proof.</span></div>
<div class="proofscript" id="proof22">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#inv_oapp">inv_oapp</a></span> -<span class="id"><a href="mathcomp.classical.functions.html#oliftV">oliftV</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="oapp_can_subproof">oapp_can_subproof</a></span> (<span class="id">f</span> : {<span class="id">inj</span> <span class="id"><a href="mathcomp.classical.functions.html#OApply.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OApply.rT">rT</a></span>}) : <span class="id"><a href="mathcomp.classical.functions.html#Inv_Can">Inv_Can</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#OApply.A">A</a></span>) (<span class="id"><a href="mathcomp.classical.functions.html#oapp">oapp</a></span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof23')">Proof.</span></div>
<div class="proofscript" id="proof23">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; <span class="id">x</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#set_mem">set_mem</a></span>[<span class="id">a</span> <span class="id">Aa</span> &lt;-]/=; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#inv_oapp">inv_oapp</a></span> <span class="id"><a href="mathcomp.classical.functions.html#funoK">funoK</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>. Qed.</div>
<span class="id"><a name="OApply.hb_instance_181">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">f</span> := <span class="id"><a href="mathcomp.classical.functions.html#oapp_can_subproof">oapp_can_subproof</a></span> <span class="id">f</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="oapp_surj_subproof">oapp_surj_subproof</a></span> (<span class="id">f</span> : {<span class="id">surj</span> <span class="id"><a href="mathcomp.classical.functions.html#OApply.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OApply.B">B</a></span>}) : <span class="id"><a href="mathcomp.classical.functions.html#Inv_CanV">Inv_CanV</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#OApply.A">A</a></span>) <span class="id"><a href="mathcomp.classical.functions.html#OApply.B">B</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#oapp">oapp</a></span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof24')">Proof.</span></div>
<div class="proofscript" id="proof24">
<span class="kwd">by</span> <span class="id">split</span>=&gt; [<span class="id">b</span>|<span class="id">b</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#set_mem">set_mem</a></span>] <span class="id">Bb</span>/=; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#inv_oapp">inv_oapp</a></span>; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.functions.html#oinvP">oinvP</a></span> =&gt; // <span class="id">x</span>; <span class="kwd">exists</span> <span class="id">x</span>.<br/>
Qed.</div>
<span class="id"><a name="OApply.hb_instance_186">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span>  <span class="id">f</span> := <span class="id"><a href="mathcomp.classical.functions.html#oapp_surj_subproof">oapp_surj_subproof</a></span> <span class="id">f</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="oapp_fun_subproof">oapp_fun_subproof</a></span> (<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id"><a href="mathcomp.classical.functions.html#OApply.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OApply.B">B</a></span>}) : <span class="id"><a href="mathcomp.classical.functions.html#isFun">isFun</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#OApply.A">A</a></span>) <span class="id"><a href="mathcomp.classical.functions.html#OApply.B">B</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#oapp">oapp</a></span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof25')">Proof.</span></div>
<div class="proofscript" id="proof25">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; <span class="id">x</span> [<span class="id">a</span> <span class="id">Aa</span> &lt;-] /=; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#funS">funS</a></span>. Qed.</div>
<span class="id"><a name="OApply.hb_instance_191">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">f</span> := <span class="id"><a href="mathcomp.classical.functions.html#oapp_fun_subproof">oapp_fun_subproof</a></span> <span class="id">f</span>.<br/>
<span class="id"><a name="OApply.hb_instance_194">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">oinvfun</span> <span class="id"><a href="mathcomp.classical.functions.html#OApply.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OApply.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#oapp">oapp</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="OApply.hb_instance_198">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">injfun</span> <span class="id"><a href="mathcomp.classical.functions.html#OApply.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OApply.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#oapp">oapp</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="OApply.hb_instance_202">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">surjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#OApply.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OApply.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#oapp">oapp</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="OApply.hb_instance_206">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">bij</span> <span class="id"><a href="mathcomp.classical.functions.html#OApply.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OApply.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#oapp">oapp</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="OApply.hb_instance_210">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitbij</span> <span class="id"><a href="mathcomp.classical.functions.html#OApply.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OApply.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#oapp">oapp</a></span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#OApply">OApply</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="OBind">OBind</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#option">option</a></span> <span class="id">rT</span>)}.<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="b">b</a></span> <span class="id">f</span> := (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#oapp">oapp</a></span> <span class="id">f</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#None">None</a></span>).<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="orT">orT</a></span> := (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="mathcomp.classical.functions.html#OBind.rT">rT</a></span>).<br/>
<br/>
<span class="id"><a name="OBind.hb_instance_214">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> {<span class="id">f</span> : {<span class="id">oinv</span> <span class="id"><a href="mathcomp.classical.functions.html#OBind.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#orT">orT</a></span>}} :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">Inv.Build</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#obind">obind</a></span> <span class="id">f</span>) '<span class="id">oinv_f</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inv_obind">inv_obind</a></span> {<span class="id">f</span> : {<span class="id">oinv</span> <span class="id"><a href="mathcomp.classical.functions.html#OBind.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#orT">orT</a></span>}} : (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#obind">obind</a></span> <span class="id">f</span>)^-1 = '<span class="id">oinv_f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof26')">Proof.</span></div>
<div class="proofscript" id="proof26">
 <span class="kwd">by</span> []. Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="oinv_obind">oinv_obind</a></span> {<span class="id">f</span> : {<span class="id">oinv</span> <span class="id"><a href="mathcomp.classical.functions.html#OBind.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#orT">orT</a></span>}} : '<span class="id">oinv_</span>(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#obind">obind</a></span> <span class="id">f</span>) = <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#olift">olift</a></span> '<span class="id">oinv_f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof27')">Proof.</span></div>
<div class="proofscript" id="proof27">
 <span class="kwd">by</span> []. Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="inv_obindV">inv_obindV</a></span> {<span class="id">f</span> : {<span class="id">inv</span> <span class="id"><a href="mathcomp.classical.functions.html#OBind.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#orT">orT</a></span>}} : (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#obind">obind</a></span> <span class="id">f</span>)^-1 = <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#olift">olift</a></span> <span class="id">f</span>^-1.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof28')">Proof.</span></div>
<div class="proofscript" id="proof28">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#inv_obind">inv_obind</a></span> -<span class="id"><a href="mathcomp.classical.functions.html#oliftV">oliftV</a></span>. Qed.</div>
<br/>
<span class="id"><a name="OBind.hb_instance_222">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id"><a href="mathcomp.classical.functions.html#OBind.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OBind.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#copy">Fun.copy</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#obind">obind</a></span> <span class="id">f</span>) (<span class="id"><a href="mathcomp.classical.functions.html#b">b</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="OBind.hb_instance_227">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">inj</span> <span class="id"><a href="mathcomp.classical.functions.html#OBind.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#orT">orT</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#copy">Inject.copy</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#obind">obind</a></span> <span class="id">f</span>) (<span class="id"><a href="mathcomp.classical.functions.html#b">b</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="OBind.hb_instance_232">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">injfun</span> <span class="id"><a href="mathcomp.classical.functions.html#OBind.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OBind.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#obind">obind</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="OBind.hb_instance_236">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">surj</span> <span class="id"><a href="mathcomp.classical.functions.html#OBind.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OBind.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#copy">Surject.copy</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#obind">obind</a></span> <span class="id">f</span>) (<span class="id"><a href="mathcomp.classical.functions.html#b">b</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="OBind.hb_instance_241">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">surjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#OBind.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OBind.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#obind">obind</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="OBind.hb_instance_245">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">bij</span> <span class="id"><a href="mathcomp.classical.functions.html#OBind.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OBind.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#obind">obind</a></span> <span class="id">f</span>).<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#OBind">OBind</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Composition">Composition</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span> <span class="id">sT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} {<span class="id">C</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">sT</span>}.<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Lemma</span> <span class="id"><a name="comp_fun_subproof">comp_fun_subproof</a></span> (<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.B">B</a></span>}) (<span class="id">g</span> : {<span class="kwd">fun</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.B">B</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.C">C</a></span>}) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#isFun">isFun</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.C">C</a></span> (<span class="id">g</span> \<span class="id">o</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof29')">Proof.</span></div>
<div class="proofscript" id="proof29">
 <span class="kwd">by</span> <span class="id">split</span> =&gt; <span class="id">x</span> /'<span class="id">funS_f</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#funS">funS</a></span>. Qed.</div>
<span class="id"><a name="Composition.hb_instance_249">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">f</span> <span class="id">g</span> := <span class="id"><a href="mathcomp.classical.functions.html#comp_fun_subproof">comp_fun_subproof</a></span> <span class="id">f</span> <span class="id">g</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Composition.OInv">OInv</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">f</span> : {<span class="id">oinv</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.rT">rT</a></span>}} {<span class="id">g</span> : {<span class="id">oinv</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.rT">rT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.sT">sT</a></span>}}.<br/>
<span class="id"><a name="HB_unnamed_factory_252">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Build">OInv.Build</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.classical.functions.html#Composition.OInv.g">g</a></span> \<span class="id">o</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.OInv.f">f</a></span>) (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#obind">obind</a></span> '<span class="id">oinv_f</span> \<span class="id">o</span> '<span class="id">oinv_g</span>).<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="oinv_comp">oinv_comp</a></span> : '<span class="id">oinv_</span>(<span class="id"><a href="mathcomp.classical.functions.html#Composition.OInv.g">g</a></span> \<span class="id">o</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.OInv.f">f</a></span>) = (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#obind">obind</a></span> '<span class="id">oinv_f</span>) \<span class="id">o</span> '<span class="id">oinv_g</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof30')">Proof.</span></div>
<div class="proofscript" id="proof30">
 <span class="kwd">by</span> []. Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.OInv">OInv</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Composition.OInv">OInv</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">f</span> : {<span class="id">inv</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.rT">rT</a></span>}} {<span class="id">g</span> : {<span class="id">inv</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.rT">rT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.sT">sT</a></span>}}.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="some_comp_inv">some_comp_inv</a></span> : <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#olift">olift</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#Composition.OInv.f">f</a></span>^-1 \<span class="id">o</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.OInv.g">g</a></span>^-1) = '<span class="id">oinv_</span>(<span class="id"><a href="mathcomp.classical.functions.html#Composition.OInv.g">g</a></span> \<span class="id">o</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.OInv.f">f</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof31')">Proof.</span></div>
<div class="proofscript" id="proof31">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#funeqE">funeqE</a></span> =&gt; <span class="id">x</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#oinv_comp">oinv_comp</a></span> -!<span class="id"><a href="mathcomp.classical.functions.html#oliftV">oliftV</a></span>. Qed.</div>
<span class="id"><a name="HB_unnamed_factory_254">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Build">OInv_Inv.Build</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.aT">aT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.sT">sT</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#Composition.OInv.g">g</a></span> \<span class="id">o</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.OInv.f">f</a></span>) <span class="id"><a href="mathcomp.classical.functions.html#some_comp_inv">some_comp_inv</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inv_comp">inv_comp</a></span> : (<span class="id"><a href="mathcomp.classical.functions.html#Composition.OInv.g">g</a></span> \<span class="id">o</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.OInv.f">f</a></span>)^-1 = <span class="id"><a href="mathcomp.classical.functions.html#Composition.OInv.f">f</a></span>^-1 \<span class="id">o</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.OInv.g">g</a></span>^-1<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof32')">Proof.</span></div>
<div class="proofscript" id="proof32">
 <span class="kwd">by</span> []. Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.OInv">OInv</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="comp_can_subproof">comp_can_subproof</a></span> (<span class="id">f</span> : {<span class="id">injfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.B">B</a></span>}) (<span class="id">g</span> : {<span class="id">inj</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.B">B</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.sT">sT</a></span>}) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#OInv_Can">OInv_Can</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.aT">aT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.sT">sT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.A">A</a></span> (<span class="id">g</span> \<span class="id">o</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof33')">Proof.</span></div>
<div class="proofscript" id="proof33">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; <span class="id">x</span> <span class="id">Ax</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#oinv_comp">oinv_comp</a></span>/= <span class="id"><a href="mathcomp.classical.functions.html#funoK">funoK</a></span> ?<span class="id"><a href="mathcomp.classical.functions.html#mem_fun">mem_fun</a></span>//= <span class="id"><a href="mathcomp.classical.functions.html#funoK">funoK</a></span>. Qed.</div>
<span class="id"><a name="Composition.hb_instance_256">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">f</span> <span class="id">g</span> := <span class="id"><a href="mathcomp.classical.functions.html#comp_can_subproof">comp_can_subproof</a></span> <span class="id">f</span> <span class="id">g</span>.<br/>
<br/>
<span class="id"><a name="Composition.hb_instance_259">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">injfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.B">B</a></span>}) (<span class="id">g</span> : {<span class="id">injfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.B">B</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.C">C</a></span>}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#on">Inject.on</a></span> (<span class="id">g</span> \<span class="id">o</span> <span class="id">f</span>).<br/>
<span class="id"><a name="Composition.hb_instance_265">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitinjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.B">B</a></span>})<br/>
&nbsp;&nbsp;(<span class="id">g</span> : {<span class="id">splitinj</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.B">B</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.sT">sT</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Inject.on</a></span> (<span class="id">g</span> \<span class="id">o</span> <span class="id">f</span>).<br/>
<span class="id"><a name="Composition.hb_instance_271">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitinjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.B">B</a></span>})<br/>
&nbsp;&nbsp;(<span class="id">g</span> : {<span class="id">splitinjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.B">B</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.C">C</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Inject.on</a></span> (<span class="id">g</span> \<span class="id">o</span> <span class="id">f</span>).<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition">Composition</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Composition">Composition</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span> <span class="id">sT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} {<span class="id">C</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">sT</span>}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="comp_surj_subproof">comp_surj_subproof</a></span> (<span class="id">f</span> : {<span class="id">surj</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.B">B</a></span>}) (<span class="id">g</span> : {<span class="id">surj</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.B">B</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.C">C</a></span>}) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#OInv_CanV">OInv_CanV</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.C">C</a></span> (<span class="id">g</span> \<span class="id">o</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof34')">Proof.</span></div>
<div class="proofscript" id="proof34">
<span class="id">split</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.functions.html#funS">funS</a></span>.<br/>
<span class="id">apply</span>: (@<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#ocan_in_comp">ocan_in_comp</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#mem">mem</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.B">B</a></span>)) <span class="id"><a href="mathcomp.classical.functions.html#oinvK">oinvK</a></span> <span class="id"><a href="mathcomp.classical.functions.html#oinvK">oinvK</a></span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; ? /<span class="id"><a href="mathcomp.classical.classical_sets.html#set_mem">set_mem</a></span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#pred_oapp_set">pred_oapp_set</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#funS">funS</a></span>.<br/>
Qed.</div>
<br/>
<span class="id"><a name="Composition.hb_instance_277">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">f</span> <span class="id">g</span> := <span class="id"><a href="mathcomp.classical.functions.html#comp_surj_subproof">comp_surj_subproof</a></span> <span class="id">f</span> <span class="id">g</span>.<br/>
<span class="id"><a name="Composition.hb_instance_280">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitsurj</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.B">B</a></span>}) (<span class="id">g</span> : {<span class="id">splitsurj</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.B">B</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.C">C</a></span>}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> (<span class="id">g</span> \<span class="id">o</span> <span class="id">f</span>).<br/>
<span class="id"><a name="Composition.hb_instance_286">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">surjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.B">B</a></span>}) (<span class="id">g</span> : {<span class="id">surjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.B">B</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.C">C</a></span>}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> (<span class="id">g</span> \<span class="id">o</span> <span class="id">f</span>).<br/>
<span class="id"><a name="Composition.hb_instance_292">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitsurjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.B">B</a></span>})<br/>
&nbsp;&nbsp;(<span class="id">g</span> : {<span class="id">splitsurjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.B">B</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.C">C</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> (<span class="id">g</span> \<span class="id">o</span> <span class="id">f</span>).<br/>
<span class="id"><a name="Composition.hb_instance_298">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">bij</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.B">B</a></span>}) (<span class="id">g</span> : {<span class="id">bij</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.B">B</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.C">C</a></span>}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> (<span class="id">g</span> \<span class="id">o</span> <span class="id">f</span>).<br/>
<span class="id"><a name="Composition.hb_instance_304">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitbij</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.B">B</a></span>}) (<span class="id">g</span> : {<span class="id">splitbij</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition.B">B</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Composition.C">C</a></span>}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> (<span class="id">g</span> \<span class="id">o</span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#Composition">Composition</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="totalfun">totalfun</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>}.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="totalfun_">totalfun_</a></span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.functions.html#totalfun.aT">aT</a></span>) (<span class="id">f</span> : <span class="id"><a href="mathcomp.classical.functions.html#totalfun.aT">aT</a></span> -&gt; <span class="id"><a href="mathcomp.classical.functions.html#totalfun.rT">rT</a></span>) := <span class="id">f</span>.<br/>
<span class="kwd">Context</span> {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.functions.html#totalfun.aT">aT</a></span>}.<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="totalfun">totalfun</a></span> := (<span class="id"><a href="mathcomp.classical.functions.html#totalfun_">totalfun_</a></span> <span class="id"><a href="mathcomp.classical.functions.html#totalfun.A">A</a></span>).<br/>
<span class="id"><a name="totalfun.hb_instance_310">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : <span class="id"><a href="mathcomp.classical.functions.html#totalfun.aT">aT</a></span> -&gt; <span class="id"><a href="mathcomp.classical.functions.html#totalfun.rT">rT</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">isFun.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#totalfun.A">A</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#totalfun">totalfun</a></span> <span class="id">f</span>) (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">I</a></span>).<br/>
<span class="id"><a name="totalfun.hb_instance_313">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">inj</span> <span class="id"><a href="mathcomp.classical.functions.html#totalfun.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#totalfun.rT">rT</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Inject.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#totalfun">totalfun</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="totalfun.hb_instance_321">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitinj</span> <span class="id"><a href="mathcomp.classical.functions.html#totalfun.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#totalfun.rT">rT</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">SplitInj.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#totalfun">totalfun</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="totalfun.hb_instance_327">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">surj</span> <span class="id"><a href="mathcomp.classical.functions.html#totalfun.A">A</a></span> &gt;-&gt; [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#totalfun.rT">rT</a></span>]}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#totalfun">totalfun</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="totalfun.hb_instance_335">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitsurj</span> <span class="id"><a href="mathcomp.classical.functions.html#totalfun.A">A</a></span> &gt;-&gt; [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#totalfun.rT">rT</a></span>]}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#on">SplitSurj.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#totalfun">totalfun</a></span> <span class="id">f</span>).<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#totalfun">totalfun</a></span>.<br/>
<span class="kwd">Notation</span> "''<span class="id">totalfun_</span>' <span class="id">A</span>" := (<span class="id"><a href="mathcomp.classical.functions.html#totalfun_">totalfun_</a></span> <span class="id">A</span>) : <span class="id">form_scope</span>.<br/>
<span class="kwd">Notation</span> <span class="id"><a name="totalfun">totalfun</a></span> := (<span class="id"><a href="mathcomp.classical.functions.html#totalfun_">totalfun_</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Olift">Olift</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>}.<br/>
<br/>
<span class="id"><a name="Olift.hb_instance_342">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> {<span class="id">f</span> : {<span class="id">oinv</span> <span class="id"><a href="mathcomp.classical.functions.html#Olift.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Olift.rT">rT</a></span>}} := <span class="id"><a href="mathcomp.classical.functions.html#on">OInversible.on</a></span> (<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#olift">olift</a></span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="oinv_olift">oinv_olift</a></span>  {<span class="id">f</span> : {<span class="id">oinv</span> <span class="id"><a href="mathcomp.classical.functions.html#Olift.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Olift.rT">rT</a></span>}} : '<span class="id">oinv_</span>(<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#olift">olift</a></span> <span class="id">f</span>) = <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#obind">obind</a></span> '<span class="id">oinv_f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof35')">Proof.</span></div>
<div class="proofscript" id="proof35">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="id"><a name="Olift.hb_instance_346">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">inj</span> <span class="id"><a href="mathcomp.classical.functions.html#Olift.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Olift.rT">rT</a></span>}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#copy">Inject.copy</a></span> (<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#olift">olift</a></span> <span class="id">f</span>) (<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#olift">olift</a></span> ('<span class="id">totalfun_A</span> <span class="id">f</span>)).<br/>
<span class="id"><a name="Olift.hb_instance_353">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">surj</span> <span class="id"><a href="mathcomp.classical.functions.html#Olift.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Olift.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> (<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#olift">olift</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="Olift.hb_instance_360">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id"><a href="mathcomp.classical.functions.html#Olift.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Olift.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> (<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#olift">olift</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="Olift.hb_instance_365">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">oinvfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Olift.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Olift.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> (<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#olift">olift</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="Olift.hb_instance_369">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">injfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Olift.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Olift.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> (<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#olift">olift</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="Olift.hb_instance_373">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">surjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Olift.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Olift.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> (<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#olift">olift</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="Olift.hb_instance_377">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">bij</span> <span class="id"><a href="mathcomp.classical.functions.html#Olift.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Olift.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> (<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#olift">olift</a></span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#Olift">Olift</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Map">Map</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>}.<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="m">m</a></span> <span class="id">f</span> := (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#obind">obind</a></span> (<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#olift">olift</a></span> <span class="id">f</span>)).<br/>
<br/>
<span class="id"><a name="Map.hb_instance_381">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id"><a href="mathcomp.classical.functions.html#Map.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Map.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#copy">Fun.copy</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#omap">omap</a></span> <span class="id">f</span>) (<span class="id"><a href="mathcomp.classical.functions.html#m">m</a></span> <span class="id">f</span>).<br/>
<br/>
<span class="id"><a name="Map.hb_instance_386">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> {<span class="id">f</span> : {<span class="id">oinv</span> <span class="id"><a href="mathcomp.classical.functions.html#Map.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Map.rT">rT</a></span>}} :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">Inv.Build</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#omap">omap</a></span> <span class="id">f</span>) (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#obind">obind</a></span> '<span class="id">oinv_f</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inv_omap">inv_omap</a></span> {<span class="id">f</span> : {<span class="id">oinv</span> <span class="id"><a href="mathcomp.classical.functions.html#Map.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Map.rT">rT</a></span>}} : (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#omap">omap</a></span> <span class="id">f</span>)^-1 = <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#obind">obind</a></span> '<span class="id">oinv_f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof36')">Proof.</span></div>
<div class="proofscript" id="proof36">
 <span class="kwd">by</span> []. Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="oinv_omap">oinv_omap</a></span> {<span class="id">f</span> : {<span class="id">oinv</span> <span class="id"><a href="mathcomp.classical.functions.html#Map.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Map.rT">rT</a></span>}} : '<span class="id">oinv_</span>(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#omap">omap</a></span> <span class="id">f</span>) = <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#olift">olift</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#obind">obind</a></span> '<span class="id">oinv_f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof37')">Proof.</span></div>
<div class="proofscript" id="proof37">
 <span class="kwd">by</span> []. Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="omapV">omapV</a></span> {<span class="id">f</span> : {<span class="id">inv</span> <span class="id"><a href="mathcomp.classical.functions.html#Map.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Map.rT">rT</a></span>}} : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#omap">omap</a></span> <span class="id">f</span>^-1 = (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#omap">omap</a></span> <span class="id">f</span>)^-1.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof38')">Proof.</span></div>
<div class="proofscript" id="proof38">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#inv_omap">inv_omap</a></span> -<span class="id"><a href="mathcomp.classical.functions.html#oliftV">oliftV</a></span>. Qed.</div>
<br/>
<span class="id"><a name="Map.hb_instance_394">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">oinvfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Map.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Map.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#omap">omap</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="Map.hb_instance_398">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">inj</span> <span class="id"><a href="mathcomp.classical.functions.html#Map.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Map.rT">rT</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#copy">Inject.copy</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#omap">omap</a></span> <span class="id">f</span>) (<span class="id"><a href="mathcomp.classical.functions.html#m">m</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="Map.hb_instance_405">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">injfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Map.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Map.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#omap">omap</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="Map.hb_instance_409">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">surj</span> <span class="id"><a href="mathcomp.classical.functions.html#Map.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Map.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#copy">Surject.copy</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#omap">omap</a></span> <span class="id">f</span>) (<span class="id"><a href="mathcomp.classical.functions.html#m">m</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="Map.hb_instance_416">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">surjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Map.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Map.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#omap">omap</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="Map.hb_instance_420">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">bij</span> <span class="id"><a href="mathcomp.classical.functions.html#Map.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Map.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#omap">omap</a></span> <span class="id">f</span>).<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#Map">Map</a></span>.<br/>
<br/>
<pre class="ssrdoc">
Builders 
</pre>
<br/>
<span class="id"><a name="CanV">HB.factory</a></span> <span class="kwd">Record</span> <span class="id">CanV</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) :=<br/>
&nbsp;&nbsp;{ <span class="id">inv</span>; <span class="id">invS</span> : {<span class="id">homo</span> <span class="id">inv</span> : <span class="id">x</span> / <span class="id">B</span> <span class="id">x</span> &gt;-&gt; <span class="id">A</span> <span class="id">x</span>}; <span class="id">invK</span> : {<span class="kwd">in</span> <span class="id">B</span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#cancel">cancel</a></span> <span class="id">inv</span> <span class="id">f</span>}; }.<br/>
<span class="id"><a name="Builders_424">HB.builders</a></span> <span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#CanV">CanV</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>.<br/>
&nbsp;<span class="id"><a name="Builders_424.HB_unnamed_factory_426">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Inv.Build">Inv.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_424.Builders_424.f">f</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_424.inv">inv</a></span>.<br/>
&nbsp;<span class="id"><a name="Builders_424.HB_unnamed_factory_429">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Inv_CanV.Build">Inv_CanV.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_424.Builders_424.f">f</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_424.invS">invS</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_424.invK">invK</a></span>.<br/>
<span class="id"><a href="mathcomp.classical.functions.html#Builders_424.Builders_424">HB.end</a></span>.<br/>
<br/>
<span class="id"><a name="OInv_Can2">HB.factory</a></span> <span class="kwd">Record</span> <span class="id">OInv_Can2</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">of</span><br/>
&nbsp;&nbsp;@<span class="id"><a href="mathcomp.classical.functions.html#OInv">OInv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span> :=<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">funS</span> :  {<span class="id">homo</span> <span class="id">f</span> : <span class="id">x</span> / <span class="id">A</span> <span class="id">x</span> &gt;-&gt; <span class="id">B</span> <span class="id">x</span>};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">oinvS</span> : {<span class="id">homo</span> '<span class="id">oinv_f</span> : <span class="id">x</span> / <span class="id">B</span> <span class="id">x</span> &gt;-&gt; (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id">A</span>) <span class="id">x</span>};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">funoK</span> : {<span class="kwd">in</span> <span class="id">A</span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#pcancel">pcancel</a></span> <span class="id">f</span> '<span class="id">oinv_f</span>};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">oinvK</span> : {<span class="kwd">in</span> <span class="id">B</span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#ocancel">ocancel</a></span> '<span class="id">oinv_f</span> <span class="id">f</span>};<br/>
&nbsp;&nbsp;}.<br/>
<span class="id"><a name="Builders_431">HB.builders</a></span> <span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} <span class="id">A</span> <span class="id">B</span> (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#OInv_Can2">OInv_Can2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;<span class="id"><a name="Builders_431.HB_unnamed_factory_433">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#isFun.Build">isFun.Build</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_431.Builders_431.aT">aT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_431.Builders_431.rT">rT</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_431.Builders_431.f">f</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_431.funS">funS</a></span>.<br/>
&nbsp;&nbsp;<span class="id"><a name="Builders_431.HB_unnamed_factory_435">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#OInv_Can.Build">OInv_Can.Build</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_431.Builders_431.aT">aT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_431.Builders_431.rT">rT</a></span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_431.Builders_431.f">f</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_431.funoK">funoK</a></span>.<br/>
&nbsp;&nbsp;<span class="id"><a name="Builders_431.HB_unnamed_factory_437">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#OInv_CanV.Build">OInv_CanV.Build</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_431.Builders_431.aT">aT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_431.Builders_431.rT">rT</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_431.Builders_431.f">f</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_431.oinvS">oinvS</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_431.oinvK">oinvK</a></span>.<br/>
<span class="id"><a href="mathcomp.classical.functions.html#Builders_431.Builders_431">HB.end</a></span>.<br/>
<br/>
<span class="id"><a name="OCan2">HB.factory</a></span> <span class="kwd">Record</span> <span class="id">OCan2</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) :=<br/>
&nbsp;&nbsp;&nbsp;{ <span class="id">oinv</span>; <span class="id">funS</span> :  {<span class="id">homo</span> <span class="id">f</span> : <span class="id">x</span> / <span class="id">A</span> <span class="id">x</span> &gt;-&gt; <span class="id">B</span> <span class="id">x</span>};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">oinvS</span> : {<span class="id">homo</span> <span class="id">oinv</span> : <span class="id">x</span> / <span class="id">B</span> <span class="id">x</span> &gt;-&gt; (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id">A</span>) <span class="id">x</span>};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">funoK</span> : {<span class="kwd">in</span> <span class="id">A</span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#pcancel">pcancel</a></span> <span class="id">f</span> <span class="id">oinv</span>};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">oinvK</span> : {<span class="kwd">in</span> <span class="id">B</span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#ocancel">ocancel</a></span> <span class="id">oinv</span> <span class="id">f</span>};<br/>
&nbsp;&nbsp;&nbsp;}.<br/>
<span class="id"><a name="Builders_439">HB.builders</a></span> <span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} <span class="id">A</span> <span class="id">B</span> (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#OCan2">OCan2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;<span class="id"><a name="Builders_439.HB_unnamed_factory_441">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#OInv.Build">OInv.Build</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_439.Builders_439.aT">aT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_439.Builders_439.rT">rT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_439.Builders_439.f">f</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_439.oinv">oinv</a></span>.<br/>
&nbsp;&nbsp;<span class="id"><a name="Builders_439.HB_unnamed_factory_443">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#OInv_Can2.Build">OInv_Can2.Build</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_439.Builders_439.aT">aT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_439.Builders_439.rT">rT</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_439.Builders_439.f">f</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_439.funS">funS</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_439.oinvS">oinvS</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_439.funoK">funoK</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_439.oinvK">oinvK</a></span>.<br/>
<span class="id"><a href="mathcomp.classical.functions.html#Builders_439.Builders_439">HB.end</a></span>.<br/>
<br/>
<br/>
<span class="id"><a name="Can">HB.factory</a></span> <span class="kwd">Record</span> <span class="id">Can</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) :=<br/>
&nbsp;&nbsp;{ <span class="id">inv</span>; <span class="id">funK</span> : {<span class="kwd">in</span> <span class="id">A</span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#cancel">cancel</a></span> <span class="id">f</span> <span class="id">inv</span>} }.<br/>
<span class="id"><a name="Builders_447">HB.builders</a></span> <span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} <span class="id">A</span> (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">of</span> @<span class="id"><a href="mathcomp.classical.functions.html#Can">Can</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">f</span>. <br/>
&nbsp;<span class="id"><a name="Builders_447.HB_unnamed_factory_449">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Inv.Build">Inv.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_447.Builders_447.f">f</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_447.inv">inv</a></span>.<br/>
&nbsp;<span class="id"><a name="Builders_447.HB_unnamed_factory_452">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Inv_Can.Build">Inv_Can.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_447.Builders_447.f">f</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_447.funK">funK</a></span>.<br/>
<span class="id"><a href="mathcomp.classical.functions.html#Builders_447.Builders_447">HB.end</a></span>.<br/>
<br/>
<span class="id"><a name="Inv_Can2">HB.factory</a></span> <span class="kwd">Record</span> <span class="id">Inv_Can2</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">of</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Inv">Inv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span> :=<br/>
&nbsp;&nbsp;&nbsp;{ <span class="id">funS</span> : {<span class="id">homo</span> <span class="id">f</span> : <span class="id">x</span> / <span class="id">A</span> <span class="id">x</span> &gt;-&gt; <span class="id">B</span> <span class="id">x</span>};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invS</span> : {<span class="id">homo</span> <span class="id">f</span>^-1 : <span class="id">x</span> / <span class="id">B</span> <span class="id">x</span> &gt;-&gt; <span class="id">A</span> <span class="id">x</span>};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">funK</span> : {<span class="kwd">in</span> <span class="id">A</span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#cancel">cancel</a></span> <span class="id">f</span> <span class="id">f</span>^-1};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invK</span> : {<span class="kwd">in</span> <span class="id">B</span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#cancel">cancel</a></span> <span class="id">f</span>^-1 <span class="id">f</span>};<br/>
&nbsp;&nbsp;&nbsp;}.<br/>
<span class="id"><a name="Builders_454">HB.builders</a></span> <span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} <span class="id">A</span> <span class="id">B</span> (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#Inv_Can2">Inv_Can2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;<span class="id"><a name="Builders_454.HB_unnamed_factory_456">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#isFun.Build">isFun.Build</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_454.Builders_454.aT">aT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_454.Builders_454.rT">rT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_454.Builders_454.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_454.Builders_454.B">B</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_454.Builders_454.f">f</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_454.funS">funS</a></span>.<br/>
&nbsp;&nbsp;<span class="id"><a name="Builders_454.HB_unnamed_factory_458">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Inv_Can.Build">Inv_Can.Build</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_454.Builders_454.aT">aT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_454.Builders_454.rT">rT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_454.Builders_454.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_454.Builders_454.f">f</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_454.funK">funK</a></span>.<br/>
&nbsp;&nbsp;<span class="id"><a name="Builders_454.HB_unnamed_factory_460">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := @<span class="id"><a href="mathcomp.classical.functions.html#Inv_CanV.Build">Inv_CanV.Build</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_454.Builders_454.aT">aT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_454.Builders_454.rT">rT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_454.Builders_454.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_454.Builders_454.B">B</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_454.Builders_454.f">f</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_454.invS">invS</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_454.invK">invK</a></span>.<br/>
<span class="id"><a href="mathcomp.classical.functions.html#Builders_454.Builders_454">HB.end</a></span>.<br/>
<br/>
<span class="id"><a name="Can2">HB.factory</a></span> <span class="kwd">Record</span> <span class="id">Can2</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) :=<br/>
&nbsp;&nbsp;{ <span class="id">inv</span>; <span class="id">funS</span> : {<span class="id">homo</span> <span class="id">f</span> : <span class="id">x</span> / <span class="id">A</span> <span class="id">x</span> &gt;-&gt; <span class="id">B</span> <span class="id">x</span>};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invS</span> : {<span class="id">homo</span> <span class="id">inv</span> : <span class="id">x</span> / <span class="id">B</span> <span class="id">x</span> &gt;-&gt; <span class="id">A</span> <span class="id">x</span>};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">funK</span> : {<span class="kwd">in</span> <span class="id">A</span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#cancel">cancel</a></span> <span class="id">f</span> <span class="id">inv</span>};<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invK</span> : {<span class="kwd">in</span> <span class="id">B</span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#cancel">cancel</a></span> <span class="id">inv</span> <span class="id">f</span>};<br/>
&nbsp;&nbsp;&nbsp;}.<br/>
<span class="id"><a name="Builders_462">HB.builders</a></span> <span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} <span class="id">A</span> <span class="id">B</span> (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#Can2">Can2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;<span class="id"><a name="Builders_462.HB_unnamed_factory_464">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Inv.Build">Inv.Build</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_462.Builders_462.aT">aT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_462.Builders_462.rT">rT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_462.Builders_462.f">f</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_462.inv">inv</a></span>.<br/>
&nbsp;&nbsp;<span class="id"><a name="Builders_462.HB_unnamed_factory_467">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Inv_Can2.Build">Inv_Can2.Build</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_462.Builders_462.aT">aT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_462.Builders_462.rT">rT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_462.Builders_462.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_462.Builders_462.B">B</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_462.Builders_462.f">f</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_462.funS">funS</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_462.invS">invS</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_462.funK">funK</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_462.invK">invK</a></span>.<br/>
<span class="id"><a href="mathcomp.classical.functions.html#Builders_462.Builders_462">HB.end</a></span>.<br/>
<br/>
<span class="id"><a name="SplitInjFun_CanV">HB.factory</a></span> <span class="kwd">Record</span> <span class="id">SplitInjFun_CanV</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">of</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="mathcomp.classical.functions.html#SplitInjFun">SplitInjFun</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> :=<br/>
&nbsp;&nbsp;{ <span class="id">invS</span> : {<span class="id">homo</span> <span class="id">f</span>^-1 : <span class="id">x</span> / <span class="id">B</span> <span class="id">x</span> &gt;-&gt; <span class="id">A</span> <span class="id">x</span>}; <span class="id">injV</span> : {<span class="kwd">in</span> <span class="id">B</span> &amp;, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#injective">injective</a></span> <span class="id">f</span>^-1} }.<br/>
<span class="id"><a name="Builders_471">HB.builders</a></span> <span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#SplitInjFun_CanV">SplitInjFun_CanV</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id"><a name="Builders_471.Builders_471.mem_inv">mem_inv</a></span> := <span class="id"><a href="mathcomp.classical.classical_sets.html#homo_setP">homo_setP</a></span>.2 <span class="id"><a href="mathcomp.classical.functions.html#Builders_471.invS">invS</a></span>.<br/>
&nbsp;&nbsp;<span class="id">Local</span> <span class="kwd">Lemma</span> <span class="id"><a name="Builders_471.invK">invK</a></span> : {<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_471.Builders_471.B">B</a></span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#cancel">cancel</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_471.Builders_471.f">f</a></span>^-1 <span class="id"><a href="mathcomp.classical.functions.html#Builders_471.Builders_471.f">f</a></span>}.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof39')">Proof.</span></div>
<div class="proofscript" id="proof39">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> <span class="id">Bx</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#Builders_471.injV">injV</a></span>; <span class="id">rewrite</span> ?<span class="id"><a href="mathcomp.classical.functions.html#funK">funK</a></span> ?(<span class="id"><a href="mathcomp.classical.functions.html#mem_fun">mem_fun</a></span>, <span class="id"><a href="mathcomp.classical.functions.html#Builders_471.Builders_471.mem_inv">mem_inv</a></span>). Qed.</div>
&nbsp;&nbsp;<span class="id"><a name="Builders_471.HB_unnamed_factory_473">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Inv_CanV.Build">Inv_CanV.Build</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_471.Builders_471.aT">aT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_471.Builders_471.rT">rT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_471.Builders_471.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_471.Builders_471.B">B</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_471.Builders_471.f">f</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_471.invS">invS</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_471.invK">invK</a></span>.<br/>
<span class="id"><a href="mathcomp.classical.functions.html#Builders_471.Builders_471">HB.end</a></span>.<br/>
<br/>
<span class="id"><a name="BijTT">HB.factory</a></span> <span class="kwd">Record</span> <span class="id">BijTT</span> {<span class="id">aT</span> <span class="id">rT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) := { <span class="id">bij</span> : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#bijective">bijective</a></span> <span class="id">f</span> }.<br/>
<span class="id"><a name="Builders_475">HB.builders</a></span> <span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} <span class="id">f</span> <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#BijTT">BijTT</a></span> <span class="id">aT</span> <span class="id">rT</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;<span class="id">Local</span> <span class="kwd">Lemma</span> <span class="id"><a name="Builders_475.exg">exg</a></span> : {<span class="id">g</span> | <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#cancel">cancel</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_475.Builders_475.f">f</a></span> <span class="id">g</span> /\ <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#cancel">cancel</a></span> <span class="id">g</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_475.Builders_475.f">f</a></span>}.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof40')">Proof.</span></div>
<div class="proofscript" id="proof40">
 <span class="kwd">by</span> <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.boolp.html#cid">cid</a></span>; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.functions.html#Builders_475.bij">bij</a></span> =&gt; <span class="id">g</span>; <span class="kwd">exists</span> <span class="id">g</span>. Qed.</div>
&nbsp;&nbsp;<span class="id"><a name="Builders_475.HB_unnamed_factory_477">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Can2.Build">Can2.Build</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_475.Builders_475.aT">aT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_475.Builders_475.rT">rT</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_475.Builders_475.f">f</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> <span class="id">y</span> =&gt; <span class="id">y</span>) (<span class="kwd">fun</span> <span class="id">x</span> <span class="id">y</span> =&gt; <span class="id">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in1W">in1W</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#projT2">projT2</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_475.exg">exg</a></span>).1) (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in1W">in1W</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#projT2">projT2</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_475.exg">exg</a></span>).2).<br/>
<span class="id"><a href="mathcomp.classical.functions.html#Builders_475.Builders_475">HB.end</a></span>.<br/>
<br/>
<pre class="ssrdoc">
Fun in 
</pre>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="surj_oinv">surj_oinv</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} {<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>} (<span class="id">fsurj</span> : <span class="id"><a href="mathcomp.classical.functions.html#set_surj">set_surj</a></span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="surj_oinv.surjective_oinv">surjective_oinv</a></span> (<span class="id">y</span> : <span class="id"><a href="mathcomp.classical.functions.html#surj_oinv.rT">rT</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="mathcomp.classical.boolp.html#pselect">pselect</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#surj_oinv.B">B</a></span> <span class="id">y</span>) <span class="id">is</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#left">left</a></span> <span class="id">By</span> <span class="kwd">then</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#projT1">projT1</a></span> (<span class="id"><a href="mathcomp.classical.boolp.html#cid2">cid2</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#surj_oinv.fsurj">fsurj</a></span> <span class="id">By</span>))) <span class="kwd">else</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="surjective_oinvK">surjective_oinvK</a></span> : {<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.functions.html#surj_oinv.B">B</a></span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#ocancel">ocancel</a></span> <span class="id"><a href="mathcomp.classical.functions.html#surj_oinv.surjective_oinv">surjective_oinv</a></span> <span class="id"><a href="mathcomp.classical.functions.html#surj_oinv.f">f</a></span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof41')">Proof.</span></div>
<div class="proofscript" id="proof41">
<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.functions.html#surj_oinv.surjective_oinv">surjective_oinv</a></span> =&gt; <span class="id">x</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#set_mem">set_mem</a></span> ?; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.boolp.html#pselect">pselect</a></span> =&gt; // ?; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.boolp.html#cid2">cid2</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="surjective_oinvS">surjective_oinvS</a></span> : <span class="id"><a href="mathcomp.classical.functions.html#set_fun">set_fun</a></span> <span class="id"><a href="mathcomp.classical.functions.html#surj_oinv.B">B</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#surj_oinv.A">A</a></span>) <span class="id"><a href="mathcomp.classical.functions.html#surj_oinv.surjective_oinv">surjective_oinv</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof42')">Proof.</span></div>
<div class="proofscript" id="proof42">
<span class="id">move</span>=&gt; <span class="id">y</span> <span class="id">By</span> /=; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.functions.html#surj_oinv.surjective_oinv">surjective_oinv</a></span>; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.boolp.html#pselect">pselect</a></span> =&gt; // <span class="id">By</span>'.<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.boolp.html#cid2">cid2</a></span> =&gt; //= <span class="id">x</span> <span class="id">Ax</span> <span class="id">fxy</span>; <span class="kwd">exists</span> <span class="id">x</span>.<br/>
Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#surj_oinv">surj_oinv</a></span>.<br/>
<span class="kwd">Coercion</span> <span class="id"><a name="surjective_ocanV">surjective_ocanV</a></span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} {<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fS</span> : <span class="id"><a href="mathcomp.classical.functions.html#set_surj">set_surj</a></span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">OCanV.Build</a></span> <span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> (<span class="id"><a href="mathcomp.classical.functions.html#surjective_oinvS">surjective_oinvS</a></span> <span class="id">fS</span>) (<span class="id"><a href="mathcomp.classical.functions.html#surjective_oinvK">surjective_oinvK</a></span> <span class="id">fS</span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Psurj">Psurj</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} {<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>} (<span class="id">fsurj</span> : <span class="id"><a href="mathcomp.classical.functions.html#set_surj">set_surj</a></span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>).<br/>
<br/>
#[<span class="id">local</span>] <span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> : <span class="id"><a href="mathcomp.classical.functions.html#OCanV">OCanV</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Psurj.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Psurj.B">B</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Psurj.f">f</a></span> := <span class="id"><a href="mathcomp.classical.functions.html#Psurj.fsurj">fsurj</a></span>.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="surjection_of_surj">surjection_of_surj</a></span> := [<span class="id">surj</span> <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#Psurj.f">f</a></span>].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Psurj">Psurj</a></span> : {<span class="id">s</span> : {<span class="id">surj</span> <span class="id"><a href="mathcomp.classical.functions.html#Psurj.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Psurj.B">B</a></span>} | <span class="id"><a href="mathcomp.classical.functions.html#Psurj.f">f</a></span> = <span class="id">s</span>}<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof43')">Proof.</span></div>
<div class="proofscript" id="proof43">
 <span class="kwd">by</span> <span class="kwd">exists</span> [<span class="id">surj</span> <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#Psurj.f">f</a></span>]. Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#Psurj">Psurj</a></span>.<br/>
<span class="kwd">Coercion</span> <span class="id">surjection_of_surj</span> : <span class="id">set_surj</span> &gt;-&gt; <span class="id">Surject.type</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="oinv_surj">oinv_surj</a></span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} {<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>}<br/>
&nbsp;&nbsp;&nbsp;(<span class="id">fS</span> : <span class="id"><a href="mathcomp.classical.functions.html#set_surj">set_surj</a></span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>) <span class="id">y</span> :<br/>
&nbsp;'<span class="id">oinv_fS</span> <span class="id">y</span> = <span class="kwd">if</span> <span class="id"><a href="mathcomp.classical.boolp.html#pselect">pselect</a></span> (<span class="id">B</span> <span class="id">y</span>) <span class="id">is</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#left">left</a></span> <span class="id">By</span> <span class="kwd">then</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#projT1">projT1</a></span> (<span class="id"><a href="mathcomp.classical.boolp.html#cid2">cid2</a></span> (<span class="id">fS</span> <span class="id">y</span> <span class="id">By</span>))) <span class="kwd">else</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof44')">Proof.</span></div>
<div class="proofscript" id="proof44">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="surj">surj</a></span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} {<span class="id">f</span> : {<span class="id">surj</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}} : <span class="id"><a href="mathcomp.classical.functions.html#set_surj">set_surj</a></span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof45')">Proof.</span></div>
<div class="proofscript" id="proof45">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">b</span> /'<span class="id">oinvP_f</span>[<span class="id">x</span> <span class="id">Ax</span> <span class="id">_</span>]; <span class="kwd">exists</span> <span class="id">x</span>. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="phant_surj">phant_surj</a></span> <span class="id">aT</span> <span class="id">rT</span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>) (<span class="id">f</span> : {<span class="id">surj</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>})<br/>
&nbsp;&nbsp;<span class="id">of</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#phantom">phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span> := @<span class="id"><a href="mathcomp.classical.functions.html#surj">surj</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>.<br/>
<span class="kwd">Notation</span> "'<span class="id">surj_</span>  <span class="id">f</span>" := (<span class="id"><a href="mathcomp.classical.functions.html#phant_surj">phant_surj</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssreflect.html#Phantom">Phantom</a></span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span>)) : <span class="id">form_scope</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id"><a href="mathcomp.classical.functions.html#set_surj">set_surj</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) =&gt; <span class="id">solve</span> [<span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#surj">surj</a></span>] : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="funin_surj">funin_surj</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>}.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="funin">funin</a></span> (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.functions.html#funin_surj.aT">aT</a></span>) (<span class="id">f</span> : <span class="id"><a href="mathcomp.classical.functions.html#funin_surj.aT">aT</a></span> -&gt; <span class="id"><a href="mathcomp.classical.functions.html#funin_surj.rT">rT</a></span>) := <span class="id">f</span>.<br/>
<br/>
<span class="kwd">Context</span> {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.functions.html#funin_surj.aT">aT</a></span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.functions.html#funin_surj.rT">rT</a></span>} (<span class="id">f</span> : <span class="id"><a href="mathcomp.classical.functions.html#funin_surj.aT">aT</a></span> -&gt; <span class="id"><a href="mathcomp.classical.functions.html#funin_surj.rT">rT</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="set_fun_image">set_fun_image</a></span> : <span class="id"><a href="mathcomp.classical.functions.html#set_fun">set_fun</a></span> <span class="id"><a href="mathcomp.classical.functions.html#funin_surj.A">A</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#funin_surj.f">f</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#funin_surj.A">A</a></span>) <span class="id"><a href="mathcomp.classical.functions.html#funin_surj.f">f</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof46')">Proof.</span></div>
<div class="proofscript" id="proof46">
 <span class="id">exact</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#image_subP">image_subP</a></span>. Qed.</div>
<br/>
<span class="id"><a name="HB_unnamed_factory_488">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> :=<br/>
&nbsp;&nbsp;@<span class="id"><a href="mathcomp.classical.functions.html#Build">isFun.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.classical.functions.html#funin">funin</a></span> <span class="id"><a href="mathcomp.classical.functions.html#funin_surj.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#funin_surj.f">f</a></span>) <span class="id"><a href="mathcomp.classical.functions.html#set_fun_image">set_fun_image</a></span>.<br/>
<br/>
<span class="id"><a name="HB_unnamed_factory_490">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> : <span class="id"><a href="mathcomp.classical.functions.html#OCanV">OCanV</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#funin_surj.A">A</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#funin_surj.f">f</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#funin_surj.A">A</a></span>) (<span class="id"><a href="mathcomp.classical.functions.html#funin">funin</a></span> <span class="id"><a href="mathcomp.classical.functions.html#funin_surj.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#funin_surj.f">f</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;((<span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#id">id</a></span>) : <span class="id"><a href="mathcomp.classical.functions.html#set_surj">set_surj</a></span> <span class="id"><a href="mathcomp.classical.functions.html#funin_surj.A">A</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#funin_surj.f">f</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#funin_surj.A">A</a></span>) <span class="id"><a href="mathcomp.classical.functions.html#funin_surj.f">f</a></span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#funin_surj">funin_surj</a></span>.<br/>
<span class="kwd">Notation</span> "[ '<span class="kwd">fun</span>' <span class="id">f</span> '<span class="kwd">in</span>' <span class="id">A</span> ]" := (<span class="id"><a href="mathcomp.classical.functions.html#funin">funin</a></span> <span class="id">A</span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;(<span class="kwd">at</span> <span class="id">level</span> 0, <span class="id">f</span> <span class="kwd">at</span> <span class="id">next</span> <span class="id">level</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id">format</span> "[ '<span class="kwd">fun</span>'  <span class="id">f</span>  '<span class="kwd">in</span>'  <span class="id">A</span> ]") : <span class="id">function_scope</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">set_fun_image</span> : <span class="id">core</span>.<br/>
<br/>
<pre class="ssrdoc">
Partial injection 
</pre>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="split">split</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>).<br/>
<span class="kwd">Definition</span> <span class="id"><a name="split_">split_</a></span> (<span class="id">dflt</span> : <span class="id"><a href="mathcomp.classical.functions.html#split.rT">rT</a></span> -&gt; <span class="id"><a href="mathcomp.classical.functions.html#split.aT">aT</a></span>) (<span class="id">f</span> : <span class="id"><a href="mathcomp.classical.functions.html#split.aT">aT</a></span> -&gt; <span class="id"><a href="mathcomp.classical.functions.html#split.rT">rT</a></span>) := <span class="id">f</span>.<br/>
<br/>
<span class="kwd">Context</span> (<span class="id">dflt</span> : <span class="id"><a href="mathcomp.classical.functions.html#split.rT">rT</a></span> -&gt; <span class="id"><a href="mathcomp.classical.functions.html#split.aT">aT</a></span>).<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="split">split</a></span> := (<span class="id"><a href="mathcomp.classical.functions.html#split_">split_</a></span> <span class="id"><a href="mathcomp.classical.functions.html#split.dflt">dflt</a></span>).<br/>
<br/>
<span class="id"><a name="split.hb_instance_497">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id"><a href="mathcomp.classical.functions.html#split.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#split.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#split">split</a></span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="split.oinv">oinv</a></span>.<br/>
<span class="kwd">Context</span> (<span class="id">f</span> : {<span class="id">oinv</span> <span class="id"><a href="mathcomp.classical.functions.html#split.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#split.rT">rT</a></span>}).<br/>
<span class="kwd">Let</span> <span class="id"><a name="split.oinv.g">g</a></span> <span class="id">y</span> := <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#odflt">odflt</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#split.dflt">dflt</a></span> <span class="id">y</span>) ('<span class="id">oinv_f</span> <span class="id">y</span>).<br/>
<span class="id"><a name="HB_unnamed_factory_502">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span>  := <span class="id"><a href="mathcomp.classical.functions.html#Build">Inv.Build</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.classical.functions.html#split">split</a></span> <span class="id"><a href="mathcomp.classical.functions.html#split.oinv.f">f</a></span>) <span class="id"><a href="mathcomp.classical.functions.html#split.oinv.g">g</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="splitV">splitV</a></span> : (<span class="id"><a href="mathcomp.classical.functions.html#split">split</a></span> <span class="id"><a href="mathcomp.classical.functions.html#split.oinv.f">f</a></span>)^-1 = <span class="id"><a href="mathcomp.classical.functions.html#split.oinv.g">g</a></span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof47')">Proof.</span></div>
<div class="proofscript" id="proof47">
 <span class="kwd">by</span> []. Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#split.oinv">oinv</a></span>.<br/>
<span class="id"><a name="split.hb_instance_509">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">oinvfun</span> <span class="id"><a href="mathcomp.classical.functions.html#split.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#split.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#split">split</a></span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="splitis_inj_subproof">splitis_inj_subproof</a></span> (<span class="id">f</span> : {<span class="id">inj</span> <span class="id"><a href="mathcomp.classical.functions.html#split.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#split.rT">rT</a></span>}) : <span class="id"><a href="mathcomp.classical.functions.html#Inv_Can">Inv_Can</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#split.A">A</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#split">split</a></span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof48')">Proof.</span></div>
<div class="proofscript" id="proof48">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; <span class="id">x</span> <span class="id">Ax</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#splitV">splitV</a></span> <span class="id"><a href="mathcomp.classical.functions.html#funoK">funoK</a></span>. Qed.</div>
<span class="id"><a name="split.hb_instance_513">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">f</span> := <span class="id"><a href="mathcomp.classical.functions.html#splitis_inj_subproof">splitis_inj_subproof</a></span> <span class="id">f</span>.<br/>
<span class="id"><a name="split.hb_instance_518">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">injfun</span> <span class="id"><a href="mathcomp.classical.functions.html#split.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#split.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Inject.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#split">split</a></span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="splitid">splitid</a></span> (<span class="id">f</span> : {<span class="id">splitinjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#split.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#split.B">B</a></span>}) : (<span class="id"><a href="mathcomp.classical.functions.html#split">split</a></span> <span class="id">f</span>)^-1 = <span class="id">f</span>^-1.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof49')">Proof.</span></div>
<div class="proofscript" id="proof49">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">x</span>; <span class="id">apply</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#Some_inj">Some_inj</a></span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#splitV">splitV</a></span> -<span class="id"><a href="mathcomp.classical.functions.html#oliftV">oliftV</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="splitsurj_subproof">splitsurj_subproof</a></span> (<span class="id">f</span> : {<span class="id">surj</span> <span class="id"><a href="mathcomp.classical.functions.html#split.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#split.B">B</a></span>}) : <span class="id"><a href="mathcomp.classical.functions.html#Inv_CanV">Inv_CanV</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#split.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#split.B">B</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#split">split</a></span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof50')">Proof.</span></div>
<div class="proofscript" id="proof50">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; [+|+ /<span class="id"><a href="mathcomp.classical.classical_sets.html#set_mem">set_mem</a></span>] =&gt; <span class="id">b</span> <span class="id">Bb</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#splitV">splitV</a></span>; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.functions.html#oinvP">oinvP</a></span>. Qed.</div>
<br/>
<span class="id"><a name="split.hb_instance_524">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">f</span> := <span class="id"><a href="mathcomp.classical.functions.html#splitsurj_subproof">splitsurj_subproof</a></span> <span class="id">f</span>.<br/>
<span class="id"><a name="split.hb_instance_529">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">surjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#split.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#split.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#split">split</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="split.hb_instance_535">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">bij</span> <span class="id"><a href="mathcomp.classical.functions.html#split.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#split.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#split">split</a></span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#split">split</a></span>.<br/>
<span class="kwd">Notation</span> "''<span class="id">split_</span>' <span class="id">a</span>" := (<span class="id"><a href="mathcomp.classical.functions.html#split_">split_</a></span> <span class="id">a</span>) : <span class="id">form_scope</span>.<br/>
<span class="kwd">Notation</span> <span class="id"><a name="split">split</a></span> := '<span class="id">split_point</span>.<br/>
<br/>
<pre class="ssrdoc">
More Builders 
</pre>
<br/>
<span class="id"><a name="Inj">HB.factory</a></span> <span class="kwd">Record</span> <span class="id">Inj</span> {<span class="id">aT</span> <span class="id">rT</span>} (<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>) (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) :=<br/>
&nbsp;&nbsp;&nbsp;{ <span class="id">inj</span> : {<span class="kwd">in</span> <span class="id">A</span> &amp;, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#injective">injective</a></span> <span class="id">f</span>} }.<br/>
<span class="id"><a name="Builders_541">HB.builders</a></span> <span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} <span class="id">A</span> (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#Inj">Inj</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;<span class="id"><a name="Builders_541.HB_unnamed_factory_543">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#OInversible.copy">OInversible.copy</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_541.Builders_541.f">f</a></span> [<span class="kwd">fun</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_541.Builders_541.f">f</a></span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_541.Builders_541.A">A</a></span>].<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="Builders_541.funoK">funoK</a></span> : {<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_541.Builders_541.A">A</a></span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#pcancel">pcancel</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_541.Builders_541.f">f</a></span> '<span class="id">oinv_f</span>}.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof51')">Proof.</span></div>
<div class="proofscript" id="proof51">
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">x</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#set_mem">set_mem</a></span> <span class="id">Ax</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#oinv_surj">oinv_surj</a></span>.<br/>
&nbsp;&nbsp;<span class="id">case</span>: <span class="id"><a href="mathcomp.classical.boolp.html#pselect">pselect</a></span> =&gt; //=; <span class="id">last</span> <span class="kwd">by</span> <span class="id">case</span>; <span class="kwd">exists</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; ?; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.boolp.html#cid2">cid2</a></span> =&gt; //= <span class="id">y</span> <span class="id">Ay</span> /<span class="id"><a href="mathcomp.classical.functions.html#Builders_541.inj">inj</a></span>; <span class="id">rewrite</span> !<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> =&gt; -&gt;.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="id"><a name="Builders_541.HB_unnamed_factory_545">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#OInv_Can.Build">OInv_Can.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_541.Builders_541.f">f</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_541.funoK">funoK</a></span>.<br/>
<span class="id"><a href="mathcomp.classical.functions.html#Builders_541.Builders_541">HB.end</a></span>.<br/>
<br/>
<span class="id"><a name="SurjFun_Inj">HB.factory</a></span> <span class="kwd">Record</span> <span class="id">SurjFun_Inj</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">of</span><br/>
&nbsp;&nbsp;&nbsp;@<span class="id"><a href="mathcomp.classical.functions.html#SurjFun">SurjFun</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> := { <span class="id">inj</span> : {<span class="kwd">in</span> <span class="id">A</span> &amp;, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#injective">injective</a></span> <span class="id">f</span>} }.<br/>
<span class="id"><a name="Builders_547">HB.builders</a></span> <span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">of</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="mathcomp.classical.functions.html#SurjFun_Inj">SurjFun_Inj</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id"><a name="Builders_547.Builders_547.g">g</a></span> := <span class="id"><a href="mathcomp.classical.functions.html#Builders_547.Builders_547.f">f</a></span>.<br/>
&nbsp;&nbsp;<span class="id"><a name="Builders_547.HB_unnamed_factory_549">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Inj.Build">Inj.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_547.Builders_547.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_547.Builders_547.g">g</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_547.inj">inj</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Let</span> <span class="id"><a name="Builders_547.Builders_547.fcan">fcan</a></span> : <span class="id"><a href="mathcomp.classical.functions.html#OInv_Can">OInv_Can</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_547.Builders_547.aT">aT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_547.Builders_547.rT">rT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_547.Builders_547.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_547.Builders_547.f">f</a></span>.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof52')">Proof.</span></div>
<div class="proofscript" id="proof52">
&nbsp;&nbsp;<span class="id">split</span>=&gt; <span class="id">x</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#set_mem">set_mem</a></span> <span class="id">Ax</span>; <span class="id">apply</span>: '<span class="id">inj_</span>(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#omap">omap</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_547.Builders_547.g">g</a></span>); <span class="id">rewrite</span> ?<span class="id"><a href="mathcomp.classical.functions.html#mem_fun">mem_fun</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>//=.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.functions.html#Builders_547.Builders_547.g">g</a></span> -<span class="id"><a href="mathcomp.classical.functions.html#oinvV">oinvV</a></span>/= <span class="id"><a href="mathcomp.classical.functions.html#funoK">funoK</a></span>// ?<span class="id"><a href="mathcomp.classical.functions.html#mem_fun">mem_fun</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;<span class="id"><a name="Builders_547.HB_unnamed_factory_554">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Builders_547.Builders_547.fcan">fcan</a></span>.<br/>
<span class="id"><a href="mathcomp.classical.functions.html#Builders_547.Builders_547">HB.end</a></span>.<br/>
<br/>
<span class="id"><a name="SplitSurjFun_Inj">HB.factory</a></span> <span class="kwd">Record</span> <span class="id">SplitSurjFun_Inj</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">of</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="mathcomp.classical.functions.html#SplitSurjFun">SplitSurjFun</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> :=<br/>
&nbsp;&nbsp;&nbsp;{ <span class="id">inj</span> : {<span class="kwd">in</span> <span class="id">A</span> &amp;, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#injective">injective</a></span> <span class="id">f</span>} }.<br/>
<span class="id"><a name="Builders_556">HB.builders</a></span> <span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">of</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<span class="id"><a href="mathcomp.classical.functions.html#SplitSurjFun_Inj">SplitSurjFun_Inj</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>.<br/>
&nbsp;&nbsp;<span class="id">Local</span> <span class="kwd">Lemma</span> <span class="id"><a name="Builders_556.funK">funK</a></span> : {<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_556.Builders_556.A">A</a></span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#cancel">cancel</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_556.Builders_556.f">f</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_556.Builders_556.f">f</a></span>^-1%<span class="id">FUN</span>}.<br/>
<div>&nbsp;&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof53')">Proof.</span></div>
<div class="proofscript" id="proof53">
  <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> <span class="id">Ax</span>; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#Builders_556.inj">inj</a></span>; <span class="id">rewrite</span> ?<span class="id"><a href="mathcomp.classical.functions.html#invK">invK</a></span> ?<span class="id"><a href="mathcomp.classical.functions.html#mem_fun">mem_fun</a></span>. Qed.</div>
&nbsp;&nbsp;<span class="id"><a name="Builders_556.HB_unnamed_factory_558">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Inv_Can.Build">Inv_Can.Build</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_556.Builders_556.aT">aT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_556.Builders_556.rT">rT</a></span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_556.Builders_556.f">f</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Builders_556.funK">funK</a></span>.<br/>
<span class="id"><a href="mathcomp.classical.functions.html#Builders_556.Builders_556">HB.end</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Inverses">Inverses</a></span>.<br/>
<span class="kwd">Context</span> <span class="id">aT</span> <span class="id">rT</span> {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>}.<br/>
<span class="id"><a name="Inverses.hb_instance_560">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">inj</span> <span class="id"><a href="mathcomp.classical.functions.html#Inverses.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Inverses.rT">rT</a></span>}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">SurjFun_Inj.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> [<span class="kwd">fun</span> <span class="id">f</span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.functions.html#Inverses.A">A</a></span>] '<span class="id">inj_f</span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#Inverses">Inverses</a></span>.<br/>
<br/>
<pre class="ssrdoc">
Simple Factories 
</pre>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Pinj">Pinj</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>} (<span class="id">finj</span> : {<span class="kwd">in</span> <span class="id">A</span> &amp;, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#injective">injective</a></span> <span class="id">f</span>}).<br/>
#[<span class="id">local</span>] <span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Build">Inj.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Pinj.f">f</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Pinj.finj">finj</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Pinj">Pinj</a></span> : {<span class="id">i</span> : {<span class="id">inj</span> <span class="id"><a href="mathcomp.classical.functions.html#Pinj.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Pinj.rT">rT</a></span>} | <span class="id"><a href="mathcomp.classical.functions.html#Pinj.f">f</a></span> = <span class="id">i</span>}<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof54')">Proof.</span></div>
<div class="proofscript" id="proof54">
 <span class="kwd">by</span> <span class="kwd">exists</span> [<span class="id">inj</span> <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#Pinj.f">f</a></span>]. Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#Pinj">Pinj</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Pfun">Pfun</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} {<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>}<br/>
&nbsp;&nbsp;(<span class="id">ffun</span> : {<span class="id">homo</span> <span class="id">f</span> : <span class="id">x</span> / <span class="id">A</span> <span class="id">x</span> &gt;-&gt; <span class="id">B</span> <span class="id">x</span>}).<br/>
<span class="kwd">Let</span> <span class="id"><a name="Pfun.g">g</a></span> : <span class="id">_</span> -&gt; <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Pfun.f">f</a></span>.<br/>
#[<span class="id">local</span>] <span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Build">isFun.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Pfun.g">g</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Pfun.ffun">ffun</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Pfun">Pfun</a></span> : {<span class="id">i</span> : {<span class="kwd">fun</span> <span class="id"><a href="mathcomp.classical.functions.html#Pfun.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Pfun.B">B</a></span>} | <span class="id"><a href="mathcomp.classical.functions.html#Pfun.f">f</a></span> = <span class="id">i</span>}<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof55')">Proof.</span></div>
<div class="proofscript" id="proof55">
 <span class="kwd">by</span> <span class="kwd">exists</span> [<span class="kwd">fun</span> <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#Pfun.g">g</a></span>]. Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#Pfun">Pfun</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="injPfun">injPfun</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} {<span class="id">f</span> : {<span class="id">inj</span> <span class="id">A</span> &gt;-&gt; <span class="id">rT</span>}}<br/>
&nbsp;&nbsp;&nbsp;(<span class="id">ffun</span> : {<span class="id">homo</span> <span class="id">f</span> : <span class="id">x</span> / <span class="id">A</span> <span class="id">x</span> &gt;-&gt; <span class="id">B</span> <span class="id">x</span>}).<br/>
<span class="kwd">Let</span> <span class="id"><a name="injPfun.g">g</a></span> : <span class="id">_</span> -&gt; <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#injPfun.f">f</a></span>.<br/>
#[<span class="id">local</span>] <span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#on">Inject.on</a></span> <span class="id"><a href="mathcomp.classical.functions.html#injPfun.g">g</a></span>.<br/>
#[<span class="id">local</span>] <span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Build">isFun.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#injPfun.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#injPfun.B">B</a></span> <span class="id"><a href="mathcomp.classical.functions.html#injPfun.g">g</a></span> <span class="id"><a href="mathcomp.classical.functions.html#injPfun.ffun">ffun</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="injPfun">injPfun</a></span> : {<span class="id">i</span> : {<span class="id">injfun</span> <span class="id"><a href="mathcomp.classical.functions.html#injPfun.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#injPfun.B">B</a></span>} | <span class="id"><a href="mathcomp.classical.functions.html#injPfun.f">f</a></span> = <span class="id">i</span> :&gt; (<span class="id">_</span> -&gt; <span class="id">_</span>)}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof56')">Proof.</span></div>
<div class="proofscript" id="proof56">
 <span class="kwd">by</span> <span class="kwd">exists</span> [<span class="id">injfun</span> <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#injPfun.g">g</a></span>]. Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#injPfun">injPfun</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="funPinj">funPinj</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} {<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}}<br/>
&nbsp;&nbsp;(<span class="id">finj</span> : {<span class="kwd">in</span> <span class="id">A</span> &amp;, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#injective">injective</a></span> <span class="id">f</span>}).<br/>
<span class="kwd">Let</span> <span class="id"><a name="funPinj.g">g</a></span> : <span class="id">_</span> -&gt; <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#funPinj.f">f</a></span>.<br/>
#[<span class="id">local</span>] <span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> <span class="id"><a href="mathcomp.classical.functions.html#funPinj.g">g</a></span>.<br/>
#[<span class="id">local</span>] <span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Build">Inj.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#funPinj.g">g</a></span> <span class="id"><a href="mathcomp.classical.functions.html#funPinj.finj">finj</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="funPinj">funPinj</a></span> : {<span class="id">i</span> : {<span class="id">injfun</span> <span class="id"><a href="mathcomp.classical.functions.html#funPinj.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#funPinj.B">B</a></span>} | <span class="id"><a href="mathcomp.classical.functions.html#funPinj.f">f</a></span> = <span class="id">i</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof57')">Proof.</span></div>
<div class="proofscript" id="proof57">
 <span class="kwd">by</span> <span class="kwd">exists</span> [<span class="id">injfun</span> <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#funPinj.g">g</a></span>]; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.functions.html#funP">funP</a></span>. Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#funPinj">funPinj</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="funPsurj">funPsurj</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} {<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fsurj</span> : <span class="id"><a href="mathcomp.classical.functions.html#set_surj">set_surj</a></span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>).<br/>
<span class="kwd">Let</span> <span class="id"><a name="funPsurj.g">g</a></span> : <span class="id">_</span> -&gt; <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#funPsurj.f">f</a></span>.<br/>
#[<span class="id">local</span>] <span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> <span class="id"><a href="mathcomp.classical.functions.html#funPsurj.g">g</a></span>.<br/>
#[<span class="id">local</span>] <span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> : <span class="id"><a href="mathcomp.classical.functions.html#OCanV">OCanV</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#funPsurj.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#funPsurj.B">B</a></span> <span class="id"><a href="mathcomp.classical.functions.html#funPsurj.g">g</a></span> := <span class="id"><a href="mathcomp.classical.functions.html#funPsurj.fsurj">fsurj</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="funPsurj">funPsurj</a></span> : {<span class="id">s</span> : {<span class="id">surjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#funPsurj.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#funPsurj.B">B</a></span>} | <span class="id"><a href="mathcomp.classical.functions.html#funPsurj.f">f</a></span> = <span class="id">s</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof58')">Proof.</span></div>
<div class="proofscript" id="proof58">
 <span class="kwd">by</span> <span class="kwd">exists</span> [<span class="id">surjfun</span> <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#funPsurj.g">g</a></span>]; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.functions.html#funP">funP</a></span>. Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#funPsurj">funPsurj</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="surjPfun">surjPfun</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} {<span class="id">f</span> : {<span class="id">surj</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}}<br/>
&nbsp;&nbsp;&nbsp;(<span class="id">ffun</span> : {<span class="id">homo</span> <span class="id">f</span> : <span class="id">x</span> / <span class="id">A</span> <span class="id">x</span> &gt;-&gt; <span class="id">B</span> <span class="id">x</span>}).<br/>
<span class="kwd">Let</span> <span class="id"><a name="surjPfun.g">g</a></span> : <span class="id">_</span> -&gt; <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#surjPfun.f">f</a></span>.<br/>
#[<span class="id">local</span>] <span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> <span class="id"><a href="mathcomp.classical.functions.html#surjPfun.g">g</a></span>.<br/>
#[<span class="id">local</span>] <span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Build">isFun.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#surjPfun.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#surjPfun.B">B</a></span> <span class="id"><a href="mathcomp.classical.functions.html#surjPfun.g">g</a></span> <span class="id"><a href="mathcomp.classical.functions.html#surjPfun.ffun">ffun</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="surjPfun">surjPfun</a></span> : {<span class="id">s</span> : {<span class="id">surjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#surjPfun.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#surjPfun.B">B</a></span>} | <span class="id"><a href="mathcomp.classical.functions.html#surjPfun.f">f</a></span> = <span class="id">s</span> :&gt; (<span class="id">_</span> -&gt; <span class="id">_</span>)}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof59')">Proof.</span></div>
<div class="proofscript" id="proof59">
 <span class="kwd">by</span> <span class="kwd">exists</span> [<span class="id">surjfun</span> <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#surjPfun.g">g</a></span>]. Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#surjPfun">surjPfun</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Psplitinj">Psplitinj</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>} {<span class="id">g</span>} (<span class="id">funK</span> : {<span class="kwd">in</span> <span class="id">A</span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#cancel">cancel</a></span> <span class="id">f</span> <span class="id">g</span>}).<br/>
#[<span class="id">local</span>] <span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Build">Can.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Psplitinj.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Psplitinj.f">f</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Psplitinj.funK">funK</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Psplitinj">Psplitinj</a></span> : {<span class="id">i</span> : {<span class="id">splitinj</span> <span class="id"><a href="mathcomp.classical.functions.html#Psplitinj.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Psplitinj.rT">rT</a></span>} | <span class="id"><a href="mathcomp.classical.functions.html#Psplitinj.f">f</a></span> = <span class="id">i</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof60')">Proof.</span></div>
<div class="proofscript" id="proof60">
 <span class="kwd">by</span> <span class="kwd">exists</span> [<span class="id">splitinj</span> <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#Psplitinj.f">f</a></span>]. Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#Psplitinj">Psplitinj</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="funPsplitinj">funPsplitinj</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} {<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}}.<br/>
<span class="kwd">Context</span> {<span class="id">g</span>} (<span class="id">funK</span> : {<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.functions.html#funPsplitinj.A">A</a></span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#cancel">cancel</a></span> <span class="id"><a href="mathcomp.classical.functions.html#funPsplitinj.f">f</a></span> <span class="id">g</span>}).<br/>
<span class="kwd">Let</span> <span class="id">f</span>' : <span class="id">_</span> -&gt; <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#funPsplitinj.f">f</a></span>.<br/>
#[<span class="id">local</span>] <span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> <span class="id">f</span>'.<br/>
#[<span class="id">local</span>] <span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Build">Can.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#funPsplitinj.A">A</a></span> <span class="id">f</span>' <span class="id"><a href="mathcomp.classical.functions.html#funPsplitinj.funK">funK</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="funPsplitinj">funPsplitinj</a></span> : {<span class="id">i</span> : {<span class="id">splitinjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#funPsplitinj.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#funPsplitinj.B">B</a></span>} | <span class="id"><a href="mathcomp.classical.functions.html#funPsplitinj.f">f</a></span> = <span class="id">i</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof61')">Proof.</span></div>
<div class="proofscript" id="proof61">
 <span class="kwd">by</span> <span class="kwd">exists</span> [<span class="id">splitinjfun</span> <span class="id">of</span> <span class="id">f</span>']; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.functions.html#funP">funP</a></span>. Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#funPsplitinj">funPsplitinj</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="PsplitinjT">PsplitinjT</a></span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>} {<span class="id">g</span>} : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#cancel">cancel</a></span> <span class="id">f</span> <span class="id">g</span> -&gt;<br/>
&nbsp;&nbsp;{<span class="id">i</span> : {<span class="id">splitinj</span> [<span class="id">set</span>: <span class="id">aT</span>] &gt;-&gt; <span class="id">rT</span>} | <span class="id">f</span> = <span class="id">i</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof62')">Proof.</span></div>
<div class="proofscript" id="proof62">
 <span class="kwd">by</span> <span class="id">move</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in1W">in1W</a></span>/<span class="id"><a href="mathcomp.classical.functions.html#Psplitinj">Psplitinj</a></span>. Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="funPsplitsurj">funPsplitsurj</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} {<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}}.<br/>
<span class="kwd">Context</span> {<span class="id">g</span> : {<span class="kwd">fun</span> <span class="id"><a href="mathcomp.classical.functions.html#funPsplitsurj.B">B</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#funPsplitsurj.A">A</a></span>}} (<span class="id">funK</span> : {<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.functions.html#funPsplitsurj.B">B</a></span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#cancel">cancel</a></span> <span class="id">g</span> <span class="id"><a href="mathcomp.classical.functions.html#funPsplitsurj.f">f</a></span>}).<br/>
<span class="kwd">Let</span> <span class="id">f</span>' : <span class="id">_</span> -&gt; <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#funPsplitsurj.f">f</a></span>.<br/>
#[<span class="id">local</span>] <span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> <span class="id">f</span>'.<br/>
#[<span class="id">local</span>] <span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Build">CanV.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#funPsplitsurj.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#funPsplitsurj.B">B</a></span> <span class="id">f</span>' <span class="id"><a href="mathcomp.classical.functions.html#funS">funS</a></span> <span class="id"><a href="mathcomp.classical.functions.html#funPsplitsurj.funK">funK</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="funPsplitsurj">funPsplitsurj</a></span> : {<span class="id">s</span> : {<span class="id">splitsurjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#funPsplitsurj.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#funPsplitsurj.B">B</a></span>} | <span class="id"><a href="mathcomp.classical.functions.html#funPsplitsurj.f">f</a></span> = <span class="id">s</span> :&gt; (<span class="id">_</span> -&gt; <span class="id">_</span>)}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof63')">Proof.</span></div>
<div class="proofscript" id="proof63">
 <span class="kwd">by</span> <span class="kwd">exists</span> [<span class="id">splitsurjfun</span> <span class="id">of</span> <span class="id">f</span>']. Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#funPsplitsurj">funPsplitsurj</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="PsplitsurjT">PsplitsurjT</a></span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>} {<span class="id">g</span>} : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#cancel">cancel</a></span> <span class="id">g</span> <span class="id">f</span> -&gt;<br/>
&nbsp;&nbsp;{<span class="id">s</span> : {<span class="id">splitsurjfun</span> [<span class="id">set</span>: <span class="id">aT</span>] &gt;-&gt; [<span class="id">set</span>: <span class="id">rT</span>]} | <span class="id">f</span> = <span class="id">s</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof64')">Proof.</span></div>
<div class="proofscript" id="proof64">
<span class="kwd">by</span> <span class="id">move</span>/<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in1W">in1W</a></span>/(@<span class="id"><a href="mathcomp.classical.functions.html#funPsplitsurj">funPsplitsurj</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> [<span class="kwd">fun</span> <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#totalfun">totalfun</a></span> <span class="id">f</span>] [<span class="kwd">fun</span> <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#totalfun">totalfun</a></span> <span class="id">g</span>]).<br/>
Qed.</div>
<br/>
<pre class="ssrdoc">
Instances 
</pre>
<br/>
<pre class="ssrdoc">
The identity is a split bijection 
</pre>
<br/>
<span class="id"><a name="hb_instance_665">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">T</span> <span class="id">A</span> := @<span class="id"><a href="mathcomp.classical.functions.html#Build">Can2.Build</a></span> <span class="id">T</span> <span class="id">T</span> <span class="id">A</span> <span class="id">A</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#idfun">idfun</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#idfun">idfun</a></span><br/>
&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">x</span> <span class="id">y</span> =&gt; <span class="id">y</span>) (<span class="kwd">fun</span> <span class="id">x</span> <span class="id">y</span> =&gt; <span class="id">y</span>) (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#erefl">erefl</a></span>) (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#erefl">erefl</a></span>).<br/>
<br/>
<pre class="ssrdoc">
Iteration preserves Fun, Injectivity, and Surjectivity 
</pre>
<span class="kwd">Section</span> <span class="id"><a name="iter_inv">iter_inv</a></span>.<br/>
<br/>
<span class="kwd">Context</span> {<span class="id">aT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>}.<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Lemma</span> <span class="id"><a name="iter_fun_subproof">iter_fun_subproof</a></span> <span class="id">n</span> (<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.A">A</a></span>}) : <span class="id"><a href="mathcomp.classical.functions.html#isFun">isFun</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.A">A</a></span> (<span class="id">iter</span> <span class="id">n</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof65')">Proof.</span></div>
<div class="proofscript" id="proof65">
<span class="id">split</span> =&gt; <span class="id">x</span>; <span class="id">elim</span>: <span class="id">n</span> =&gt; // <span class="id">n</span> /[<span class="id">apply</span>] ?; <span class="id">apply</span>/(<span class="id"><a href="mathcomp.classical.functions.html#fun_image_sub">fun_image_sub</a></span> <span class="id">f</span>).<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">iter</span> <span class="id">n</span> <span class="id">f</span> <span class="id">x</span>).<br/>
Qed.</div>
<br/>
<span class="id"><a name="iter_inv.hb_instance_677">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">n</span> <span class="id">f</span> := <span class="id"><a href="mathcomp.classical.functions.html#iter_fun_subproof">iter_fun_subproof</a></span> <span class="id">n</span> <span class="id">f</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="iter_inv.OInv">OInv</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">f</span> : {<span class="id">oinv</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.aT">aT</a></span>}}.<br/>
<span class="id"><a name="iter_inv.OInv.hb_instance_680">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">n</span> := <span class="id"><a href="mathcomp.classical.functions.html#Build">OInv.Build</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">iter</span> <span class="id">n</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.OInv.f">f</a></span>)<br/>
&nbsp;&nbsp;(<span class="id">iter</span> <span class="id">n</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#obind">obind</a></span> '<span class="id">oinv_f</span>) \<span class="id">o</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span>).<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="oinv_iter">oinv_iter</a></span> <span class="id">n</span> : '<span class="id">oinv_</span>(<span class="id">iter</span> <span class="id">n</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.OInv.f">f</a></span>) = <span class="id">iter</span> <span class="id">n</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#obind">obind</a></span> '<span class="id">oinv_f</span>) \<span class="id">o</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof66')">Proof.</span></div>
<div class="proofscript" id="proof66">
 <span class="kwd">by</span> []. Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.OInv">OInv</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="iter_inv.OInv">OInv</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">f</span> : {<span class="id">inv</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.aT">aT</a></span>}}.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="some_iter_inv">some_iter_inv</a></span> <span class="id">n</span> : <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#olift">olift</a></span> (<span class="id">iter</span> <span class="id">n</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.OInv.f">f</a></span>^-1) = '<span class="id">oinv_</span>(<span class="id">iter</span> <span class="id">n</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.OInv.f">f</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof67')">Proof.</span></div>
<div class="proofscript" id="proof67">
<span class="id">elim</span>: <span class="id">n</span> =&gt; // <span class="id">n</span> <span class="id">IH</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#iterfSr">iterfSr</a></span> <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#olift_comp">olift_comp</a></span> <span class="id">IH</span> ?<span class="id"><a href="mathcomp.classical.functions.html#oinv_iter">oinv_iter</a></span> -<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#compA">compA</a></span>.<br/>
<span class="id">rewrite</span> (<span class="id">_</span> : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#Some">Some</a></span> \<span class="id">o</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.OInv.f">f</a></span>^-1 = '<span class="id">oinv_f</span>); <span class="id">first</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#iterfSr">iterfSr</a></span>; <span class="id">congr</span> (<span class="id">_</span> \<span class="id">o</span> <span class="id">_</span>).<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funeqP">funeqP</a></span> =&gt; ? /=; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#some_inv">some_inv</a></span>.<br/>
Qed.</div>
<span class="id"><a name="iter_inv.OInv.hb_instance_683">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">n</span> := <span class="id"><a href="mathcomp.classical.functions.html#Build">OInv_Inv.Build</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">iter</span> <span class="id">n</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.OInv.f">f</a></span>) (<span class="id"><a href="mathcomp.classical.functions.html#some_iter_inv">some_iter_inv</a></span> <span class="id">n</span>).<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inv_iter">inv_iter</a></span> <span class="id">n</span> : (<span class="id">iter</span> <span class="id">n</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.OInv.f">f</a></span>)^-1 = <span class="id">iter</span> <span class="id">n</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.OInv.f">f</a></span>^-1<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof68')">Proof.</span></div>
<div class="proofscript" id="proof68">
 <span class="kwd">by</span> []. Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.OInv">OInv</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iter_can_subproof">iter_can_subproof</a></span> <span class="id">n</span> (<span class="id">f</span> : {<span class="id">injfun</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.A">A</a></span>}) : <span class="id"><a href="mathcomp.classical.functions.html#OInv_Can">OInv_Can</a></span> <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.aT">aT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.aT">aT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.A">A</a></span> (<span class="id">iter</span> <span class="id">n</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof69')">Proof.</span></div>
<div class="proofscript" id="proof69">
<span class="id">split</span>=&gt; <span class="id">x</span> <span class="id">Ax</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#oinv_iter">oinv_iter</a></span> /=; <span class="id">elim</span>: <span class="id">n</span>=&gt; // <span class="id">n</span> <span class="id">IH</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.boolp.html#iterfSr">iterfSr</a></span> /= <span class="id"><a href="mathcomp.classical.functions.html#funoK">funoK</a></span> //; <span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.functions.html#mem_fun">mem_fun</a></span>.<br/>
Qed.</div>
<br/>
<span class="id"><a name="iter_inv.hb_instance_686">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">f</span> <span class="id">g</span> := <span class="id"><a href="mathcomp.classical.functions.html#iter_can_subproof">iter_can_subproof</a></span> <span class="id">f</span> <span class="id">g</span>.<br/>
<span class="id"><a name="iter_inv.hb_instance_689">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">n</span> (<span class="id">f</span> : {<span class="id">injfun</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.A">A</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Inject.on</a></span> (<span class="id">iter</span> <span class="id">n</span> <span class="id">f</span>).<br/>
<span class="id"><a name="iter_inv.hb_instance_695">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">n</span> (<span class="id">f</span> : {<span class="id">splitinjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#iter_inv.A">A</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Inject.on</a></span> (<span class="id">iter</span> <span class="id">n</span> <span class="id">f</span>).<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_inv">iter_inv</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="iter_surj">iter_surj</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iter_surj_subproof">iter_surj_subproof</a></span> <span class="id">n</span> (<span class="id">f</span> : {<span class="id">surj</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_surj.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#iter_surj.A">A</a></span>}) : <span class="id"><a href="mathcomp.classical.functions.html#OInv_CanV">OInv_CanV</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_surj.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#iter_surj.A">A</a></span> (<span class="id">iter</span> <span class="id">n</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof70')">Proof.</span></div>
<div class="proofscript" id="proof70">
<span class="id">split</span>; <span class="id">first</span> <span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.functions.html#funS">funS</a></span>.<br/>
<span class="id">elim</span>: <span class="id">n</span>=&gt; // <span class="id">n</span> <span class="id">IH</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#oinv_iter">oinv_iter</a></span> <span class="id"><a href="mathcomp.classical.boolp.html#iterfSr">iterfSr</a></span> <span class="id"><a href="mathcomp.classical.boolp.html#iterfS">iterfS</a></span>.<br/>
<span class="id">apply</span>: (@<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#ocan_in_comp">ocan_in_comp</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#mem">mem</a></span> <span class="id"><a href="mathcomp.classical.functions.html#iter_surj.A">A</a></span>)) =&gt; //; <span class="id">last</span> <span class="id">exact</span>: <span class="id"><a href="mathcomp.classical.functions.html#oinvK">oinvK</a></span>.<br/>
<span class="id">elim</span>: <span class="id">n</span> {<span class="id">IH</span>} =&gt; // <span class="id">n</span> <span class="id">IH</span> <span class="id">x</span> <span class="id">Ax</span>; <span class="id">move</span>: (<span class="id">IH</span> <span class="id">_</span> <span class="id">Ax</span>); <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#pred_oapp_set">pred_oapp_set</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>.<br/>
<span class="id">case</span>=&gt; <span class="id">y</span> <span class="id">Ay</span> /= <span class="id">ynf</span>; <span class="id">case</span>: (@<span class="id"><a href="mathcomp.classical.functions.html#oinvS">oinvS</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span> <span class="id">_</span> <span class="id">Ay</span>) =&gt; <span class="id">z</span> ? <span class="id">zfinv</span>; <span class="kwd">exists</span> <span class="id">z</span> =&gt; //.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">zfinv</span> /= -<span class="id">ynf</span>.<br/>
Qed.</div>
<br/>
<span class="id"><a name="iter_surj.hb_instance_701">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">n</span> <span class="id">f</span> := <span class="id"><a href="mathcomp.classical.functions.html#iter_surj_subproof">iter_surj_subproof</a></span> <span class="id">n</span> <span class="id">f</span>.<br/>
<span class="id"><a name="iter_surj.hb_instance_704">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">n</span> (<span class="id">f</span> : {<span class="id">splitsurj</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_surj.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#iter_surj.A">A</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> (<span class="id">iter</span> <span class="id">n</span> <span class="id">f</span>).<br/>
<span class="id"><a name="iter_surj.hb_instance_710">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">n</span> (<span class="id">f</span> : {<span class="id">surjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_surj.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#iter_surj.A">A</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> (<span class="id">iter</span> <span class="id">n</span> <span class="id">f</span>).<br/>
<span class="id"><a name="iter_surj.hb_instance_716">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">n</span> (<span class="id">f</span> : {<span class="id">splitsurjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_surj.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#iter_surj.A">A</a></span>}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> (<span class="id">iter</span> <span class="id">n</span> <span class="id">f</span>).<br/>
<span class="id"><a name="iter_surj.hb_instance_722">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">n</span> (<span class="id">f</span> : {<span class="id">bij</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_surj.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#iter_surj.A">A</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> (<span class="id">iter</span> <span class="id">n</span> <span class="id">f</span>).<br/>
<span class="id"><a name="iter_surj.hb_instance_728">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">n</span> (<span class="id">f</span> : {<span class="id">splitbij</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_surj.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#iter_surj.A">A</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> (<span class="id">iter</span> <span class="id">n</span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#iter_surj">iter_surj</a></span>.<br/>
<br/>
<pre class="ssrdoc">
Unbind 
</pre>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Unbind">Unbind</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>} (<span class="id">dflt</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>).<br/>
<span class="kwd">Definition</span> <span class="id"><a name="unbind">unbind</a></span> (<span class="id">f</span> : <span class="id"><a href="mathcomp.classical.functions.html#Unbind.aT">aT</a></span> -&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.rT">rT</a></span>) <span class="id">x</span> := <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#odflt">odflt</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#Unbind.dflt">dflt</a></span> <span class="id">x</span>) (<span class="id">f</span> <span class="id">x</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="unbind_fun_subproof">unbind_fun_subproof</a></span> (<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.A">A</a></span> &gt;-&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#Unbind.B">B</a></span>}) : <span class="id"><a href="mathcomp.classical.functions.html#isFun">isFun</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.B">B</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#unbind">unbind</a></span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof71')">Proof.</span></div>
<div class="proofscript" id="proof71">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.functions.html#unbind">unbind</a></span>; <span class="id">split</span>=&gt; <span class="id">x</span> /'<span class="id">funS_f</span> [<span class="id">y</span> <span class="id">Bu</span> &lt;-]. Qed.</div>
<span class="id"><a name="Unbind.hb_instance_734">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">f</span> := <span class="id"><a href="mathcomp.classical.functions.html#unbind_fun_subproof">unbind_fun_subproof</a></span> <span class="id">f</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Unbind.Oinv">Oinv</a></span>.<br/>
<span class="kwd">Context</span> (<span class="id">f</span> : {<span class="id">oinv</span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.rT">rT</a></span>}).<br/>
<span class="id"><a name="HB_unnamed_factory_737">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Build">OInv.Build</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.classical.functions.html#unbind">unbind</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.Oinv.f">f</a></span>) ('<span class="id">oinv_f</span> \<span class="id">o</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="oinv_unbind">oinv_unbind</a></span> : '<span class="id">oinv_</span>(<span class="id"><a href="mathcomp.classical.functions.html#unbind">unbind</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.Oinv.f">f</a></span>) = '<span class="id">oinv_f</span> \<span class="id">o</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof72')">Proof.</span></div>
<div class="proofscript" id="proof72">
 <span class="kwd">by</span> []. Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.Oinv">Oinv</a></span>.<br/>
<span class="id"><a name="Unbind.hb_instance_739">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">oinvfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.A">A</a></span> &gt;-&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#Unbind.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#unbind">unbind</a></span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Unbind.Inv">Inv</a></span>.<br/>
<span class="kwd">Context</span> (<span class="id">f</span> : {<span class="id">inv</span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.aT">aT</a></span> &gt;-&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.rT">rT</a></span>}).<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inv_unbind_subproof">inv_unbind_subproof</a></span> : <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#olift">olift</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#Unbind.Inv.f">f</a></span>^-1 \<span class="id">o</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span>) = '<span class="id">oinv_</span>(<span class="id"><a href="mathcomp.classical.functions.html#unbind">unbind</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.Inv.f">f</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof73')">Proof.</span></div>
<div class="proofscript" id="proof73">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.mathcomp_extra.html#olift_comp">olift_comp</a></span> <span class="id"><a href="mathcomp.classical.functions.html#oliftV">oliftV</a></span>. Qed.</div>
<span class="id"><a name="HB_unnamed_factory_743">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Build">OInv_Inv.Build</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.classical.functions.html#unbind">unbind</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.Inv.f">f</a></span>) <span class="id"><a href="mathcomp.classical.functions.html#inv_unbind_subproof">inv_unbind_subproof</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inv_unbind">inv_unbind</a></span> : (<span class="id"><a href="mathcomp.classical.functions.html#unbind">unbind</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.Inv.f">f</a></span>)^-1 = <span class="id"><a href="mathcomp.classical.functions.html#Unbind.Inv.f">f</a></span>^-1 \<span class="id">o</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof74')">Proof.</span></div>
<div class="proofscript" id="proof74">
 <span class="kwd">by</span> []. Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.Inv">Inv</a></span>.<br/>
<span class="id"><a name="Unbind.hb_instance_745">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">invfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.A">A</a></span> &gt;-&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#Unbind.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Fun.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#unbind">unbind</a></span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="unbind_inj_subproof">unbind_inj_subproof</a></span> (<span class="id">f</span> : {<span class="id">injfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.A">A</a></span> &gt;-&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#Unbind.B">B</a></span>}) :<br/>
&nbsp;&nbsp;&nbsp;@<span class="id"><a href="mathcomp.classical.functions.html#OInv_Can">OInv_Can</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.A">A</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#unbind">unbind</a></span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof75')">Proof.</span></div>
<div class="proofscript" id="proof75">
<span class="id">split</span>=&gt; <span class="id">x</span> <span class="id">Ax</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#oinv_unbind">oinv_unbind</a></span> /<span class="id"><a href="mathcomp.classical.functions.html#unbind">unbind</a></span>/=; <span class="id">have</span> &lt;- := '<span class="id">funoK_f</span> <span class="id">Ax</span>.<br/>
<span class="kwd">by</span> <span class="id">have</span> [<span class="id">y</span> <span class="id">By</span> /= &lt;-] := '<span class="id">funS_f</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set_mem">set_mem</a></span> <span class="id">Ax</span>).<br/>
Qed.</div>
<span class="id"><a name="Unbind.hb_instance_749">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">f</span> := <span class="id"><a href="mathcomp.classical.functions.html#unbind_inj_subproof">unbind_inj_subproof</a></span> <span class="id">f</span>.<br/>
<span class="id"><a name="Unbind.hb_instance_752">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitinjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.A">A</a></span> &gt;-&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#Unbind.B">B</a></span>}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#on">Inject.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#unbind">unbind</a></span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="unbind_surj_subproof">unbind_surj_subproof</a></span> (<span class="id">f</span> : {<span class="id">surj</span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.A">A</a></span> &gt;-&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#Unbind.B">B</a></span>}) :<br/>
&nbsp;&nbsp;&nbsp;@<span class="id"><a href="mathcomp.classical.functions.html#OInv_CanV">OInv_CanV</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.B">B</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#unbind">unbind</a></span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof76')">Proof.</span></div>
<div class="proofscript" id="proof76">
<span class="id">split</span>=&gt; [<span class="id">b</span>|<span class="id">b</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#set_mem">set_mem</a></span>] <span class="id">Bb</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#oinv_unbind">oinv_unbind</a></span> /<span class="id"><a href="mathcomp.classical.functions.html#unbind">unbind</a></span>/=.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.functions.html#oinvP">oinvP</a></span> =&gt; [|<span class="id">a</span>]; [<span class="kwd">exists</span> <span class="id">b</span> | <span class="kwd">exists</span> <span class="id">a</span>].<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.functions.html#oinvP">oinvP</a></span> =&gt; [|<span class="id">a</span> <span class="id">Aa</span> /= -&gt;]; <span class="id">first</span> <span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">b</span>.<br/>
Qed.</div>
<span class="id"><a name="Unbind.hb_instance_758">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">f</span> := <span class="id"><a href="mathcomp.classical.functions.html#unbind_surj_subproof">unbind_surj_subproof</a></span> <span class="id">f</span>.<br/>
<span class="id"><a name="Unbind.hb_instance_761">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">surjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.A">A</a></span> &gt;-&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#Unbind.B">B</a></span>}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#unbind">unbind</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="Unbind.hb_instance_767">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitsurj</span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.A">A</a></span> &gt;-&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#Unbind.B">B</a></span>}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#unbind">unbind</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="Unbind.hb_instance_773">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitsurjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.A">A</a></span> &gt;-&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#Unbind.B">B</a></span>}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#unbind">unbind</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="Unbind.hb_instance_779">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">bij</span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.A">A</a></span> &gt;-&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#Unbind.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#unbind">unbind</a></span> <span class="id">f</span>).<br/>
<span class="id"><a name="Unbind.hb_instance_785">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitbij</span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind.A">A</a></span> &gt;-&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#Unbind.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Bij.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#unbind">unbind</a></span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#Unbind">Unbind</a></span>.<br/>
<br/>
<pre class="ssrdoc">
Odflt 
</pre>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Odflt">Odflt</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">T</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>} (<span class="id">x</span> : <span class="id">T</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="odflt_unbind">odflt_unbind</a></span> : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#odflt">odflt</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Odflt.x">x</a></span> = <span class="id"><a href="mathcomp.classical.functions.html#unbind">unbind</a></span> (<span class="kwd">fun</span>=&gt; <span class="id"><a href="mathcomp.classical.functions.html#Odflt.x">x</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#idfun">idfun</a></span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof77')">Proof.</span></div>
<div class="proofscript" id="proof77">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="id"><a name="HB_unnamed_factory_791">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Build">Inv.Build</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#odflt">odflt</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Odflt.x">x</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span>.<br/>
<br/>
<span class="id"><a name="HB_unnamed_factory_798">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#copy">SplitBij.copy</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#odflt">odflt</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Odflt.x">x</a></span>)<br/>
&nbsp;&nbsp;[<span class="id">the</span> {<span class="id">bij</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> @` <span class="id"><a href="mathcomp.classical.functions.html#Odflt.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Odflt.A">A</a></span>} <span class="id">of</span> <span class="id"><a href="mathcomp.classical.functions.html#unbind">unbind</a></span> (<span class="kwd">fun</span>=&gt; <span class="id"><a href="mathcomp.classical.functions.html#Odflt.x">x</a></span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#idfun">idfun</a></span>].<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#Odflt">Odflt</a></span>.<br/>
<br/>
<pre class="ssrdoc">
Subtypes 
</pre>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="SubType">SubType</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">T</span> : <span class="kwd">Type</span>} {<span class="id">P</span> : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#pred">pred</a></span> <span class="id">T</span>} (<span class="id">sT</span> : <span class="id">subType</span> <span class="id">P</span>) (<span class="id">x0</span> : <span class="id">sT</span>).<br/>
<br/>
<span class="id"><a name="HB_unnamed_factory_807">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Build">OInv.Build</a></span> <span class="id"><a href="mathcomp.classical.functions.html#SubType.sT">sT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#SubType.T">T</a></span> <span class="id">val</span> <span class="id">insub</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="oinv_val">oinv_val</a></span> : '<span class="id">oinv_val</span> = <span class="id">insub</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof78')">Proof.</span></div>
<div class="proofscript" id="proof78">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="val_bij_subproof">val_bij_subproof</a></span> : <span class="id"><a href="mathcomp.classical.functions.html#OInv_Can2">OInv_Can2</a></span> <span class="id"><a href="mathcomp.classical.functions.html#SubType.sT">sT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#SubType.T">T</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> [<span class="id">set</span>` <span class="id"><a href="mathcomp.classical.functions.html#SubType.P">P</a></span>] <span class="id">val</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof79')">Proof.</span></div>
<div class="proofscript" id="proof79">
<span class="id">apply</span>: (<span class="id"><a href="mathcomp.classical.functions.html#Build">OInv_Can2.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">val</span> (<span class="kwd">fun</span> <span class="id">x</span>  <span class="id">_</span> =&gt; <span class="id">valP</span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">_</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in1W">in1W</a></span> <span class="id">valK</span>) (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in1W">in1W</a></span> (<span class="id">insubK</span> <span class="id">_</span>))).<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> <span class="id">Px</span> /=; <span class="kwd">exists</span> (<span class="id">Sub</span> <span class="id">x</span> <span class="id">Px</span>) =&gt; //; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#oinv_val">oinv_val</a></span> <span class="id">insubT</span>.<br/>
Qed.</div>
<span class="id"><a name="HB_unnamed_factory_809">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#val_bij_subproof">val_bij_subproof</a></span>.<br/>
<br/>
<span class="id"><a name="HB_unnamed_factory_816">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#copy">Bij.copy</a></span> <span class="id">insub</span> '<span class="id">oinv_val</span>.<br/>
<span class="id"><a name="HB_unnamed_factory_829">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#copy">SplitBij.copy</a></span> (<span class="id">insubd</span> <span class="id"><a href="mathcomp.classical.functions.html#SubType.x0">x0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#odflt">odflt</a></span> <span class="id"><a href="mathcomp.classical.functions.html#SubType.x0">x0</a></span> \<span class="id">o</span> '<span class="id">split_</span>(<span class="kwd">fun</span>=&gt; <span class="id">val</span> <span class="id"><a href="mathcomp.classical.functions.html#SubType.x0">x0</a></span>) <span class="id">insub</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inv_insubd">inv_insubd</a></span> : (<span class="id">insubd</span> <span class="id"><a href="mathcomp.classical.functions.html#SubType.x0">x0</a></span>)^-1 = <span class="id">val</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof80')">Proof.</span></div>
<div class="proofscript" id="proof80">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#SubType">SubType</a></span>.<br/>
<br/>
<pre class="ssrdoc">
To setT 
</pre>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="to_setT">to_setT</a></span> {<span class="id">T</span>} (<span class="id">x</span> : <span class="id">T</span>) : [<span class="id">set</span>: <span class="id">T</span>] :=<br/>
&nbsp;&nbsp;@<span class="id"><a href="mathcomp.classical.classical_sets.html#SigSub">SigSub</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">x</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#mem_set">mem_set</a></span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">I</a></span> : <span class="id">x</span> \<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span>).<br/>
<span class="id"><a name="hb_instance_843">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">T</span> := <span class="id"><a href="mathcomp.classical.functions.html#Build">Can.Build</a></span> <span class="id">T</span> [<span class="id">set</span>: <span class="id">T</span>] <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#to_setT">to_setT</a></span><br/>
&nbsp;&nbsp;((<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#erefl">erefl</a></span>) : {<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span>, <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#cancel">cancel</a></span> <span class="id"><a href="mathcomp.classical.functions.html#to_setT">to_setT</a></span> <span class="id">val</span>}).<br/>
<span class="id"><a name="hb_instance_854">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">T</span> := <span class="id"><a href="mathcomp.classical.functions.html#Build">isFun.Build</a></span> <span class="id">T</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#to_setT">to_setT</a></span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">I</a></span>).<br/>
<span class="id"><a name="hb_instance_857">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">T</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">SplitInjFun_CanV.Build</a></span> <span class="id">T</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#to_setT">to_setT</a></span> (<span class="kwd">fun</span> <span class="id">x</span> <span class="id">y</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">I</a></span>) <span class="id"><a href="mathcomp.classical.functions.html#inj">inj</a></span>.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="setTbij">setTbij</a></span> {<span class="id">T</span>} := [<span class="id">splitbij</span> <span class="id">of</span> @<span class="id"><a href="mathcomp.classical.functions.html#to_setT">to_setT</a></span> <span class="id">T</span>].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inv_to_setT">inv_to_setT</a></span> <span class="id">T</span> : (@<span class="id"><a href="mathcomp.classical.functions.html#to_setT">to_setT</a></span> <span class="id">T</span>)^-1 = <span class="id">val</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof81')">Proof.</span></div>
<div class="proofscript" id="proof81">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<pre class="ssrdoc">
Subfun 
</pre>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="subfun">subfun</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">T</span>} {<span class="id">A</span> <span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>}.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="subfun">subfun</a></span> (<span class="id">AB</span> : <span class="id"><a href="mathcomp.classical.functions.html#subfun.A">A</a></span> `&lt;=` <span class="id"><a href="mathcomp.classical.functions.html#subfun.B">B</a></span>) (<span class="id">a</span> : <span class="id"><a href="mathcomp.classical.functions.html#subfun.A">A</a></span>) : <span class="id"><a href="mathcomp.classical.functions.html#subfun.B">B</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.classical_sets.html#SigSub">SigSub</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#mem_set">mem_set</a></span> (<span class="id">AB</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set_valP">set_valP</a></span> <span class="id">a</span>))).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="subfun_inj">subfun_inj</a></span> {<span class="id">AB</span> : <span class="id"><a href="mathcomp.classical.functions.html#subfun.A">A</a></span> `&lt;=` <span class="id"><a href="mathcomp.classical.functions.html#subfun.B">B</a></span>} : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#injective">injective</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#subfun">subfun</a></span> <span class="id">AB</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof82')">Proof.</span></div>
<div class="proofscript" id="proof82">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> <span class="id">y</span> /(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#congr1">congr1</a></span> <span class="id">val</span>)/= /<span class="id">val_inj</span>. Qed.</div>
<br/>
<span class="id"><a name="subfun.hb_instance_861">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">AB</span> : <span class="id"><a href="mathcomp.classical.functions.html#subfun.A">A</a></span> `&lt;=` <span class="id"><a href="mathcomp.classical.functions.html#subfun.B">B</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#copy">SurjFun.copy</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#subfun">subfun</a></span> <span class="id">AB</span>) [<span class="kwd">fun</span> <span class="id"><a href="mathcomp.classical.functions.html#subfun">subfun</a></span> <span class="id">AB</span> <span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span>].<br/>
<span class="id"><a name="subfun.hb_instance_869">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span>  (<span class="id">AB</span> : <span class="id"><a href="mathcomp.classical.functions.html#subfun.A">A</a></span> `&lt;=` <span class="id"><a href="mathcomp.classical.functions.html#subfun.B">B</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">SurjFun_Inj.Build</a></span> <span class="id"><a href="mathcomp.classical.functions.html#subfun.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#subfun.B">B</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#subfun">subfun</a></span> <span class="id">AB</span> @` <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span>) (<span class="id"><a href="mathcomp.classical.functions.html#subfun">subfun</a></span> <span class="id">AB</span>) (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in2W">in2W</a></span> <span class="id"><a href="mathcomp.classical.functions.html#subfun_inj">subfun_inj</a></span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#subfun">subfun</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="subfun_eq">subfun_eq</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">T</span>} {<span class="id">A</span> <span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="subfun_imageT">subfun_imageT</a></span> (<span class="id">AB</span> : <span class="id"><a href="mathcomp.classical.functions.html#subfun_eq.A">A</a></span> `&lt;=` <span class="id"><a href="mathcomp.classical.functions.html#subfun_eq.B">B</a></span>) (<span class="id">BA</span> : <span class="id"><a href="mathcomp.classical.functions.html#subfun_eq.B">B</a></span> `&lt;=` <span class="id"><a href="mathcomp.classical.functions.html#subfun_eq.A">A</a></span>) : <span class="id"><a href="mathcomp.classical.functions.html#subfun">subfun</a></span> <span class="id">AB</span> @` <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> = <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof83')">Proof.</span></div>
<div class="proofscript" id="proof83">
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.classical_sets.html#seteqP">seteqP</a></span>; <span class="id">split</span>=&gt; <span class="id">x</span> //= <span class="id">_</span>; <span class="kwd">exists</span> (<span class="id"><a href="mathcomp.classical.functions.html#subfun">subfun</a></span> <span class="id">BA</span> <span class="id">x</span>) =&gt; //; <span class="id">exact</span>/<span class="id">val_inj</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="subfun_inv_subproof">subfun_inv_subproof</a></span> (<span class="id">AB</span> : <span class="id"><a href="mathcomp.classical.functions.html#subfun_eq.A">A</a></span> = <span class="id"><a href="mathcomp.classical.functions.html#subfun_eq.B">B</a></span>) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#olift">olift</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#subfun">subfun</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#subsetCW">subsetCW</a></span> <span class="id">AB</span>)) = '<span class="id">oinv_</span>(<span class="id"><a href="mathcomp.classical.functions.html#subfun">subfun</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#subsetW">subsetW</a></span> <span class="id">AB</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof84')">Proof.</span></div>
<div class="proofscript" id="proof84">
<span class="id">set</span> <span class="id">g</span> := <span class="id"><a href="mathcomp.classical.functions.html#subfun">subfun</a></span> <span class="id">_</span>; <span class="id">set</span> <span class="id">f</span> := <span class="id"><a href="mathcomp.classical.functions.html#subfun">subfun</a></span> <span class="id">_</span>; <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">x</span> /=.<br/>
<span class="id">apply</span>: '<span class="id">inj_</span>(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#oapp">oapp</a></span> <span class="id">f</span> <span class="id">x</span>) =&gt; //=.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>/=; <span class="id">eexists</span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>/=; <span class="id">apply</span>: '<span class="id">oinvS_f</span>; <span class="kwd">exists</span> (<span class="id">g</span> <span class="id">x</span>) =&gt; //; <span class="id">apply</span>/<span class="id">val_inj</span>.<br/>
<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#oinvK">oinvK</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>//=; <span class="id">first</span> <span class="id">exact</span>/<span class="id">val_inj</span>.<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">g</span> <span class="id">x</span>) =&gt; //; <span class="id">apply</span>/<span class="id">val_inj</span>.<br/>
Qed.</div>
<span class="id"><a name="subfun_eq.hb_instance_874">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">AB</span> : <span class="id"><a href="mathcomp.classical.functions.html#subfun_eq.A">A</a></span> = <span class="id"><a href="mathcomp.classical.functions.html#subfun_eq.B">B</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">OInv_Inv.Build</a></span> <span class="id"><a href="mathcomp.classical.functions.html#subfun_eq.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#subfun_eq.B">B</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#subfun">subfun</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#subsetW">subsetW</a></span> <span class="id">AB</span>)) (<span class="id"><a href="mathcomp.classical.functions.html#subfun_inv_subproof">subfun_inv_subproof</a></span> <span class="id">AB</span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#subfun_eq">subfun_eq</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="seteqfun">seteqfun</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">T</span> : <span class="kwd">Type</span>}.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="seteqfun">seteqfun</a></span> {<span class="id">A</span> <span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.functions.html#seteqfun.T">T</a></span>} (<span class="id">AB</span> : <span class="id">A</span> = <span class="id">B</span>) := <span class="id"><a href="mathcomp.classical.functions.html#subfun">subfun</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#subsetW">subsetW</a></span> <span class="id">AB</span>).<br/>
<br/>
<span class="kwd">Context</span> {<span class="id">A</span> <span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id"><a href="mathcomp.classical.functions.html#seteqfun.T">T</a></span>} (<span class="id">AB</span> : <span class="id">A</span> = <span class="id">B</span>).<br/>
<span class="id"><a name="HB_unnamed_factory_877">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Build">Inv.Build</a></span> <span class="id"><a href="mathcomp.classical.functions.html#seteqfun.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#seteqfun.B">B</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#seteqfun">seteqfun</a></span> <span class="id"><a href="mathcomp.classical.functions.html#seteqfun.AB">AB</a></span>) (<span class="id"><a href="mathcomp.classical.functions.html#seteqfun">seteqfun</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#esym">esym</a></span> <span class="id"><a href="mathcomp.classical.functions.html#seteqfun.AB">AB</a></span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="seteqfun_can2_subproof">seteqfun_can2_subproof</a></span> : <span class="id"><a href="mathcomp.classical.functions.html#Inv_Can2">Inv_Can2</a></span> <span class="id"><a href="mathcomp.classical.functions.html#seteqfun.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#seteqfun.B">B</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#seteqfun">seteqfun</a></span> <span class="id"><a href="mathcomp.classical.functions.html#seteqfun.AB">AB</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof85')">Proof.</span></div>
<div class="proofscript" id="proof85">
 <span class="kwd">by</span> <span class="id">split</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.functions.html#seteqfun">seteqfun</a></span>//; <span class="id">move</span>=&gt; <span class="id">x</span> <span class="id">_</span>; <span class="id">apply</span>/<span class="id">val_inj</span>. Qed.</div>
<span class="id"><a name="HB_unnamed_factory_884">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#seteqfun_can2_subproof">seteqfun_can2_subproof</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#seteqfun">seteqfun</a></span>.<br/>
<br/>
<pre class="ssrdoc">
Inclusion 
</pre>
<span class="kwd">Section</span> <span class="id"><a name="incl">incl</a></span>.<br/>
<span class="kwd">Context</span>  {<span class="id">T</span>} {<span class="id">A</span> <span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>}.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="incl">incl</a></span> (<span class="id">AB</span> : <span class="id"><a href="mathcomp.classical.functions.html#incl.A">A</a></span> `&lt;=` <span class="id"><a href="mathcomp.classical.functions.html#incl.B">B</a></span>) := @<span class="id">id</span> <span class="id"><a href="mathcomp.classical.functions.html#incl.T">T</a></span>.<br/>
<br/>
<span class="id"><a name="incl.hb_instance_891">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">AB</span> : <span class="id"><a href="mathcomp.classical.functions.html#incl.A">A</a></span> `&lt;=` <span class="id"><a href="mathcomp.classical.functions.html#incl.B">B</a></span>) := <span class="id"><a href="mathcomp.classical.functions.html#Build">Inv.Build</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.classical.functions.html#incl">incl</a></span> <span class="id">AB</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#id">id</a></span>.<br/>
<span class="id"><a name="incl.hb_instance_899">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">AB</span> : <span class="id"><a href="mathcomp.classical.functions.html#incl.A">A</a></span> `&lt;=` <span class="id"><a href="mathcomp.classical.functions.html#incl.B">B</a></span>) := <span class="id"><a href="mathcomp.classical.functions.html#Build">isFun.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#incl.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#incl.B">B</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#incl">incl</a></span> <span class="id">AB</span>) <span class="id">AB</span>.<br/>
<span class="id"><a name="incl.hb_instance_902">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">AB</span> : <span class="id"><a href="mathcomp.classical.functions.html#incl.A">A</a></span> `&lt;=` <span class="id"><a href="mathcomp.classical.functions.html#incl.B">B</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">Inv_Can.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#incl.A">A</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#incl">incl</a></span> <span class="id">AB</span>) (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#erefl">erefl</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="eqincl">eqincl</a></span> (<span class="id">AB</span> : <span class="id"><a href="mathcomp.classical.functions.html#incl.A">A</a></span> = <span class="id"><a href="mathcomp.classical.functions.html#incl.B">B</a></span>) := <span class="id"><a href="mathcomp.classical.functions.html#incl">incl</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#subsetW">subsetW</a></span> <span class="id">AB</span>).<br/>
<span class="id"><a name="incl.hb_instance_907">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">AB</span> := <span class="id"><a href="mathcomp.classical.functions.html#on">Inversible.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#eqincl">eqincl</a></span> <span class="id">AB</span>).<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eqincl_surj">eqincl_surj</a></span> <span class="id">AB</span> : <span class="id"><a href="mathcomp.classical.functions.html#Inv_Can2">Inv_Can2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#incl.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#incl.B">B</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#eqincl">eqincl</a></span> <span class="id">AB</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof86')">Proof.</span></div>
<div class="proofscript" id="proof86">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; // <span class="id">x</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.functions.html#eqincl">eqincl</a></span> /<span class="id"><a href="mathcomp.classical.functions.html#incl">incl</a></span>/= /(<span class="id">_</span>^-1)/<span class="id"><a href="mathcomp.classical.functions.html#inv">inv</a></span>/= <span class="id">AB</span>. Qed.</div>
<span class="id"><a name="incl.hb_instance_915">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">AB</span> := <span class="id"><a href="mathcomp.classical.functions.html#eqincl_surj">eqincl_surj</a></span> <span class="id">AB</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#incl">incl</a></span>.<br/>
<span class="kwd">Notation</span> <span class="id"><a name="inclT">inclT</a></span> <span class="id">A</span> := (<span class="id"><a href="mathcomp.classical.functions.html#incl">incl</a></span> (@<span class="id"><a href="mathcomp.classical.classical_sets.html#subsetT">subsetT</a></span> <span class="id">_</span> <span class="id">_</span>)).<br/>
<br/>
<pre class="ssrdoc">
Ad hoc function 
</pre>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="mkfun">mkfun</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span>} {<span class="id">rT</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">rT</span>}.<br/>
<span class="kwd">Notation</span> <span class="id"><a name="isfun">isfun</a></span> <span class="id">f</span> := {<span class="id">homo</span> <span class="id">f</span> : <span class="id">x</span> / <span class="id"><a href="mathcomp.classical.functions.html#mkfun.A">A</a></span> <span class="id">x</span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#mkfun.B">B</a></span> <span class="id">x</span>}.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="mkfun">mkfun</a></span> <span class="id">f</span> (<span class="id">fAB</span> : <span class="id"><a href="mathcomp.classical.functions.html#isfun">isfun</a></span> <span class="id">f</span>) := <span class="id">f</span>.<br/>
<span class="id"><a name="mkfun.hb_instance_926">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">f</span> <span class="id">fAB</span> := @<span class="id"><a href="mathcomp.classical.functions.html#Build">isFun.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#mkfun.A">A</a></span> <span class="id"><a href="mathcomp.classical.functions.html#mkfun.B">B</a></span> (@<span class="id"><a href="mathcomp.classical.functions.html#mkfun">mkfun</a></span> <span class="id">f</span> <span class="id">fAB</span>) <span class="id">fAB</span>.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="mkfun_fun">mkfun_fun</a></span> <span class="id">f</span> <span class="id">fAB</span> := [<span class="kwd">fun</span> <span class="id">of</span> @<span class="id"><a href="mathcomp.classical.functions.html#mkfun">mkfun</a></span> <span class="id">f</span> <span class="id">fAB</span>].<br/>
<span class="id"><a name="mkfun.hb_instance_929">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">inj</span> <span class="id"><a href="mathcomp.classical.functions.html#mkfun.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#mkfun.rT">rT</a></span>}) <span class="id">fAB</span> := <span class="id"><a href="mathcomp.classical.functions.html#on">Inject.on</a></span> (@<span class="id"><a href="mathcomp.classical.functions.html#mkfun">mkfun</a></span> <span class="id">f</span> <span class="id">fAB</span>).<br/>
<span class="id"><a name="mkfun.hb_instance_937">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitinj</span> <span class="id"><a href="mathcomp.classical.functions.html#mkfun.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#mkfun.rT">rT</a></span>}) <span class="id">fAB</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#on">SplitInj.on</a></span> (@<span class="id"><a href="mathcomp.classical.functions.html#mkfun">mkfun</a></span> <span class="id">f</span> <span class="id">fAB</span>).<br/>
<span class="id"><a name="mkfun.hb_instance_946">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">surj</span> <span class="id"><a href="mathcomp.classical.functions.html#mkfun.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#mkfun.B">B</a></span>}) <span class="id">fAB</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> (@<span class="id"><a href="mathcomp.classical.functions.html#mkfun">mkfun</a></span> <span class="id">f</span> <span class="id">fAB</span>).<br/>
<span class="id"><a name="mkfun.hb_instance_954">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitsurj</span> <span class="id"><a href="mathcomp.classical.functions.html#mkfun.A">A</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#mkfun.B">B</a></span>}) <span class="id">fAB</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#on">SplitSurj.on</a></span> (@<span class="id"><a href="mathcomp.classical.functions.html#mkfun">mkfun</a></span> <span class="id">f</span> <span class="id">fAB</span>).<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#mkfun">mkfun</a></span>.<br/>
<br/>
<pre class="ssrdoc">
set_val 
</pre>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="set_val">set_val</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">T</span>} {<span class="id">A</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>}.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="set_val">set_val</a></span> : <span class="id"><a href="mathcomp.classical.functions.html#set_val.A">A</a></span> -&gt; <span class="id"><a href="mathcomp.classical.functions.html#set_val.T">T</a></span> := <span class="id"><a href="mathcomp.classical.functions.html#eqincl">eqincl</a></span> (<span class="id"><a href="mathcomp.classical.classical_sets.html#set_mem_set">set_mem_set</a></span> <span class="id"><a href="mathcomp.classical.functions.html#set_val.A">A</a></span>) \<span class="id">o</span> <span class="id">val</span>.<br/>
<span class="id"><a name="HB_unnamed_factory_964">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#on">Bij.on</a></span> <span class="id"><a href="mathcomp.classical.functions.html#set_val">set_val</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="oinv_set_val">oinv_set_val</a></span> : '<span class="id">oinv_set_val</span> = <span class="id">insub</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof87')">Proof.</span></div>
<div class="proofscript" id="proof87">
 <span class="kwd">by</span> []. Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="set_valE">set_valE</a></span> : <span class="id"><a href="mathcomp.classical.functions.html#set_val">set_val</a></span> = <span class="id">val</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof88')">Proof.</span></div>
<div class="proofscript" id="proof88">
 <span class="kwd">by</span> []. Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#set_val">set_val</a></span>.<br/>
<br/>
#[<span class="id">global</span>]<br/>
<span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#is_true">is_true</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#set_val">set_val</a></span> <span class="id">_</span> \<span class="kwd">in</span> <span class="id">_</span>)) =&gt; <span class="id">solve</span> [<span class="id">apply</span>: <span class="id">valP</span>] : <span class="id">core</span>.<br/>
<br/>
<pre class="ssrdoc">
Squash 
</pre>
<br/>
<span class="id"><a name="hb_instance_977">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">T</span> := <span class="id"><a href="mathcomp.classical.functions.html#Build">CanV.Build</a></span> <span class="id">T</span> $|<span class="id">T</span>| <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#squash">squash</a></span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">I</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in1W">in1W</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#unsquashK">unsquashK</a></span>).<br/>
<span class="id"><a name="hb_instance_988">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">T</span> := <span class="id"><a href="mathcomp.classical.functions.html#copy">SplitInj.copy</a></span> (@<span class="id"><a href="mathcomp.classical.classical_sets.html#unsquash">unsquash</a></span> <span class="id">T</span>) <span class="id"><a href="mathcomp.classical.classical_sets.html#squash">squash</a></span>^-1%<span class="id">FUN</span>.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ssquash">ssquash</a></span> {<span class="id">T</span>} := [<span class="id">splitsurj</span> <span class="id">of</span> @<span class="id"><a href="mathcomp.classical.classical_sets.html#squash">squash</a></span> <span class="id">T</span>].<br/>
<br/>
<pre class="ssrdoc">
pickle and unpickle 
</pre>
<br/>
<span class="id"><a name="hb_instance_999">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">T</span> : <span class="id">countType</span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">Inj.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> (@<span class="id">choice.pickle</span> <span class="id">T</span>) (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in2W">in2W</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#pcan_inj">pcan_inj</a></span> <span class="id">choice.pickleK</span>)).<br/>
<span class="id"><a name="hb_instance_1007">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">T</span> : <span class="id">countType</span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">isFun.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> (@<span class="id">choice.pickle</span> <span class="id">T</span>) (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">I</a></span>).<br/>
<br/>
<pre class="ssrdoc">
set0fun 
</pre>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="set0fun_inj">set0fun_inj</a></span> {<span class="id">P</span> <span class="id">T</span>} : <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#injective">injective</a></span> (@<span class="id"><a href="mathcomp.classical.classical_sets.html#set0fun">set0fun</a></span> <span class="id">P</span> <span class="id">T</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof89')">Proof.</span></div>
<div class="proofscript" id="proof89">
 <span class="kwd">by</span> <span class="id">case</span>=&gt; <span class="id">x</span> <span class="id">x0</span>; <span class="id">have</span> := <span class="id"><a href="mathcomp.classical.classical_sets.html#set_mem">set_mem</a></span> <span class="id">x0</span>. Qed.</div>
<br/>
<span class="id"><a name="hb_instance_1010">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">P</span> <span class="id">T</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">Inj.Build</a></span> (@<span class="id"><a href="mathcomp.classical.classical_sets.html#set0">set0</a></span> <span class="id">T</span>) <span class="id">P</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0fun">set0fun</a></span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in2W">in2W</a></span> <span class="id"><a href="mathcomp.classical.functions.html#set0fun_inj">set0fun_inj</a></span>).<br/>
<span class="id"><a name="hb_instance_1018">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">P</span> <span class="id">T</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">isFun.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> (@<span class="id"><a href="mathcomp.classical.classical_sets.html#set0fun">set0fun</a></span> <span class="id">P</span> <span class="id">T</span>) (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">I</a></span>).<br/>
<br/>
<pre class="ssrdoc">
cast_ord 
</pre>
<br/>
<span class="id"><a name="hb_instance_1021">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> {<span class="id">m</span> <span class="id">n</span>} {<span class="id">eq_mn</span> : <span class="id">m</span> = <span class="id">n</span>} :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">Can2.Build</a></span> '<span class="id">I_m</span> '<span class="id">I_n</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> (<span class="id">cast_ord</span> <span class="id">eq_mn</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">I</a></span>) (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">I</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in1W">in1W</a></span> (<span class="id">cast_ordK</span> <span class="id">_</span>)) (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in1W">in1W</a></span> (<span class="id">cast_ordKV</span> <span class="id">_</span>)).<br/>
<br/>
<pre class="ssrdoc">
enum_val &amp; enum_rank 
</pre>
<br/>
<span class="id"><a name="hb_instance_1038">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">T</span> : <span class="id">finType</span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">Can2.Build</a></span> <span class="id">T</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id">enum_rank</span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">I</a></span>) (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">I</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in1W">in1W</a></span> <span class="id">enum_rankK</span>) (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in1W">in1W</a></span> <span class="id">enum_valK</span>).<br/>
<br/>
<span class="id"><a name="hb_instance_1055">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">T</span> : <span class="id">finType</span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">Can2.Build</a></span> <span class="id">_</span> <span class="id">T</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id">enum_val</span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">I</a></span>) (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">I</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in1W">in1W</a></span> <span class="id">enum_valK</span>) (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in1W">in1W</a></span> <span class="id">enum_rankK</span>).<br/>
<br/>
<pre class="ssrdoc">
Finset val 
</pre>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="finset_val">finset_val</a></span> {<span class="id">T</span> : <span class="id">choiceType</span>} {<span class="id">X</span> : {<span class="id">fset</span> <span class="id">T</span>}} (<span class="id">x</span> : <span class="id">X</span>) : [<span class="id">set</span>` <span class="id">X</span>] :=<br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Specif.html#exist">exist</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">x</span> \<span class="kwd">in</span> [<span class="id">set</span>` <span class="id">X</span>]) (<span class="id">val</span> <span class="id">x</span>) (<span class="id"><a href="mathcomp.classical.classical_sets.html#mem_set">mem_set</a></span> (<span class="id">valP</span> <span class="id">x</span>)).<br/>
<span class="kwd">Definition</span> <span class="id"><a name="val_finset">val_finset</a></span> {<span class="id">T</span> : <span class="id">choiceType</span>} {<span class="id">X</span> : {<span class="id">fset</span> <span class="id">T</span>}} (<span class="id">x</span> : [<span class="id">set</span>` <span class="id">X</span>]) : <span class="id">X</span> :=<br/>
&nbsp;&nbsp;[` <span class="id"><a href="mathcomp.classical.classical_sets.html#set_mem">set_mem</a></span> (<span class="id">valP</span> <span class="id">x</span>)]%<span class="id">fset</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="finset_valK">finset_valK</a></span> {<span class="id">T</span> : <span class="id">choiceType</span>} {<span class="id">X</span> : {<span class="id">fset</span> <span class="id">T</span>}} :<br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#cancel">cancel</a></span> (@<span class="id"><a href="mathcomp.classical.functions.html#finset_val">finset_val</a></span> <span class="id">T</span> <span class="id">X</span>) <span class="id"><a href="mathcomp.classical.functions.html#val_finset">val_finset</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof90')">Proof.</span></div>
<div class="proofscript" id="proof90">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span>; <span class="id">apply</span>/<span class="id">val_inj</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="val_finsetK">val_finsetK</a></span> {<span class="id">T</span> : <span class="id">choiceType</span>} {<span class="id">X</span> : {<span class="id">fset</span> <span class="id">T</span>}} :<br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#cancel">cancel</a></span> (@<span class="id"><a href="mathcomp.classical.functions.html#val_finset">val_finset</a></span> <span class="id">T</span> <span class="id">X</span>) <span class="id"><a href="mathcomp.classical.functions.html#finset_val">finset_val</a></span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof91')">Proof.</span></div>
<div class="proofscript" id="proof91">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span>; <span class="id">apply</span>/<span class="id">val_inj</span>. Qed.</div>
<br/>
<span class="id"><a name="hb_instance_1072">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span>  {<span class="id">T</span> : <span class="id">choiceType</span>} {<span class="id">X</span> : {<span class="id">fset</span> <span class="id">T</span>}} :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">Can2.Build</a></span> <span class="id">X</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#finset_val">finset_val</a></span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">I</a></span>) (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">I</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in1W">in1W</a></span> <span class="id"><a href="mathcomp.classical.functions.html#finset_valK">finset_valK</a></span>) (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in1W">in1W</a></span> <span class="id"><a href="mathcomp.classical.functions.html#val_finsetK">val_finsetK</a></span>).<br/>
<span class="id"><a name="hb_instance_1089">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span>  {<span class="id">T</span> : <span class="id">choiceType</span>} {<span class="id">X</span> : {<span class="id">fset</span> <span class="id">T</span>}} :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">Can2.Build</a></span> <span class="id">_</span> <span class="id">X</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.classical.functions.html#val_finset">val_finset</a></span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">I</a></span>) (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">I</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in1W">in1W</a></span> <span class="id"><a href="mathcomp.classical.functions.html#val_finsetK">val_finsetK</a></span>) (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in1W">in1W</a></span> <span class="id"><a href="mathcomp.classical.functions.html#finset_valK">finset_valK</a></span>).<br/>
<br/>
<pre class="ssrdoc">
'I_n and `I_n 
</pre>
<br/>
<span class="id"><a name="hb_instance_1106">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">n</span> := <span class="id"><a href="mathcomp.classical.functions.html#Build">Can2.Build</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> (@<span class="id"><a href="mathcomp.classical.classical_sets.html#ordII">ordII</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">I</a></span>) (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">I</a></span>) (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in1W">in1W</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#ordIIK">ordIIK</a></span>) (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in1W">in1W</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#IIordK">IIordK</a></span>).<br/>
<span class="id"><a name="hb_instance_1123">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">n</span> := <span class="id"><a href="mathcomp.classical.functions.html#copy">SplitBij.copy</a></span> (@<span class="id"><a href="mathcomp.classical.classical_sets.html#IIord">IIord</a></span> <span class="id">n</span>) (<span class="id"><a href="mathcomp.classical.classical_sets.html#ordII">ordII</a></span>^-1).<br/>
<br/>
<pre class="ssrdoc">
Glueing 
</pre>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="glue">glue</a></span> {<span class="id">T</span> <span class="id">T</span>'} {<span class="id">X</span> <span class="id">Y</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>} {<span class="id">A</span> <span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>'}<br/>
&nbsp;&nbsp;<span class="id">of</span> [<span class="id">disjoint</span> <span class="id">X</span> &amp; <span class="id">Y</span>] &amp; [<span class="id">disjoint</span> <span class="id">A</span> &amp; <span class="id">B</span>] :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> (<span class="id">f</span> <span class="id">g</span> : <span class="id">T</span> -&gt; <span class="id">T</span>') (<span class="id">u</span> : <span class="id">T</span>) =&gt; <span class="kwd">if</span> <span class="id">u</span> \<span class="kwd">in</span> <span class="id">X</span> <span class="kwd">then</span> <span class="id">f</span> <span class="id">u</span> <span class="kwd">else</span> <span class="id">g</span> <span class="id">u</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Glue12">Glue12</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">T</span> <span class="id">T</span>'} {<span class="id">X</span> <span class="id">Y</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>} {<span class="id">A</span> <span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>'}.<br/>
<span class="kwd">Context</span> {<span class="id">XY</span> : [<span class="id">disjoint</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue12.X">X</a></span> &amp; <span class="id"><a href="mathcomp.classical.functions.html#Glue12.Y">Y</a></span>]} {<span class="id">AB</span> : [<span class="id">disjoint</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue12.A">A</a></span> &amp; <span class="id"><a href="mathcomp.classical.functions.html#Glue12.B">B</a></span>]}.<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="gl">gl</a></span> := (<span class="id"><a href="mathcomp.classical.functions.html#glue">glue</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Glue12.XY">XY</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Glue12.AB">AB</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="glue1">glue1</a></span> (<span class="id">f</span> <span class="id">g</span> : <span class="id"><a href="mathcomp.classical.functions.html#Glue12.T">T</a></span> -&gt; <span class="id">T</span>') : {<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue12.X">X</a></span>, <span class="id"><a href="mathcomp.classical.functions.html#gl">gl</a></span> <span class="id">f</span> <span class="id">g</span> =1 <span class="id">f</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof92')">Proof.</span></div>
<div class="proofscript" id="proof92">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.functions.html#glue">glue</a></span> =&gt; -&gt;. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="glue2">glue2</a></span> (<span class="id">f</span> <span class="id">g</span> : <span class="id"><a href="mathcomp.classical.functions.html#Glue12.T">T</a></span> -&gt; <span class="id">T</span>') : {<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue12.Y">Y</a></span>, <span class="id"><a href="mathcomp.classical.functions.html#gl">gl</a></span> <span class="id">f</span> <span class="id">g</span> =1 <span class="id">g</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof93')">Proof.</span></div>
<div class="proofscript" id="proof93">
<span class="id">move</span>=&gt; <span class="id">x</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#set_mem">set_mem</a></span> <span class="id">Yx</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.functions.html#glue">glue</a></span>; <span class="id">case</span>: <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#ifPn">ifPn</a></span> =&gt; // /<span class="id"><a href="mathcomp.classical.classical_sets.html#set_mem">set_mem</a></span> <span class="id">Xx</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>: <span class="id"><a href="mathcomp.classical.functions.html#Glue12.XY">XY</a></span> =&gt; /<span class="id"><a href="mathcomp.classical.classical_sets.html#disj_setPS">disj_setPS</a></span>/(<span class="id">_</span> <span class="id">x</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#conj">conj</a></span> <span class="id">Xx</span> <span class="id">Yx</span>)).<br/>
Qed.</div>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue12">Glue12</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Glue">Glue</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">T</span> <span class="id">T</span>'} {<span class="id">X</span> <span class="id">Y</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>} {<span class="id">A</span> <span class="id">B</span> : <span class="id"><a href="mathcomp.classical.classical_sets.html#set">set</a></span> <span class="id">T</span>'}.<br/>
<span class="kwd">Context</span> {<span class="id">XY</span> : [<span class="id">disjoint</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.X">X</a></span> &amp; <span class="id"><a href="mathcomp.classical.functions.html#Glue.Y">Y</a></span>]} {<span class="id">AB</span> : [<span class="id">disjoint</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.A">A</a></span> &amp; <span class="id"><a href="mathcomp.classical.functions.html#Glue.B">B</a></span>]}.<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id"><a name="gl">gl</a></span> := (<span class="id"><a href="mathcomp.classical.functions.html#glue">glue</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.XY">XY</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.AB">AB</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="glue_fun_subproof">glue_fun_subproof</a></span> (<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.X">X</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Glue.A">A</a></span>}) (<span class="id">g</span> : {<span class="kwd">fun</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.Y">Y</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Glue.B">B</a></span>}) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#isFun">isFun</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.T">T</a></span> <span class="id">T</span>' (<span class="id"><a href="mathcomp.classical.functions.html#Glue.X">X</a></span> `|` <span class="id"><a href="mathcomp.classical.functions.html#Glue.Y">Y</a></span>) (<span class="id"><a href="mathcomp.classical.functions.html#Glue.A">A</a></span> `|` <span class="id"><a href="mathcomp.classical.functions.html#Glue.B">B</a></span>) (<span class="id"><a href="mathcomp.classical.functions.html#gl">gl</a></span> <span class="id">f</span> <span class="id">g</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof94')">Proof.</span></div>
<div class="proofscript" id="proof94">
<span class="kwd">by</span> <span class="id">split</span>=&gt; <span class="id">x</span> []<span class="id">xP</span>; [<span class="id">left</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#glue1">glue1</a></span>|<span class="id">right</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#glue2">glue2</a></span>];<br/>
&nbsp;&nbsp;&nbsp;<span class="id">rewrite</span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>//; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#funS">funS</a></span>.<br/>
Qed.</div>
<span class="id"><a name="Glue.hb_instance_1140">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">f</span> <span class="id">g</span> := <span class="id"><a href="mathcomp.classical.functions.html#glue_fun_subproof">glue_fun_subproof</a></span> <span class="id">f</span> <span class="id">g</span>.<br/>
<br/>
<span class="id"><a name="Glue.hb_instance_1143">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> <span class="id">g</span> : {<span class="id">oinv</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.T">T</a></span> &gt;-&gt; <span class="id">T</span>'}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">OInv.Build</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.classical.functions.html#gl">gl</a></span> <span class="id">f</span> <span class="id">g</span>) (<span class="id"><a href="mathcomp.classical.functions.html#glue">glue</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.AB">AB</a></span> (<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#eqbRL">eqbRL</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#disj_set_some">disj_set_some</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.XY">XY</a></span>) '<span class="id">oinv_f</span> '<span class="id">oinv_g</span>).<br/>
<br/>
<span class="id"><a name="Glue.hb_instance_1146">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span>  (<span class="id">f</span> : {<span class="id">oinvfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.X">X</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Glue.A">A</a></span>}) (<span class="id">g</span> : {<span class="id">oinvfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.Y">Y</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Glue.B">B</a></span>}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#on">OInversible.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#gl">gl</a></span> <span class="id">f</span> <span class="id">g</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="oinv_glue">oinv_glue</a></span> (<span class="id">f</span> : {<span class="id">oinv</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.T">T</a></span> &gt;-&gt; <span class="id">T</span>'}) (<span class="id">g</span> : {<span class="id">oinv</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.T">T</a></span> &gt;-&gt; <span class="id">T</span>'}) :<br/>
&nbsp;&nbsp;'<span class="id">oinv_</span>(<span class="id"><a href="mathcomp.classical.functions.html#gl">gl</a></span> <span class="id">f</span> <span class="id">g</span>) = <span class="id"><a href="mathcomp.classical.functions.html#glue">glue</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.AB">AB</a></span> (<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#eqbRL">eqbRL</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#disj_set_some">disj_set_some</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.XY">XY</a></span>) '<span class="id">oinv_f</span> '<span class="id">oinv_g</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof95')">Proof.</span></div>
<div class="proofscript" id="proof95">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="some_inv_glue_subproof">some_inv_glue_subproof</a></span> (<span class="id">f</span> <span class="id">g</span> : {<span class="id">inv</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.T">T</a></span> &gt;-&gt; <span class="id">T</span>'}) :<br/>
&nbsp;&nbsp;<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">some</a></span> \<span class="id">o</span> (<span class="id"><a href="mathcomp.classical.functions.html#glue">glue</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.AB">AB</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.XY">XY</a></span> <span class="id">f</span>^-1 <span class="id">g</span>^-1) = '<span class="id">oinv_</span>(<span class="id"><a href="mathcomp.classical.functions.html#gl">gl</a></span> <span class="id">f</span> <span class="id">g</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof96')">Proof.</span></div>
<div class="proofscript" id="proof96">
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id"><a href="mathcomp.classical.boolp.html#funext">funext</a></span> =&gt; <span class="id">y</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#oinv_glue">oinv_glue</a></span> /<span class="id"><a href="mathcomp.classical.functions.html#glue">glue</a></span> /= [<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssrmatching.ssrmatching.html#SsrMatchingSyntax.LHS">LHS</a></span>]<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#fun_if">fun_if</a></span> !<span class="id"><a href="mathcomp.classical.functions.html#some_inv">some_inv</a></span>.<br/>
Qed.</div>
<br/>
<span class="id"><a name="Glue.hb_instance_1150">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> <span class="id">g</span> : {<span class="id">inv</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.T">T</a></span> &gt;-&gt; <span class="id">T</span>'}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#Build">OInv_Inv.Build</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.T">T</a></span> <span class="id">T</span>' (<span class="id"><a href="mathcomp.classical.functions.html#gl">gl</a></span> <span class="id">f</span> <span class="id">g</span>) (<span class="id"><a href="mathcomp.classical.functions.html#some_inv_glue_subproof">some_inv_glue_subproof</a></span> <span class="id">f</span> <span class="id">g</span>).<br/>
<br/>
<span class="id"><a name="Glue.hb_instance_1153">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">invfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.X">X</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Glue.A">A</a></span>}) (<span class="id">g</span> : {<span class="id">invfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.Y">Y</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Glue.B">B</a></span>}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#on">Inversible.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#gl">gl</a></span> <span class="id">f</span> <span class="id">g</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inv_glue">inv_glue</a></span> (<span class="id">f</span> : {<span class="id">invfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.X">X</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Glue.A">A</a></span>}) (<span class="id">g</span> : {<span class="id">invfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.Y">Y</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Glue.B">B</a></span>}) :<br/>
&nbsp;&nbsp;(<span class="id"><a href="mathcomp.classical.functions.html#gl">gl</a></span> <span class="id">f</span> <span class="id">g</span>)^-1 = <span class="id"><a href="mathcomp.classical.functions.html#glue">glue</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.AB">AB</a></span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.XY">XY</a></span> <span class="id">f</span>^-1 <span class="id">g</span>^-1.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof97')">Proof.</span></div>
<div class="proofscript" id="proof97">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="glueo_can_subproof">glueo_can_subproof</a></span> (<span class="id">f</span> : {<span class="id">injfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.X">X</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Glue.A">A</a></span>}) (<span class="id">g</span> : {<span class="id">injfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.Y">Y</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Glue.B">B</a></span>}) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#OInv_Can">OInv_Can</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.classical.functions.html#Glue.X">X</a></span> `|` <span class="id"><a href="mathcomp.classical.functions.html#Glue.Y">Y</a></span>) (<span class="id"><a href="mathcomp.classical.functions.html#gl">gl</a></span> <span class="id">f</span> <span class="id">g</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof98')">Proof.</span></div>
<div class="proofscript" id="proof98">
<span class="id">split</span>=&gt; <span class="id">x</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span> =&gt; -[] <span class="id">xP</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#oinv_glue">oinv_glue</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> [<span class="id"><a href="mathcomp.classical.functions.html#glue">glue</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">x</span>]<span class="id"><a href="mathcomp.classical.functions.html#glue1">glue1</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>// <span class="id"><a href="mathcomp.classical.functions.html#glue1">glue1</a></span> ?<span class="id"><a href="mathcomp.classical.functions.html#funoK">funoK</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>//; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#funS">funS</a></span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> [<span class="id"><a href="mathcomp.classical.functions.html#glue">glue</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">x</span>]<span class="id"><a href="mathcomp.classical.functions.html#glue2">glue2</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>// <span class="id"><a href="mathcomp.classical.functions.html#glue2">glue2</a></span> ?<span class="id"><a href="mathcomp.classical.functions.html#funoK">funoK</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>//; <span class="id">apply</span>: <span class="id"><a href="mathcomp.classical.functions.html#funS">funS</a></span>.<br/>
Qed.</div>
<span class="id"><a name="Glue.hb_instance_1159">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">f</span> <span class="id">g</span> := <span class="id"><a href="mathcomp.classical.functions.html#glueo_can_subproof">glueo_can_subproof</a></span> <span class="id">f</span> <span class="id">g</span>.<br/>
<br/>
<span class="id"><a name="Glue.hb_instance_1162">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitinjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.X">X</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Glue.A">A</a></span>})<br/>
&nbsp;&nbsp;(<span class="id">g</span> : {<span class="id">splitinjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.Y">Y</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Glue.B">B</a></span>}) := <span class="id"><a href="mathcomp.classical.functions.html#on">Inject.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#gl">gl</a></span> <span class="id">f</span> <span class="id">g</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="glue_canv_subproof">glue_canv_subproof</a></span> (<span class="id">f</span> : {<span class="id">surj</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.X">X</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Glue.A">A</a></span>}) (<span class="id">g</span> : {<span class="id">surj</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.Y">Y</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Glue.B">B</a></span>}) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#OInv_CanV">OInv_CanV</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.classical.functions.html#Glue.X">X</a></span> `|` <span class="id"><a href="mathcomp.classical.functions.html#Glue.Y">Y</a></span>) (<span class="id"><a href="mathcomp.classical.functions.html#Glue.A">A</a></span> `|` <span class="id"><a href="mathcomp.classical.functions.html#Glue.B">B</a></span>) (<span class="id"><a href="mathcomp.classical.functions.html#gl">gl</a></span> <span class="id">f</span> <span class="id">g</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof99')">Proof.</span></div>
<div class="proofscript" id="proof99">
<span class="id">split</span>=&gt; [<span class="id">z</span>|<span class="id">y</span> /<span class="id"><a href="mathcomp.classical.classical_sets.html#set_mem">set_mem</a></span> [] <span class="id">yP</span>]; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#oinv_glue">oinv_glue</a></span>.<br/>
- <span class="kwd">by</span> <span class="id">move</span>=&gt; [] <span class="id">zP</span> /=; [<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#glue1">glue1</a></span>|<span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#glue2">glue2</a></span>]; <span class="id">rewrite</span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>//;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">case</span>: <span class="id"><a href="mathcomp.classical.functions.html#oinvP">oinvP</a></span>=&gt; // <span class="id">x</span> <span class="id">xX</span> <span class="id">_</span>; <span class="kwd">exists</span> <span class="id">x</span> =&gt; //; [<span class="id">left</span>|<span class="id">right</span>].<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#glue1">glue1</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>//; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.functions.html#oinvP">oinvP</a></span>=&gt; //= <span class="id">x</span> <span class="id">xX</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#glue1">glue1</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>.<br/>
- <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#glue2">glue2</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>//; <span class="id">case</span>: <span class="id"><a href="mathcomp.classical.functions.html#oinvP">oinvP</a></span>=&gt; //= <span class="id">x</span> <span class="id">xX</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#glue2">glue2</a></span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">inE</a></span>.<br/>
Qed.</div>
<span class="id"><a name="Glue.hb_instance_1168">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id">f</span> <span class="id">g</span> := <span class="id"><a href="mathcomp.classical.functions.html#glue_canv_subproof">glue_canv_subproof</a></span> <span class="id">f</span> <span class="id">g</span>.<br/>
<span class="id"><a name="Glue.hb_instance_1171">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">surjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.X">X</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Glue.A">A</a></span>}) (<span class="id">g</span> : {<span class="id">surjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.Y">Y</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Glue.B">B</a></span>}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#gl">gl</a></span> <span class="id">f</span> <span class="id">g</span>).<br/>
<span class="id"><a name="Glue.hb_instance_1177">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitsurj</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.X">X</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Glue.A">A</a></span>}) (<span class="id">g</span> : {<span class="id">splitsurj</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.Y">Y</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Glue.B">B</a></span>}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#gl">gl</a></span> <span class="id">f</span> <span class="id">g</span>).<br/>
<span class="id"><a name="Glue.hb_instance_1183">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitsurjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.X">X</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Glue.A">A</a></span>}) (<span class="id">g</span> : {<span class="id">splitsurjfun</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.Y">Y</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Glue.B">B</a></span>}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#gl">gl</a></span> <span class="id">f</span> <span class="id">g</span>).<br/>
<span class="id"><a name="Glue.hb_instance_1189">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">bij</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.X">X</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Glue.A">A</a></span>}) (<span class="id">g</span> : {<span class="id">bij</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.Y">Y</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Glue.B">B</a></span>}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#gl">gl</a></span> <span class="id">f</span> <span class="id">g</span>).<br/>
<span class="id"><a name="Glue.hb_instance_1195">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitbij</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.X">X</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Glue.A">A</a></span>}) (<span class="id">g</span> : {<span class="id">splitbij</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue.Y">Y</a></span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#Glue.B">B</a></span>}) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#on">Surject.on</a></span> (<span class="id"><a href="mathcomp.classical.functions.html#gl">gl</a></span> <span class="id">f</span> <span class="id">g</span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#Glue">Glue</a></span>.<br/>
<br/>
<pre class="ssrdoc">
Z-module addition is a bijection 
</pre>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="addition">addition</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">V</span> : <span class="id">zmodType</span>} (<span class="id">x</span> : <span class="id">V</span>).<br/>
<br/>
<span class="id"><a name="HB_unnamed_factory_1201">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Build">Inv.Build</a></span> <span class="id"><a href="mathcomp.classical.functions.html#addition.V">V</a></span> <span class="id"><a href="mathcomp.classical.functions.html#addition.V">V</a></span> (+%<span class="id">R</span> <span class="id"><a href="mathcomp.classical.functions.html#addition.x">x</a></span>) (+%<span class="id">R</span> (- <span class="id"><a href="mathcomp.classical.functions.html#addition.x">x</a></span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inv_addr">inv_addr</a></span> : (+%<span class="id">R</span> <span class="id"><a href="mathcomp.classical.functions.html#addition.x">x</a></span>)^-1 = (+%<span class="id">R</span> (- <span class="id"><a href="mathcomp.classical.functions.html#addition.x">x</a></span>))<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof100')">Proof.</span></div>
<div class="proofscript" id="proof100">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="addr_can2_subproof">addr_can2_subproof</a></span> : <span class="id"><a href="mathcomp.classical.functions.html#Inv_Can2">Inv_Can2</a></span> <span class="id"><a href="mathcomp.classical.functions.html#addition.V">V</a></span> <span class="id"><a href="mathcomp.classical.functions.html#addition.V">V</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">setT</a></span> (+%<span class="id">R</span> <span class="id"><a href="mathcomp.classical.functions.html#addition.x">x</a></span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof101')">Proof.</span></div>
<div class="proofscript" id="proof101">
 <span class="kwd">by</span> <span class="id">split</span> =&gt; // <span class="id">y</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.functions.html#inv_addr">inv_addr</a></span> ?<span class="id">GRing.addKr</span> ?<span class="id">GRing.addNKr</span>. Qed.</div>
<span class="id"><a name="HB_unnamed_factory_1208">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#addr_can2_subproof">addr_can2_subproof</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="mathcomp.classical.functions.html#addition">addition</a></span>.<br/>
<br/>
<pre class="ssrdoc">
Z-module opposite is a bijection 
</pre>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="addition">addition</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">V</span> : <span class="id">zmodType</span>} (<span class="id">x</span> : <span class="id">V</span>).<br/>
<br/>
<span class="id"><a name="HB_unnamed_factory_1218">HB.instance</a></span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id"><a href="mathcomp.classical.functions.html#Build">Inv.Build</a></span> <span class="id"><a href="mathcomp.classical.functions.html#addition.V">V</a></span> <span class="id"><a href="mathcomp.classical.functions.html#addition.V">V</a></span> (-%<span class="id">R</span>) (-%<span class="id">R</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inv_oppr">inv_oppr</a></span> : (-%<span class="id">R</span>)^-1 = (-%<span class="id">R</span>)<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof102')">Proof.</span></div>
<div class="proofscript" id="proof102">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">oppr_can2_subproof</span> : <span class="id">Inv_Can2</span> <span class="id">V</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">V</a></span> <span class="id">setT</span> <span class="id">setT</span> (-%<span class="id">R</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof103')">Proof.</span></div>
<div class="proofscript" id="proof103">
 <span class="kwd">by</span> <span class="id">split</span> =&gt; // <span class="id">y</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">inv_oppr</span> ?<span class="id">GRing.opprK</span>. Qed.</div>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">oppr_can2_subproof</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">addition</span>.<br/>
<br/>
<pre class="ssrdoc">
emtpyType 
</pre>
<br/>
<span class="kwd">Section</span> <span class="id">empty</span>.<br/>
<span class="kwd">Context</span> {<span class="id">T</span> : <span class="id">emptyType</span>} {<span class="id">T</span>' : <span class="kwd">Type</span>} {<span class="id">X</span> : <span class="id">set</span> <span class="id">T</span>}.<br/>
<span class="kwd">Implicit</span> <span class="kwd">Type</span> <span class="id">Y</span> : <span class="id">set</span> <span class="id">T</span>'.<br/>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">OInv.Build</span> <span class="id">_</span> <span class="id">_</span> (@<span class="id">any</span> <span class="id">T</span> <span class="id">T</span>') (<span class="kwd">fun</span>=&gt; <span class="id">None</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">empty_can_subproof</span> : <span class="id">OInv_Can</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#any">T</a></span> <span class="id">T</span>' <span class="id">X</span> <span class="id">any</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof104')">Proof.</span></div>
<div class="proofscript" id="proof104">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; <span class="id">x</span>; <span class="id">rewrite</span> <span class="id">empty_eq0</span> <span class="id">inE</span>. Qed.</div>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">empty_can_subproof</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">empty_fun_subproof</span> <span class="id">Y</span> : <span class="id">isFun</span> <span class="id">T</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#any">T</a></span>' <span class="id">X</span> <span class="id">Y</span> <span class="id">any</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof105')">Proof.</span></div>
<div class="proofscript" id="proof105">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; <span class="id">x</span>; <span class="id">rewrite</span> <span class="id">empty_eq0</span>. Qed.</div>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id"><a href="mathcomp.classical.functions.html#empty_fun_subproof">_</a></span> <span class="id">Y</span> := <span class="id">empty_fun_subproof</span> <span class="id">Y</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">empty_canv_subproof</span> : <span class="id">OInv_CanV</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">T</a></span> <span class="id">T</span>' <span class="id"><a href="mathcomp.classical.classical_sets.html#any">X</a></span> <span class="id">set0</span> <span class="id">any</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof106')">Proof.</span></div>
<div class="proofscript" id="proof106">
 <span class="kwd">by</span> <span class="id">split</span>. Qed.</div>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">empty_canv_subproof</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">empty</span>.<br/>
<br/>
<pre class="ssrdoc">
Theory of surjection 
</pre>
<br/>
<span class="kwd">Section</span> <span class="id">surj_lemmas</span>.<br/>
<span class="kwd">Variables</span> <span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id">set</span> <span class="id">rT</span>) (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">surj_id</span> <span class="id">A</span> : <span class="id">set_surj</span> <span class="id">A</span> <span class="id">A</span> (@<span class="id">idfun</span> <span class="id">aT</span>)<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof107')">Proof.</span></div>
<div class="proofscript" id="proof107">
 <span class="id"><a href="mathcomp.classical.functions.html#surj">exact</a></span>: <span class="id">surj</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">surj_set0</span> <span class="id">B</span> <span class="id">f</span> : <span class="id">set_surj</span> <span class="id">set0</span> <span class="id">B</span> <span class="id">f</span> -&gt; <span class="id">B</span> = <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof108')">Proof.</span></div>
<div class="proofscript" id="proof108">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">Bf</span>; <span class="id">rewrite</span> <span class="id">predeqE</span> =&gt; <span class="id">u</span>; <span class="id">split</span> =&gt; // /<span class="id">Bf</span> [<span class="id">t</span> []]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">surjE</span> <span class="id">f</span> <span class="id">A</span> <span class="id">B</span> : <span class="id">set_surj</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> = (<span class="id">B</span> `&lt;=` <span class="id">f</span> @` <span class="id">A</span>)<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof109')">Proof.</span></div>
<div class="proofscript" id="proof109">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">surj_image_eq</span> <span class="id">B</span> <span class="id">A</span> <span class="id">f</span> : <span class="id">f</span> @` <span class="id">A</span> `&lt;=` <span class="id">B</span> -&gt; <span class="id">set_surj</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> -&gt; <span class="id">f</span> @` <span class="id">A</span> = <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof110')">Proof.</span></div>
<div class="proofscript" id="proof110">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">fAB</span>; <span class="id">rewrite</span> <span class="id">eqEsubset</span> =&gt; <span class="id">BfA</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subl_surj</span> <span class="id">A</span> <span class="id">A</span>' <span class="id">B</span> <span class="id">f</span> : <span class="id">A</span> `&lt;=` <span class="id">A</span>' -&gt; <span class="id">set_surj</span> <span class="id">A</span> <span class="id"><a href="mathcomp.classical.functions.html#set_surj">B</a></span> <span class="id">f</span> -&gt; <span class="id">set_surj</span> <span class="id">A</span>' <span class="id">B</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof111')">Proof.</span></div>
<div class="proofscript" id="proof111">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /(@<span class="id">image_subset</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>)/(<span class="id">subset_trans</span> <span class="id">_</span>); <span class="id">apply</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">subr_surj</span> <span class="id">A</span> <span class="id">B</span> <span class="id">B</span>' <span class="id">f</span> : <span class="id">B</span>' `&lt;=` <span class="id">B</span> -&gt; <span class="id">set_surj</span> <span class="id">A</span> <span class="id"><a href="mathcomp.classical.functions.html#set_surj">B</a></span> <span class="id">f</span> -&gt; <span class="id">set_surj</span> <span class="id">A</span> <span class="id">B</span>' <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof112')">Proof.</span></div>
<div class="proofscript" id="proof112">
 <span class="id"><a href="mathcomp.classical.classical_sets.html#subset_trans">exact</a></span>: <span class="id">subset_trans</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">can_surj</span> <span class="id">g</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">f</a></span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id">set</span> <span class="id">rT</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="kwd">in</span> <span class="id">B</span>, <span class="id">cancel</span> <span class="id">g</span> <span class="id">f</span>} -&gt; <span class="id">g</span> @` <span class="id">B</span> `&lt;=` <span class="id"><a href="mathcomp.classical.functions.html#set_surj">A</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">set_surj</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof113')">Proof.</span></div>
<div class="proofscript" id="proof113">
<span class="id">move</span>=&gt; <span class="id">gK</span> <span class="id">gBA</span> <span class="id">y</span> <span class="id">By</span>; <span class="id">suff</span> : <span class="id">A</span> (<span class="id">g</span> <span class="id">y</span>) <span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">g</span> <span class="id">y</span>); <span class="id">rewrite</span> ?<span class="id">gK</span> ?<span class="id">inE</span>.<br/>
<span class="kwd">by</span> <span class="id">have</span> := <span class="id">image_subP</span>.1 <span class="id">gBA</span> <span class="id">y</span>; <span class="id">apply</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">surj_epi</span> <span class="id">sT</span> <span class="id">A</span> <span class="id"><a href="mathcomp.classical.functions.html#surj_lemmas.aT">B</a></span> (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) (<span class="id"><a href="mathcomp.classical.functions.html#surj_lemmas.rT">g</a></span> <span class="id">g</span>' : <span class="id">rT</span> -&gt; <span class="id">sT</span>) :<br/>
&nbsp;&nbsp;<span class="id">set_surj</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> -&gt; {<span class="kwd">in</span> <span class="id">A</span>, <span class="id">g</span> \<span class="id">o</span> <span class="id">f</span> =1 <span class="id">g</span>' \<span class="id">o</span> <span class="id">f</span>} -&gt; {<span class="kwd">in</span> <span class="id">B</span>, <span class="id">g</span> =1 <span class="id">g</span>'}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof114')">Proof.</span></div>
<div class="proofscript" id="proof114">
<span class="id">move</span>=&gt; <span class="id">fS</span> <span class="id">eqfg</span> <span class="id">y</span> /<span class="id">set_mem</span> <span class="id">By</span>; <span class="id">suff</span>: <span class="id">B</span> `&lt;=` [<span class="id">set</span> <span class="id">y</span> | <span class="id">g</span> <span class="id">y</span> = <span class="id">g</span>' <span class="id">y</span>] <span class="kwd">by</span> <span class="id">exact</span>.<br/>
<span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#subset_trans">apply</a></span>: <span class="id">subset_trans</span> <span class="id">fS</span> <span class="id">_</span> =&gt; <span class="id">_</span> [<span class="id">a</span> /<span class="id">mem_set</span> <span class="id">Aa</span> &lt;-] /=; <span class="id">rewrite</span> [<span class="id">LHS</span>]<span class="id">eqfg</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">epiP</span> <span class="id">A</span> <span class="id"><a href="mathcomp.classical.functions.html#surj_lemmas.aT">B</a></span> (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) : <span class="id">set_surj</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> &lt;-&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sT</span> (<span class="id"><a href="mathcomp.classical.functions.html#surj_lemmas.rT">g</a></span> <span class="id">g</span>' : <span class="id">rT</span> -&gt; <span class="id">sT</span>), {<span class="kwd">in</span> <span class="id">A</span>, <span class="id">g</span> \<span class="id">o</span> <span class="id">f</span> =1 <span class="id">g</span>' \<span class="id">o</span> <span class="id">f</span>} -&gt; {<span class="kwd">in</span> <span class="id">B</span>, <span class="id">g</span> =1 <span class="id">g</span>'}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof115')">Proof.</span></div>
<div class="proofscript" id="proof115">
<span class="id">split</span>=&gt; [*| <span class="id">f_epi</span> <span class="id">y</span> <span class="id">By</span>]; <span class="id">first</span> <span class="id">exact</span>: (@<span class="id">surj_epi</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>).<br/>
<span class="id">have</span> -&gt; // := <span class="id">f_epi</span> <span class="id">_</span> [<span class="id">set</span> <span class="id">f</span> <span class="id">x</span> | <span class="id">x</span> <span class="kwd">in</span> <span class="id">A</span>] <span class="id">setT</span>; <span class="id">last</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#mem_set">exact</a></span>: <span class="id">mem_set</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">x</span> /<span class="id">set_mem</span> <span class="id">xA</span>; <span class="id">apply</span>/<span class="id">propT</span>; <span class="kwd">exists</span> <span class="id">x</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">surj_lemmas</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">can_surj</span> {<span class="id">aT</span> <span class="id">rT</span>} <span class="id">g</span> [<span class="id">f</span> <span class="id">A</span> <span class="id">B</span>].<br/>
<span class="kwd">Arguments</span> <span class="id">surj_epi</span> {<span class="id">aT</span> <span class="id">rT</span> <span class="id">sT</span>} <span class="id">A</span> {<span class="id">B</span>} <span class="id">f</span> {<span class="id">g</span>}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">surj_comp</span> <span class="id">T1</span> <span class="id">T2</span> <span class="id">T3</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T1</span>) (<span class="id">B</span> : <span class="id">set</span> <span class="id">T2</span>) (<span class="id">C</span> : <span class="id">set</span> <span class="id">T3</span>) <span class="id"><a href="mathcomp.classical.functions.html#set_surj">f</a></span> <span class="id">g</span>:<br/>
&nbsp;&nbsp;<span class="id">set_surj</span> <span class="id">A</span> <span class="id"><a href="mathcomp.classical.functions.html#set_surj">B</a></span> <span class="id">f</span> -&gt; <span class="id">set_surj</span> <span class="id">B</span> <span class="id"><a href="mathcomp.classical.functions.html#set_surj">C</a></span> <span class="id">g</span> -&gt; <span class="id">set_surj</span> <span class="id">A</span> <span class="id">C</span> (<span class="id">g</span> \<span class="id">o</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof116')">Proof.</span></div>
<div class="proofscript" id="proof116">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">fS</span> <span class="id">gS</span>; <span class="id">apply</span>: '<span class="id">surj_</span>(<span class="id">gS</span> \<span class="id">o</span> <span class="id">fS</span>). Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">image_eq</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id">set</span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id">set</span> <span class="id">rT</span>} (<span class="id">f</span> : {<span class="id">surjfun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) : <span class="id">f</span> @` <span class="id">A</span> = <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof117')">Proof.</span></div>
<div class="proofscript" id="proof117">
 <span class="id"><a href="mathcomp.classical.functions.html#surj_image_eq">exact</a></span>: <span class="id">surj_image_eq</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">oinv_image_sub</span> {<span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>} {<span class="id">A</span> : <span class="id">set</span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id">set</span> <span class="id">rT</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> : {<span class="id">surj</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) {<span class="id">C</span> : <span class="id">set</span> <span class="id">rT</span>} :<br/>
&nbsp;&nbsp;<span class="id">C</span> `&lt;=` <span class="id">B</span> -&gt; '<span class="id">oinv_f</span> @` <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">C</a></span> `&lt;=` <span class="id">some</span> @` (<span class="id">f</span> @^-1` <span class="id">C</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof118')">Proof.</span></div>
<div class="proofscript" id="proof118">
<span class="id">move</span>=&gt; <span class="id">CB</span> <span class="id">x</span> [/= <span class="id">y</span> <span class="id">Cy</span> &lt;-]; <span class="id">case</span>: '<span class="id">oinvP_f</span> =&gt; [|<span class="id">a</span> <span class="id">Aa</span> <span class="id">fay</span>]; <span class="id">first</span> <span class="id">exact</span>: <span class="id">CB</span>.<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">a</span> =&gt; //; <span class="id">rewrite</span> <span class="id">fay</span>.<br/>
Qed.</div>
<span class="kwd">Arguments</span> <span class="id">oinv_image_sub</span> {<span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span> <span class="id">B</span>} <span class="id">f</span> {<span class="id">C</span>} <span class="id">_</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">oinv_Iimage_sub</span> {<span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>} {<span class="id">A</span> : <span class="id">set</span> <span class="id">aT</span>} (<span class="id">f</span> : {<span class="id">inj</span> <span class="id">A</span> &gt;-&gt; <span class="id">rT</span>}) {<span class="id">C</span> : <span class="id">set</span> <span class="id">rT</span>} :<br/>
&nbsp;&nbsp;<span class="id">C</span> `&lt;=` <span class="id">f</span> @` <span class="id">A</span> -&gt; <span class="id">some</span> @` (<span class="id">A</span> `&amp;` <span class="id">f</span> @^-1` <span class="id">C</span>) `&lt;=` '<span class="id">oinv_f</span> @` <span class="id">C</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof119')">Proof.</span></div>
<div class="proofscript" id="proof119">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; ? <span class="id">_</span> [<span class="id">a</span> [? ?] &lt;-]; <span class="kwd">exists</span> (<span class="id">f</span> <span class="id">a</span>) =&gt; //; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">funoK</a></span> ?<span class="id">inE</span>. Qed.</div>
<span class="kwd">Arguments</span> <span class="id">oinv_Iimage_sub</span> {<span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span>} <span class="id">f</span> {<span class="id">C</span>} <span class="id">_</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">oinv_sub_image</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id">set</span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id">set</span> <span class="id">rT</span>} {<span class="id">f</span> : {<span class="id">bij</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}}<br/>
&nbsp;&nbsp;&nbsp;{<span class="id">C</span> : <span class="id">set</span> <span class="id">rT</span>} (<span class="id">CB</span> : <span class="id">C</span> `&lt;=` <span class="id">B</span>) : '<span class="id">oinv_f</span> @` <span class="id">C</span> = <span class="id">some</span> @` (<span class="id">A</span> `&amp;` <span class="id">f</span> @^-1` <span class="id">C</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof120')">Proof.</span></div>
<div class="proofscript" id="proof120">
<span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.functions.html#oinv_Iimage_sub">apply</a></span>: <span class="id">oinv_Iimage_sub</span>; <span class="id">rewrite</span> <span class="id">image_eq</span>.<br/>
<span class="id">rewrite</span> <span class="id">some_setI</span> <span class="id">subsetI</span>; <span class="id">split</span>; <span class="id">last</span> <span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.functions.html#oinv_image_sub">apply</a></span>: <span class="id">oinv_image_sub</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: (<span class="id">subset_trans</span> (<span class="id">image_subset</span> <span class="id">CB</span>)); <span class="id">rewrite</span> <span class="id">image_eq</span>.<br/>
Qed.</div>
<span class="kwd">Arguments</span> <span class="id">oinv_sub_image</span> {<span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span> <span class="id">B</span>} <span class="id">f</span> {<span class="id">C</span>} <span class="id">_</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimageEoinv</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">B</span> : <span class="id">set</span> <span class="id">rT</span>} {<span class="id">f</span> : {<span class="id">bij</span> [<span class="id">set</span>: <span class="id">aT</span>] &gt;-&gt; <span class="id">B</span>}}<br/>
&nbsp;&nbsp;&nbsp;{<span class="id">C</span> : <span class="id">set</span> <span class="id">rT</span>} (<span class="id">CB</span> : <span class="id">C</span> `&lt;=` <span class="id">B</span>) : <span class="id">some</span> @` (<span class="id">f</span> @^-1` <span class="id">C</span>) = '<span class="id">oinv_f</span> @` <span class="id">C</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof121')">Proof.</span></div>
<div class="proofscript" id="proof121">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">oinv_sub_image</span>// <span class="id">setTI</span>. Qed.</div>
<span class="kwd">Arguments</span> <span class="id">preimageEoinv</span> {<span class="id">aT</span> <span class="id">rT</span> <span class="id">B</span>} <span class="id">f</span> {<span class="id">C</span>} <span class="id">_</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">inv_image_sub</span> {<span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>} {<span class="id">A</span> : <span class="id">set</span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id">set</span> <span class="id">rT</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> : {<span class="id">splitsurj</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) {<span class="id">C</span> : <span class="id">set</span> <span class="id">rT</span>} :<br/>
&nbsp;&nbsp;<span class="id">C</span> `&lt;=` <span class="id">B</span> -&gt; <span class="id">f</span>^-1 @` <span class="id">C</span> `&lt;=` <span class="id">f</span> @^-1` <span class="id">C</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof122')">Proof.</span></div>
<div class="proofscript" id="proof122">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">CB</span> <span class="id">x</span> [/= <span class="id">y</span> <span class="id">Cy</span> &lt;-]; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#mem_set">invK</a></span>// <span class="id">mem_set</span>//; <span class="id">apply</span>: <span class="id">CB</span>. Qed.</div>
<span class="kwd">Arguments</span> <span class="id">inv_image_sub</span> {<span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span> <span class="id">B</span>} <span class="id">f</span> {<span class="id">C</span>} <span class="id">_</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">inv_Iimage_sub</span> {<span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>} {<span class="id">A</span> : <span class="id">set</span> <span class="id">aT</span>} (<span class="id">f</span> : {<span class="id">splitinj</span> <span class="id">A</span> &gt;-&gt; <span class="id">rT</span>}) {<span class="id">C</span> : <span class="id">set</span> <span class="id">rT</span>} :<br/>
&nbsp;&nbsp;<span class="id">C</span> `&lt;=` <span class="id">f</span> @` <span class="id">A</span> -&gt;  <span class="id">A</span> `&amp;` <span class="id">f</span> @^-1` <span class="id">C</span> `&lt;=` <span class="id">f</span>^-1 @` <span class="id">C</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof123')">Proof.</span></div>
<div class="proofscript" id="proof123">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">CB</span> <span class="id">x</span> [<span class="id">Ax</span> <span class="id">Cfx</span>]; <span class="kwd">exists</span> (<span class="id">f</span> <span class="id">x</span>) =&gt; //; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#mem_set">funK</a></span>// <span class="id">mem_set</span>. Qed.</div>
<span class="kwd">Arguments</span> <span class="id">inv_Iimage_sub</span> {<span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span>} <span class="id">f</span> {<span class="id">C</span>} <span class="id">_</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">inv_sub_image</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id">set</span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id">set</span> <span class="id">rT</span>} {<span class="id">f</span> : {<span class="id">splitbij</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">C</span> : <span class="id">set</span> <span class="id">rT</span>} (<span class="id">CB</span> : <span class="id">C</span> `&lt;=` <span class="id">B</span>) :<br/>
&nbsp;&nbsp;<span class="id">f</span>^-1 @` <span class="id">C</span> = <span class="id">A</span> `&amp;` <span class="id">f</span> @^-1` <span class="id">C</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof124')">Proof.</span></div>
<div class="proofscript" id="proof124">
<span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#image_some_inj">apply</a></span>: <span class="id">image_some_inj</span>; <span class="id">rewrite</span> <span class="id">image_comp</span> [<span class="id">Some</span> \<span class="id">o</span> <span class="id">_</span>]<span class="id"><a href="mathcomp.classical.functions.html#oinv_sub_image">oliftV</a></span> <span class="id">oinv_sub_image</span>.<br/>
Qed.</div>
<span class="kwd">Arguments</span> <span class="id">inv_sub_image</span> {<span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span> <span class="id">B</span>} <span class="id">f</span> {<span class="id">C</span>} <span class="id">_</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimageEinv</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">B</span> : <span class="id">set</span> <span class="id">rT</span>} {<span class="id">f</span> : {<span class="id">splitbij</span> [<span class="id">set</span>: <span class="id">aT</span>] &gt;-&gt; <span class="id">B</span>}}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">C</span> : <span class="id">set</span> <span class="id">rT</span>} (<span class="id">CB</span> : <span class="id">C</span> `&lt;=` <span class="id">B</span>) : <span class="id">f</span> @^-1` <span class="id">C</span> = <span class="id">f</span>^-1 @` <span class="id">C</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof125')">Proof.</span></div>
<div class="proofscript" id="proof125">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">inv_sub_image</span>// <span class="id">setTI</span>. Qed.</div>
<span class="kwd">Arguments</span> <span class="id">preimageEinv</span> {<span class="id">aT</span> <span class="id">rT</span> <span class="id">B</span>} <span class="id">f</span> {<span class="id">C</span>} <span class="id">_</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">reindex_bigcup</span> {<span class="id">aT</span> <span class="id">rT</span> <span class="id">I</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">I</span>) (<span class="id">P</span> : <span class="id">set</span> <span class="id">aT</span>) (<span class="id">Q</span> : <span class="id">set</span> <span class="id">I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">rT</span>) : <span class="id">set_fun</span> <span class="id">P</span> <span class="id"><a href="mathcomp.classical.functions.html#set_surj">Q</a></span> <span class="id">f</span> -&gt; <span class="id">set_surj</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">f</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">x</span> <span class="kwd">in</span> <span class="id">Q</span>) <span class="id">F</span> <span class="id">x</span> = \<span class="id">bigcup_</span>(<span class="id">x</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> (<span class="id">f</span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof126')">Proof.</span></div>
<div class="proofscript" id="proof126">
<span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">image_subP</span> <span class="id">fPQ</span> /(<span class="id">surj_image_eq</span> <span class="id">fPQ</span>)&lt;-; <span class="id">rewrite</span> <span class="id">bigcup_image</span>.<br/>
Qed.</div>
<span class="kwd">Arguments</span> <span class="id">reindex_bigcup</span> {<span class="id">aT</span> <span class="id">rT</span> <span class="id">I</span>} <span class="id">f</span> <span class="id">P</span> <span class="id">Q</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">reindex_bigcap</span> {<span class="id">aT</span> <span class="id">rT</span> <span class="id">I</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">I</span>) (<span class="id">P</span> : <span class="id">set</span> <span class="id">aT</span>) (<span class="id">Q</span> : <span class="id">set</span> <span class="id">I</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">rT</span>) : <span class="id">set_fun</span> <span class="id">P</span> <span class="id"><a href="mathcomp.classical.functions.html#set_surj">Q</a></span> <span class="id">f</span> -&gt; <span class="id">set_surj</span> <span class="id">P</span> <span class="id">Q</span> <span class="id">f</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">bigcap_</span>(<span class="id">x</span> <span class="kwd">in</span> <span class="id">Q</span>) <span class="id">F</span> <span class="id">x</span> = \<span class="id">bigcap_</span>(<span class="id">x</span> <span class="kwd">in</span> <span class="id">P</span>) <span class="id">F</span> (<span class="id">f</span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof127')">Proof.</span></div>
<div class="proofscript" id="proof127">
<span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">image_subP</span> <span class="id">fPQ</span> /(<span class="id">surj_image_eq</span> <span class="id">fPQ</span>)&lt;-; <span class="id">rewrite</span> <span class="id">bigcap_image</span>.<br/>
Qed.</div>
<span class="kwd">Arguments</span> <span class="id">reindex_bigcap</span> {<span class="id">aT</span> <span class="id">rT</span> <span class="id">I</span>} <span class="id">f</span> <span class="id">P</span> <span class="id">Q</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">bigcap_bigcup</span> <span class="id">T</span> <span class="id">I</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">J</a></span> (<span class="id">D</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">E</span> : <span class="id">set</span> <span class="id">J</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">J</span> -&gt; <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;<span class="id">J</span> -&gt;<br/>
&nbsp;&nbsp;\<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">D</span>) \<span class="id">bigcup_</span>(<span class="id">j</span> <span class="kwd">in</span> <span class="id">E</span>) <span class="id">F</span> <span class="id">i</span> <span class="id">j</span> =<br/>
&nbsp;&nbsp;\<span class="id">bigcup_</span>(<span class="id">f</span> <span class="kwd">in</span> <span class="id">set_fun</span> <span class="id">D</span> <span class="id">E</span>) \<span class="id">bigcap_</span>(<span class="id">i</span> <span class="kwd">in</span> <span class="id">D</span>) <span class="id">F</span> <span class="id">i</span> (<span class="id">f</span> <span class="id">i</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof128')">Proof.</span></div>
<div class="proofscript" id="proof128">
<span class="id">move</span>=&gt; <span class="id">j</span>; <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>=&gt; <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; /(<span class="id"><a href="mathcomp.classical.boolp.html#cid2">_</a></span> <span class="id">_</span> <span class="id">_</span>)/<span class="id">cid2</span> <span class="id">ff</span>.<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.mathcomp_extra.html#all_sig2_cond">have</a></span> /(<span class="id">all_sig2_cond</span> <span class="id">j</span>) (<span class="id">i</span> : <span class="id">I</span>) : <span class="id">i</span> \<span class="kwd">in</span> <span class="id">D</span> -&gt; {<span class="id">x0</span> : <span class="id">J</span> | <span class="id">E</span> <span class="id">x0</span> &amp; <span class="id">F</span> <span class="id">i</span> <span class="id">x0</span> <span class="id">x</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">set_mem</span>; <span class="id">apply</span>: <span class="id">ff</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">f</span> /(<span class="id">_</span> <span class="id">_</span> (<span class="id">mem_set</span> <span class="id">_</span>))<span class="id">Ef</span> /(<span class="id">_</span> <span class="id">_</span> (<span class="id">mem_set</span> <span class="id">_</span>))<span class="id">Ff</span>]; <span class="kwd">exists</span> <span class="id">f</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; [<span class="id">f</span> <span class="id">fDE</span> <span class="id">fF</span> <span class="id">i</span> <span class="id">Fi</span>]; <span class="kwd">exists</span> (<span class="id">f</span> <span class="id">i</span>); [<span class="id">apply</span>: <span class="id">fDE</span>|<span class="id">apply</span>: <span class="id">fF</span>].<br/>
Qed.</div>
<br/>
<pre class="ssrdoc">
Injections 
</pre>
<br/>
<span class="kwd">Lemma</span> <span class="id">trivIset_inj</span> <span class="id">T</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">I</a></span> (<span class="id">D</span> : <span class="id">set</span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id">D</span> <span class="id">i</span> -&gt; <span class="id">F</span> <span class="id">i</span> !=<span class="id">set0</span>) -&gt; <span class="id">trivIset</span> <span class="id"><a href="mathcomp.classical.functions.html#set_inj">D</a></span> <span class="id">F</span> -&gt; <span class="id">set_inj</span> <span class="id">D</span> <span class="id">F</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof129')">Proof.</span></div>
<div class="proofscript" id="proof129">
<span class="id">move</span>=&gt; <span class="id">FN0</span> <span class="id">Ftriv</span> <span class="id">i</span> <span class="id">j</span>; <span class="id">rewrite</span> !<span class="id">inE</span> =&gt; <span class="id">Di</span> <span class="id">Dj</span> <span class="id">Fij</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">Ftriv</span> <span class="id">Di</span> (<span class="id">Dj</span>) <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">Fij</span> <span class="id">setIid</span>; <span class="id">apply</span>: <span class="id">FN0</span>.<br/>
Qed.</div>
<br/>
<pre class="ssrdoc">
Bijections 
</pre>
<br/>
<span class="kwd">Section</span> <span class="id">set_bij_lemmas</span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>} {<span class="id">A</span> : <span class="id">set</span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id">set</span> <span class="id">rT</span>} {<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>}.<br/>
<span class="kwd">Definition</span> <span class="id">fun_set_bij</span> <span class="id">of</span> <span class="id">set_bij</span> <span class="id">A</span> <span class="id"><a href="mathcomp.classical.functions.html#set_bij_lemmas.f">B</a></span> <span class="id">f</span> := <span class="id">f</span>.<br/>
<span class="kwd">Context</span> (<span class="id"><a href="mathcomp.classical.functions.html#set_bij">fbij</a></span> : <span class="id">set_bij</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>).<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id">g</span> := (<span class="id">fun_set_bij</span> <span class="id">fbij</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_bij_inj</span> : {<span class="kwd">in</span> <span class="id">A</span> &amp;, <span class="id">injective</span> <span class="id">f</span>}<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof130')">Proof.</span></div>
<div class="proofscript" id="proof130">
 <span class="kwd">by</span> <span class="id">case</span>: <span class="id">fbij</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_bij_homo</span> : {<span class="id">homo</span> <span class="id">f</span> : <span class="id">x</span> / <span class="id">A</span> <span class="id">x</span> &gt;-&gt; <span class="id">B</span> <span class="id">x</span>}<br/>
<div>&nbsp;<span class="toggleproof" onclick="toggleDisplay('proof131')">Proof.</span></div>
<div class="proofscript" id="proof131">
 <span class="kwd">by</span> <span class="id">case</span>: <span class="id">fbij</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_bij_sub</span> : <span class="id">f</span> @` <span class="id"><a href="mathcomp.classical.functions.html#set_bij_lemmas.B">A</a></span> `&lt;=` <span class="id">B</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof132')">Proof.</span></div>
<div class="proofscript" id="proof132">
 <span class="id">exact</span>/<span class="id">image_subP</span>/<span class="id">set_bij_homo</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_bij_surj</span> : <span class="id">set_surj</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span><br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof133')">Proof.</span></div>
<div class="proofscript" id="proof133">
 <span class="kwd">by</span> <span class="id">case</span>: <span class="id">fbij</span>. Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> : <span class="id">OCanV</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#set_bij_surj">_</a></span> <span class="id">g</span> := <span class="id">set_bij_surj</span>.<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">isFun.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">g</span> <span class="id">set_bij_homo</span>.<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">SurjFun_Inj.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id">B</span> <span class="id">g</span> <span class="id">set_bij_inj</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">set_bij_lemmas</span>.<br/>
<span class="kwd">Coercion</span> <span class="id">fun_set_bij</span> : <span class="id">set_bij</span> &gt;-&gt; <span class="id">Funclass</span>.<br/>
<br/>
<span class="kwd">Coercion</span> <span class="id">set_bij_bijfun</span> <span class="id">aT</span> <span class="id">rT</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id">set</span> <span class="id">rT</span>) (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fS</span> : <span class="id">set_bij</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>) := <span class="id">Bij.on</span> (<span class="id">fun_set_bij</span> <span class="id">fS</span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id">Pbij</span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id">set</span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id">set</span> <span class="id">rT</span>} {<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>} (<span class="id"><a href="mathcomp.classical.functions.html#set_bij">fbij</a></span> : <span class="id">set_bij</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>).<br/>
#[<span class="id">local</span>] <span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> : @<span class="id">Bij</span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span> <span class="id"><a href="mathcomp.classical.functions.html#Pbij.fbij">B</a></span> <span class="id">f</span> := <span class="id">fbij</span>.<br/>
<span class="kwd">Definition</span> <span class="id">bij_of_set_bijection</span> := [<span class="id"><a href="mathcomp.classical.functions.html#Pbij.f">bij</a></span> <span class="id">of</span> <span class="id">f</span>].<br/>
<span class="kwd">Lemma</span> <span class="id">Pbij</span> : {<span class="id">s</span> : {<span class="id">bij</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>} | <span class="id">f</span> = <span class="id">s</span>}<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof134')">Proof.</span></div>
<div class="proofscript" id="proof134">
 <span class="kwd">by</span> <span class="kwd">exists</span> [<span class="id"><a href="mathcomp.classical.functions.html#Pbij.f">bij</a></span> <span class="id">of</span> <span class="id">f</span>]. Qed.</div>
<span class="kwd">End</span> <span class="id">Pbij</span>.<br/>
<span class="kwd">Coercion</span> <span class="id">bij_of_set_bijection</span> : <span class="id">set_bij</span> &gt;-&gt; <span class="id">Bij.type</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">bij</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> : <span class="id">set</span> <span class="id">aT</span>} {<span class="id">B</span> : <span class="id">set</span> <span class="id">rT</span>} {<span class="id">f</span> : {<span class="id">bij</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}} : <span class="id">set_bij</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof135')">Proof.</span></div>
<div class="proofscript" id="proof135">
 <span class="id">split</span>=&gt; //. Qed.</div>
<span class="kwd">Definition</span> <span class="id">phant_bij</span> <span class="id">aT</span> <span class="id">rT</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id">set</span> <span class="id">rT</span>) (<span class="id">f</span> : {<span class="id">bij</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) <span class="id">of</span><br/>
&nbsp;&nbsp;<span class="id">phantom</span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span> := @<span class="id">bij</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>.<br/>
<span class="kwd">Notation</span> "''<span class="id">bij_</span>' <span class="id"><a href="mathcomp.classical.functions.html#phant_bij">f</a></span>" := (<span class="id">phant_bij</span> (<span class="id">Phantom</span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span>)) : <span class="id">form_scope</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">set_bij</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) =&gt; <span class="id">solve</span> [<span class="id"><a href="mathcomp.classical.functions.html#bij">apply</a></span>: <span class="id">bij</span>] : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">PbijTT</span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>} (<span class="id">fbijTT</span> : <span class="id">bijective</span> <span class="id">f</span>).<br/>
#[<span class="id">local</span>] <span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := @<span class="id">BijTT.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span> <span class="id">fbijTT</span>.<br/>
<span class="kwd">Definition</span> <span class="id">bijection_of_bijective</span> := [<span class="id">splitbij</span> <span class="id">of</span> <span class="id">f</span>].<br/>
<span class="kwd">Lemma</span> <span class="id">PbijTT</span> : {<span class="id">s</span> : {<span class="id">splitbij</span> [<span class="id">set</span>: <span class="id">aT</span>] &gt;-&gt; [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#PbijTT.f">rT</a></span>]} | <span class="id">f</span> = <span class="id">s</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof136')">Proof.</span></div>
<div class="proofscript" id="proof136">
 <span class="kwd">by</span> <span class="kwd">exists</span> [<span class="id">splitbij</span> <span class="id">of</span> <span class="id">f</span>]. Qed.</div>
<span class="kwd">End</span> <span class="id">PbijTT</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">setTT_bijective</span> <span class="id">aT</span> <span class="id">rT</span> (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) :<br/>
&nbsp;&nbsp;<span class="id">set_bij</span> [<span class="id">set</span>: <span class="id">aT</span>] [<span class="id">set</span>: <span class="id">rT</span>] <span class="id">f</span> = <span class="id">bijective</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof137')">Proof.</span></div>
<div class="proofscript" id="proof137">
<span class="id">apply</span>/<span class="id">propext</span>; <span class="id">split</span>=&gt; [[]|/<span class="id">PbijTT</span>[{}<span class="id">f</span> -&gt;]].<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">_</span> <span class="id">fI</span> /(<span class="id">_</span> <span class="id">_</span> <span class="id">I</span>)-/(<span class="id">_</span> <span class="id">_</span>)/<span class="id">cid2</span>-/<span class="id">all_sig2</span>[<span class="id">g</span> <span class="id">_</span> <span class="id">gK</span>].<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">g</span> =&gt; // <span class="id">x</span>; <span class="id">apply</span>: <span class="id">fI</span>; <span class="id">rewrite</span> ?<span class="id">inE</span>.<br/>
<span class="kwd">by</span> <span class="id">split</span>=&gt; // [<span class="id">x</span> <span class="id">y</span> <span class="id">_</span> <span class="id">_</span> /'<span class="id">inj_f</span>//|<span class="id">y</span> <span class="id">_</span>]; <span class="kwd">exists</span> (<span class="id">f</span>^-1 <span class="id">y</span>) =&gt; //; <span class="id">rewrite</span> <span class="id">funK</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bijTT</span> {<span class="id">aT</span> <span class="id">rT</span>}  {<span class="id">f</span> : {<span class="id">bij</span> [<span class="id">set</span>: <span class="id">aT</span>] &gt;-&gt; [<span class="id">set</span>: <span class="id">rT</span>]}} : <span class="id">bijective</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof138')">Proof.</span></div>
<div class="proofscript" id="proof138">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">setTT_bijective</span>. Qed.</div>
<span class="kwd">Definition</span> <span class="id">phant_bijTT</span> <span class="id">aT</span> <span class="id">rT</span> (<span class="id">f</span> : {<span class="id">bij</span> [<span class="id">set</span>: <span class="id">aT</span>] &gt;-&gt; [<span class="id">set</span>: <span class="id">rT</span>]})<br/>
&nbsp;&nbsp;&nbsp;<span class="id">of</span> <span class="id">phantom</span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span> := @<span class="id">bijTT</span> <span class="id">_</span> <span class="id">_</span> <span class="id">f</span>.<br/>
<span class="kwd">Notation</span> "''<span class="id">bijTT_</span>'  <span class="id"><a href="mathcomp.classical.functions.html#phant_bijTT">f</a></span>" := (<span class="id">phant_bijTT</span> (<span class="id">Phantom</span> (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="id">f</span>)) : <span class="id">form_scope</span>.<br/>
#[<span class="id">global</span>] <span class="kwd">Hint</span> <span class="id">Extern</span> 0 (<span class="id">bijective</span> <span class="id">_</span>) =&gt; <span class="id">solve</span> [<span class="id"><a href="mathcomp.classical.functions.html#bijTT">apply</a></span>: <span class="id">bijTT</span>] : <span class="id">core</span>.<br/>
<br/>
<pre class="ssrdoc">
Patching and restrictions 
</pre>
<br/>
<span class="kwd">Section</span> <span class="id">patch</span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>} (<span class="id">d</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) (<span class="id">A</span> : <span class="id">set</span> <span class="id">aT</span>).<br/>
<span class="kwd">Definition</span> <span class="id">patch</span> (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">u</span> := <span class="kwd">if</span> <span class="id">u</span> \<span class="kwd">in</span> <span class="id">A</span> <span class="kwd">then</span> <span class="id">f</span> <span class="id"><a href="mathcomp.classical.functions.html#patch.d">u</a></span> <span class="kwd">else</span> <span class="id">d</span> <span class="id">u</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">patchT</span> <span class="id">f</span> : {<span class="kwd">in</span> <span class="id">A</span>, <span class="id">patch</span> <span class="id">f</span> =1 <span class="id">f</span>}<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof139')">Proof.</span></div>
<div class="proofscript" id="proof139">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">patch</span> =&gt; <span class="id">x</span> -&gt;. Qed.</div>
<span class="kwd">Lemma</span> <span class="id">patchN</span> <span class="id">f</span> : {<span class="kwd">in</span> [<span class="id">predC</span> <span class="id">A</span>], <span class="id">patch</span> <span class="id">f</span> =1 <span class="id">d</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof140')">Proof.</span></div>
<div class="proofscript" id="proof140">
 <span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">patch</span> =&gt; <span class="id">x</span> /<span class="id">negPf</span>/= -&gt;. Qed.</div>
<span class="kwd">Lemma</span> <span class="id">patchC</span> <span class="id">f</span> : {<span class="kwd">in</span> ~` <span class="id">A</span>, <span class="id">patch</span> <span class="id">f</span> =1 <span class="id">d</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof141')">Proof.</span></div>
<div class="proofscript" id="proof141">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">u</span> /<span class="id">set_mem</span>/= <span class="id">NAu</span>; <span class="id">rewrite</span> <span class="id">patchN</span> ?<span class="id"><a href="mathcomp.classical.classical_sets.html#notin_set">inE</a></span>//= <span class="id">notin_set</span>. Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#copy">f</a></span> :=<br/>
&nbsp;&nbsp;<span class="id">SurjFun.copy</span> (<span class="id">patch</span> <span class="id">f</span>) [<span class="kwd">fun</span> <span class="id">patch</span> <span class="id">f</span> <span class="kwd">in</span> <span class="id">A</span>].<br/>
<br/>
<span class="kwd">Section</span> <span class="id">inj</span>.<br/>
<span class="kwd">Context</span> (<span class="id">f</span> : {<span class="id">inj</span> <span class="id">A</span> &gt;-&gt; <span class="id">rT</span>}).<br/>
<span class="kwd">Let</span> <span class="id">g</span> := <span class="id">patch</span> <span class="id">f</span>.<br/>
<span class="kwd">Lemma</span> <span class="id">patch_inj_subproof</span> : <span class="id"><a href="mathcomp.classical.functions.html#patch.rT">Inj</a></span> <span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span> <span class="id">g</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof142')">Proof.</span></div>
<div class="proofscript" id="proof142">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; <span class="id">x</span> <span class="id">y</span> <span class="id">xA</span> <span class="id">yA</span>; <span class="id">rewrite</span> /<span class="id">g</span> !<span class="id">patchT</span>//; <span class="id"><a href="mathcomp.classical.functions.html#inj">apply</a></span>: <span class="id">inj</span>. Qed.</div>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">patch_inj_subproof</span>.<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">Inject.copy</span> (<span class="id">patch</span> <span class="id">f</span>) [<span class="kwd">fun</span> <span class="id">g</span> <span class="kwd">in</span> <span class="id">A</span>].<br/>
<span class="kwd">End</span> <span class="id">inj</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">patch</span>.<br/>
<span class="kwd">Notation</span> <span class="id">restrict</span> := (<span class="id">patch</span> (<span class="kwd">fun</span>=&gt; <span class="id">point</span>)).<br/>
<span class="kwd">Notation</span> "<span class="id">f</span> \<span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#restrict">D</a></span>" := (<span class="id">restrict</span> <span class="id">D</span> <span class="id">f</span>) : <span class="id">fun_scope</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">patchE</span> <span class="id">aT</span> (<span class="id">rT</span> : <span class="id">pointedType</span>) (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) (<span class="id">B</span> : <span class="id">set</span> <span class="id">aT</span>) <span class="id">x</span> :<br/>
&nbsp;&nbsp;(<span class="id">f</span> \<span class="id">_</span> <span class="id">B</span>) <span class="id">x</span> = <span class="kwd">if</span> <span class="id">x</span> \<span class="kwd">in</span> <span class="id">B</span> <span class="kwd">then</span> <span class="id">f</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#point">x</a></span> <span class="kwd">else</span> <span class="id">point</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof143')">Proof.</span></div>
<div class="proofscript" id="proof143">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">patch_pred</span> {<span class="id">I</span> <span class="id">T</span>} (<span class="id">D</span> : {<span class="id">pred</span> <span class="id">I</span>}) (<span class="id">d</span> <span class="id">f</span> : <span class="id">I</span> -&gt; <span class="id"><a href="mathcomp.classical.functions.html#patch">T</a></span>) :<br/>
&nbsp;&nbsp;<span class="id">patch</span> <span class="id">d</span> <span class="id">D</span> <span class="id">f</span> = <span class="kwd">fun</span> <span class="id">i</span> =&gt; <span class="kwd">if</span> <span class="id">D</span> <span class="id">i</span> <span class="kwd">then</span> <span class="id">f</span> <span class="id">i</span> <span class="kwd">else</span> <span class="id">d</span> <span class="id">i</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof144')">Proof.</span></div>
<div class="proofscript" id="proof144">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">i</span>; <span class="id">rewrite</span> /<span class="id">patch</span> <span class="id">mem_setE</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_restrict</span> (<span class="id">aT</span> : <span class="kwd">Type</span>) (<span class="id">rT</span> : <span class="id">pointedType</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) (<span class="id">D</span> : <span class="id">set</span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id">set</span> <span class="id">rT</span>) :<br/>
&nbsp;&nbsp;(<span class="id">f</span> \<span class="id">_</span> <span class="id">D</span>) @^-1` <span class="id">B</span> = (<span class="kwd">if</span> <span class="id">point</span> \<span class="kwd">in</span> <span class="id">B</span> <span class="kwd">then</span> ~` <span class="id"><a href="mathcomp.classical.classical_sets.html#set0">D</a></span> <span class="kwd">else</span> <span class="id">set0</span>) `|` <span class="id">D</span> `&amp;` <span class="id">f</span> @^-1` <span class="id">B</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof145')">Proof.</span></div>
<div class="proofscript" id="proof145">
<span class="id">rewrite</span> /<span class="id">preimage</span>/= /<span class="id">patch</span>; <span class="id">apply</span>/<span class="id">predeqP</span> =&gt; <span class="id">x</span> /=; <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="id">case</span>: <span class="id">ifPn</span>; <span class="id">rewrite</span> ?(<span class="id">inE</span>, <span class="id">notin_set</span>); <span class="id">first</span> <span class="kwd">by</span> <span class="id">right</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">NDx</span> <span class="id">Bp</span>; <span class="id">rewrite</span> <span class="id">ifT</span> ?<span class="id">inE</span>//=; <span class="id">left</span>.<br/>
<span class="id">move</span>=&gt; [|[<span class="id">Dx</span> <span class="id">Bfx</span>]]; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">ifT</span> ?<span class="id">inE</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id">ifP</span>; <span class="id">rewrite</span> // <span class="id">inE</span> =&gt; <span class="id">Bp</span> <span class="id">NDx</span>; <span class="id">case</span>: <span class="id">ifPn</span>; <span class="id">rewrite</span> // <span class="id">inE</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">comp_patch</span> {<span class="id">aT</span> <span class="id">rT</span> <span class="id">sT</span> : <span class="kwd">Type</span>} (<span class="id">g</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">D</span> (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) (<span class="id">h</span> : <span class="id">rT</span> -&gt; <span class="id">sT</span>) :<br/>
&nbsp;&nbsp;<span class="id">h</span> \<span class="id">o</span> <span class="id">patch</span> <span class="id">g</span> <span class="id">D</span> <span class="id">f</span> = <span class="id">patch</span> (<span class="id">h</span> \<span class="id">o</span> <span class="id">g</span>) <span class="id">D</span> (<span class="id">h</span> \<span class="id">o</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof146')">Proof.</span></div>
<div class="proofscript" id="proof146">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">x</span>; <span class="id">rewrite</span> /<span class="id">patch</span>/=; <span class="id">case</span>: <span class="id">ifP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">patch_setI</span> {<span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>} (<span class="id">g</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">D</span> <span class="id">D</span>' (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) :<br/>
&nbsp;&nbsp;&nbsp;<span class="id">patch</span> <span class="id">g</span> (<span class="id">D</span> `&amp;` <span class="id">D</span>') <span class="id">f</span> = <span class="id">patch</span> <span class="id">g</span> <span class="id">D</span> (<span class="id">patch</span> <span class="id">g</span> <span class="id">D</span>' <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof147')">Proof.</span></div>
<div class="proofscript" id="proof147">
<span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">x</span>; <span class="id">rewrite</span> /<span class="id">patch</span>/= <span class="id">in_setI</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>: (<span class="id">x</span> \<span class="kwd">in</span> <span class="id">D</span>) (<span class="id">x</span> \<span class="kwd">in</span> <span class="id">D</span>') =&gt; [] [].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">patch_set0</span> {<span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>} (<span class="id">g</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) :<br/>
&nbsp;&nbsp;<span class="id">patch</span> <span class="id">g</span> <span class="id">set0</span> <span class="id">f</span> = <span class="id">g</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof148')">Proof.</span></div>
<div class="proofscript" id="proof148">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">x</span>; <span class="id">rewrite</span> /<span class="id">patch</span> <span class="id">in_set0</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">patch_setT</span> {<span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>} (<span class="id">g</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) :<br/>
&nbsp;&nbsp;<span class="id">patch</span> <span class="id">g</span> <span class="id">setT</span> <span class="id">f</span> = <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof149')">Proof.</span></div>
<div class="proofscript" id="proof149">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">x</span>; <span class="id">rewrite</span> /<span class="id">patch</span> <span class="id">in_setT</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">restrict_comp</span> {<span class="id">aT</span>} {<span class="id">rT</span> <span class="id">sT</span> : <span class="id">pointedType</span>} (<span class="id">h</span> : <span class="id">rT</span> -&gt; <span class="id">sT</span>) (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) <span class="id">D</span> :<br/>
&nbsp;&nbsp;<span class="id">h</span> <span class="id">point</span> = <span class="id">point</span> -&gt; (<span class="id">h</span> \<span class="id">o</span> <span class="id">f</span>) \<span class="id">_</span> <span class="id">D</span> = <span class="id">h</span> \<span class="id">o</span> (<span class="id">f</span> \<span class="id">_</span> <span class="id">D</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof150')">Proof.</span></div>
<div class="proofscript" id="proof150">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">hp</span>; <span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">x</span>; <span class="id">rewrite</span> /<span class="id">patch</span>/=; <span class="id">case</span>: <span class="id">ifP</span>. Qed.</div>
<span class="kwd">Arguments</span> <span class="id">restrict_comp</span> {<span class="id">aT</span> <span class="id">rT</span> <span class="id">sT</span>} <span class="id">h</span> <span class="id">f</span> <span class="id">D</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">trivIset_restr</span> (<span class="id">T</span> <span class="id">I</span> : <span class="kwd">Type</span>) (<span class="id"><a href="mathcomp.classical.classical_sets.html#set">D</a></span> <span class="id">D</span>' : <span class="id">set</span> <span class="id">I</span>) (<span class="id">F</span> : <span class="id">I</span> -&gt; <span class="id">set</span> <span class="id">T</span>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">trivIset</span> <span class="id">D</span>' (<span class="id">F</span> \<span class="id"><a href="mathcomp.classical.classical_sets.html#trivIset">_</a></span> <span class="id">D</span>) = <span class="id">trivIset</span> (<span class="id">D</span> `&amp;` <span class="id">D</span>') <span class="id">F</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof151')">Proof.</span></div>
<div class="proofscript" id="proof151">
<span class="id">apply</span>/<span class="id">propext</span>; <span class="id">split</span>=&gt; <span class="id">FDtriv</span> <span class="id">i</span> <span class="id">j</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; [<span class="id">Di</span> <span class="id">D</span>'<span class="id">i</span>] [<span class="id">Dj</span> <span class="id">D</span>'<span class="id">j</span>] [<span class="id">x</span> [<span class="id">Fix</span> <span class="id">Fjx</span>]]; <span class="id">apply</span>: <span class="id">FDtriv</span> =&gt; //.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="kwd">exists</span> <span class="id">x</span>; <span class="id">split</span> =&gt; /=; <span class="id">rewrite</span> ?<span class="id">patchT</span> ?<span class="id">in_setE</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">D</span>'<span class="id">i</span> <span class="id">D</span>'<span class="id">j</span> [<span class="id">x</span> []]; <span class="id">rewrite</span> /<span class="id">patch</span>.<br/>
<span class="id">do</span> 2![<span class="id">case</span>: <span class="id">ifPn</span> =&gt; //]; <span class="id">rewrite</span> !<span class="id">in_setE</span> =&gt; <span class="id">Di</span> <span class="id">Dj</span> <span class="id">Fix</span> <span class="id">Fjx</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">FDtriv</span> =&gt; //; <span class="kwd">exists</span> <span class="id">x</span>.<br/>
Qed.</div>
<br/>
<br/>
<pre class="ssrdoc">
Restriction of domain and codomain 
</pre>
<br/>
<span class="kwd">Section</span> <span class="id">RestrictionLeft</span>.<br/>
<span class="kwd">Context</span> {<span class="id">U</span> <span class="id">V</span> : <span class="kwd">Type</span>} (<span class="id">v</span> : <span class="id">V</span>) {<span class="id">A</span> : <span class="id">set</span> <span class="id">U</span>} {<span class="id">B</span> : <span class="id">set</span> <span class="id">V</span>}.<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id">restrict</span> := (<span class="id">patch</span> (<span class="kwd">fun</span>=&gt; <span class="id">v</span>) <span class="id">A</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">sigL</span> (<span class="id">f</span> : <span class="id">U</span> -&gt; <span class="id">V</span>) : <span class="id">A</span> -&gt; <span class="id">V</span> := <span class="id">f</span> \<span class="id">o</span> <span class="id">set_val</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigL_isfun</span> (<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) : <span class="id">isFun</span> <span class="id">_</span> <span class="id">_</span> [<span class="id">set</span>: <span class="id">A</span>] <span class="id">B</span> (<span class="id">sigL</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof152')">Proof.</span></div>
<div class="proofscript" id="proof152">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; <span class="id">x</span> <span class="id">_</span>; <span class="id"><a href="mathcomp.classical.functions.html#funS">apply</a></span>: <span class="id">funS</span>. Qed.</div>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id">A</span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#sigL_isfun">B</a></span>}) := <span class="id">sigL_isfun</span> <span class="id">f</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">sigLfun</span> (<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) := [<span class="kwd">fun</span> <span class="id">of</span> <span class="id">sigL</span> <span class="id">f</span>].<br/>
<span class="kwd">Definition</span> <span class="id">valL_</span> (<span class="id">f</span> : <span class="id">A</span> -&gt; <span class="id">V</span>) : <span class="id">U</span> -&gt; <span class="id">V</span> := ((@<span class="id">oapp</span> <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeft.v">_</a></span> <span class="id">_</span>)^~ <span class="id">v</span>) <span class="id">f</span> \<span class="id">o</span> '<span class="id">oinv_set_val</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">valL_isfun</span> (<span class="id">f</span> : {<span class="kwd">fun</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeft.B">A</a></span>] &gt;-&gt; <span class="id">B</span>}) :<br/>
&nbsp;&nbsp;<span class="id">isFun</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#valL_">_</a></span> <span class="id">A</span> <span class="id">B</span> (<span class="id">valL_</span> (<span class="id">f</span> : <span class="id">_</span> -&gt; <span class="id">_</span>)).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof153')">Proof.</span></div>
<div class="proofscript" id="proof153">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; <span class="id">x</span> <span class="id">Ax</span>; <span class="id"><a href="mathcomp.classical.functions.html#funS">apply</a></span>: <span class="id">funS</span>. Qed.</div>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="kwd">fun</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeft.B">A</a></span>] &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#valL_isfun">B</a></span>}) := <span class="id">valL_isfun</span> <span class="id">f</span>.<br/>
<span class="kwd">Definition</span> <span class="id">valLfun_</span> (<span class="id">f</span> : {<span class="kwd">fun</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeft.B">A</a></span>] &gt;-&gt; <span class="id">B</span>}) := [<span class="kwd">fun</span> <span class="id">of</span> <span class="id">valL_</span> <span class="id">f</span>].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigLE</span> (<span class="id">f</span> : <span class="id">U</span> -&gt; <span class="id">V</span>) <span class="id">x</span> (<span class="id">xA</span> : <span class="id">x</span> \<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.functions.html#sigL">A</a></span>) :<br/>
&nbsp;&nbsp;<span class="id">sigL</span> <span class="id">f</span> (<span class="id">SigSub</span> <span class="id">xA</span>) = <span class="id">f</span> <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof154')">Proof.</span></div>
<div class="proofscript" id="proof154">
 <span class="id">done</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eq_sigLP</span> (<span class="id">f</span> <span class="id">g</span> : <span class="id">U</span> -&gt; <span class="id">V</span>):<br/>
&nbsp;&nbsp;{<span class="kwd">in</span> <span class="id">A</span>, <span class="id">f</span> =1 <span class="id"><a href="mathcomp.classical.functions.html#sigL">g</a></span>} &lt;-&gt; <span class="id">sigL</span> <span class="id">f</span> = <span class="id">sigL</span> <span class="id">g</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof155')">Proof.</span></div>
<div class="proofscript" id="proof155">
<span class="id">split</span>=&gt; [<span class="id">eq_f_g</span> | <span class="id">Rfg</span> <span class="id">u</span> <span class="id">uA</span>]; <span class="id">first</span> <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">funext</span> =&gt; -[<span class="id">x</span>]; <span class="id">apply</span>: <span class="id">eq_f_g</span>.<br/>
<span class="kwd">by</span> <span class="id">have</span> := <span class="id">congr1</span> (@^~ (<span class="id">exist</span> <span class="id">_</span> <span class="id">u</span> <span class="id">uA</span>)) <span class="id">Rfg</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eq_sigLfunP</span> (<span class="id">f</span> <span class="id">g</span> : {<span class="kwd">fun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) :<br/>
&nbsp;&nbsp;{<span class="kwd">in</span> <span class="id">A</span>, <span class="id">f</span> =1 <span class="id"><a href="mathcomp.classical.functions.html#sigLfun">g</a></span>} &lt;-&gt; <span class="id">sigLfun</span> <span class="id">f</span> = <span class="id">sigLfun</span> <span class="id">g</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof156')">Proof.</span></div>
<div class="proofscript" id="proof156">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eq_sigLP</span> <span class="id">funP</span> <span class="id">funeqP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigLK</span> : <span class="id">valL_</span> \<span class="id">o</span> <span class="id"><a href="mathcomp.classical.functions.html#restrict">sigL</a></span> = <span class="id">restrict</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof157')">Proof.</span></div>
<div class="proofscript" id="proof157">
<span class="id">rewrite</span> <span class="id">funeq2E</span> =&gt; <span class="id">f</span> <span class="id">u</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.functions.html#sigL">valL_</a></span> /<span class="id">sigL</span> /<span class="id">restrict</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">oinv_set_val</span>/=; <span class="id">case</span>: <span class="id">ifPn</span> =&gt; <span class="id">uA</span>; [<span class="id">rewrite</span> <span class="id">insubT</span>|<span class="id">rewrite</span> <span class="id">insubN</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">valLK</span> : <span class="id"><a href="mathcomp.classical.functions.html#valL_">cancel</a></span> <span class="id">valL_</span> <span class="id">sigL</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof158')">Proof.</span></div>
<div class="proofscript" id="proof158">
<span class="id">move</span>=&gt; <span class="id">f</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.functions.html#sigL">valL_</a></span> /<span class="id">sigL</span> /<span class="id">restrict</span> <span class="id">oinv_set_val</span>.<br/>
<span class="id">apply</span>/<span class="id">funext</span>=&gt; <span class="id">a</span> /=; <span class="id">have</span> <span class="id">aA</span> : <span class="id">set_val</span> <span class="id">a</span> \<span class="kwd">in</span> <span class="id">A</span> <span class="kwd">by</span> <span class="id">apply</span>: <span class="id">valP</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">insubT</span>//=; <span class="id">congr</span> <span class="id">f</span>; <span class="id">apply</span>/<span class="id">val_inj</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">valLfunK</span> : <span class="id"><a href="mathcomp.classical.functions.html#valLfun_">cancel</a></span> <span class="id">valLfun_</span> <span class="id">sigLfun</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof159')">Proof.</span></div>
<div class="proofscript" id="proof159">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">f</span>; <span class="id">apply</span>/<span class="id">funP</span>/<span class="id">funeqP</span>; <span class="id"><a href="mathcomp.classical.functions.html#valLK">exact</a></span>: <span class="id">valLK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigL_valL</span> : <span class="id">sigL</span> \<span class="id">o</span> <span class="id">valL_</span> = <span class="id">id</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof160')">Proof.</span></div>
<div class="proofscript" id="proof160">
 <span class="id">exact</span>/<span class="id"><a href="mathcomp.classical.functions.html#valLK">funext</a></span>/<span class="id">valLK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigL_valLfun</span> : <span class="id">sigLfun</span> \<span class="id">o</span> <span class="id">valLfun_</span> = <span class="id">id</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof161')">Proof.</span></div>
<div class="proofscript" id="proof161">
 <span class="id">exact</span>/<span class="id"><a href="mathcomp.classical.functions.html#valLfunK">funext</a></span>/<span class="id">valLfunK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigL_restrict</span> : <span class="id">sigL</span> \<span class="id">o</span> <span class="id">restrict</span> = <span class="id">sigL</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof162')">Proof.</span></div>
<div class="proofscript" id="proof162">
<span class="id">rewrite</span> <span class="id">funeq2E</span> =&gt; <span class="id">f</span> -[<span class="id">u</span> <span class="id">Au</span>] /=.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">sigL</span> /<span class="id">restrict</span> /<span class="id"><a href="mathcomp.classical.functions.html#patch">valL_</a></span> /<span class="id">patch</span> /= <span class="id">Au</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">image_sigL</span>  : <span class="id">range</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">sigL</a></span> = <span class="id">setT</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof163')">Proof.</span></div>
<div class="proofscript" id="proof163">
<span class="id">rewrite</span> <span class="id">eqEsubset</span>; <span class="id">split</span>=&gt; //= <span class="id">f</span> <span class="id">_</span>; <span class="kwd">exists</span> (<span class="id">valL_</span> <span class="id">f</span>)=&gt;//.<br/>
<span class="id"><a href="mathcomp.classical.functions.html#valLK">exact</a></span>: <span class="id">valLK</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eq_restrictP</span> (<span class="id">f</span> <span class="id">g</span> : <span class="id">U</span> -&gt; <span class="id">V</span>): {<span class="kwd">in</span> <span class="id">A</span>, <span class="id">f</span> =1 <span class="id"><a href="mathcomp.classical.functions.html#restrict">g</a></span>} &lt;-&gt; <span class="id">restrict</span> <span class="id">f</span> = <span class="id">restrict</span> <span class="id">g</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof164')">Proof.</span></div>
<div class="proofscript" id="proof164">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">eq_sigLP</span> -<span class="id">sigLK</span>/=; <span class="id">split</span> =&gt; [-&gt;//|/(<span class="id">can_inj</span> <span class="id">valLK</span>)]. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">RestrictionLeft</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">sigL</span> {<span class="id">U</span> <span class="id">V</span>} <span class="id">A</span> <span class="id">f</span> <span class="id">u</span> /.<br/>
<span class="kwd">Arguments</span> <span class="id">sigLE</span> {<span class="id">U</span> <span class="id">V</span>} <span class="id">A</span> <span class="id">f</span> <span class="id">x</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">valL_</span> {<span class="id">U</span> <span class="id">V</span>} <span class="id">v</span> {<span class="id">A</span>} <span class="id">f</span> <span class="id">u</span> /.<br/>
<span class="kwd">Notation</span> "''<span class="id">valL_</span>' <span class="id"><a href="mathcomp.classical.functions.html#valL_">v</a></span>" := (<span class="id">valL_</span> <span class="id">v</span>) : <span class="id">form_scope</span>.<br/>
<span class="kwd">Notation</span> "''<span class="id">valLfun_</span>' <span class="id"><a href="mathcomp.classical.functions.html#valLfun_">v</a></span>" := (<span class="id">valLfun_</span> <span class="id">v</span>) : <span class="id">form_scope</span>.<br/>
<span class="kwd">Notation</span> <span class="id">valL</span> := (<span class="id">valL_</span> <span class="id">point</span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id">RestrictionRight</span>.<br/>
<span class="kwd">Context</span> {<span class="id">U</span> <span class="id">V</span> : <span class="kwd">Type</span>} {<span class="id">A</span> : <span class="id">set</span> <span class="id">V</span>}.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">sigR</span> (<span class="id">f</span> : {<span class="kwd">fun</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionRight.A">U</a></span>] &gt;-&gt; <span class="id">A</span>}) (<span class="id">u</span> : <span class="id">U</span>) : <span class="id"><a href="mathcomp.classical.classical_sets.html#SigSub">A</a></span> :=<br/>
&nbsp;&nbsp;<span class="id">SigSub</span> (<span class="id">mem_set</span> ('<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Logic.html#I">funS_f</a></span> <span class="id">I</span>) : <span class="id">f</span> <span class="id">u</span> \<span class="kwd">in</span> <span class="id">A</span>).<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id"><a href="mathcomp.classical.functions.html#copy">_</a></span> <span class="id">f</span> := <span class="id">Fun.copy</span> (<span class="id">sigR</span> <span class="id">f</span>) (<span class="id">totalfun</span> <span class="id">_</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">valR</span> (<span class="id">f</span> : <span class="id">U</span> -&gt; <span class="id">A</span>) := <span class="id">set_val</span> \<span class="id">o</span> <span class="id">totalfun</span> <span class="id">f</span>.<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id"><a href="mathcomp.classical.functions.html#on">_</a></span> <span class="id">f</span> := <span class="id">Fun.on</span> (<span class="id">valR</span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">valR_fun</span> (<span class="id">f</span> : <span class="id">U</span> -&gt; <span class="id">A</span>) : {<span class="kwd">fun</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionRight.A">U</a></span>] &gt;-&gt; <span class="id">A</span>} := [<span class="kwd">fun</span> <span class="id">of</span> <span class="id">valR</span> <span class="id">f</span>].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigRK</span> (<span class="id">f</span> : {<span class="kwd">fun</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionRight.A">U</a></span>] &gt;-&gt; <span class="id">A</span>}) : <span class="id">valR</span> (<span class="id">sigR</span> <span class="id">f</span>) = <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof165')">Proof.</span></div>
<div class="proofscript" id="proof165">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigR_funK</span> (<span class="id">f</span> : {<span class="kwd">fun</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionRight.A">U</a></span>] &gt;-&gt; <span class="id">A</span>}) : <span class="id">valR_fun</span> (<span class="id">sigR</span> <span class="id">f</span>) = <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof166')">Proof.</span></div>
<div class="proofscript" id="proof166">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">funP</span>/<span class="id">funeqP</span>; <span class="id"><a href="mathcomp.classical.functions.html#sigRK">apply</a></span>: <span class="id">sigRK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">valRP</span> (<span class="id">f</span> : <span class="id">U</span> -&gt; <span class="id"><a href="mathcomp.classical.functions.html#RestrictionRight.A">A</a></span>) <span class="id"><a href="mathcomp.classical.functions.html#valR">x</a></span> : <span class="id">A</span> (<span class="id">valR</span> <span class="id">f</span> <span class="id">x</span>)<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof167')">Proof.</span></div>
<div class="proofscript" id="proof167">
 <span class="id"><a href="mathcomp.classical.classical_sets.html#set_valP">exact</a></span>: <span class="id">set_valP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">valRK</span> : <span class="id"><a href="mathcomp.classical.functions.html#valR_fun">cancel</a></span> <span class="id">valR_fun</span> <span class="id">sigR</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof168')">Proof.</span></div>
<div class="proofscript" id="proof168">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">f</span>; <span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">x</span>; <span class="id">apply</span>/<span class="id">val_inj</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">RestrictionRight</span>.<br/>
<span class="kwd">Arguments</span> <span class="id">sigR</span> {<span class="id">U</span> <span class="id">V</span> <span class="id">A</span>} <span class="id">f</span> <span class="id">u</span> /.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">RestrictionLeftInv</span>.<br/>
<span class="kwd">Context</span> {<span class="id">U</span> <span class="id">V</span> : <span class="kwd">Type</span>} (<span class="id">v</span> : <span class="id">V</span>) {<span class="id">A</span> : <span class="id">set</span> <span class="id">U</span>} {<span class="id">B</span> : <span class="id">set</span> <span class="id">V</span>}.<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id"><a href="mathcomp.classical.functions.html#sigL">rl</a></span> := (<span class="id">sigL</span> <span class="id">A</span>).<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id">rr</span> := <span class="id">sigR</span>.<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id">el</span> := '<span class="id">valL_v</span>.<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id">er</span> := <span class="id"><a name="RestrictionLeftInv.hb_instance_1336">valR</a></span>.<br/>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">oinv</span> <span class="id">U</span> &gt;-&gt; <span class="id">V</span>}) :=<br/>
&nbsp;&nbsp;@<span class="id">OInv.Build</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#obind">rl</a></span> <span class="id">f</span>) (<span class="id">obind</span> <span class="id">insub</span> \<span class="id">o</span> '<span class="id">oinv_f</span>).<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">oinvfun</span> <span class="id">A</span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#on">B</a></span>}) := <span class="id">Fun.on</span> (<span class="id">rl</span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">oinv_sigL</span> (<span class="id">f</span> : {<span class="id">oinv</span> <span class="id">U</span> &gt;-&gt; <span class="id">V</span>}) : '<span class="id">oinv_</span>(<span class="id">rl</span> <span class="id">f</span>) = <span class="id">obind</span> <span class="id">insub</span> \<span class="id">o</span> '<span class="id">oinv_f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof169')">Proof.</span></div>
<div class="proofscript" id="proof169">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigL_inj_subproof</span> (<span class="id">f</span> : {<span class="id">inj</span> <span class="id">A</span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OInv_Can">V</a></span>}) : @<span class="id">OInv_Can</span> <span class="id">_</span> <span class="id">_</span> <span class="id">setT</span> (<span class="id">rl</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof170')">Proof.</span></div>
<div class="proofscript" id="proof170">
<span class="kwd">by</span> <span class="id">split</span>=&gt; <span class="id">x</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">oinv_sigL</span>/= <span class="id">funoK</span>//= [<span class="id">insub</span> <span class="id">_</span>]'<span class="id">funoK_val</span> ?<span class="id">inE</span>.<br/>
Qed.</div>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id"><a href="mathcomp.classical.functions.html#sigL_inj_subproof">_</a></span> <span class="id">f</span> := <span class="id">sigL_inj_subproof</span> <span class="id">f</span>.<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.A">injfun</a></span> <span class="id">A</span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#on">B</a></span>}) := <span class="id">Fun.on</span> (<span class="id">rl</span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigL_surj_subproof</span> (<span class="id">f</span> : {<span class="id">surj</span> <span class="id">A</span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OInv_CanV">B</a></span>}) : @<span class="id">OInv_CanV</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.B">_</a></span> <span class="id">setT</span> <span class="id">B</span> (<span class="id">rl</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof171')">Proof.</span></div>
<div class="proofscript" id="proof171">
<span class="id">split</span>=&gt; [<span class="id">b</span>|<span class="id">b</span> /<span class="id">set_mem</span>] <span class="id">Bb</span>; <span class="id">rewrite</span> ?<span class="id">oinv_sigL</span>/=.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">have</span> [<span class="id">x</span> /<span class="id">mem_set</span> <span class="id">Ax</span> &lt;-]/= := '<span class="id">oinvS_f</span> <span class="id">Bb</span>; <span class="kwd">exists</span> (<span class="id">SigSub</span> <span class="id">Ax</span>) =&gt; //=.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">case</span>: <span class="id">insubP</span> =&gt; [<span class="id">a</span> <span class="id">Aa</span>/= <span class="id">eqx</span>|]; <span class="id">last</span> <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">Ax</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">congr</span> <span class="id">Some</span>; <span class="id">apply</span>/<span class="id">val_inj</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">rl</span>/= <span class="id">oapp_comp</span>/= -<span class="id">oinv_val</span> -<span class="id">inv_omap</span>/= <span class="id">invK</span> ?<span class="id"><a href="mathcomp.classical.functions.html#mem_fun">oinvK</a></span> ?<span class="id">mem_fun</span> ?<span class="id">inE</span>.<br/>
Qed.</div>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id"><a href="mathcomp.classical.functions.html#sigL_surj_subproof">_</a></span> <span class="id">f</span> := <span class="id">sigL_surj_subproof</span> <span class="id">f</span>.<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">surjfun</span> <span class="id">A</span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#on">B</a></span>}) := <span class="id">Fun.on</span> (<span class="id"><a name="RestrictionLeftInv.hb_instance_1357">rl</a></span> <span class="id">f</span>).<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">bij</span> <span class="id">A</span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#on">B</a></span>}) := <span class="id">Fun.on</span> (<span class="id">rl</span> <span class="id">f</span>).<br/>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">oinvfun</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.A">V</a></span>] &gt;-&gt; <span class="id">A</span>}) :=<br/>
&nbsp;&nbsp;@<span class="id">OInv.Build</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.classical.functions.html#rl">rr</a></span> <span class="id">f</span>) (<span class="id">rl</span> '<span class="id">oinv_f</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">oinv_sigR</span> (<span class="id">f</span> : {<span class="id">oinvfun</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.A">V</a></span>] &gt;-&gt; <span class="id">A</span>}) :<br/>
&nbsp;&nbsp;'<span class="id">oinv_</span>(<span class="id">rr</span> <span class="id">f</span>) = (<span class="id">rl</span> '<span class="id">oinv_f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof172')">Proof.</span></div>
<div class="proofscript" id="proof172">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigR_inj_subproof</span> (<span class="id">f</span> : {<span class="id">injfun</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.A">V</a></span>] &gt;-&gt; <span class="id">A</span>}) :<br/>
&nbsp;&nbsp;&nbsp;@<span class="id">OInv_Can</span> <span class="id">_</span> <span class="id">_</span> <span class="id">setT</span> (<span class="id">rr</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof173')">Proof.</span></div>
<div class="proofscript" id="proof173">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; <span class="id">x</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">oinv_sigR</span>/= <span class="id">set_valE</span>/= <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">funoK</a></span> ?<span class="id">inE</span>. Qed.</div>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id"><a href="mathcomp.classical.functions.html#sigR_inj_subproof">_</a></span> <span class="id">f</span> := <span class="id">sigR_inj_subproof</span> <span class="id">f</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigR_surj_subproof</span> (<span class="id">f</span> : {<span class="id">surjfun</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.A">V</a></span>] &gt;-&gt; <span class="id">A</span>}) :<br/>
&nbsp;&nbsp;@<span class="id">OInv_CanV</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">_</a></span> <span class="id">setT</span> <span class="id">setT</span> (<span class="id">rr</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof174')">Proof.</span></div>
<div class="proofscript" id="proof174">
<span class="id">split</span>=&gt; <span class="id">a</span> <span class="id">_</span>; <span class="id">rewrite</span> ?<span class="id">oinv_sigL</span>/=.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">have</span> [<span class="id">x</span> <span class="id">_</span> <span class="id">xeq</span>] := '<span class="id">oinvS_f</span> (<span class="id">set_valP</span> <span class="id">a</span>); <span class="kwd">exists</span> <span class="id">x</span>.<br/>
<span class="id">apply</span>/<span class="id">val_inj</span>=&gt; /=; <span class="id">rewrite</span> <span class="id">oinv_sigR</span>/=.<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id">oinvP</span>=&gt; //=; <span class="id"><a href="mathcomp.classical.classical_sets.html#set_valP">apply</a></span>: <span class="id">set_valP</span>.<br/>
Qed.</div>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id"><a href="mathcomp.classical.functions.html#sigR_surj_subproof">_</a></span> <span class="id">f</span> := <span class="id">sigR_surj_subproof</span> <span class="id">f</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigR_some_inv</span> (<span class="id">f</span> : {<span class="id">invfun</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.A">V</a></span>] &gt;-&gt; <span class="id">A</span>}) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#rl">olift</a></span> (<span class="id">rl</span> <span class="id">f</span>^-1) = '<span class="id">oinv_</span>(<span class="id">rr</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof175')">Proof.</span></div>
<div class="proofscript" id="proof175">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">oinv_sigR</span> <span class="id">olift_comp</span> <span class="id">oliftV</span>. Qed.</div>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">bij</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.A">V</a></span>] &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#on">A</a></span>}) := <span class="id">Fun.on</span> (<span class="id">rr</span> <span class="id">f</span>).<br/>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">invfun</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.A">V</a></span>] &gt;-&gt; <span class="id">A</span>}) :=<br/>
&nbsp;&nbsp;&nbsp;@<span class="id">OInv_Inv.Build</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.classical.functions.html#rl">rr</a></span> <span class="id">f</span>) (<span class="id">rl</span> <span class="id"><a href="mathcomp.classical.functions.html#sigR_some_inv">f</a></span>^-1) (<span class="id">sigR_some_inv</span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">inv_sigR</span> (<span class="id">f</span> : {<span class="id">invfun</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.A">V</a></span>] &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#rr">A</a></span>}) : (<span class="id">rr</span> <span class="id">f</span>)^-1 = (<span class="id">rl</span> <span class="id">f</span>^-1).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof176')">Proof.</span></div>
<div class="proofscript" id="proof176">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitinjfun</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.A">V</a></span>] &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#on">A</a></span>}) := <span class="id">Inject.on</span> (<span class="id">rr</span> <span class="id">f</span>).<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitsurjfun</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.A">V</a></span>] &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#on">A</a></span>}) := <span class="id">Surject.on</span> (<span class="id"><a name="RestrictionLeftInv.hb_instance_1389">rr</a></span> <span class="id">f</span>).<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitbij</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.A">V</a></span>] &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#on">A</a></span>}) := <span class="id">Fun.on</span> (<span class="id">rr</span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigL_some_inv</span> (<span class="id">f</span> : {<span class="id">splitbij</span> <span class="id">A</span> &gt;-&gt; [<span class="id">set</span>: <span class="id">V</span>]}) :<br/>
&nbsp;&nbsp;<span class="id"><a href="mathcomp.classical.functions.html#rr">olift</a></span> (<span class="id">rr</span> [<span class="kwd">fun</span> <span class="id">of</span> <span class="id">f</span>^-1]) = '<span class="id">oinv_</span>(<span class="id">rl</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof177')">Proof.</span></div>
<div class="proofscript" id="proof177">
<span class="id">apply</span>/<span class="id">funext</span>=&gt; <span class="id">x</span> /=; <span class="id">rewrite</span> <span class="id">oinv_sigL</span> /= /<span class="id">sigR</span>/= /<span class="id">olift</span>/=.<br/>
<span class="id">case</span>: <span class="id">oinvP</span> =&gt; //= <span class="id">u</span> <span class="id">Au</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">insubT</span> ?<span class="id">inE</span>// =&gt; <span class="id">memAu</span>.<br/>
<span class="kwd">by</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.Init.Datatypes.html#Some">congr</a></span> (<span class="id">Some</span> <span class="id">_</span>); <span class="id">apply</span>/<span class="id">val_inj</span>=&gt; /=; <span class="id">rewrite</span> <span class="id">funK</span>.<br/>
Qed.</div>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitbij</span> <span class="id">A</span> &gt;-&gt; [<span class="id">set</span>: <span class="id">V</span>]}) :=<br/>
&nbsp;&nbsp;<span class="id">OInv_Inv.Build</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.classical.functions.html#sigL_some_inv">rl</a></span> <span class="id">f</span>) (<span class="id">sigL_some_inv</span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">inv_sigL</span>  (<span class="id">f</span> : {<span class="id">splitbij</span> <span class="id">A</span> &gt;-&gt; [<span class="id">set</span>: <span class="id">V</span>]}) :<br/>
&nbsp;&nbsp;(<span class="id">rl</span> <span class="id">f</span>)^-1 = (<span class="id">rr</span> [<span class="kwd">fun</span> <span class="id">of</span> <span class="id">f</span>^-1]).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof178')">Proof.</span></div>
<div class="proofscript" id="proof178">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">oinv</span> <span class="id">A</span> &gt;-&gt; <span class="id">V</span>}) :=<br/>
&nbsp;&nbsp;@<span class="id">OInv.Build</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#omap">el</a></span> <span class="id">f</span>) (<span class="id">omap</span> <span class="id">set_val</span> \<span class="id">o</span> '<span class="id">oinv_f</span>).<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">oinvfun</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.B">A</a></span>] &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#on">B</a></span>}) := <span class="id">Fun.on</span> (<span class="id">el</span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">oinv_valL</span> (<span class="id">f</span> : {<span class="id">oinv</span> <span class="id">A</span> &gt;-&gt; <span class="id">V</span>}) :<br/>
&nbsp;&nbsp;'<span class="id">oinv_</span>(<span class="id">el</span> <span class="id">f</span>) = <span class="id">omap</span> <span class="id">set_val</span> \<span class="id">o</span> '<span class="id">oinv_f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof179')">Proof.</span></div>
<div class="proofscript" id="proof179">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">oapp_comp_x</span> {<span class="id">aT</span> <span class="id">rT</span> <span class="id">sT</span>} (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>) (<span class="id">g</span> : <span class="id">rT</span> -&gt; <span class="id">sT</span>) (<span class="id">x</span> : <span class="id">rT</span>) <span class="id">y</span> :<br/>
&nbsp;&nbsp;<span class="id">oapp</span> (<span class="id">g</span> \<span class="id">o</span> <span class="id">f</span>) (<span class="id">g</span> <span class="id">x</span>) <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#oapp">y</a></span> = <span class="id">g</span> (<span class="id">oapp</span> <span class="id">f</span> <span class="id">x</span> <span class="id">y</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof180')">Proof.</span></div>
<div class="proofscript" id="proof180">
 <span class="kwd">by</span> <span class="id">case</span>: <span class="id">y</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">valL_inj_subproof</span> (<span class="id">f</span> : {<span class="id">inj</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.V">A</a></span>] &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OInv_Can">V</a></span>}) : @<span class="id">OInv_Can</span> <span class="id"><a href="mathcomp.classical.functions.html#el">_</a></span> <span class="id">_</span> <span class="id">A</span> (<span class="id">el</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof181')">Proof.</span></div>
<div class="proofscript" id="proof181">
<span class="id">split</span>=&gt; <span class="id">x</span> /<span class="id">set_mem</span> <span class="id">xA</span>; <span class="id">rewrite</span> <span class="id">oinv_valL</span>/= -<span class="id">oapp_comp_x</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id">oinvP</span>=&gt; //= <span class="id">a</span> <span class="id">_</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#inE">funoK</a></span> ?<span class="id">inE</span>.<br/>
Qed.</div>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id"><a href="mathcomp.classical.functions.html#valL_inj_subproof">_</a></span> <span class="id">f</span> := <span class="id">valL_inj_subproof</span> <span class="id">f</span>.<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">injfun</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.B">A</a></span>] &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#on">B</a></span>}) := <span class="id">Inject.on</span> (<span class="id">el</span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">valL_surj_subproof</span> (<span class="id">f</span> : {<span class="id">surj</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.B">A</a></span>] &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#OInv_CanV">B</a></span>}) : @<span class="id">OInv_CanV</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#el">_</a></span> <span class="id">A</span> <span class="id">B</span> (<span class="id">el</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof182')">Proof.</span></div>
<div class="proofscript" id="proof182">
<span class="id">split</span>=&gt; [<span class="id">b</span>|<span class="id">b</span> /<span class="id">set_mem</span>] <span class="id">Bb</span>; <span class="id">rewrite</span> ?<span class="id">oinv_valL</span>/=.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">case</span>: <span class="id">oinvP</span> =&gt; // =&gt; <span class="id">a</span>; <span class="kwd">exists</span> (<span class="id">set_val</span> <span class="id">a</span>) =&gt; //; <span class="id"><a href="mathcomp.classical.classical_sets.html#set_valP">apply</a></span>: <span class="id">set_valP</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id">oinvP</span> =&gt; //= <span class="id">a</span> <span class="id">_</span> <span class="id">_</span>; <span class="id">rewrite</span> <span class="id">funoK</span>// <span class="id">inE</span>.<br/>
Qed.</div>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id"><a href="mathcomp.classical.functions.html#valL_surj_subproof">_</a></span> <span class="id">f</span> := <span class="id">valL_surj_subproof</span> <span class="id">f</span>.<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">surjfun</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.B">A</a></span>] &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#on">B</a></span>}) := <span class="id">Surject.on</span> (<span class="id"><a name="RestrictionLeftInv.hb_instance_1421">el</a></span> <span class="id">f</span>).<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">bij</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.B">A</a></span>] &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#on">B</a></span>}) := <span class="id">Surject.on</span> (<span class="id">el</span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">valL_some_inv</span> (<span class="id">f</span> : {<span class="id">inv</span> <span class="id">A</span> &gt;-&gt; <span class="id">V</span>}) : <span class="id"><a href="mathcomp.classical.functions.html#er">olift</a></span> (<span class="id">er</span> <span class="id">f</span>^-1) = '<span class="id">oinv_</span>(<span class="id">el</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof183')">Proof.</span></div>
<div class="proofscript" id="proof183">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">oinv_valL</span>/= <span class="id">olift_comp</span> -<span class="id">oliftV</span>. Qed.</div>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">inv</span> <span class="id">A</span> &gt;-&gt; <span class="id">V</span>}) :=<br/>
&nbsp;&nbsp;<span class="id">OInv_Inv.Build</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.classical.functions.html#valL_some_inv">el</a></span> <span class="id">f</span>) (<span class="id">valL_some_inv</span> <span class="id">f</span>).<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">invfun</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.B">A</a></span>] &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#on">B</a></span>}) := <span class="id">Fun.on</span> (<span class="id">el</span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">inv_valL</span> (<span class="id">f</span> : {<span class="id">inv</span> <span class="id">A</span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#el">V</a></span>}) : (<span class="id">el</span> <span class="id">f</span>)^-1 = <span class="id">er</span> <span class="id">f</span>^-1.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof184')">Proof.</span></div>
<div class="proofscript" id="proof184">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitinj</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.V">A</a></span>] &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#on">V</a></span>}) := <span class="id">Inject.on</span> (<span class="id"><a name="RestrictionLeftInv.hb_instance_1440">el</a></span> <span class="id">f</span>).<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitinjfun</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.B">A</a></span>] &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#on">B</a></span>}) := <span class="id">Fun.on</span> (<span class="id">el</span> <span class="id">f</span>).<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitsurj</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.B">A</a></span>] &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#on">B</a></span>}) := <span class="id">Surject.on</span> (<span class="id"><a name="RestrictionLeftInv.hb_instance_1450">el</a></span> <span class="id">f</span>).<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitsurjfun</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.B">A</a></span>] &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#on">B</a></span>}) := <span class="id">Fun.on</span> (<span class="id"><a name="RestrictionLeftInv.hb_instance_1454">el</a></span> <span class="id">f</span>).<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">splitbij</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#RestrictionLeftInv.B">A</a></span>] &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#on">B</a></span>}) := <span class="id">Fun.on</span> (<span class="id">el</span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigL_injP</span> (<span class="id">f</span> : <span class="id">U</span> -&gt; <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#injective">V</a></span>) :<br/>
&nbsp;&nbsp;<span class="id">injective</span> (<span class="id">rl</span> <span class="id">f</span>) &lt;-&gt; {<span class="kwd">in</span> <span class="id">A</span> &amp;, <span class="id">injective</span> <span class="id">f</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof185')">Proof.</span></div>
<div class="proofscript" id="proof185">
<span class="id">split</span>=&gt; [<span class="id">f_inj</span> <span class="id">x</span> <span class="id">y</span> <span class="id"><a href="mathcomp.classical.functions.html#Pinj">Ax</a></span> <span class="id">Ay</span>|/<span class="id">Pinj</span>[{}<span class="id">f</span>-&gt; //]]; <span class="id">last</span> <span class="id">first</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">eqfxy</span>; <span class="id">suff</span> [-&gt;] : <span class="id">SigSub</span> <span class="id">Ax</span> = <span class="id">SigSub</span> <span class="id">Ay</span> <span class="kwd">by</span> []; <span class="id">apply</span>: <span class="id">f_inj</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigL_surjP</span> (<span class="id">f</span> : <span class="id">U</span> -&gt; <span class="id"><a href="mathcomp.classical.functions.html#set_surj">V</a></span>) :<br/>
&nbsp;&nbsp;<span class="id">set_surj</span> [<span class="id">set</span>: <span class="id">A</span>] <span class="id">B</span> (<span class="id">rl</span> <span class="id"><a href="mathcomp.classical.functions.html#set_surj">f</a></span>) &lt;-&gt; <span class="id">set_surj</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof186')">Proof.</span></div>
<div class="proofscript" id="proof186">
<span class="id">split</span>=&gt; [<span class="id">fsurj</span> <span class="id">b</span> <span class="id">Bb</span>/=|/<span class="id">Psurj</span>[{}<span class="id">f</span>-&gt;]//].<br/>
<span class="kwd">by</span> <span class="id">have</span> [<span class="id">a</span> <span class="id">_</span> &lt;-] := <span class="id">fsurj</span> <span class="id">_</span> <span class="id">Bb</span>; <span class="kwd">exists</span> (<span class="id">set_val</span> <span class="id">a</span>) =&gt; //; <span class="id"><a href="mathcomp.classical.classical_sets.html#set_valP">apply</a></span>: <span class="id">set_valP</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigL_funP</span> (<span class="id">f</span> : <span class="id">U</span> -&gt; <span class="id"><a href="mathcomp.classical.functions.html#set_fun">V</a></span>) :<br/>
&nbsp;&nbsp;<span class="id">set_fun</span> [<span class="id">set</span>: <span class="id">A</span>] <span class="id">B</span> (<span class="id">rl</span> <span class="id"><a href="mathcomp.classical.functions.html#set_fun">f</a></span>) &lt;-&gt; <span class="id">set_fun</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof187')">Proof.</span></div>
<div class="proofscript" id="proof187">
<span class="id">split</span>=&gt; [<span class="id">ffun</span> <span class="id">u</span> <span class="id">Au</span>/=|/<span class="id">Pfun</span>[{}<span class="id">f</span>-&gt;]//].<br/>
<span class="id">exact</span>: (<span class="id">ffun</span> (<span class="id">SigSub</span> (<span class="id">mem_set</span> <span class="id">Au</span>))).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigL_bijP</span> (<span class="id">f</span> : <span class="id">U</span> -&gt; <span class="id"><a href="mathcomp.classical.functions.html#set_bij">V</a></span>) :<br/>
&nbsp;&nbsp;<span class="id">set_bij</span> [<span class="id">set</span>: <span class="id">A</span>] <span class="id">B</span> (<span class="id">rl</span> <span class="id"><a href="mathcomp.classical.functions.html#set_bij">f</a></span>) &lt;-&gt; <span class="id">set_bij</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof188')">Proof.</span></div>
<div class="proofscript" id="proof188">
<span class="id">split</span>=&gt; [[<span class="id">F</span> /<span class="id">in2TT</span> <span class="id">I</span> <span class="id">S</span>]|/<span class="id">Pbij</span>[{}<span class="id">f</span>-&gt;]//].<br/>
<span class="kwd">by</span> <span class="id">split</span>; [<span class="id">exact</span>/<span class="id">sigL_funP</span>|<span class="id">exact</span>/<span class="id">sigL_injP</span>|<span class="id">exact</span>/<span class="id">sigL_surjP</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">valL_injP</span> (<span class="id">f</span> : <span class="id">A</span> -&gt; <span class="id">V</span>) : {<span class="kwd">in</span> <span class="id">A</span> &amp;, <span class="id">injective</span> (<span class="id">el</span> <span class="id">f</span>)} &lt;-&gt; <span class="id">injective</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof189')">Proof.</span></div>
<div class="proofscript" id="proof189">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">sigL_injP</span> <span class="id">valLK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">valL_surjP</span> (<span class="id">f</span> : <span class="id">A</span> -&gt; <span class="id"><a href="mathcomp.classical.functions.html#set_surj">V</a></span>) :<br/>
&nbsp;&nbsp;<span class="id">set_surj</span> <span class="id">A</span> <span class="id">B</span> (<span class="id">el</span> <span class="id"><a href="mathcomp.classical.functions.html#set_surj">f</a></span>) &lt;-&gt; <span class="id">set_surj</span> <span class="id">setT</span> <span class="id">B</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof190')">Proof.</span></div>
<div class="proofscript" id="proof190">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">sigL_surjP</span> <span class="id">valLK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">valLfunP</span> (<span class="id">f</span> : <span class="id">A</span> -&gt; <span class="id"><a href="mathcomp.classical.functions.html#set_fun">V</a></span>) :<br/>
&nbsp;&nbsp;<span class="id">set_fun</span> <span class="id">A</span> <span class="id">B</span> (<span class="id">el</span> <span class="id"><a href="mathcomp.classical.functions.html#set_fun">f</a></span>) &lt;-&gt; <span class="id">set_fun</span> <span class="id">setT</span> <span class="id">B</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof191')">Proof.</span></div>
<div class="proofscript" id="proof191">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">sigL_funP</span> <span class="id">valLK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">valL_bijP</span> (<span class="id">f</span> : <span class="id">A</span> -&gt; <span class="id"><a href="mathcomp.classical.functions.html#set_bij">V</a></span>) :<br/>
&nbsp;&nbsp;<span class="id">set_bij</span> <span class="id">A</span> <span class="id">B</span> (<span class="id">el</span> <span class="id"><a href="mathcomp.classical.functions.html#set_bij">f</a></span>) &lt;-&gt; <span class="id">set_bij</span> <span class="id">setT</span> <span class="id">B</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof192')">Proof.</span></div>
<div class="proofscript" id="proof192">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">sigL_bijP</span> <span class="id">valLK</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">RestrictionLeftInv</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">ExtentionLeftInv</span>.<br/>
<span class="kwd">Context</span> {<span class="id">U</span> <span class="id">V</span> : <span class="kwd">Type</span>} {<span class="id">A</span> : <span class="id">set</span> <span class="id">U</span>} {<span class="id">B</span> : <span class="id">set</span> <span class="id">V</span>}.<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id">el</span> := '<span class="id">valL_None</span>.<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id">er</span> := <span class="id"><a name="ExtentionLeftInv.hb_instance_1458">valR</a></span>.<br/>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">oinv</span> <span class="id">V</span> &gt;-&gt; <span class="id">A</span>}) :=<br/>
&nbsp;&nbsp;@<span class="id">OInv.Build</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="mathcomp.classical.functions.html#el">er</a></span> <span class="id">f</span>) (<span class="id">el</span> '<span class="id">oinv_f</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">oinv_valR</span> (<span class="id">f</span> : {<span class="id">oinv</span> <span class="id">V</span> &gt;-&gt; <span class="id">A</span>}) : '<span class="id">oinv_</span>(<span class="id">er</span> <span class="id">f</span>) = (<span class="id">el</span> '<span class="id">oinv_f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof193')">Proof.</span></div>
<div class="proofscript" id="proof193">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">valR_inj_subproof</span> (<span class="id">f</span> : {<span class="id">inj</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#ExtentionLeftInv.A">V</a></span>] &gt;-&gt; <span class="id">A</span>}) :<br/>
&nbsp;&nbsp;&nbsp;@<span class="id">OInv_Can</span> <span class="id">_</span> <span class="id">_</span> <span class="id">setT</span> (<span class="id">er</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof194')">Proof.</span></div>
<div class="proofscript" id="proof194">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; <span class="id">x</span> <span class="id">_</span>; <span class="id">rewrite</span> /<span class="id">er</span> <span class="id">oinv_valR</span>/= <span class="id">funoK</span>/= ?<span class="id"><a href="mathcomp.classical.classical_sets.html#inE">funoK</a></span> ?<span class="id">inE</span>. Qed.</div>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id"><a href="mathcomp.classical.functions.html#valR_inj_subproof">_</a></span> <span class="id">f</span> := <span class="id">valR_inj_subproof</span> <span class="id">f</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">valR_surj_subproof</span> (<span class="id">f</span> : {<span class="id">surj</span> [<span class="id">set</span>: <span class="id">V</span>] &gt;-&gt; [<span class="id">set</span>: <span class="id">A</span>]}) :<br/>
&nbsp;&nbsp;@<span class="id">OInv_CanV</span> <span class="id">_</span> <span class="id"><a href="mathcomp.classical.functions.html#ExtentionLeftInv.A">_</a></span> <span class="id">setT</span> <span class="id">A</span> (<span class="id">er</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof195')">Proof.</span></div>
<div class="proofscript" id="proof195">
<span class="id">split</span>=&gt; [<span class="id">a</span>|<span class="id">a</span> /<span class="id">set_mem</span>] <span class="id">Aa</span>; <span class="id">rewrite</span> ?<span class="id">oinv_valR</span>/= <span class="id">oinv_set_val</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">insubT</span> ?<span class="id">inE</span>// =&gt; <span class="id">memaA</span> /=; <span class="id">case</span>: <span class="id">oinvP</span> =&gt; //= <span class="id">x</span>; <span class="kwd">exists</span> <span class="id">x</span>.<br/>
<span class="id">rewrite</span> <span class="id">insubT</span> ?<span class="id">inE</span>// =&gt; <span class="id">memaA</span>/=; <span class="id">case</span>: <span class="id">oinvP</span> =&gt; //= <span class="id">x</span> <span class="id">_</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> /<span class="id">er</span>/= /<span class="id">totalfun</span> =&gt; -&gt;.<br/>
Qed.</div>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id"><a href="mathcomp.classical.functions.html#valR_surj_subproof">_</a></span> <span class="id">f</span> := <span class="id">valR_surj_subproof</span> <span class="id">f</span>.<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">bij</span> [<span class="id">set</span>: <span class="id">V</span>] &gt;-&gt; [<span class="id">set</span>: <span class="id">A</span>]}) := <span class="id">Fun.on</span> (<span class="id">er</span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id">ExtentionLeftInv</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">Restrictions2</span>.<br/>
<span class="kwd">Context</span> {<span class="id">U</span> <span class="id">V</span> : <span class="kwd">Type</span>} (<span class="id">v</span> : <span class="id">V</span>) {<span class="id">A</span> : <span class="id">set</span> <span class="id">U</span>} {<span class="id">B</span> : <span class="id">set</span> <span class="id">V</span>}.<br/>
<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id">valL</span> := '<span class="id">valL_v</span>.<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id">valLfun</span> := '<span class="id">valLfun_v</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">sigLR</span> := <span class="id">sigR</span> \<span class="id">o</span> (@<span class="id">sigLfun</span> <span class="id">U</span> <span class="id">V</span> <span class="id"><a name="Restrictions2.hb_instance_1471">A</a></span> <span class="id">B</span>).<br/>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) :=<br/>
&nbsp;&nbsp;<span class="id">Fun.copy</span> (<span class="id">sigLR</span> <span class="id">f</span>) (<span class="id">totalfun</span> <span class="id">_</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">valLR</span> : (<span class="id">A</span> -&gt; <span class="id">B</span>) -&gt; <span class="id">U</span> -&gt; <span class="id">V</span> := <span class="id">valL</span> \<span class="id">o</span> <span class="id">valR_fun</span>.<br/>
<span class="kwd">Definition</span> <span class="id">valLRfun</span> : (<span class="id">A</span> -&gt; <span class="id">B</span>) -&gt; {<span class="kwd">fun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>} := <span class="id">valLfun</span> \<span class="id">o</span> <span class="id">valR_fun</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">valLRE</span> (<span class="id">f</span> : <span class="id">A</span> -&gt; <span class="id">B</span>) : <span class="id">valLR</span> <span class="id">f</span> = <span class="id">valL</span> (<span class="id">valR</span> <span class="id">f</span>)<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof196')">Proof.</span></div>
<div class="proofscript" id="proof196">
 <span class="kwd">by</span> []. Qed.</div>
<span class="kwd">Lemma</span> <span class="id">valLRfunE</span> (<span class="id">f</span> : <span class="id">A</span> -&gt; <span class="id">B</span>) : <span class="id">valLRfun</span> <span class="id">f</span> = [<span class="kwd">fun</span> <span class="id">of</span> <span class="id">valLR</span> <span class="id">f</span>]<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof197')">Proof.</span></div>
<div class="proofscript" id="proof197">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigL2K</span> (<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) : {<span class="kwd">in</span> <span class="id">A</span>, <span class="id"><a href="mathcomp.classical.functions.html#sigLR">valLR</a></span> (<span class="id">sigLR</span> <span class="id">f</span>) =1 <span class="id">f</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof198')">Proof.</span></div>
<div class="proofscript" id="proof198">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">eq_sigLP</span>; <span class="id">rewrite</span> <span class="id">valLK</span> <span class="id">sigR_funK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">valLRK</span> : <span class="id"><a href="mathcomp.classical.functions.html#valLRfun">cancel</a></span> <span class="id">valLRfun</span> <span class="id">sigLR</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof199')">Proof.</span></div>
<div class="proofscript" id="proof199">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">f</span>; <span class="id">rewrite</span> /<span class="id"><a href="mathcomp.classical.functions.html#valLR">sigLR</a></span> /<span class="id">valLR</span> /= <span class="id">valLfunK</span> <span class="id">valRK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">valLRfun_inj</span> : <span class="id">injective</span> <span class="id">valLRfun</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof200')">Proof.</span></div>
<div class="proofscript" id="proof200">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">f</span> <span class="id">g</span> <span class="id">eqefg</span>; <span class="id">rewrite</span> -[<span class="id">LHS</span>]<span class="id">valLRK</span> <span class="id">eqefg</span> <span class="id">valLRK</span>. Qed.</div>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">oinvfun</span> <span class="id">A</span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#on">B</a></span>}) := <span class="id">OInversible.on</span> (<span class="id">sigLR</span> <span class="id">f</span>).<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id"><a href="mathcomp.classical.functions.html#Restrictions2.A">injfun</a></span> <span class="id">A</span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#on">B</a></span>}) := <span class="id">Inject.on</span> (<span class="id">sigLR</span> <span class="id">f</span>).<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">surjfun</span> <span class="id">A</span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#on">B</a></span>}) := <span class="id">Surject.on</span> (<span class="id">sigLR</span> <span class="id">f</span>).<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">bij</span> <span class="id">A</span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#on">B</a></span>}) := <span class="id">Fun.on</span> (<span class="id">sigLR</span> <span class="id">f</span>).<br/>
<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">oinv</span> <span class="id">A</span> &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#on">B</a></span>}) := <span class="id">OInvFun.on</span> (<span class="id">valLR</span> <span class="id">f</span>).<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">inj</span> [<span class="id">set</span>: <span class="id"><a href="mathcomp.classical.functions.html#Restrictions2.B">A</a></span>] &gt;-&gt; <span class="id"><a href="mathcomp.classical.functions.html#on">B</a></span>}) := <span class="id">Inject.on</span> (<span class="id">valLR</span> <span class="id">f</span>).<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">surj</span> [<span class="id">set</span>: <span class="id">A</span>] &gt;-&gt; [<span class="id">set</span>: <span class="id">B</span>]}) := <span class="id">Surject.on</span> (<span class="id">valLR</span> <span class="id">f</span>).<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> (<span class="id">f</span> : {<span class="id">bij</span> [<span class="id">set</span>: <span class="id">A</span>] &gt;-&gt; [<span class="id">set</span>: <span class="id">B</span>]}) := <span class="id">Fun.on</span> (<span class="id">valLR</span> <span class="id">f</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigLR_injP</span> (<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) :<br/>
&nbsp;&nbsp;<span class="id">injective</span> (<span class="id">sigLR</span> <span class="id">f</span>) &lt;-&gt; {<span class="kwd">in</span> <span class="id">A</span> &amp;, <span class="id">injective</span> <span class="id">f</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof201')">Proof.</span></div>
<div class="proofscript" id="proof201">
<span class="id">split</span>=&gt; [<span class="id">f_inj</span> <span class="id">x</span> <span class="id">y</span> <span class="id"><a href="mathcomp.classical.functions.html#funPinj">Ax</a></span> <span class="id">Ay</span>|/<span class="id">funPinj</span>[{}<span class="id">f</span>-&gt; //]]; <span class="id">last</span> <span class="id">first</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">eqfxy</span>; <span class="id">suff</span> [-&gt;] : <span class="id">SigSub</span> <span class="id">Ax</span> = <span class="id">SigSub</span> <span class="id">Ay</span> <span class="kwd">by</span> [].<br/>
<span class="kwd">by</span> <span class="id">apply</span>: <span class="id">f_inj</span>; <span class="id">apply</span>/<span class="id">val_inj</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">valLR_injP</span> (<span class="id">f</span> : <span class="id">A</span> -&gt; <span class="id">B</span>) :<br/>
&nbsp;&nbsp;{<span class="kwd">in</span> <span class="id">A</span> &amp;, <span class="id">injective</span> (<span class="id">valLR</span> <span class="id">f</span>)} &lt;-&gt; <span class="id">injective</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof202')">Proof.</span></div>
<div class="proofscript" id="proof202">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">sigLR_injP</span> <span class="id">valLRK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigLR_surjP</span> (<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) :<br/>
&nbsp;&nbsp;<span class="id">set_surj</span> <span class="id">setT</span> <span class="id">setT</span> (<span class="id">sigLR</span> <span class="id"><a href="mathcomp.classical.functions.html#set_surj">f</a></span>) &lt;-&gt; <span class="id">set_surj</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof203')">Proof.</span></div>
<div class="proofscript" id="proof203">
<span class="id">split</span>=&gt; [<span class="id">fsurj</span> <span class="id">b</span> <span class="id">Bb</span>/=|/<span class="id">funPsurj</span>[{}<span class="id">f</span>-&gt;]//].<br/>
<span class="id">have</span> [<span class="id">x</span> <span class="id">_</span> /(<span class="id">congr1</span> <span class="id">val</span>)/= &lt;-] := <span class="id"><a href="mathcomp.classical.classical_sets.html#SigSub">fsurj</a></span> (<span class="id">SigSub</span> (<span class="id">mem_set</span> <span class="id">Bb</span>)) <span class="id">I</span>.<br/>
<span class="kwd">by</span> <span class="kwd">exists</span> (<span class="id">set_val</span> <span class="id">x</span>) =&gt; //; <span class="id"><a href="mathcomp.classical.classical_sets.html#set_valP">apply</a></span>: <span class="id">set_valP</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">valLR_surjP</span> (<span class="id">f</span> : <span class="id">A</span> -&gt; <span class="id"><a href="mathcomp.classical.functions.html#set_surj">B</a></span>) :<br/>
&nbsp;&nbsp;<span class="id">set_surj</span> <span class="id">A</span> <span class="id">B</span> (<span class="id">valLR</span> <span class="id"><a href="mathcomp.classical.functions.html#set_surj">f</a></span>) &lt;-&gt; <span class="id">set_surj</span> <span class="id">setT</span> <span class="id">setT</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof204')">Proof.</span></div>
<div class="proofscript" id="proof204">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">sigLR_surjP</span> <span class="id">valLRK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigLR_bijP</span> (<span class="id">f</span> : <span class="id">U</span> -&gt; <span class="id"><a href="mathcomp.classical.functions.html#set_bij">V</a></span>) :<br/>
&nbsp;&nbsp;<span class="id">set_bij</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> &lt;-&gt;<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> (<span class="id">fAB</span> : {<span class="id">homo</span> <span class="id">f</span> : <span class="id">x</span> / <span class="id">A</span> <span class="id">x</span> &gt;-&gt; <span class="id">B</span> <span class="id">x</span>}),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bijective</span> (<span class="id">sigLR</span> [<span class="kwd">fun</span> <span class="id">of</span> <span class="id">mkfun</span> <span class="id">fAB</span>]).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof205')">Proof.</span></div>
<div class="proofscript" id="proof205">
<span class="id">split</span>=&gt; [[<span class="id">F</span> <span class="id">I</span> <span class="id">S</span>]|[<span class="id">fAB</span>]].<br/>
&nbsp;&nbsp;<span class="kwd">exists</span> <span class="id">F</span>; <span class="id">rewrite</span> -<span class="id">setTT_bijective</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">split</span>; [|<span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrbool.html#in2W">apply</a></span>: <span class="id">in2W</span>; <span class="id">apply</span>/<span class="id">sigLR_injP</span>|<span class="id">apply</span>/<span class="id">sigLR_surjP</span>].<br/>
<span class="id">rewrite</span> -<span class="id">setTT_bijective</span> /<span class="id">set_bij</span>.<br/>
<span class="id">set</span> <span class="id">g</span> := [<span class="kwd">fun</span> <span class="id">of</span> <span class="id">mkfun</span> <span class="id">fAB</span>] =&gt; -[<span class="id">_</span> /<span class="id">in2TT</span> <span class="id">I</span> <span class="id">S</span>]; <span class="id">pose</span> <span class="id">h</span> : <span class="id">_</span> -&gt; <span class="id">_</span> := <span class="id">g</span>.<br/>
<span class="id">rewrite</span> -[<span class="id">f</span>]/<span class="id">h</span> {}/<span class="id">h</span>; <span class="id">move</span>: <span class="id">g</span> =&gt; <span class="id">g</span> <span class="kwd">in</span> <span class="id">I</span> <span class="id">S</span> *.<br/>
<span class="kwd">by</span> <span class="id">split</span>; [<span class="id">apply</span>/<span class="id">image_subP</span>|<span class="id">apply</span>/<span class="id">sigLR_injP</span>|<span class="id">apply</span>/<span class="id">sigLR_surjP</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sigLRfun_bijP</span> <span class="id">f</span> : <span class="id">bijective</span> (<span class="id">sigLR</span> <span class="id"><a href="mathcomp.classical.functions.html#set_bij">f</a></span>) &lt;-&gt; <span class="id">set_bij</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof206')">Proof.</span></div>
<div class="proofscript" id="proof206">
<span class="id">rewrite</span> <span class="id">sigLR_bijP</span>; <span class="id">split</span>=&gt; [<span class="id">fbij</span>|[<span class="id">fAB</span>]]; [<span class="kwd">exists</span> <span class="id">funS</span>|];<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> (<span class="id">_</span> : [<span class="kwd">fun</span> <span class="id">of</span> <span class="id">_</span>] = <span class="id">f</span>)//; <span class="id">apply</span>/<span class="id">funP</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">valLR_bijP</span> <span class="id">f</span> : <span class="id">set_bij</span> <span class="id">A</span> <span class="id">B</span> (<span class="id">valLR</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#bijective">f</a></span>) &lt;-&gt; <span class="id">bijective</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof207')">Proof.</span></div>
<div class="proofscript" id="proof207">
 <span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">sigLRfun_bijP</span> <span class="id">valLRK</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">Restrictions2</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">set_bij_basic_lemmas</span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>}.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id">set</span> <span class="id">rT</span>) (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">eq_set_bijRL</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> <span class="id">g</span> : {<span class="kwd">in</span> <span class="id">A</span>, <span class="id">f</span> =1 <span class="id">g</span>} -&gt; <span class="id">set_bij</span> <span class="id">A</span> <span class="id"><a href="mathcomp.classical.functions.html#set_bij">B</a></span> <span class="id">f</span> -&gt; <span class="id">set_bij</span> <span class="id">A</span> <span class="id">B</span> <span class="id">g</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof208')">Proof.</span></div>
<div class="proofscript" id="proof208">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">eq_sigLP</span> + /<span class="id">sigL_bijP</span> =&gt; -&gt; /<span class="id">sigL_bijP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eq_set_bijLR</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> <span class="id">g</span> : {<span class="kwd">in</span> <span class="id">A</span>, <span class="id">f</span> =1 <span class="id">g</span>} -&gt; <span class="id">set_bij</span> <span class="id">A</span> <span class="id"><a href="mathcomp.classical.functions.html#set_bij">B</a></span> <span class="id">g</span> -&gt; <span class="id">set_bij</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof209')">Proof.</span></div>
<div class="proofscript" id="proof209">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">eq_sigLP</span> + /<span class="id">sigL_bijP</span> =&gt; &lt;- /<span class="id">sigL_bijP</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">eq_set_bij</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> <span class="id">g</span> : {<span class="kwd">in</span> <span class="id">A</span>, <span class="id">f</span> =1 <span class="id">g</span>} -&gt; <span class="id">set_bij</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> = <span class="id">set_bij</span> <span class="id">A</span> <span class="id">B</span> <span class="id">g</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof210')">Proof.</span></div>
<div class="proofscript" id="proof210">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">eqfg</span>; <span class="id">apply</span>/<span class="id">propeqP</span>; <span class="id">split</span>; [<span class="id"><a href="mathcomp.classical.functions.html#eq_set_bijRL">apply</a></span>: <span class="id">eq_set_bijRL</span> | <span class="id"><a href="mathcomp.classical.functions.html#eq_set_bijLR">apply</a></span>: <span class="id">eq_set_bijLR</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bij_omap</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> :<br/>
&nbsp;&nbsp;<span class="id">set_bij</span> (<span class="id">some</span> @` <span class="id">A</span>) (<span class="id">some</span> @` <span class="id">B</span>) (<span class="id">omap</span> <span class="id"><a href="mathcomp.classical.functions.html#set_bij">f</a></span>) &lt;-&gt; <span class="id">set_bij</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof211')">Proof.</span></div>
<div class="proofscript" id="proof211">
<span class="id">split</span>=&gt; [/<span class="id">Pbij</span>[<span class="id">b</span> <span class="id">mapfb</span>]|/<span class="id">Pbij</span>[{}<span class="id">f</span>-&gt;//]].<br/>
<span class="id">suff</span> -&gt; : <span class="id">f</span> = <span class="id">unbind</span> <span class="id">f</span> (<span class="id">b</span> \<span class="id">o</span> <span class="id">some</span>) :&gt; (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="kwd">by</span> [].<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">funext</span>=&gt; <span class="id">x</span>; <span class="id">rewrite</span> -<span class="id">mapfb</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bij_olift</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> : <span class="id">set_bij</span> <span class="id">A</span> (<span class="id">some</span> @` <span class="id">B</span>) (<span class="id">olift</span> <span class="id"><a href="mathcomp.classical.functions.html#set_bij">f</a></span>) &lt;-&gt; <span class="id">set_bij</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof212')">Proof.</span></div>
<div class="proofscript" id="proof212">
<span class="id">split</span>=&gt; [/<span class="id">Pbij</span>[<span class="id">b</span> <span class="id">liftfb</span>]|/<span class="id">Pbij</span>[{}<span class="id">f</span>-&gt;//]].<br/>
<span class="id">suff</span> -&gt; : <span class="id">f</span> = <span class="id">unbind</span> <span class="id">f</span> <span class="id">b</span> :&gt; (<span class="id">_</span> -&gt; <span class="id">_</span>) <span class="kwd">by</span> [].<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">funext</span>=&gt; <span class="id">x</span>; <span class="id">rewrite</span> -<span class="id">liftfb</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">set_bij_basic_lemmas</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">bij_sub_sym</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> <span class="id">C</span> : <span class="id">set</span> <span class="id">aT</span>} {<span class="id">B</span> <span class="id">D</span> : <span class="id">set</span> <span class="id">rT</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> : {<span class="id">bij</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) : <span class="id">C</span> `&lt;=` <span class="id">A</span> -&gt; <span class="id">D</span> `&lt;=` <span class="id"><a href="mathcomp.classical.functions.html#set_bij">B</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">set_bij</span> <span class="id">D</span> (<span class="id">some</span> @` <span class="id">C</span>) '<span class="id">oinv_f</span> &lt;-&gt; <span class="id">set_bij</span> <span class="id">C</span> <span class="id">D</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof213')">Proof.</span></div>
<div class="proofscript" id="proof213">
<span class="id">move</span>=&gt; <span class="id">CA</span> <span class="id">DB</span>; <span class="id">gen</span> <span class="id">have</span> <span class="id">oinv_bij</span> : <span class="id">aT</span> <span class="id">rT</span> <span class="id">A</span> <span class="id">C</span> <span class="id">B</span> <span class="id">D</span> <span class="id">CA</span> <span class="id">DB</span> <span class="id">f</span> /<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">set_bij</span> <span class="id">C</span> <span class="id"><a href="mathcomp.classical.functions.html#set_bij">D</a></span> <span class="id">f</span> -&gt; <span class="id">set_bij</span> <span class="id">D</span> (<span class="id">some</span> @` <span class="id">C</span>) '<span class="id">oinv_f</span>; <span class="id">last</span> <span class="id">first</span>.<br/>
&nbsp;&nbsp;<span class="id">split</span>=&gt; <span class="id">bij_oinv</span>; <span class="id">last</span> <span class="id">exact</span>: <span class="id">oinv_bij</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">bij_omap</span>; <span class="id">rewrite</span> -<span class="id">oinvV</span>; <span class="id">apply</span>: <span class="id">oinv_bij</span> =&gt; //; <span class="id"><a href="mathcomp.classical.classical_sets.html#image_subset">apply</a></span>: <span class="id">image_subset</span>.<br/>
<span class="id">move</span>=&gt; /<span class="id">Pbij</span>[<span class="id">fC</span> <span class="id">ffC</span>]; <span class="id">suff</span> /<span class="id">eq_set_bij</span>-&gt; : {<span class="kwd">in</span> <span class="id">D</span>, '<span class="id">oinv_f</span> =1 '<span class="id">oinv_fC</span>} <span class="kwd">by</span> [].<br/>
<span class="id">move</span>=&gt; <span class="id">x</span> <span class="id">xD</span>; <span class="id">apply</span>: '<span class="id">inj_</span>(<span class="id">oapp</span> <span class="id">f</span> <span class="id">x</span>); <span class="id">rewrite</span> ?<span class="id">mem_fun</span>//=.<br/>
- <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">subsetP</span> : <span class="id">x</span> <span class="id">xD</span>.<br/>
- <span class="kwd">by</span> <span class="id">have</span> := <span class="id">mem_set</span> ((<span class="id">image_subset</span> <span class="id">CA</span>) <span class="id">_</span> ('<span class="id">oinvS_fC</span> (<span class="id">set_mem</span> <span class="id">xD</span>))).<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">oinvK</span> ?<span class="id">ffC</span> ?<span class="id">oinvK</span>// ?(<span class="id">subsetP</span>.2 <span class="id">_</span> <span class="id">_</span> <span class="id">xD</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">splitbij_sub_sym</span> {<span class="id">aT</span> <span class="id">rT</span>} {<span class="id">A</span> <span class="id">C</span> : <span class="id">set</span> <span class="id">aT</span>} {<span class="id">B</span> <span class="id">D</span> : <span class="id">set</span> <span class="id">rT</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f</span> : {<span class="id">splitbij</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) : <span class="id">C</span> `&lt;=` <span class="id">A</span> -&gt; <span class="id">D</span> `&lt;=` <span class="id"><a href="mathcomp.classical.functions.html#set_bij">B</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">set_bij</span> <span class="id">D</span> <span class="id">C</span> <span class="id">f</span>^-1 &lt;-&gt; <span class="id">set_bij</span> <span class="id">C</span> <span class="id">D</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof214')">Proof.</span></div>
<div class="proofscript" id="proof214">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">CA</span> <span class="id">DB</span>; <span class="id">rewrite</span> -<span class="id">bij_sub_sym</span>// -<span class="id"><a href="mathcomp.classical.functions.html#bij_olift">oliftV</a></span> <span class="id">bij_olift</span>. Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">set_bij_lemmas</span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>}.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id">set</span> <span class="id">rT</span>) (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_bij00</span> <span class="id">T</span> <span class="id">U</span> (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">U</span>) : <span class="id">set_bij</span> <span class="id">set0</span> <span class="id">set0</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof215')">Proof.</span></div>
<div class="proofscript" id="proof215">
 <span class="kwd">by</span> <span class="id">split</span>=&gt; [<span class="id">_</span> []//|<span class="id">x</span> <span class="id">y</span>|//]; <span class="id">rewrite</span> <span class="id">inE</span>. Qed.</div>
<span class="kwd">Hint</span> <span class="id">Resolve</span> <span class="id">set_bij00</span> : <span class="id">core</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">inj_bij</span> <span class="id">A</span> <span class="id">f</span> : {<span class="kwd">in</span> <span class="id">A</span> &amp;, <span class="id">injective</span> <span class="id">f</span>} -&gt; <span class="id">set_bij</span> <span class="id">A</span> (<span class="id">f</span> @` <span class="id">A</span>) <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof216')">Proof.</span></div>
<div class="proofscript" id="proof216">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">Pinj</span>[{}<span class="id">f</span>-&gt;]; <span class="id">apply</span>: '<span class="id">bij_</span>[<span class="kwd">fun</span> <span class="id">f</span> <span class="kwd">in</span> <span class="id">A</span>]. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bij_subl</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> <span class="id">D</span> (<span class="id">f</span> : {<span class="id">bij</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) : <span class="id">C</span> `&lt;=` <span class="id">A</span> -&gt; <span class="id">f</span> @` <span class="id">C</span> = <span class="id"><a href="mathcomp.classical.functions.html#set_bij">D</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">set_bij</span> <span class="id">C</span> <span class="id">D</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof217')">Proof.</span></div>
<div class="proofscript" id="proof217">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">homo_setP</span> <span class="id">CA</span> &lt;-; <span class="id">split</span>=&gt; // <span class="id">x</span> <span class="id">y</span> /<span class="id">CA</span> + /<span class="id">CA</span> +; <span class="id"><a href="mathcomp.classical.functions.html#inj">apply</a></span>: <span class="id">inj</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">set_bij_lemmas</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">set_bij_lemmas</span>.<br/>
<span class="kwd">Context</span> {<span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>}.<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">aT</span>) (<span class="id">B</span> : <span class="id">set</span> <span class="id">rT</span>) (<span class="id">f</span> : <span class="id">aT</span> -&gt; <span class="id">rT</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">bij_subr</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> <span class="id">D</span> (<span class="id">f</span> : {<span class="id">bij</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) : <span class="id">C</span> = <span class="id">A</span> `&amp;` (<span class="id">f</span> @^-1` <span class="id">D</span>) -&gt; <span class="id">D</span> `&lt;=` <span class="id"><a href="mathcomp.classical.functions.html#set_bij">B</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">set_bij</span> <span class="id">C</span> <span class="id">D</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof218')">Proof.</span></div>
<div class="proofscript" id="proof218">
<span class="id">move</span>=&gt; -&gt; <span class="id">DB</span>; <span class="id">apply</span>/<span class="id">bij_sub_sym</span>=&gt; //; <span class="id"><a href="mathcomp.classical.functions.html#bij_subl">apply</a></span>: <span class="id">bij_subl</span> =&gt; //=.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">oinv_sub_image</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bij_sub</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> <span class="id">D</span> (<span class="id">f</span> : {<span class="id">bij</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) : <span class="id">C</span> `&lt;=` <span class="id">A</span> -&gt; <span class="id">D</span> `&lt;=` <span class="id">B</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">homo</span> <span class="id">f</span> : <span class="id">x</span> / <span class="id">C</span> <span class="id">x</span> &gt;-&gt; <span class="id">D</span> <span class="id">x</span>} -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">homo</span> '<span class="id">oinv_f</span> : <span class="id">x</span> / <span class="id">D</span> <span class="id"><a href="https://coq.inria.fr/doc/V8.18.0/stdlib/Coq.ssr.ssrfun.html#some">x</a></span> &gt;-&gt; (<span class="id">some</span> @` <span class="id">C</span>) <span class="id">x</span>} -&gt;<br/>
&nbsp;&nbsp;<span class="id">set_bij</span> <span class="id">C</span> <span class="id">D</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof219')">Proof.</span></div>
<div class="proofscript" id="proof219">
<span class="id">move</span>=&gt; <span class="id">CA</span> <span class="id">DB</span> <span class="id">fCD</span> <span class="id">fDC</span>; <span class="id"><a href="mathcomp.classical.functions.html#bij_subl">apply</a></span>: <span class="id">bij_subl</span> =&gt; //; <span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>.<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">image_subP</span>.<br/>
<span class="id">move</span>=&gt; <span class="id">y</span> /[<span class="id">dup</span>]/[<span class="id">dup</span>] <span class="id">Dy</span> /<span class="id">DB</span> <span class="id">By</span> /<span class="id">fDC</span> [<span class="id">x</span> <span class="id">Cx</span>]/= <span class="id">xfy</span>; <span class="kwd">exists</span> <span class="id">x</span> =&gt; //; <span class="id">move</span>: <span class="id">xfy</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id">oinvP</span> =&gt; // <span class="id">a</span> <span class="id">Aa</span> <span class="id">_</span> [-&gt;].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">splitbij_sub</span> <span class="id">A</span> <span class="id">B</span> <span class="id">C</span> <span class="id">D</span> (<span class="id">f</span> : {<span class="id">splitbij</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) : <span class="id">C</span> `&lt;=` <span class="id">A</span> -&gt; <span class="id">D</span> `&lt;=` <span class="id">B</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">homo</span> <span class="id">f</span> : <span class="id">x</span> / <span class="id">C</span> <span class="id">x</span> &gt;-&gt; <span class="id">D</span> <span class="id">x</span>} -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id">homo</span> <span class="id">f</span>^-1 : <span class="id">x</span> / <span class="id">D</span> <span class="id">x</span> &gt;-&gt; <span class="id">C</span> <span class="id">x</span>} -&gt;<br/>
&nbsp;&nbsp;<span class="id">set_bij</span> <span class="id">C</span> <span class="id">D</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof220')">Proof.</span></div>
<div class="proofscript" id="proof220">
<span class="id">move</span>=&gt; <span class="id">CA</span> <span class="id">DB</span> /(<span class="id">bij_sub</span> <span class="id">CA</span> <span class="id">DB</span>) /[<span class="id">swap</span>] <span class="id">fDC</span>; <span class="id">apply</span>=&gt; <span class="id">x</span> <span class="id">Dx</span>.<br/>
<span class="kwd">by</span> <span class="id">rewrite</span> -<span class="id">some_inv</span>/=; <span class="kwd">exists</span> (<span class="id">f</span>^-1 <span class="id">x</span>) =&gt; //; <span class="id">apply</span>: <span class="id">fDC</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">can2_bij</span> <span class="id">A</span> <span class="id">B</span> (<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}) (<span class="id">g</span> : {<span class="kwd">fun</span> <span class="id">B</span> &gt;-&gt; <span class="id">A</span>}) :<br/>
&nbsp;&nbsp;{<span class="kwd">in</span> <span class="id">A</span>, <span class="id">cancel</span> <span class="id">f</span> <span class="id">g</span>} -&gt; {<span class="kwd">in</span> <span class="id">B</span>, <span class="id">cancel</span> <span class="id">g</span> <span class="id">f</span>} -&gt; <span class="id">set_bij</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof221')">Proof.</span></div>
<div class="proofscript" id="proof221">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">can_in_inj</span> <span class="id">finj</span> /<span class="id">can_surj</span> <span class="id">gK</span>; <span class="id">split</span> =&gt; //; <span class="id">apply</span>: <span class="id">gK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bij_sub_setUrl</span> <span class="id">A</span> <span class="id">B</span> <span class="id">B</span>' <span class="id">f</span> : [<span class="id">disjoint</span> <span class="id">B</span> &amp; <span class="id">B</span>'] -&gt;<br/>
&nbsp;&nbsp;<span class="id">set_bij</span> <span class="id">A</span> (<span class="id">B</span> `|` <span class="id">B</span>') <span class="id">f</span> -&gt; <span class="id">set_bij</span> (<span class="id">A</span> `\` <span class="id">f</span> @^-1` <span class="id">B</span>') <span class="id">B</span> <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof222')">Proof.</span></div>
<div class="proofscript" id="proof222">
<span class="id">move</span>=&gt; /<span class="id">disj_setPS</span> <span class="id">BB</span>' /<span class="id">Pbij</span>[{}<span class="id">f</span>-&gt;]; <span class="id"><a href="mathcomp.classical.functions.html#bij_subr">apply</a></span>: <span class="id">bij_subr</span>; <span class="id">last</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#subsetUl">exact</a></span>: <span class="id">subsetUl</span>.<br/>
<span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">split</span>=&gt; <span class="id">x</span> /= [<span class="id">Ax</span> <span class="id">Bfx</span>]; <span class="id">split</span>=&gt; //; <span class="id">first</span> <span class="kwd">by</span> <span class="id">have</span> [] := '<span class="id">funS_f</span> <span class="id">Ax</span>.<br/>
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">B</span>'<span class="id">fx</span>; <span class="id">apply</span>: (<span class="id">BB</span>' (<span class="id">f</span> <span class="id">x</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bij_sub_setUrr</span> <span class="id">A</span> <span class="id">B</span> <span class="id">B</span>' <span class="id">f</span> : [<span class="id">disjoint</span> <span class="id">B</span> &amp; <span class="id">B</span>'] -&gt;<br/>
&nbsp;&nbsp;<span class="id">set_bij</span> <span class="id">A</span> (<span class="id">B</span> `|` <span class="id">B</span>') <span class="id">f</span> -&gt; <span class="id">set_bij</span> (<span class="id">A</span> `\` <span class="id">f</span> @^-1` <span class="id">B</span>) <span class="id">B</span>' <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof223')">Proof.</span></div>
<div class="proofscript" id="proof223">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setUC</span> <span class="id">disj_set_sym</span>; <span class="id"><a href="mathcomp.classical.functions.html#bij_sub_setUrl">apply</a></span>: <span class="id">bij_sub_setUrl</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bij_sub_setUll</span> <span class="id">A</span> <span class="id">A</span>' <span class="id">B</span> <span class="id">f</span> : [<span class="id">disjoint</span> <span class="id">A</span> &amp; <span class="id">A</span>'] -&gt;<br/>
&nbsp;&nbsp;<span class="id">set_bij</span> (<span class="id">A</span> `|` <span class="id">A</span>') <span class="id"><a href="mathcomp.classical.functions.html#set_bij">B</a></span> <span class="id">f</span> -&gt; <span class="id">set_bij</span> <span class="id">A</span> (<span class="id">B</span> `\` <span class="id">f</span> @` <span class="id">A</span>') <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof224')">Proof.</span></div>
<div class="proofscript" id="proof224">
<span class="id">move</span>=&gt; /<span class="id">disj_setPS</span> <span class="id">AA</span>' /<span class="id">Pbij</span>[{}<span class="id">f</span>-&gt;].<br/>
<span class="id"><a href="mathcomp.classical.functions.html#bij_sub">apply</a></span>: <span class="id">bij_sub</span> =&gt; [|? []//||]; <span class="id">first</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#subsetUl">exact</a></span>: <span class="id">subsetUl</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; <span class="id">x</span> <span class="id">Ax</span> /=; <span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id"><a href="mathcomp.classical.functions.html#funS">apply</a></span>: <span class="id">funS</span>; <span class="id">left</span>.<br/>
&nbsp;&nbsp;<span class="id">move</span>=&gt; [<span class="id">y</span>] <span class="id">A</span>'<span class="id">y</span> /<span class="id">inj</span>; <span class="id">rewrite</span> !<span class="id">inE</span>/= =&gt;<span class="id">yx</span>; <span class="id">apply</span>: (<span class="id">AA</span>' <span class="id">x</span>).<br/>
&nbsp;&nbsp;<span class="kwd">by</span> <span class="id">split</span>=&gt; //; <span class="id">rewrite</span> -<span class="id">yx</span> //; [<span class="id">right</span>|<span class="id">left</span>].<br/>
<span class="id">move</span>=&gt; <span class="id">z</span> [<span class="id"><a href="mathcomp.classical.boolp.html#not_exists2P">Bz</a></span> /= /<span class="id">not_exists2P</span> /<span class="id">contrapT</span>] <span class="id">A</span>'<span class="id">fxz</span>.<br/>
<span class="id">case</span>: <span class="id">oinvP</span>=&gt; // <span class="id">x</span> <span class="id">AA</span>'<span class="id">x</span> <span class="id">fxz</span>; <span class="kwd">exists</span> <span class="id">x</span> =&gt; //.<br/>
<span class="kwd">by</span> <span class="id">have</span> := <span class="id">A</span>'<span class="id">fxz</span> <span class="id">x</span>; <span class="id">rewrite</span> <span class="id">fxz</span> =&gt; -[|//]; <span class="id">case</span>: <span class="id">AA</span>'<span class="id">x</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bij_sub_setUlr</span> <span class="id">A</span> <span class="id">A</span>' <span class="id">B</span> <span class="id">f</span> : [<span class="id">disjoint</span> <span class="id">A</span> &amp; <span class="id">A</span>'] -&gt;<br/>
&nbsp;&nbsp;<span class="id">set_bij</span> (<span class="id">A</span> `|` <span class="id">A</span>') <span class="id"><a href="mathcomp.classical.functions.html#set_bij">B</a></span> <span class="id">f</span> -&gt; <span class="id">set_bij</span> <span class="id">A</span>' (<span class="id">B</span> `\` <span class="id">f</span> @` <span class="id">A</span>) <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof225')">Proof.</span></div>
<div class="proofscript" id="proof225">
 <span class="kwd">by</span> <span class="id">rewrite</span> <span class="id">setUC</span> <span class="id">disj_set_sym</span>; <span class="id"><a href="mathcomp.classical.functions.html#bij_sub_setUll">apply</a></span>: <span class="id">bij_sub_setUll</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">set_bij_lemmas</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">bij_II_D1</span> <span class="id">T</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#set">n</a></span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>) (<span class="id">f</span> : <span class="id">nat</span> -&gt; <span class="id"><a href="mathcomp.classical.functions.html#set_bij">T</a></span>) :<br/>
&nbsp;&nbsp;<span class="id">set_bij</span> `<span class="id">I_n</span>.+1 <span class="id"><a href="mathcomp.classical.functions.html#set_bij">A</a></span> <span class="id">f</span> -&gt; <span class="id">set_bij</span> `<span class="id">I_n</span> (<span class="id">A</span> `\ <span class="id">f</span> <span class="id">n</span>) <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof226')">Proof.</span></div>
<div class="proofscript" id="proof226">
<span class="id">rewrite</span> <span class="id">IIS</span> -<span class="id">image_set1</span>; <span class="id"><a href="mathcomp.classical.functions.html#bij_sub_setUll">apply</a></span>: <span class="id">bij_sub_setUll</span>.<br/>
<span class="kwd">by</span> <span class="id">apply</span>/<span class="id">disj_setPS</span> =&gt; <span class="id">i</span> [/= /[<span class="id">swap</span>]-&gt;]; <span class="id">rewrite</span> <span class="id">ltnn</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_bij_comp</span> <span class="id">T1</span> <span class="id">T2</span> <span class="id">T3</span> (<span class="id">A</span> : <span class="id">set</span> <span class="id">T1</span>) (<span class="id">B</span> : <span class="id">set</span> <span class="id">T2</span>) (<span class="id">C</span> : <span class="id">set</span> <span class="id">T3</span>) <span class="id">f</span> <span class="id">g</span> :<br/>
&nbsp;&nbsp;<span class="id">set_bij</span> <span class="id">A</span> <span class="id"><a href="mathcomp.classical.functions.html#set_bij">B</a></span> <span class="id">f</span> -&gt; <span class="id">set_bij</span> <span class="id">B</span> <span class="id"><a href="mathcomp.classical.functions.html#set_bij">C</a></span> <span class="id">g</span> -&gt; <span class="id">set_bij</span> <span class="id">A</span> <span class="id">C</span> (<span class="id">g</span> \<span class="id">o</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof227')">Proof.</span></div>
<div class="proofscript" id="proof227">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">Pbij</span>[{}<span class="id">f</span>-&gt;] /<span class="id">Pbij</span>[{}<span class="id">g</span>-&gt;]; <span class="id">apply</span>: '<span class="id">bij_</span>(<span class="id">g</span> \<span class="id">o</span> <span class="id">f</span>). Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">pointed_inverse</span>.<br/>
<span class="kwd">Context</span> {<span class="id">T</span> <span class="id">U</span>} (<span class="id">dflt</span> : <span class="id">U</span> -&gt; <span class="id">T</span>) (<span class="id">A</span> : <span class="id">set</span> <span class="id">T</span>).<br/>
<span class="kwd">Implicit</span> <span class="id">Types</span> (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">U</span>) (<span class="id">i</span> : {<span class="id">inj</span> <span class="id">A</span> &gt;-&gt; <span class="id">U</span>}).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">pinv_</span> <span class="id">f</span> := ('<span class="id">split_dflt</span> [<span class="kwd">fun</span> <span class="id">f</span> <span class="kwd">in</span> <span class="id">A</span>])^-1.<br/>
<span class="id">Local</span> <span class="kwd">Notation</span> <span class="id">pinv</span> := <span class="id"><a name="pointed_inverse.hb_instance_1523">pinv_</a></span>.<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id"><a href="mathcomp.classical.functions.html#Build">_</a></span> <span class="id">f</span> := <span class="id">Inv.Build</span> <span class="id">_</span> <span class="id">_</span> (<span class="id">pinv</span> <span class="id">f</span>) <span class="id">f</span>.<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id"><a href="mathcomp.classical.functions.html#on">_</a></span> <span class="id">f</span> := <span class="id">Fun.on</span> (<span class="id">pinv</span> <span class="id">f</span>).<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id"><a href="mathcomp.classical.functions.html#on">_</a></span> <span class="id">f</span> := <span class="id">SplitInjFun.on</span> (<span class="id">pinv</span> <span class="id">f</span>).<br/>
<span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id"><a href="mathcomp.classical.functions.html#on">_</a></span> <span class="id">i</span> := <span class="id">SplitBij.on</span> (<span class="id">pinv</span> <span class="id">i</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">pinvK</span> <span class="id">f</span> : {<span class="kwd">in</span> <span class="id">f</span> @` <span class="id">A</span>, <span class="id">cancel</span> (<span class="id">pinv</span> <span class="id">f</span>) <span class="id">f</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof228')">Proof.</span></div>
<div class="proofscript" id="proof228">
 <span class="id">exact</span>: '<span class="id">funK_</span>(<span class="id">pinv</span> <span class="id">f</span>). Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">pinvKV</span> <span class="id">f</span> : {<span class="kwd">in</span> <span class="id">A</span> &amp;, <span class="id">injective</span> <span class="id">f</span>} -&gt; {<span class="kwd">in</span> <span class="id">A</span>, <span class="id">cancel</span> <span class="id">f</span> (<span class="id">pinv</span> <span class="id">f</span>)}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof229')">Proof.</span></div>
<div class="proofscript" id="proof229">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">Pinj</span>[{}<span class="id">f</span>-&gt;]; <span class="id"><a href="mathcomp.classical.functions.html#funK">apply</a></span>: <span class="id">funK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">injpinv_surj</span> <span class="id">f</span> : {<span class="kwd">in</span> <span class="id">A</span> &amp;, <span class="id">injective</span> <span class="id">f</span>} -&gt;<br/>
&nbsp;&nbsp;<span class="id">set_surj</span> (<span class="id">f</span> @` <span class="id">A</span>) <span class="id">A</span> (<span class="id">pinv</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof230')">Proof.</span></div>
<div class="proofscript" id="proof230">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">Pinj</span>[{}<span class="id">f</span>-&gt;]; <span class="id"><a href="mathcomp.classical.functions.html#surj">apply</a></span>: <span class="id">surj</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">injpinv_image</span> <span class="id">f</span> : {<span class="kwd">in</span> <span class="id">A</span> &amp;, <span class="id">injective</span> <span class="id">f</span>} -&gt;<br/>
&nbsp;&nbsp;<span class="id">pinv</span> <span class="id">f</span> @` (<span class="id">f</span> @` <span class="id">A</span>) = <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof231')">Proof.</span></div>
<div class="proofscript" id="proof231">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">Pinj</span>[{}<span class="id">f</span>-&gt;]; <span class="id">rewrite</span> <span class="id">image_eq</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">injpinv_bij</span> <span class="id">f</span> : {<span class="kwd">in</span> <span class="id">A</span> &amp;, <span class="id">injective</span> <span class="id">f</span>} -&gt;<br/>
&nbsp;&nbsp;<span class="id">set_bij</span> (<span class="id">f</span> @` <span class="id">A</span>) <span class="id">A</span> (<span class="id">pinv</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof232')">Proof.</span></div>
<div class="proofscript" id="proof232">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">Pinj</span>[{}<span class="id">f</span>-&gt;]; <span class="id"><a href="mathcomp.classical.functions.html#bij">apply</a></span>: <span class="id">bij</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">surjpK</span> <span class="id">B</span> <span class="id">f</span> : <span class="id">set_surj</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> -&gt; {<span class="kwd">in</span> <span class="id">B</span>, <span class="id">cancel</span> (<span class="id">pinv</span> <span class="id">f</span>) <span class="id">f</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof233')">Proof.</span></div>
<div class="proofscript" id="proof233">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">homo_setP</span> <span class="id">BfA</span>; <span class="id">move</span>=&gt; <span class="id">x</span> /<span class="id">BfA</span> <span class="id">xfA</span>; <span class="id">rewrite</span> <span class="id">pinvK</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">surjpinv_image_sub</span> <span class="id">B</span> <span class="id">f</span> : <span class="id">set_surj</span> <span class="id">A</span> <span class="id"><a href="mathcomp.classical.functions.html#pinv">B</a></span> <span class="id">f</span> -&gt; <span class="id">pinv</span> <span class="id">f</span> @` <span class="id"><a href="mathcomp.classical.functions.html#pointed_inverse.A">B</a></span> `&lt;=` <span class="id">A</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof234')">Proof.</span></div>
<div class="proofscript" id="proof234">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">fsurj</span>; <span class="id">apply</span>: (<span class="id">subset_trans</span> (<span class="id">image_subset</span> <span class="id">fsurj</span>)). Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">surjpinv_inj</span> <span class="id">B</span> <span class="id">f</span> : <span class="id">set_surj</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span> -&gt; {<span class="kwd">in</span> <span class="id">B</span> &amp;, <span class="id">injective</span> (<span class="id">pinv</span> <span class="id">f</span>)}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof235')">Proof.</span></div>
<div class="proofscript" id="proof235">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">homo_setP</span>/<span class="id">sub_in2</span>; <span class="id">apply</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">surjpinv_bij</span> <span class="id">B</span> <span class="id">f</span> (<span class="id">g</span> := <span class="id">pinv</span> <span class="id">f</span>) : <span class="id">set_surj</span> <span class="id">A</span> <span class="id">B</span> <span class="id"><a href="mathcomp.classical.functions.html#set_bij">f</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">set_bij</span> <span class="id">B</span> (<span class="id">g</span> @` <span class="id">B</span>) <span class="id">g</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof236')">Proof.</span></div>
<div class="proofscript" id="proof236">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">f_surj</span>; <span class="id">split</span>=&gt; //; <span class="id"><a href="mathcomp.classical.functions.html#surjpinv_inj">apply</a></span>: <span class="id">surjpinv_inj</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bijpinv_bij</span> <span class="id">B</span> <span class="id">f</span> : <span class="id">set_bij</span> <span class="id">A</span> <span class="id"><a href="mathcomp.classical.functions.html#set_bij">B</a></span> <span class="id">f</span> -&gt; <span class="id">set_bij</span> <span class="id">B</span> <span class="id">A</span> (<span class="id">pinv</span> <span class="id">f</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof237')">Proof.</span></div>
<div class="proofscript" id="proof237">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; /<span class="id">Pbij</span>[{}<span class="id">f</span>-&gt;]; <span class="id">have</span> /= := '<span class="id">bij_</span>(<span class="id">pinv</span> <span class="id">f</span>); <span class="id">rewrite</span> <span class="id">image_eq</span>. Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id">pPbij</span>.<br/>
<span class="kwd">Context</span> {<span class="id"><a href="mathcomp.classical.functions.html#pointed_inverse.U">B</a></span>: <span class="id">set</span> <span class="id">U</span>} {<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">U</span>} (<span class="id"><a href="mathcomp.classical.functions.html#set_bij">fbij</a></span> : <span class="id">set_bij</span> <span class="id">A</span> <span class="id">B</span> <span class="id">f</span>).<br/>
<span class="kwd">Lemma</span> <span class="id">pPbij_</span> : {<span class="id">s</span> : {<span class="id">splitbij</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>} | <span class="id">f</span> = <span class="id">s</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof238')">Proof.</span></div>
<div class="proofscript" id="proof238">
<span class="id">pose</span> <span class="id">h</span> := [<span class="id">splitbij</span> <span class="id">of</span> '<span class="id">split_dflt</span> [<span class="kwd">fun</span> <span class="id">fbij</span> <span class="kwd">in</span> <span class="id">A</span>]]; <span class="id"><a href="mathcomp.classical.functions.html#pointed_inverse.pPbij.f">have</a></span> : <span class="id">f</span> = <span class="id">h</span> <span class="kwd">by</span> [].<br/>
<span class="kwd">by</span> <span class="id">move</span>: <span class="id">h</span>; <span class="id">rewrite</span> /= (<span class="id">image_eq</span> <span class="id">fbij</span>) =&gt; <span class="id">h</span>; <span class="kwd">exists</span> <span class="id">h</span>.<br/>
Qed.</div>
<span class="kwd">End</span> <span class="id">pPbij</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">pPinj</span>.<br/>
<span class="kwd">Context</span> {<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">U</span>} (<span class="id">finj</span> : {<span class="kwd">in</span> <span class="id">A</span> &amp;, <span class="id">injective</span> <span class="id">f</span>}).<br/>
<span class="kwd">Lemma</span> <span class="id">pPinj_</span> : {<span class="id">i</span> : {<span class="id">splitinj</span> <span class="id">A</span> &gt;-&gt; <span class="id">U</span>} | <span class="id">f</span> = <span class="id">i</span>}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof239')">Proof.</span></div>
<div class="proofscript" id="proof239">
<span class="kwd">by</span> <span class="id">move</span>: <span class="id">finj</span> =&gt; /<span class="id">Pinj</span>[<span class="id">g</span> -&gt;]; <span class="kwd">exists</span> [<span class="id">splitinj</span> <span class="id">of</span> '<span class="id">split_dflt</span> [<span class="kwd">fun</span> <span class="id">g</span> <span class="kwd">in</span> <span class="id">A</span>]].<br/>
Qed.</div>
<span class="kwd">End</span> <span class="id">pPinj</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">injpPfun</span>.<br/>
<span class="kwd">Context</span> {<span class="id">B</span> : <span class="id">set</span> <span class="id">U</span>} {<span class="id">f</span> : {<span class="id">inj</span> <span class="id">A</span> &gt;-&gt; <span class="id">U</span>}} (<span class="id">ffun</span> : {<span class="id">homo</span> <span class="id">f</span> : <span class="id">x</span> / <span class="id">A</span> <span class="id">x</span> &gt;-&gt; <span class="id">B</span> <span class="id">x</span>}).<br/>
<span class="kwd">Let</span> <span class="id">g</span> : <span class="id">_</span> -&gt; <span class="id">_</span> := <span class="id">f</span>.<br/>
#[<span class="id">local</span>] <span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">SplitInj.copy</span> <span class="id">g</span> ('<span class="id">split_dflt</span> [<span class="kwd">fun</span> <span class="id">g</span> <span class="kwd">in</span> <span class="id">A</span>]).<br/>
#[<span class="id">local</span>] <span class="id">HB.instance</span> <span class="kwd">Definition</span> <span class="id">_</span> := <span class="id">isFun.Build</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">g</span> <span class="id">ffun</span>.<br/>
<span class="kwd">Lemma</span> <span class="id">injpPfun_</span> : {<span class="id">i</span> : {<span class="id">splitinjfun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>} | <span class="id">f</span> = <span class="id">i</span> :&gt; (<span class="id">_</span> -&gt; <span class="id">_</span>)}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof240')">Proof.</span></div>
<div class="proofscript" id="proof240">
 <span class="kwd">by</span> <span class="kwd">exists</span> [<span class="id">splitinjfun</span> <span class="id">of</span> <span class="id">g</span>]. Qed.</div>
<span class="kwd">End</span> <span class="id">injpPfun</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">funpPinj</span>.<br/>
<span class="kwd">Context</span> {<span class="id">B</span> : <span class="id">set</span> <span class="id">U</span>} {<span class="id">f</span> : {<span class="kwd">fun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>}} (<span class="id">finj</span> : {<span class="kwd">in</span> <span class="id">A</span> &amp;, <span class="id">injective</span> <span class="id">f</span>}).<br/>
<span class="kwd">Lemma</span> <span class="id">funpPinj_</span> : {<span class="id">i</span> : {<span class="id">splitinjfun</span> <span class="id">A</span> &gt;-&gt; <span class="id">B</span>} | <span class="id">f</span> = <span class="id">i</span> :&gt; (<span class="id">_</span> -&gt; <span class="id">_</span>)}.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof241')">Proof.</span></div>
<div class="proofscript" id="proof241">
 <span class="kwd">by</span> <span class="id">move</span>: <span class="id">finj</span> '<span class="id">funS_f</span> =&gt; /<span class="id">pPinj_</span>[<span class="id">g</span> -&gt;]/<span class="id">injpPfun_</span>. Qed.</div>
<span class="kwd">End</span> <span class="id">funpPinj</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id">pointed_inverse</span>.<br/>
<span class="kwd">Notation</span> "''<span class="id">pinv_</span>' <span class="id">dflt</span>" := (<span class="id">pinv_</span> <span class="id">dflt</span>) : <span class="id">form_scope</span>.<br/>
<span class="kwd">Notation</span> <span class="id">pinv</span> := '<span class="id">pinv_point</span>.<br/>
<span class="kwd">Notation</span> "''<span class="id">pPbij_</span>' <span class="id">dflt</span>" := (<span class="id">pPbij_</span> <span class="id">dflt</span>) : <span class="id">form_scope</span>.<br/>
<span class="kwd">Notation</span> <span class="id">pPbij</span> := '<span class="id">pPbij_point</span>.<br/>
<span class="kwd">Notation</span> <span class="id">selfPbij</span> := '<span class="id">pPbij_id</span>.<br/>
<span class="kwd">Notation</span> "''<span class="id">pPinj_</span>' <span class="id">dflt</span>" := (<span class="id">pPinj_</span> <span class="id">dflt</span>) : <span class="id">form_scope</span>.<br/>
<span class="kwd">Notation</span> <span class="id">pPinj</span> := '<span class="id">pPinj_point</span>.<br/>
<span class="kwd">Notation</span> "''<span class="id">injpPfun_</span>' <span class="id">dflt</span>" := (<span class="id">injpPfun_</span> <span class="id">dflt</span>) : <span class="id">form_scope</span>.<br/>
<span class="kwd">Notation</span> <span class="id">injpPfun</span> := '<span class="id">injpPfun_point</span>.<br/>
<span class="kwd">Notation</span> "''<span class="id">funpPinj_</span>' <span class="id">dflt</span>" := (<span class="id">funpPinj_</span> <span class="id">dflt</span>) : <span class="id">form_scope</span>.<br/>
<span class="kwd">Notation</span> <span class="id">funpPinj</span> := '<span class="id">funpPinj_point</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">function_space</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ring_scope</span>.<br/>
<span class="kwd">Import</span> <span class="id">GRing.Theory</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">cst</span> {<span class="id">T</span> <span class="id">T</span>' : <span class="kwd">Type</span>} (<span class="id">x</span> : <span class="id">T</span>') : <span class="id">T</span> -&gt; <span class="id">T</span>' := <span class="kwd">fun</span>=&gt; <span class="id">x</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">preimage_cst</span> {<span class="id">aT</span> <span class="id">rT</span> : <span class="kwd">Type</span>} (<span class="id">a</span> : <span class="id">aT</span>) (<span class="id">A</span> : <span class="id">set</span> <span class="id">aT</span>) :<br/>
&nbsp;&nbsp;@<span class="id">cst</span> <span class="id">rT</span> <span class="id">_</span> <span class="id">a</span> @^-1` <span class="id">A</span> = <span class="kwd">if</span> <span class="id">a</span> \<span class="kwd">in</span> <span class="id"><a href="mathcomp.classical.classical_sets.html#setT">A</a></span> <span class="kwd">then</span> <span class="id">setT</span> <span class="kwd">else</span> <span class="id">set0</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof242')">Proof.</span></div>
<div class="proofscript" id="proof242">
<span class="id">apply</span>/<span class="id">seteqP</span>; <span class="id">rewrite</span> /<span class="id">preimage</span>; <span class="id">split</span>; <span class="id">first</span> <span class="kwd">by</span> <span class="id">move</span>=&gt; *; <span class="id">rewrite</span> <span class="id">mem_set</span>.<br/>
<span class="kwd">by</span> <span class="id">case</span>: <span class="id">ifPn</span> =&gt; [/[!<span class="id">inE</span>] ?//|<span class="id">_</span>]; <span class="id"><a href="mathcomp.classical.classical_sets.html#sub0set">exact</a></span>: <span class="id">sub0set</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Obligation</span> <span class="kwd">Tactic</span> := <span class="id">idtac</span>.<br/>
<br/>
<span class="id">Program</span> <span class="kwd">Definition</span> <span class="id">fct_zmodMixin</span> (<span class="id">T</span> : <span class="kwd">Type</span>) (<span class="id">M</span> : <span class="id">zmodType</span>) :=<br/>
&nbsp;&nbsp;@<span class="id">ZmodMixin</span> (<span class="id">T</span> -&gt; <span class="id">M</span>) \0 (<span class="kwd">fun</span> <span class="id">f</span> <span class="id">x</span> =&gt; - <span class="id">f</span> <span class="id">x</span>) (<span class="kwd">fun</span> <span class="id">f</span> <span class="id">g</span> =&gt; <span class="id">f</span> \+ <span class="id">g</span>) <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof243')">Next Obligation.</span></div>
<div class="proofscript" id="proof243">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">T</span> <span class="id">M</span> <span class="id">f</span> <span class="id">g</span> <span class="id">h</span>; <span class="id">rewrite</span> <span class="id">funeqE</span>=&gt; <span class="id">x</span> /=; <span class="id">rewrite</span> <span class="id">addrA</span>. Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof244')">Next Obligation.</span></div>
<div class="proofscript" id="proof244">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">T</span> <span class="id">M</span> <span class="id">f</span> <span class="id">g</span>; <span class="id">rewrite</span> <span class="id">funeqE</span>=&gt; <span class="id">x</span> /=; <span class="id">rewrite</span> <span class="id">addrC</span>. Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof245')">Next Obligation.</span></div>
<div class="proofscript" id="proof245">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">T</span> <span class="id">M</span> <span class="id">f</span>; <span class="id">rewrite</span> <span class="id">funeqE</span>=&gt; <span class="id">x</span> /=; <span class="id">rewrite</span> <span class="id">add0r</span>. Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof246')">Next Obligation.</span></div>
<div class="proofscript" id="proof246">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">T</span> <span class="id">M</span> <span class="id">f</span>; <span class="id">rewrite</span> <span class="id">funeqE</span>=&gt; <span class="id">x</span> /=; <span class="id">rewrite</span> <span class="id">addNr</span>. Qed.</div>
<span class="kwd">Canonical</span> <span class="id">fct_zmodType</span> <span class="id">T</span> (<span class="id">M</span> : <span class="id">zmodType</span>) := <span class="id">ZmodType</span> (<span class="id">T</span> -&gt; <span class="id">M</span>) (<span class="id">fct_zmodMixin</span> <span class="id">T</span> <span class="id">M</span>).<br/>
<br/>
<span class="id">Program</span> <span class="kwd">Definition</span> <span class="id">fct_ringMixin</span> (<span class="id">T</span> : <span class="id">pointedType</span>) (<span class="id">M</span> : <span class="id">ringType</span>) :=<br/>
&nbsp;&nbsp;@<span class="id">RingMixin</span> [<span class="id">zmodType</span> <span class="id">of</span> <span class="id">T</span> -&gt; <span class="id">M</span>] (<span class="id">cst</span> 1) (<span class="kwd">fun</span> <span class="id">f</span> <span class="id">g</span> =&gt; <span class="id">f</span> \* <span class="id">g</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof247')">Next Obligation.</span></div>
<div class="proofscript" id="proof247">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">T</span> <span class="id">M</span> <span class="id">f</span> <span class="id">g</span> <span class="id">h</span>; <span class="id">rewrite</span> <span class="id">funeqE</span>=&gt; <span class="id">x</span> /=; <span class="id">rewrite</span> <span class="id">mulrA</span>. Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof248')">Next Obligation.</span></div>
<div class="proofscript" id="proof248">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">T</span> <span class="id">M</span> <span class="id">f</span>; <span class="id">rewrite</span> <span class="id">funeqE</span>=&gt; <span class="id">x</span> /=; <span class="id">rewrite</span> <span class="id">mul1r</span>. Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof249')">Next Obligation.</span></div>
<div class="proofscript" id="proof249">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">T</span> <span class="id">M</span> <span class="id">f</span>; <span class="id">rewrite</span> <span class="id">funeqE</span>=&gt; <span class="id">x</span> /=; <span class="id">rewrite</span> <span class="id">mulr1</span>. Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof250')">Next Obligation.</span></div>
<div class="proofscript" id="proof250">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">T</span> <span class="id">M</span> <span class="id">f</span> <span class="id">g</span> <span class="id">h</span>; <span class="id">rewrite</span> <span class="id">funeqE</span>=&gt; <span class="id">x</span>/=; <span class="id">rewrite</span> <span class="id">mulrDl</span>. Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof251')">Next Obligation.</span></div>
<div class="proofscript" id="proof251">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">T</span> <span class="id">M</span> <span class="id">f</span> <span class="id">g</span> <span class="id">h</span>; <span class="id">rewrite</span> <span class="id">funeqE</span>=&gt; <span class="id">x</span>/=; <span class="id">rewrite</span> <span class="id">mulrDr</span>. Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof252')">Next Obligation.</span></div>
<div class="proofscript" id="proof252">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">T</span> <span class="id">M</span> ; <span class="id">apply</span>/<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; /(<span class="id">_</span> <span class="id">point</span>) /<span class="id">eqP</span>; <span class="id">rewrite</span> <span class="id">oner_eq0</span>.<br/>
Qed.</div>
<span class="kwd">Canonical</span> <span class="id">fct_ringType</span> (<span class="id">T</span> : <span class="id">pointedType</span>) (<span class="id">M</span> : <span class="id">ringType</span>) :=<br/>
&nbsp;&nbsp;<span class="id">RingType</span> (<span class="id">T</span> -&gt; <span class="id">M</span>) (<span class="id">fct_ringMixin</span> <span class="id">T</span> <span class="id">M</span>).<br/>
<br/>
<span class="id">Program</span> <span class="kwd">Canonical</span> <span class="id">fct_comRingType</span> (<span class="id">T</span> : <span class="id">pointedType</span>) (<span class="id">M</span> : <span class="id">comRingType</span>) :=<br/>
&nbsp;&nbsp;<span class="id">ComRingType</span> (<span class="id">T</span> -&gt; <span class="id">M</span>) <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof253')">Next Obligation.</span></div>
<div class="proofscript" id="proof253">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">T</span> <span class="id">M</span> <span class="id">f</span> <span class="id">g</span>; <span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">x</span>/=; <span class="id">rewrite</span> <span class="id">mulrC</span>. Qed.</div>
<br/>
<span class="id">Program</span> <span class="kwd">Definition</span> <span class="id">fct_lmodMixin</span> (<span class="id">U</span> : <span class="kwd">Type</span>) (<span class="id">R</span> : <span class="id">ringType</span>) (<span class="id">V</span> : <span class="id">lmodType</span> <span class="id">R</span>)<br/>
&nbsp;&nbsp;:= @<span class="id">LmodMixin</span> <span class="id">R</span> [<span class="id">zmodType</span> <span class="id">of</span> <span class="id">U</span> -&gt; <span class="id">V</span>] (<span class="kwd">fun</span> <span class="id">k</span> <span class="id">f</span> =&gt; <span class="id">k</span> \*: <span class="id">f</span>) <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof254')">Next Obligation.</span></div>
<div class="proofscript" id="proof254">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">U</span> <span class="id">R</span> <span class="id">V</span> <span class="id">k</span> <span class="id">f</span> <span class="id">v</span>; <span class="id">rewrite</span> <span class="id">funeqE</span>=&gt; <span class="id">x</span>; <span class="id">exact</span>: <span class="id">scalerA</span>. Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof255')">Next Obligation.</span></div>
<div class="proofscript" id="proof255">
 <span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">U</span> <span class="id">R</span> <span class="id">V</span> <span class="id">f</span>; <span class="id">rewrite</span> <span class="id">funeqE</span>=&gt; <span class="id">x</span> /=; <span class="id">rewrite</span> <span class="id">scale1r</span>. Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof256')">Next Obligation.</span></div>
<div class="proofscript" id="proof256">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">U</span> <span class="id">R</span> <span class="id">V</span> <span class="id">f</span> <span class="id">g</span> <span class="id">h</span>; <span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">x</span> /=; <span class="id">rewrite</span> <span class="id">scalerDr</span>.<br/>
Qed.</div>
<div><span class="toggleproof" onclick="toggleDisplay('proof257')">Next Obligation.</span></div>
<div class="proofscript" id="proof257">
<span class="kwd">by</span> <span class="id">move</span>=&gt; <span class="id">U</span> <span class="id">R</span> <span class="id">V</span> <span class="id">f</span> <span class="id">g</span> <span class="id">h</span>; <span class="id">rewrite</span> <span class="id">funeqE</span> =&gt; <span class="id">x</span> /=; <span class="id">rewrite</span> <span class="id">scalerDl</span>.<br/>
Qed.</div>
<span class="kwd">Canonical</span> <span class="id">fct_lmodType</span> <span class="id">U</span> (<span class="id">R</span> : <span class="id">ringType</span>) (<span class="id">V</span> : <span class="id">lmodType</span> <span class="id">R</span>) :=<br/>
&nbsp;&nbsp;<span class="id">LmodType</span> <span class="id">_</span> (<span class="id">U</span> -&gt; <span class="id">V</span>) (<span class="id">fct_lmodMixin</span> <span class="id">U</span> <span class="id">V</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">fct_sumE</span> (<span class="id">I</span> <span class="id">T</span> : <span class="kwd">Type</span>) (<span class="id">M</span> : <span class="id">zmodType</span>) <span class="id">r</span> (<span class="id">P</span> : {<span class="id">pred</span> <span class="id">I</span>}) (<span class="id">f</span> : <span class="id">I</span> -&gt; <span class="id">T</span> -&gt; <span class="id">M</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x</span> : <span class="id">T</span>) :<br/>
&nbsp;&nbsp;(\<span class="id">sum_</span>(<span class="id">i</span> &lt;- <span class="id">r</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">f</span> <span class="id">i</span>) <span class="id">x</span> = \<span class="id">sum_</span>(<span class="id">i</span> &lt;- <span class="id">r</span> | <span class="id">P</span> <span class="id">i</span>) <span class="id">f</span> <span class="id">i</span> <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof258')">Proof.</span></div>
<div class="proofscript" id="proof258">
 <span class="kwd">by</span> <span class="id">elim</span>/<span class="id">big_rec2</span>: <span class="id">_</span> =&gt; //= <span class="id">i</span> <span class="id">y</span> ? <span class="id">Pi</span> &lt;-. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id">function_space</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id">function_space_lemmas</span>.<br/>
<span class="id">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">ring_scope</span>.<br/>
<span class="kwd">Import</span> <span class="id">GRing.Theory</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">addrfctE</span> (<span class="id">T</span> : <span class="kwd">Type</span>) (<span class="id">K</span> : <span class="id">zmodType</span>) (<span class="id">f</span> <span class="id">g</span> : <span class="id">T</span> -&gt; <span class="id">K</span>) :<br/>
&nbsp;&nbsp;<span class="id">f</span> + <span class="id">g</span> = (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">f</span> <span class="id">x</span> + <span class="id">g</span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof259')">Proof.</span></div>
<div class="proofscript" id="proof259">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">sumrfctE</span> (<span class="id">T</span> : <span class="kwd">Type</span>) (<span class="id">K</span> : <span class="id">zmodType</span>) (<span class="id">s</span> : <span class="id">seq</span> (<span class="id">T</span> -&gt; <span class="id">K</span>)) :<br/>
&nbsp;&nbsp;\<span class="id">sum_</span>(<span class="id">f</span> &lt;- <span class="id">s</span>) <span class="id">f</span> = (<span class="kwd">fun</span> <span class="id">x</span> =&gt; \<span class="id">sum_</span>(<span class="id">f</span> &lt;- <span class="id">s</span>) <span class="id">f</span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof260')">Proof.</span></div>
<div class="proofscript" id="proof260">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">funext</span> =&gt; <span class="id">x</span>;<span class="id">elim</span>/<span class="id">big_ind2</span> : <span class="id">_</span> =&gt; // <span class="id">_</span> <span class="id">a</span> <span class="id">_</span> <span class="id">b</span> &lt;- &lt;-. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">opprfctE</span> (<span class="id">T</span> : <span class="kwd">Type</span>) (<span class="id">K</span> : <span class="id">zmodType</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">K</span>) : - <span class="id">f</span> = (<span class="kwd">fun</span> <span class="id">x</span> =&gt; - <span class="id">f</span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof261')">Proof.</span></div>
<div class="proofscript" id="proof261">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">mulrfctE</span> (<span class="id">T</span> : <span class="id">pointedType</span>) (<span class="id">K</span> : <span class="id">ringType</span>) (<span class="id">f</span> <span class="id">g</span> : <span class="id">T</span> -&gt; <span class="id">K</span>) :<br/>
&nbsp;&nbsp;<span class="id">f</span> * <span class="id">g</span> = (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">f</span> <span class="id">x</span> * <span class="id">g</span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof262')">Proof.</span></div>
<div class="proofscript" id="proof262">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">scalrfctE</span> (<span class="id">T</span> : <span class="id">pointedType</span>) (<span class="id">K</span> : <span class="id">ringType</span>) (<span class="id">L</span> : <span class="id">lmodType</span> <span class="id">K</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">k</span> (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">L</span>) :<br/>
&nbsp;&nbsp;<span class="id">k</span> *: <span class="id">f</span> = (<span class="kwd">fun</span> <span class="id">x</span> : <span class="id">T</span> =&gt; <span class="id">k</span> *: <span class="id">f</span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof263')">Proof.</span></div>
<div class="proofscript" id="proof263">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">cstE</span> (<span class="id">T</span> <span class="id">T</span>': <span class="kwd">Type</span>) (<span class="id">x</span> : <span class="id">T</span>) : <span class="id">cst</span> <span class="id">x</span> = <span class="kwd">fun</span> <span class="id">_</span>: <span class="id">T</span>' =&gt; <span class="id">x</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof264')">Proof.</span></div>
<div class="proofscript" id="proof264">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">exprfctE</span> (<span class="id">T</span> : <span class="id">pointedType</span>) (<span class="id">K</span> : <span class="id">ringType</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">K</span>) <span class="id">n</span> :<br/>
&nbsp;&nbsp;<span class="id">f</span> ^+ <span class="id">n</span> = (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">f</span> <span class="id">x</span> ^+ <span class="id">n</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof265')">Proof.</span></div>
<div class="proofscript" id="proof265">
 <span class="kwd">by</span> <span class="id">elim</span>: <span class="id">n</span> =&gt; [|<span class="id">n</span> <span class="id">h</span>]; <span class="id">rewrite</span> <span class="id">funeqE</span>=&gt; ?; <span class="id">rewrite</span> ?<span class="id">expr0</span> ?<span class="id">exprS</span> ?<span class="id">h</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">compE</span> (<span class="id">T1</span> <span class="id">T2</span> <span class="id">T3</span> : <span class="kwd">Type</span>) (<span class="id">f</span> : <span class="id">T1</span> -&gt; <span class="id">T2</span>) (<span class="id">g</span> : <span class="id">T2</span> -&gt; <span class="id">T3</span>) :<br/>
&nbsp;&nbsp;<span class="id">g</span> \<span class="id">o</span> <span class="id">f</span> = <span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">g</span> (<span class="id">f</span> <span class="id">x</span>).<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof266')">Proof.</span></div>
<div class="proofscript" id="proof266">
 <span class="kwd">by</span> []. Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id">fctE</span> :=<br/>
&nbsp;&nbsp;(<span class="id">cstE</span>, <span class="id"><a href="mathcomp.classical.functions.html#opprfctE">compE</a></span>, <span class="id">opprfctE</span>, <span class="id">addrfctE</span>, <span class="id">mulrfctE</span>, <span class="id">scalrfctE</span>, <span class="id">exprfctE</span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id">function_space_lemmas</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">inv_funK</span> <span class="id">T</span> (<span class="id">R</span> : <span class="id">unitRingType</span>) (<span class="id">f</span> : <span class="id">T</span> -&gt; <span class="id">R</span>) : <span class="id">f</span>\^-1\^-1%<span class="id">R</span> = <span class="id">f</span>.<br/>
<div><span class="toggleproof" onclick="toggleDisplay('proof267')">Proof.</span></div>
<div class="proofscript" id="proof267">
 <span class="kwd">by</span> <span class="id">apply</span>/<span class="id">funeqP</span> =&gt; <span class="id">x</span>; <span class="id">rewrite</span> /<span class="id">inv_fun</span>/= <span class="id">GRing.invrK</span>. Qed.</div>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/yoshihiro503/coq2html/tree/yoshihiro503%40generate_index">a fork of coq2html</a></div>
</body>
</html>
